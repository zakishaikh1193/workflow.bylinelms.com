(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(a){if(a.ep)return;a.ep=!0;const l=r(a);fetch(a.href,l)}})();var Qc={exports:{}},Ga={},Kc={exports:{}},we={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pn=Symbol.for("react.element"),vm=Symbol.for("react.portal"),jm=Symbol.for("react.fragment"),wm=Symbol.for("react.strict_mode"),Nm=Symbol.for("react.profiler"),bm=Symbol.for("react.provider"),km=Symbol.for("react.context"),Sm=Symbol.for("react.forward_ref"),_m=Symbol.for("react.suspense"),Cm=Symbol.for("react.memo"),Dm=Symbol.for("react.lazy"),zo=Symbol.iterator;function Tm(e){return e===null||typeof e!="object"?null:(e=zo&&e[zo]||e["@@iterator"],typeof e=="function"?e:null)}var Yc={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Xc=Object.assign,Zc={};function Fr(e,t,r){this.props=e,this.context=t,this.refs=Zc,this.updater=r||Yc}Fr.prototype.isReactComponent={};Fr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Fr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Jc(){}Jc.prototype=Fr.prototype;function Ri(e,t,r){this.props=e,this.context=t,this.refs=Zc,this.updater=r||Yc}var $i=Ri.prototype=new Jc;$i.constructor=Ri;Xc($i,Fr.prototype);$i.isPureReactComponent=!0;var Ro=Array.isArray,ed=Object.prototype.hasOwnProperty,Oi={current:null},td={key:!0,ref:!0,__self:!0,__source:!0};function sd(e,t,r){var n,a={},l=null,i=null;if(t!=null)for(n in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(l=""+t.key),t)ed.call(t,n)&&!td.hasOwnProperty(n)&&(a[n]=t[n]);var o=arguments.length-2;if(o===1)a.children=r;else if(1<o){for(var c=Array(o),x=0;x<o;x++)c[x]=arguments[x+2];a.children=c}if(e&&e.defaultProps)for(n in o=e.defaultProps,o)a[n]===void 0&&(a[n]=o[n]);return{$$typeof:Pn,type:e,key:l,ref:i,props:a,_owner:Oi.current}}function Em(e,t){return{$$typeof:Pn,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Fi(e){return typeof e=="object"&&e!==null&&e.$$typeof===Pn}function Pm(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var $o=/\/+/g;function ul(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Pm(""+e.key):t.toString(36)}function la(e,t,r,n,a){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(l){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Pn:case vm:i=!0}}if(i)return i=e,a=a(i),e=n===""?"."+ul(i,0):n,Ro(a)?(r="",e!=null&&(r=e.replace($o,"$&/")+"/"),la(a,t,r,"",function(x){return x})):a!=null&&(Fi(a)&&(a=Em(a,r+(!a.key||i&&i.key===a.key?"":(""+a.key).replace($o,"$&/")+"/")+e)),t.push(a)),1;if(i=0,n=n===""?".":n+":",Ro(e))for(var o=0;o<e.length;o++){l=e[o];var c=n+ul(l,o);i+=la(l,t,r,c,a)}else if(c=Tm(e),typeof c=="function")for(e=c.call(e),o=0;!(l=e.next()).done;)l=l.value,c=n+ul(l,o++),i+=la(l,t,r,c,a);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Fn(e,t,r){if(e==null)return e;var n=[],a=0;return la(e,n,"","",function(l){return t.call(r,l,a++)}),n}function Im(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var jt={current:null},ia={transition:null},Mm={ReactCurrentDispatcher:jt,ReactCurrentBatchConfig:ia,ReactCurrentOwner:Oi};function rd(){throw Error("act(...) is not supported in production builds of React.")}we.Children={map:Fn,forEach:function(e,t,r){Fn(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Fn(e,function(){t++}),t},toArray:function(e){return Fn(e,function(t){return t})||[]},only:function(e){if(!Fi(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};we.Component=Fr;we.Fragment=jm;we.Profiler=Nm;we.PureComponent=Ri;we.StrictMode=wm;we.Suspense=_m;we.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mm;we.act=rd;we.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Xc({},e.props),a=e.key,l=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,i=Oi.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)ed.call(t,c)&&!td.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){o=Array(c);for(var x=0;x<c;x++)o[x]=arguments[x+2];n.children=o}return{$$typeof:Pn,type:e.type,key:a,ref:l,props:n,_owner:i}};we.createContext=function(e){return e={$$typeof:km,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:bm,_context:e},e.Consumer=e};we.createElement=sd;we.createFactory=function(e){var t=sd.bind(null,e);return t.type=e,t};we.createRef=function(){return{current:null}};we.forwardRef=function(e){return{$$typeof:Sm,render:e}};we.isValidElement=Fi;we.lazy=function(e){return{$$typeof:Dm,_payload:{_status:-1,_result:e},_init:Im}};we.memo=function(e,t){return{$$typeof:Cm,type:e,compare:t===void 0?null:t}};we.startTransition=function(e){var t=ia.transition;ia.transition={};try{e()}finally{ia.transition=t}};we.unstable_act=rd;we.useCallback=function(e,t){return jt.current.useCallback(e,t)};we.useContext=function(e){return jt.current.useContext(e)};we.useDebugValue=function(){};we.useDeferredValue=function(e){return jt.current.useDeferredValue(e)};we.useEffect=function(e,t){return jt.current.useEffect(e,t)};we.useId=function(){return jt.current.useId()};we.useImperativeHandle=function(e,t,r){return jt.current.useImperativeHandle(e,t,r)};we.useInsertionEffect=function(e,t){return jt.current.useInsertionEffect(e,t)};we.useLayoutEffect=function(e,t){return jt.current.useLayoutEffect(e,t)};we.useMemo=function(e,t){return jt.current.useMemo(e,t)};we.useReducer=function(e,t,r){return jt.current.useReducer(e,t,r)};we.useRef=function(e){return jt.current.useRef(e)};we.useState=function(e){return jt.current.useState(e)};we.useSyncExternalStore=function(e,t,r){return jt.current.useSyncExternalStore(e,t,r)};we.useTransition=function(){return jt.current.useTransition()};we.version="18.3.1";Kc.exports=we;var m=Kc.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Am=m,Lm=Symbol.for("react.element"),zm=Symbol.for("react.fragment"),Rm=Object.prototype.hasOwnProperty,$m=Am.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Om={key:!0,ref:!0,__self:!0,__source:!0};function nd(e,t,r){var n,a={},l=null,i=null;r!==void 0&&(l=""+r),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(i=t.ref);for(n in t)Rm.call(t,n)&&!Om.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:Lm,type:e,key:l,ref:i,props:a,_owner:$m.current}}Ga.Fragment=zm;Ga.jsx=nd;Ga.jsxs=nd;Qc.exports=Ga;var s=Qc.exports,ad={exports:{}},At={},ld={exports:{}},id={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(_,T){var F=_.length;_.push(T);e:for(;0<F;){var B=F-1>>>1,V=_[B];if(0<a(V,T))_[B]=T,_[F]=V,F=B;else break e}}function r(_){return _.length===0?null:_[0]}function n(_){if(_.length===0)return null;var T=_[0],F=_.pop();if(F!==T){_[0]=F;e:for(var B=0,V=_.length,se=V>>>1;B<se;){var Q=2*(B+1)-1,S=_[Q],ie=Q+1,ce=_[ie];if(0>a(S,F))ie<V&&0>a(ce,S)?(_[B]=ce,_[ie]=F,B=ie):(_[B]=S,_[Q]=F,B=Q);else if(ie<V&&0>a(ce,F))_[B]=ce,_[ie]=F,B=ie;else break e}}return T}function a(_,T){var F=_.sortIndex-T.sortIndex;return F!==0?F:_.id-T.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var c=[],x=[],f=1,j=null,d=3,w=!1,N=!1,P=!1,z=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(_){for(var T=r(x);T!==null;){if(T.callback===null)n(x);else if(T.startTime<=_)n(x),T.sortIndex=T.expirationTime,t(c,T);else break;T=r(x)}}function E(_){if(P=!1,v(_),!N)if(r(c)!==null)N=!0,Te(M);else{var T=r(x);T!==null&&Ue(E,T.startTime-_)}}function M(_,T){N=!1,P&&(P=!1,p(b),b=-1),w=!0;var F=d;try{for(v(T),j=r(c);j!==null&&(!(j.expirationTime>T)||_&&!ee());){var B=j.callback;if(typeof B=="function"){j.callback=null,d=j.priorityLevel;var V=B(j.expirationTime<=T);T=e.unstable_now(),typeof V=="function"?j.callback=V:j===r(c)&&n(c),v(T)}else n(c);j=r(c)}if(j!==null)var se=!0;else{var Q=r(x);Q!==null&&Ue(E,Q.startTime-T),se=!1}return se}finally{j=null,d=F,w=!1}}var u=!1,g=null,b=-1,k=5,A=-1;function ee(){return!(e.unstable_now()-A<k)}function O(){if(g!==null){var _=e.unstable_now();A=_;var T=!0;try{T=g(!0,_)}finally{T?U():(u=!1,g=null)}}else u=!1}var U;if(typeof h=="function")U=function(){h(O)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,de=oe.port2;oe.port1.onmessage=O,U=function(){de.postMessage(null)}}else U=function(){z(O,0)};function Te(_){g=_,u||(u=!0,U())}function Ue(_,T){b=z(function(){_(e.unstable_now())},T)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(_){_.callback=null},e.unstable_continueExecution=function(){N||w||(N=!0,Te(M))},e.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<_?Math.floor(1e3/_):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(_){switch(d){case 1:case 2:case 3:var T=3;break;default:T=d}var F=d;d=T;try{return _()}finally{d=F}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(_,T){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var F=d;d=_;try{return T()}finally{d=F}},e.unstable_scheduleCallback=function(_,T,F){var B=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?B+F:B):F=B,_){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=F+V,_={id:f++,callback:T,priorityLevel:_,startTime:F,expirationTime:V,sortIndex:-1},F>B?(_.sortIndex=F,t(x,_),r(c)===null&&_===r(x)&&(P?(p(b),b=-1):P=!0,Ue(E,F-B))):(_.sortIndex=V,t(c,_),N||w||(N=!0,Te(M))),_},e.unstable_shouldYield=ee,e.unstable_wrapCallback=function(_){var T=d;return function(){var F=d;d=T;try{return _.apply(this,arguments)}finally{d=F}}}})(id);ld.exports=id;var Fm=ld.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Um=m,Mt=Fm;function H(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var od=new Set,mn={};function dr(e,t){Ir(e,t),Ir(e+"Capture",t)}function Ir(e,t){for(mn[e]=t,e=0;e<t.length;e++)od.add(t[e])}var ps=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$l=Object.prototype.hasOwnProperty,Hm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Oo={},Fo={};function Bm(e){return $l.call(Fo,e)?!0:$l.call(Oo,e)?!1:Hm.test(e)?Fo[e]=!0:(Oo[e]=!0,!1)}function Vm(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Wm(e,t,r,n){if(t===null||typeof t>"u"||Vm(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function wt(e,t,r,n,a,l,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=i}var dt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){dt[e]=new wt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];dt[t]=new wt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){dt[e]=new wt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){dt[e]=new wt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){dt[e]=new wt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){dt[e]=new wt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){dt[e]=new wt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){dt[e]=new wt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){dt[e]=new wt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ui=/[\-:]([a-z])/g;function Hi(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ui,Hi);dt[t]=new wt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ui,Hi);dt[t]=new wt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ui,Hi);dt[t]=new wt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){dt[e]=new wt(e,1,!1,e.toLowerCase(),null,!1,!1)});dt.xlinkHref=new wt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){dt[e]=new wt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Bi(e,t,r,n){var a=dt.hasOwnProperty(t)?dt[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Wm(t,r,a,n)&&(r=null),n||a===null?Bm(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var vs=Um.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Un=Symbol.for("react.element"),xr=Symbol.for("react.portal"),pr=Symbol.for("react.fragment"),Vi=Symbol.for("react.strict_mode"),Ol=Symbol.for("react.profiler"),cd=Symbol.for("react.provider"),dd=Symbol.for("react.context"),Wi=Symbol.for("react.forward_ref"),Fl=Symbol.for("react.suspense"),Ul=Symbol.for("react.suspense_list"),Gi=Symbol.for("react.memo"),bs=Symbol.for("react.lazy"),ud=Symbol.for("react.offscreen"),Uo=Symbol.iterator;function Vr(e){return e===null||typeof e!="object"?null:(e=Uo&&e[Uo]||e["@@iterator"],typeof e=="function"?e:null)}var Qe=Object.assign,ml;function Zr(e){if(ml===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);ml=t&&t[1]||""}return`
`+ml+e}var hl=!1;function xl(e,t){if(!e||hl)return"";hl=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(x){var n=x}Reflect.construct(e,[],t)}else{try{t.call()}catch(x){n=x}e.call(t.prototype)}else{try{throw Error()}catch(x){n=x}e()}}catch(x){if(x&&n&&typeof x.stack=="string"){for(var a=x.stack.split(`
`),l=n.stack.split(`
`),i=a.length-1,o=l.length-1;1<=i&&0<=o&&a[i]!==l[o];)o--;for(;1<=i&&0<=o;i--,o--)if(a[i]!==l[o]){if(i!==1||o!==1)do if(i--,o--,0>o||a[i]!==l[o]){var c=`
`+a[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=o);break}}}finally{hl=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Zr(e):""}function Gm(e){switch(e.tag){case 5:return Zr(e.type);case 16:return Zr("Lazy");case 13:return Zr("Suspense");case 19:return Zr("SuspenseList");case 0:case 2:case 15:return e=xl(e.type,!1),e;case 11:return e=xl(e.type.render,!1),e;case 1:return e=xl(e.type,!0),e;default:return""}}function Hl(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case pr:return"Fragment";case xr:return"Portal";case Ol:return"Profiler";case Vi:return"StrictMode";case Fl:return"Suspense";case Ul:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case dd:return(e.displayName||"Context")+".Consumer";case cd:return(e._context.displayName||"Context")+".Provider";case Wi:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Gi:return t=e.displayName||null,t!==null?t:Hl(e.type)||"Memo";case bs:t=e._payload,e=e._init;try{return Hl(e(t))}catch{}}return null}function qm(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Hl(t);case 8:return t===Vi?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Vs(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function md(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Qm(e){var t=md(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,l=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(i){n=""+i,l.call(this,i)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Hn(e){e._valueTracker||(e._valueTracker=Qm(e))}function hd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=md(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function va(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Bl(e,t){var r=t.checked;return Qe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Ho(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Vs(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function xd(e,t){t=t.checked,t!=null&&Bi(e,"checked",t,!1)}function Vl(e,t){xd(e,t);var r=Vs(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Wl(e,t.type,r):t.hasOwnProperty("defaultValue")&&Wl(e,t.type,Vs(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Bo(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Wl(e,t,r){(t!=="number"||va(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Jr=Array.isArray;function _r(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Vs(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Gl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(H(91));return Qe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Vo(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(H(92));if(Jr(r)){if(1<r.length)throw Error(H(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Vs(r)}}function pd(e,t){var r=Vs(t.value),n=Vs(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Wo(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function fd(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ql(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?fd(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Bn,gd=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Bn=Bn||document.createElement("div"),Bn.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Bn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function hn(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var sn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Km=["Webkit","ms","Moz","O"];Object.keys(sn).forEach(function(e){Km.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),sn[t]=sn[e]})});function yd(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||sn.hasOwnProperty(e)&&sn[e]?(""+t).trim():t+"px"}function vd(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=yd(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var Ym=Qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ql(e,t){if(t){if(Ym[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(H(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(H(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(H(61))}if(t.style!=null&&typeof t.style!="object")throw Error(H(62))}}function Kl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yl=null;function qi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Xl=null,Cr=null,Dr=null;function Go(e){if(e=An(e)){if(typeof Xl!="function")throw Error(H(280));var t=e.stateNode;t&&(t=Xa(t),Xl(e.stateNode,e.type,t))}}function jd(e){Cr?Dr?Dr.push(e):Dr=[e]:Cr=e}function wd(){if(Cr){var e=Cr,t=Dr;if(Dr=Cr=null,Go(e),t)for(e=0;e<t.length;e++)Go(t[e])}}function Nd(e,t){return e(t)}function bd(){}var pl=!1;function kd(e,t,r){if(pl)return e(t,r);pl=!0;try{return Nd(e,t,r)}finally{pl=!1,(Cr!==null||Dr!==null)&&(bd(),wd())}}function xn(e,t){var r=e.stateNode;if(r===null)return null;var n=Xa(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(H(231,t,typeof r));return r}var Zl=!1;if(ps)try{var Wr={};Object.defineProperty(Wr,"passive",{get:function(){Zl=!0}}),window.addEventListener("test",Wr,Wr),window.removeEventListener("test",Wr,Wr)}catch{Zl=!1}function Xm(e,t,r,n,a,l,i,o,c){var x=Array.prototype.slice.call(arguments,3);try{t.apply(r,x)}catch(f){this.onError(f)}}var rn=!1,ja=null,wa=!1,Jl=null,Zm={onError:function(e){rn=!0,ja=e}};function Jm(e,t,r,n,a,l,i,o,c){rn=!1,ja=null,Xm.apply(Zm,arguments)}function eh(e,t,r,n,a,l,i,o,c){if(Jm.apply(this,arguments),rn){if(rn){var x=ja;rn=!1,ja=null}else throw Error(H(198));wa||(wa=!0,Jl=x)}}function ur(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Sd(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function qo(e){if(ur(e)!==e)throw Error(H(188))}function th(e){var t=e.alternate;if(!t){if(t=ur(e),t===null)throw Error(H(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var l=a.alternate;if(l===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===r)return qo(a),e;if(l===n)return qo(a),t;l=l.sibling}throw Error(H(188))}if(r.return!==n.return)r=a,n=l;else{for(var i=!1,o=a.child;o;){if(o===r){i=!0,r=a,n=l;break}if(o===n){i=!0,n=a,r=l;break}o=o.sibling}if(!i){for(o=l.child;o;){if(o===r){i=!0,r=l,n=a;break}if(o===n){i=!0,n=l,r=a;break}o=o.sibling}if(!i)throw Error(H(189))}}if(r.alternate!==n)throw Error(H(190))}if(r.tag!==3)throw Error(H(188));return r.stateNode.current===r?e:t}function _d(e){return e=th(e),e!==null?Cd(e):null}function Cd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Cd(e);if(t!==null)return t;e=e.sibling}return null}var Dd=Mt.unstable_scheduleCallback,Qo=Mt.unstable_cancelCallback,sh=Mt.unstable_shouldYield,rh=Mt.unstable_requestPaint,Xe=Mt.unstable_now,nh=Mt.unstable_getCurrentPriorityLevel,Qi=Mt.unstable_ImmediatePriority,Td=Mt.unstable_UserBlockingPriority,Na=Mt.unstable_NormalPriority,ah=Mt.unstable_LowPriority,Ed=Mt.unstable_IdlePriority,qa=null,ns=null;function lh(e){if(ns&&typeof ns.onCommitFiberRoot=="function")try{ns.onCommitFiberRoot(qa,e,void 0,(e.current.flags&128)===128)}catch{}}var Qt=Math.clz32?Math.clz32:ch,ih=Math.log,oh=Math.LN2;function ch(e){return e>>>=0,e===0?32:31-(ih(e)/oh|0)|0}var Vn=64,Wn=4194304;function en(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ba(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,l=e.pingedLanes,i=r&268435455;if(i!==0){var o=i&~a;o!==0?n=en(o):(l&=i,l!==0&&(n=en(l)))}else i=r&~a,i!==0?n=en(i):l!==0&&(n=en(l));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,l=t&-t,a>=l||a===16&&(l&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Qt(t),a=1<<r,n|=e[r],t&=~a;return n}function dh(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uh(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,l=e.pendingLanes;0<l;){var i=31-Qt(l),o=1<<i,c=a[i];c===-1?(!(o&r)||o&n)&&(a[i]=dh(o,t)):c<=t&&(e.expiredLanes|=o),l&=~o}}function ei(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Pd(){var e=Vn;return Vn<<=1,!(Vn&4194240)&&(Vn=64),e}function fl(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function In(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Qt(t),e[t]=r}function mh(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Qt(r),l=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~l}}function Ki(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Qt(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var Ee=0;function Id(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Md,Yi,Ad,Ld,zd,ti=!1,Gn=[],Ls=null,zs=null,Rs=null,pn=new Map,fn=new Map,Ss=[],hh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ko(e,t){switch(e){case"focusin":case"focusout":Ls=null;break;case"dragenter":case"dragleave":zs=null;break;case"mouseover":case"mouseout":Rs=null;break;case"pointerover":case"pointerout":pn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":fn.delete(t.pointerId)}}function Gr(e,t,r,n,a,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:l,targetContainers:[a]},t!==null&&(t=An(t),t!==null&&Yi(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function xh(e,t,r,n,a){switch(t){case"focusin":return Ls=Gr(Ls,e,t,r,n,a),!0;case"dragenter":return zs=Gr(zs,e,t,r,n,a),!0;case"mouseover":return Rs=Gr(Rs,e,t,r,n,a),!0;case"pointerover":var l=a.pointerId;return pn.set(l,Gr(pn.get(l)||null,e,t,r,n,a)),!0;case"gotpointercapture":return l=a.pointerId,fn.set(l,Gr(fn.get(l)||null,e,t,r,n,a)),!0}return!1}function Rd(e){var t=Js(e.target);if(t!==null){var r=ur(t);if(r!==null){if(t=r.tag,t===13){if(t=Sd(r),t!==null){e.blockedOn=t,zd(e.priority,function(){Ad(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function oa(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=si(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Yl=n,r.target.dispatchEvent(n),Yl=null}else return t=An(r),t!==null&&Yi(t),e.blockedOn=r,!1;t.shift()}return!0}function Yo(e,t,r){oa(e)&&r.delete(t)}function ph(){ti=!1,Ls!==null&&oa(Ls)&&(Ls=null),zs!==null&&oa(zs)&&(zs=null),Rs!==null&&oa(Rs)&&(Rs=null),pn.forEach(Yo),fn.forEach(Yo)}function qr(e,t){e.blockedOn===t&&(e.blockedOn=null,ti||(ti=!0,Mt.unstable_scheduleCallback(Mt.unstable_NormalPriority,ph)))}function gn(e){function t(a){return qr(a,e)}if(0<Gn.length){qr(Gn[0],e);for(var r=1;r<Gn.length;r++){var n=Gn[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Ls!==null&&qr(Ls,e),zs!==null&&qr(zs,e),Rs!==null&&qr(Rs,e),pn.forEach(t),fn.forEach(t),r=0;r<Ss.length;r++)n=Ss[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Ss.length&&(r=Ss[0],r.blockedOn===null);)Rd(r),r.blockedOn===null&&Ss.shift()}var Tr=vs.ReactCurrentBatchConfig,ka=!0;function fh(e,t,r,n){var a=Ee,l=Tr.transition;Tr.transition=null;try{Ee=1,Xi(e,t,r,n)}finally{Ee=a,Tr.transition=l}}function gh(e,t,r,n){var a=Ee,l=Tr.transition;Tr.transition=null;try{Ee=4,Xi(e,t,r,n)}finally{Ee=a,Tr.transition=l}}function Xi(e,t,r,n){if(ka){var a=si(e,t,r,n);if(a===null)_l(e,t,n,Sa,r),Ko(e,n);else if(xh(a,e,t,r,n))n.stopPropagation();else if(Ko(e,n),t&4&&-1<hh.indexOf(e)){for(;a!==null;){var l=An(a);if(l!==null&&Md(l),l=si(e,t,r,n),l===null&&_l(e,t,n,Sa,r),l===a)break;a=l}a!==null&&n.stopPropagation()}else _l(e,t,n,null,r)}}var Sa=null;function si(e,t,r,n){if(Sa=null,e=qi(n),e=Js(e),e!==null)if(t=ur(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Sd(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Sa=e,null}function $d(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nh()){case Qi:return 1;case Td:return 4;case Na:case ah:return 16;case Ed:return 536870912;default:return 16}default:return 16}}var Cs=null,Zi=null,ca=null;function Od(){if(ca)return ca;var e,t=Zi,r=t.length,n,a="value"in Cs?Cs.value:Cs.textContent,l=a.length;for(e=0;e<r&&t[e]===a[e];e++);var i=r-e;for(n=1;n<=i&&t[r-n]===a[l-n];n++);return ca=a.slice(e,1<n?1-n:void 0)}function da(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function qn(){return!0}function Xo(){return!1}function Lt(e){function t(r,n,a,l,i){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=l,this.target=i,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(l):l[o]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?qn:Xo,this.isPropagationStopped=Xo,this}return Qe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=qn)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=qn)},persist:function(){},isPersistent:qn}),t}var Ur={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ji=Lt(Ur),Mn=Qe({},Ur,{view:0,detail:0}),yh=Lt(Mn),gl,yl,Qr,Qa=Qe({},Mn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:eo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Qr&&(Qr&&e.type==="mousemove"?(gl=e.screenX-Qr.screenX,yl=e.screenY-Qr.screenY):yl=gl=0,Qr=e),gl)},movementY:function(e){return"movementY"in e?e.movementY:yl}}),Zo=Lt(Qa),vh=Qe({},Qa,{dataTransfer:0}),jh=Lt(vh),wh=Qe({},Mn,{relatedTarget:0}),vl=Lt(wh),Nh=Qe({},Ur,{animationName:0,elapsedTime:0,pseudoElement:0}),bh=Lt(Nh),kh=Qe({},Ur,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Sh=Lt(kh),_h=Qe({},Ur,{data:0}),Jo=Lt(_h),Ch={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Dh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Th={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Eh(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Th[e])?!!t[e]:!1}function eo(){return Eh}var Ph=Qe({},Mn,{key:function(e){if(e.key){var t=Ch[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=da(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Dh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:eo,charCode:function(e){return e.type==="keypress"?da(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?da(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ih=Lt(Ph),Mh=Qe({},Qa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ec=Lt(Mh),Ah=Qe({},Mn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:eo}),Lh=Lt(Ah),zh=Qe({},Ur,{propertyName:0,elapsedTime:0,pseudoElement:0}),Rh=Lt(zh),$h=Qe({},Qa,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Oh=Lt($h),Fh=[9,13,27,32],to=ps&&"CompositionEvent"in window,nn=null;ps&&"documentMode"in document&&(nn=document.documentMode);var Uh=ps&&"TextEvent"in window&&!nn,Fd=ps&&(!to||nn&&8<nn&&11>=nn),tc=" ",sc=!1;function Ud(e,t){switch(e){case"keyup":return Fh.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var fr=!1;function Hh(e,t){switch(e){case"compositionend":return Hd(t);case"keypress":return t.which!==32?null:(sc=!0,tc);case"textInput":return e=t.data,e===tc&&sc?null:e;default:return null}}function Bh(e,t){if(fr)return e==="compositionend"||!to&&Ud(e,t)?(e=Od(),ca=Zi=Cs=null,fr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fd&&t.locale!=="ko"?null:t.data;default:return null}}var Vh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Vh[e.type]:t==="textarea"}function Bd(e,t,r,n){jd(n),t=_a(t,"onChange"),0<t.length&&(r=new Ji("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var an=null,yn=null;function Wh(e){eu(e,0)}function Ka(e){var t=vr(e);if(hd(t))return e}function Gh(e,t){if(e==="change")return t}var Vd=!1;if(ps){var jl;if(ps){var wl="oninput"in document;if(!wl){var nc=document.createElement("div");nc.setAttribute("oninput","return;"),wl=typeof nc.oninput=="function"}jl=wl}else jl=!1;Vd=jl&&(!document.documentMode||9<document.documentMode)}function ac(){an&&(an.detachEvent("onpropertychange",Wd),yn=an=null)}function Wd(e){if(e.propertyName==="value"&&Ka(yn)){var t=[];Bd(t,yn,e,qi(e)),kd(Wh,t)}}function qh(e,t,r){e==="focusin"?(ac(),an=t,yn=r,an.attachEvent("onpropertychange",Wd)):e==="focusout"&&ac()}function Qh(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ka(yn)}function Kh(e,t){if(e==="click")return Ka(t)}function Yh(e,t){if(e==="input"||e==="change")return Ka(t)}function Xh(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Yt=typeof Object.is=="function"?Object.is:Xh;function vn(e,t){if(Yt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!$l.call(t,a)||!Yt(e[a],t[a]))return!1}return!0}function lc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ic(e,t){var r=lc(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lc(r)}}function Gd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Gd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function qd(){for(var e=window,t=va();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=va(e.document)}return t}function so(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Zh(e){var t=qd(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Gd(r.ownerDocument.documentElement,r)){if(n!==null&&so(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,l=Math.min(n.start,a);n=n.end===void 0?l:Math.min(n.end,a),!e.extend&&l>n&&(a=n,n=l,l=a),a=ic(r,l);var i=ic(r,n);a&&i&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),l>n?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Jh=ps&&"documentMode"in document&&11>=document.documentMode,gr=null,ri=null,ln=null,ni=!1;function oc(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ni||gr==null||gr!==va(n)||(n=gr,"selectionStart"in n&&so(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ln&&vn(ln,n)||(ln=n,n=_a(ri,"onSelect"),0<n.length&&(t=new Ji("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=gr)))}function Qn(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var yr={animationend:Qn("Animation","AnimationEnd"),animationiteration:Qn("Animation","AnimationIteration"),animationstart:Qn("Animation","AnimationStart"),transitionend:Qn("Transition","TransitionEnd")},Nl={},Qd={};ps&&(Qd=document.createElement("div").style,"AnimationEvent"in window||(delete yr.animationend.animation,delete yr.animationiteration.animation,delete yr.animationstart.animation),"TransitionEvent"in window||delete yr.transitionend.transition);function Ya(e){if(Nl[e])return Nl[e];if(!yr[e])return e;var t=yr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Qd)return Nl[e]=t[r];return e}var Kd=Ya("animationend"),Yd=Ya("animationiteration"),Xd=Ya("animationstart"),Zd=Ya("transitionend"),Jd=new Map,cc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gs(e,t){Jd.set(e,t),dr(t,[e])}for(var bl=0;bl<cc.length;bl++){var kl=cc[bl],ex=kl.toLowerCase(),tx=kl[0].toUpperCase()+kl.slice(1);Gs(ex,"on"+tx)}Gs(Kd,"onAnimationEnd");Gs(Yd,"onAnimationIteration");Gs(Xd,"onAnimationStart");Gs("dblclick","onDoubleClick");Gs("focusin","onFocus");Gs("focusout","onBlur");Gs(Zd,"onTransitionEnd");Ir("onMouseEnter",["mouseout","mouseover"]);Ir("onMouseLeave",["mouseout","mouseover"]);Ir("onPointerEnter",["pointerout","pointerover"]);Ir("onPointerLeave",["pointerout","pointerover"]);dr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));dr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));dr("onBeforeInput",["compositionend","keypress","textInput","paste"]);dr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));dr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));dr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sx=new Set("cancel close invalid load scroll toggle".split(" ").concat(tn));function dc(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,eh(n,t,void 0,e),e.currentTarget=null}function eu(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var l=void 0;if(t)for(var i=n.length-1;0<=i;i--){var o=n[i],c=o.instance,x=o.currentTarget;if(o=o.listener,c!==l&&a.isPropagationStopped())break e;dc(a,o,x),l=c}else for(i=0;i<n.length;i++){if(o=n[i],c=o.instance,x=o.currentTarget,o=o.listener,c!==l&&a.isPropagationStopped())break e;dc(a,o,x),l=c}}}if(wa)throw e=Jl,wa=!1,Jl=null,e}function $e(e,t){var r=t[ci];r===void 0&&(r=t[ci]=new Set);var n=e+"__bubble";r.has(n)||(tu(t,e,2,!1),r.add(n))}function Sl(e,t,r){var n=0;t&&(n|=4),tu(r,e,n,t)}var Kn="_reactListening"+Math.random().toString(36).slice(2);function jn(e){if(!e[Kn]){e[Kn]=!0,od.forEach(function(r){r!=="selectionchange"&&(sx.has(r)||Sl(r,!1,e),Sl(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Kn]||(t[Kn]=!0,Sl("selectionchange",!1,t))}}function tu(e,t,r,n){switch($d(t)){case 1:var a=fh;break;case 4:a=gh;break;default:a=Xi}r=a.bind(null,t,r,e),a=void 0,!Zl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function _l(e,t,r,n,a){var l=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var o=n.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(i===4)for(i=n.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;i=i.return}for(;o!==null;){if(i=Js(o),i===null)return;if(c=i.tag,c===5||c===6){n=l=i;continue e}o=o.parentNode}}n=n.return}kd(function(){var x=l,f=qi(r),j=[];e:{var d=Jd.get(e);if(d!==void 0){var w=Ji,N=e;switch(e){case"keypress":if(da(r)===0)break e;case"keydown":case"keyup":w=Ih;break;case"focusin":N="focus",w=vl;break;case"focusout":N="blur",w=vl;break;case"beforeblur":case"afterblur":w=vl;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=Zo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=jh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=Lh;break;case Kd:case Yd:case Xd:w=bh;break;case Zd:w=Rh;break;case"scroll":w=yh;break;case"wheel":w=Oh;break;case"copy":case"cut":case"paste":w=Sh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=ec}var P=(t&4)!==0,z=!P&&e==="scroll",p=P?d!==null?d+"Capture":null:d;P=[];for(var h=x,v;h!==null;){v=h;var E=v.stateNode;if(v.tag===5&&E!==null&&(v=E,p!==null&&(E=xn(h,p),E!=null&&P.push(wn(h,E,v)))),z)break;h=h.return}0<P.length&&(d=new w(d,N,null,r,f),j.push({event:d,listeners:P}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",w=e==="mouseout"||e==="pointerout",d&&r!==Yl&&(N=r.relatedTarget||r.fromElement)&&(Js(N)||N[fs]))break e;if((w||d)&&(d=f.window===f?f:(d=f.ownerDocument)?d.defaultView||d.parentWindow:window,w?(N=r.relatedTarget||r.toElement,w=x,N=N?Js(N):null,N!==null&&(z=ur(N),N!==z||N.tag!==5&&N.tag!==6)&&(N=null)):(w=null,N=x),w!==N)){if(P=Zo,E="onMouseLeave",p="onMouseEnter",h="mouse",(e==="pointerout"||e==="pointerover")&&(P=ec,E="onPointerLeave",p="onPointerEnter",h="pointer"),z=w==null?d:vr(w),v=N==null?d:vr(N),d=new P(E,h+"leave",w,r,f),d.target=z,d.relatedTarget=v,E=null,Js(f)===x&&(P=new P(p,h+"enter",N,r,f),P.target=v,P.relatedTarget=z,E=P),z=E,w&&N)t:{for(P=w,p=N,h=0,v=P;v;v=hr(v))h++;for(v=0,E=p;E;E=hr(E))v++;for(;0<h-v;)P=hr(P),h--;for(;0<v-h;)p=hr(p),v--;for(;h--;){if(P===p||p!==null&&P===p.alternate)break t;P=hr(P),p=hr(p)}P=null}else P=null;w!==null&&uc(j,d,w,P,!1),N!==null&&z!==null&&uc(j,z,N,P,!0)}}e:{if(d=x?vr(x):window,w=d.nodeName&&d.nodeName.toLowerCase(),w==="select"||w==="input"&&d.type==="file")var M=Gh;else if(rc(d))if(Vd)M=Yh;else{M=Qh;var u=qh}else(w=d.nodeName)&&w.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(M=Kh);if(M&&(M=M(e,x))){Bd(j,M,r,f);break e}u&&u(e,d,x),e==="focusout"&&(u=d._wrapperState)&&u.controlled&&d.type==="number"&&Wl(d,"number",d.value)}switch(u=x?vr(x):window,e){case"focusin":(rc(u)||u.contentEditable==="true")&&(gr=u,ri=x,ln=null);break;case"focusout":ln=ri=gr=null;break;case"mousedown":ni=!0;break;case"contextmenu":case"mouseup":case"dragend":ni=!1,oc(j,r,f);break;case"selectionchange":if(Jh)break;case"keydown":case"keyup":oc(j,r,f)}var g;if(to)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else fr?Ud(e,r)&&(b="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(b="onCompositionStart");b&&(Fd&&r.locale!=="ko"&&(fr||b!=="onCompositionStart"?b==="onCompositionEnd"&&fr&&(g=Od()):(Cs=f,Zi="value"in Cs?Cs.value:Cs.textContent,fr=!0)),u=_a(x,b),0<u.length&&(b=new Jo(b,e,null,r,f),j.push({event:b,listeners:u}),g?b.data=g:(g=Hd(r),g!==null&&(b.data=g)))),(g=Uh?Hh(e,r):Bh(e,r))&&(x=_a(x,"onBeforeInput"),0<x.length&&(f=new Jo("onBeforeInput","beforeinput",null,r,f),j.push({event:f,listeners:x}),f.data=g))}eu(j,t)})}function wn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function _a(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=xn(e,r),l!=null&&n.unshift(wn(e,l,a)),l=xn(e,t),l!=null&&n.push(wn(e,l,a))),e=e.return}return n}function hr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function uc(e,t,r,n,a){for(var l=t._reactName,i=[];r!==null&&r!==n;){var o=r,c=o.alternate,x=o.stateNode;if(c!==null&&c===n)break;o.tag===5&&x!==null&&(o=x,a?(c=xn(r,l),c!=null&&i.unshift(wn(r,c,o))):a||(c=xn(r,l),c!=null&&i.push(wn(r,c,o)))),r=r.return}i.length!==0&&e.push({event:t,listeners:i})}var rx=/\r\n?/g,nx=/\u0000|\uFFFD/g;function mc(e){return(typeof e=="string"?e:""+e).replace(rx,`
`).replace(nx,"")}function Yn(e,t,r){if(t=mc(t),mc(e)!==t&&r)throw Error(H(425))}function Ca(){}var ai=null,li=null;function ii(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var oi=typeof setTimeout=="function"?setTimeout:void 0,ax=typeof clearTimeout=="function"?clearTimeout:void 0,hc=typeof Promise=="function"?Promise:void 0,lx=typeof queueMicrotask=="function"?queueMicrotask:typeof hc<"u"?function(e){return hc.resolve(null).then(e).catch(ix)}:oi;function ix(e){setTimeout(function(){throw e})}function Cl(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),gn(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);gn(t)}function $s(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function xc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Hr=Math.random().toString(36).slice(2),ts="__reactFiber$"+Hr,Nn="__reactProps$"+Hr,fs="__reactContainer$"+Hr,ci="__reactEvents$"+Hr,ox="__reactListeners$"+Hr,cx="__reactHandles$"+Hr;function Js(e){var t=e[ts];if(t)return t;for(var r=e.parentNode;r;){if(t=r[fs]||r[ts]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=xc(e);e!==null;){if(r=e[ts])return r;e=xc(e)}return t}e=r,r=e.parentNode}return null}function An(e){return e=e[ts]||e[fs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function vr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(H(33))}function Xa(e){return e[Nn]||null}var di=[],jr=-1;function qs(e){return{current:e}}function Fe(e){0>jr||(e.current=di[jr],di[jr]=null,jr--)}function ze(e,t){jr++,di[jr]=e.current,e.current=t}var Ws={},pt=qs(Ws),kt=qs(!1),ar=Ws;function Mr(e,t){var r=e.type.contextTypes;if(!r)return Ws;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in r)a[l]=t[l];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function St(e){return e=e.childContextTypes,e!=null}function Da(){Fe(kt),Fe(pt)}function pc(e,t,r){if(pt.current!==Ws)throw Error(H(168));ze(pt,t),ze(kt,r)}function su(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(H(108,qm(e)||"Unknown",a));return Qe({},r,n)}function Ta(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ws,ar=pt.current,ze(pt,e),ze(kt,kt.current),!0}function fc(e,t,r){var n=e.stateNode;if(!n)throw Error(H(169));r?(e=su(e,t,ar),n.__reactInternalMemoizedMergedChildContext=e,Fe(kt),Fe(pt),ze(pt,e)):Fe(kt),ze(kt,r)}var is=null,Za=!1,Dl=!1;function ru(e){is===null?is=[e]:is.push(e)}function dx(e){Za=!0,ru(e)}function Qs(){if(!Dl&&is!==null){Dl=!0;var e=0,t=Ee;try{var r=is;for(Ee=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}is=null,Za=!1}catch(a){throw is!==null&&(is=is.slice(e+1)),Dd(Qi,Qs),a}finally{Ee=t,Dl=!1}}return null}var wr=[],Nr=0,Ea=null,Pa=0,Rt=[],$t=0,lr=null,os=1,cs="";function Ys(e,t){wr[Nr++]=Pa,wr[Nr++]=Ea,Ea=e,Pa=t}function nu(e,t,r){Rt[$t++]=os,Rt[$t++]=cs,Rt[$t++]=lr,lr=e;var n=os;e=cs;var a=32-Qt(n)-1;n&=~(1<<a),r+=1;var l=32-Qt(t)+a;if(30<l){var i=a-a%5;l=(n&(1<<i)-1).toString(32),n>>=i,a-=i,os=1<<32-Qt(t)+a|r<<a|n,cs=l+e}else os=1<<l|r<<a|n,cs=e}function ro(e){e.return!==null&&(Ys(e,1),nu(e,1,0))}function no(e){for(;e===Ea;)Ea=wr[--Nr],wr[Nr]=null,Pa=wr[--Nr],wr[Nr]=null;for(;e===lr;)lr=Rt[--$t],Rt[$t]=null,cs=Rt[--$t],Rt[$t]=null,os=Rt[--$t],Rt[$t]=null}var It=null,Pt=null,Be=!1,qt=null;function au(e,t){var r=Ot(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function gc(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,It=e,Pt=$s(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,It=e,Pt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=lr!==null?{id:os,overflow:cs}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ot(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,It=e,Pt=null,!0):!1;default:return!1}}function ui(e){return(e.mode&1)!==0&&(e.flags&128)===0}function mi(e){if(Be){var t=Pt;if(t){var r=t;if(!gc(e,t)){if(ui(e))throw Error(H(418));t=$s(r.nextSibling);var n=It;t&&gc(e,t)?au(n,r):(e.flags=e.flags&-4097|2,Be=!1,It=e)}}else{if(ui(e))throw Error(H(418));e.flags=e.flags&-4097|2,Be=!1,It=e}}}function yc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;It=e}function Xn(e){if(e!==It)return!1;if(!Be)return yc(e),Be=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ii(e.type,e.memoizedProps)),t&&(t=Pt)){if(ui(e))throw lu(),Error(H(418));for(;t;)au(e,t),t=$s(t.nextSibling)}if(yc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(H(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Pt=$s(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Pt=null}}else Pt=It?$s(e.stateNode.nextSibling):null;return!0}function lu(){for(var e=Pt;e;)e=$s(e.nextSibling)}function Ar(){Pt=It=null,Be=!1}function ao(e){qt===null?qt=[e]:qt.push(e)}var ux=vs.ReactCurrentBatchConfig;function Kr(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(H(309));var n=r.stateNode}if(!n)throw Error(H(147,e));var a=n,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(i){var o=a.refs;i===null?delete o[l]:o[l]=i},t._stringRef=l,t)}if(typeof e!="string")throw Error(H(284));if(!r._owner)throw Error(H(290,e))}return e}function Zn(e,t){throw e=Object.prototype.toString.call(t),Error(H(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vc(e){var t=e._init;return t(e._payload)}function iu(e){function t(p,h){if(e){var v=p.deletions;v===null?(p.deletions=[h],p.flags|=16):v.push(h)}}function r(p,h){if(!e)return null;for(;h!==null;)t(p,h),h=h.sibling;return null}function n(p,h){for(p=new Map;h!==null;)h.key!==null?p.set(h.key,h):p.set(h.index,h),h=h.sibling;return p}function a(p,h){return p=Hs(p,h),p.index=0,p.sibling=null,p}function l(p,h,v){return p.index=v,e?(v=p.alternate,v!==null?(v=v.index,v<h?(p.flags|=2,h):v):(p.flags|=2,h)):(p.flags|=1048576,h)}function i(p){return e&&p.alternate===null&&(p.flags|=2),p}function o(p,h,v,E){return h===null||h.tag!==6?(h=Ll(v,p.mode,E),h.return=p,h):(h=a(h,v),h.return=p,h)}function c(p,h,v,E){var M=v.type;return M===pr?f(p,h,v.props.children,E,v.key):h!==null&&(h.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===bs&&vc(M)===h.type)?(E=a(h,v.props),E.ref=Kr(p,h,v),E.return=p,E):(E=ga(v.type,v.key,v.props,null,p.mode,E),E.ref=Kr(p,h,v),E.return=p,E)}function x(p,h,v,E){return h===null||h.tag!==4||h.stateNode.containerInfo!==v.containerInfo||h.stateNode.implementation!==v.implementation?(h=zl(v,p.mode,E),h.return=p,h):(h=a(h,v.children||[]),h.return=p,h)}function f(p,h,v,E,M){return h===null||h.tag!==7?(h=nr(v,p.mode,E,M),h.return=p,h):(h=a(h,v),h.return=p,h)}function j(p,h,v){if(typeof h=="string"&&h!==""||typeof h=="number")return h=Ll(""+h,p.mode,v),h.return=p,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case Un:return v=ga(h.type,h.key,h.props,null,p.mode,v),v.ref=Kr(p,null,h),v.return=p,v;case xr:return h=zl(h,p.mode,v),h.return=p,h;case bs:var E=h._init;return j(p,E(h._payload),v)}if(Jr(h)||Vr(h))return h=nr(h,p.mode,v,null),h.return=p,h;Zn(p,h)}return null}function d(p,h,v,E){var M=h!==null?h.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return M!==null?null:o(p,h,""+v,E);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Un:return v.key===M?c(p,h,v,E):null;case xr:return v.key===M?x(p,h,v,E):null;case bs:return M=v._init,d(p,h,M(v._payload),E)}if(Jr(v)||Vr(v))return M!==null?null:f(p,h,v,E,null);Zn(p,v)}return null}function w(p,h,v,E,M){if(typeof E=="string"&&E!==""||typeof E=="number")return p=p.get(v)||null,o(h,p,""+E,M);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Un:return p=p.get(E.key===null?v:E.key)||null,c(h,p,E,M);case xr:return p=p.get(E.key===null?v:E.key)||null,x(h,p,E,M);case bs:var u=E._init;return w(p,h,v,u(E._payload),M)}if(Jr(E)||Vr(E))return p=p.get(v)||null,f(h,p,E,M,null);Zn(h,E)}return null}function N(p,h,v,E){for(var M=null,u=null,g=h,b=h=0,k=null;g!==null&&b<v.length;b++){g.index>b?(k=g,g=null):k=g.sibling;var A=d(p,g,v[b],E);if(A===null){g===null&&(g=k);break}e&&g&&A.alternate===null&&t(p,g),h=l(A,h,b),u===null?M=A:u.sibling=A,u=A,g=k}if(b===v.length)return r(p,g),Be&&Ys(p,b),M;if(g===null){for(;b<v.length;b++)g=j(p,v[b],E),g!==null&&(h=l(g,h,b),u===null?M=g:u.sibling=g,u=g);return Be&&Ys(p,b),M}for(g=n(p,g);b<v.length;b++)k=w(g,p,b,v[b],E),k!==null&&(e&&k.alternate!==null&&g.delete(k.key===null?b:k.key),h=l(k,h,b),u===null?M=k:u.sibling=k,u=k);return e&&g.forEach(function(ee){return t(p,ee)}),Be&&Ys(p,b),M}function P(p,h,v,E){var M=Vr(v);if(typeof M!="function")throw Error(H(150));if(v=M.call(v),v==null)throw Error(H(151));for(var u=M=null,g=h,b=h=0,k=null,A=v.next();g!==null&&!A.done;b++,A=v.next()){g.index>b?(k=g,g=null):k=g.sibling;var ee=d(p,g,A.value,E);if(ee===null){g===null&&(g=k);break}e&&g&&ee.alternate===null&&t(p,g),h=l(ee,h,b),u===null?M=ee:u.sibling=ee,u=ee,g=k}if(A.done)return r(p,g),Be&&Ys(p,b),M;if(g===null){for(;!A.done;b++,A=v.next())A=j(p,A.value,E),A!==null&&(h=l(A,h,b),u===null?M=A:u.sibling=A,u=A);return Be&&Ys(p,b),M}for(g=n(p,g);!A.done;b++,A=v.next())A=w(g,p,b,A.value,E),A!==null&&(e&&A.alternate!==null&&g.delete(A.key===null?b:A.key),h=l(A,h,b),u===null?M=A:u.sibling=A,u=A);return e&&g.forEach(function(O){return t(p,O)}),Be&&Ys(p,b),M}function z(p,h,v,E){if(typeof v=="object"&&v!==null&&v.type===pr&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Un:e:{for(var M=v.key,u=h;u!==null;){if(u.key===M){if(M=v.type,M===pr){if(u.tag===7){r(p,u.sibling),h=a(u,v.props.children),h.return=p,p=h;break e}}else if(u.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===bs&&vc(M)===u.type){r(p,u.sibling),h=a(u,v.props),h.ref=Kr(p,u,v),h.return=p,p=h;break e}r(p,u);break}else t(p,u);u=u.sibling}v.type===pr?(h=nr(v.props.children,p.mode,E,v.key),h.return=p,p=h):(E=ga(v.type,v.key,v.props,null,p.mode,E),E.ref=Kr(p,h,v),E.return=p,p=E)}return i(p);case xr:e:{for(u=v.key;h!==null;){if(h.key===u)if(h.tag===4&&h.stateNode.containerInfo===v.containerInfo&&h.stateNode.implementation===v.implementation){r(p,h.sibling),h=a(h,v.children||[]),h.return=p,p=h;break e}else{r(p,h);break}else t(p,h);h=h.sibling}h=zl(v,p.mode,E),h.return=p,p=h}return i(p);case bs:return u=v._init,z(p,h,u(v._payload),E)}if(Jr(v))return N(p,h,v,E);if(Vr(v))return P(p,h,v,E);Zn(p,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,h!==null&&h.tag===6?(r(p,h.sibling),h=a(h,v),h.return=p,p=h):(r(p,h),h=Ll(v,p.mode,E),h.return=p,p=h),i(p)):r(p,h)}return z}var Lr=iu(!0),ou=iu(!1),Ia=qs(null),Ma=null,br=null,lo=null;function io(){lo=br=Ma=null}function oo(e){var t=Ia.current;Fe(Ia),e._currentValue=t}function hi(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Er(e,t){Ma=e,lo=br=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(bt=!0),e.firstContext=null)}function Ut(e){var t=e._currentValue;if(lo!==e)if(e={context:e,memoizedValue:t,next:null},br===null){if(Ma===null)throw Error(H(308));br=e,Ma.dependencies={lanes:0,firstContext:e}}else br=br.next=e;return t}var er=null;function co(e){er===null?er=[e]:er.push(e)}function cu(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,co(t)):(r.next=a.next,a.next=r),t.interleaved=r,gs(e,n)}function gs(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var ks=!1;function uo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function du(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function hs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Os(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,be&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,gs(e,r)}return a=n.interleaved,a===null?(t.next=t,co(n)):(t.next=a.next,a.next=t),n.interleaved=t,gs(e,r)}function ua(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Ki(e,r)}}function jc(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,l=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};l===null?a=l=i:l=l.next=i,r=r.next}while(r!==null);l===null?a=l=t:l=l.next=t}else a=l=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Aa(e,t,r,n){var a=e.updateQueue;ks=!1;var l=a.firstBaseUpdate,i=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var c=o,x=c.next;c.next=null,i===null?l=x:i.next=x,i=c;var f=e.alternate;f!==null&&(f=f.updateQueue,o=f.lastBaseUpdate,o!==i&&(o===null?f.firstBaseUpdate=x:o.next=x,f.lastBaseUpdate=c))}if(l!==null){var j=a.baseState;i=0,f=x=c=null,o=l;do{var d=o.lane,w=o.eventTime;if((n&d)===d){f!==null&&(f=f.next={eventTime:w,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var N=e,P=o;switch(d=t,w=r,P.tag){case 1:if(N=P.payload,typeof N=="function"){j=N.call(w,j,d);break e}j=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=P.payload,d=typeof N=="function"?N.call(w,j,d):N,d==null)break e;j=Qe({},j,d);break e;case 2:ks=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,d=a.effects,d===null?a.effects=[o]:d.push(o))}else w={eventTime:w,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},f===null?(x=f=w,c=j):f=f.next=w,i|=d;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;d=o,o=d.next,d.next=null,a.lastBaseUpdate=d,a.shared.pending=null}}while(!0);if(f===null&&(c=j),a.baseState=c,a.firstBaseUpdate=x,a.lastBaseUpdate=f,t=a.shared.interleaved,t!==null){a=t;do i|=a.lane,a=a.next;while(a!==t)}else l===null&&(a.shared.lanes=0);or|=i,e.lanes=i,e.memoizedState=j}}function wc(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(H(191,a));a.call(n)}}}var Ln={},as=qs(Ln),bn=qs(Ln),kn=qs(Ln);function tr(e){if(e===Ln)throw Error(H(174));return e}function mo(e,t){switch(ze(kn,t),ze(bn,e),ze(as,Ln),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ql(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ql(t,e)}Fe(as),ze(as,t)}function zr(){Fe(as),Fe(bn),Fe(kn)}function uu(e){tr(kn.current);var t=tr(as.current),r=ql(t,e.type);t!==r&&(ze(bn,e),ze(as,r))}function ho(e){bn.current===e&&(Fe(as),Fe(bn))}var Ge=qs(0);function La(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Tl=[];function xo(){for(var e=0;e<Tl.length;e++)Tl[e]._workInProgressVersionPrimary=null;Tl.length=0}var ma=vs.ReactCurrentDispatcher,El=vs.ReactCurrentBatchConfig,ir=0,qe=null,st=null,at=null,za=!1,on=!1,Sn=0,mx=0;function ut(){throw Error(H(321))}function po(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Yt(e[r],t[r]))return!1;return!0}function fo(e,t,r,n,a,l){if(ir=l,qe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ma.current=e===null||e.memoizedState===null?fx:gx,e=r(n,a),on){l=0;do{if(on=!1,Sn=0,25<=l)throw Error(H(301));l+=1,at=st=null,t.updateQueue=null,ma.current=yx,e=r(n,a)}while(on)}if(ma.current=Ra,t=st!==null&&st.next!==null,ir=0,at=st=qe=null,za=!1,t)throw Error(H(300));return e}function go(){var e=Sn!==0;return Sn=0,e}function Jt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return at===null?qe.memoizedState=at=e:at=at.next=e,at}function Ht(){if(st===null){var e=qe.alternate;e=e!==null?e.memoizedState:null}else e=st.next;var t=at===null?qe.memoizedState:at.next;if(t!==null)at=t,st=e;else{if(e===null)throw Error(H(310));st=e,e={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},at===null?qe.memoizedState=at=e:at=at.next=e}return at}function _n(e,t){return typeof t=="function"?t(e):t}function Pl(e){var t=Ht(),r=t.queue;if(r===null)throw Error(H(311));r.lastRenderedReducer=e;var n=st,a=n.baseQueue,l=r.pending;if(l!==null){if(a!==null){var i=a.next;a.next=l.next,l.next=i}n.baseQueue=a=l,r.pending=null}if(a!==null){l=a.next,n=n.baseState;var o=i=null,c=null,x=l;do{var f=x.lane;if((ir&f)===f)c!==null&&(c=c.next={lane:0,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null}),n=x.hasEagerState?x.eagerState:e(n,x.action);else{var j={lane:f,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null};c===null?(o=c=j,i=n):c=c.next=j,qe.lanes|=f,or|=f}x=x.next}while(x!==null&&x!==l);c===null?i=n:c.next=o,Yt(n,t.memoizedState)||(bt=!0),t.memoizedState=n,t.baseState=i,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do l=a.lane,qe.lanes|=l,or|=l,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Il(e){var t=Ht(),r=t.queue;if(r===null)throw Error(H(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,l=t.memoizedState;if(a!==null){r.pending=null;var i=a=a.next;do l=e(l,i.action),i=i.next;while(i!==a);Yt(l,t.memoizedState)||(bt=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),r.lastRenderedState=l}return[l,n]}function mu(){}function hu(e,t){var r=qe,n=Ht(),a=t(),l=!Yt(n.memoizedState,a);if(l&&(n.memoizedState=a,bt=!0),n=n.queue,yo(fu.bind(null,r,n,e),[e]),n.getSnapshot!==t||l||at!==null&&at.memoizedState.tag&1){if(r.flags|=2048,Cn(9,pu.bind(null,r,n,a,t),void 0,null),it===null)throw Error(H(349));ir&30||xu(r,t,a)}return a}function xu(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=qe.updateQueue,t===null?(t={lastEffect:null,stores:null},qe.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function pu(e,t,r,n){t.value=r,t.getSnapshot=n,gu(t)&&yu(e)}function fu(e,t,r){return r(function(){gu(t)&&yu(e)})}function gu(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Yt(e,r)}catch{return!0}}function yu(e){var t=gs(e,1);t!==null&&Kt(t,e,1,-1)}function Nc(e){var t=Jt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_n,lastRenderedState:e},t.queue=e,e=e.dispatch=px.bind(null,qe,e),[t.memoizedState,e]}function Cn(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=qe.updateQueue,t===null?(t={lastEffect:null,stores:null},qe.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function vu(){return Ht().memoizedState}function ha(e,t,r,n){var a=Jt();qe.flags|=e,a.memoizedState=Cn(1|t,r,void 0,n===void 0?null:n)}function Ja(e,t,r,n){var a=Ht();n=n===void 0?null:n;var l=void 0;if(st!==null){var i=st.memoizedState;if(l=i.destroy,n!==null&&po(n,i.deps)){a.memoizedState=Cn(t,r,l,n);return}}qe.flags|=e,a.memoizedState=Cn(1|t,r,l,n)}function bc(e,t){return ha(8390656,8,e,t)}function yo(e,t){return Ja(2048,8,e,t)}function ju(e,t){return Ja(4,2,e,t)}function wu(e,t){return Ja(4,4,e,t)}function Nu(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function bu(e,t,r){return r=r!=null?r.concat([e]):null,Ja(4,4,Nu.bind(null,t,e),r)}function vo(){}function ku(e,t){var r=Ht();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&po(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Su(e,t){var r=Ht();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&po(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function _u(e,t,r){return ir&21?(Yt(r,t)||(r=Pd(),qe.lanes|=r,or|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,bt=!0),e.memoizedState=r)}function hx(e,t){var r=Ee;Ee=r!==0&&4>r?r:4,e(!0);var n=El.transition;El.transition={};try{e(!1),t()}finally{Ee=r,El.transition=n}}function Cu(){return Ht().memoizedState}function xx(e,t,r){var n=Us(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Du(e))Tu(t,r);else if(r=cu(e,t,r,n),r!==null){var a=vt();Kt(r,e,n,a),Eu(r,t,n)}}function px(e,t,r){var n=Us(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Du(e))Tu(t,a);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var i=t.lastRenderedState,o=l(i,r);if(a.hasEagerState=!0,a.eagerState=o,Yt(o,i)){var c=t.interleaved;c===null?(a.next=a,co(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=cu(e,t,a,n),r!==null&&(a=vt(),Kt(r,e,n,a),Eu(r,t,n))}}function Du(e){var t=e.alternate;return e===qe||t!==null&&t===qe}function Tu(e,t){on=za=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Eu(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Ki(e,r)}}var Ra={readContext:Ut,useCallback:ut,useContext:ut,useEffect:ut,useImperativeHandle:ut,useInsertionEffect:ut,useLayoutEffect:ut,useMemo:ut,useReducer:ut,useRef:ut,useState:ut,useDebugValue:ut,useDeferredValue:ut,useTransition:ut,useMutableSource:ut,useSyncExternalStore:ut,useId:ut,unstable_isNewReconciler:!1},fx={readContext:Ut,useCallback:function(e,t){return Jt().memoizedState=[e,t===void 0?null:t],e},useContext:Ut,useEffect:bc,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,ha(4194308,4,Nu.bind(null,t,e),r)},useLayoutEffect:function(e,t){return ha(4194308,4,e,t)},useInsertionEffect:function(e,t){return ha(4,2,e,t)},useMemo:function(e,t){var r=Jt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Jt();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=xx.bind(null,qe,e),[n.memoizedState,e]},useRef:function(e){var t=Jt();return e={current:e},t.memoizedState=e},useState:Nc,useDebugValue:vo,useDeferredValue:function(e){return Jt().memoizedState=e},useTransition:function(){var e=Nc(!1),t=e[0];return e=hx.bind(null,e[1]),Jt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=qe,a=Jt();if(Be){if(r===void 0)throw Error(H(407));r=r()}else{if(r=t(),it===null)throw Error(H(349));ir&30||xu(n,t,r)}a.memoizedState=r;var l={value:r,getSnapshot:t};return a.queue=l,bc(fu.bind(null,n,l,e),[e]),n.flags|=2048,Cn(9,pu.bind(null,n,l,r,t),void 0,null),r},useId:function(){var e=Jt(),t=it.identifierPrefix;if(Be){var r=cs,n=os;r=(n&~(1<<32-Qt(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Sn++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=mx++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},gx={readContext:Ut,useCallback:ku,useContext:Ut,useEffect:yo,useImperativeHandle:bu,useInsertionEffect:ju,useLayoutEffect:wu,useMemo:Su,useReducer:Pl,useRef:vu,useState:function(){return Pl(_n)},useDebugValue:vo,useDeferredValue:function(e){var t=Ht();return _u(t,st.memoizedState,e)},useTransition:function(){var e=Pl(_n)[0],t=Ht().memoizedState;return[e,t]},useMutableSource:mu,useSyncExternalStore:hu,useId:Cu,unstable_isNewReconciler:!1},yx={readContext:Ut,useCallback:ku,useContext:Ut,useEffect:yo,useImperativeHandle:bu,useInsertionEffect:ju,useLayoutEffect:wu,useMemo:Su,useReducer:Il,useRef:vu,useState:function(){return Il(_n)},useDebugValue:vo,useDeferredValue:function(e){var t=Ht();return st===null?t.memoizedState=e:_u(t,st.memoizedState,e)},useTransition:function(){var e=Il(_n)[0],t=Ht().memoizedState;return[e,t]},useMutableSource:mu,useSyncExternalStore:hu,useId:Cu,unstable_isNewReconciler:!1};function Wt(e,t){if(e&&e.defaultProps){t=Qe({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function xi(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Qe({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var el={isMounted:function(e){return(e=e._reactInternals)?ur(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=vt(),a=Us(e),l=hs(n,a);l.payload=t,r!=null&&(l.callback=r),t=Os(e,l,a),t!==null&&(Kt(t,e,a,n),ua(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=vt(),a=Us(e),l=hs(n,a);l.tag=1,l.payload=t,r!=null&&(l.callback=r),t=Os(e,l,a),t!==null&&(Kt(t,e,a,n),ua(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=vt(),n=Us(e),a=hs(r,n);a.tag=2,t!=null&&(a.callback=t),t=Os(e,a,n),t!==null&&(Kt(t,e,n,r),ua(t,e,n))}};function kc(e,t,r,n,a,l,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,l,i):t.prototype&&t.prototype.isPureReactComponent?!vn(r,n)||!vn(a,l):!0}function Pu(e,t,r){var n=!1,a=Ws,l=t.contextType;return typeof l=="object"&&l!==null?l=Ut(l):(a=St(t)?ar:pt.current,n=t.contextTypes,l=(n=n!=null)?Mr(e,a):Ws),t=new t(r,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=el,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=l),t}function Sc(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&el.enqueueReplaceState(t,t.state,null)}function pi(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},uo(e);var l=t.contextType;typeof l=="object"&&l!==null?a.context=Ut(l):(l=St(t)?ar:pt.current,a.context=Mr(e,l)),a.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(xi(e,t,l,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&el.enqueueReplaceState(a,a.state,null),Aa(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Rr(e,t){try{var r="",n=t;do r+=Gm(n),n=n.return;while(n);var a=r}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:a,digest:null}}function Ml(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function fi(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var vx=typeof WeakMap=="function"?WeakMap:Map;function Iu(e,t,r){r=hs(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Oa||(Oa=!0,_i=n),fi(e,t)},r}function Mu(e,t,r){r=hs(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){fi(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(r.callback=function(){fi(e,t),typeof n!="function"&&(Fs===null?Fs=new Set([this]):Fs.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),r}function _c(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new vx;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=Mx.bind(null,e,t,r),t.then(e,e))}function Cc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Dc(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=hs(-1,1),t.tag=2,Os(r,t,1))),r.lanes|=1),e)}var jx=vs.ReactCurrentOwner,bt=!1;function ft(e,t,r,n){t.child=e===null?ou(t,null,r,n):Lr(t,e.child,r,n)}function Tc(e,t,r,n,a){r=r.render;var l=t.ref;return Er(t,a),n=fo(e,t,r,n,l,a),r=go(),e!==null&&!bt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,ys(e,t,a)):(Be&&r&&ro(t),t.flags|=1,ft(e,t,n,a),t.child)}function Ec(e,t,r,n,a){if(e===null){var l=r.type;return typeof l=="function"&&!Co(l)&&l.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=l,Au(e,t,l,n,a)):(e=ga(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&a)){var i=l.memoizedProps;if(r=r.compare,r=r!==null?r:vn,r(i,n)&&e.ref===t.ref)return ys(e,t,a)}return t.flags|=1,e=Hs(l,n),e.ref=t.ref,e.return=t,t.child=e}function Au(e,t,r,n,a){if(e!==null){var l=e.memoizedProps;if(vn(l,n)&&e.ref===t.ref)if(bt=!1,t.pendingProps=n=l,(e.lanes&a)!==0)e.flags&131072&&(bt=!0);else return t.lanes=e.lanes,ys(e,t,a)}return gi(e,t,r,n,a)}function Lu(e,t,r){var n=t.pendingProps,a=n.children,l=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ze(Sr,Dt),Dt|=r;else{if(!(r&1073741824))return e=l!==null?l.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ze(Sr,Dt),Dt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=l!==null?l.baseLanes:r,ze(Sr,Dt),Dt|=n}else l!==null?(n=l.baseLanes|r,t.memoizedState=null):n=r,ze(Sr,Dt),Dt|=n;return ft(e,t,a,r),t.child}function zu(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function gi(e,t,r,n,a){var l=St(r)?ar:pt.current;return l=Mr(t,l),Er(t,a),r=fo(e,t,r,n,l,a),n=go(),e!==null&&!bt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,ys(e,t,a)):(Be&&n&&ro(t),t.flags|=1,ft(e,t,r,a),t.child)}function Pc(e,t,r,n,a){if(St(r)){var l=!0;Ta(t)}else l=!1;if(Er(t,a),t.stateNode===null)xa(e,t),Pu(t,r,n),pi(t,r,n,a),n=!0;else if(e===null){var i=t.stateNode,o=t.memoizedProps;i.props=o;var c=i.context,x=r.contextType;typeof x=="object"&&x!==null?x=Ut(x):(x=St(r)?ar:pt.current,x=Mr(t,x));var f=r.getDerivedStateFromProps,j=typeof f=="function"||typeof i.getSnapshotBeforeUpdate=="function";j||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==n||c!==x)&&Sc(t,i,n,x),ks=!1;var d=t.memoizedState;i.state=d,Aa(t,n,i,a),c=t.memoizedState,o!==n||d!==c||kt.current||ks?(typeof f=="function"&&(xi(t,r,f,n),c=t.memoizedState),(o=ks||kc(t,r,o,n,d,c,x))?(j||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),i.props=n,i.state=c,i.context=x,n=o):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,du(e,t),o=t.memoizedProps,x=t.type===t.elementType?o:Wt(t.type,o),i.props=x,j=t.pendingProps,d=i.context,c=r.contextType,typeof c=="object"&&c!==null?c=Ut(c):(c=St(r)?ar:pt.current,c=Mr(t,c));var w=r.getDerivedStateFromProps;(f=typeof w=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==j||d!==c)&&Sc(t,i,n,c),ks=!1,d=t.memoizedState,i.state=d,Aa(t,n,i,a);var N=t.memoizedState;o!==j||d!==N||kt.current||ks?(typeof w=="function"&&(xi(t,r,w,n),N=t.memoizedState),(x=ks||kc(t,r,x,n,d,N,c)||!1)?(f||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,N,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,N,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=N),i.props=n,i.state=N,i.context=c,n=x):(typeof i.componentDidUpdate!="function"||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),n=!1)}return yi(e,t,r,n,l,a)}function yi(e,t,r,n,a,l){zu(e,t);var i=(t.flags&128)!==0;if(!n&&!i)return a&&fc(t,r,!1),ys(e,t,l);n=t.stateNode,jx.current=t;var o=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&i?(t.child=Lr(t,e.child,null,l),t.child=Lr(t,null,o,l)):ft(e,t,o,l),t.memoizedState=n.state,a&&fc(t,r,!0),t.child}function Ru(e){var t=e.stateNode;t.pendingContext?pc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&pc(e,t.context,!1),mo(e,t.containerInfo)}function Ic(e,t,r,n,a){return Ar(),ao(a),t.flags|=256,ft(e,t,r,n),t.child}var vi={dehydrated:null,treeContext:null,retryLane:0};function ji(e){return{baseLanes:e,cachePool:null,transitions:null}}function $u(e,t,r){var n=t.pendingProps,a=Ge.current,l=!1,i=(t.flags&128)!==0,o;if((o=i)||(o=e!==null&&e.memoizedState===null?!1:(a&2)!==0),o?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),ze(Ge,a&1),e===null)return mi(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=n.children,e=n.fallback,l?(n=t.mode,l=t.child,i={mode:"hidden",children:i},!(n&1)&&l!==null?(l.childLanes=0,l.pendingProps=i):l=rl(i,n,0,null),e=nr(e,n,r,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=ji(r),t.memoizedState=vi,e):jo(t,i));if(a=e.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return wx(e,t,i,n,o,a,r);if(l){l=n.fallback,i=t.mode,a=e.child,o=a.sibling;var c={mode:"hidden",children:n.children};return!(i&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Hs(a,c),n.subtreeFlags=a.subtreeFlags&14680064),o!==null?l=Hs(o,l):(l=nr(l,i,r,null),l.flags|=2),l.return=t,n.return=t,n.sibling=l,t.child=n,n=l,l=t.child,i=e.child.memoizedState,i=i===null?ji(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},l.memoizedState=i,l.childLanes=e.childLanes&~r,t.memoizedState=vi,n}return l=e.child,e=l.sibling,n=Hs(l,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function jo(e,t){return t=rl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Jn(e,t,r,n){return n!==null&&ao(n),Lr(t,e.child,null,r),e=jo(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function wx(e,t,r,n,a,l,i){if(r)return t.flags&256?(t.flags&=-257,n=Ml(Error(H(422))),Jn(e,t,i,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=n.fallback,a=t.mode,n=rl({mode:"visible",children:n.children},a,0,null),l=nr(l,a,i,null),l.flags|=2,n.return=t,l.return=t,n.sibling=l,t.child=n,t.mode&1&&Lr(t,e.child,null,i),t.child.memoizedState=ji(i),t.memoizedState=vi,l);if(!(t.mode&1))return Jn(e,t,i,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var o=n.dgst;return n=o,l=Error(H(419)),n=Ml(l,n,void 0),Jn(e,t,i,n)}if(o=(i&e.childLanes)!==0,bt||o){if(n=it,n!==null){switch(i&-i){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|i)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,gs(e,a),Kt(n,e,a,-1))}return _o(),n=Ml(Error(H(421))),Jn(e,t,i,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=Ax.bind(null,e),a._reactRetry=t,null):(e=l.treeContext,Pt=$s(a.nextSibling),It=t,Be=!0,qt=null,e!==null&&(Rt[$t++]=os,Rt[$t++]=cs,Rt[$t++]=lr,os=e.id,cs=e.overflow,lr=t),t=jo(t,n.children),t.flags|=4096,t)}function Mc(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),hi(e.return,t,r)}function Al(e,t,r,n,a){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=n,l.tail=r,l.tailMode=a)}function Ou(e,t,r){var n=t.pendingProps,a=n.revealOrder,l=n.tail;if(ft(e,t,n.children,r),n=Ge.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Mc(e,r,t);else if(e.tag===19)Mc(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(ze(Ge,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&La(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Al(t,!1,a,r,l);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&La(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Al(t,!0,r,null,l);break;case"together":Al(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function xa(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ys(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),or|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(H(153));if(t.child!==null){for(e=t.child,r=Hs(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Hs(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Nx(e,t,r){switch(t.tag){case 3:Ru(t),Ar();break;case 5:uu(t);break;case 1:St(t.type)&&Ta(t);break;case 4:mo(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;ze(Ia,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(ze(Ge,Ge.current&1),t.flags|=128,null):r&t.child.childLanes?$u(e,t,r):(ze(Ge,Ge.current&1),e=ys(e,t,r),e!==null?e.sibling:null);ze(Ge,Ge.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Ou(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),ze(Ge,Ge.current),n)break;return null;case 22:case 23:return t.lanes=0,Lu(e,t,r)}return ys(e,t,r)}var Fu,wi,Uu,Hu;Fu=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};wi=function(){};Uu=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,tr(as.current);var l=null;switch(r){case"input":a=Bl(e,a),n=Bl(e,n),l=[];break;case"select":a=Qe({},a,{value:void 0}),n=Qe({},n,{value:void 0}),l=[];break;case"textarea":a=Gl(e,a),n=Gl(e,n),l=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Ca)}Ql(r,n);var i;r=null;for(x in a)if(!n.hasOwnProperty(x)&&a.hasOwnProperty(x)&&a[x]!=null)if(x==="style"){var o=a[x];for(i in o)o.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else x!=="dangerouslySetInnerHTML"&&x!=="children"&&x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(mn.hasOwnProperty(x)?l||(l=[]):(l=l||[]).push(x,null));for(x in n){var c=n[x];if(o=a!=null?a[x]:void 0,n.hasOwnProperty(x)&&c!==o&&(c!=null||o!=null))if(x==="style")if(o){for(i in o)!o.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&o[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(l||(l=[]),l.push(x,r)),r=c;else x==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(l=l||[]).push(x,c)):x==="children"?typeof c!="string"&&typeof c!="number"||(l=l||[]).push(x,""+c):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&(mn.hasOwnProperty(x)?(c!=null&&x==="onScroll"&&$e("scroll",e),l||o===c||(l=[])):(l=l||[]).push(x,c))}r&&(l=l||[]).push("style",r);var x=l;(t.updateQueue=x)&&(t.flags|=4)}};Hu=function(e,t,r,n){r!==n&&(t.flags|=4)};function Yr(e,t){if(!Be)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function mt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function bx(e,t,r){var n=t.pendingProps;switch(no(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(t),null;case 1:return St(t.type)&&Da(),mt(t),null;case 3:return n=t.stateNode,zr(),Fe(kt),Fe(pt),xo(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Xn(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,qt!==null&&(Ti(qt),qt=null))),wi(e,t),mt(t),null;case 5:ho(t);var a=tr(kn.current);if(r=t.type,e!==null&&t.stateNode!=null)Uu(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(H(166));return mt(t),null}if(e=tr(as.current),Xn(t)){n=t.stateNode,r=t.type;var l=t.memoizedProps;switch(n[ts]=t,n[Nn]=l,e=(t.mode&1)!==0,r){case"dialog":$e("cancel",n),$e("close",n);break;case"iframe":case"object":case"embed":$e("load",n);break;case"video":case"audio":for(a=0;a<tn.length;a++)$e(tn[a],n);break;case"source":$e("error",n);break;case"img":case"image":case"link":$e("error",n),$e("load",n);break;case"details":$e("toggle",n);break;case"input":Ho(n,l),$e("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!l.multiple},$e("invalid",n);break;case"textarea":Vo(n,l),$e("invalid",n)}Ql(r,l),a=null;for(var i in l)if(l.hasOwnProperty(i)){var o=l[i];i==="children"?typeof o=="string"?n.textContent!==o&&(l.suppressHydrationWarning!==!0&&Yn(n.textContent,o,e),a=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(l.suppressHydrationWarning!==!0&&Yn(n.textContent,o,e),a=["children",""+o]):mn.hasOwnProperty(i)&&o!=null&&i==="onScroll"&&$e("scroll",n)}switch(r){case"input":Hn(n),Bo(n,l,!0);break;case"textarea":Hn(n),Wo(n);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(n.onclick=Ca)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{i=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=fd(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=i.createElement(r,{is:n.is}):(e=i.createElement(r),r==="select"&&(i=e,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):e=i.createElementNS(e,r),e[ts]=t,e[Nn]=n,Fu(e,t,!1,!1),t.stateNode=e;e:{switch(i=Kl(r,n),r){case"dialog":$e("cancel",e),$e("close",e),a=n;break;case"iframe":case"object":case"embed":$e("load",e),a=n;break;case"video":case"audio":for(a=0;a<tn.length;a++)$e(tn[a],e);a=n;break;case"source":$e("error",e),a=n;break;case"img":case"image":case"link":$e("error",e),$e("load",e),a=n;break;case"details":$e("toggle",e),a=n;break;case"input":Ho(e,n),a=Bl(e,n),$e("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=Qe({},n,{value:void 0}),$e("invalid",e);break;case"textarea":Vo(e,n),a=Gl(e,n),$e("invalid",e);break;default:a=n}Ql(r,a),o=a;for(l in o)if(o.hasOwnProperty(l)){var c=o[l];l==="style"?vd(e,c):l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&gd(e,c)):l==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&hn(e,c):typeof c=="number"&&hn(e,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(mn.hasOwnProperty(l)?c!=null&&l==="onScroll"&&$e("scroll",e):c!=null&&Bi(e,l,c,i))}switch(r){case"input":Hn(e),Bo(e,n,!1);break;case"textarea":Hn(e),Wo(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Vs(n.value));break;case"select":e.multiple=!!n.multiple,l=n.value,l!=null?_r(e,!!n.multiple,l,!1):n.defaultValue!=null&&_r(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Ca)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return mt(t),null;case 6:if(e&&t.stateNode!=null)Hu(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(H(166));if(r=tr(kn.current),tr(as.current),Xn(t)){if(n=t.stateNode,r=t.memoizedProps,n[ts]=t,(l=n.nodeValue!==r)&&(e=It,e!==null))switch(e.tag){case 3:Yn(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Yn(n.nodeValue,r,(e.mode&1)!==0)}l&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ts]=t,t.stateNode=n}return mt(t),null;case 13:if(Fe(Ge),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Be&&Pt!==null&&t.mode&1&&!(t.flags&128))lu(),Ar(),t.flags|=98560,l=!1;else if(l=Xn(t),n!==null&&n.dehydrated!==null){if(e===null){if(!l)throw Error(H(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(H(317));l[ts]=t}else Ar(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;mt(t),l=!1}else qt!==null&&(Ti(qt),qt=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Ge.current&1?rt===0&&(rt=3):_o())),t.updateQueue!==null&&(t.flags|=4),mt(t),null);case 4:return zr(),wi(e,t),e===null&&jn(t.stateNode.containerInfo),mt(t),null;case 10:return oo(t.type._context),mt(t),null;case 17:return St(t.type)&&Da(),mt(t),null;case 19:if(Fe(Ge),l=t.memoizedState,l===null)return mt(t),null;if(n=(t.flags&128)!==0,i=l.rendering,i===null)if(n)Yr(l,!1);else{if(rt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=La(e),i!==null){for(t.flags|=128,Yr(l,!1),n=i.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)l=r,e=n,l.flags&=14680066,i=l.alternate,i===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,l.type=i.type,e=i.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ze(Ge,Ge.current&1|2),t.child}e=e.sibling}l.tail!==null&&Xe()>$r&&(t.flags|=128,n=!0,Yr(l,!1),t.lanes=4194304)}else{if(!n)if(e=La(i),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Yr(l,!0),l.tail===null&&l.tailMode==="hidden"&&!i.alternate&&!Be)return mt(t),null}else 2*Xe()-l.renderingStartTime>$r&&r!==1073741824&&(t.flags|=128,n=!0,Yr(l,!1),t.lanes=4194304);l.isBackwards?(i.sibling=t.child,t.child=i):(r=l.last,r!==null?r.sibling=i:t.child=i,l.last=i)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Xe(),t.sibling=null,r=Ge.current,ze(Ge,n?r&1|2:r&1),t):(mt(t),null);case 22:case 23:return So(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Dt&1073741824&&(mt(t),t.subtreeFlags&6&&(t.flags|=8192)):mt(t),null;case 24:return null;case 25:return null}throw Error(H(156,t.tag))}function kx(e,t){switch(no(t),t.tag){case 1:return St(t.type)&&Da(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return zr(),Fe(kt),Fe(pt),xo(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ho(t),null;case 13:if(Fe(Ge),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(H(340));Ar()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Fe(Ge),null;case 4:return zr(),null;case 10:return oo(t.type._context),null;case 22:case 23:return So(),null;case 24:return null;default:return null}}var ea=!1,ht=!1,Sx=typeof WeakSet=="function"?WeakSet:Set,ne=null;function kr(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Ke(e,t,n)}else r.current=null}function Ni(e,t,r){try{r()}catch(n){Ke(e,t,n)}}var Ac=!1;function _x(e,t){if(ai=ka,e=qd(),so(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,l=n.focusNode;n=n.focusOffset;try{r.nodeType,l.nodeType}catch{r=null;break e}var i=0,o=-1,c=-1,x=0,f=0,j=e,d=null;t:for(;;){for(var w;j!==r||a!==0&&j.nodeType!==3||(o=i+a),j!==l||n!==0&&j.nodeType!==3||(c=i+n),j.nodeType===3&&(i+=j.nodeValue.length),(w=j.firstChild)!==null;)d=j,j=w;for(;;){if(j===e)break t;if(d===r&&++x===a&&(o=i),d===l&&++f===n&&(c=i),(w=j.nextSibling)!==null)break;j=d,d=j.parentNode}j=w}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(li={focusedElem:e,selectionRange:r},ka=!1,ne=t;ne!==null;)if(t=ne,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ne=e;else for(;ne!==null;){t=ne;try{var N=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var P=N.memoizedProps,z=N.memoizedState,p=t.stateNode,h=p.getSnapshotBeforeUpdate(t.elementType===t.type?P:Wt(t.type,P),z);p.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(E){Ke(t,t.return,E)}if(e=t.sibling,e!==null){e.return=t.return,ne=e;break}ne=t.return}return N=Ac,Ac=!1,N}function cn(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var l=a.destroy;a.destroy=void 0,l!==void 0&&Ni(t,r,l)}a=a.next}while(a!==n)}}function tl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function bi(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Bu(e){var t=e.alternate;t!==null&&(e.alternate=null,Bu(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ts],delete t[Nn],delete t[ci],delete t[ox],delete t[cx])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Vu(e){return e.tag===5||e.tag===3||e.tag===4}function Lc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Vu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ki(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Ca));else if(n!==4&&(e=e.child,e!==null))for(ki(e,t,r),e=e.sibling;e!==null;)ki(e,t,r),e=e.sibling}function Si(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Si(e,t,r),e=e.sibling;e!==null;)Si(e,t,r),e=e.sibling}var ot=null,Gt=!1;function Ns(e,t,r){for(r=r.child;r!==null;)Wu(e,t,r),r=r.sibling}function Wu(e,t,r){if(ns&&typeof ns.onCommitFiberUnmount=="function")try{ns.onCommitFiberUnmount(qa,r)}catch{}switch(r.tag){case 5:ht||kr(r,t);case 6:var n=ot,a=Gt;ot=null,Ns(e,t,r),ot=n,Gt=a,ot!==null&&(Gt?(e=ot,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):ot.removeChild(r.stateNode));break;case 18:ot!==null&&(Gt?(e=ot,r=r.stateNode,e.nodeType===8?Cl(e.parentNode,r):e.nodeType===1&&Cl(e,r),gn(e)):Cl(ot,r.stateNode));break;case 4:n=ot,a=Gt,ot=r.stateNode.containerInfo,Gt=!0,Ns(e,t,r),ot=n,Gt=a;break;case 0:case 11:case 14:case 15:if(!ht&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var l=a,i=l.destroy;l=l.tag,i!==void 0&&(l&2||l&4)&&Ni(r,t,i),a=a.next}while(a!==n)}Ns(e,t,r);break;case 1:if(!ht&&(kr(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){Ke(r,t,o)}Ns(e,t,r);break;case 21:Ns(e,t,r);break;case 22:r.mode&1?(ht=(n=ht)||r.memoizedState!==null,Ns(e,t,r),ht=n):Ns(e,t,r);break;default:Ns(e,t,r)}}function zc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Sx),t.forEach(function(n){var a=Lx.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Vt(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var l=e,i=t,o=i;e:for(;o!==null;){switch(o.tag){case 5:ot=o.stateNode,Gt=!1;break e;case 3:ot=o.stateNode.containerInfo,Gt=!0;break e;case 4:ot=o.stateNode.containerInfo,Gt=!0;break e}o=o.return}if(ot===null)throw Error(H(160));Wu(l,i,a),ot=null,Gt=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(x){Ke(a,t,x)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Gu(t,e),t=t.sibling}function Gu(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Vt(t,e),Zt(e),n&4){try{cn(3,e,e.return),tl(3,e)}catch(P){Ke(e,e.return,P)}try{cn(5,e,e.return)}catch(P){Ke(e,e.return,P)}}break;case 1:Vt(t,e),Zt(e),n&512&&r!==null&&kr(r,r.return);break;case 5:if(Vt(t,e),Zt(e),n&512&&r!==null&&kr(r,r.return),e.flags&32){var a=e.stateNode;try{hn(a,"")}catch(P){Ke(e,e.return,P)}}if(n&4&&(a=e.stateNode,a!=null)){var l=e.memoizedProps,i=r!==null?r.memoizedProps:l,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&l.type==="radio"&&l.name!=null&&xd(a,l),Kl(o,i);var x=Kl(o,l);for(i=0;i<c.length;i+=2){var f=c[i],j=c[i+1];f==="style"?vd(a,j):f==="dangerouslySetInnerHTML"?gd(a,j):f==="children"?hn(a,j):Bi(a,f,j,x)}switch(o){case"input":Vl(a,l);break;case"textarea":pd(a,l);break;case"select":var d=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var w=l.value;w!=null?_r(a,!!l.multiple,w,!1):d!==!!l.multiple&&(l.defaultValue!=null?_r(a,!!l.multiple,l.defaultValue,!0):_r(a,!!l.multiple,l.multiple?[]:"",!1))}a[Nn]=l}catch(P){Ke(e,e.return,P)}}break;case 6:if(Vt(t,e),Zt(e),n&4){if(e.stateNode===null)throw Error(H(162));a=e.stateNode,l=e.memoizedProps;try{a.nodeValue=l}catch(P){Ke(e,e.return,P)}}break;case 3:if(Vt(t,e),Zt(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{gn(t.containerInfo)}catch(P){Ke(e,e.return,P)}break;case 4:Vt(t,e),Zt(e);break;case 13:Vt(t,e),Zt(e),a=e.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(bo=Xe())),n&4&&zc(e);break;case 22:if(f=r!==null&&r.memoizedState!==null,e.mode&1?(ht=(x=ht)||f,Vt(t,e),ht=x):Vt(t,e),Zt(e),n&8192){if(x=e.memoizedState!==null,(e.stateNode.isHidden=x)&&!f&&e.mode&1)for(ne=e,f=e.child;f!==null;){for(j=ne=f;ne!==null;){switch(d=ne,w=d.child,d.tag){case 0:case 11:case 14:case 15:cn(4,d,d.return);break;case 1:kr(d,d.return);var N=d.stateNode;if(typeof N.componentWillUnmount=="function"){n=d,r=d.return;try{t=n,N.props=t.memoizedProps,N.state=t.memoizedState,N.componentWillUnmount()}catch(P){Ke(n,r,P)}}break;case 5:kr(d,d.return);break;case 22:if(d.memoizedState!==null){$c(j);continue}}w!==null?(w.return=d,ne=w):$c(j)}f=f.sibling}e:for(f=null,j=e;;){if(j.tag===5){if(f===null){f=j;try{a=j.stateNode,x?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(o=j.stateNode,c=j.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=yd("display",i))}catch(P){Ke(e,e.return,P)}}}else if(j.tag===6){if(f===null)try{j.stateNode.nodeValue=x?"":j.memoizedProps}catch(P){Ke(e,e.return,P)}}else if((j.tag!==22&&j.tag!==23||j.memoizedState===null||j===e)&&j.child!==null){j.child.return=j,j=j.child;continue}if(j===e)break e;for(;j.sibling===null;){if(j.return===null||j.return===e)break e;f===j&&(f=null),j=j.return}f===j&&(f=null),j.sibling.return=j.return,j=j.sibling}}break;case 19:Vt(t,e),Zt(e),n&4&&zc(e);break;case 21:break;default:Vt(t,e),Zt(e)}}function Zt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Vu(r)){var n=r;break e}r=r.return}throw Error(H(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(hn(a,""),n.flags&=-33);var l=Lc(e);Si(e,l,a);break;case 3:case 4:var i=n.stateNode.containerInfo,o=Lc(e);ki(e,o,i);break;default:throw Error(H(161))}}catch(c){Ke(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Cx(e,t,r){ne=e,qu(e)}function qu(e,t,r){for(var n=(e.mode&1)!==0;ne!==null;){var a=ne,l=a.child;if(a.tag===22&&n){var i=a.memoizedState!==null||ea;if(!i){var o=a.alternate,c=o!==null&&o.memoizedState!==null||ht;o=ea;var x=ht;if(ea=i,(ht=c)&&!x)for(ne=a;ne!==null;)i=ne,c=i.child,i.tag===22&&i.memoizedState!==null?Oc(a):c!==null?(c.return=i,ne=c):Oc(a);for(;l!==null;)ne=l,qu(l),l=l.sibling;ne=a,ea=o,ht=x}Rc(e)}else a.subtreeFlags&8772&&l!==null?(l.return=a,ne=l):Rc(e)}}function Rc(e){for(;ne!==null;){var t=ne;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ht||tl(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!ht)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Wt(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&wc(t,l,n);break;case 3:var i=t.updateQueue;if(i!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}wc(t,i,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var x=t.alternate;if(x!==null){var f=x.memoizedState;if(f!==null){var j=f.dehydrated;j!==null&&gn(j)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}ht||t.flags&512&&bi(t)}catch(d){Ke(t,t.return,d)}}if(t===e){ne=null;break}if(r=t.sibling,r!==null){r.return=t.return,ne=r;break}ne=t.return}}function $c(e){for(;ne!==null;){var t=ne;if(t===e){ne=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ne=r;break}ne=t.return}}function Oc(e){for(;ne!==null;){var t=ne;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{tl(4,t)}catch(c){Ke(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){Ke(t,a,c)}}var l=t.return;try{bi(t)}catch(c){Ke(t,l,c)}break;case 5:var i=t.return;try{bi(t)}catch(c){Ke(t,i,c)}}}catch(c){Ke(t,t.return,c)}if(t===e){ne=null;break}var o=t.sibling;if(o!==null){o.return=t.return,ne=o;break}ne=t.return}}var Dx=Math.ceil,$a=vs.ReactCurrentDispatcher,wo=vs.ReactCurrentOwner,Ft=vs.ReactCurrentBatchConfig,be=0,it=null,Je=null,ct=0,Dt=0,Sr=qs(0),rt=0,Dn=null,or=0,sl=0,No=0,dn=null,Nt=null,bo=0,$r=1/0,ls=null,Oa=!1,_i=null,Fs=null,ta=!1,Ds=null,Fa=0,un=0,Ci=null,pa=-1,fa=0;function vt(){return be&6?Xe():pa!==-1?pa:pa=Xe()}function Us(e){return e.mode&1?be&2&&ct!==0?ct&-ct:ux.transition!==null?(fa===0&&(fa=Pd()),fa):(e=Ee,e!==0||(e=window.event,e=e===void 0?16:$d(e.type)),e):1}function Kt(e,t,r,n){if(50<un)throw un=0,Ci=null,Error(H(185));In(e,r,n),(!(be&2)||e!==it)&&(e===it&&(!(be&2)&&(sl|=r),rt===4&&_s(e,ct)),_t(e,n),r===1&&be===0&&!(t.mode&1)&&($r=Xe()+500,Za&&Qs()))}function _t(e,t){var r=e.callbackNode;uh(e,t);var n=ba(e,e===it?ct:0);if(n===0)r!==null&&Qo(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Qo(r),t===1)e.tag===0?dx(Fc.bind(null,e)):ru(Fc.bind(null,e)),lx(function(){!(be&6)&&Qs()}),r=null;else{switch(Id(n)){case 1:r=Qi;break;case 4:r=Td;break;case 16:r=Na;break;case 536870912:r=Ed;break;default:r=Na}r=tm(r,Qu.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Qu(e,t){if(pa=-1,fa=0,be&6)throw Error(H(327));var r=e.callbackNode;if(Pr()&&e.callbackNode!==r)return null;var n=ba(e,e===it?ct:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Ua(e,n);else{t=n;var a=be;be|=2;var l=Yu();(it!==e||ct!==t)&&(ls=null,$r=Xe()+500,rr(e,t));do try{Px();break}catch(o){Ku(e,o)}while(!0);io(),$a.current=l,be=a,Je!==null?t=0:(it=null,ct=0,t=rt)}if(t!==0){if(t===2&&(a=ei(e),a!==0&&(n=a,t=Di(e,a))),t===1)throw r=Dn,rr(e,0),_s(e,n),_t(e,Xe()),r;if(t===6)_s(e,n);else{if(a=e.current.alternate,!(n&30)&&!Tx(a)&&(t=Ua(e,n),t===2&&(l=ei(e),l!==0&&(n=l,t=Di(e,l))),t===1))throw r=Dn,rr(e,0),_s(e,n),_t(e,Xe()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(H(345));case 2:Xs(e,Nt,ls);break;case 3:if(_s(e,n),(n&130023424)===n&&(t=bo+500-Xe(),10<t)){if(ba(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){vt(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=oi(Xs.bind(null,e,Nt,ls),t);break}Xs(e,Nt,ls);break;case 4:if(_s(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var i=31-Qt(n);l=1<<i,i=t[i],i>a&&(a=i),n&=~l}if(n=a,n=Xe()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Dx(n/1960))-n,10<n){e.timeoutHandle=oi(Xs.bind(null,e,Nt,ls),n);break}Xs(e,Nt,ls);break;case 5:Xs(e,Nt,ls);break;default:throw Error(H(329))}}}return _t(e,Xe()),e.callbackNode===r?Qu.bind(null,e):null}function Di(e,t){var r=dn;return e.current.memoizedState.isDehydrated&&(rr(e,t).flags|=256),e=Ua(e,t),e!==2&&(t=Nt,Nt=r,t!==null&&Ti(t)),e}function Ti(e){Nt===null?Nt=e:Nt.push.apply(Nt,e)}function Tx(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],l=a.getSnapshot;a=a.value;try{if(!Yt(l(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function _s(e,t){for(t&=~No,t&=~sl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Qt(t),n=1<<r;e[r]=-1,t&=~n}}function Fc(e){if(be&6)throw Error(H(327));Pr();var t=ba(e,0);if(!(t&1))return _t(e,Xe()),null;var r=Ua(e,t);if(e.tag!==0&&r===2){var n=ei(e);n!==0&&(t=n,r=Di(e,n))}if(r===1)throw r=Dn,rr(e,0),_s(e,t),_t(e,Xe()),r;if(r===6)throw Error(H(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Xs(e,Nt,ls),_t(e,Xe()),null}function ko(e,t){var r=be;be|=1;try{return e(t)}finally{be=r,be===0&&($r=Xe()+500,Za&&Qs())}}function cr(e){Ds!==null&&Ds.tag===0&&!(be&6)&&Pr();var t=be;be|=1;var r=Ft.transition,n=Ee;try{if(Ft.transition=null,Ee=1,e)return e()}finally{Ee=n,Ft.transition=r,be=t,!(be&6)&&Qs()}}function So(){Dt=Sr.current,Fe(Sr)}function rr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,ax(r)),Je!==null)for(r=Je.return;r!==null;){var n=r;switch(no(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Da();break;case 3:zr(),Fe(kt),Fe(pt),xo();break;case 5:ho(n);break;case 4:zr();break;case 13:Fe(Ge);break;case 19:Fe(Ge);break;case 10:oo(n.type._context);break;case 22:case 23:So()}r=r.return}if(it=e,Je=e=Hs(e.current,null),ct=Dt=t,rt=0,Dn=null,No=sl=or=0,Nt=dn=null,er!==null){for(t=0;t<er.length;t++)if(r=er[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,l=r.pending;if(l!==null){var i=l.next;l.next=a,n.next=i}r.pending=n}er=null}return e}function Ku(e,t){do{var r=Je;try{if(io(),ma.current=Ra,za){for(var n=qe.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}za=!1}if(ir=0,at=st=qe=null,on=!1,Sn=0,wo.current=null,r===null||r.return===null){rt=1,Dn=t,Je=null;break}e:{var l=e,i=r.return,o=r,c=t;if(t=ct,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var x=c,f=o,j=f.tag;if(!(f.mode&1)&&(j===0||j===11||j===15)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var w=Cc(i);if(w!==null){w.flags&=-257,Dc(w,i,o,l,t),w.mode&1&&_c(l,x,t),t=w,c=x;var N=t.updateQueue;if(N===null){var P=new Set;P.add(c),t.updateQueue=P}else N.add(c);break e}else{if(!(t&1)){_c(l,x,t),_o();break e}c=Error(H(426))}}else if(Be&&o.mode&1){var z=Cc(i);if(z!==null){!(z.flags&65536)&&(z.flags|=256),Dc(z,i,o,l,t),ao(Rr(c,o));break e}}l=c=Rr(c,o),rt!==4&&(rt=2),dn===null?dn=[l]:dn.push(l),l=i;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var p=Iu(l,c,t);jc(l,p);break e;case 1:o=c;var h=l.type,v=l.stateNode;if(!(l.flags&128)&&(typeof h.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Fs===null||!Fs.has(v)))){l.flags|=65536,t&=-t,l.lanes|=t;var E=Mu(l,o,t);jc(l,E);break e}}l=l.return}while(l!==null)}Zu(r)}catch(M){t=M,Je===r&&r!==null&&(Je=r=r.return);continue}break}while(!0)}function Yu(){var e=$a.current;return $a.current=Ra,e===null?Ra:e}function _o(){(rt===0||rt===3||rt===2)&&(rt=4),it===null||!(or&268435455)&&!(sl&268435455)||_s(it,ct)}function Ua(e,t){var r=be;be|=2;var n=Yu();(it!==e||ct!==t)&&(ls=null,rr(e,t));do try{Ex();break}catch(a){Ku(e,a)}while(!0);if(io(),be=r,$a.current=n,Je!==null)throw Error(H(261));return it=null,ct=0,rt}function Ex(){for(;Je!==null;)Xu(Je)}function Px(){for(;Je!==null&&!sh();)Xu(Je)}function Xu(e){var t=em(e.alternate,e,Dt);e.memoizedProps=e.pendingProps,t===null?Zu(e):Je=t,wo.current=null}function Zu(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=kx(r,t),r!==null){r.flags&=32767,Je=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{rt=6,Je=null;return}}else if(r=bx(r,t,Dt),r!==null){Je=r;return}if(t=t.sibling,t!==null){Je=t;return}Je=t=e}while(t!==null);rt===0&&(rt=5)}function Xs(e,t,r){var n=Ee,a=Ft.transition;try{Ft.transition=null,Ee=1,Ix(e,t,r,n)}finally{Ft.transition=a,Ee=n}return null}function Ix(e,t,r,n){do Pr();while(Ds!==null);if(be&6)throw Error(H(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(H(177));e.callbackNode=null,e.callbackPriority=0;var l=r.lanes|r.childLanes;if(mh(e,l),e===it&&(Je=it=null,ct=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||ta||(ta=!0,tm(Na,function(){return Pr(),null})),l=(r.flags&15990)!==0,r.subtreeFlags&15990||l){l=Ft.transition,Ft.transition=null;var i=Ee;Ee=1;var o=be;be|=4,wo.current=null,_x(e,r),Gu(r,e),Zh(li),ka=!!ai,li=ai=null,e.current=r,Cx(r),rh(),be=o,Ee=i,Ft.transition=l}else e.current=r;if(ta&&(ta=!1,Ds=e,Fa=a),l=e.pendingLanes,l===0&&(Fs=null),lh(r.stateNode),_t(e,Xe()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Oa)throw Oa=!1,e=_i,_i=null,e;return Fa&1&&e.tag!==0&&Pr(),l=e.pendingLanes,l&1?e===Ci?un++:(un=0,Ci=e):un=0,Qs(),null}function Pr(){if(Ds!==null){var e=Id(Fa),t=Ft.transition,r=Ee;try{if(Ft.transition=null,Ee=16>e?16:e,Ds===null)var n=!1;else{if(e=Ds,Ds=null,Fa=0,be&6)throw Error(H(331));var a=be;for(be|=4,ne=e.current;ne!==null;){var l=ne,i=l.child;if(ne.flags&16){var o=l.deletions;if(o!==null){for(var c=0;c<o.length;c++){var x=o[c];for(ne=x;ne!==null;){var f=ne;switch(f.tag){case 0:case 11:case 15:cn(8,f,l)}var j=f.child;if(j!==null)j.return=f,ne=j;else for(;ne!==null;){f=ne;var d=f.sibling,w=f.return;if(Bu(f),f===x){ne=null;break}if(d!==null){d.return=w,ne=d;break}ne=w}}}var N=l.alternate;if(N!==null){var P=N.child;if(P!==null){N.child=null;do{var z=P.sibling;P.sibling=null,P=z}while(P!==null)}}ne=l}}if(l.subtreeFlags&2064&&i!==null)i.return=l,ne=i;else e:for(;ne!==null;){if(l=ne,l.flags&2048)switch(l.tag){case 0:case 11:case 15:cn(9,l,l.return)}var p=l.sibling;if(p!==null){p.return=l.return,ne=p;break e}ne=l.return}}var h=e.current;for(ne=h;ne!==null;){i=ne;var v=i.child;if(i.subtreeFlags&2064&&v!==null)v.return=i,ne=v;else e:for(i=h;ne!==null;){if(o=ne,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:tl(9,o)}}catch(M){Ke(o,o.return,M)}if(o===i){ne=null;break e}var E=o.sibling;if(E!==null){E.return=o.return,ne=E;break e}ne=o.return}}if(be=a,Qs(),ns&&typeof ns.onPostCommitFiberRoot=="function")try{ns.onPostCommitFiberRoot(qa,e)}catch{}n=!0}return n}finally{Ee=r,Ft.transition=t}}return!1}function Uc(e,t,r){t=Rr(r,t),t=Iu(e,t,1),e=Os(e,t,1),t=vt(),e!==null&&(In(e,1,t),_t(e,t))}function Ke(e,t,r){if(e.tag===3)Uc(e,e,r);else for(;t!==null;){if(t.tag===3){Uc(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Fs===null||!Fs.has(n))){e=Rr(r,e),e=Mu(t,e,1),t=Os(t,e,1),e=vt(),t!==null&&(In(t,1,e),_t(t,e));break}}t=t.return}}function Mx(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=vt(),e.pingedLanes|=e.suspendedLanes&r,it===e&&(ct&r)===r&&(rt===4||rt===3&&(ct&130023424)===ct&&500>Xe()-bo?rr(e,0):No|=r),_t(e,t)}function Ju(e,t){t===0&&(e.mode&1?(t=Wn,Wn<<=1,!(Wn&130023424)&&(Wn=4194304)):t=1);var r=vt();e=gs(e,t),e!==null&&(In(e,t,r),_t(e,r))}function Ax(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Ju(e,r)}function Lx(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(H(314))}n!==null&&n.delete(t),Ju(e,r)}var em;em=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||kt.current)bt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return bt=!1,Nx(e,t,r);bt=!!(e.flags&131072)}else bt=!1,Be&&t.flags&1048576&&nu(t,Pa,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;xa(e,t),e=t.pendingProps;var a=Mr(t,pt.current);Er(t,r),a=fo(null,t,n,e,a,r);var l=go();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,St(n)?(l=!0,Ta(t)):l=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,uo(t),a.updater=el,t.stateNode=a,a._reactInternals=t,pi(t,n,e,r),t=yi(null,t,n,!0,l,r)):(t.tag=0,Be&&l&&ro(t),ft(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(xa(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=Rx(n),e=Wt(n,e),a){case 0:t=gi(null,t,n,e,r);break e;case 1:t=Pc(null,t,n,e,r);break e;case 11:t=Tc(null,t,n,e,r);break e;case 14:t=Ec(null,t,n,Wt(n.type,e),r);break e}throw Error(H(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Wt(n,a),gi(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Wt(n,a),Pc(e,t,n,a,r);case 3:e:{if(Ru(t),e===null)throw Error(H(387));n=t.pendingProps,l=t.memoizedState,a=l.element,du(e,t),Aa(t,n,null,r);var i=t.memoizedState;if(n=i.element,l.isDehydrated)if(l={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){a=Rr(Error(H(423)),t),t=Ic(e,t,n,r,a);break e}else if(n!==a){a=Rr(Error(H(424)),t),t=Ic(e,t,n,r,a);break e}else for(Pt=$s(t.stateNode.containerInfo.firstChild),It=t,Be=!0,qt=null,r=ou(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ar(),n===a){t=ys(e,t,r);break e}ft(e,t,n,r)}t=t.child}return t;case 5:return uu(t),e===null&&mi(t),n=t.type,a=t.pendingProps,l=e!==null?e.memoizedProps:null,i=a.children,ii(n,a)?i=null:l!==null&&ii(n,l)&&(t.flags|=32),zu(e,t),ft(e,t,i,r),t.child;case 6:return e===null&&mi(t),null;case 13:return $u(e,t,r);case 4:return mo(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Lr(t,null,n,r):ft(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Wt(n,a),Tc(e,t,n,a,r);case 7:return ft(e,t,t.pendingProps,r),t.child;case 8:return ft(e,t,t.pendingProps.children,r),t.child;case 12:return ft(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,l=t.memoizedProps,i=a.value,ze(Ia,n._currentValue),n._currentValue=i,l!==null)if(Yt(l.value,i)){if(l.children===a.children&&!kt.current){t=ys(e,t,r);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var o=l.dependencies;if(o!==null){i=l.child;for(var c=o.firstContext;c!==null;){if(c.context===n){if(l.tag===1){c=hs(-1,r&-r),c.tag=2;var x=l.updateQueue;if(x!==null){x=x.shared;var f=x.pending;f===null?c.next=c:(c.next=f.next,f.next=c),x.pending=c}}l.lanes|=r,c=l.alternate,c!==null&&(c.lanes|=r),hi(l.return,r,t),o.lanes|=r;break}c=c.next}}else if(l.tag===10)i=l.type===t.type?null:l.child;else if(l.tag===18){if(i=l.return,i===null)throw Error(H(341));i.lanes|=r,o=i.alternate,o!==null&&(o.lanes|=r),hi(i,r,t),i=l.sibling}else i=l.child;if(i!==null)i.return=l;else for(i=l;i!==null;){if(i===t){i=null;break}if(l=i.sibling,l!==null){l.return=i.return,i=l;break}i=i.return}l=i}ft(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,Er(t,r),a=Ut(a),n=n(a),t.flags|=1,ft(e,t,n,r),t.child;case 14:return n=t.type,a=Wt(n,t.pendingProps),a=Wt(n.type,a),Ec(e,t,n,a,r);case 15:return Au(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Wt(n,a),xa(e,t),t.tag=1,St(n)?(e=!0,Ta(t)):e=!1,Er(t,r),Pu(t,n,a),pi(t,n,a,r),yi(null,t,n,!0,e,r);case 19:return Ou(e,t,r);case 22:return Lu(e,t,r)}throw Error(H(156,t.tag))};function tm(e,t){return Dd(e,t)}function zx(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ot(e,t,r,n){return new zx(e,t,r,n)}function Co(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Rx(e){if(typeof e=="function")return Co(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Wi)return 11;if(e===Gi)return 14}return 2}function Hs(e,t){var r=e.alternate;return r===null?(r=Ot(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function ga(e,t,r,n,a,l){var i=2;if(n=e,typeof e=="function")Co(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case pr:return nr(r.children,a,l,t);case Vi:i=8,a|=8;break;case Ol:return e=Ot(12,r,t,a|2),e.elementType=Ol,e.lanes=l,e;case Fl:return e=Ot(13,r,t,a),e.elementType=Fl,e.lanes=l,e;case Ul:return e=Ot(19,r,t,a),e.elementType=Ul,e.lanes=l,e;case ud:return rl(r,a,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case cd:i=10;break e;case dd:i=9;break e;case Wi:i=11;break e;case Gi:i=14;break e;case bs:i=16,n=null;break e}throw Error(H(130,e==null?e:typeof e,""))}return t=Ot(i,r,t,a),t.elementType=e,t.type=n,t.lanes=l,t}function nr(e,t,r,n){return e=Ot(7,e,n,t),e.lanes=r,e}function rl(e,t,r,n){return e=Ot(22,e,n,t),e.elementType=ud,e.lanes=r,e.stateNode={isHidden:!1},e}function Ll(e,t,r){return e=Ot(6,e,null,t),e.lanes=r,e}function zl(e,t,r){return t=Ot(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $x(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fl(0),this.expirationTimes=fl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fl(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Do(e,t,r,n,a,l,i,o,c){return e=new $x(e,t,r,o,c),t===1?(t=1,l===!0&&(t|=8)):t=0,l=Ot(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},uo(l),e}function Ox(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:xr,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function sm(e){if(!e)return Ws;e=e._reactInternals;e:{if(ur(e)!==e||e.tag!==1)throw Error(H(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(St(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(H(171))}if(e.tag===1){var r=e.type;if(St(r))return su(e,r,t)}return t}function rm(e,t,r,n,a,l,i,o,c){return e=Do(r,n,!0,e,a,l,i,o,c),e.context=sm(null),r=e.current,n=vt(),a=Us(r),l=hs(n,a),l.callback=t??null,Os(r,l,a),e.current.lanes=a,In(e,a,n),_t(e,n),e}function nl(e,t,r,n){var a=t.current,l=vt(),i=Us(a);return r=sm(r),t.context===null?t.context=r:t.pendingContext=r,t=hs(l,i),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Os(a,t,i),e!==null&&(Kt(e,a,i,l),ua(e,a,i)),i}function Ha(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Hc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function To(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}function Fx(){return null}var nm=typeof reportError=="function"?reportError:function(e){console.error(e)};function Eo(e){this._internalRoot=e}al.prototype.render=Eo.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(H(409));nl(e,t,null,null)};al.prototype.unmount=Eo.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;cr(function(){nl(null,e,null,null)}),t[fs]=null}};function al(e){this._internalRoot=e}al.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ld();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Ss.length&&t!==0&&t<Ss[r].priority;r++);Ss.splice(r,0,e),r===0&&Rd(e)}};function Po(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ll(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Bc(){}function Ux(e,t,r,n,a){if(a){if(typeof n=="function"){var l=n;n=function(){var x=Ha(i);l.call(x)}}var i=rm(t,n,e,0,null,!1,!1,"",Bc);return e._reactRootContainer=i,e[fs]=i.current,jn(e.nodeType===8?e.parentNode:e),cr(),i}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var o=n;n=function(){var x=Ha(c);o.call(x)}}var c=Do(e,0,!1,null,null,!1,!1,"",Bc);return e._reactRootContainer=c,e[fs]=c.current,jn(e.nodeType===8?e.parentNode:e),cr(function(){nl(t,c,r,n)}),c}function il(e,t,r,n,a){var l=r._reactRootContainer;if(l){var i=l;if(typeof a=="function"){var o=a;a=function(){var c=Ha(i);o.call(c)}}nl(t,i,e,a)}else i=Ux(r,t,e,a,n);return Ha(i)}Md=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=en(t.pendingLanes);r!==0&&(Ki(t,r|1),_t(t,Xe()),!(be&6)&&($r=Xe()+500,Qs()))}break;case 13:cr(function(){var n=gs(e,1);if(n!==null){var a=vt();Kt(n,e,1,a)}}),To(e,1)}};Yi=function(e){if(e.tag===13){var t=gs(e,134217728);if(t!==null){var r=vt();Kt(t,e,134217728,r)}To(e,134217728)}};Ad=function(e){if(e.tag===13){var t=Us(e),r=gs(e,t);if(r!==null){var n=vt();Kt(r,e,t,n)}To(e,t)}};Ld=function(){return Ee};zd=function(e,t){var r=Ee;try{return Ee=e,t()}finally{Ee=r}};Xl=function(e,t,r){switch(t){case"input":if(Vl(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=Xa(n);if(!a)throw Error(H(90));hd(n),Vl(n,a)}}}break;case"textarea":pd(e,r);break;case"select":t=r.value,t!=null&&_r(e,!!r.multiple,t,!1)}};Nd=ko;bd=cr;var Hx={usingClientEntryPoint:!1,Events:[An,vr,Xa,jd,wd,ko]},Xr={findFiberByHostInstance:Js,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Bx={bundleType:Xr.bundleType,version:Xr.version,rendererPackageName:Xr.rendererPackageName,rendererConfig:Xr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vs.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=_d(e),e===null?null:e.stateNode},findFiberByHostInstance:Xr.findFiberByHostInstance||Fx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sa.isDisabled&&sa.supportsFiber)try{qa=sa.inject(Bx),ns=sa}catch{}}At.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hx;At.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Po(t))throw Error(H(200));return Ox(e,t,null,r)};At.createRoot=function(e,t){if(!Po(e))throw Error(H(299));var r=!1,n="",a=nm;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Do(e,1,!1,null,null,r,!1,n,a),e[fs]=t.current,jn(e.nodeType===8?e.parentNode:e),new Eo(t)};At.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(H(188)):(e=Object.keys(e).join(","),Error(H(268,e)));return e=_d(t),e=e===null?null:e.stateNode,e};At.flushSync=function(e){return cr(e)};At.hydrate=function(e,t,r){if(!ll(t))throw Error(H(200));return il(null,e,t,!0,r)};At.hydrateRoot=function(e,t,r){if(!Po(e))throw Error(H(405));var n=r!=null&&r.hydratedSources||null,a=!1,l="",i=nm;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),t=rm(t,null,e,1,r??null,a,!1,l,i),e[fs]=t.current,jn(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new al(t)};At.render=function(e,t,r){if(!ll(t))throw Error(H(200));return il(null,e,t,!1,r)};At.unmountComponentAtNode=function(e){if(!ll(e))throw Error(H(40));return e._reactRootContainer?(cr(function(){il(null,null,e,!1,function(){e._reactRootContainer=null,e[fs]=null})}),!0):!1};At.unstable_batchedUpdates=ko;At.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!ll(r))throw Error(H(200));if(e==null||e._reactInternals===void 0)throw Error(H(38));return il(e,t,r,!1,n)};At.version="18.3.1-next-f1338f8080-20240426";function am(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(am)}catch(e){console.error(e)}}am(),ad.exports=At;var Vx=ad.exports,lm,Vc=Vx;lm=Vc.createRoot,Vc.hydrateRoot;const Wx="https://workflow.bylinelms.com/api",im=m.createContext(void 0);function Gx({children:e}){const[t,r]=m.useState(null),[n,a]=m.useState(null),[l,i]=m.useState(!0);m.useEffect(()=>{(()=>{try{const j=localStorage.getItem("access_token"),d=localStorage.getItem("user_data"),w=localStorage.getItem("refresh_token");if(j&&d){const N=JSON.parse(d),P={user:N,access_token:j,refresh_token:w||"",expires_in:3600};r(N),a(P)}}catch{localStorage.removeItem("access_token"),localStorage.removeItem("user_data"),localStorage.removeItem("refresh_token")}finally{i(!1)}})()},[]);const o=async()=>({data:null,error:{message:"Admin registration is not available."}}),c=async(f,j)=>{try{const d=await fetch(`${Wx}/auth/admin/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:f,password:j})}),w=await d.json();if(d.ok&&w.success){const{user:N,access_token:P,refresh_token:z,expires_in:p}=w.data;localStorage.setItem("access_token",P),localStorage.setItem("user_data",JSON.stringify(N)),z&&localStorage.setItem("refresh_token",z);const h={user:N,access_token:P,refresh_token:z||"",expires_in:p};return r(N),a(h),{data:{user:N,session:h},error:null}}else return{data:{user:null,session:null},error:{message:w.message||"Login failed"}}}catch{return{data:{user:null,session:null},error:{message:"Network error"}}}},x=async()=>(localStorage.clear(),r(null),a(null),{error:null});return s.jsx(im.Provider,{value:{user:t,session:n,loading:l,signUp:o,signIn:c,signOut:x},children:e})}function zn(){const e=m.useContext(im);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var qx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qx=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),te=(e,t)=>{const r=m.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:o="",children:c,...x},f)=>m.createElement("svg",{ref:f,...qx,width:a,height:a,stroke:n,strokeWidth:i?Number(l)*24/Number(a):l,className:["lucide",`lucide-${Qx(e)}`,o].join(" "),...x},[...t.map(([j,d])=>m.createElement(j,d)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kx=te("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yx=te("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=te("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xx=te("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Io=te("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zx=te("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jx=te("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ei=te("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=te("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ep=te("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tp=te("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const om=te("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ya=te("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sp=te("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=te("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pi=te("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=te("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=te("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rp=te("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=te("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const np=te("Clock3",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16.5 12",key:"1aq6pp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=te("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ap=te("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ol=te("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=te("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cm=te("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lp=te("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=te("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=te("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ip=te("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tn=te("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const op=te("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cp=te("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=te("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dp=te("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const up=te("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mp=te("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=te("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dm=te("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const um=te("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mm=te("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hm=te("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xm=te("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=te("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wc=te("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hp=te("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=te("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ii=te("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xp=te("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=te("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pp=te("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pm=te("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=te("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fm=te("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fp=te("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mi=te("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=te("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gp=te("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ba=te("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gc=te("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yp=te("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Va=te("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ai=te("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vp=te("UsersRound",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=te("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jp=te("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Li=te("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function D({children:e,variant:t="primary",size:r="md",loading:n=!1,icon:a,className:l="",disabled:i,...o}){const c="inline-flex items-center justify-center font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",x={primary:"bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500",secondary:"bg-gray-600 hover:bg-gray-700 text-white focus:ring-gray-500",outline:"border border-gray-300 hover:bg-gray-50 text-gray-700 focus:ring-blue-500",ghost:"hover:bg-gray-100 text-gray-700 focus:ring-blue-500",danger:"bg-red-600 hover:bg-red-700 text-white focus:ring-red-500"},f={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"};return s.jsxs("button",{className:`${c} ${x[t]} ${f[r]} ${l}`,disabled:i||n,...o,children:[n?s.jsx(Rn,{className:"w-4 h-4 animate-spin mr-2"}):a?s.jsx("span",{className:"mr-2",children:a}):null,e]})}function Z({children:e,className:t="",onClick:r}){return s.jsx("div",{className:`bg-white rounded-lg shadow-sm border border-gray-200 ${r?"cursor-pointer hover:shadow-md transition-shadow":""} ${t}`,onClick:r,children:e})}function Ie({children:e,className:t=""}){return s.jsx("div",{className:`px-6 py-4 border-b border-gray-200 ${t}`,children:e})}function J({children:e,className:t=""}){return s.jsx("div",{className:`px-6 py-4 ${t}`,children:e})}function Me({children:e,className:t=""}){return s.jsx("h3",{className:`text-lg font-semibold text-gray-900 ${t}`,children:e})}function wp({onSwitchToTeam:e}){const[t,r]=m.useState(""),[n,a]=m.useState(""),[l,i]=m.useState(!1),[o,c]=m.useState(!1),[x,f]=m.useState(null),{signIn:j}=zn(),d=async w=>{w.preventDefault(),c(!0),f(null);try{const{data:N,error:P}=await j(t,n);if(P){f(P.message);return}N!=null&&N.user&&console.log("Sign in successful:",N.user)}catch(N){f(N.message)}finally{c(!1)}};return s.jsx("div",{className:"w-full max-w-md",children:s.jsxs(Z,{className:"shadow-xl border-0",children:[s.jsxs(Ie,{className:"text-center pb-6",children:[s.jsx("div",{className:"flex items-center justify-center mb-4",children:s.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center",children:s.jsx(pm,{className:"w-6 h-6 text-white"})})}),s.jsx(Me,{className:"text-2xl font-bold text-gray-900",children:"Admin Portal"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Sign in to manage projects, teams, and tasks"})]}),s.jsxs(J,{className:"space-y-6",children:[s.jsxs("form",{onSubmit:d,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx(hm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"email",required:!0,value:t,onChange:w=>r(w.target.value),className:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Enter your email"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(dm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:l?"text":"password",required:!0,value:n,onChange:w=>a(w.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Enter your password",minLength:6}),s.jsx("button",{type:"button",onClick:()=>i(!l),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:l?s.jsx(ol,{className:"w-4 h-4"}):s.jsx(Ks,{className:"w-4 h-4"})})]})]}),x&&s.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:s.jsx("p",{className:"text-sm text-red-600",children:x})}),s.jsx(D,{type:"submit",className:"w-full py-3",loading:o,icon:o?s.jsx(Rn,{className:"w-4 h-4"}):s.jsx(um,{className:"w-4 h-4"}),children:"Sign In to Admin Portal"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("div",{className:"w-full border-t border-gray-200"})}),s.jsx("div",{className:"relative flex justify-center text-sm",children:s.jsx("span",{className:"px-4 bg-white text-gray-500",children:"Or"})})]}),s.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-green-500 to-emerald-600 rounded-lg flex items-center justify-center",children:s.jsx(He,{className:"w-4 h-4 text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-green-900",children:"Team Member?"}),s.jsx("p",{className:"text-sm text-green-700",children:"Access your tasks and performance"})]})]}),s.jsx(D,{variant:"outline",className:"w-full border-green-300 text-green-700 hover:bg-green-50",onClick:e,icon:s.jsx(Zx,{className:"w-4 h-4"}),children:"Sign in as Team Member"})]})]})]})})}const Ps="https://workflow.bylinelms.com/api",ra=()=>{const e=localStorage.getItem("access_token");return{"Content-Type":"application/json",...e&&{Authorization:`Bearer ${e}`}}},na=()=>{const e=localStorage.getItem("teamToken");return{"Content-Type":"application/json",...e&&{Authorization:`Bearer ${e}`}}},Is=async e=>{var r;const t=await e.json();if(!e.ok)throw new Error(((r=t.error)==null?void 0:r.message)||t.message||"API request failed");return t},Ms=async(e,t)=>await fetch(e,t),R={get:async e=>{const t=await Ms(`${Ps}${e}`,{method:"GET",headers:ra()});return Is(t)},post:async(e,t)=>{const r=await Ms(`${Ps}${e}`,{method:"POST",headers:ra(),body:JSON.stringify(t)});return Is(r)},put:async(e,t)=>{const r=await Ms(`${Ps}${e}`,{method:"PUT",headers:ra(),body:JSON.stringify(t)});return Is(r)},delete:async e=>{const t=await Ms(`${Ps}${e}`,{method:"DELETE",headers:ra()});return Is(t)}},zt={get:async e=>{const t=await Ms(`${Ps}${e}`,{method:"GET",headers:na()});return Is(t)},post:async(e,t)=>{const r=await Ms(`${Ps}${e}`,{method:"POST",headers:na(),body:JSON.stringify(t)});return Is(r)},put:async(e,t)=>{const r=await Ms(`${Ps}${e}`,{method:"PUT",headers:na(),body:JSON.stringify(t)});return Is(r)},delete:async e=>{const t=await Ms(`${Ps}${e}`,{method:"DELETE",headers:na()});return Is(t)}},Np={getAll:async e=>{const t=new URLSearchParams(e).toString(),r=t?`/projects?${t}`:"/projects";return(await zt.get(r)).data},getById:async e=>(await zt.get(`/projects/${e}`)).data},De={getAll:async()=>(await R.get("/team")).data,getMyTasks:async()=>(await zt.get("/team/my-tasks")).data,getMyProfile:async()=>(await zt.get("/team/my-profile")).data,getById:async e=>(await R.get(`/team/${e}`)).data,create:async e=>(await R.post("/team",e)).data,update:async(e,t)=>(await R.put(`/team/${e}`,t)).data,delete:async e=>(await R.delete(`/team/${e}`)).data,getMembers:async()=>(await R.get("/team/members")).data,getMemberById:async e=>(await R.get(`/team/members/${e}`)).data,createMember:async e=>(await R.post("/team/members",e)).data,updateMember:async(e,t)=>(await R.put(`/team/members/${e}`,t)).data,deleteMember:async e=>(await R.delete(`/team/members/${e}`)).data,getTeams:async()=>(await R.get("/team/teams")).data,getTeamById:async e=>(await R.get(`/team/teams/${e}`)).data,createTeam:async e=>(await R.post("/team/teams",e)).data,updateTeam:async(e,t)=>(await R.put(`/team/teams/${e}`,t)).data,deleteTeam:async e=>(await R.delete(`/team/teams/${e}`)).data,addMemberToTeam:async(e,t)=>(await R.post(`/team/teams/${e}/members`,t)).data,removeMemberFromTeam:async(e,t)=>(await R.delete(`/team/teams/${e}/members/${t}`)).data,getTeamMembers:async e=>(await R.get(`/team/teams/${e}`)).data.members||[],authenticate:async e=>await R.post("/team/authenticate",e)},We={getAll:async e=>{const t=new URLSearchParams(e).toString(),r=t?`/projects?${t}`:"/projects";return(await R.get(r)).data},getById:async e=>(await R.get(`/projects/${e}`)).data,create:async e=>(await R.post("/projects",e)).data,update:async(e,t)=>(await R.put(`/projects/${e}`,t)).data,delete:async e=>(await R.delete(`/projects/${e}`)).data,getMembers:async e=>(await R.get(`/projects/${e}/members`)).data,getTeams:async e=>(await R.get(`/projects/${e}/teams`)).data,addMember:async(e,t)=>(await R.post(`/projects/${e}/members`,t)).data,addTeam:async(e,t)=>(await R.post(`/projects/${e}/members`,t)).data,removeMember:async(e,t)=>(await R.delete(`/projects/${e}/members/${t}`)).data,removeTeam:async(e,t)=>(await R.delete(`/projects/${e}/teams/${t}`)).data},As={getAll:async()=>(await R.get("/categories")).data,getById:async e=>(await R.get(`/categories/${e}`)).data,create:async e=>(await R.post("/categories",e)).data,update:async(e,t)=>(await R.put(`/categories/${e}`,t)).data,delete:async e=>(await R.delete(`/categories/${e}`)).data},rs={getAll:async()=>(await R.get("/skills")).data,getById:async e=>(await R.get(`/skills/${e}`)).data,create:async e=>(await R.post("/skills",e)).data,update:async(e,t)=>(await R.put(`/skills/${e}`,t)).data,delete:async e=>(await R.delete(`/skills/${e}`)).data},Oe={getAll:async e=>{const t=new URLSearchParams(e).toString(),r=t?`/tasks?${t}`:"/tasks";return(await R.get(r)).data},getById:async e=>(await R.get(`/tasks/${e}`)).data,create:async e=>(await R.post("/tasks",e)).data,update:async(e,t)=>(await R.put(`/tasks/${e}`,t)).data,delete:async e=>(await R.delete(`/tasks/${e}`)).data,getByProject:async e=>(await R.get(`/tasks?project_id=${e}`)).data,getByAssignee:async(e,t)=>(await R.get(`/tasks?assignee_id=${e}&assignee_type=${t}`)).data,updateStatus:async(e,t,r)=>{const n={status:t};return r!==void 0&&(n.progress=r),(await R.put(`/tasks/${e}`,n)).data},updateProgress:async(e,t)=>(await R.put(`/tasks/${e}`,{progress:t})).data,requestExtension:async(e,t)=>(await R.post(`/tasks/${e}/extensions`,t)).data,getExtensions:async e=>(await R.get(`/tasks/${e}/extensions`)).data,reviewExtension:async(e,t)=>(await R.put(`/tasks/extensions/${e}/review`,t)).data,addRemark:async(e,t)=>(await R.post(`/tasks/${e}/remarks`,t)).data,getRemarks:async e=>(await R.get(`/tasks/${e}/remarks`)).data,deleteRemark:async e=>(await R.delete(`/tasks/remarks/${e}`)).data},qc={update:async(e,t)=>(await zt.put(`/tasks/${e}`,t)).data,updateStatus:async(e,t,r)=>{const n={status:t};return r!==void 0&&(n.progress=r),(await zt.put(`/tasks/${e}`,n)).data},updateProgress:async(e,t)=>(await zt.put(`/tasks/${e}`,{progress:t})).data,requestExtension:async(e,t)=>(await zt.post(`/tasks/${e}/extensions`,t)).data,getExtensions:async e=>(await zt.get(`/tasks/${e}/extensions`)).data,addRemark:async(e,t)=>(await zt.post(`/tasks/${e}/remarks`,t)).data,getRemarks:async e=>(await zt.get(`/tasks/${e}/remarks`)).data,deleteRemark:async e=>(await zt.delete(`/tasks/remarks/${e}`)).data},aa={getAll:async e=>{const t=new URLSearchParams(e).toString(),r=t?`/allocations?${t}`:"/allocations";return(await R.get(r)).data},getById:async e=>(await R.get(`/allocations/${e}`)).data,create:async e=>(await R.post("/allocations",e)).data,update:async(e,t)=>(await R.put(`/allocations/${e}`,t)).data,delete:async e=>(await R.delete(`/allocations/${e}`)).data,getWorkloadSummary:async e=>(await R.get(`/allocations/workload-summary?date=${e}`)).data},Tt={getAll:async e=>{const t=e?`/stages?project_id=${e}`:"/stages";return(await R.get(t)).data},getById:async e=>(await R.get(`/stages/${e}`)).data,create:async e=>(await R.post("/stages",e)).data,update:async(e,t)=>(await R.put(`/stages/${e}`,t)).data,delete:async e=>(await R.delete(`/stages/${e}`)).data,getByCategory:async e=>(await R.get(`/stages/category/${e}`)).data,reorder:async(e,t)=>(await R.post(`/stages/category/${e}/reorder`,{stage_orders:t})).data},Rl={getByCategory:async e=>(await R.get(`/stage-templates/category/${e}`)).data,getById:async e=>(await R.get(`/stage-templates/${e}`)).data,create:async e=>(await R.post("/stage-templates",e)).data,update:async(e,t)=>(await R.put(`/stage-templates/${e}`,t)).data,delete:async e=>(await R.delete(`/stage-templates/${e}`)).data,bulkCreate:async(e,t)=>(await R.post(`/stage-templates/category/${e}/bulk`,{templates:t})).data},ds={getByProject:async e=>(await R.get(`/grades/project/${e}`)).data,getAll:async()=>(await R.get("/grades")).data,getById:async e=>(await R.get(`/grades/${e}`)).data,create:async e=>(await R.post("/grades",e)).data,update:async(e,t)=>(await R.put(`/grades/${e}`,t)).data,delete:async e=>(await R.delete(`/grades/${e}`)).data,distributeWeights:async e=>(await R.post("/grades/distribute-weights",{project_id:e})).data},us={getByGrade:async e=>(await R.get(`/books/grade/${e}`)).data,getAll:async()=>(await R.get("/books")).data,getById:async e=>(await R.get(`/books/${e}`)).data,create:async e=>(await R.post("/books",e)).data,update:async(e,t)=>(await R.put(`/books/${e}`,t)).data,delete:async e=>(await R.delete(`/books/${e}`)).data,distributeWeights:async e=>(await R.post("/books/distribute-weights",{grade_id:e})).data},ms={getByBook:async e=>(await R.get(`/units/book/${e}`)).data,getAll:async()=>(await R.get("/units")).data,getById:async e=>(await R.get(`/units/${e}`)).data,create:async e=>(await R.post("/units",e)).data,update:async(e,t)=>(await R.put(`/units/${e}`,t)).data,delete:async e=>(await R.delete(`/units/${e}`)).data,distributeWeights:async e=>(await R.post("/units/distribute-weights",{book_id:e})).data},Bs={getByUnit:async e=>(await R.get(`/lessons/unit/${e}`)).data,getAll:async()=>(await R.get("/lessons")).data,getById:async e=>(await R.get(`/lessons/${e}`)).data,create:async e=>(await R.post("/lessons",e)).data,update:async(e,t)=>(await R.put(`/lessons/${e}`,t)).data,delete:async e=>(await R.delete(`/lessons/${e}`)).data,distributeWeights:async e=>(await R.post("/lessons/distribute-weights",{unit_id:e})).data},bp={getOverview:async()=>{try{const e=await Promise.allSettled([We.getAll().catch(o=>(console.error("❌ Projects fetch error:",o),[])),De.getMembers().catch(o=>(console.error("❌ Team members fetch error:",o),[])),As.getAll().catch(o=>(console.error("❌ Categories fetch error:",o),[])),rs.getAll().catch(o=>(console.error("❌ Skills fetch error:",o),[])),Oe.getAll().catch(o=>(console.error("❌ Tasks fetch error:",o),[]))]),[t,r,n,a,l]=e.map(o=>o.status==="fulfilled"?o.value||[]:(console.error("❌ API call failed:",o.reason),[])),i={totalProjects:t.length,activeProjects:t.filter(o=>o.status==="active").length,totalTeamMembers:r.length,activeTeamMembers:r.filter(o=>o.is_active!==!1).length,totalCategories:n.length,totalSkills:a.length,totalTasks:l.length,activeTasks:l.filter(o=>["not-started","in-progress","under-review"].includes(o.status)).length,completedTasks:l.filter(o=>o.status==="completed").length,overdueTasks:l.filter(o=>new Date(o.end_date)<new Date&&o.status!=="completed").length};return{projects:t,teamMembers:r,tasks:l,categories:n,skills:a,stats:i}}catch(e){return console.error("Dashboard overview fetch error:",e),{projects:[],teamMembers:[],tasks:[],categories:[],skills:[],stats:{totalProjects:0,activeProjects:0,totalTeamMembers:0,activeTeamMembers:0,totalCategories:0,totalSkills:0,totalTasks:0,activeTasks:0,completedTasks:0,overdueTasks:0}}}},getRecentActivity:async()=>[]},Zs={getByTeamMember:async e=>(await R.get(`/performance-flags/team-member/${e}`)).data,getByTask:async e=>(await R.get(`/performance-flags/task/${e}`)).data,getSummary:async e=>(await R.get(`/performance-flags/summary/${e}`)).data,add:async e=>(await R.post("/performance-flags",e)).data,update:async(e,t)=>(await R.put(`/performance-flags/${e}`,t)).data,delete:async e=>(await R.delete(`/performance-flags/${e}`)).data};function kp({onLogin:e,onBackToAdmin:t}){const[r,n]=m.useState(""),[a,l]=m.useState(""),[i,o]=m.useState(!1),[c,x]=m.useState(""),[f,j]=m.useState(!1),d=async w=>{w.preventDefault(),j(!0),x("");try{const N=await De.authenticate({email:r,passcode:a});N.success&&N.data?(N.token&&localStorage.setItem("teamToken",N.token),e(N.data)):x("Invalid email or passcode. Please check your credentials.")}catch(N){console.error("Login error:",N),x(N.message||"Login failed. Please try again.")}finally{j(!1)}};return s.jsx("div",{className:"w-full max-w-md",children:s.jsxs(Z,{className:"shadow-xl border-0",children:[s.jsxs(Ie,{className:"text-center pb-6",children:[s.jsx("div",{className:"flex items-center justify-center mb-4",children:s.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-green-500 to-emerald-600 rounded-xl flex items-center justify-center",children:s.jsx(He,{className:"w-6 h-6 text-white"})})}),s.jsx(Me,{className:"text-2xl font-bold text-gray-900",children:"Team Member Portal"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Sign in to view your tasks and performance"})]}),s.jsxs(J,{className:"space-y-6",children:[s.jsxs("form",{onSubmit:d,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx(hm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"email",required:!0,value:r,onChange:w=>n(w.target.value),className:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors",placeholder:"Enter your email"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Passcode"}),s.jsxs("div",{className:"relative",children:[s.jsx(dm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:i?"text":"password",required:!0,value:a,onChange:w=>l(w.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors",placeholder:"Enter your passcode"}),s.jsx("button",{type:"button",onClick:()=>o(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:i?s.jsx(ol,{className:"w-4 h-4"}):s.jsx(Ks,{className:"w-4 h-4"})})]})]}),c&&s.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg flex items-center",children:[s.jsx(Yx,{className:"w-4 h-4 text-red-500 mr-2"}),s.jsx("p",{className:"text-sm text-red-600",children:c})]}),s.jsx(D,{type:"submit",className:"w-full py-3",loading:f,icon:s.jsx(um,{className:"w-4 h-4"}),children:"Sign In to Team Portal"})]}),t&&s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("div",{className:"w-full border-t border-gray-200"})}),s.jsx("div",{className:"relative flex justify-center text-sm",children:s.jsx("span",{className:"px-4 bg-white text-gray-500",children:"Or"})})]}),t&&s.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center",children:s.jsx(pm,{className:"w-4 h-4 text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-blue-900",children:"Admin Access?"}),s.jsx("p",{className:"text-sm text-blue-700",children:"Manage projects and teams"})]})]}),s.jsx(D,{variant:"outline",className:"w-full border-blue-300 text-blue-700 hover:bg-blue-50",onClick:t,icon:s.jsx(Io,{className:"w-4 h-4"}),children:"Back to Admin Portal"})]})]})]})})}function Y({children:e,variant:t="default",size:r="sm",className:n=""}){const a="inline-flex items-center font-medium rounded-full",l={default:"bg-gray-100 text-gray-800",primary:"bg-blue-100 text-blue-800",secondary:"bg-gray-100 text-gray-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800"},i={sm:"px-2.5 py-0.5 text-xs",md:"px-3 py-1 text-sm"};return s.jsx("span",{className:`${a} ${l[t]} ${i[r]} ${n}`,children:e})}function Ze({isOpen:e,onClose:t,title:r,children:n,size:a="md"}){if(!e)return null;const l={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"};return s.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:s.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[s.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:t}),s.jsxs("div",{className:`inline-block w-full ${l[a]} my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-lg`,children:[s.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:r}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(Li,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"px-6 py-4",children:n})]})]})})}function Sp({user:e,onLogout:t}){var Q;const[r,n]=m.useState([]),[a,l]=m.useState([]),[i,o]=m.useState(null),[c,x]=m.useState(!1),[f,j]=m.useState(!1),[d,w]=m.useState(""),[N,P]=m.useState(new Date(Date.now()+7*24*60*60*1e3).toISOString().split("T")[0]),[z,p]=m.useState(""),[h,v]=m.useState(new Date().toISOString().split("T")[0]),[E,M]=m.useState("general"),[u,g]=m.useState(!0),[b,k]=m.useState(!1),[A,ee]=m.useState([]);m.useEffect(()=>{O()},[e.id]);const O=async()=>{try{g(!0);const[S,ie,ce]=await Promise.all([De.getMyTasks(),Np.getAll(),Zs.getByTeamMember(e.id)]);n(S),l(ie),ee(ce)}catch(S){console.error("Failed to load user data:",S)}finally{g(!1)}},U=async()=>{k(!0),await O(),k(!1)},oe=r.filter(S=>S.status!=="completed"),de=r.filter(S=>S.status==="completed"),Te=r.filter(S=>S.end_date&&new Date(S.end_date)<new Date&&S.status!=="completed"),Ue=r.length>0?Math.round(de.length/r.length*100):0;de.filter(S=>S.updated_at&&S.end_date&&new Date(S.updated_at)<=new Date(S.end_date)).length;const _=S=>{o(S),x(!0)},T=S=>{o(S),j(!0)},F=async()=>{if(i)try{await qc.requestExtension(i.id,{requested_due_date:N,reason:d}),await O()}catch(S){console.error("Failed to submit extension request:",S)}x(!1),o(null),w(""),P(new Date(Date.now()+7*24*60*60*1e3).toISOString().split("T")[0])},B=async()=>{if(i)try{await qc.addRemark(i.id,{remark:z,remark_date:h,remark_type:E}),await O()}catch(S){console.error("Failed to add remark:",S)}j(!1),o(null),p(""),v(new Date().toISOString().split("T")[0]),M("general")},V=S=>{if(!S.end_date)return!1;const ie=new Date;ie.setHours(0,0,0,0);const ce=new Date(S.end_date);return ce.setHours(0,0,0,0),ce<ie&&S.status!=="completed"},se=S=>{if(!S.end_date)return 0;const ie=new Date,ke=new Date(S.end_date).getTime()-ie.getTime();return Math.ceil(ke/(1e3*60*60*24))};return u?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Ii,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-blue-600"}),s.jsx("p",{className:"text-gray-600",children:"Loading your portal..."})]})}):s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex items-center justify-between h-16",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-green-500 to-emerald-600 rounded-full flex items-center justify-center text-white font-medium",children:e.name.charAt(0)}),s.jsxs("div",{children:[s.jsxs("h1",{className:"text-lg font-semibold text-gray-900",children:["Welcome, ",e.name]}),s.jsx("p",{className:"text-sm text-gray-600",children:e.skills&&e.skills.length>0?e.skills.join(", "):"Team Member"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs(D,{variant:"outline",size:"sm",onClick:U,loading:b,children:[s.jsx(Ii,{className:"w-4 h-4 mr-2"}),"Refresh"]}),s.jsxs(D,{variant:"ghost",onClick:()=>{localStorage.removeItem("teamToken"),t()},children:[s.jsx(mm,{className:"w-4 h-4 mr-2"}),"Logout"]})]})]})})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[s.jsx(Z,{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:s.jsx(J,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 rounded-lg bg-blue-400 bg-opacity-20",children:s.jsx(Et,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-blue-100 text-sm font-medium",children:"Active Tasks"}),s.jsx("p",{className:"text-2xl font-bold",children:oe.length})]})]})})}),s.jsx(Z,{className:"bg-gradient-to-r from-green-500 to-green-600 text-white",children:s.jsx(J,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 rounded-lg bg-green-400 bg-opacity-20",children:s.jsx(Pi,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-green-100 text-sm font-medium",children:"Completed"}),s.jsx("p",{className:"text-2xl font-bold",children:de.length})]})]})})}),s.jsx(Z,{className:"bg-gradient-to-r from-red-500 to-red-600 text-white",children:s.jsx(J,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 rounded-lg bg-red-400 bg-opacity-20",children:s.jsx(Ct,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-red-100 text-sm font-medium",children:"Overdue"}),s.jsx("p",{className:"text-2xl font-bold",children:Te.length})]})]})})}),s.jsx(Z,{className:"bg-gradient-to-r from-purple-500 to-purple-600 text-white",children:s.jsx(J,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 rounded-lg bg-purple-400 bg-opacity-20",children:s.jsx(Ba,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-purple-100 text-sm font-medium",children:"Completion Rate"}),s.jsxs("p",{className:"text-2xl font-bold",children:[Ue,"%"]})]})]})})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[s.jsxs(Z,{className:"bg-gradient-to-br from-white to-gray-50 border-0 shadow-lg",children:[s.jsx(Ie,{className:"pb-4",children:s.jsxs(Me,{className:"flex items-center text-gray-800",children:[s.jsx(ss,{className:"w-5 h-5 mr-2 text-purple-600"}),"My Performance Flags"]})}),s.jsx(J,{children:A.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(ss,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),s.jsx("p",{className:"text-gray-500 font-medium",children:"No performance flags"}),s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Keep up the great work!"})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3 p-4 bg-white rounded-xl border border-gray-100 shadow-sm",children:[s.jsxs("div",{className:"text-center p-3 bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg border border-green-200",children:[s.jsx("div",{className:"text-2xl font-bold text-green-700",children:A.filter(S=>S.type==="green").length}),s.jsx("div",{className:"text-xs text-green-600 font-medium",children:"🟢 Green Flags"})]}),s.jsxs("div",{className:"text-center p-3 bg-gradient-to-br from-yellow-50 to-amber-50 rounded-lg border border-yellow-200",children:[s.jsx("div",{className:"text-2xl font-bold text-yellow-700",children:A.filter(S=>S.type==="yellow").length}),s.jsx("div",{className:"text-xs text-yellow-600 font-medium",children:"🟡 Yellow Flags"})]}),s.jsxs("div",{className:"text-center p-3 bg-gradient-to-br from-orange-50 to-amber-50 rounded-lg border border-orange-200",children:[s.jsx("div",{className:"text-2xl font-bold text-orange-700",children:A.filter(S=>S.type==="orange").length}),s.jsx("div",{className:"text-xs text-orange-600 font-medium",children:"🟠 Orange Flags"})]}),s.jsxs("div",{className:"text-center p-3 bg-gradient-to-br from-red-50 to-pink-50 rounded-lg border border-red-200",children:[s.jsx("div",{className:"text-2xl font-bold text-red-700",children:A.filter(S=>S.type==="red").length}),s.jsx("div",{className:"text-xs text-red-600 font-medium",children:"🔴 Red Flags"})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Recent Flags:"}),s.jsx("div",{className:"space-y-2",children:A.slice(0,3).map((S,ie)=>s.jsx("div",{className:"flex items-center justify-between p-3 rounded-lg bg-white border border-gray-100 shadow-sm hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs(Y,{variant:S.type==="green"?"success":S.type==="yellow"||S.type==="orange"?"warning":"danger",size:"sm",className:"shadow-sm",children:[s.jsx(ss,{className:"w-3 h-3 mr-1"}),S.type.toUpperCase()]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:S.reason}),s.jsxs("p",{className:"text-xs text-gray-500",children:[new Date(S.created_at).toLocaleDateString()," by ",S.added_by]})]})]})},ie))})]})]})})]}),s.jsxs(Z,{className:"bg-gradient-to-br from-white to-green-50 border-0 shadow-lg",children:[s.jsx(Ie,{className:"pb-4",children:s.jsxs(Me,{className:"flex items-center text-gray-800",children:[s.jsx(Ei,{className:"w-5 h-5 mr-2 text-green-600"}),"Recent Completions"]})}),s.jsx(J,{children:de.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Ei,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),s.jsx("p",{className:"text-gray-500 font-medium",children:"No completed tasks yet"}),s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Start working on your tasks!"})]}):s.jsx("div",{className:"space-y-3",children:de.slice(0,5).map(S=>{const ie=a.find(ce=>ce.id===S.project_id);return s.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-green-100 shadow-sm hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:S.name}),s.jsx("p",{className:"text-xs text-gray-600",children:ie==null?void 0:ie.name})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Pi,{className:"w-5 h-5 text-green-600"}),s.jsx("span",{className:"text-xs text-green-600 font-medium",children:"Completed"})]})]},S.id)})})})]})]}),s.jsxs(Z,{className:"bg-gradient-to-br from-white to-blue-50 border-0 shadow-lg",children:[s.jsx(Ie,{className:"pb-6",children:s.jsxs(Me,{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Et,{className:"w-6 h-6 mr-3 text-blue-600"}),s.jsx("span",{className:"text-xl font-bold text-gray-800",children:"My Active Tasks"})]}),s.jsxs(Y,{variant:"primary",className:"text-sm font-semibold px-3 py-1",children:[oe.length," tasks"]})]})}),s.jsx(J,{children:oe.length===0?s.jsxs("div",{className:"text-center py-16 text-gray-500",children:[s.jsx(Et,{className:"w-20 h-20 mx-auto mb-4 text-gray-300"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Active Tasks"}),s.jsx("p",{className:"text-gray-600 text-lg",children:"You're all caught up! No tasks are currently assigned to you."})]}):s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:oe.map(S=>{const ie=a.find(Pe=>Pe.id===S.project_id),ce=se(S),ke=V(S);return s.jsxs("div",{className:`group relative overflow-hidden rounded-2xl border-2 transition-all duration-300 hover:shadow-xl ${ke?"border-red-300 bg-gradient-to-br from-red-50 to-red-100 shadow-red-100":"border-gray-200 bg-white hover:border-blue-400 shadow-lg"}`,children:[s.jsx("div",{className:`absolute top-0 left-0 right-0 h-2 ${S.priority==="urgent"?"bg-gradient-to-r from-red-500 to-red-600":S.priority==="high"?"bg-gradient-to-r from-orange-500 to-orange-600":S.priority==="medium"?"bg-gradient-to-r from-blue-500 to-blue-600":"bg-gradient-to-r from-gray-400 to-gray-500"}`}),s.jsxs("div",{className:"p-6 pt-8",children:[s.jsxs("div",{className:"flex items-start justify-between mb-5",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"font-bold text-gray-900 text-xl mb-2 line-clamp-2 group-hover:text-blue-600 transition-colors",children:S.name}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600 mb-3",children:[s.jsx("span",{className:"font-semibold text-blue-600 bg-blue-50 px-2 py-1 rounded-full",children:ie==null?void 0:ie.name}),s.jsx("span",{className:"text-gray-400",children:"•"}),s.jsx("span",{className:"font-semibold text-purple-600 bg-purple-50 px-2 py-1 rounded-full",children:S.stage_name||"No Stage"}),S.category_name&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-gray-400",children:"•"}),s.jsx("span",{className:"text-gray-500 bg-gray-50 px-2 py-1 rounded-full",children:S.category_name})]})]})]}),s.jsxs("div",{className:"flex flex-col items-end space-y-2 ml-4",children:[ke&&s.jsxs(Y,{variant:"danger",size:"sm",className:"animate-pulse shadow-lg",children:[s.jsx(Ct,{className:"w-3 h-3 mr-1"}),"Overdue"]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(Y,{variant:S.priority==="urgent"?"danger":S.priority==="high"?"warning":S.priority==="medium"?"primary":"default",size:"sm",className:"shadow-sm",children:S.priority}),s.jsx(Y,{variant:S.status==="in-progress"?"primary":S.status==="under-review"?"warning":S.status==="blocked"?"danger":"default",size:"sm",className:"shadow-sm",children:S.status.replace("-"," ")})]})]})]}),S.description&&s.jsx("p",{className:"text-sm text-gray-700 mb-5 line-clamp-2 bg-gray-50 p-3 rounded-lg border-l-4 border-blue-200",children:S.description}),s.jsxs("div",{className:"mb-5",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm mb-3",children:[s.jsx("span",{className:"text-gray-700 font-semibold",children:"Progress"}),s.jsxs("span",{className:"font-bold text-gray-900 text-lg",children:[S.progress,"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden shadow-inner",children:s.jsx("div",{className:`h-3 rounded-full transition-all duration-500 shadow-sm ${S.progress>=80?"bg-gradient-to-r from-green-500 to-green-600":S.progress>=50?"bg-gradient-to-r from-blue-500 to-blue-600":S.progress>=25?"bg-gradient-to-r from-yellow-500 to-orange-500":"bg-gradient-to-r from-gray-400 to-gray-500"}`,style:{width:`${S.progress}%`}})})]}),(S.grade_name||S.book_name||S.unit_name||S.lesson_name)&&s.jsxs("div",{className:"mb-5 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border-2 border-blue-200 shadow-sm",children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx(Mi,{className:"w-5 h-5 text-blue-600 mr-2"}),s.jsx("span",{className:"text-sm font-bold text-blue-900",children:"Educational Hierarchy"})]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[S.grade_name&&s.jsx(Y,{variant:"primary",className:"text-xs bg-blue-100 text-blue-800 border-2 border-blue-200 font-semibold",children:S.grade_name}),S.book_name&&s.jsx(Y,{variant:"primary",className:"text-xs bg-indigo-100 text-indigo-800 border-2 border-indigo-200 font-semibold",children:S.book_name}),S.unit_name&&s.jsx(Y,{variant:"primary",className:"text-xs bg-purple-100 text-purple-800 border-2 border-purple-200 font-semibold",children:S.unit_name}),S.lesson_name&&s.jsx(Y,{variant:"primary",className:"text-xs bg-pink-100 text-pink-800 border-2 border-pink-200 font-semibold",children:S.lesson_name})]})]}),S.required_skills&&S.required_skills.length>0&&s.jsxs("div",{className:"mb-5 p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl border-2 border-green-200 shadow-sm",children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx(Kx,{className:"w-5 h-5 text-green-600 mr-2"}),s.jsx("span",{className:"text-sm font-bold text-green-900",children:"Required Skills"})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:S.required_skills.map((Pe,I)=>s.jsx(Y,{variant:"secondary",className:"text-xs bg-green-100 text-green-800 border-2 border-green-200 font-semibold",children:Pe},I))})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-5 p-4 bg-gradient-to-r from-gray-50 to-gray-100 rounded-xl border border-gray-200 shadow-sm",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xs text-gray-500 mb-1 font-medium",children:"Due Date"}),s.jsx("div",{className:"text-sm font-bold text-gray-900",children:S.end_date?new Date(S.end_date).toLocaleDateString():"No due date"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xs text-gray-500 mb-1 font-medium",children:"Time Left"}),s.jsx("div",{className:`text-sm font-bold ${ke?"text-red-600":ce<=1?"text-orange-600":ce<=3?"text-yellow-600":"text-green-600"}`,children:ke?`${Math.abs(ce)} days overdue`:ce===0?"Due today":ce===1?"Due tomorrow":`${ce} days left`})]})]}),s.jsx("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-5 p-3 bg-white rounded-lg border border-gray-200",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("span",{className:"font-medium",children:["Estimated: ",s.jsxs("span",{className:"font-bold text-gray-900",children:[S.estimated_hours,"h"]})]}),S.actual_hours&&s.jsxs("span",{className:"font-medium",children:["Actual: ",s.jsxs("span",{className:"font-bold text-gray-900",children:[S.actual_hours,"h"]})]})]})}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs(D,{variant:"outline",size:"sm",onClick:()=>_(S),className:"flex-1 h-10 font-semibold shadow-sm hover:shadow-md transition-all duration-200",children:[s.jsx(Or,{className:"w-4 h-4 mr-2"}),"Request Extension"]}),s.jsxs(D,{variant:"outline",size:"sm",onClick:()=>T(S),className:"flex-1 h-10 font-semibold shadow-sm hover:shadow-md transition-all duration-200",children:[s.jsx(xm,{className:"w-4 h-4 mr-2"}),"Add Remark"]})]})]})]},S.id)})})})]})]}),s.jsx(Ze,{isOpen:c,onClose:()=>x(!1),title:"Request Task Extension",children:s.jsxs("div",{className:"space-y-4",children:[i&&s.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:i.name}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Current due date: ",i.end_date?new Date(i.end_date).toLocaleDateString():"No due date"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Due Date"}),s.jsx("input",{type:"date",value:N,onChange:S=>P(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason for Extension"}),s.jsx("textarea",{value:d,onChange:S=>w(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:4,placeholder:"Please explain why you need an extension...",required:!0})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx(D,{variant:"outline",onClick:()=>x(!1),children:"Cancel"}),s.jsx(D,{onClick:F,disabled:!d.trim(),children:"Submit Request"})]})]})}),s.jsx(Ze,{isOpen:f,onClose:()=>j(!1),title:"Add Task Remark",children:s.jsxs("div",{className:"space-y-4",children:[i&&s.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:i.name}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Project: ",(Q=a.find(S=>S.id===i.project_id))==null?void 0:Q.name]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Remark Date"}),s.jsx("input",{type:"date",value:h,onChange:S=>v(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Remark Type"}),s.jsxs("select",{value:E,onChange:S=>M(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"general",children:"General"}),s.jsx("option",{value:"progress",children:"Progress Update"}),s.jsx("option",{value:"issue",children:"Issue/Problem"}),s.jsx("option",{value:"update",children:"Update"}),s.jsx("option",{value:"other",children:"Other"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Remark Content"}),s.jsx("textarea",{value:z,onChange:S=>p(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:4,placeholder:"Add your remark or comment about this task...",required:!0})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx(D,{variant:"outline",onClick:()=>j(!1),children:"Cancel"}),s.jsx(D,{onClick:B,disabled:!z.trim(),children:"Add Remark"})]})]})})]})}const _p=[{id:"1",name:"Sarah Johnson",email:"sarah.johnson@company.com",skills:["Instructional Designers","Content Writers"],passcode:"DEMO123",isActive:!0,performanceFlags:[{id:"1",type:"green",reason:"Completed project ahead of schedule",date:"2024-01-15",addedBy:"Manager"}]},{id:"2",name:"Mike Chen",email:"mike.chen@company.com",skills:["Developers","Tech"],passcode:"TECH456",isActive:!0,performanceFlags:[]},{id:"3",name:"Emily Rodriguez",email:"emily.rodriguez@company.com",skills:["Graphic Designers","Animators"]},{id:"4",name:"David Kim",email:"david.kim@company.com",skills:["QA","Tech"]},{id:"5",name:"Lisa Thompson",email:"lisa.thompson@company.com",skills:["Marketing","Sales"]},{id:"6",name:"John Smith",email:"john.smith@company.com",skills:["Content Writers","Instructional Designers"]}],Cp=[{id:"1",name:"Pre-K Curriculum Development",description:"Comprehensive curriculum design for Pre-K students including KG-1, KG-2, and KG-3 levels",category:"Curriculum Design",status:"active",startDate:new Date("2024-01-15"),endDate:new Date("2024-06-30"),progress:65,stages:[{id:"stage-1",name:"Curriculum Analysis",description:"Analyze curriculum requirements and standards",order:1,weight:20,status:"completed",progress:100,startDate:new Date("2024-01-15"),endDate:new Date("2024-02-01"),reviewRounds:[],tasks:[]},{id:"stage-2",name:"Content Creation",description:"Develop curriculum content and materials",order:2,weight:60,status:"in-progress",progress:65,startDate:new Date("2024-02-01"),endDate:new Date("2024-04-30"),reviewRounds:[],tasks:[]},{id:"stage-3",name:"Review & Finalization",description:"Review and finalize curriculum materials",order:3,weight:20,status:"not-started",progress:0,startDate:new Date("2024-05-01"),endDate:new Date("2024-06-30"),reviewRounds:[],tasks:[]}],teamMembers:["1","3","6"],grades:[{id:"kg1",name:"KG-1",description:"Kindergarten Grade 1",projectId:"1",order:1,weight:40,books:[{id:"kg1-book1",name:"Book 1",type:"student",description:"Student Book 1 for KG-1",gradeId:"kg1",order:1,weight:70,units:[{id:"kg1-book1-unit1",name:"Unit 1: Colors and Shapes",description:"Introduction to basic colors and shapes",bookId:"kg1-book1",order:1,weight:60,lessons:[{id:"kg1-book1-unit1-lesson1",name:"Lesson 1: Primary Colors",description:"Learning red, blue, and yellow",unitId:"kg1-book1-unit1",order:1,weight:50},{id:"kg1-book1-unit1-lesson2",name:"Lesson 2: Basic Shapes",description:"Circle, square, and triangle",unitId:"kg1-book1-unit1",order:2,weight:50}]},{id:"kg1-book1-unit2",name:"Unit 2: Numbers 1-10",description:"Introduction to counting and numbers",bookId:"kg1-book1",order:2,weight:40,lessons:[{id:"kg1-book1-unit2-lesson1",name:"Lesson 1: Numbers 1-5",description:"Learning to count 1 to 5",unitId:"kg1-book1-unit2",order:1,weight:100}]}]},{id:"kg1-teacher-guide",name:"Teacher Guide",type:"teacher",description:"Teacher guide for KG-1",gradeId:"kg1",order:2,weight:30,units:[{id:"kg1-tg-unit1",name:"Unit 1: Teaching Colors and Shapes",description:"Guide for teaching colors and shapes",bookId:"kg1-teacher-guide",order:1,weight:100,lessons:[{id:"kg1-tg-unit1-lesson1",name:"Lesson 1: Color Activities",description:"Activities for teaching colors",unitId:"kg1-tg-unit1",order:1,weight:100}]}]}]},{id:"kg2",name:"KG-2",description:"Kindergarten Grade 2",projectId:"1",order:2,weight:35,books:[{id:"kg2-book1",name:"Book 1",type:"student",description:"Student Book 1 for KG-2",gradeId:"kg2",order:1,weight:100,units:[{id:"kg2-book1-unit1",name:"Unit 1: Letters A-M",description:"Introduction to first half of alphabet",bookId:"kg2-book1",order:1,weight:100,lessons:[{id:"kg2-book1-unit1-lesson1",name:"Lesson 1: Letters A-E",description:"Learning letters A through E",unitId:"kg2-book1-unit1",order:1,weight:100}]}]}]},{id:"kg3",name:"KG-3",description:"Kindergarten Grade 3",projectId:"1",order:3,weight:25,books:[{id:"kg3-book1",name:"Book 1",type:"student",description:"Student Book 1 for KG-3",gradeId:"kg3",order:1,weight:100,units:[{id:"kg3-book1-unit1",name:"Unit 1: Reading Readiness",description:"Preparing for reading",bookId:"kg3-book1",order:1,weight:100,lessons:[{id:"kg3-book1-unit1-lesson1",name:"Lesson 1: Phonics Basics",description:"Introduction to phonics",unitId:"kg3-book1-unit1",order:1,weight:100}]}]}]}]},{id:"2",name:"LMS Platform Redesign",description:"Complete overhaul of the learning management system interface and user experience",category:"IT Applications",status:"active",startDate:new Date("2024-02-01"),endDate:new Date("2024-08-15"),progress:42,stages:[],teamMembers:["2","4","5"]},{id:"3",name:"Interactive Science Course",description:"eLearning course with interactive animations and simulations for high school science",category:"eLearning Design",status:"planning",startDate:new Date("2024-03-01"),endDate:new Date("2024-09-30"),progress:15,stages:[],teamMembers:["1","2","3"]},{id:"4",name:"Corporate Training Module",description:"Employee onboarding and training content for new hires",category:"eLearning Design",status:"completed",startDate:new Date("2023-10-01"),endDate:new Date("2024-01-15"),progress:100,stages:[],teamMembers:["1","6"]}],Dp=[{id:"1",name:"Content Strategy Development",description:"Create comprehensive content strategy for Pre-K curriculum",projectId:"1",stageId:"stage-2",gradeId:"kg1",bookId:"kg1-book1",unitId:"kg1-book1-unit1",lessonId:"kg1-book1-unit1-lesson1",componentPath:"KG-1 > Book 1 > Unit 1: Colors and Shapes > Lesson 1: Primary Colors",assignees:["1","6"],skills:["Content Writers","Instructional Designers"],status:"in-progress",priority:"high",startDate:new Date("2024-01-15"),endDate:new Date("2024-02-15"),progress:75,estimatedHours:40,actualHours:32},{id:"2",name:"UI/UX Design for LMS Dashboard",description:"Design new dashboard interface for the learning management system",projectId:"2",stageId:"stage-2",assignees:["3"],skills:["Graphic Designers"],status:"under-review",priority:"high",startDate:new Date("2024-02-01"),endDate:new Date("2024-02-28"),progress:90,estimatedHours:60,actualHours:55},{id:"3",name:"Database Migration Script",description:"Create scripts for migrating user data to new LMS platform",projectId:"2",stageId:"stage-2",assignees:["2"],skills:["Developers","Tech"],status:"not-started",priority:"medium",startDate:new Date("2024-03-01"),endDate:new Date("2024-03-15"),progress:0,estimatedHours:32},{id:"4",name:"Quality Assurance Testing",description:"Comprehensive testing of LMS functionality and user experience",projectId:"2",stageId:"stage-2",assignees:["4"],skills:["QA"],status:"blocked",priority:"urgent",startDate:new Date("2024-02-15"),endDate:new Date("2024-01-30"),progress:25,estimatedHours:48,actualHours:12},{id:"5",name:"Marketing Campaign Design",description:"Create promotional materials for new curriculum launch",projectId:"1",stageId:"stage-1",assignees:["5"],skills:["Marketing"],status:"completed",priority:"medium",startDate:new Date("2024-01-01"),endDate:new Date("2024-01-31"),progress:100,estimatedHours:24,actualHours:26},{id:"6",name:"Animation Storyboard Creation",description:"Develop storyboards for interactive science course animations",projectId:"3",stageId:"stage-2",assignees:["3"],skills:["Animators","Graphic Designers"],status:"in-progress",priority:"medium",startDate:new Date("2024-02-10"),endDate:new Date("2024-03-10"),progress:40,estimatedHours:36,actualHours:15},{id:"7",name:"KG-2 Letter Recognition Content",description:"Create content for letter recognition in KG-2",projectId:"1",stageId:"stage-2",gradeId:"kg2",bookId:"kg2-book1",unitId:"kg2-book1-unit1",lessonId:"kg2-book1-unit1-lesson1",componentPath:"KG-2 > Book 1 > Unit 1: Letters A-M > Lesson 1: Letters A-E",assignees:["1"],skills:["Content Writers","Instructional Designers"],status:"not-started",priority:"medium",startDate:new Date("2024-02-15"),endDate:new Date("2024-03-15"),progress:0,estimatedHours:30},{id:"8",name:"KG-3 Phonics Activities",description:"Develop phonics activities for KG-3 students",projectId:"1",stageId:"stage-2",gradeId:"kg3",bookId:"kg3-book1",unitId:"kg3-book1-unit1",lessonId:"kg3-book1-unit1-lesson1",componentPath:"KG-3 > Book 1 > Unit 1: Reading Readiness > Lesson 1: Phonics Basics",assignees:["6"],skills:["Instructional Designers"],status:"in-progress",priority:"high",startDate:new Date("2024-02-01"),endDate:new Date("2024-03-01"),progress:30,estimatedHours:25,actualHours:8}],Tp={projects:Cp,users:_p,tasks:Dp,allocations:[],categories:["eLearning Design","Curriculum Design","IT Applications"],skills:["Content Writers","Instructional Designers","Graphic Designers","Developers","Animators","Tech","Sales","Marketing","QA"],filters:{},selectedProject:null,selectedView:"dashboard"};function Ep(e,t){switch(t.type){case"SET_PROJECTS":return{...e,projects:t.payload};case"ADD_PROJECT":return{...e,projects:[...e.projects,t.payload]};case"UPDATE_PROJECT":return{...e,projects:e.projects.map(r=>r.id===t.payload.id?t.payload:r)};case"DELETE_PROJECT":return{...e,projects:e.projects.filter(r=>r.id!==t.payload)};case"SET_USERS":return{...e,users:t.payload};case"ADD_USER":return{...e,users:[...e.users,t.payload]};case"UPDATE_USER":return{...e,users:e.users.map(r=>r.id===t.payload.id?t.payload:r)};case"SET_TASKS":return{...e,tasks:t.payload};case"ADD_TASK":return{...e,tasks:[...e.tasks,t.payload]};case"UPDATE_TASK":return{...e,tasks:e.tasks.map(r=>r.id===t.payload.id?t.payload:r)};case"SET_ALLOCATIONS":return{...e,allocations:t.payload};case"ADD_ALLOCATION":return{...e,allocations:[...e.allocations,t.payload]};case"UPDATE_ALLOCATION":return{...e,allocations:e.allocations.map(r=>r.userId===t.payload.userId&&r.projectId===t.payload.projectId&&r.taskId===t.payload.taskId?t.payload:r)};case"ADD_CATEGORY":return{...e,categories:[...e.categories,t.payload]};case"ADD_SKILL":return{...e,skills:[...e.skills,t.payload]};case"SET_FILTERS":return{...e,filters:t.payload};case"SET_SELECTED_PROJECT":return{...e,selectedProject:t.payload};case"SET_SELECTED_VIEW":return{...e,selectedView:t.payload};default:return e}}const gm=m.createContext(null);function Pp({children:e}){const[t,r]=m.useReducer(Ep,Tp);return s.jsx(gm.Provider,{value:{state:t,dispatch:r},children:e})}function mr(){const e=m.useContext(gm);if(!e)throw new Error("useApp must be used within an AppProvider");return e}const Ip=[{name:"Dashboard",icon:dp,key:"dashboard"},{name:"Projects",icon:sr,key:"projects"},{name:"Teams",icon:He,key:"teams"},{name:"Tasks",icon:Et,key:"tasks"},{name:"Allocations",icon:gt,key:"allocations"},{name:"Analytics",icon:Ts,key:"analytics"},{name:"Settings",icon:pp,key:"settings"}];function Mp(){const{state:e,dispatch:t}=mr();return s.jsxs("div",{className:"w-64 bg-white shadow-sm border-r border-gray-200 h-full",children:[s.jsxs("div",{className:"p-6",children:[s.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"ProjectFlow"}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Project Management"})]}),s.jsx("nav",{className:"px-4 space-y-1",children:Ip.map(r=>{const n=e.selectedView===r.key;return s.jsxs("button",{onClick:()=>t({type:"SET_SELECTED_VIEW",payload:r.key}),className:`w-full flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ${n?"bg-blue-50 text-blue-700 border-r-2 border-blue-700":"text-gray-700 hover:bg-gray-50 hover:text-gray-900"}`,children:[s.jsx(r.icon,{className:`mr-3 h-5 w-5 ${n?"text-blue-700":"text-gray-400"}`}),r.name]},r.key)})})]})}function Ap(){const{signOut:e,user:t}=zn(),r=async()=>{await e()};return s.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[s.jsx("div",{className:"flex items-center flex-1",children:s.jsxs("div",{className:"relative max-w-md w-full",children:[s.jsx(Ao,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",placeholder:"Search projects, tasks, or team members...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(D,{variant:"ghost",size:"sm",children:s.jsx(tp,{className:"w-4 h-4"})}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[s.jsx(Ai,{className:"w-4 h-4"}),s.jsx("span",{children:t==null?void 0:t.email})]}),s.jsx(D,{variant:"ghost",size:"sm",onClick:r,children:s.jsx(mm,{className:"w-4 h-4"})})]})]})})}function yt({value:e,max:t=100,className:r="",showLabel:n=!0,variant:a="default"}){const l=Math.min(e/t*100,100),i={default:"bg-blue-600",success:"bg-green-600",warning:"bg-yellow-600",danger:"bg-red-600"};return s.jsxs("div",{className:`w-full ${r}`,children:[s.jsx("div",{className:"flex items-center justify-between mb-1",children:n&&s.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[Math.round(l),"%"]})}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${i[a]}`,style:{width:`${l}%`}})})]})}function Lp(){const{state:e,dispatch:t}=mr(),[r,n]=m.useState(null),[a,l]=m.useState(!0),[i,o]=m.useState(null);m.useEffect(()=>{let M=!0;return(async()=>{try{l(!0),o(null);const g=await bp.getOverview();M&&n(g)}catch(g){M&&(console.error("Dashboard fetch error:",g),o(g.message||"Failed to load dashboard data"))}finally{M&&l(!1)}})(),()=>{M=!1}},[]);const c=(M,u)=>{t({type:"SET_SELECTED_VIEW",payload:M}),u&&t({type:"SET_FILTERS",payload:u})},x=(r==null?void 0:r.projects)||[],f=(r==null?void 0:r.teamMembers)||[],j=(r==null?void 0:r.tasks)||[],d=new Date,w=new Date(d);w.setDate(w.getDate()+1);const N=new Date(d);N.setDate(d.getDate()+7);const P=j.filter(M=>{if(!M.end_date)return!1;const u=new Date(M.end_date);u.setHours(0,0,0,0);const g=new Date(d);return g.setHours(0,0,0,0),u.getTime()===g.getTime()&&M.status!=="completed"}),z=j.filter(M=>{if(!M.end_date)return!1;const u=new Date(M.end_date);u.setHours(0,0,0,0);const g=new Date(w);return g.setHours(0,0,0,0),u.getTime()===g.getTime()&&M.status!=="completed"}),p=j.filter(M=>{if(!M.end_date)return!1;const u=new Date(M.end_date);u.setHours(0,0,0,0);const g=new Date(d);g.setHours(0,0,0,0);const b=new Date(N);return b.setHours(0,0,0,0),u>=g&&u<=b&&M.status!=="completed"}),h=M=>{t({type:"SET_SELECTED_VIEW",payload:"tasks"}),t({type:"SET_FILTERS",payload:{teamMembers:[M]}})};if(a)return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),s.jsx("p",{className:"text-gray-600",children:"Overview of your project management activities"})]}),s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Rn,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-blue-600"}),s.jsx("p",{className:"text-gray-600",children:"Loading dashboard data..."})]})})]});if(i)return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),s.jsx("p",{className:"text-gray-600",children:"Overview of your project management activities"})]}),s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Ct,{className:"w-8 h-8 mx-auto mb-4 text-red-600"}),s.jsx("p",{className:"text-red-600 mb-4",children:i}),s.jsx(D,{onClick:()=>window.location.reload(),variant:"outline",children:"Try Again"})]})})]});const v=(r==null?void 0:r.stats)||{},E=[{title:"Total Projects",value:v.totalProjects||0,icon:sr,color:"text-blue-600",bg:"bg-blue-50",onClick:()=>c("projects")},{title:"Active Projects",value:v.activeProjects||0,icon:Ba,color:"text-green-600",bg:"bg-green-50",onClick:()=>c("projects",{statuses:["active"]})},{title:"Team Members",value:v.totalTeamMembers||0,icon:He,color:"text-purple-600",bg:"bg-purple-50",onClick:()=>c("teams")},{title:"Categories",value:v.totalCategories||0,icon:Et,color:"text-orange-600",bg:"bg-orange-50",onClick:()=>c("settings")}];return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),s.jsx("p",{className:"text-gray-600",children:"Overview of your project management activities"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:E.map(M=>s.jsx(Z,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:M.onClick,children:s.jsxs(J,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`p-2 rounded-lg ${M.bg}`,children:s.jsx(M.icon,{className:`w-6 h-6 ${M.color}`})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:M.title}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:M.value})]})]}),s.jsxs("div",{className:"mt-2 flex items-center text-sm text-gray-500",children:[s.jsx("span",{children:"Click to view details"}),s.jsx(es,{className:"w-4 h-4 ml-1"})]})]})},M.title))}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx(Z,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>c("tasks",{dueToday:!0}),children:s.jsxs(J,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Due Today"}),s.jsx("p",{className:"text-2xl font-bold text-red-600",children:P.length})]}),s.jsx(gt,{className:"w-8 h-8 text-red-500"})]}),s.jsxs("div",{className:"mt-2 flex items-center text-sm text-gray-500",children:[s.jsx("span",{children:"Click to view tasks"}),s.jsx(es,{className:"w-4 h-4 ml-1"})]})]})}),s.jsx(Z,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>c("tasks",{dueTomorrow:!0}),children:s.jsxs(J,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Due Tomorrow"}),s.jsx("p",{className:"text-2xl font-bold text-orange-600",children:z.length})]}),s.jsx(gt,{className:"w-8 h-8 text-orange-500"})]}),s.jsxs("div",{className:"mt-2 flex items-center text-sm text-gray-500",children:[s.jsx("span",{children:"Click to view tasks"}),s.jsx(es,{className:"w-4 h-4 ml-1"})]})]})}),s.jsx(Z,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>c("tasks",{dueThisWeek:!0}),children:s.jsxs(J,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Due This Week"}),s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:p.length})]}),s.jsx(gt,{className:"w-8 h-8 text-blue-500"})]}),s.jsxs("div",{className:"mt-2 flex items-center text-sm text-gray-500",children:[s.jsx("span",{children:"Click to view tasks"}),s.jsx(es,{className:"w-4 h-4 ml-1"})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(Z,{children:[s.jsx(Ie,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Me,{children:"Recent Projects"}),s.jsx(D,{variant:"ghost",size:"sm",onClick:()=>c("projects"),children:"View All"})]})}),s.jsx(J,{className:"space-y-4",children:x.slice(0,5).map(M=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer transition-colors",onClick:()=>c("projects"),children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:M.name}),s.jsx("p",{className:"text-sm text-gray-600",children:M.category_name||M.category}),s.jsx(yt,{value:M.progress||0,className:"mt-2"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Y,{variant:M.status==="active"?"primary":M.status==="completed"?"success":M.status==="on-hold"?"warning":"default",children:M.status}),s.jsx(es,{className:"w-4 h-4 text-gray-400"})]})]},M.id))})]}),s.jsxs(Z,{children:[s.jsx(Ie,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Me,{children:"Team Workload"}),s.jsx(D,{variant:"ghost",size:"sm",onClick:()=>c("teams"),children:"View All"})]})}),s.jsx(J,{className:"space-y-4",children:f.slice(0,6).map(M=>{var k;const u=j.filter(A=>A.assignees&&A.assignees.includes(M.id)),g=u.filter(A=>A.status==="completed").length,b=u.length>0?g/u.length*100:0;return s.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>h(M.id),children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm font-medium",children:M.name.charAt(0)}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:M.name}),s.jsx("p",{className:"text-sm text-gray-600",children:((k=M.skills)==null?void 0:k[0])||"No skills"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:[u.length," tasks"]}),s.jsx(yt,{value:b,className:"w-20",showLabel:!1,variant:b>80?"warning":"default"}),s.jsx(es,{className:"w-4 h-4 text-gray-400"})]})]},M.id)})})]})]}),s.jsxs(Z,{children:[s.jsx(Ie,{children:s.jsx(Me,{children:"Quick Actions"})}),s.jsx(J,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("button",{onClick:()=>t({type:"SET_SELECTED_VIEW",payload:"projects"}),className:"p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors",children:[s.jsx(sr,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),s.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Create New Project"})]}),s.jsxs("button",{onClick:()=>t({type:"SET_SELECTED_VIEW",payload:"teams"}),className:"p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-green-500 hover:bg-green-50 transition-colors",children:[s.jsx(He,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),s.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Add Team Member"})]}),s.jsxs("button",{onClick:()=>t({type:"SET_SELECTED_VIEW",payload:"tasks"}),className:"p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-orange-500 hover:bg-orange-50 transition-colors",children:[s.jsx(Et,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),s.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Create Task"})]})]})})]})]})}function zp(e,t){const r=t.filter(l=>l.lessonId===e);if(r.length===0)return{progress:0,completedWeight:0,totalWeight:0};const a=r.reduce((l,i)=>l+i.progress,0)/r.length;return{progress:Math.round(a),completedWeight:a,totalWeight:100}}function Rp(e,t){let r=0,n=0;return e.lessons.forEach(l=>{const i=zp(l.id,t);r+=i.progress*l.weight/100,n+=l.weight}),{progress:n>0?Math.round(r):0,completedWeight:r,totalWeight:n}}function $p(e,t){let r=0,n=0;return e.units.forEach(l=>{const i=Rp(l,t);r+=i.progress*l.weight/100,n+=l.weight}),{progress:n>0?Math.round(r):0,completedWeight:r,totalWeight:n}}function Op(e,t){let r=0,n=0;return e.books.forEach(l=>{const i=$p(l,t);r+=i.progress*l.weight/100,n+=l.weight}),{progress:n>0?Math.round(r):0,completedWeight:r,totalWeight:n}}function zi(e,t){const r=t.filter(l=>l.stageId===e);if(r.length===0)return{progress:0,completedWeight:0,totalWeight:0};const a=r.reduce((l,i)=>l+i.progress,0)/r.length;return{progress:Math.round(a),completedWeight:a,totalWeight:100}}function Fp(e,t){let r=0,n=0;return e.stages&&e.stages.length>0&&e.stages.forEach(l=>{const i=zi(l.id,t);r+=i.progress*l.weight/100,n+=l.weight}),e.grades&&e.grades.length>0&&e.grades.forEach(l=>{const i=Op(l,t);r+=i.progress*l.weight/100,n+=l.weight}),{progress:n>0?Math.round(r):0,completedWeight:r,totalWeight:n}}function xs(e){switch(e){case"not-started":return 0;case"in-progress":return 50;case"under-review":return 90;case"completed":return 100;case"blocked":return 25;default:return 0}}function ym({taskId:e,onBack:t}){mr();const{user:r}=zn(),[n,a]=m.useState(null),[l,i]=m.useState(!0),[o,c]=m.useState(null),[x,f]=m.useState(!1),[j,d]=m.useState(null),[w,N]=m.useState(null),[P,z]=m.useState([]),[p,h]=m.useState([]),[v,E]=m.useState([]),[M,u]=m.useState([]),[g,b]=m.useState([]),[k,A]=m.useState([]),[ee,O]=m.useState([]),[U,oe]=m.useState([]),[de,Te]=m.useState(null),[Ue,_]=m.useState([]),[T,F]=m.useState([]),[B,V]=m.useState(!1),[se,Q]=m.useState(!1),[S,ie]=m.useState(null),[ce,ke]=m.useState("approved"),[Pe,I]=m.useState(""),[G,ae]=m.useState(""),[le,he]=m.useState([]),[ve,Ne]=m.useState(!1),[et,K]=m.useState(null),[q,je]=m.useState("green"),[Se,C]=m.useState(""),re=(r==null?void 0:r.id)!==void 0;m.useEffect(()=>{me()},[e]);const me=async()=>{try{i(!0),c(null);const y=await Oe.getById(e);if(console.log("📋 Task data received:",y),y.progress===0||y.progress===null){const Bt=xs(y.status);console.log("📊 Calculating progress for status:",y.status,"->",Bt),y.progress=Bt}a(y);const[pe,X,ge,Ae,nt,Le,Xt,js,ws,Br,cl,dl]=await Promise.all([We.getById(y.project_id),Tt.getById(y.category_stage_id||y.stage_id),De.getMembers(),De.getTeams(),rs.getAll(),ds.getAll(),us.getAll(),ms.getAll(),Bs.getAll(),Oe.getExtensions(e),Oe.getRemarks(e),Zs.getByTask(e)]);d(pe),N(X),h(ge),E(Ae),u(nt),b(Le),A(Xt),O(js),oe(ws),_(Br),F(cl),he(dl),console.log("🔍 Task assignees data:",y.assignees),console.log("🔍 All team members:",ge);const Lo=ge.filter(Bt=>Array.isArray(y.assignees)?y.assignees.some(On=>typeof On=="object"&&On.id?On.id===Bt.id:On===Bt.id):!1);if(console.log("🔍 Filtered task assignees:",Lo),z(Lo),y.grade_id||y.book_id||y.unit_id||y.lesson_id){const Bt={};y.grade_id&&(Bt.grade=await ds.getById(y.grade_id)),y.book_id&&(Bt.book=await us.getById(y.book_id)),y.unit_id&&(Bt.unit=await ms.getById(y.unit_id)),y.lesson_id&&(Bt.lesson=await Bs.getById(y.lesson_id)),Te(Bt)}}catch(y){console.error("Failed to load task details:",y),c(y.message||"Failed to load task details")}finally{i(!1)}},ye=async y=>{try{const pe=await Oe.update(e,y);a(pe),f(!1),await me()}catch(pe){console.error("Failed to update task:",pe),c(pe.message||"Failed to update task")}},Re=async()=>{if(S)try{const y={status:ce};ce==="approved"&&G?y.review_notes=`Approved until ${G}. ${Pe}`:ce==="rejected"&&(y.review_notes=Pe),await Oe.reviewExtension(S.id,y),await me(),V(!1),ie(null),ke("approved"),I(""),ae("")}catch(y){console.error("Failed to review extension:",y),c(y.message||"Failed to review extension")}},Ye=(y,pe)=>{ie(y),ke(pe),I(""),ae(pe==="approved"?y.requested_due_date:""),V(!0)},ue=async y=>{try{await Oe.addRemark(e,y),await me(),Q(!1)}catch(pe){console.error("Failed to add remark:",pe),c(pe.message||"Failed to add remark")}},Ve=async y=>{try{await Oe.deleteRemark(y),await me()}catch(pe){console.error("Failed to delete remark:",pe),c(pe.message||"Failed to delete remark")}},L=y=>{K(y),je("green"),C(""),Ne(!0)},W=async()=>{if(!(!et||!Se.trim()))try{await Zs.add({team_member_id:et.id,task_id:parseInt(e),type:q,reason:Se.trim()});const y=await Zs.getByTask(e);he(y),Ne(!1),K(null),je("green"),C("")}catch(y){console.error("Failed to add performance flag:",y)}},_e=async y=>{try{await Zs.delete(y);const pe=await Zs.getByTask(e);he(pe)}catch(pe){console.error("Failed to delete performance flag:",pe)}},tt=y=>{switch(y){case"not-started":return"default";case"in-progress":return"primary";case"under-review":return"warning";case"completed":return"success";case"blocked":return"danger";default:return"default"}},$=y=>{switch(y){case"low":return"default";case"medium":return"primary";case"high":return"warning";case"urgent":return"danger";default:return"default"}},xe=y=>{switch(y){case"pending":return"warning";case"approved":return"success";case"rejected":return"danger";default:return"default"}},fe=y=>{switch(y){case"progress":return"success";case"issue":return"danger";case"update":return"primary";case"general":return"default";default:return"secondary"}},Ce=()=>{if(!(n!=null&&n.end_date))return!1;const y=new Date;y.setHours(0,0,0,0);const pe=new Date(n.end_date);return pe.setHours(0,0,0,0),pe<y&&n.status!=="completed"};return l?s.jsx("div",{className:"p-6 space-y-6",children:s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading task details..."})]})})}):o||!n?s.jsx("div",{className:"p-6 space-y-6",children:s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Ct,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),s.jsx("p",{className:"text-red-600 mb-4",children:o||"Task not found"}),s.jsx(D,{onClick:t,children:"Go Back"})]})})}):s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs(D,{variant:"ghost",onClick:t,children:[s.jsx(Io,{className:"w-4 h-4 mr-2"}),"Back to Tasks"]}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:n.name}),s.jsxs("p",{className:"text-gray-600",children:[j==null?void 0:j.name," • ",w==null?void 0:w.name]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Y,{variant:tt(n.status),children:n.status.replace("-"," ")}),s.jsx(Y,{variant:$(n.priority),children:n.priority}),Ce()&&s.jsxs(Y,{variant:"danger",children:[s.jsx(Ct,{className:"w-3 h-3 mr-1"}),"Overdue"]}),s.jsxs(D,{variant:"outline",size:"sm",onClick:()=>f(!0),children:[s.jsx(Es,{className:"w-4 h-4 mr-2"}),"Edit Task"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs(Z,{children:[s.jsx(Ie,{children:s.jsx(Me,{children:"Task Overview"})}),s.jsxs(J,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Description"}),s.jsx("p",{className:"text-gray-700",children:n.description||"No description provided"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Progress"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(yt,{value:n.progress}),s.jsxs("p",{className:"text-sm text-gray-600",children:[n.progress,"% complete"]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Time Tracking"}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("p",{className:"text-sm text-gray-600",children:["Estimated: ",n.estimated_hours||0,"h"]}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Actual: ",n.actual_hours||0,"h"]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Timeline"}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("p",{className:"text-sm text-gray-600",children:[s.jsx(gt,{className:"w-3 h-3 inline mr-1"}),"Start: ",n.start_date?new Date(n.start_date).toLocaleDateString():"Not set"]}),s.jsxs("p",{className:"text-sm text-gray-600",children:[s.jsx(gt,{className:"w-3 h-3 inline mr-1"}),"Due: ",n.end_date?new Date(n.end_date).toLocaleDateString():"Not set"]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Project Info"}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("p",{className:"text-sm text-gray-600",children:[s.jsx(ss,{className:"w-3 h-3 inline mr-1"}),"Project: ",(j==null?void 0:j.name)||"Unknown"]}),s.jsxs("p",{className:"text-sm text-gray-600",children:[s.jsx(En,{className:"w-3 h-3 inline mr-1"}),"Stage: ",(w==null?void 0:w.name)||"Unknown"]})]})]})]})]})]}),re&&Ue.length>0&&s.jsxs(Z,{children:[s.jsx(Ie,{children:s.jsxs(Me,{className:"flex items-center",children:[s.jsx(Or,{className:"w-5 h-5 mr-2"}),"Extension Requests (",Ue.filter(y=>y.status==="pending").length," pending)"]})}),s.jsx(J,{children:s.jsx("div",{className:"space-y-4",children:Ue.map(y=>s.jsx("div",{className:"border rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(Y,{variant:xe(y.status),children:y.status}),s.jsxs("span",{className:"text-sm text-gray-600",children:["Requested by ",y.requester_name]})]}),s.jsx("p",{className:"text-sm text-gray-700 mb-2",children:y.reason}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-600",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Current Due:"})," ",new Date(y.current_due_date).toLocaleDateString()]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Requested Due:"})," ",new Date(y.requested_due_date).toLocaleDateString()]})]}),y.review_notes&&s.jsxs("div",{className:"mt-2 p-2 bg-gray-50 rounded text-sm",children:[s.jsx("span",{className:"font-medium",children:"Review Notes:"})," ",y.review_notes]})]}),y.status==="pending"&&s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs(D,{size:"sm",variant:"outline",onClick:()=>Ye(y,"approved"),className:"text-green-600 hover:text-green-700",children:[s.jsx(Pi,{className:"w-4 h-4 mr-1"}),"Approve"]}),s.jsxs(D,{size:"sm",variant:"outline",onClick:()=>Ye(y,"rejected"),className:"text-red-600 hover:text-red-700",children:[s.jsx(jp,{className:"w-4 h-4 mr-1"}),"Reject"]})]})]})},y.id))})})]}),s.jsxs(Z,{children:[s.jsx(Ie,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(Me,{className:"flex items-center",children:[s.jsx(xm,{className:"w-5 h-5 mr-2"}),"Remarks (",T.length,")"]}),re&&s.jsxs(D,{size:"sm",onClick:()=>Q(!0),children:[s.jsx(lt,{className:"w-4 h-4 mr-1"}),"Add Remark"]})]})}),s.jsx(J,{children:T.length>0?s.jsx("div",{className:"space-y-4",children:T.map(y=>s.jsxs("div",{className:"border rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Y,{variant:fe(y.remark_type),children:y.remark_type}),y.is_private&&s.jsx(Y,{variant:"secondary",children:"Private"})]}),re&&s.jsx(D,{size:"sm",variant:"ghost",onClick:()=>Ve(y.id),className:"text-red-600 hover:text-red-700",children:s.jsx(xt,{className:"w-4 h-4"})})]}),s.jsx("p",{className:"text-gray-700 mb-2",children:y.remark}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[s.jsxs("span",{children:["By ",y.user_name]}),s.jsx("span",{children:new Date(y.remark_date).toLocaleDateString()})]})]},y.id))}):s.jsx("p",{className:"text-gray-500 text-center py-4",children:"No remarks yet"})})]}),de&&s.jsxs(Z,{children:[s.jsx(Ie,{children:s.jsxs(Me,{className:"flex items-center",children:[s.jsx(Tn,{className:"w-5 h-5 mr-2"}),"Educational Hierarchy"]})}),s.jsx(J,{children:s.jsxs("div",{className:"space-y-3",children:[de.grade&&s.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-purple-50 rounded-lg",children:[s.jsx(Tn,{className:"w-5 h-5 text-purple-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:de.grade.name}),s.jsx("p",{className:"text-sm text-gray-600",children:"Grade"})]})]}),de.book&&s.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-blue-50 rounded-lg",children:[s.jsx(om,{className:"w-5 h-5 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:de.book.name}),s.jsx("p",{className:"text-sm text-gray-600",children:"Book"})]})]}),de.unit&&s.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-green-50 rounded-lg",children:[s.jsx(En,{className:"w-5 h-5 text-green-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:de.unit.name}),s.jsx("p",{className:"text-sm text-gray-600",children:"Unit"})]})]}),de.lesson&&s.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-orange-50 rounded-lg",children:[s.jsx(cm,{className:"w-5 h-5 text-orange-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:de.lesson.name}),s.jsx("p",{className:"text-sm text-gray-600",children:"Lesson"})]})]})]})})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(Z,{children:[s.jsx(Ie,{children:s.jsxs(Me,{className:"flex items-center",children:[s.jsx(He,{className:"w-5 h-5 mr-2"}),"Assignees (",P.length,")"]})}),s.jsx(J,{children:P.length>0?s.jsx("div",{className:"space-y-3",children:P.map(y=>{var pe;return s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm font-medium",children:((pe=y.name)==null?void 0:pe.charAt(0))||"U"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:y.name}),s.jsx("p",{className:"text-sm text-gray-600",children:y.email})]})]}),re&&s.jsxs(D,{size:"sm",variant:"outline",onClick:()=>L(y),className:"text-gray-600 hover:text-gray-800",children:[s.jsx(ss,{className:"w-4 h-4 mr-1"}),"Flag"]})]},y.id)})}):s.jsx("p",{className:"text-gray-500 text-center py-4",children:"No assignees"})})]}),re&&le.length>0&&s.jsxs(Z,{children:[s.jsx(Ie,{children:s.jsxs(Me,{className:"flex items-center",children:[s.jsx(ss,{className:"w-5 h-5 mr-2"}),"Performance Flags (",le.length,")"]})}),s.jsx(J,{children:s.jsx("div",{className:"space-y-3",children:le.map(y=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${y.type==="red"?"bg-red-500":y.type==="orange"?"bg-orange-500":y.type==="yellow"?"bg-yellow-500":"bg-green-500"}`}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:y.team_member_name}),s.jsx("p",{className:"text-sm text-gray-600",children:y.reason}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Added by ",y.added_by_name," on ",new Date(y.created_at).toLocaleDateString()]})]})]}),s.jsx(D,{size:"sm",variant:"outline",onClick:()=>_e(y.id),className:"text-red-600 hover:text-red-700",children:s.jsx(xt,{className:"w-4 h-4"})})]},y.id))})})]}),s.jsxs(Z,{children:[s.jsx(Ie,{children:s.jsxs(Me,{className:"flex items-center",children:[s.jsx(Ts,{className:"w-5 h-5 mr-2"}),"Statistics"]})}),s.jsxs(J,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Days Remaining"}),s.jsx("span",{className:"font-medium",children:n.end_date?Math.ceil((new Date(n.end_date).getTime()-new Date().getTime())/(1e3*60*60*24)):"No due date"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Hours Remaining"}),s.jsxs("span",{className:"font-medium",children:[Math.max(0,(n.estimated_hours||0)-(n.actual_hours||0)),"h"]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Completion Rate"}),s.jsxs("span",{className:"font-medium",children:[n.progress,"%"]})]})]})]})]})]}),s.jsx(Wa,{isOpen:x,onClose:()=>f(!1),onSubmit:ye,users:p,teams:v,skills:M,projects:j?[j]:[],stages:w?[w]:[],grades:g,books:k,units:ee,lessons:U,editingTask:n}),s.jsx(Ze,{isOpen:B,onClose:()=>V(!1),title:`${ce==="approved"?"Approve":"Reject"} Extension Request`,children:s.jsxs("div",{className:"space-y-4",children:[S&&s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("h4",{className:"font-medium mb-2",children:"Extension Details"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Requested by:"})," ",S.requester_name]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Reason:"})," ",S.reason]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Current due date:"})," ",new Date(S.current_due_date).toLocaleDateString()]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Requested due date:"})," ",new Date(S.requested_due_date).toLocaleDateString()]})]})]}),ce==="approved"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Approved Until Date"}),s.jsx("input",{type:"date",value:G,onChange:y=>ae(y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:S==null?void 0:S.current_due_date})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Review Notes"}),s.jsx("textarea",{value:Pe,onChange:y=>I(y.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:`Add notes for ${ce==="approved"?"approval":"rejection"}...`})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx(D,{variant:"outline",onClick:()=>V(!1),children:"Cancel"}),s.jsxs(D,{variant:ce==="approved"?"primary":"danger",onClick:Re,disabled:ce==="approved"&&!G,children:[ce==="approved"?"Approve":"Reject"," Extension"]})]})]})}),s.jsx(Ze,{isOpen:se,onClose:()=>Q(!1),title:"Add Remark",children:s.jsx(Up,{onSubmit:ue,onCancel:()=>Q(!1)})}),s.jsx(Ze,{isOpen:ve,onClose:()=>Ne(!1),title:"Add Performance Flag",children:s.jsxs("div",{className:"space-y-4",children:[et&&s.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Flagging:"}),s.jsx("p",{className:"font-medium",children:et.name}),s.jsx("p",{className:"text-sm text-gray-500",children:et.email})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Flag Type"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:["green","yellow","orange","red"].map(y=>s.jsx("button",{type:"button",onClick:()=>je(y),className:`p-3 border rounded-lg text-left transition-colors ${q===y?y==="red"?"border-red-500 bg-red-50":y==="orange"?"border-orange-500 bg-orange-50":y==="yellow"?"border-yellow-500 bg-yellow-50":"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"}`,children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${y==="red"?"bg-red-500":y==="orange"?"bg-orange-500":y==="yellow"?"bg-yellow-500":"bg-green-500"}`}),s.jsx("span",{className:"capitalize font-medium",children:y})]})},y))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason"}),s.jsx("textarea",{value:Se,onChange:y=>C(y.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter the reason for this performance flag..."})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx(D,{variant:"outline",onClick:()=>Ne(!1),children:"Cancel"}),s.jsx(D,{variant:"primary",onClick:W,disabled:!Se.trim(),children:"Add Flag"})]})]})})]})}function Up({onSubmit:e,onCancel:t}){const[r,n]=m.useState(""),[a,l]=m.useState(new Date().toISOString().split("T")[0]),[i,o]=m.useState("general"),[c,x]=m.useState(!1),f=j=>{j.preventDefault(),r.trim()&&e({remark:r.trim(),remark_date:a,remark_type:i,is_private:c})};return s.jsxs("form",{onSubmit:f,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Remark"}),s.jsx("textarea",{value:r,onChange:j=>n(j.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your remark...",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),s.jsx("input",{type:"date",value:a,onChange:j=>l(j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type"}),s.jsxs("select",{value:i,onChange:j=>o(j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"general",children:"General"}),s.jsx("option",{value:"progress",children:"Progress"}),s.jsx("option",{value:"issue",children:"Issue"}),s.jsx("option",{value:"update",children:"Update"}),s.jsx("option",{value:"other",children:"Other"})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"isPrivate",checked:c,onChange:j=>x(j.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"isPrivate",className:"ml-2 block text-sm text-gray-700",children:"Private remark (only visible to admins)"})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx(D,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),s.jsx(D,{type:"submit",disabled:!r.trim(),children:"Add Remark"})]})]})}function Hp(){const{state:e,dispatch:t}=mr(),[r,n]=m.useState(!1),[a,l]=m.useState(null),[i,o]=m.useState(null),[c,x]=m.useState(""),[f,j]=m.useState("all"),[d,w]=m.useState("all"),[N,P]=m.useState("all"),[z,p]=m.useState("all"),[h,v]=m.useState("created_at"),[E,M]=m.useState("desc"),[u,g]=m.useState([]),[b,k]=m.useState([]),[A,ee]=m.useState([]),[O,U]=m.useState([]),[oe,de]=m.useState([]),[Te,Ue]=m.useState([]),[_,T]=m.useState([]),[F,B]=m.useState([]),[V,se]=m.useState([]),[Q,S]=m.useState([]),[ie,ce]=m.useState(!0),[ke,Pe]=m.useState(null);m.useEffect(()=>{(async()=>{ce(!0);try{const re={sort:h,order:E};f!=="all"&&(re.status=f),d!=="all"&&(re.priority=d),z!=="all"&&(re.project_id=z),N!=="all"&&(re.assignee_id=N),c&&(re.search=c),console.log("🔍 Sending filters to API:",re),console.log("🔍 Selected assignee:",N),console.log("🔍 State filters:",e.filters);const[me,ye,Re,Ye,ue,Ve,L,W,_e,tt]=await Promise.all([Oe.getAll(re),De.getMembers(),De.getTeams(),Tt.getAll(),We.getAll(),rs.getAll(),ds.getAll(),us.getAll(),ms.getAll(),Bs.getAll()]);console.log("🔍 Tasks received from API:",me),g(me),k(ye),ee(Re),U(Ye),de(ue),Ue(Ve),T(L),B(W),se(_e),S(tt),Pe(null)}catch(re){console.error("Failed to fetch task data:",re),Pe(re.message||"Failed to load tasks")}finally{ce(!1)}})()},[h,E,f,d,z,N,c]),m.useEffect(()=>{e.filters&&Object.keys(e.filters).length>0&&(e.filters.statuses&&j(e.filters.statuses.length===1?e.filters.statuses[0]:"all"),e.filters.teamMembers&&P(e.filters.teamMembers.length===1?e.filters.teamMembers[0]:"all"),setTimeout(()=>{t({type:"SET_FILTERS",payload:{}})},0))},[e.filters,t]);const I=C=>{const re=C.end_date||C.endDate;if(!re)return!1;const me=new Date;me.setHours(0,0,0,0);const ye=new Date(re);return ye.setHours(0,0,0,0),ye<me&&C.status!=="completed"},G=C=>{const re=C.end_date||C.endDate;if(!re)return!1;const me=new Date;me.setHours(0,0,0,0);const ye=new Date(re);return ye.setHours(0,0,0,0),ye.getTime()===me.getTime()&&C.status!=="completed"},ae=C=>{const re=C.end_date||C.endDate;if(!re)return!1;const me=new Date;me.setDate(me.getDate()+1),me.setHours(0,0,0,0);const ye=new Date(re);return ye.setHours(0,0,0,0),ye.getTime()===me.getTime()&&C.status!=="completed"},le=C=>{const re=C.end_date||C.endDate;if(!re)return!1;const me=new Date;me.setHours(0,0,0,0);const ye=new Date;ye.setDate(me.getDate()+7),ye.setHours(0,0,0,0);const Re=new Date(re);return Re.setHours(0,0,0,0),Re>=me&&Re<=ye&&C.status!=="completed"},he=u.filter(C=>{var re,me,ye,Re;return!((re=e.filters)!=null&&re.overdue&&!I(C)||(me=e.filters)!=null&&me.dueToday&&!G(C)||(ye=e.filters)!=null&&ye.dueTomorrow&&!ae(C)||(Re=e.filters)!=null&&Re.dueThisWeek&&!le(C))}),ve=async C=>{try{if(a){let re="";if(C.gradeId){const Re=_.find(Ye=>Ye.id===parseInt(C.gradeId||"0"));if(Re&&(re=Re.name,C.bookId)){const Ye=F.find(ue=>ue.id===parseInt(C.bookId||"0"));if(Ye&&(re+=` > ${Ye.name}`,C.unitId)){const ue=V.find(Ve=>Ve.id===parseInt(C.unitId||"0"));if(ue&&(re+=` > ${ue.name}`,C.lessonId)){const Ve=Q.find(L=>L.id===parseInt(C.lessonId||"0"));Ve&&(re+=` > ${Ve.name}`)}}}}const me={name:C.name,description:C.description,project_id:parseInt(C.projectId||"1"),category_stage_id:parseInt(C.stageId||""),status:C.status,priority:C.priority,start_date:C.startDate,end_date:C.endDate,estimated_hours:parseInt(String(C.estimatedHours||0)),actual_hours:parseInt(String(C.actualHours||0)),assignees:C.assignees||[],skills:C.skills,grade_id:C.gradeId?parseInt(C.gradeId):null,book_id:C.bookId?parseInt(C.bookId):null,unit_id:C.unitId?parseInt(C.unitId):null,lesson_id:C.lessonId?parseInt(C.lessonId):null,component_path:re};console.log("🔄 Updating task with hierarchy in TaskManager:",{taskId:a.id,grade_id:me.grade_id,book_id:me.book_id,unit_id:me.unit_id,lesson_id:me.lesson_id,component_path:me.component_path}),await Oe.update(a.id,me);const ye=await Oe.getAll();g(ye)}else{let re="";if(C.gradeId){const ue=_.find(Ve=>Ve.id===parseInt(C.gradeId||"0"));if(ue&&(re=ue.name,C.bookId)){const Ve=F.find(L=>L.id===parseInt(C.bookId||"0"));if(Ve&&(re+=` > ${Ve.name}`,C.unitId)){const L=V.find(W=>W.id===parseInt(C.unitId||"0"));if(L&&(re+=` > ${L.name}`,C.lessonId)){const W=Q.find(_e=>_e.id===parseInt(C.lessonId||"0"));W&&(re+=` > ${W.name}`)}}}}const me=(C.skills||[]).map(ue=>{const Ve=Te.find(L=>L.name===ue);return Ve?Ve.id:null}).filter(ue=>ue!==null),ye={name:C.name||"",description:C.description||"",project_id:parseInt(C.projectId||"1"),category_stage_id:parseInt(C.stageId||""),status:C.status||"not-started",priority:C.priority||"medium",start_date:C.startDate||new Date().toISOString().split("T")[0],end_date:C.endDate||new Date(Date.now()+7*24*60*60*1e3).toISOString().split("T")[0],estimated_hours:C.estimatedHours||8,assignees:C.assignees||[],skills:me,component_path:re,grade_id:C.gradeId?parseInt(C.gradeId):null,book_id:C.bookId?parseInt(C.bookId):null,unit_id:C.unitId?parseInt(C.unitId):null,lesson_id:C.lessonId?parseInt(C.lessonId):null};console.log("🚀 Creating task with data:",ye),console.log("📚 Educational hierarchy IDs being sent:",{grade_id:ye.grade_id,book_id:ye.book_id,unit_id:ye.unit_id,lesson_id:ye.lesson_id,component_path:ye.component_path});const Re=await Oe.create(ye),Ye=await Oe.getAll();g(Ye),console.log("✅ Task created successfully:",Re)}n(!1),l(null)}catch(re){console.error("❌ Failed to save task:",re),Pe("Failed to save task")}},Ne=C=>{switch(C){case"not-started":return"default";case"in-progress":return"primary";case"under-review":return"warning";case"completed":return"success";case"blocked":return"danger";default:return"default"}},et=C=>{switch(C){case"low":return"default";case"medium":return"primary";case"high":return"warning";case"urgent":return"danger";default:return"default"}},K=C=>{l(C),n(!0)},q=C=>{h===C?M(E==="asc"?"desc":"asc"):(v(C),M("desc"))},je=async C=>{if(confirm(`Are you sure you want to delete the task "${C.name}"? This action cannot be undone.`))try{Pe(null),await Oe.delete(C.id);const re=await Oe.getAll();g(re),console.log("✅ Task deleted successfully:",C.name)}catch(re){console.error("❌ Delete task error:",re),Pe(re.message||"Failed to delete task")}},Se={total:u.length,notStarted:u.filter(C=>C.status==="not-started").length,inProgress:u.filter(C=>C.status==="in-progress").length,completed:u.filter(C=>C.status==="completed").length,overdue:u.filter(C=>{const re=C.end_date||C.endDate;if(!re||C.status==="completed")return!1;const me=new Date(re);return me.setHours(23,59,59,999),me<new Date}).length};return i?s.jsx(ym,{taskId:i,onBack:()=>o(null)}):ie?s.jsx("div",{className:"p-6 space-y-6",children:s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-lg font-medium text-gray-900 mb-2",children:"Loading tasks..."}),s.jsx("div",{className:"text-gray-500",children:"Please wait while we fetch your tasks"})]})})}):ke?s.jsx("div",{className:"p-6 space-y-6",children:s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-lg font-medium text-red-600 mb-2",children:"Failed to load tasks"}),s.jsx("div",{className:"text-gray-500 mb-4",children:ke}),s.jsx(D,{onClick:()=>window.location.reload(),children:"Retry"})]})})}):s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Task Management"}),s.jsx("p",{className:"text-gray-600",children:"Track and manage all project tasks"})]}),s.jsx(D,{icon:s.jsx(lt,{className:"w-4 h-4"}),onClick:()=>{l(null),n(!0)},children:"Create Task"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[s.jsx(Z,{children:s.jsx(J,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 rounded-lg bg-gray-50",children:s.jsx(Et,{className:"w-6 h-6 text-gray-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Tasks"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Se.total})]})]})})}),s.jsx(Z,{children:s.jsx(J,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 rounded-lg bg-blue-50",children:s.jsx(Or,{className:"w-6 h-6 text-blue-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"In Progress"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Se.inProgress})]})]})})}),s.jsx(Z,{children:s.jsx(J,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 rounded-lg bg-green-50",children:s.jsx(Et,{className:"w-6 h-6 text-green-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Completed"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Se.completed})]})]})})}),s.jsx(Z,{children:s.jsx(J,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 rounded-lg bg-orange-50",children:s.jsx(Or,{className:"w-6 h-6 text-orange-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Not Started"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Se.notStarted})]})]})})}),s.jsx(Z,{children:s.jsx(J,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 rounded-lg bg-red-50",children:s.jsx(Ct,{className:"w-6 h-6 text-red-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Overdue"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Se.overdue})]})]})})})]}),s.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:s.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Ao,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",placeholder:"Search tasks...",value:c,onChange:C=>x(C.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("select",{value:f,onChange:C=>j(C.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"not-started",children:"Not Started"}),s.jsx("option",{value:"in-progress",children:"In Progress"}),s.jsx("option",{value:"under-review",children:"Under Review"}),s.jsx("option",{value:"completed",children:"Completed"}),s.jsx("option",{value:"blocked",children:"Blocked"})]}),s.jsxs("select",{value:d,onChange:C=>w(C.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[s.jsx("option",{value:"all",children:"All Priority"}),s.jsx("option",{value:"low",children:"Low"}),s.jsx("option",{value:"medium",children:"Medium"}),s.jsx("option",{value:"high",children:"High"}),s.jsx("option",{value:"urgent",children:"Urgent"})]}),s.jsxs("select",{value:z,onChange:C=>p(C.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[s.jsx("option",{value:"all",children:"All Projects"}),oe.map(C=>s.jsx("option",{value:C.id,children:C.name},C.id))]}),s.jsxs("select",{value:N,onChange:C=>P(C.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[s.jsx("option",{value:"all",children:"All Assignees"}),b.map(C=>s.jsx("option",{value:C.id,children:C.name},C.id))]})]})}),s.jsx(Z,{children:s.jsx(J,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>q("name"),children:s.jsxs("div",{className:"flex items-center",children:["Task Name",h==="name"&&s.jsx("span",{className:"ml-1 text-blue-600",children:E==="asc"?"↑":"↓"})]})}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Project"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stage"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>q("status"),children:s.jsxs("div",{className:"flex items-center",children:["Status",h==="status"&&s.jsx("span",{className:"ml-1 text-blue-600",children:E==="asc"?"↑":"↓"})]})}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>q("priority"),children:s.jsxs("div",{className:"flex items-center",children:["Priority",h==="priority"&&s.jsx("span",{className:"ml-1 text-blue-600",children:E==="asc"?"↑":"↓"})]})}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>q("assignees"),children:s.jsxs("div",{className:"flex items-center",children:["Assignees",h==="assignees"&&s.jsx("span",{className:"ml-1 text-blue-600",children:E==="asc"?"↑":"↓"})]})}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>q("end_date"),children:s.jsxs("div",{className:"flex items-center",children:["Due Date",h==="end_date"&&s.jsx("span",{className:"ml-1 text-blue-600",children:E==="asc"?"↑":"↓"})]})}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>q("progress"),children:s.jsxs("div",{className:"flex items-center",children:["Progress",h==="progress"&&s.jsx("span",{className:"ml-1 text-blue-600",children:E==="asc"?"↑":"↓"})]})})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:he.map(C=>{const re=b.filter(ue=>C.assignees&&C.assignees.includes(ue.id));A.filter(ue=>C.teamAssignees&&C.teamAssignees.includes(ue.id));const me=I(C),ye=C.project_id||C.projectId,Re=oe.find(ue=>{const Ve=typeof ue.id=="string"?parseInt(ue.id):ue.id,L=typeof ye=="string"?parseInt(ye):ye;return Ve===L}),Ye=C.stage_name;return s.jsxs("tr",{className:`hover:bg-gray-50 ${me?"bg-red-50":""}`,children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsxs("div",{className:"text-sm font-medium text-gray-900 flex items-center",children:[C.name,me&&s.jsx(Ct,{className:"w-4 h-4 text-red-500 ml-2"})]}),s.jsxs("div",{className:"text-sm text-gray-500",children:[C.component_path&&s.jsxs("div",{className:"text-xs text-purple-600 mt-1 bg-purple-100 p-1 rounded-md inline-block",children:["📚 ",C.component_path]}),C.description&&s.jsx("div",{className:"mt-1",children:C.description})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm text-gray-900",children:Re?s.jsx("div",{children:s.jsx("div",{className:"font-medium text-blue-600",children:Re.name})}):s.jsx("span",{className:"text-gray-400",children:"Unknown Project"})})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm text-gray-900",children:Ye?s.jsx("div",{className:"font-medium text-green-600",children:Ye}):s.jsx("span",{className:"text-gray-400",children:"Unknown Stage"})})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx(Y,{variant:Ne(C.status),children:C.status.replace("-"," ")})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx(Y,{variant:et(C.priority),children:C.priority})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"space-y-1",children:[re.length>0&&s.jsxs("div",{className:"flex flex-wrap gap-1",children:[re.slice(0,3).map(ue=>s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:ue.name},ue.id)),re.length>3&&s.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600",children:["+",re.length-3," more"]})]}),re.length===0&&s.jsx("span",{className:"text-xs text-gray-400",children:"No assignees"})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(gt,{className:"w-4 h-4 mr-1 text-gray-400"}),C.end_date||C.endDate?new Date(C.end_date||C.endDate||"").toLocaleDateString():"No due date"]})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2 mr-2",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${xs(C.status)}%`}})}),s.jsxs("span",{className:"text-sm text-gray-600",children:[xs(C.status),"%"]})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(D,{variant:"ghost",size:"sm",onClick:ue=>{ue.stopPropagation(),o(C.id)},title:"View Details",children:s.jsx(Ks,{className:"w-4 h-4"})}),s.jsx(D,{variant:"ghost",size:"sm",onClick:ue=>{ue.stopPropagation(),K(C)},title:"Edit Task",children:s.jsx(Es,{className:"w-4 h-4"})}),s.jsx(D,{variant:"ghost",size:"sm",onClick:ue=>{ue.stopPropagation(),je(C)},title:"Delete Task",className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:s.jsx(xt,{className:"w-4 h-4"})})]})]})]},C.id)})})]})})})}),s.jsx(Wa,{isOpen:r,onClose:()=>{n(!1),l(null)},onSubmit:ve,users:b,teams:A,skills:Te,projects:oe,stages:O,grades:_,books:F,units:V,lessons:Q,editingTask:a})]})}function Wa({isOpen:e,onClose:t,onSubmit:r,users:n,teams:a,skills:l,projects:i,stages:o,grades:c,books:x,units:f,lessons:j,editingTask:d}){const[w,N]=m.useState({name:"",description:"",projectId:"",stageId:"",gradeId:"",bookId:"",unitId:"",lessonId:"",status:"not-started",assignees:[],teamAssignees:[],skills:[],priority:"medium",estimatedHours:8,actualHours:0,startDate:new Date().toISOString().split("T")[0],endDate:new Date(Date.now()+6048e5).toISOString().split("T")[0]}),[P,z]=m.useState([]),[p,h]=m.useState(!1),v=async b=>{if(!b){z([]);return}try{h(!0);const k=i.find(A=>A.id===parseInt(b)||A.id===b);if(k&&k.category_id){const A=await Tt.getByCategory(k.category_id);z(A),console.log("📋 Fetched stages for project category:",A)}else z([])}catch(k){console.error("❌ Failed to fetch project stages:",k),z([])}finally{h(!1)}};m.useEffect(()=>{w.projectId?v(w.projectId):z([])},[w.projectId]),m.useEffect(()=>{if(d){const b=Array.isArray(d.skills)?d.skills.map(A=>typeof A=="object"&&A.name?A.name:typeof A=="string"?A:"").filter(A=>A!==""):[],k=Array.isArray(d.assignees)?d.assignees.map(A=>typeof A=="object"&&A.id?A.id.toString():A.toString()):[];console.log("🔍 Editing task assignees:",d.assignees),console.log("🔍 Converted assignee IDs:",k),console.log("🔍 Setting form data for editing task:",d),N({name:d.name,description:d.description||"",projectId:d.project_id||d.projectId||"",stageId:d.stage_id||d.stageId||"",gradeId:(d.grade_id||d.gradeId||"").toString(),bookId:(d.book_id||d.bookId||"").toString(),unitId:(d.unit_id||d.unitId||"").toString(),lessonId:(d.lesson_id||d.lessonId||"").toString(),status:d.status,assignees:k,teamAssignees:Array.isArray(d.teamAssignees)?d.teamAssignees.map(A=>A.toString()):[],skills:b,priority:d.priority,estimatedHours:d.estimated_hours||d.estimatedHours||8,actualHours:d.actual_hours||d.actualHours||0,startDate:d.start_date||d.startDate?new Date(d.start_date||d.startDate||"").toISOString().split("T")[0]:new Date().toISOString().split("T")[0],endDate:d.end_date||d.endDate?new Date(d.end_date||d.endDate||"").toISOString().split("T")[0]:new Date(Date.now()+7*24*60*60*1e3).toISOString().split("T")[0]})}else N({name:"",description:"",projectId:"",stageId:"",gradeId:"",bookId:"",unitId:"",lessonId:"",status:"not-started",assignees:[],teamAssignees:[],skills:[],priority:"medium",estimatedHours:8,actualHours:0,startDate:new Date().toISOString().split("T")[0],endDate:new Date(Date.now()+7*24*60*60*1e3).toISOString().split("T")[0]})},[d,e]);const E=b=>{var O;b.preventDefault(),xs(w.status);let k="";const A=i.find(U=>U.id===parseInt(w.projectId)||U.id===w.projectId);if(A&&w.gradeId){const U=(O=A.grades)==null?void 0:O.find(oe=>oe.id===w.gradeId);if(U&&(k=U.name,w.bookId)){const oe=U.books.find(de=>de.id===w.bookId);if(oe&&(k+=` > ${oe.name}`,w.unitId)){const de=oe.units.find(Te=>Te.id===w.unitId);if(de&&(k+=` > ${de.name}`,w.lessonId)){const Te=de.lessons.find(Ue=>Ue.id===w.lessonId);Te&&(k+=` > ${Te.name}`)}}}}const ee=w.skills.map(U=>{const oe=l.find(de=>de.name===U);return oe?oe.id:null}).filter(U=>U!==null);r({...w,skills:ee,componentPath:k,startDate:new Date(w.startDate),endDate:new Date(w.endDate)})},M=b=>{N(k=>({...k,assignees:k.assignees.includes(b)?k.assignees.filter(A=>A!==b):[...k.assignees,b]}))},u=i.find(b=>b.id===parseInt(w.projectId)||b.id===w.projectId),g=[];return u&&c.filter(k=>k.project_id===parseInt(u.id)).forEach(k=>{g.push({id:k.id,name:k.name,type:"grade",gradeId:k.id,bookId:null,unitId:null,lessonId:null}),x.filter(ee=>ee.grade_id===k.id).forEach(ee=>{g.push({id:`${k.id}-${ee.id}`,name:`${k.name} > ${ee.name}`,type:"book",gradeId:k.id,bookId:ee.id,unitId:null,lessonId:null}),f.filter(U=>U.book_id===ee.id).forEach(U=>{g.push({id:`${k.id}-${ee.id}-${U.id}`,name:`${k.name} > ${ee.name} > ${U.name}`,type:"unit",gradeId:k.id,bookId:ee.id,unitId:U.id,lessonId:null}),j.filter(de=>de.unit_id===U.id).forEach(de=>{g.push({id:`${k.id}-${ee.id}-${U.id}-${de.id}`,name:`${k.name} > ${ee.name} > ${U.name} > ${de.name}`,type:"lesson",gradeId:k.id,bookId:ee.id,unitId:U.id,lessonId:de.id})})})})}),s.jsx(Ze,{isOpen:e,onClose:t,title:d?`Edit Task: ${d.name}`:"Create New Task",size:"xl",children:s.jsxs("form",{onSubmit:E,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Task Name"}),s.jsx("input",{type:"text",required:!0,value:w.name,onChange:b=>N({...w,name:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter task name"})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),s.jsx("textarea",{value:w.description,onChange:b=>N({...w,description:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Task description"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project *"}),s.jsxs("select",{required:!0,value:w.projectId,onChange:b=>N({...w,projectId:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Select Project"}),i.map(b=>s.jsx("option",{value:b.id,children:b.name},b.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stage *"}),s.jsxs("select",{required:!0,value:w.stageId,onChange:b=>N({...w,stageId:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:!w.projectId||p,children:[s.jsx("option",{value:"",children:p?"Loading stages...":"Select Stage"}),P.map(b=>s.jsxs("option",{value:b.id,children:[b.name," ",b.description&&`- ${b.description}`]},b.id))]}),!w.projectId&&s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Please select a project first to load available stages"}),w.projectId&&P.length===0&&!p&&s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"No stages found for this project's category"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Educational Hierarchy (Optional)"}),s.jsxs("select",{value:(()=>{const b=w.gradeId?parseInt(w.gradeId):null,k=w.bookId?parseInt(w.bookId):null,A=w.unitId?parseInt(w.unitId):null,ee=w.lessonId?parseInt(w.lessonId):null;console.log("🔍 Educational hierarchy matching:",{formData:{gradeId:b,bookId:k,unitId:A,lessonId:ee},availableHierarchy:g.length});const O=g.find(U=>U.gradeId===b&&U.bookId===k&&U.unitId===A&&U.lessonId===ee);return console.log("🔍 Matching hierarchy item:",O),O?O.id:""})(),onChange:b=>{const k=g.find(A=>A.id===b.target.value);N(k?{...w,gradeId:k.gradeId?k.gradeId.toString():"",bookId:k.bookId?k.bookId.toString():"",unitId:k.unitId?k.unitId.toString():"",lessonId:k.lessonId?k.lessonId.toString():""}:{...w,gradeId:"",bookId:"",unitId:"",lessonId:""})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:!w.projectId,children:[s.jsx("option",{value:"",children:"Project Level Task"}),g.map(b=>s.jsxs("option",{value:b.id,children:[b.name," (",b.type,")"]},b.id))]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select a specific educational hierarchy item to assign this task to a particular grade, book, unit, or lesson"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),s.jsxs("select",{value:w.status,onChange:b=>{const k=b.target.value;N({...w,status:k})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"not-started",children:"Not Started"}),s.jsx("option",{value:"in-progress",children:"In Progress"}),s.jsx("option",{value:"under-review",children:"Under Review"}),s.jsx("option",{value:"completed",children:"Completed"}),s.jsx("option",{value:"blocked",children:"Blocked"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),s.jsxs("select",{value:w.priority,onChange:b=>N({...w,priority:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"low",children:"Low"}),s.jsx("option",{value:"medium",children:"Medium"}),s.jsx("option",{value:"high",children:"High"}),s.jsx("option",{value:"urgent",children:"Urgent"})]})]}),s.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Progress (Auto-calculated)"}),s.jsxs("span",{className:"text-sm text-blue-600 font-semibold",children:[xs(w.status),"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${xs(w.status)}%`}})}),s.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Progress is automatically calculated based on task status"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estimated Hours"}),s.jsx("input",{type:"number",min:"1",value:w.estimatedHours,onChange:b=>N({...w,estimatedHours:parseInt(b.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),d&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Actual Hours"}),s.jsx("input",{type:"number",min:"0",value:w.actualHours,onChange:b=>N({...w,actualHours:parseInt(b.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),s.jsx("input",{type:"date",value:w.startDate,onChange:b=>N({...w,startDate:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Due Date"}),s.jsx("input",{type:"date",value:w.endDate,onChange:b=>N({...w,endDate:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Individual Assignees"}),s.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-32 overflow-y-auto border border-gray-300 rounded-lg p-2",children:n&&n.length>0?n.map(b=>{const k=w.assignees.includes(b.id.toString());return console.log(`🔍 User ${b.name} (ID: ${b.id}) - checked: ${k}, assignees:`,w.assignees),s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:k,onChange:()=>M(b.id.toString()),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:b.name})]},b.id)}):s.jsx("p",{className:"text-gray-500 text-sm",children:"No team members available"})})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx(D,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),s.jsx(D,{type:"submit",children:d?"Update Task":"Create Task"})]})]})})}function Bp({isOpen:e,onClose:t,onSubmit:r,project:n,categories:a}){const[l,i]=m.useState({name:"",description:"",category_id:null,current_stage_id:null,status:"planning",start_date:"",end_date:""}),[o,c]=m.useState([]),[x,f]=m.useState(!1);m.useEffect(()=>{if(n&&e){const N=h=>{if(!h)return new Date().toISOString().split("T")[0];try{const v=new Date(h);return isNaN(v.getTime())?new Date().toISOString().split("T")[0]:v.toISOString().split("T")[0]}catch(v){return console.warn("Invalid date value:",h,v),new Date().toISOString().split("T")[0]}},P=n.start_date,z=n.end_date,p={name:n.name||"",description:n.description||"",category_id:n.category_id||null,current_stage_id:n.current_stage_id||null,status:n.status||"planning",start_date:N(P),end_date:N(z)};i(p),n.category_id&&j(n.category_id)}},[n,e]),m.useEffect(()=>{o.length>0&&n.current_stage_id&&o.find(P=>P.id===n.current_stage_id)&&i(P=>({...P,current_stage_id:n.current_stage_id||null}))},[o,n.current_stage_id]);const j=async N=>{f(!0);try{const P=await Tt.getByCategory(N);c(P),n.current_stage_id?P.find(p=>p.id===n.current_stage_id)||console.warn("⚠️ Current stage ID not found in loaded stages:",n.current_stage_id):console.log("ℹ️ No current_stage_id set for this project")}catch(P){console.error("Failed to load stages for category:",P),c([])}finally{f(!1)}},d=async N=>{if(i(P=>({...P,category_id:N,current_stage_id:null})),N){f(!0);try{const P=await Tt.getByCategory(N);c(P)}catch(P){console.error("Failed to load stages for category:",P),c([])}finally{f(!1)}}else c([])},w=N=>{N.preventDefault(),r({...l,start_date:l.start_date,end_date:l.end_date,currentStageId:l.current_stage_id||void 0})};return s.jsx(Ze,{isOpen:e,onClose:t,title:"Edit Project",size:"lg",children:s.jsxs("form",{onSubmit:w,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Name"}),s.jsx("input",{type:"text",required:!0,value:l.name,onChange:N=>i({...l,name:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter project name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),s.jsx("textarea",{value:l.description,onChange:N=>i({...l,description:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Project description"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),s.jsxs("select",{value:l.category_id||"",onChange:N=>d(N.target.value?parseInt(N.target.value):null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Select a category"}),a.map(N=>s.jsx("option",{value:N.id,children:N.name},N.id))]})]}),l.category_id&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Stage"}),x?s.jsxs("div",{className:"flex items-center justify-center py-4",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),s.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Loading stages..."})]}):o.length>0?s.jsxs("select",{value:l.current_stage_id||"",onChange:N=>i({...l,current_stage_id:N.target.value?parseInt(N.target.value):null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Select a stage"}),o.map(N=>s.jsxs("option",{value:N.id,children:[N.name," - ",N.description]},N.id))]}):s.jsx("div",{className:"text-sm text-gray-500 py-2",children:"No stages available for this category."})]}),s.jsx("div",{className:"grid grid-cols-2 gap-4",children:s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),s.jsxs("select",{value:l.status,onChange:N=>i({...l,status:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"planning",children:"Planning"}),s.jsx("option",{value:"active",children:"Active"}),s.jsx("option",{value:"on-hold",children:"On Hold"}),s.jsx("option",{value:"completed",children:"Completed"}),s.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),s.jsx("input",{type:"date",value:l.start_date,onChange:N=>i({...l,start_date:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),s.jsx("input",{type:"date",value:l.end_date,onChange:N=>i({...l,end_date:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx(D,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),s.jsx(D,{type:"submit",children:"Update Project"})]})]})})}const Vp=({projectId:e})=>{const[t,r]=m.useState([]),[n,a]=m.useState([]),[l,i]=m.useState([]),[o,c]=m.useState([]),[x,f]=m.useState(!0),[j,d]=m.useState(null),[w,N]=m.useState(new Set);m.useState(new Set);const[P,z]=m.useState(!1),[p,h]=m.useState(!1),[v,E]=m.useState(!1),[M,u]=m.useState(!1),[g,b]=m.useState(null),[k,A]=m.useState(null),[ee,O]=m.useState(null),[U,oe]=m.useState(null),[de,Te]=m.useState(null),[Ue,_]=m.useState(null),[T,F]=m.useState(null);m.useEffect(()=>{B()},[e]);const B=async()=>{try{f(!0),d(null);const[K,q,je,Se]=await Promise.all([ds.getByProject(e),us.getAll(),ms.getAll(),Bs.getAll()]);r(K||[]);const C=new Set((K||[]).map(ue=>ue.id)),re=(q||[]).filter(ue=>C.has(ue.grade_id));a(re);const me=new Set(re.map(ue=>ue.id)),ye=(je||[]).filter(ue=>me.has(ue.book_id));i(ye);const Re=new Set(ye.map(ue=>ue.id)),Ye=(Se||[]).filter(ue=>Re.has(ue.unit_id));c(Ye)}catch(K){console.error("Error loading educational hierarchy:",K),d(K.message||"Failed to load educational hierarchy")}finally{f(!1)}},V=K=>{const q=new Set(w);q.has(K)?q.delete(K):q.add(K),N(q)},se=async K=>{try{const q=await ds.create({...K,project_id:e});r([...t,q]),z(!1)}catch(q){d(q.message||"Failed to create grade")}},Q=async K=>{if(g)try{const q=await ds.update(g.id,K);r(t.map(je=>je.id===g.id?q:je)),z(!1),b(null)}catch(q){d(q.message||"Failed to update grade")}},S=async K=>{if(confirm("Are you sure you want to delete this grade? This will also delete all associated books, units, and lessons."))try{await ds.delete(K),r(t.filter(q=>q.id!==K)),a(n.filter(q=>q.grade_id!==K)),i(l.filter(q=>{const je=n.find(Se=>Se.id===q.book_id);return je&&je.grade_id!==K})),c(o.filter(q=>{const je=l.find(C=>C.id===q.unit_id),Se=n.find(C=>C.id===(je==null?void 0:je.book_id));return Se&&Se.grade_id!==K}))}catch(q){d(q.message||"Failed to delete grade")}},ie=async K=>{if(de)try{const q=await us.create({...K,grade_id:de});a([...n,q]),h(!1),Te(null)}catch(q){d(q.message||"Failed to create book")}},ce=async K=>{if(k)try{const q=await us.update(k.id,K);a(n.map(je=>je.id===k.id?q:je)),h(!1),A(null)}catch(q){d(q.message||"Failed to update book")}},ke=async K=>{if(confirm("Are you sure you want to delete this book? This will also delete all associated units and lessons."))try{await us.delete(K),a(n.filter(q=>q.id!==K)),i(l.filter(q=>q.book_id!==K)),c(o.filter(q=>{const je=l.find(Se=>Se.id===q.unit_id);return je&&je.book_id!==K}))}catch(q){d(q.message||"Failed to delete book")}},Pe=async K=>{if(Ue)try{const q=await ms.create({...K,book_id:Ue});i([...l,q]),E(!1),_(null)}catch(q){d(q.message||"Failed to create unit")}},I=async K=>{if(ee)try{const q=await ms.update(ee.id,K);i(l.map(je=>je.id===ee.id?q:je)),E(!1),O(null)}catch(q){d(q.message||"Failed to update unit")}},G=async K=>{if(confirm("Are you sure you want to delete this unit? This will also delete all associated lessons."))try{await ms.delete(K),i(l.filter(q=>q.id!==K)),c(o.filter(q=>q.unit_id!==K))}catch(q){d(q.message||"Failed to delete unit")}},ae=async K=>{if(T)try{const q=await Bs.create({...K,unit_id:T});c([...o,q]),u(!1),F(null)}catch(q){d(q.message||"Failed to create lesson")}},le=async K=>{if(U)try{const q=await Bs.update(U.id,K);c(o.map(je=>je.id===U.id?q:je)),u(!1),oe(null)}catch(q){d(q.message||"Failed to update lesson")}},he=K=>{_(K),O(null),E(!0)},ve=K=>{F(K),oe(null),u(!0)},Ne=K=>{A(K),h(!0)},et=K=>{O(K),E(!0)};return x?s.jsx("div",{className:"flex items-center justify-center p-8",children:s.jsx("div",{className:"text-lg",children:"Loading educational hierarchy..."})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Educational Hierarchy"}),s.jsx("p",{className:"text-gray-600",children:"Manage grades, books, units, and lessons for this project"})]}),s.jsxs(D,{onClick:()=>{b(null),z(!0)},className:"flex items-center space-x-2",children:[s.jsx(lt,{className:"w-4 h-4"}),s.jsx("span",{children:"Add Grade"})]})]}),j&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:s.jsx("p",{className:"text-red-800",children:j})}),s.jsx("div",{className:"space-y-4",children:!t||t.length===0?s.jsx(Z,{children:s.jsxs(J,{className:"p-8 text-center",children:[s.jsx(Tn,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Grades Yet"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Start by creating the first grade for this project."}),s.jsx(D,{onClick:()=>{b(null),z(!0)},children:"Create First Grade"})]})}):(t||[]).map(K=>s.jsx(Wp,{grade:K,books:(n||[]).filter(q=>q.grade_id===K.id),units:l||[],lessons:o||[],expanded:w.has(K.id),onToggleExpansion:()=>V(K.id),onEdit:()=>{b(K),z(!0)},onDelete:()=>S(K.id),onAddBook:()=>{Te(K.id),A(null),h(!0)},onAddUnit:he,onEditBook:Ne,onDeleteBook:ke,onAddLesson:ve,onEditUnit:et,onDeleteUnit:G},K.id))}),s.jsx(Qp,{isOpen:P,onClose:()=>{z(!1),b(null)},grade:g,onSubmit:g?Q:se}),s.jsx(Kp,{isOpen:p,onClose:()=>{h(!1),A(null),Te(null)},book:k,onSubmit:k?ce:ie}),s.jsx(Yp,{isOpen:v,onClose:()=>{E(!1),O(null),_(null)},unit:ee,onSubmit:ee?I:Pe}),s.jsx(Xp,{isOpen:M,onClose:()=>{u(!1),oe(null),F(null)},lesson:U,onSubmit:U?le:ae})]})},Wp=({grade:e,books:t,units:r,lessons:n,expanded:a,onToggleExpansion:l,onEdit:i,onDelete:o,onAddBook:c,onAddUnit:x,onEditBook:f,onDeleteBook:j,onAddLesson:d,onEditUnit:w,onDeleteUnit:N})=>s.jsx(Z,{children:s.jsxs(J,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("button",{onClick:l,className:"p-1 hover:bg-gray-100 rounded",children:a?s.jsx(Mo,{className:"w-4 h-4"}):s.jsx(es,{className:"w-4 h-4"})}),s.jsx(Tn,{className:"w-5 h-5 text-blue-600"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900",children:e.name}),e.description&&s.jsx("p",{className:"text-sm text-gray-600",children:e.description})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(Y,{variant:"secondary",children:[typeof e.weight=="number"?e.weight.toFixed(1):"0.0","%"]}),s.jsxs(Y,{variant:"secondary",children:[(t||[]).length," books"]}),s.jsxs("div",{className:"flex space-x-1",children:[s.jsx(D,{size:"sm",variant:"outline",onClick:i,children:s.jsx($n,{className:"w-3 h-3"})}),s.jsx(D,{size:"sm",variant:"outline",onClick:c,children:s.jsx(lt,{className:"w-3 h-3"})}),s.jsx(D,{size:"sm",variant:"outline",onClick:o,children:s.jsx(xt,{className:"w-3 h-3"})})]})]})]}),a&&s.jsx("div",{className:"mt-4 border-t pt-4",children:!t||t.length===0?s.jsxs("div",{className:"text-center py-4",children:[s.jsx("p",{className:"text-gray-600 mb-2",children:"No books in this grade"}),s.jsx(D,{size:"sm",onClick:c,children:"Add Book"})]}):s.jsx("div",{className:"space-y-3",children:t.map(P=>s.jsx(Gp,{book:P,units:(r||[]).filter(z=>z.book_id===P.id),lessons:n||[],onAddUnit:x,onEditBook:f,onDeleteBook:j,onAddLesson:d,onEditUnit:w,onDeleteUnit:N},P.id))})})]})}),Gp=({book:e,units:t,lessons:r,onAddUnit:n,onEditBook:a,onDeleteBook:l,onAddLesson:i,onEditUnit:o,onDeleteUnit:c})=>{const[x,f]=m.useState(!1);return s.jsxs("div",{className:"ml-6 border-l-2 border-gray-200 pl-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>f(!x),className:"p-1 hover:bg-gray-100 rounded",children:x?s.jsx(Mo,{className:"w-3 h-3"}):s.jsx(es,{className:"w-3 h-3"})}),s.jsx(om,{className:"w-4 h-4 text-green-600"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:e.name}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Y,{variant:"secondary",children:e.type}),s.jsxs(Y,{variant:"secondary",children:[typeof e.weight=="number"?e.weight.toFixed(1):"0.0","%"]})]})]})]}),s.jsxs("div",{className:"flex space-x-1",children:[s.jsx(D,{size:"sm",variant:"outline",onClick:()=>a(e),children:s.jsx($n,{className:"w-3 h-3"})}),s.jsx(D,{size:"sm",variant:"outline",onClick:()=>n(e.id),children:s.jsx(lt,{className:"w-3 h-3"})}),s.jsx(D,{size:"sm",variant:"outline",onClick:()=>l(e.id),children:s.jsx(xt,{className:"w-3 h-3"})})]})]}),x&&s.jsx("div",{className:"mt-3 space-y-2",children:!t||t.length===0?s.jsxs("div",{className:"text-center py-2",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"No units in this book"}),s.jsx(D,{size:"sm",onClick:()=>n(e.id),children:"Add Unit"})]}):t.map(j=>s.jsx(qp,{unit:j,lessons:(r||[]).filter(d=>d.unit_id===j.id),onAddLesson:i,onEditUnit:o,onDeleteUnit:c},j.id))})]})},qp=({unit:e,lessons:t,onAddLesson:r,onEditUnit:n,onDeleteUnit:a})=>{const[l,i]=m.useState(!1);return s.jsxs("div",{className:"ml-6 border-l-2 border-gray-200 pl-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>i(!l),className:"p-1 hover:bg-gray-100 rounded",children:l?s.jsx(Mo,{className:"w-3 h-3"}):s.jsx(es,{className:"w-3 h-3"})}),s.jsx(En,{className:"w-4 h-4 text-purple-600"}),s.jsxs("div",{children:[s.jsx("h5",{className:"font-medium text-gray-900",children:e.name}),s.jsxs(Y,{variant:"secondary",children:[typeof e.weight=="number"?e.weight.toFixed(1):"0.0","%"]})]})]}),s.jsxs("div",{className:"flex space-x-1",children:[s.jsx(D,{size:"sm",variant:"outline",onClick:()=>n(e),children:s.jsx($n,{className:"w-3 h-3"})}),s.jsx(D,{size:"sm",variant:"outline",onClick:()=>r(e.id),children:s.jsx(lt,{className:"w-3 h-3"})}),s.jsx(D,{size:"sm",variant:"outline",onClick:()=>a(e.id),children:s.jsx(xt,{className:"w-3 h-3"})})]})]}),l&&s.jsx("div",{className:"mt-3 space-y-2",children:!t||t.length===0?s.jsxs("div",{className:"text-center py-2",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"No lessons in this unit"}),s.jsx(D,{size:"sm",onClick:()=>r(e.id),children:"Add Lesson"})]}):t.map(o=>s.jsxs("div",{className:"ml-6 flex items-center space-x-2",children:[s.jsx(cm,{className:"w-3 h-3 text-orange-600"}),s.jsx("span",{className:"text-sm text-gray-900",children:o.name}),s.jsxs(Y,{variant:"secondary",children:[typeof o.weight=="number"?o.weight.toFixed(1):"0.0","%"]})]},o.id))})]})},Qp=({isOpen:e,onClose:t,grade:r,onSubmit:n})=>{const[a,l]=m.useState({name:(r==null?void 0:r.name)||"",description:(r==null?void 0:r.description)||"",weight:typeof(r==null?void 0:r.weight)=="number"?r.weight:0});m.useEffect(()=>{l(r?{name:r.name,description:r.description||"",weight:typeof r.weight=="number"?r.weight:0}:{name:"",description:"",weight:0})},[r]);const i=o=>{o.preventDefault(),n(a)};return s.jsx(Ze,{isOpen:e,onClose:t,title:r?"Edit Grade":"Create Grade",children:s.jsxs("form",{onSubmit:i,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),s.jsx("input",{type:"text",value:a.name,onChange:o=>l({...a,name:o.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),s.jsx("textarea",{value:a.description,onChange:o=>l({...a,description:o.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:3})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Weight (%)"}),s.jsx("input",{type:"number",step:"0.1",min:"0",max:"100",value:a.weight,onChange:o=>l({...a,weight:parseFloat(o.target.value)||0}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(D,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),s.jsx(D,{type:"submit",children:r?"Update":"Create"})]})]})})},Kp=({isOpen:e,onClose:t,book:r,onSubmit:n})=>{const[a,l]=m.useState({name:(r==null?void 0:r.name)||"",type:(r==null?void 0:r.type)||"student",description:(r==null?void 0:r.description)||"",weight:typeof(r==null?void 0:r.weight)=="number"?r.weight:0});m.useEffect(()=>{l(r?{name:r.name,type:r.type,description:r.description||"",weight:typeof r.weight=="number"?r.weight:0}:{name:"",type:"student",description:"",weight:0})},[r]);const i=o=>{o.preventDefault(),n(a)};return s.jsx(Ze,{isOpen:e,onClose:t,title:r?"Edit Book":"Create Book",children:s.jsxs("form",{onSubmit:i,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),s.jsx("input",{type:"text",value:a.name,onChange:o=>l({...a,name:o.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Type"}),s.jsxs("select",{value:a.type,onChange:o=>l({...a,type:o.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[s.jsx("option",{value:"student",children:"Student Book"}),s.jsx("option",{value:"teacher",children:"Teacher Guide"}),s.jsx("option",{value:"practice",children:"Practice Book"}),s.jsx("option",{value:"digital",children:"Digital"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),s.jsx("textarea",{value:a.description,onChange:o=>l({...a,description:o.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:3})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Weight (%)"}),s.jsx("input",{type:"number",step:"0.1",min:"0",max:"100",value:a.weight,onChange:o=>l({...a,weight:parseFloat(o.target.value)||0}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(D,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),s.jsx(D,{type:"submit",children:r?"Update":"Create"})]})]})})},Yp=({isOpen:e,onClose:t,unit:r,onSubmit:n})=>{const[a,l]=m.useState({name:(r==null?void 0:r.name)||"",description:(r==null?void 0:r.description)||"",weight:typeof(r==null?void 0:r.weight)=="number"?r.weight:0});m.useEffect(()=>{l(r?{name:r.name,description:r.description||"",weight:typeof r.weight=="number"?r.weight:0}:{name:"",description:"",weight:0})},[r]);const i=o=>{o.preventDefault(),n(a)};return s.jsx(Ze,{isOpen:e,onClose:t,title:r?"Edit Unit":"Create Unit",children:s.jsxs("form",{onSubmit:i,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),s.jsx("input",{type:"text",value:a.name,onChange:o=>l({...a,name:o.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),s.jsx("textarea",{value:a.description,onChange:o=>l({...a,description:o.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:3})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Weight (%)"}),s.jsx("input",{type:"number",step:"0.1",min:"0",max:"100",value:a.weight,onChange:o=>l({...a,weight:parseFloat(o.target.value)||0}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(D,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),s.jsx(D,{type:"submit",children:r?"Update":"Create"})]})]})})},Xp=({isOpen:e,onClose:t,lesson:r,onSubmit:n})=>{const[a,l]=m.useState({name:(r==null?void 0:r.name)||"",description:(r==null?void 0:r.description)||"",weight:typeof(r==null?void 0:r.weight)=="number"?r.weight:0});m.useEffect(()=>{l(r?{name:r.name,description:r.description||"",weight:typeof r.weight=="number"?r.weight:0}:{name:"",description:"",weight:0})},[r]);const i=o=>{o.preventDefault(),n(a)};return s.jsx(Ze,{isOpen:e,onClose:t,title:r?"Edit Lesson":"Create Lesson",children:s.jsxs("form",{onSubmit:i,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),s.jsx("input",{type:"text",value:a.name,onChange:o=>l({...a,name:o.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),s.jsx("textarea",{value:a.description,onChange:o=>l({...a,description:o.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:3})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Weight (%)"}),s.jsx("input",{type:"number",step:"0.1",min:"0",max:"100",value:a.weight,onChange:o=>l({...a,weight:parseFloat(o.target.value)||0}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(D,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),s.jsx(D,{type:"submit",children:r?"Update":"Create"})]})]})})};function Zp({project:e,onBack:t,onUpdate:r,categories:n}){const{state:a,dispatch:l}=mr(),[i,o]=m.useState("overview"),[c,x]=m.useState(!1),[f,j]=m.useState(!1),[d,w]=m.useState([]),[N,P]=m.useState([]),[z,p]=m.useState([]),[h,v]=m.useState([]),[E,M]=m.useState([]),[u,g]=m.useState([]),[b,k]=m.useState([]),[A,ee]=m.useState([]),[O,U]=m.useState([]),[oe,de]=m.useState([]),[Te,Ue]=m.useState([]),[_,T]=m.useState(!1),[F,B]=m.useState(!1),[V,se]=m.useState(!1),[Q,S]=m.useState(e),[ie,ce]=m.useState([]),[ke,Pe]=m.useState([]),[I,G]=m.useState([]),[ae,le]=m.useState([]),[he,ve]=m.useState(null),[Ne,et]=m.useState(null),[K,q]=m.useState(!1),je=Q.progress!==void 0?{progress:Q.progress,completedWeight:Q.progress,totalWeight:100}:Fp(Q,u),Se=Q.current_stage_id?oe.find($=>$.id===Q.current_stage_id):null;m.useEffect(()=>{(async()=>{se(!0);try{const[xe,fe,Ce,y,pe,X,ge,Ae,nt,Le,Xt,js,ws,Br,cl]=await Promise.all([We.getById(e.id),We.getMembers(e.id),We.getTeams(e.id),De.getMembers(),De.getTeams(),De.getTeams(),Oe.getAll(),rs.getAll(),We.getAll(),Tt.getAll(),As.getAll(),ds.getAll(),us.getAll(),ms.getAll(),Bs.getAll()]);S(xe),w(fe),P(Ce),p(y),v(pe),M(X),g(ge.filter(dl=>dl.project_id===parseInt(e.id))),k(y),ee(Ae),U(nt),de(Le),Ue(Xt),ce(js),Pe(ws),G(Br),le(cl)}catch(xe){console.error("Failed to fetch project data:",xe)}finally{se(!1)}})()},[e.id]);const C=async($,xe="member")=>{try{await We.addMember(e.id,{user_id:$,user_type:"team",role:xe});const fe=await We.getMembers(e.id);w(fe),T(!1)}catch(fe){console.error("Failed to add member:",fe)}},re=async($,xe="member")=>{try{await We.addTeam(e.id,{team_id:$,role:xe});const[fe,Ce]=await Promise.all([We.getMembers(e.id),We.getTeams(e.id)]);w(fe),P(Ce),B(!1)}catch(fe){console.error("Failed to add team:",fe)}},me=async $=>{try{await We.removeMember(e.id,$);const xe=await We.getMembers(e.id);w(xe)}catch(xe){console.error("Failed to remove member:",xe)}},ye=async $=>{try{await We.removeTeam(e.id,$);const[xe,fe]=await Promise.all([We.getMembers(e.id),We.getTeams(e.id)]);w(xe),P(fe)}catch(xe){console.error("Failed to remove team:",xe)}},Re=async $=>{try{const xe=$.status?xs($.status):0;let fe="";if($.gradeId){const ge=ie.find(Ae=>Ae.id===parseInt($.gradeId||"0"));if(ge&&(fe=ge.name,$.bookId)){const Ae=ke.find(nt=>nt.id===parseInt($.bookId||"0"));if(Ae&&(fe+=` > ${Ae.name}`,$.unitId)){const nt=I.find(Le=>Le.id===parseInt($.unitId||"0"));if(nt&&(fe+=` > ${nt.name}`,$.lessonId)){const Le=ae.find(Xt=>Xt.id===parseInt($.lessonId||"0"));Le&&(fe+=` > ${Le.name}`)}}}}const Ce=($.skills||[]).map(ge=>{const Ae=A.find(nt=>nt.name===ge);return Ae?Ae.id:null}).filter(ge=>ge!==null),y={name:$.name||"",description:$.description||"",project_id:parseInt(e.id),category_stage_id:parseInt($.stageId||""),status:$.status||"not-started",priority:$.priority||"medium",start_date:$.startDate||new Date().toISOString().split("T")[0],end_date:$.endDate||new Date(Date.now()+7*24*60*60*1e3).toISOString().split("T")[0],estimated_hours:$.estimatedHours||8,assignees:$.assignees||[],teamAssignees:$.teamAssignees||[],skills:Ce,component_path:fe,grade_id:$.gradeId?parseInt($.gradeId):null,book_id:$.bookId?parseInt($.bookId):null,unit_id:$.unitId?parseInt($.unitId):null,lesson_id:$.lessonId?parseInt($.lessonId):null};console.log("🚀 Creating task from ProjectDetails:",y),console.log("📚 Educational hierarchy IDs being sent:",{grade_id:y.grade_id,book_id:y.book_id,unit_id:y.unit_id,lesson_id:y.lesson_id,component_path:y.component_path});const pe=await Oe.create(y),X=await Oe.getAll();g(X.filter(ge=>ge.project_id===parseInt(e.id))),console.log("✅ Task created successfully from ProjectDetails:",pe),x(!1)}catch(xe){console.error("❌ Failed to create task from ProjectDetails:",xe)}},Ye=async $=>{try{se(!0);const xe=await We.update(e.id,$),fe={...e,...xe,start_date:$.start_date||e.start_date,end_date:$.end_date||e.end_date};r&&r(fe),l({type:"UPDATE_PROJECT",payload:fe}),j(!1),console.log("✅ Project updated successfully:",xe)}catch(xe){console.error("❌ Failed to update project:",xe)}finally{se(!1)}},ue=[{key:"overview",label:"Overview",icon:Ts},{key:"educational-hierarchy",label:"Educational Hierarchy",icon:Tn},{key:"tasks",label:"Tasks",icon:Et},{key:"timeline",label:"Timeline",icon:gt},{key:"team",label:"Team",icon:He}],Ve=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[s.jsx(Z,{children:s.jsx(J,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 rounded-lg bg-blue-50",children:s.jsx(Ts,{className:"w-6 h-6 text-blue-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Progress"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[je.progress,"%"]})]})]})})}),s.jsx(Z,{children:s.jsx(J,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 rounded-lg bg-green-50",children:s.jsx(Et,{className:"w-6 h-6 text-green-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Tasks"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:u.length})]})]})})}),s.jsx(Z,{children:s.jsx(J,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 rounded-lg bg-purple-50",children:s.jsx(He,{className:"w-6 h-6 text-purple-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Team"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d.length})]})]})})}),s.jsx(Z,{children:s.jsx(J,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 rounded-lg bg-orange-50",children:s.jsx(Or,{className:"w-6 h-6 text-orange-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Days Left"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Math.ceil((new Date(e.end_date||e.endDate||"").getTime()-new Date().getTime())/(1e3*60*60*24))})]})]})})})]}),s.jsxs(Z,{children:[s.jsx(Ie,{children:s.jsxs(Me,{className:"flex items-center",children:[s.jsx(ss,{className:"w-5 h-5 mr-2 text-blue-600"}),"Current Stage"]})}),s.jsx(J,{children:Se?s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-900",children:Se.name}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:Se.description}),s.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx(Ts,{className:"w-4 h-4 mr-1"}),"Order: ",Se.order_index||Se.template_order||"N/A"]}),Se.is_active!==void 0&&s.jsx(Y,{variant:Se.is_active?"success":"default",size:"sm",children:Se.is_active?"Active":"Inactive"})]})]}),s.jsx("div",{className:"text-right",children:s.jsx(Y,{variant:"primary",children:"Current"})})]}):s.jsxs("div",{className:"text-center py-4",children:[s.jsx(ss,{className:"w-8 h-8 text-gray-300 mx-auto mb-2"}),s.jsx("p",{className:"text-gray-500",children:"No current stage set"}),s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Edit the project to select a stage"})]})})]}),s.jsxs(Z,{children:[s.jsx(Ie,{children:s.jsx(Me,{children:"Project Description"})}),s.jsxs(J,{children:[s.jsx("p",{className:"text-gray-700",children:e.description}),s.jsxs("div",{className:"mt-4 flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx(gt,{className:"w-4 h-4 mr-1"}),"Start: ",new Date(e.start_date||e.startDate||"").toLocaleDateString()]}),s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx(gt,{className:"w-4 h-4 mr-1"}),"End: ",new Date(e.end_date||e.endDate||"").toLocaleDateString()]}),s.jsx(Y,{variant:e.status==="active"?"primary":e.status==="completed"?"success":e.status==="on-hold"?"warning":"default",children:e.status})]})]})]})]}),L=()=>{var Ce;const $=[];$.push({id:"project-start",type:"milestone",title:"Project Start",date:new Date(e.start_date||e.startDate||""),status:"completed",description:"Project officially started"}),(Ce=e.stages)==null||Ce.forEach(y=>{const pe=zi(y.id,u);$.push({id:y.id,type:"stage",title:y.name,date:new Date(y.startDate),endDate:new Date(y.endDate),status:y.status,progress:pe.progress,description:y.description,weight:y.weight})}),u.filter(y=>y.priority==="high"||y.priority==="urgent").forEach(y=>{$.push({id:y.id,type:"task",title:y.name,date:new Date(y.startDate),endDate:new Date(y.endDate),status:y.status,progress:y.progress,description:y.description,priority:y.priority,assignees:y.assignees})}),$.push({id:"project-end",type:"milestone",title:"Project Completion",date:new Date(e.end_date||e.endDate||""),status:e.status==="completed"?"completed":"pending",description:"Planned project completion date"}),$.sort((y,pe)=>y.date.getTime()-pe.date.getTime());const xe=(y,pe)=>{if(pe==="milestone")return y==="completed"?"bg-green-500":"bg-gray-400";switch(y){case"completed":return"bg-green-500";case"in-progress":return"bg-blue-500";case"under-review":return"bg-yellow-500";case"not-started":return"bg-gray-400";case"blocked":return"bg-red-500";default:return"bg-gray-400"}},fe=y=>{const pe=y.endDate||y.date;if(!pe)return!1;const X=new Date;X.setHours(0,0,0,0);const ge=new Date(pe);return ge.setHours(0,0,0,0),ge<X&&y.status!=="completed"&&y.type!=="milestone"};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Project Timeline"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Track project milestones, stages, and key tasks"})]}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-2"}),s.jsx("span",{children:"Completed"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full mr-2"}),s.jsx("span",{children:"In Progress"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-3 h-3 bg-gray-400 rounded-full mr-2"}),s.jsx("span",{children:"Not Started"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full mr-2"}),s.jsx("span",{children:"Overdue"})]})]})})]}),s.jsx(Z,{children:s.jsx(J,{className:"p-6",children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute left-6 top-0 bottom-0 w-0.5 bg-gray-200"}),s.jsx("div",{className:"space-y-8",children:$.map((y,pe)=>s.jsxs("div",{className:"relative flex items-start",children:[s.jsxs("div",{className:`relative z-10 w-12 h-12 rounded-full ${xe(y.status,y.type)} flex items-center justify-center`,children:[y.type==="milestone"&&s.jsx(ss,{className:"w-5 h-5 text-white"}),y.type==="stage"&&s.jsx(Ts,{className:"w-5 h-5 text-white"}),y.type==="task"&&s.jsx(Et,{className:"w-5 h-5 text-white"})]}),s.jsx("div",{className:"ml-6 flex-1",children:s.jsx("div",{className:`p-4 rounded-lg border-2 ${fe(y)?"border-red-200 bg-red-50":"border-gray-200 bg-white"}`,children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("h4",{className:"font-semibold text-gray-900",children:y.title}),y.type==="stage"&&y.weight&&s.jsxs(Y,{variant:"secondary",size:"sm",children:[y.weight,"% weight"]}),y.priority&&s.jsx(Y,{variant:y.priority==="urgent"?"danger":y.priority==="high"?"warning":"primary",size:"sm",children:y.priority}),fe(y)&&s.jsxs(Y,{variant:"danger",size:"sm",children:[s.jsx(Ct,{className:"w-3 h-3 mr-1"}),"Overdue"]})]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:y.description}),s.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-500",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(gt,{className:"w-4 h-4 mr-1"}),y.date.toLocaleDateString(),y.endDate&&` - ${y.endDate.toLocaleDateString()}`]}),y.assignees&&y.assignees.length>0&&s.jsxs("div",{className:"flex items-center",children:[s.jsx(He,{className:"w-4 h-4 mr-1"}),y.assignees.length," assigned"]})]}),(y.type==="stage"||y.type==="task")&&s.jsxs("div",{className:"mt-3",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[s.jsx("span",{className:"text-gray-600",children:"Progress"}),s.jsxs("span",{className:"font-medium",children:[y.progress,"%"]})]}),s.jsx(yt,{value:y.progress,showLabel:!1})]})]}),s.jsx(Y,{variant:y.status==="completed"?"success":y.status==="in-progress"?"primary":y.status==="under-review"?"warning":y.status==="blocked"?"danger":"default",children:y.status.replace("-"," ")})]})})})]},y.id))})]})})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx(Z,{children:s.jsx(J,{className:"p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:$.filter(y=>y.status==="completed").length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Completed Items"})]})})}),s.jsx(Z,{children:s.jsx(J,{className:"p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:$.filter(y=>y.status==="in-progress").length}),s.jsx("div",{className:"text-sm text-gray-600",children:"In Progress"})]})})}),s.jsx(Z,{children:s.jsx(J,{className:"p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-red-600",children:$.filter(y=>fe(y)).length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Overdue Items"})]})})})]})]})},W=()=>s.jsx("div",{className:"space-y-6",children:e.stages&&e.stages.length>0?e.stages.map($=>{const xe=u.filter(Ce=>Ce.stageId===$.id),fe=zi($.id,u);return s.jsxs(Z,{children:[s.jsx(Ie,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(Me,{className:"flex items-center",children:["Stage ",$.order,": ",$.name,s.jsxs(Y,{variant:"secondary",size:"sm",className:"ml-2",children:[$.weight,"% weight"]})]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:$.description})]}),s.jsx(Y,{variant:$.status==="completed"?"success":$.status==="in-progress"?"primary":$.status==="under-review"?"warning":"default",children:$.status.replace("-"," ")})]})}),s.jsxs(J,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx(gt,{className:"w-4 h-4 mr-2"}),"Start: ",new Date($.startDate).toLocaleDateString()]}),s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx(gt,{className:"w-4 h-4 mr-2"}),"End: ",new Date($.endDate).toLocaleDateString()]}),s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx(Et,{className:"w-4 h-4 mr-2"}),xe.length," tasks"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Progress"}),s.jsxs("span",{className:"font-medium",children:[fe.progress,"%"]})]}),s.jsx(yt,{value:fe.progress})]}),xe.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h5",{className:"font-medium text-gray-900",children:"Recent Tasks:"}),xe.slice(0,3).map(Ce=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[s.jsx("span",{className:"text-sm text-gray-700",children:Ce.name}),s.jsx(Y,{variant:Ce.status==="completed"?"success":Ce.status==="in-progress"?"primary":Ce.status==="under-review"?"warning":Ce.status==="blocked"?"danger":"default",size:"sm",children:Ce.status.replace("-"," ")})]},Ce.id)),xe.length>3&&s.jsxs("p",{className:"text-xs text-gray-500",children:["+",xe.length-3," more tasks"]})]})]})]},$.id)}):s.jsx(Z,{children:s.jsxs(J,{className:"p-8 text-center",children:[s.jsx(ss,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Stages Defined"}),s.jsx("p",{className:"text-gray-600",children:"This project doesn't have any stages configured yet."})]})})}),_e=()=>{if(he)return s.jsx(ym,{taskId:he,onBack:()=>ve(null)});const $=X=>{et(X),q(!0)},xe=async X=>{try{if(Ne){let ge="";if(X.gradeId){const Le=ie.find(Xt=>Xt.id===parseInt(X.gradeId||"0"));if(Le&&(ge=Le.name,X.bookId)){const Xt=ke.find(js=>js.id===parseInt(X.bookId||"0"));if(Xt&&(ge+=` > ${Xt.name}`,X.unitId)){const js=I.find(ws=>ws.id===parseInt(X.unitId||"0"));if(js&&(ge+=` > ${js.name}`,X.lessonId)){const ws=ae.find(Br=>Br.id===parseInt(X.lessonId||"0"));ws&&(ge+=` > ${ws.name}`)}}}}const Ae={name:X.name,description:X.description,project_id:parseInt(X.projectId||"1"),category_stage_id:parseInt(X.stageId||""),status:X.status,priority:X.priority,start_date:X.startDate,end_date:X.endDate,estimated_hours:parseInt(String(X.estimatedHours||0)),actual_hours:parseInt(String(X.actualHours||0)),assignees:X.assignees||[],skills:X.skills,grade_id:X.gradeId?parseInt(X.gradeId):null,book_id:X.bookId?parseInt(X.bookId):null,unit_id:X.unitId?parseInt(X.unitId):null,lesson_id:X.lessonId?parseInt(X.lessonId):null,component_path:ge};console.log("🔄 Updating task with hierarchy:",{taskId:Ne.id,grade_id:Ae.grade_id,book_id:Ae.book_id,unit_id:Ae.unit_id,lesson_id:Ae.lesson_id,component_path:Ae.component_path}),await Oe.update(Ne.id,Ae);const nt=await Oe.getAll();g(nt.filter(Le=>Le.project_id===parseInt(e.id)))}q(!1),et(null)}catch(ge){console.error("❌ Failed to update task:",ge)}},fe=async X=>{if(confirm(`Are you sure you want to delete the task "${X.name}"? This action cannot be undone.`))try{await Oe.delete(X.id);const ge=await Oe.getAll();g(ge.filter(Ae=>Ae.project_id===parseInt(e.id))),console.log("✅ Task deleted successfully:",X.name)}catch(ge){console.error("❌ Delete task error:",ge)}},Ce=X=>{switch(X){case"not-started":return"default";case"in-progress":return"primary";case"under-review":return"warning";case"completed":return"success";case"blocked":return"danger";default:return"default"}},y=X=>{switch(X){case"low":return"default";case"medium":return"primary";case"high":return"warning";case"urgent":return"danger";default:return"default"}},pe=X=>{const ge=X.end_date||X.endDate;if(!ge)return!1;const Ae=new Date;Ae.setHours(0,0,0,0);const nt=new Date(ge);return nt.setHours(0,0,0,0),nt<Ae&&X.status!=="completed"};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Project Tasks"}),s.jsx(D,{icon:s.jsx(lt,{className:"w-4 h-4"}),onClick:()=>x(!0),children:"Add Task"})]}),u.length>0?s.jsx(Z,{children:s.jsx(J,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Task Name"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stage"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Priority"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assignees"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Due Date"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Progress"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(X=>{const ge=b.filter(Le=>X.assignees&&X.assignees.includes(Le.id)),Ae=pe(X),nt=oe.find(Le=>Le.id===X.category_stage_id||X.stage_id);return s.jsxs("tr",{className:`hover:bg-gray-50 ${Ae?"bg-red-50":""}`,children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsxs("div",{className:"text-sm font-medium text-gray-900 flex items-center",children:[X.name,Ae&&s.jsx(Ct,{className:"w-4 h-4 text-red-500 ml-2"})]}),s.jsxs("div",{className:"text-sm text-gray-500",children:[X.component_path&&s.jsxs("div",{className:"text-xs text-purple-600 mt-1 bg-purple-100 p-1 rounded-md inline-block",children:["📚 ",X.component_path]}),X.description&&s.jsx("div",{className:"mt-1",children:X.description})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm text-gray-900",children:nt?s.jsx("div",{className:"font-medium text-blue-600",children:nt.name}):s.jsx("span",{className:"text-gray-400",children:"Unknown Stage"})})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx(Y,{variant:Ce(X.status),children:X.status.replace("-"," ")})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx(Y,{variant:y(X.priority),children:X.priority})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"space-y-1",children:[ge.length>0&&s.jsxs("div",{className:"flex flex-wrap gap-1",children:[ge.slice(0,3).map(Le=>s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:Le.name},Le.id)),ge.length>3&&s.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600",children:["+",ge.length-3," more"]})]}),ge.length===0&&s.jsx("span",{className:"text-xs text-gray-400",children:"No assignees"})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(gt,{className:"w-4 h-4 mr-1 text-gray-400"}),X.end_date||X.endDate?new Date(X.end_date||X.endDate||"").toLocaleDateString():"No due date"]})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2 mr-2",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${xs(X.status)}%`}})}),s.jsxs("span",{className:"text-sm text-gray-600",children:[xs(X.status),"%"]})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(D,{variant:"ghost",size:"sm",onClick:Le=>{Le.stopPropagation(),ve(X.id)},title:"View Details",children:s.jsx(Ks,{className:"w-4 h-4"})}),s.jsx(D,{variant:"ghost",size:"sm",onClick:Le=>{Le.stopPropagation(),$(X)},title:"Edit Task",children:s.jsx(Es,{className:"w-4 h-4"})}),s.jsx(D,{variant:"ghost",size:"sm",onClick:Le=>{Le.stopPropagation(),fe(X)},title:"Delete Task",className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:s.jsx(xt,{className:"w-4 h-4"})})]})]})]},X.id)})})]})})})}):s.jsx(Z,{children:s.jsxs(J,{className:"p-8 text-center",children:[s.jsx(Et,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Tasks Yet"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Start by creating your first task for this project."}),s.jsx(D,{icon:s.jsx(lt,{className:"w-4 h-4"}),onClick:()=>x(!0),children:"Create First Task"})]})}),s.jsx(Wa,{isOpen:K,onClose:()=>{q(!1),et(null)},onSubmit:xe,users:b,teams:E,skills:A,projects:O,stages:oe,grades:ie,books:ke,units:I,lessons:ae,editingTask:Ne})]})},tt=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Project Team"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs(D,{onClick:()=>B(!0),className:"flex items-center space-x-2",variant:"outline",children:[s.jsx(He,{className:"w-4 h-4"}),s.jsx("span",{children:"Add Team"})]}),s.jsxs(D,{onClick:()=>T(!0),className:"flex items-center space-x-2",children:[s.jsx(Va,{className:"w-4 h-4"}),s.jsx("span",{children:"Add Member"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"text-md font-medium text-gray-900",children:"Assigned Teams"}),N.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:N.map($=>s.jsx(Z,{children:s.jsxs(J,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-lg flex items-center justify-center text-white",children:s.jsx(He,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h5",{className:"font-medium text-gray-900",children:$.team_name}),s.jsx(Y,{variant:"secondary",className:"text-xs",children:$.role})]})]}),s.jsx(D,{variant:"ghost",size:"sm",onClick:()=>ye($.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:s.jsx(Li,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Members"}),s.jsxs("span",{className:"font-medium",children:[$.member_count," / ",$.max_capacity]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${Math.min($.member_count/$.max_capacity*100,100)}%`}})})]})]})},$.id))}):s.jsxs("div",{className:"text-center py-6 bg-gray-50 rounded-lg",children:[s.jsx(He,{className:"w-8 h-8 text-gray-300 mx-auto mb-2"}),s.jsx("p",{className:"text-gray-500",children:"No teams assigned to this project"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"text-md font-medium text-gray-900",children:"Individual Members"}),V?s.jsx("div",{className:"text-center py-8",children:s.jsx("div",{className:"text-gray-500",children:"Loading team members..."})}):d.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map($=>{var y,pe,X;const xe=u.filter(ge=>ge.assignees&&ge.assignees.includes($.user_id||$.team_member_id)),fe=xe.filter(ge=>ge.status==="completed"),Ce=xe.length>0?Math.round(fe.length/xe.length*100):0;return s.jsx(Z,{children:s.jsxs(J,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center text-white font-semibold text-lg",children:((y=$.name)==null?void 0:y.charAt(0))||"U"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:$.name||"Unknown User"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Y,{variant:"secondary",children:$.role||"member"}),$.skills&&s.jsx("p",{className:"text-sm text-gray-600",children:((X=(pe=$.skills).join)==null?void 0:X.call(pe,", "))||$.skills})]})]})]}),s.jsx(D,{variant:"ghost",size:"sm",onClick:()=>me($.project_member_id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:s.jsx(Li,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Tasks Assigned"}),s.jsx("span",{className:"font-medium",children:xe.length})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Completed"}),s.jsx("span",{className:"font-medium text-green-600",children:fe.length})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Completion Rate"}),s.jsxs("span",{className:"font-medium",children:[Ce,"%"]})]}),s.jsx(yt,{value:Ce})]})]})]})},$.project_member_id)})}):s.jsx(Z,{children:s.jsxs(J,{className:"p-8 text-center",children:[s.jsx(He,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Team Members"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"No team members have been assigned to this project yet."}),s.jsxs(D,{onClick:()=>T(!0),className:"flex items-center space-x-2",children:[s.jsx(Va,{className:"w-4 h-4"}),s.jsx("span",{children:"Add First Member"})]})]})})]})]});return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs(D,{variant:"ghost",onClick:t,children:[s.jsx(Io,{className:"w-4 h-4 mr-2"}),"Back to Projects"]}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:Q.name}),s.jsx("p",{className:"text-gray-600",children:Q.category})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Y,{variant:Q.status==="active"?"primary":Q.status==="completed"?"success":Q.status==="on-hold"?"warning":"default",children:Q.status}),s.jsxs(D,{variant:"outline",size:"sm",onClick:()=>j(!0),children:[s.jsx(Es,{className:"w-4 h-4 mr-2"}),"Edit Project"]})]})]}),s.jsx(Z,{children:s.jsx(J,{className:"p-6",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Overall Progress"}),s.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[je.progress,"%"]})]}),s.jsx(yt,{value:je.progress})]})})}),s.jsx("div",{className:"border-b border-gray-200",children:s.jsx("nav",{className:"-mb-px flex space-x-8",children:ue.map($=>s.jsxs("button",{onClick:()=>o($.key),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${i===$.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[s.jsx($.icon,{className:"w-4 h-4"}),s.jsx("span",{children:$.label})]},$.key))})}),s.jsxs("div",{children:[i==="overview"&&Ve(),i==="stages"&&W(),i==="educational-hierarchy"&&s.jsx(Vp,{projectId:Number(Q.id)}),i==="tasks"&&_e(),i==="timeline"&&L(),i==="team"&&tt()]}),s.jsx(Wa,{isOpen:c,onClose:()=>x(!1),onSubmit:Re,users:b,teams:E,skills:A,projects:O,stages:oe,grades:ie,books:ke,units:I,lessons:ae}),s.jsx(Bp,{isOpen:f,onClose:()=>j(!1),onSubmit:Ye,project:Q,categories:n||Te}),s.jsx(ef,{isOpen:_,onClose:()=>T(!1),onSubmit:C,availableMembers:z,projectMembers:d}),s.jsx(Jp,{isOpen:F,onClose:()=>B(!1),onSubmit:re,availableTeams:h,projectTeams:N})]})}function Jp({isOpen:e,onClose:t,onSubmit:r,availableTeams:n,projectTeams:a}){const[l,i]=m.useState(null),[o,c]=m.useState("member"),x=a.map(d=>d.team_id),f=n.filter(d=>!x.includes(d.id)),j=d=>{d.preventDefault(),l&&(r(l,o),i(null),c("member"))};return s.jsx(Ze,{isOpen:e,onClose:t,title:"Add Team to Project",children:s.jsxs("form",{onSubmit:j,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Team"}),s.jsxs("select",{value:l||"",onChange:d=>i(Number(d.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[s.jsx("option",{value:"",children:"Choose a team..."}),f.map(d=>s.jsxs("option",{value:d.id,children:[d.name," - ",d.member_count||0," members"]},d.id))]}),f.length===0&&s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"All teams are already assigned to this project."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),s.jsxs("select",{value:o,onChange:d=>c(d.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"member",children:"Member"}),s.jsx("option",{value:"admin",children:"Admin"}),s.jsx("option",{value:"owner",children:"Owner"}),s.jsx("option",{value:"viewer",children:"Viewer"})]})]}),s.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:s.jsxs("p",{className:"text-sm text-blue-800",children:[s.jsx("strong",{children:"Note:"})," When you assign a team to this project, all team members will automatically be added as individual project members."]})}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx(D,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),s.jsx(D,{type:"submit",disabled:!l||f.length===0,children:"Add Team"})]})]})})}function ef({isOpen:e,onClose:t,onSubmit:r,availableMembers:n,projectMembers:a}){const[l,i]=m.useState(null),[o,c]=m.useState("member"),x=a.map(d=>d.user_id||d.team_member_id),f=n.filter(d=>!x.includes(d.id)),j=d=>{d.preventDefault(),l&&(r(l,o),i(null),c("member"))};return s.jsx(Ze,{isOpen:e,onClose:t,title:"Add Team Member",children:s.jsxs("form",{onSubmit:j,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Team Member"}),s.jsxs("select",{value:l||"",onChange:d=>i(Number(d.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[s.jsx("option",{value:"",children:"Choose a team member..."}),f.map(d=>s.jsxs("option",{value:d.id,children:[d.name," (",d.email,")"]},d.id))]}),f.length===0&&s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"All team members are already assigned to this project."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),s.jsxs("select",{value:o,onChange:d=>c(d.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"member",children:"Member"}),s.jsx("option",{value:"admin",children:"Admin"}),s.jsx("option",{value:"owner",children:"Owner"}),s.jsx("option",{value:"viewer",children:"Viewer"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx(D,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),s.jsx(D,{type:"submit",disabled:!l||f.length===0,children:"Add Member"})]})]})})}function tf(){const[e,t]=m.useState("grid"),[r,n]=m.useState(!1),[a,l]=m.useState(null),[i,o]=m.useState("all"),[c,x]=m.useState("all"),[f,j]=m.useState([]),[d,w]=m.useState([]),[N,P]=m.useState(!0),[z,p]=m.useState(null);m.useEffect(()=>{(async()=>{try{P(!0),p(null);const[g,b]=await Promise.all([We.getAll(),As.getAll()]);j(g),w(b)}catch(g){console.error("ProjectManager fetch error:",g),p(g.message||"Failed to load projects data")}finally{P(!1)}})()},[]);const h=f.filter(u=>!(i!=="all"&&u.category!==i||c!=="all"&&u.status!==c)),v=async u=>{var g;try{p(null);const b={name:u.name||"",description:u.description||"",category_id:u.category_id||((g=d[0])==null?void 0:g.id),current_stage_id:u.currentStageId||null,start_date:u.start_date||new Date().toISOString().split("T")[0],end_date:u.end_date||new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0],status:"planning",progress:0};console.log("🚀 Creating project:",b);const k=await We.create(b);j(A=>[...A,k]),n(!1),console.log("✅ Project created successfully:",k)}catch(b){console.error("❌ Create project error:",b),p(b.message||"Failed to create project")}},E=async u=>{try{if(p(null),!confirm("Are you sure you want to delete this project? This action cannot be undone."))return;console.log("🗑️ Deleting project:",u),await We.delete(u),j(g=>g.filter(b=>b.id!==u)),(a==null?void 0:a.id)===u&&l(null),console.log("✅ Project deleted successfully")}catch(g){console.error("❌ Delete project error:",g),p(g.message||"Failed to delete project")}},M=u=>{switch(u){case"active":return"primary";case"completed":return"success";case"on-hold":return"warning";case"cancelled":return"danger";default:return"default"}};return a?s.jsx(Zp,{project:a,onBack:()=>l(null),onUpdate:u=>{l(u),j(g=>g.map(b=>b.id===u.id?u:b))},categories:d}):N?s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Projects"}),s.jsx("p",{className:"text-gray-600",children:"Manage and track your project portfolio"})]}),s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Rn,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-blue-600"}),s.jsx("p",{className:"text-gray-600",children:"Loading projects..."})]})})]}):z?s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Projects"}),s.jsx("p",{className:"text-gray-600",children:"Manage and track your project portfolio"})]}),s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Ct,{className:"w-8 h-8 mx-auto mb-4 text-red-600"}),s.jsx("p",{className:"text-red-600 mb-4",children:z}),s.jsx(D,{onClick:()=>window.location.reload(),children:"Try Again"})]})})]}):s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Projects"}),s.jsx("p",{className:"text-gray-600",children:"Manage and track your project portfolio"})]}),s.jsx(D,{icon:s.jsx(lt,{className:"w-4 h-4"}),onClick:()=>n(!0),children:"New Project"})]}),s.jsxs("div",{className:"flex items-center justify-between bg-white p-4 rounded-lg border border-gray-200",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(lp,{className:"w-4 h-4 text-gray-500"}),s.jsxs("select",{value:i,onChange:u=>o(u.target.value),className:"border border-gray-300 rounded px-3 py-1 text-sm",children:[s.jsx("option",{value:"all",children:"All Categories"}),d.map(u=>s.jsx("option",{value:u.name,children:u.name},u.id))]})]}),s.jsxs("select",{value:c,onChange:u=>x(u.target.value),className:"border border-gray-300 rounded px-3 py-1 text-sm",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"planning",children:"Planning"}),s.jsx("option",{value:"active",children:"Active"}),s.jsx("option",{value:"on-hold",children:"On Hold"}),s.jsx("option",{value:"completed",children:"Completed"}),s.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(D,{variant:e==="grid"?"primary":"ghost",size:"sm",onClick:()=>t("grid"),children:s.jsx(op,{className:"w-4 h-4"})}),s.jsx(D,{variant:e==="list"?"primary":"ghost",size:"sm",onClick:()=>t("list"),children:s.jsx(mp,{className:"w-4 h-4"})})]})]}),e==="grid"?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map(u=>s.jsxs(Z,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>l(u),children:[s.jsx(Ie,{className:"pb-3",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx(Me,{className:"text-lg",children:u.name}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:u.category})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(D,{variant:"ghost",size:"sm",onClick:g=>{g.stopPropagation(),l(u)},title:"Edit Project",children:s.jsx(Wc,{className:"w-4 h-4"})}),s.jsx(D,{variant:"ghost",size:"sm",onClick:g=>{g.stopPropagation(),E(u.id)},title:"Delete Project",className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:s.jsx(xt,{className:"w-4 h-4"})})]})]})}),s.jsxs(J,{className:"space-y-4",children:[s.jsx("p",{className:"text-sm text-gray-700 line-clamp-2",children:u.description}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Progress"}),s.jsxs("span",{className:"font-medium",children:[u.progress,"%"]})]}),s.jsx(yt,{value:u.progress})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Y,{variant:M(u.status),children:u.status}),s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx(He,{className:"w-4 h-4 mr-1"}),u.userCount||0]})]}),s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx(gt,{className:"w-4 h-4 mr-2"}),u.end_date||u.endDate?new Date(u.end_date||u.endDate||"").toLocaleDateString():"No due date"]})]})]},u.id))}):s.jsx(Z,{children:s.jsx(J,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Project Name"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Progress"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Team"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Due Date"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map(u=>s.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>l(u),children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:u.name}),s.jsx("div",{className:"text-sm text-gray-500",children:u.description})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:u.category}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx(Y,{variant:M(u.status),children:u.status})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"w-24",children:s.jsx(yt,{value:u.progress,showLabel:!1})}),s.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[u.progress,"%"]})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(He,{className:"w-4 h-4 mr-1 text-gray-400"}),u.userCount||0]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:u.end_date||u.endDate?new Date(u.end_date||u.endDate||"").toLocaleDateString():"No due date"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:s.jsxs("div",{className:"flex items-center justify-end space-x-1",children:[s.jsx(D,{variant:"ghost",size:"sm",onClick:g=>{g.stopPropagation(),l(u)},title:"Edit Project",children:s.jsx(Wc,{className:"w-4 h-4"})}),s.jsx(D,{variant:"ghost",size:"sm",onClick:g=>{g.stopPropagation(),E(u.id)},title:"Delete Project",className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:s.jsx(xt,{className:"w-4 h-4"})})]})})]},u.id))})]})})})}),s.jsx(sf,{isOpen:r,onClose:()=>n(!1),onSubmit:v,categories:d})]})}function sf({isOpen:e,onClose:t,onSubmit:r,categories:n}){const[a,l]=m.useState({name:"",description:"",category_id:null,current_stage_id:null,start_date:new Date().toISOString().split("T")[0],end_date:new Date(Date.now()+2592e6).toISOString().split("T")[0]}),[i,o]=m.useState([]),[c,x]=m.useState(!1),f=async d=>{if(l({...a,category_id:d,current_stage_id:null}),d){x(!0);try{const w=await Tt.getByCategory(d);o(w)}catch(w){console.error("Failed to load stages for category:",w),o([])}finally{x(!1)}}else o([])},j=d=>{d.preventDefault(),r({...a,start_date:a.start_date,end_date:a.end_date,currentStageId:a.current_stage_id||void 0}),l({name:"",description:"",category_id:null,current_stage_id:null,start_date:new Date().toISOString().split("T")[0],end_date:new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0]}),o([])};return s.jsx(Ze,{isOpen:e,onClose:t,title:"Create New Project",size:"lg",children:s.jsxs("form",{onSubmit:j,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Name"}),s.jsx("input",{type:"text",required:!0,value:a.name,onChange:d=>l({...a,name:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter project name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),s.jsx("textarea",{value:a.description,onChange:d=>l({...a,description:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Project description"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),s.jsxs("select",{value:a.category_id||"",onChange:d=>f(d.target.value?parseInt(d.target.value):null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Select a category"}),n&&n.length>0?n.map(d=>s.jsx("option",{value:d.id,children:d.name},d.id)):s.jsx("option",{value:"",disabled:!0,children:"No categories available"})]})]}),a.category_id&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Stage"}),c?s.jsxs("div",{className:"flex items-center justify-center py-4",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),s.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Loading stages..."})]}):i.length>0?s.jsxs("select",{value:a.current_stage_id||"",onChange:d=>l({...a,current_stage_id:d.target.value?parseInt(d.target.value):null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Select a stage"}),i.map(d=>s.jsxs("option",{value:d.id,children:[d.name," - ",d.description]},d.id))]}):s.jsx("div",{className:"text-sm text-gray-500 py-2",children:"No stages available for this category."})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),s.jsx("input",{type:"date",value:a.start_date,onChange:d=>l({...a,start_date:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),s.jsx("input",{type:"date",value:a.end_date,onChange:d=>l({...a,end_date:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx(D,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),s.jsx(D,{type:"submit",children:"Create Project"})]})]})})}function rf(){var me,ye,Re,Ye,ue,Ve;const{dispatch:e}=mr(),[t,r]=m.useState("members"),[n,a]=m.useState(!1),[l,i]=m.useState(null),[o,c]=m.useState([]),[x,f]=m.useState([]),[j,d]=m.useState(""),[w,N]=m.useState(!1),[P,z]=m.useState(null),[p,h]=m.useState([]),[v,E]=m.useState([]),[M,u]=m.useState(!1),[g,b]=m.useState(null),[k,A]=m.useState(null),[ee,O]=m.useState(!1),[U,oe]=m.useState(!1),[de,Te]=m.useState([]),[Ue,_]=m.useState(!1),[T,F]=m.useState(null),[B,V]=m.useState({name:"",email:"",passcode:"",skills:[],team_id:null}),[se,Q]=m.useState({name:"",description:"",functional_unit_id:null,team_lead_id:null,team_lead_type:"team",max_capacity:10,members:[]}),[S,ie]=m.useState([]);m.useEffect(()=>{ce()},[t]),m.useEffect(()=>{(async()=>{try{const W=await rs.getAll();console.log("🔍 Raw skills data:",W);let _e=[];Array.isArray(W)&&(_e=W),console.log("🔍 Skills array:",_e);const tt=_e.map($=>$.name||$);ie(tt),console.log("✅ Skills fetched:",tt),console.log("✅ Skills array length:",tt.length)}catch(W){console.error("Error fetching skills:",W)}})()},[]);const ce=async()=>{try{if(a(!0),i(null),t==="members"){const[L,W]=await Promise.all([De.getMembers(),Oe.getAll()]);console.log("✅ Team members fetched:",L),console.log("✅ Tasks fetched:",W);const _e=await Promise.all((L||[]).map(async tt=>{const $=W.filter(fe=>fe.assignees&&fe.assignees.includes(tt.id));let xe=null;try{const fe=await Zs.getSummary(tt.id);fe&&fe.summary&&(xe={red:0,orange:0,yellow:0,green:0},fe.summary.forEach(Ce=>{Ce.type&&Ce.count&&(xe[Ce.type]=Ce.count)}))}catch(fe){console.warn(`Failed to fetch performance flags for member ${tt.id}:`,fe)}return{...tt,task_count:$.length,performance_flags_summary:xe}}));c(_e),f(_e)}else{const L=await De.getTeams();console.log("✅ Teams fetched:",L),h(L||[]),E(L||[])}}catch(L){console.error("❌ Fetch team data error:",L),i("Failed to load team data")}finally{a(!1)}};m.useEffect(()=>{(async()=>{try{const W=await De.getTeams();h(W||[]),console.log("✅ Teams for dropdown fetched:",W)}catch(W){console.error("Error fetching teams for dropdown:",W)}})()},[]),m.useEffect(()=>{if(t==="members"){const L=o.filter(W=>W.name.toLowerCase().includes(j.toLowerCase())||W.email.toLowerCase().includes(j.toLowerCase())||W.skills&&W.skills.some(_e=>_e.toLowerCase().includes(j.toLowerCase())));f(L)}else{const L=p.filter(W=>W.name.toLowerCase().includes(j.toLowerCase())||W.description&&W.description.toLowerCase().includes(j.toLowerCase())||W.skills&&W.skills.some(_e=>_e.toLowerCase().includes(j.toLowerCase())));E(L)}},[j,o,p,t]);const ke=async L=>{if(L.preventDefault(),!B.passcode||B.passcode.trim()===""){i("Passcode is required for new team members");return}try{const W=await De.createMember(B);c([...o,W]),N(!1),ae()}catch(W){console.error("Error creating team member:",W),i("Failed to create team member")}},Pe=async L=>{if(L.preventDefault(),!!P)try{const W={...B};(!W.passcode||W.passcode.trim()==="")&&delete W.passcode;const _e=await De.updateMember(P.id.toString(),W);c(o.map(tt=>tt.id===P.id?_e:tt)),N(!1),z(null),ae()}catch(W){console.error("Error updating team member:",W),i("Failed to update team member")}},I=async L=>{if(confirm("Are you sure you want to delete this team member?"))try{await De.deleteMember(L.toString()),c(o.filter(W=>W.id!==L))}catch(W){console.error("Error deleting team member:",W),i("Failed to delete team member")}},G=L=>{e({type:"SET_SELECTED_VIEW",payload:"tasks"}),e({type:"SET_FILTERS",payload:{teamMembers:[L.id.toString()]}})},ae=()=>{V({name:"",email:"",passcode:"",skills:[],team_id:null})},le=async L=>{L.preventDefault();try{const W=await De.createTeam(se);h([...p,W]),u(!1),Ne()}catch(W){console.error("Error creating team:",W),i("Failed to create team")}},he=async L=>{if(L.preventDefault(),!!g)try{const W=await De.updateTeam(g.id.toString(),se);h(p.map(_e=>_e.id===g.id?W:_e)),u(!1),b(null),Ne()}catch(W){console.error("Error updating team:",W),i("Failed to update team")}},ve=async L=>{if(confirm("Are you sure you want to delete this team?"))try{await De.deleteTeam(L.toString()),h(p.filter(W=>W.id!==L))}catch(W){console.error("Error deleting team:",W),i("Failed to delete team")}},Ne=()=>{Q({name:"",description:"",functional_unit_id:null,team_lead_id:null,team_lead_type:"team",max_capacity:10,members:[]})},et=L=>{z(L),V({name:L.name,email:L.email,passcode:"",skills:L.skills,team_id:L.team_ids&&L.team_ids.length>0?L.team_ids[0]:null}),N(!0)},K=L=>{b(L),Q({name:L.name,description:L.description,functional_unit_id:null,team_lead_id:null,team_lead_type:"team",max_capacity:L.max_capacity,members:[]}),u(!0)},q=async L=>{try{const W=await De.getTeamById(L.id.toString());A(W),O(!0)}catch(W){console.error("Error fetching team details:",W),i("Failed to fetch team details")}},je=async L=>{try{const tt=(await De.getMembers()||[]).filter($=>!$.team_ids||!$.team_ids.includes(L.id));Te(tt),A(L),oe(!0)}catch(W){console.error("Error fetching available members:",W),i("Failed to fetch available members")}},Se=async L=>{if(k)try{await De.addMemberToTeam(k.id.toString(),{member_id:L});const W=await De.getTeamById(k.id.toString());A(W),await ce(),oe(!1)}catch(W){console.error("Error adding member to team:",W),i("Failed to add member to team")}},C=async L=>{if(k&&confirm(`Are you sure you want to remove this member from ${k.name}?`))try{await De.removeMemberFromTeam(k.id.toString(),L.toString());const W=await De.getTeamById(k.id.toString());A(W),await ce(),i(null)}catch(W){console.error("Error removing member from team:",W),i("Failed to remove member from team")}},re=L=>{F(L),_(!0)};return n?s.jsx("div",{className:"flex items-center justify-center p-8",children:s.jsx("div",{className:"text-lg",children:"Loading team data..."})}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Team Management"}),s.jsx("p",{className:"text-gray-600",children:"Manage team members and teams"})]})}),l&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:s.jsx("p",{className:"text-red-800",children:l})}),s.jsx("div",{className:"border-b border-gray-200",children:s.jsxs("nav",{className:"-mb-px flex space-x-8",children:[s.jsxs("button",{onClick:()=>r("members"),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${t==="members"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[s.jsx(He,{className:"w-4 h-4"}),s.jsx("span",{children:"Team Members"})]}),s.jsxs("button",{onClick:()=>r("teams"),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${t==="teams"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[s.jsx(ya,{className:"w-4 h-4"}),s.jsx("span",{children:"Teams"})]})]})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center space-x-4",children:s.jsxs("div",{className:"relative",children:[s.jsx(Ao,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",placeholder:`Search ${t==="members"?"team members":"teams"}...`,value:j,onChange:L=>d(L.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]})}),s.jsxs(D,{onClick:()=>{t==="members"?(z(null),ae(),N(!0)):(b(null),Ne(),u(!0))},className:"flex items-center space-x-2",children:[s.jsx(lt,{className:"w-4 h-4"}),s.jsxs("span",{children:["Add ",t==="members"?"Member":"Team"]})]})]}),t==="members"?s.jsx(nf,{members:x,onEdit:et,onDelete:I,onMemberClick:G}):s.jsx(af,{teams:v,onEdit:K,onDelete:ve,onViewDetails:q}),s.jsx(Ze,{isOpen:w,onClose:()=>{N(!1),z(null),ae()},title:P?"Edit Team Member":"Create Team Member",children:s.jsxs("form",{onSubmit:P?Pe:ke,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name"}),s.jsx("input",{type:"text",value:B.name,onChange:L=>V({...B,name:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter full name",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),s.jsx("input",{type:"email",value:B.email,onChange:L=>V({...B,email:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter email address",required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Passcode ",P&&s.jsx("span",{className:"text-gray-500 text-xs",children:"(leave empty to keep current)"})]}),s.jsx("input",{type:"text",value:B.passcode,onChange:L=>V({...B,passcode:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:P?"Leave empty to keep current passcode":"Enter passcode",required:!P}),!P&&s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Passcode is required for new team members"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assign to Team"}),s.jsxs("select",{value:B.team_id||"",onChange:L=>V({...B,team_id:L.target.value?Number(L.target.value):null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"Select a team (optional)"}),p.map(L=>s.jsx("option",{value:L.id,children:L.name},L.id))]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Skills"}),s.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:["Available skills: ",S.length]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 max-h-48 overflow-y-auto border border-gray-200 rounded-lg p-4",children:S.length>0?S.map(L=>s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer hover:bg-gray-50 p-2 rounded",children:[s.jsx("input",{type:"checkbox",checked:B.skills.includes(L),onChange:W=>{W.target.checked?V({...B,skills:[...B.skills,L]}):V({...B,skills:B.skills.filter(_e=>_e!==L)})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:L})]},L)):s.jsx("div",{className:"col-span-3 text-center text-gray-500 py-4",children:"No skills available. Please add skills first."})}),B.skills.length>0&&s.jsxs("div",{className:"mt-3",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Selected skills:"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:B.skills.map(L=>s.jsx(Y,{variant:"secondary",className:"text-xs",children:L},L))})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[s.jsx(D,{type:"button",variant:"outline",onClick:()=>{N(!1),z(null),ae()},className:"px-6",children:"Cancel"}),s.jsx(D,{type:"submit",className:"px-6 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700",children:P?"Update Member":"Create Member"})]})]})}),s.jsx(Ze,{isOpen:M,onClose:()=>{u(!1),b(null),Ne()},title:g?"Edit Team":"Create Team",children:s.jsxs("form",{onSubmit:g?he:le,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Team Name"}),s.jsx("input",{type:"text",value:se.name,onChange:L=>Q({...se,name:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter team name",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Capacity"}),s.jsx("input",{type:"number",value:se.max_capacity,onChange:L=>Q({...se,max_capacity:parseInt(L.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"1",max:"50",placeholder:"10"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),s.jsx("textarea",{value:se.description,onChange:L=>Q({...se,description:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:3,placeholder:"Enter team description"})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[s.jsx(D,{type:"button",variant:"outline",onClick:()=>{u(!1),b(null),Ne()},className:"px-6",children:"Cancel"}),s.jsx(D,{type:"submit",className:"px-6 bg-gradient-to-r from-green-500 to-teal-600 hover:from-green-600 hover:to-teal-700",children:g?"Update Team":"Create Team"})]})]})}),k&&s.jsx(Ze,{isOpen:ee,onClose:()=>{O(!1),A(null)},title:`${k.name} - Team Details`,children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Team Information"}),s.jsx("p",{className:"text-gray-600",children:k.description})]}),s.jsx("div",{children:s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Members"}),s.jsxs("p",{className:"text-gray-900 font-semibold",children:[s.jsx("span",{className:"text-blue-600",children:((me=k.members)==null?void 0:me.length)||k.member_count||0})," / ",s.jsx("span",{className:"text-gray-600",children:k.max_capacity})]}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[!((ye=k.members)!=null&&ye.length)&&!k.member_count||((Re=k.members)==null?void 0:Re.length)===0&&k.member_count===0?"No members":(((Ye=k.members)==null?void 0:Ye.length)||k.member_count)===1?"1 member":`${((ue=k.members)==null?void 0:ue.length)||k.member_count} members`," assigned"]})]})}),k.skills&&k.skills.length>0&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Team Skills"}),s.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:k.skills.map((L,W)=>s.jsx(Y,{variant:"secondary",children:L},W))})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Team Members"}),s.jsxs(D,{size:"sm",onClick:()=>je(k),className:"bg-blue-500 hover:bg-blue-600 text-white",disabled:k.member_count>=k.max_capacity,children:[s.jsx(Va,{className:"w-3 h-3 mr-1"}),"Add Member"]})]}),k.members&&k.members.length>0?s.jsx("div",{className:"space-y-2 mt-1",children:k.members.map(L=>{var W;return s.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:L.name}),s.jsx("p",{className:"text-sm text-gray-600",children:L.team_role})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(Y,{variant:"secondary",children:[((W=L.skills)==null?void 0:W.length)||0," skills"]}),s.jsxs("div",{className:"relative group",children:[s.jsx(D,{size:"sm",variant:"outline",onClick:_e=>{_e.stopPropagation(),re(L)},className:"text-blue-600 hover:text-blue-700",children:s.jsx(Ks,{className:"w-3 h-3"})}),s.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-10",children:["View Details",s.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900"})]})]}),s.jsxs("div",{className:"relative group",children:[s.jsx(D,{size:"sm",variant:"outline",onClick:_e=>{_e.stopPropagation(),C(L.id)},className:"text-red-600 hover:text-red-700",children:s.jsx(yp,{className:"w-3 h-3"})}),s.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-10",children:["Remove User",s.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900"})]})]})]})]},L.id)})}):s.jsxs("div",{className:"text-center py-4 text-gray-500",children:[s.jsx(He,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),s.jsx("p",{children:"No members assigned to this team"})]})]})]})}),k&&s.jsx(Ze,{isOpen:U,onClose:()=>{oe(!1),A(null),Te([])},title:`Add Member to ${k.name}`,children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"mb-4",children:[s.jsxs("p",{className:"text-sm text-gray-600",children:["Select a member to add to ",s.jsx("strong",{children:k.name})]}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Current: ",k.member_count," / ",k.max_capacity," members"]})]}),de.length>0?s.jsx("div",{className:"max-h-64 overflow-y-auto space-y-2",children:de.map(L=>s.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",onClick:()=>Se(L.id),children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white font-semibold text-xs",children:L.name.split(" ").map(W=>W[0]).join("").toUpperCase()})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:L.name}),s.jsx("p",{className:"text-sm text-gray-600",children:L.email})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(Y,{variant:"secondary",className:"text-xs",children:[L.skills.length," skills"]}),s.jsx(D,{size:"sm",variant:"outline",className:"text-xs",children:"Add"})]})]},L.id))}):s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(He,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),s.jsx("p",{className:"text-lg font-medium",children:"No available members"}),s.jsx("p",{className:"text-sm",children:"All team members are already assigned to this team or other teams."})]}),s.jsx("div",{className:"flex justify-end pt-4 border-t",children:s.jsx(D,{variant:"outline",onClick:()=>{oe(!1),A(null),Te([])},children:"Cancel"})})]})}),T&&s.jsx(Ze,{isOpen:Ue,onClose:()=>{_(!1),F(null)},title:`${T.name} - Member Details`,children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white font-semibold text-lg",children:T.name.split(" ").map(L=>L[0]).join("").toUpperCase()})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:T.name}),s.jsx("p",{className:"text-gray-600",children:T.team_role||"Member"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),s.jsx("p",{className:"text-gray-900",children:T.email||"Not provided"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Skills"}),s.jsxs("p",{className:"text-gray-900",children:[((Ve=T.skills)==null?void 0:Ve.length)||0," skills"]})]})]}),T.skills&&T.skills.length>0&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Skill Details"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:T.skills.map((L,W)=>s.jsx(Y,{variant:"secondary",children:L},W))})]}),s.jsx("div",{className:"flex justify-end pt-4 border-t",children:s.jsx(D,{variant:"outline",onClick:()=>{_(!1),F(null)},children:"Close"})})]})})]})}function nf({members:e,onEdit:t,onDelete:r,onMemberClick:n}){return s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(a=>{var l,i,o,c;return s.jsx(Z,{className:"hover:shadow-lg transition-shadow duration-200 cursor-pointer",onClick:()=>n&&n(a),children:s.jsx(J,{className:"p-6",children:s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white font-semibold text-sm",children:a.name.split(" ").map(x=>x[0]).join("").toUpperCase()})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900 text-lg",children:a.name}),s.jsxs("p",{className:"text-sm text-gray-600 flex items-center",children:[s.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),a.email]}),a.passcode&&s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Passcode: ",s.jsx("span",{className:"font-mono bg-gray-100 px-1 rounded",children:a.passcode})]})]})]}),s.jsxs("div",{className:"mb-4 space-y-3",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Tasks"}),s.jsxs("span",{className:"text-xs bg-orange-100 text-orange-800 px-2 py-1 rounded-full",children:[a.task_count||0," tasks"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-orange-500 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min((a.task_count||0)*10,100)}%`}})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Skills"}),s.jsxs("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:[a.skills.length," skills"]})]}),a.skills.length>0&&s.jsxs("div",{className:"flex flex-wrap gap-1",children:[a.skills.slice(0,3).map((x,f)=>s.jsx(Y,{variant:"secondary",className:"text-xs px-2 py-1",children:x},f)),a.skills.length>3&&s.jsxs(Y,{variant:"secondary",className:"text-xs px-2 py-1",children:["+",a.skills.length-3," more"]})]})]}),a.team_names&&a.team_names.length>0&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Teams"}),s.jsxs("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:[a.team_names.length," team",a.team_names.length>1?"s":""]})]}),s.jsx("div",{className:"flex flex-wrap gap-1",children:a.team_names.map((x,f)=>s.jsx(Y,{variant:"default",className:"text-xs px-2 py-1 bg-green-100 text-green-800",children:x},f))})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Y,{variant:a.is_active?"default":"secondary",className:"px-3 py-1",children:a.is_active?"Active":"Inactive"}),a.performance_flags_count>0&&s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsxs(Y,{variant:"danger",className:"px-2 py-1 text-xs",children:["🔴 ",((l=a.performance_flags_summary)==null?void 0:l.red)||0]}),s.jsxs(Y,{variant:"warning",className:"px-2 py-1 text-xs",children:["🟠 ",((i=a.performance_flags_summary)==null?void 0:i.orange)||0]}),s.jsxs(Y,{variant:"warning",className:"px-2 py-1 text-xs",children:["🟡 ",((o=a.performance_flags_summary)==null?void 0:o.yellow)||0]}),s.jsxs(Y,{variant:"success",className:"px-2 py-1 text-xs",children:["🟢 ",((c=a.performance_flags_summary)==null?void 0:c.green)||0]})]})]}),s.jsxs("div",{className:"flex space-x-1",children:[s.jsx(D,{size:"sm",variant:"outline",onClick:x=>{x.stopPropagation(),t(a)},className:"hover:bg-blue-50 hover:border-blue-300 transition-colors",children:s.jsx($n,{className:"w-3 h-3"})}),s.jsx(D,{size:"sm",variant:"outline",onClick:x=>{x.stopPropagation(),r(a.id)},className:"hover:bg-red-50 hover:border-red-300 transition-colors",children:s.jsx(xt,{className:"w-3 h-3"})})]})]})]})})})},a.id)})})}function af({teams:e,onEdit:t,onDelete:r,onViewDetails:n}){return!e||e.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-100 to-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(ya,{className:"w-8 h-8 text-gray-400"})}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No teams found"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Create your first team to get started."}),s.jsxs(D,{className:"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700",children:[s.jsx(lt,{className:"w-4 h-4 mr-2"}),"Create Team"]})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(a=>s.jsx(Z,{className:"hover:shadow-lg transition-shadow duration-200",children:s.jsx(J,{className:"p-6",children:s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-teal-600 rounded-lg flex items-center justify-center",children:s.jsx(ya,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900 text-lg",children:a.name}),s.jsx("p",{className:"text-sm text-gray-600",children:a.description||"No description"})]})]}),s.jsxs("div",{className:"space-y-3 mb-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ya,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-sm text-gray-600",children:a.functional_unit_name||"No unit"})]}),s.jsx(Y,{variant:a.is_active?"default":"secondary",className:"px-2 py-1 text-xs",children:a.is_active?"Active":"Inactive"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(vp,{className:"w-4 h-4 text-gray-400"}),s.jsxs("span",{className:"text-sm text-gray-600",children:[a.member_count||0," / ",a.max_capacity||10," members"]}),s.jsx("div",{className:"flex-1 ml-2",children:s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min((a.member_count||0)/(a.max_capacity||10)*100,100)}%`}})})})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(fm,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-sm text-gray-600",children:a.team_lead_name||"No team lead"})]})]}),a.skills&&a.skills.length>0&&s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Team Skills"}),s.jsxs("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:[a.skills.length," skills"]})]}),s.jsxs("div",{className:"flex flex-wrap gap-1",children:[a.skills.slice(0,3).map((l,i)=>s.jsx(Y,{variant:"secondary",className:"text-xs px-2 py-1",children:l},i)),a.skills.length>3&&s.jsxs(Y,{variant:"secondary",className:"text-xs px-2 py-1",children:["+",a.skills.length-3," more"]})]})]}),s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex space-x-1",children:[s.jsx(D,{size:"sm",variant:"outline",onClick:()=>n(a),className:"hover:bg-blue-50 hover:border-blue-300 transition-colors",children:s.jsx(He,{className:"w-3 h-3"})}),s.jsx(D,{size:"sm",variant:"outline",onClick:()=>t(a),className:"hover:bg-green-50 hover:border-green-300 transition-colors",children:s.jsx($n,{className:"w-3 h-3"})}),s.jsx(D,{size:"sm",variant:"outline",onClick:()=>r(a.id),className:"hover:bg-red-50 hover:border-red-300 transition-colors",children:s.jsx(xt,{className:"w-3 h-3"})})]})})]})})})},a.id))})}function lf(){const[e,t]=m.useState(new Date("2025-08-11")),[r,n]=m.useState("week"),[a,l]=m.useState("team"),[i,o]=m.useState(!1);m.useState(null);const[c,x]=m.useState([]),[f,j]=m.useState([]),[d,w]=m.useState([]),[N,P]=m.useState([]);m.useState([]),m.useState([]),m.useState([]),m.useState([]);const[z,p]=m.useState(!1),[h,v]=m.useState(null),E=async _=>{try{p(!0),v(null);const T=await aa.getAll(_);x(T)}catch(T){console.error("Failed to fetch allocations:",T),v("Failed to load allocations")}finally{p(!1)}};m.useEffect(()=>{(async()=>{try{p(!0),v(null);const[T,F,B,V,se,Q,S,ie]=await Promise.all([aa.getAll(),De.getMembers(),We.getAll(),Oe.getAll(),ds.getAll(),us.getAll(),ms.getAll(),Bs.getAll()]);console.log("📊 Allocations data:",T),console.log("👥 Users data:",F),console.log("📋 Projects data:",B),console.log("✅ Tasks data:",V),x(T),j(F),w(B),P(V)}catch(T){console.error("Failed to fetch data:",T),v("Failed to load data")}finally{p(!1)}})()},[]);const M=async()=>{if(c.length===0&&N.length>0)try{p(!0);for(const _ of N)if(_.assignees&&_.assignees.length>0){const T=_.start_date||_.startDate,F=_.end_date||_.endDate,B=_.estimated_hours||_.estimatedHours||8;if(T&&F){const V=Math.ceil((new Date(F).getTime()-new Date(T).getTime())/864e5),se=Math.min(B/Math.max(V,1),8);for(const Q of _.assignees){const S={user_id:Q,project_id:_.project_id||_.projectId||"",task_id:_.id,hours_per_day:Math.round(se*100)/100,start_date:new Date(T).toISOString().split("T")[0],end_date:new Date(F).toISOString().split("T")[0]};await aa.create(S)}}}await E()}catch(_){console.error("Failed to create allocations from tasks:",_),v("Failed to create initial allocations")}finally{p(!1)}};m.useEffect(()=>{c.length===0&&!z&&N.length>0&&M()},[c.length,z,N.length]);const u=_=>{const T=[],F=new Date(_);F.setDate(_.getDate()-_.getDay());for(let B=0;B<7;B++){const V=new Date(F);V.setDate(F.getDate()+B),T.push(V)}return T},g=(_,T,F)=>(console.log(`🔍 getAllocationsForDate: date=${_.toISOString().split("T")[0]}, userId=${T}, allocations.length=${c.length}`),c.filter(V=>{var Pe,I,G;const se=_.toISOString().split("T")[0],Q=V.start_date.split("T")[0],S=V.end_date.split("T")[0],ie=se>=Q&&se<=S,ce=!T||((Pe=V.user_id)==null?void 0:Pe.toString())===T,ke=!F||((I=V.project_id)==null?void 0:I.toString())===F;return T&&((G=V.user_id)==null?void 0:G.toString())===T&&!ie&&console.log(`❌ Date mismatch: Looking for ${se}, allocation ${V.id} range is ${Q} to ${S}`),ie&&ce&&ke})),b=(_,T)=>g(T,_).reduce((B,V)=>{const se=typeof V.hours_per_day=="string"?parseFloat(V.hours_per_day):V.hours_per_day||0;return B+se},0),k=(_,T)=>g(T,void 0,_).reduce((B,V)=>{const se=typeof V.hours_per_day=="string"?parseFloat(V.hours_per_day):V.hours_per_day||0;return B+se},0),A=(_,T)=>{const F=b(_,T);return F===0?"available":F>8?"overloaded":F>=6?"busy":"normal"},ee=_=>{switch(_){case"available":return"bg-green-100 text-green-800";case"normal":return"bg-blue-100 text-blue-800";case"busy":return"bg-yellow-100 text-yellow-800";case"overloaded":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},O=_=>{const T=new Date(e);r==="day"?T.setDate(e.getDate()+(_==="next"?1:-1)):r==="week"?T.setDate(e.getDate()+(_==="next"?7:-7)):T.setMonth(e.getMonth()+(_==="next"?1:-1)),t(T)},U=()=>{if(r==="day")return e.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});if(r==="week"){const _=u(e),T=_[0].toLocaleDateString("en-US",{month:"short",day:"numeric"}),F=_[6].toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return`${T} - ${F}`}else return e.toLocaleDateString("en-US",{year:"numeric",month:"long"})},oe=async _=>{var T,F;try{const B={user_id:_.userId||"",project_id:_.projectId||"",task_id:_.taskId||void 0,hours_per_day:_.hoursPerDay||8,start_date:((T=_.startDate)==null?void 0:T.toISOString().split("T")[0])||new Date().toISOString().split("T")[0],end_date:((F=_.endDate)==null?void 0:F.toISOString().split("T")[0])||new Date().toISOString().split("T")[0]};await aa.create(B),await E(),o(!1)}catch(B){console.error("Failed to create allocation:",B),v("Failed to create allocation")}},de=()=>{const _=u(e);return console.log(`📅 Current selected date: ${e.toISOString().split("T")[0]}`),console.log("📅 Week dates:",_.map(T=>T.toISOString().split("T")[0])),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-8 gap-2 mb-4",children:[s.jsx("div",{className:"font-medium text-gray-700 p-2",children:"Team Member"}),_.map(T=>s.jsxs("div",{className:"text-center p-2",children:[s.jsx("div",{className:"font-medium text-gray-700",children:T.toLocaleDateString("en-US",{weekday:"short"})}),s.jsx("div",{className:"text-sm text-gray-500",children:T.getDate()})]},T.toISOString()))]}),f.map(T=>{var F;return s.jsx(Z,{className:"overflow-hidden",children:s.jsx(J,{className:"p-0",children:s.jsxs("div",{className:"grid grid-cols-8 gap-2",children:[s.jsxs("div",{className:"p-4 bg-gray-50 flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-medium",children:T.name.charAt(0)}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900",children:T.name}),s.jsx("div",{className:"text-sm text-gray-600",children:((F=T.skills)==null?void 0:F[0])||"No skills"})]})]}),_.map(B=>{const V=g(B,T.id),se=b(T.id,B),Q=A(T.id,B);return s.jsxs("div",{className:"p-2 border-l border-gray-200",children:[s.jsxs("div",{className:`rounded-lg p-2 text-center ${ee(Q)}`,children:[s.jsxs("div",{className:"font-semibold",children:[se,"h"]}),s.jsxs("div",{className:"text-xs mt-1",children:[V.length," tasks"]})]}),V.length>0&&s.jsxs("div",{className:"mt-2 space-y-1",children:[V.slice(0,2).map(S=>{var Pe,I;const ie=N.find(G=>G.id===S.task_id),ce=d.find(G=>G.id===S.project_id),ke=f.find(G=>G.id===S.user_id);return s.jsxs("div",{className:"text-xs bg-white rounded p-1 border",title:`${ce==null?void 0:ce.name}: ${ie==null?void 0:ie.name} (${(Pe=ke==null?void 0:ke.skills)==null?void 0:Pe[0]})`,children:[s.jsx("div",{className:"font-medium truncate",children:ie==null?void 0:ie.name}),s.jsxs("div",{className:"text-gray-600",children:[S.hours_per_day,"h • ",(I=ke==null?void 0:ke.skills)==null?void 0:I[0]]})]},S.task_id||S.id)}),V.length>2&&s.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["+",V.length-2," more"]})]})]},B.toISOString())})]})})},T.id)})]})},Te=()=>{const _=u(e);return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-8 gap-2 mb-4",children:[s.jsx("div",{className:"font-medium text-gray-700 p-2",children:"Project"}),_.map(T=>s.jsxs("div",{className:"text-center p-2",children:[s.jsx("div",{className:"font-medium text-gray-700",children:T.toLocaleDateString("en-US",{weekday:"short"})}),s.jsx("div",{className:"text-sm text-gray-500",children:T.getDate()})]},T.toISOString()))]}),d.map(T=>s.jsx(Z,{className:"overflow-hidden",children:s.jsx(J,{className:"p-0",children:s.jsxs("div",{className:"grid grid-cols-8 gap-2",children:[s.jsxs("div",{className:"p-4 bg-gray-50 flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-full flex items-center justify-center text-white",children:s.jsx(sr,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900",children:T.name}),s.jsx("div",{className:"text-sm text-gray-600",children:T.category})]})]}),_.map(F=>{const B=g(F,void 0,T.id),V=k(T.id,F),se=new Set(B.map(Q=>Q.user_id)).size;return s.jsxs("div",{className:"p-2 border-l border-gray-200",children:[s.jsxs("div",{className:"rounded-lg p-2 text-center bg-blue-100 text-blue-800",children:[s.jsxs("div",{className:"font-semibold",children:[V,"h"]}),s.jsxs("div",{className:"text-xs mt-1",children:[se," people"]})]}),B.length>0&&s.jsxs("div",{className:"mt-2 space-y-1",children:[B.slice(0,2).map(Q=>{const S=f.find(ce=>ce.id===Q.user_id),ie=N.find(ce=>ce.id===Q.task_id);return s.jsxs("div",{className:"text-xs bg-white rounded p-1 border",title:`${S==null?void 0:S.name}: ${ie==null?void 0:ie.name}`,children:[s.jsx("div",{className:"font-medium truncate",children:S==null?void 0:S.name}),s.jsxs("div",{className:"text-gray-600",children:[Q.hours_per_day,"h"]})]},`${Q.user_id}-${Q.task_id}`)}),B.length>2&&s.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["+",B.length-2," more"]})]})]},F.toISOString())})]})})},T.id))]})},Ue=()=>a==="team"?s.jsx("div",{className:"space-y-6",children:f.map(_=>{const T=g(e,_.id),F=b(_.id,e),B=A(_.id,e);return s.jsxs(Z,{children:[s.jsx(Ie,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center text-white font-medium text-lg",children:_.name.charAt(0)}),s.jsxs("div",{children:[s.jsx(Me,{children:_.name}),s.jsx("p",{className:"text-sm text-gray-600",children:_.skills.join(", ")})]})]}),s.jsx("div",{className:"text-right",children:s.jsxs(Y,{variant:B==="available"?"success":B==="overloaded"?"danger":B==="busy"?"warning":"primary",children:[F,"h allocated"]})})]})}),s.jsx(J,{children:T.length===0?s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(Ai,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),s.jsx("p",{children:"No tasks allocated for this day"})]}):s.jsx("div",{className:"space-y-3",children:T.map(V=>{const se=N.find(S=>S.id===V.taskId),Q=d.find(S=>S.id===V.projectId);return s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-gray-900",children:se==null?void 0:se.name}),s.jsx("div",{className:"text-sm text-gray-600",children:Q==null?void 0:Q.name}),s.jsxs("div",{className:"flex items-center mt-1 space-x-4",children:[s.jsx(Y,{variant:"secondary",size:"sm",children:se==null?void 0:se.priority}),s.jsx(Y,{variant:(se==null?void 0:se.status)==="completed"?"success":(se==null?void 0:se.status)==="in-progress"?"primary":(se==null?void 0:se.status)==="blocked"?"danger":"default",size:"sm",children:se==null?void 0:se.status})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"font-semibold text-lg",children:[V.hoursPerDay,"h"]}),s.jsx("div",{className:"text-sm text-gray-600",children:"allocated"})]})]},V.taskId)})})})]},_.id)})}):s.jsx("div",{className:"space-y-6",children:d.map(_=>{const T=g(e,void 0,_.id),F=k(_.id,e),B=new Set(T.map(V=>V.userId)).size;return s.jsxs(Z,{children:[s.jsx(Ie,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-full flex items-center justify-center text-white",children:s.jsx(sr,{className:"w-6 h-6"})}),s.jsxs("div",{children:[s.jsx(Me,{children:_.name}),s.jsx("p",{className:"text-sm text-gray-600",children:_.category})]})]}),s.jsx("div",{className:"text-right",children:s.jsxs(Y,{variant:"primary",children:[F,"h • ",B," people"]})})]})}),s.jsx(J,{children:T.length===0?s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(sr,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),s.jsx("p",{children:"No allocations for this project today"})]}):s.jsx("div",{className:"space-y-3",children:T.map(V=>{const se=f.find(S=>S.id===V.userId),Q=N.find(S=>S.id===V.taskId);return s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-gray-900",children:Q==null?void 0:Q.name}),s.jsxs("div",{className:"text-sm text-gray-600",children:["Assigned to: ",se==null?void 0:se.name]}),s.jsxs("div",{className:"flex items-center mt-1 space-x-4",children:[s.jsx(Y,{variant:"secondary",size:"sm",children:Q==null?void 0:Q.priority}),s.jsx(Y,{variant:(Q==null?void 0:Q.status)==="completed"?"success":(Q==null?void 0:Q.status)==="in-progress"?"primary":(Q==null?void 0:Q.status)==="blocked"?"danger":"default",size:"sm",children:Q==null?void 0:Q.status})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"font-semibold text-lg",children:[V.hoursPerDay,"h"]}),s.jsx("div",{className:"text-sm text-gray-600",children:"allocated"})]})]},`${V.userId}-${V.taskId}`)})})})]},_.id)})});return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Daily Allocations"}),s.jsx("p",{className:"text-gray-600",children:"View team member and project task allocations"})]}),s.jsx(D,{icon:s.jsx(lt,{className:"w-4 h-4"}),onClick:()=>o(!0),children:"Add Allocation"})]}),s.jsxs("div",{className:"flex items-center justify-between bg-white p-4 rounded-lg border border-gray-200",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(D,{variant:"ghost",size:"sm",onClick:()=>O("prev"),children:s.jsx(rp,{className:"w-4 h-4"})}),s.jsx("div",{className:"font-medium text-gray-900 min-w-[200px] text-center",children:U()}),s.jsx(D,{variant:"ghost",size:"sm",onClick:()=>O("next"),children:s.jsx(es,{className:"w-4 h-4"})})]}),s.jsx(D,{variant:"outline",size:"sm",onClick:()=>t(new Date),children:"Today"})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Group by:"}),s.jsxs(D,{variant:a==="team"?"primary":"ghost",size:"sm",onClick:()=>l("team"),children:[s.jsx(He,{className:"w-4 h-4 mr-1"}),"Team"]}),s.jsxs(D,{variant:a==="project"?"primary":"ghost",size:"sm",onClick:()=>l("project"),children:[s.jsx(sr,{className:"w-4 h-4 mr-1"}),"Project"]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(D,{variant:r==="day"?"primary":"ghost",size:"sm",onClick:()=>n("day"),children:"Day"}),s.jsx(D,{variant:r==="week"?"primary":"ghost",size:"sm",onClick:()=>n("week"),children:"Week"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[s.jsx(Z,{children:s.jsx(J,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 rounded-lg bg-blue-50",children:s.jsx(Ai,{className:"w-6 h-6 text-blue-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Team"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:f.length})]})]})})}),s.jsx(Z,{children:s.jsx(J,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 rounded-lg bg-green-50",children:s.jsx(Or,{className:"w-6 h-6 text-green-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Available"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:f.filter(_=>A(_.id,e)==="available").length})]})]})})}),s.jsx(Z,{children:s.jsx(J,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 rounded-lg bg-yellow-50",children:s.jsx(Ts,{className:"w-6 h-6 text-yellow-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Busy"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:f.filter(_=>A(_.id,e)==="busy").length})]})]})})}),s.jsx(Z,{children:s.jsx(J,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 rounded-lg bg-red-50",children:s.jsx(Ct,{className:"w-6 h-6 text-red-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Overloaded"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:f.filter(_=>A(_.id,e)==="overloaded").length})]})]})})})]}),h&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(Ct,{className:"w-5 h-5 text-red-400 mr-2"}),s.jsx("span",{className:"text-red-800",children:h})]})}),z&&s.jsxs("div",{className:"flex items-center justify-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),s.jsx("span",{className:"ml-2 text-gray-600",children:"Loading allocations..."})]}),!z&&(r==="week"?a==="team"?de():Te():Ue()),s.jsx(of,{isOpen:i,onClose:()=>o(!1),onSubmit:oe,users:f,projects:d,tasks:N})]})}function of({isOpen:e,onClose:t,onSubmit:r,users:n,projects:a,tasks:l}){const[i,o]=m.useState({userId:"",projectId:"",taskId:"",hoursPerDay:8,startDate:new Date().toISOString().split("T")[0],endDate:new Date(Date.now()+6048e5).toISOString().split("T")[0]}),c=f=>{f.preventDefault(),r({...i,startDate:new Date(i.startDate),endDate:new Date(i.endDate)}),o({userId:"",projectId:"",taskId:"",hoursPerDay:8,startDate:new Date().toISOString().split("T")[0],endDate:new Date(Date.now()+7*24*60*60*1e3).toISOString().split("T")[0]})},x=l.filter(f=>!i.projectId||f.projectId===i.projectId);return s.jsx(Ze,{isOpen:e,onClose:t,title:"Add Team Allocation",size:"lg",children:s.jsxs("form",{onSubmit:c,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Team Member *"}),s.jsxs("select",{required:!0,value:i.userId,onChange:f=>o({...i,userId:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Select Team Member"}),n.map(f=>s.jsx("option",{value:f.id,children:f.name},f.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project *"}),s.jsxs("select",{required:!0,value:i.projectId,onChange:f=>o({...i,projectId:f.target.value,taskId:""}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Select Project"}),a.map(f=>s.jsx("option",{value:f.id,children:f.name},f.id))]})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Task *"}),s.jsxs("select",{required:!0,value:i.taskId,onChange:f=>o({...i,taskId:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:!i.projectId,children:[s.jsx("option",{value:"",children:"Select Task"}),x.map(f=>s.jsx("option",{value:f.id,children:f.name},f.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hours per Day"}),s.jsx("input",{type:"number",min:"0.5",max:"12",step:"0.5",value:i.hoursPerDay,onChange:f=>o({...i,hoursPerDay:parseFloat(f.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),s.jsx("input",{type:"date",value:i.startDate,onChange:f=>o({...i,startDate:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),s.jsx("input",{type:"date",value:i.endDate,onChange:f=>o({...i,endDate:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx(D,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),s.jsx(D,{type:"submit",children:"Add Allocation"})]})]})})}function cf(){const[e,t]=m.useState("categories"),[r,n]=m.useState(!1),[a,l]=m.useState(null),[i,o]=m.useState(!1),[c,x]=m.useState(null),[f,j]=m.useState("eLearning Design"),d=async I=>{try{de(!0);const G=v.find(ae=>ae.name===I);if(G){console.log("Loading stages for category:",I,"ID:",G.id);const ae=await Tt.getByCategory(G.id);console.log("Stages data received:",ae),U(ae)}}catch(G){console.error("Failed to load stages for category:",G),U([])}finally{de(!1)}},[w,N]=m.useState([]),[P,z]=m.useState([]),[p,h]=m.useState("admin"),[v,E]=m.useState([]),[M,u]=m.useState([]),[g,b]=m.useState(!0),[k,A]=m.useState([{id:"1",name:"Content Development Unit",description:"Responsible for creating and developing educational content",skills:["Content Writers","Instructional Designers"],lead:"Sarah Johnson",isDefault:!0}]),{signUp:ee}=zn(),[O,U]=m.useState([]),[oe,de]=m.useState(!1);m.useEffect(()=>{(async()=>{var G;try{b(!0);const[ae,le]=await Promise.all([As.getAll(),rs.getAll()]);if(E(ae),u(le),ae.length>0&&(ae.find(Ne=>Ne.name===f)||j(ae[0].name)),ae.length>0){const ve=(G=ae.find(Ne=>Ne.name===f))==null?void 0:G.id;if(ve){console.log("Initial load - Loading stages for category:",f,"ID:",ve);const Ne=await Tt.getByCategory(ve);console.log("Initial stages data received:",Ne),U(Ne)}}N([{id:"1",name:"Admin User",email:"admin@company.com",role:"admin",createdAt:new Date,isActive:!0}]);const he=await De.getAll();z(he)}catch(ae){console.error("Failed to load data:",ae)}finally{b(!1)}})()},[f]);const Te=[{key:"categories",label:"Categories",icon:fp},{key:"skills",label:"Skills",icon:He},{key:"stages",label:"Project Stages",icon:En},{key:"users",label:"Admin Users",icon:Va},{key:"functional-units",label:"Functional Units",icon:He}],Ue=async(I,G)=>{var ae;try{if(I==="category")if(a!=null&&a.id){const le=await As.update(a.id,{name:G.name,description:G.description||null});E(v.map(he=>he.id===a.id?le:he))}else{const le=await As.create({name:G.name,description:G.description||null});E([...v,le])}else if(I==="skill")if(a!=null&&a.id){const le=await rs.update(a.id,{name:G.name,description:G.description||null});u(M.map(he=>he.id===a.id?le:he))}else{const le=await rs.create({name:G.name,description:G.description||null});u([...M,le])}else if(I==="stage")try{if(a!=null&&a.id){const le=await Tt.update(a.id,{name:G.name,description:G.description||null});await d(f)}else{const le=await Tt.create({name:G.name,description:G.description||null,order_index:O.length+1}),he=(ae=v.find(ve=>ve.name===f))==null?void 0:ae.id;he&&await Rl.create({category_id:he,stage_id:le.id,order_index:O.length+1,is_default:!1}),await d(f)}}catch(le){console.error("Failed to save stage:",le),alert("Failed to save stage. Please try again.")}else if(I==="admin-user"){F(G,"admin");return}else if(I==="team-user"){F(G,"team");return}else if(I==="functional-unit"){const le={id:Date.now().toString(),name:G.name,description:G.description||"",skills:G.skills||[],lead:G.lead||"",isDefault:!1};A([...k,le])}n(!1),l(null)}catch(le){console.error("Failed to add item:",le),alert("Failed to add item. Please try again.")}},_=async(I,G)=>{I==="category"||I==="skill"?(l({...G,type:I}),n(!0)):(l({...G,type:I}),n(!0))},T=async(I,G)=>{var ae;try{if(I==="category")await As.delete(G),E(v.filter(le=>le.id!==G));else if(I==="skill")await rs.delete(G),u(M.filter(le=>le.id!==G));else if(I==="stage")try{const le=(ae=v.find(he=>he.name===f))==null?void 0:ae.id;if(le)try{const ve=(await Rl.getByCategory(le)).find(Ne=>Ne.stage_id===G);ve&&await Rl.delete(ve.id)}catch{console.log("No stage template found to delete")}await Tt.delete(G),U(O.filter(he=>he.id!==G))}catch(le){console.error("Failed to delete stage:",le),alert("Failed to delete stage. Please try again.")}else I==="admin-user"?N(w.filter(le=>le.id!==G)):I==="team-user"?se(G):I==="functional-unit"&&A(k.filter(le=>le.id!==G))}catch(le){console.error("Failed to delete item:",le),alert("Failed to delete item. Please try again.")}},F=async(I,G)=>{try{if(G==="admin"){const{data:ae,error:le}=await ee(I.email,I.password,I.name);if(le)throw le;if(ae.user){const he={id:ae.user.id,name:I.name,email:I.email,role:"admin",createdAt:new Date,isActive:!0};N([...w,he])}}else{const ae={name:I.name,email:I.email,skills:I.skills||[],passcode:I.passcode||Math.random().toString(36).substring(2,8).toUpperCase(),isActive:I.isActive!==!1,performanceFlags:[]},le=await De.create(ae),he={...ae,id:le.id};z([...P,he])}n(!1),l(null)}catch(ae){console.error("Failed to create admin user:",ae),alert(`Failed to create user: ${ae.message}`)}},B=async(I,G)=>{try{if(G==="admin"){alert("Admin user access control requires server-side implementation");return}else{const ae=P.find(le=>le.id===I);if(ae){const le={...ae,isActive:!ae.isActive};await De.update(I,le),z(P.map(he=>he.id===I?le:he))}}}catch(ae){console.error("Failed to toggle user access:",ae),alert("Failed to toggle user access")}},V=async(I,G)=>{x(I),h(G),o(!0)},se=async I=>{try{z(P.filter(G=>G.id!==I))}catch(G){console.error("Failed to delete team member:",G)}},Q=async(I,G)=>{var ae;try{console.log("moveStage called:",{stageId:I,direction:G,currentStages:O});const le=[...O].sort((K,q)=>(K.template_order||K.order_index)-(q.template_order||q.order_index)),he=le.findIndex(K=>K.id===I);if(console.log("Stage index found:",he),he===-1){console.log("Stage not found, returning");return}const ve=[...le],Ne=G==="up"?he-1:he+1;if(console.log("Target index:",Ne),Ne<0||Ne>=ve.length){console.log("Target index out of bounds, returning");return}[ve[he],ve[Ne]]=[ve[Ne],ve[he]],console.log("Stages swapped"),ve.forEach((K,q)=>{K.template_order=q+1}),console.log("Order numbers updated:",ve.map(K=>({id:K.id,order:K.template_order}))),U(ve),console.log("Stages state updated");const et=(ae=v.find(K=>K.name===f))==null?void 0:ae.id;if(et){const K=ve.map((q,je)=>({stage_id:q.id,order:je+1}));console.log("Sending reorder request:",{categoryId:et,stageOrders:K}),await Tt.reorder(et,K),console.log("Reorder request completed successfully")}}catch(le){console.error("Failed to reorder stages:",le),alert("Failed to reorder stages. Please try again.")}},S=()=>s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Project Categories"}),s.jsx(D,{icon:s.jsx(lt,{className:"w-4 h-4"}),onClick:()=>{l({type:"category"}),n(!0)},children:"Add Category"})]}),g?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading categories..."})]})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:v.map(I=>s.jsx(Z,{className:"hover:shadow-md transition-shadow",children:s.jsx(J,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:I.name}),s.jsx("p",{className:"text-sm text-gray-600",children:I.isDefault?"Default category":"Custom category"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(D,{variant:"ghost",size:"sm",onClick:()=>_("category",I),children:s.jsx(Es,{className:"w-4 h-4"})}),!I.isDefault&&s.jsx(D,{variant:"ghost",size:"sm",onClick:()=>T("category",I.id),children:s.jsx(xt,{className:"w-4 h-4"})})]})]})})},I.id))})]}),ie=()=>s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Team Skills"}),s.jsx(D,{icon:s.jsx(lt,{className:"w-4 h-4"}),onClick:()=>{l({type:"skill"}),n(!0)},children:"Add Skill"})]}),g?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading skills..."})]})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:M.map(I=>s.jsx(Z,{className:"hover:shadow-md transition-shadow",children:s.jsx(J,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:I.name}),s.jsx("p",{className:"text-sm text-gray-600",children:I.isDefault?"Default skill":"Custom skill"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(D,{variant:"ghost",size:"sm",onClick:()=>_("skill",I),children:s.jsx(Es,{className:"w-4 h-4"})}),!I.isDefault&&s.jsx(D,{variant:"ghost",size:"sm",onClick:()=>T("skill",I.id),children:s.jsx(xt,{className:"w-4 h-4"})})]})]})})},I.id))})]}),ce=()=>s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Project Stages"}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("select",{value:f,onChange:I=>{j(I.target.value),d(I.target.value)},className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:v.map(I=>s.jsx("option",{value:I.name,children:I.name},I.id))}),s.jsx(D,{icon:s.jsx(lt,{className:"w-4 h-4"}),onClick:()=>{l({type:"stage"}),n(!0)},children:"Add Stage"})]})]}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsxs("h4",{className:"font-medium text-blue-900 mb-2",children:["Category: ",f]}),s.jsxs("p",{className:"text-sm text-blue-700",children:["These stages are specific to ",s.jsx("strong",{children:f})," projects. Each category can have its own unique workflow."]})]}),s.jsx(Z,{children:s.jsx(J,{className:"p-0",children:s.jsx("div",{className:"space-y-2 p-4",children:oe?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading stages..."})]})}):O.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsxs("div",{className:"text-gray-500 mb-4",children:[s.jsx(En,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),s.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"No stages found"}),s.jsx("p",{className:"text-gray-600",children:"No stages have been created for this category yet."})]}),s.jsx(D,{icon:s.jsx(lt,{className:"w-4 h-4"}),onClick:()=>{l({type:"stage"}),n(!0)},children:"Add First Stage"})]}):O.sort((I,G)=>(I.template_order||I.order_index)-(G.template_order||G.order_index)).map((I,G,ae)=>s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex flex-col space-y-1",children:[s.jsx(D,{variant:"ghost",size:"sm",onClick:()=>Q(I.id,"up"),disabled:G===0,className:"h-6 w-6 p-0",children:"↑"}),s.jsx(D,{variant:"ghost",size:"sm",onClick:()=>Q(I.id,"down"),disabled:G===ae.length-1,className:"h-6 w-6 p-0",children:"↓"})]}),s.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-blue-100 text-blue-600 rounded-full font-semibold text-sm",children:I.template_order||I.order_index}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:I.name}),s.jsx("p",{className:"text-sm text-gray-600",children:I.description})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[I.is_default&&s.jsx(Y,{variant:"secondary",size:"sm",children:"Default"}),s.jsx(D,{variant:"ghost",size:"sm",onClick:()=>_("stage",I),children:s.jsx(Es,{className:"w-4 h-4"})}),!I.is_default&&s.jsx(D,{variant:"ghost",size:"sm",onClick:()=>T("stage",I.id),children:s.jsx(xt,{className:"w-4 h-4"})})]})]},I.id))})})})]}),ke=()=>s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"User Management"}),s.jsxs("div",{className:"flex items-center space-x-2 bg-gray-100 rounded-lg p-1",children:[s.jsx(D,{variant:p==="admin"?"primary":"ghost",size:"sm",onClick:()=>h("admin"),children:"Admin Users"}),s.jsx(D,{variant:p==="team"?"primary":"ghost",size:"sm",onClick:()=>h("team"),children:"Team Members"})]})]}),s.jsxs(D,{icon:s.jsx(lt,{className:"w-4 h-4"}),onClick:()=>{l({type:p==="admin"?"admin-user":"team-user"}),n(!0)},children:["Add ",p==="admin"?"Admin User":"Team Member"]})]}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:p==="admin"?"Admin User Management":"Team Member Management"}),s.jsx("p",{className:"text-sm text-blue-700",children:p==="admin"?"Admin users can access the full project management system. They can manage projects, teams, tasks, and settings.":"Team members can access the team portal to view their tasks and performance. They use email and passcode to login."})]}),s.jsx(Z,{children:s.jsx(J,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:p==="admin"?"Admin User":"Team Member"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),p==="team"&&s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Passcode"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:p==="admin"?"Role":"Skills"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:p==="admin"?"Created":"Performance"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(p==="admin"?w:P).map(I=>{var G,ae,le,he;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`w-8 h-8 ${p==="admin"?"bg-blue-500":"bg-green-500"} rounded-full flex items-center justify-center text-white text-sm font-medium`,children:I.name.charAt(0).toUpperCase()}),s.jsx("div",{className:"ml-3",children:s.jsx("div",{className:"text-sm font-medium text-gray-900",children:I.name})})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:I.email}),p==="team"&&s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("code",{className:"text-xs bg-gray-100 px-2 py-1 rounded font-mono",children:I.passcode})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:p==="admin"?s.jsx(Y,{variant:"primary",size:"sm",children:I.role}):s.jsxs("div",{className:"flex flex-wrap gap-1",children:[(G=I.skills)==null?void 0:G.slice(0,2).map((ve,Ne)=>s.jsx(Y,{variant:"secondary",size:"sm",children:ve},Ne)),((ae=I.skills)==null?void 0:ae.length)>2&&s.jsxs(Y,{variant:"secondary",size:"sm",children:["+",I.skills.length-2]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.jsx(Y,{variant:I.isActive?"success":"secondary",children:I.isActive?"Active":"Disabled"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:p==="admin"?((le=I.createdAt)==null?void 0:le.toLocaleDateString())||"N/A":s.jsx("div",{className:"flex space-x-1",children:(he=I.performanceFlags)==null?void 0:he.slice(0,3).map(ve=>s.jsx("div",{className:`text-xs px-2 py-1 rounded ${ve.type==="gold"?"bg-yellow-500 text-white":ve.type==="green"?"bg-green-500 text-white":ve.type==="orange"?"bg-orange-500 text-white":"bg-red-500 text-white"}`,title:ve.reason,children:ve.type},ve.id))})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:s.jsxs(D,{variant:"ghost",size:"sm",onClick:()=>T("user",I.id),children:[s.jsx(D,{variant:"ghost",size:"sm",onClick:()=>V(I,p),title:p==="admin"?"Reset Password":"Reset Passcode",children:s.jsx(cp,{className:"w-4 h-4"})}),s.jsx(D,{variant:"ghost",size:"sm",onClick:()=>B(I.id,p),title:I.isActive?"Disable Access":"Enable Access",children:I.isActive?s.jsx(ol,{className:"w-4 h-4"}):s.jsx(Ks,{className:"w-4 h-4"})}),s.jsx(D,{variant:"ghost",size:"sm",onClick:()=>T(p==="admin"?"admin-user":"team-user",I.id),children:s.jsx(xt,{className:"w-4 h-4"})})]})})]},I.id)})})]})})})})]}),Pe=()=>s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Functional Units"}),s.jsx(D,{icon:s.jsx(lt,{className:"w-4 h-4"}),onClick:()=>{l({type:"functional-unit"}),n(!0)},children:"Add Functional Unit"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:k.map(I=>s.jsx(Z,{className:"hover:shadow-md transition-shadow",children:s.jsx(J,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:I.name}),s.jsx("p",{className:"text-sm text-gray-600",children:I.description}),I.skills&&I.skills.length>0&&s.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:I.skills.map((G,ae)=>s.jsx(Y,{variant:"secondary",size:"sm",children:G},ae))}),I.lead&&s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Lead: ",I.lead]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(D,{variant:"ghost",size:"sm",onClick:()=>_("functional-unit",I),children:s.jsx(Es,{className:"w-4 h-4"})}),!I.isDefault&&s.jsx(D,{variant:"ghost",size:"sm",onClick:()=>T("functional-unit",I.id),children:s.jsx(xt,{className:"w-4 h-4"})})]})]})})},I.id))})]});return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Settings"}),s.jsx("p",{className:"text-gray-600",children:"Manage categories, skills, and project stages"})]}),s.jsx("div",{className:"border-b border-gray-200",children:s.jsx("nav",{className:"-mb-px flex space-x-8",children:Te.map(I=>s.jsxs("button",{onClick:()=>t(I.key),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${e===I.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[s.jsx(I.icon,{className:"w-4 h-4"}),s.jsx("span",{children:I.label})]},I.key))})}),s.jsxs("div",{children:[e==="categories"&&S(),e==="skills"&&ie(),e==="stages"&&ce(),e==="users"&&ke(),e==="functional-units"&&Pe()]}),s.jsx(df,{isOpen:r,onClose:()=>{n(!1),l(null)},onSubmit:Ue,editingItem:a})]})}function df({isOpen:e,onClose:t,onSubmit:r,editingItem:n}){const[a,l]=m.useState({name:"",description:"",email:"",password:"",showPassword:!1,skills:[],lead:""});m.useEffect(()=>{l(n?{name:n.name||"",description:n.description||"",email:n.email||"",password:"",showPassword:!1,skills:n.skills||[],lead:n.lead||""}:{name:"",description:"",email:"",password:"",showPassword:!1,skills:[],lead:""})},[n]);const i=c=>{c.preventDefault(),n!=null&&n.type&&r(n.type,a),l({name:"",description:"",email:"",password:"",showPassword:!1,skills:[],lead:""})},o=()=>{if(!n)return"Add Item";const c=n.id?"Edit":"Add",x=n.type==="category"?"Category":n.type==="skill"?"Skill":n.type==="stage"?"Stage":n.type==="functional-unit"?"Functional Unit":"Admin User";return`${c} ${x}`};return s.jsx(Ze,{isOpen:e,onClose:t,title:o(),children:s.jsxs("form",{onSubmit:i,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name"}),s.jsx("input",{type:"text",required:!0,value:a.name,onChange:c=>l({...a,name:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:`Enter ${(n==null?void 0:n.type)||"item"} name`})]}),((n==null?void 0:n.type)==="admin-user"||(n==null?void 0:n.type)==="team-user")&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),s.jsx("input",{type:"email",required:!0,value:a.email,onChange:c=>l({...a,email:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter email address"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:a.showPassword?"text":"password",required:!0,value:a.password,onChange:c=>l({...a,password:c.target.value}),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter password",minLength:6}),s.jsx("button",{type:"button",onClick:()=>l({...a,showPassword:!a.showPassword}),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:a.showPassword?s.jsx(ol,{className:"w-4 h-4 text-gray-400"}):s.jsx(Ks,{className:"w-4 h-4 text-gray-400"})})]})]})]}),((n==null?void 0:n.type)==="stage"||(n==null?void 0:n.type)==="functional-unit")&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),s.jsx("textarea",{value:a.description,onChange:c=>l({...a,description:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:`Enter ${(n==null?void 0:n.type)==="stage"?"stage":"functional unit"} description`})]}),(n==null?void 0:n.type)==="functional-unit"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Skills"}),s.jsx("div",{className:"grid grid-cols-3 gap-2 max-h-32 overflow-y-auto border border-gray-300 rounded-lg p-2",children:["Content Writers","Instructional Designers","Graphic Designers","Developers","Animators","Tech","Sales","Marketing","QA"].map(c=>s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:a.skills.includes(c),onChange:x=>{x.target.checked?l({...a,skills:[...a.skills,c]}):l({...a,skills:a.skills.filter(f=>f!==c)})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:c})]},c))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unit Lead (Optional)"}),s.jsx("input",{type:"text",value:a.lead,onChange:c=>l({...a,lead:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter unit lead name"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx(D,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),s.jsx(D,{type:"submit",children:n!=null&&n.id?"Update":"Add"})]})]})})}function uf(){const[e,t]=m.useState("month"),[r,n]=m.useState("overview"),[a,l]=m.useState("all"),[i,o]=m.useState("all"),[c,x]=m.useState(!0),[f,j]=m.useState(!1),[d,w]=m.useState({projects:[],tasks:[],teamMembers:[],categories:[],skills:[]});m.useEffect(()=>{N()},[]);const N=async()=>{try{x(!0);const[u,g,b,k,A]=await Promise.all([We.getAll(),Oe.getAll(),De.getAll(),As.getAll(),rs.getAll()]);w({projects:u,tasks:g,teamMembers:b,categories:k,skills:A})}catch(u){console.error("Failed to load analytics data:",u)}finally{x(!1)}},P=async()=>{j(!0),await N(),j(!1)},z=m.useMemo(()=>{const u=a==="all"?d.projects:d.projects.filter(O=>O.category_id===parseInt(a)),g=i==="all"?d.tasks:d.tasks.filter(O=>O.skills&&O.skills.includes(parseInt(i))),b=new Date,k={week:7,month:30,quarter:90,year:365}[e],A=d.tasks.filter(O=>{const U=new Date(O.created_at);return(b.getTime()-U.getTime())/(1e3*3600*24)<=k}),ee=d.projects.filter(O=>{const U=new Date(O.created_at);return(b.getTime()-U.getTime())/(1e3*3600*24)<=k});return{projectStats:{total:u.length,active:u.filter(O=>O.status==="active").length,completed:u.filter(O=>O.status==="completed").length,onHold:u.filter(O=>O.status==="on-hold").length,recent:ee.length,avgDuration:u.length>0?Math.round(u.reduce((O,U)=>{if(U.start_date&&U.end_date){const oe=new Date(U.start_date),de=new Date(U.end_date);return O+(de.getTime()-oe.getTime())/(1e3*3600*24)}return O},0)/u.length):0},taskStats:{total:g.length,completed:g.filter(O=>O.status==="completed").length,inProgress:g.filter(O=>O.status==="in-progress").length,overdue:g.filter(O=>{if(!O.end_date||O.status==="completed")return!1;const U=new Date;U.setHours(0,0,0,0);const oe=new Date(O.end_date);return oe.setHours(0,0,0,0),oe<U}).length,recent:A.length,avgCompletionTime:g.filter(O=>O.status==="completed").length>0?Math.round(g.filter(O=>O.status==="completed").reduce((O,U)=>{if(U.created_at&&U.updated_at){const oe=new Date(U.created_at),de=new Date(U.updated_at);return O+(de.getTime()-oe.getTime())/(1e3*3600*24)}return O},0)/g.filter(O=>O.status==="completed").length):0},teamStats:{total:d.teamMembers.length,active:d.teamMembers.filter(O=>g.some(U=>U.assignees&&U.assignees.includes(O.id)&&U.status!=="completed")).length,available:d.teamMembers.filter(O=>!g.some(U=>U.assignees&&U.assignees.includes(O.id)&&U.status!=="completed")).length,utilization:d.teamMembers.length>0?Math.round(d.teamMembers.filter(O=>g.some(U=>U.assignees&&U.assignees.includes(O.id)&&U.status!=="completed")).length/d.teamMembers.length*100):0},productivity:{completionRate:g.length>0?Math.round(g.filter(O=>O.status==="completed").length/g.length*100):0,averageProgress:u.length>0?Math.round(u.reduce((O,U)=>O+(U.progress||0),0)/u.length):0,efficiency:g.length>0?Math.round(g.filter(O=>O.status==="completed").length/g.length*(u.reduce((O,U)=>O+(U.progress||0),0)/u.length)*100):0},trends:{taskGrowth:A.length>0?Math.round(A.length/d.tasks.length*100):0,projectGrowth:ee.length>0?Math.round(ee.length/d.projects.length*100):0,completionTrend:A.filter(O=>O.status==="completed").length>0?Math.round(A.filter(O=>O.status==="completed").length/A.length*100):0}}},[d,e,a,i]),p=m.useMemo(()=>d.categories.map(u=>({name:u.name,count:d.projects.filter(g=>g.category_id===u.id).length,percentage:d.projects.length>0?Math.round(d.projects.filter(g=>g.category_id===u.id).length/d.projects.length*100):0,avgProgress:d.projects.filter(g=>g.category_id===u.id).length>0?Math.round(d.projects.filter(g=>g.category_id===u.id).reduce((g,b)=>g+(b.progress||0),0)/d.projects.filter(g=>g.category_id===u.id).length):0,completionRate:d.projects.filter(g=>g.category_id===u.id).length>0?Math.round(d.projects.filter(g=>g.category_id===u.id&&g.status==="completed").length/d.projects.filter(g=>g.category_id===u.id).length*100):0})),[d]),h=m.useMemo(()=>d.skills.map(u=>{const g=d.tasks.filter(k=>k.skills&&k.skills.includes(u.id)),b=d.teamMembers.filter(k=>k.skills&&k.skills.includes(u.id));return{name:u.name,users:b.length,activeTasks:g.filter(k=>k.status!=="completed").length,totalTasks:g.length,completionRate:g.length>0?Math.round(g.filter(k=>k.status==="completed").length/g.length*100):0,demand:g.length>0?Math.round(g.length/d.tasks.length*100):0}}),[d]),v=m.useMemo(()=>d.teamMembers.map(u=>{const g=d.tasks.filter(ee=>ee.assignees&&ee.assignees.includes(u.id)),b=g.filter(ee=>ee.status==="completed"),k=g.length>0?Math.round(b.length/g.length*100):0,A=g.length>0?Math.round(k*.4+g.filter(ee=>{if(ee.status!=="completed")return!1;const O=new Date;O.setHours(0,0,0,0);const U=new Date(ee.end_date);return U.setHours(0,0,0,0),U>=O}).length/g.length*60):0;return{...u,totalTasks:g.length,completedTasks:b.length,completionRate:k,efficiencyScore:A,avgTaskDuration:b.length>0?Math.round(b.reduce((ee,O)=>{if(O.created_at&&O.updated_at){const U=new Date(O.created_at),oe=new Date(O.updated_at);return ee+(oe.getTime()-U.getTime())/(1e3*3600*24)}return ee},0)/b.length):0}}).sort((u,g)=>g.efficiencyScore-u.efficiencyScore).slice(0,5),[d]),E=m.useMemo(()=>{const u=d.tasks.filter(k=>{if(!k.end_date||k.status==="completed")return!1;const A=new Date;A.setHours(0,0,0,0);const ee=new Date(k.end_date);return ee.setHours(0,0,0,0),ee<A}),g=d.tasks.filter(k=>k.priority==="high"),b=d.projects.filter(k=>(k.progress||0)<30);return{overdueTasks:u.length,highPriorityTasks:g.length,lowProgressProjects:b.length,riskScore:Math.round((u.length*.4+g.length*.3+b.length*.3)/Math.max(d.tasks.length+d.projects.length,1)*100),efficiencyGap:z.productivity.completionRate>0?Math.round((100-z.productivity.completionRate)/10):0}},[d,z]),M=m.useMemo(()=>{const u=new Date,g=d.tasks.filter(k=>{const A=new Date(k.created_at);return(u.getTime()-A.getTime())/(1e3*3600*24)<=7}),b=d.tasks.filter(k=>{const A=new Date(k.created_at);return(u.getTime()-A.getTime())/(1e3*3600*24)<=30});return{weeklyGrowth:g.length>0?Math.round(g.length/d.tasks.length*100):0,monthlyGrowth:b.length>0?Math.round(b.length/d.tasks.length*100):0,weeklyCompletion:g.filter(k=>k.status==="completed").length,monthlyCompletion:b.filter(k=>k.status==="completed").length}},[d]);return c?s.jsx("div",{className:"p-6 space-y-6",children:s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading analytics data..."})]})})}):s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Analytics Dashboard"}),s.jsx("p",{className:"text-gray-600",children:"Advanced insights and performance metrics for your projects"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 rounded-lg p-1",children:[s.jsxs(D,{variant:r==="overview"?"primary":"ghost",size:"sm",onClick:()=>n("overview"),children:[s.jsx(Ks,{className:"w-4 h-4 mr-1"}),"Overview"]}),s.jsxs(D,{variant:r==="detailed"?"primary":"ghost",size:"sm",onClick:()=>n("detailed"),children:[s.jsx(ep,{className:"w-4 h-4 mr-1"}),"Detailed"]}),s.jsxs(D,{variant:r==="trends"?"primary":"ghost",size:"sm",onClick:()=>n("trends"),children:[s.jsx(Ba,{className:"w-4 h-4 mr-1"}),"Trends"]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("select",{value:a,onChange:u=>l(u.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[s.jsx("option",{value:"all",children:"All Categories"}),d.categories.map(u=>s.jsx("option",{value:u.id,children:u.name},u.id))]}),s.jsxs("select",{value:i,onChange:u=>o(u.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[s.jsx("option",{value:"all",children:"All Skills"}),d.skills.map(u=>s.jsx("option",{value:u.id,children:u.name},u.id))]}),s.jsxs("select",{value:e,onChange:u=>t(u.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[s.jsx("option",{value:"week",children:"Last Week"}),s.jsx("option",{value:"month",children:"Last Month"}),s.jsx("option",{value:"quarter",children:"Last Quarter"}),s.jsx("option",{value:"year",children:"Last Year"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(D,{variant:"outline",size:"sm",onClick:P,disabled:f,children:[s.jsx(Ii,{className:`w-4 h-4 mr-1 ${f?"animate-spin":""}`}),"Refresh"]}),s.jsxs(D,{variant:"outline",size:"sm",children:[s.jsx(ap,{className:"w-4 h-4 mr-1"}),"Export"]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(Z,{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:s.jsx(J,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("p",{className:"text-blue-100 text-sm font-medium",children:"Efficiency Score"}),s.jsx(Y,{variant:"default",className:"bg-blue-400 text-white text-xs",children:z.productivity.efficiency>z.productivity.completionRate?s.jsx(Jx,{className:"w-3 h-3"}):s.jsx(Xx,{className:"w-3 h-3"})})]}),s.jsxs("p",{className:"text-3xl font-bold",children:[z.productivity.efficiency,"%"]}),s.jsxs("p",{className:"text-blue-100 text-sm",children:[z.productivity.completionRate,"% completion rate"]})]}),s.jsx(Mi,{className:"w-12 h-12 text-blue-200"})]})})}),s.jsx(Z,{className:"bg-gradient-to-r from-green-500 to-green-600 text-white",children:s.jsx(J,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("p",{className:"text-green-100 text-sm font-medium",children:"Team Utilization"}),s.jsxs(Y,{variant:"default",className:"bg-green-400 text-white text-xs",children:[z.teamStats.utilization,"%"]})]}),s.jsx("p",{className:"text-3xl font-bold",children:z.teamStats.active}),s.jsxs("p",{className:"text-green-100 text-sm",children:["of ",z.teamStats.total," members active"]})]}),s.jsx(He,{className:"w-12 h-12 text-green-200"})]})})}),s.jsx(Z,{className:"bg-gradient-to-r from-purple-500 to-purple-600 text-white",children:s.jsx(J,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("p",{className:"text-purple-100 text-sm font-medium",children:"Productivity"}),s.jsxs(Y,{variant:"default",className:"bg-purple-400 text-white text-xs",children:[z.trends.completionTrend,"% trend"]})]}),s.jsxs("p",{className:"text-3xl font-bold",children:[z.productivity.averageProgress,"%"]}),s.jsxs("p",{className:"text-purple-100 text-sm",children:[z.taskStats.completed,"/",z.taskStats.total," tasks done"]})]}),s.jsx(xp,{className:"w-12 h-12 text-purple-200"})]})})}),s.jsx(Z,{className:"bg-gradient-to-r from-red-500 to-red-600 text-white",children:s.jsx(J,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("p",{className:"text-red-100 text-sm font-medium",children:"Risk Score"}),s.jsxs(Y,{variant:"default",className:"bg-red-400 text-white text-xs",children:[E.riskScore,"%"]})]}),s.jsx("p",{className:"text-3xl font-bold",children:z.taskStats.overdue}),s.jsxs("p",{className:"text-red-100 text-sm",children:[E.highPriorityTasks," high priority"]})]}),s.jsx(Ct,{className:"w-12 h-12 text-red-200"})]})})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx(Z,{className:"bg-gradient-to-r from-yellow-500 to-yellow-600 text-white",children:s.jsx(J,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-yellow-100 text-sm font-medium",children:"Weekly Growth"}),s.jsxs("p",{className:"text-2xl font-bold",children:[M.weeklyGrowth,"%"]}),s.jsxs("p",{className:"text-yellow-100 text-sm",children:[M.weeklyCompletion," completed this week"]})]}),s.jsx(Ba,{className:"w-10 h-10 text-yellow-200"})]})})}),s.jsx(Z,{className:"bg-gradient-to-r from-indigo-500 to-indigo-600 text-white",children:s.jsx(J,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-indigo-100 text-sm font-medium",children:"Avg Task Duration"}),s.jsx("p",{className:"text-2xl font-bold",children:z.taskStats.avgCompletionTime}),s.jsx("p",{className:"text-indigo-100 text-sm",children:"days to complete"})]}),s.jsx(np,{className:"w-10 h-10 text-indigo-200"})]})})}),s.jsx(Z,{className:"bg-gradient-to-r from-pink-500 to-pink-600 text-white",children:s.jsx(J,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-pink-100 text-sm font-medium",children:"Efficiency Gap"}),s.jsxs("p",{className:"text-2xl font-bold",children:[E.efficiencyGap,"%"]}),s.jsx("p",{className:"text-pink-100 text-sm",children:"room for improvement"})]}),s.jsx(ip,{className:"w-10 h-10 text-pink-200"})]})})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(Z,{children:[s.jsx(Ie,{children:s.jsxs(Me,{className:"flex items-center",children:[s.jsx(hp,{className:"w-5 h-5 mr-2"}),"Project Status Distribution"]})}),s.jsx(J,{className:"space-y-4",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-32",children:s.jsx(yt,{value:z.projectStats.total>0?z.projectStats.active/z.projectStats.total*100:0,variant:"default",showLabel:!1})}),s.jsx("span",{className:"text-sm text-gray-600",children:z.projectStats.active})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Completed"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-32",children:s.jsx(yt,{value:z.projectStats.total>0?z.projectStats.completed/z.projectStats.total*100:0,variant:"success",showLabel:!1})}),s.jsx("span",{className:"text-sm text-gray-600",children:z.projectStats.completed})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"On Hold"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-32",children:s.jsx(yt,{value:z.projectStats.total>0?z.projectStats.onHold/z.projectStats.total*100:0,variant:"warning",showLabel:!1})}),s.jsx("span",{className:"text-sm text-gray-600",children:z.projectStats.onHold})]})]})]})})]}),s.jsxs(Z,{children:[s.jsx(Ie,{children:s.jsxs(Me,{className:"flex items-center",children:[s.jsx(Ts,{className:"w-5 h-5 mr-2"}),"Category Performance"]})}),s.jsx(J,{className:"space-y-4",children:p.map(u=>s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:u.name}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(Y,{variant:u.completionRate>=80?"success":u.completionRate>=60?"default":"warning",children:[u.completionRate,"%"]}),s.jsxs("span",{className:"text-sm text-gray-600",children:[u.count," projects"]})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[s.jsx("span",{children:"Distribution"}),s.jsxs("span",{children:[u.percentage,"%"]})]}),s.jsx(yt,{value:u.percentage,showLabel:!1}),s.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[s.jsx("span",{children:"Avg Progress"}),s.jsxs("span",{children:[u.avgProgress,"%"]})]}),s.jsx(yt,{value:u.avgProgress,variant:"success",showLabel:!1})]})]},u.name))})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(Z,{children:[s.jsx(Ie,{children:s.jsxs(Me,{className:"flex items-center",children:[s.jsx(Gc,{className:"w-5 h-5 mr-2"}),"Top Performers"]})}),s.jsx(J,{className:"space-y-4",children:v.map((u,g)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-gradient-to-r from-yellow-400 to-yellow-600 text-white rounded-full font-semibold text-sm",children:g===0?s.jsx(Gc,{className:"w-4 h-4"}):g===1?s.jsx(Ei,{className:"w-4 h-4"}):g===2?s.jsx(fm,{className:"w-4 h-4"}):`#${g+1}`}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:u.name}),s.jsxs("p",{className:"text-sm text-gray-600",children:[u.completedTasks,"/",u.totalTasks," tasks • ",u.avgTaskDuration," days avg"]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs(Y,{variant:u.efficiencyScore>=80?"success":u.efficiencyScore>=60?"default":"warning",children:[u.efficiencyScore,"%"]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Efficiency"})]})]},u.id))})]}),s.jsxs(Z,{children:[s.jsx(Ie,{children:s.jsxs(Me,{className:"flex items-center",children:[s.jsx(He,{className:"w-5 h-5 mr-2"}),"Skill Demand & Utilization"]})}),s.jsx(J,{className:"space-y-4",children:h.slice(0,6).map(u=>s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:u.name}),s.jsxs("p",{className:"text-sm text-gray-600",children:[u.users," members • ",u.totalTasks," total tasks"]})]}),s.jsx("div",{className:"text-right",children:s.jsxs(Y,{variant:u.demand>=20?"success":u.demand>=10?"default":"warning",children:[u.demand,"% demand"]})})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[s.jsx("span",{children:"Completion Rate"}),s.jsxs("span",{children:[u.completionRate,"%"]})]}),s.jsx(yt,{value:u.completionRate,variant:u.completionRate>=80?"success":u.completionRate>=60?"default":"warning",showLabel:!1}),s.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[s.jsx("span",{children:"Active Tasks"}),s.jsx("span",{children:u.activeTasks})]})]})]},u.name))})]})]}),s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:s.jsxs(Z,{children:[s.jsx(Ie,{children:s.jsxs(Me,{className:"flex items-center",children:[s.jsx(up,{className:"w-5 h-5 mr-2"}),"Performance Insights"]})}),s.jsx(J,{className:"space-y-4",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Ct,{className:"w-5 h-5 text-orange-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Overdue Tasks"})]}),s.jsx(Y,{variant:"warning",children:E.overdueTasks})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 bg-yellow-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Mi,{className:"w-5 h-5 text-yellow-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"High Priority"})]}),s.jsx(Y,{variant:"warning",children:E.highPriorityTasks})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(gp,{className:"w-5 h-5 text-red-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Low Progress Projects"})]}),s.jsx(Y,{variant:"danger",children:E.lowProgressProjects})]})]})})]})}),s.jsxs(Z,{children:[s.jsx(Ie,{children:s.jsxs(Me,{className:"flex items-center",children:[s.jsx(sp,{className:"w-5 h-5 mr-2"}),"Task Timeline Overview"]})}),s.jsx(J,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[s.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[s.jsx("div",{className:"text-3xl font-bold text-blue-600",children:z.taskStats.total}),s.jsx("div",{className:"text-sm text-gray-600",children:"Total Tasks"}),s.jsxs("div",{className:"text-xs text-blue-500 mt-1",children:["+",M.weeklyGrowth,"% this week"]})]}),s.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[s.jsx("div",{className:"text-3xl font-bold text-green-600",children:z.taskStats.completed}),s.jsx("div",{className:"text-sm text-gray-600",children:"Completed"}),s.jsxs("div",{className:"text-xs text-green-500 mt-1",children:["+",M.weeklyCompletion," this week"]})]}),s.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[s.jsx("div",{className:"text-3xl font-bold text-purple-600",children:z.taskStats.inProgress}),s.jsx("div",{className:"text-sm text-gray-600",children:"In Progress"}),s.jsxs("div",{className:"text-xs text-purple-500 mt-1",children:[z.taskStats.avgCompletionTime," days avg"]})]}),s.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[s.jsx("div",{className:"text-3xl font-bold text-red-600",children:z.taskStats.overdue}),s.jsx("div",{className:"text-sm text-gray-600",children:"Overdue"}),s.jsxs("div",{className:"text-xs text-red-500 mt-1",children:["Risk Score: ",E.riskScore,"%"]})]})]})})]})]})}function mf(){const{state:e}=mr(),t=()=>{switch(e.selectedView){case"projects":return s.jsx(tf,{});case"teams":return s.jsx(rf,{});case"tasks":return s.jsx(Hp,{});case"allocations":return s.jsx(lf,{});case"analytics":return s.jsx(uf,{});case"settings":return s.jsx(cf,{});default:return s.jsx(Lp,{})}};return s.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[s.jsx(Mp,{}),s.jsxs("div",{className:"flex-1 flex flex-col",children:[s.jsx(Ap,{}),s.jsx("main",{className:"flex-1 overflow-y-auto",children:t()})]})]})}function hf(){const{user:e,loading:t}=zn(),[r,n]=m.useState(null),[a,l]=m.useState(!1);return t?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Rn,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-blue-600"}),s.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):a?r?s.jsx(Sp,{user:r,onLogout:()=>{n(null),l(!1)}}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-emerald-100 flex items-center justify-center p-4",children:s.jsx(kp,{onLogin:i=>n(i),onBackToAdmin:()=>l(!1)})}):e?s.jsx(mf,{}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:s.jsx(wp,{onSwitchToTeam:()=>l(!0)})})}lm(document.getElementById("root")).render(s.jsx(m.StrictMode,{children:s.jsx(Gx,{children:s.jsx(Pp,{children:s.jsx(hf,{})})})}));
