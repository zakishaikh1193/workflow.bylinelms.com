(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(a){if(a.ep)return;a.ep=!0;const l=r(a);fetch(a.href,l)}})();var hd={exports:{}},ml={},pd={exports:{}},Se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jn=Symbol.for("react.element"),Hm=Symbol.for("react.portal"),Bm=Symbol.for("react.fragment"),Vm=Symbol.for("react.strict_mode"),Wm=Symbol.for("react.profiler"),Gm=Symbol.for("react.provider"),qm=Symbol.for("react.context"),Qm=Symbol.for("react.forward_ref"),Km=Symbol.for("react.suspense"),Ym=Symbol.for("react.memo"),Xm=Symbol.for("react.lazy"),sc=Symbol.iterator;function Zm(e){return e===null||typeof e!="object"?null:(e=sc&&e[sc]||e["@@iterator"],typeof e=="function"?e:null)}var gd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},fd=Object.assign,yd={};function cn(e,s,r){this.props=e,this.context=s,this.refs=yd,this.updater=r||gd}cn.prototype.isReactComponent={};cn.prototype.setState=function(e,s){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,s,"setState")};cn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function vd(){}vd.prototype=cn.prototype;function no(e,s,r){this.props=e,this.context=s,this.refs=yd,this.updater=r||gd}var ao=no.prototype=new vd;ao.constructor=no;fd(ao,cn.prototype);ao.isPureReactComponent=!0;var rc=Array.isArray,jd=Object.prototype.hasOwnProperty,lo={current:null},wd={key:!0,ref:!0,__self:!0,__source:!0};function Nd(e,s,r){var n,a={},l=null,i=null;if(s!=null)for(n in s.ref!==void 0&&(i=s.ref),s.key!==void 0&&(l=""+s.key),s)jd.call(s,n)&&!wd.hasOwnProperty(n)&&(a[n]=s[n]);var o=arguments.length-2;if(o===1)a.children=r;else if(1<o){for(var d=Array(o),m=0;m<o;m++)d[m]=arguments[m+2];a.children=d}if(e&&e.defaultProps)for(n in o=e.defaultProps,o)a[n]===void 0&&(a[n]=o[n]);return{$$typeof:Jn,type:e,key:l,ref:i,props:a,_owner:lo.current}}function Jm(e,s){return{$$typeof:Jn,type:e.type,key:s,ref:e.ref,props:e.props,_owner:e._owner}}function io(e){return typeof e=="object"&&e!==null&&e.$$typeof===Jn}function ex(e){var s={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return s[r]})}var nc=/\/+/g;function El(e,s){return typeof e=="object"&&e!==null&&e.key!=null?ex(""+e.key):s.toString(36)}function Ca(e,s,r,n,a){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(l){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Jn:case Hm:i=!0}}if(i)return i=e,a=a(i),e=n===""?"."+El(i,0):n,rc(a)?(r="",e!=null&&(r=e.replace(nc,"$&/")+"/"),Ca(a,s,r,"",function(m){return m})):a!=null&&(io(a)&&(a=Jm(a,r+(!a.key||i&&i.key===a.key?"":(""+a.key).replace(nc,"$&/")+"/")+e)),s.push(a)),1;if(i=0,n=n===""?".":n+":",rc(e))for(var o=0;o<e.length;o++){l=e[o];var d=n+El(l,o);i+=Ca(l,s,r,d,a)}else if(d=Zm(e),typeof d=="function")for(e=d.call(e),o=0;!(l=e.next()).done;)l=l.value,d=n+El(l,o++),i+=Ca(l,s,r,d,a);else if(l==="object")throw s=String(e),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return i}function ia(e,s,r){if(e==null)return e;var n=[],a=0;return Ca(e,n,"","",function(l){return s.call(r,l,a++)}),n}function tx(e){if(e._status===-1){var s=e._result;s=s(),s.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=s)}if(e._status===1)return e._result.default;throw e._result}var It={current:null},Da={transition:null},sx={ReactCurrentDispatcher:It,ReactCurrentBatchConfig:Da,ReactCurrentOwner:lo};function bd(){throw Error("act(...) is not supported in production builds of React.")}Se.Children={map:ia,forEach:function(e,s,r){ia(e,function(){s.apply(this,arguments)},r)},count:function(e){var s=0;return ia(e,function(){s++}),s},toArray:function(e){return ia(e,function(s){return s})||[]},only:function(e){if(!io(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Se.Component=cn;Se.Fragment=Bm;Se.Profiler=Wm;Se.PureComponent=no;Se.StrictMode=Vm;Se.Suspense=Km;Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sx;Se.act=bd;Se.cloneElement=function(e,s,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=fd({},e.props),a=e.key,l=e.ref,i=e._owner;if(s!=null){if(s.ref!==void 0&&(l=s.ref,i=lo.current),s.key!==void 0&&(a=""+s.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(d in s)jd.call(s,d)&&!wd.hasOwnProperty(d)&&(n[d]=s[d]===void 0&&o!==void 0?o[d]:s[d])}var d=arguments.length-2;if(d===1)n.children=r;else if(1<d){o=Array(d);for(var m=0;m<d;m++)o[m]=arguments[m+2];n.children=o}return{$$typeof:Jn,type:e.type,key:a,ref:l,props:n,_owner:i}};Se.createContext=function(e){return e={$$typeof:qm,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Gm,_context:e},e.Consumer=e};Se.createElement=Nd;Se.createFactory=function(e){var s=Nd.bind(null,e);return s.type=e,s};Se.createRef=function(){return{current:null}};Se.forwardRef=function(e){return{$$typeof:Qm,render:e}};Se.isValidElement=io;Se.lazy=function(e){return{$$typeof:Xm,_payload:{_status:-1,_result:e},_init:tx}};Se.memo=function(e,s){return{$$typeof:Ym,type:e,compare:s===void 0?null:s}};Se.startTransition=function(e){var s=Da.transition;Da.transition={};try{e()}finally{Da.transition=s}};Se.unstable_act=bd;Se.useCallback=function(e,s){return It.current.useCallback(e,s)};Se.useContext=function(e){return It.current.useContext(e)};Se.useDebugValue=function(){};Se.useDeferredValue=function(e){return It.current.useDeferredValue(e)};Se.useEffect=function(e,s){return It.current.useEffect(e,s)};Se.useId=function(){return It.current.useId()};Se.useImperativeHandle=function(e,s,r){return It.current.useImperativeHandle(e,s,r)};Se.useInsertionEffect=function(e,s){return It.current.useInsertionEffect(e,s)};Se.useLayoutEffect=function(e,s){return It.current.useLayoutEffect(e,s)};Se.useMemo=function(e,s){return It.current.useMemo(e,s)};Se.useReducer=function(e,s,r){return It.current.useReducer(e,s,r)};Se.useRef=function(e){return It.current.useRef(e)};Se.useState=function(e){return It.current.useState(e)};Se.useSyncExternalStore=function(e,s,r){return It.current.useSyncExternalStore(e,s,r)};Se.useTransition=function(){return It.current.useTransition()};Se.version="18.3.1";pd.exports=Se;var u=pd.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rx=u,nx=Symbol.for("react.element"),ax=Symbol.for("react.fragment"),lx=Object.prototype.hasOwnProperty,ix=rx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ox={key:!0,ref:!0,__self:!0,__source:!0};function kd(e,s,r){var n,a={},l=null,i=null;r!==void 0&&(l=""+r),s.key!==void 0&&(l=""+s.key),s.ref!==void 0&&(i=s.ref);for(n in s)lx.call(s,n)&&!ox.hasOwnProperty(n)&&(a[n]=s[n]);if(e&&e.defaultProps)for(n in s=e.defaultProps,s)a[n]===void 0&&(a[n]=s[n]);return{$$typeof:nx,type:e,key:l,ref:i,props:a,_owner:ix.current}}ml.Fragment=ax;ml.jsx=kd;ml.jsxs=kd;hd.exports=ml;var t=hd.exports,Sd={exports:{}},Xt={},_d={exports:{}},Cd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function s(C,P){var U=C.length;C.push(P);e:for(;0<U;){var G=U-1>>>1,K=C[G];if(0<a(K,P))C[G]=P,C[U]=K,U=G;else break e}}function r(C){return C.length===0?null:C[0]}function n(C){if(C.length===0)return null;var P=C[0],U=C.pop();if(U!==P){C[0]=U;e:for(var G=0,K=C.length,le=K>>>1;G<le;){var te=2*(G+1)-1,_=C[te],xe=te+1,pe=C[xe];if(0>a(_,U))xe<K&&0>a(pe,_)?(C[G]=pe,C[xe]=U,G=xe):(C[G]=_,C[te]=U,G=te);else if(xe<K&&0>a(pe,U))C[G]=pe,C[xe]=U,G=xe;else break e}}return P}function a(C,P){var U=C.sortIndex-P.sortIndex;return U!==0?U:C.id-P.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var d=[],m=[],p=1,j=null,c=3,v=!1,y=!1,M=!1,z=typeof setTimeout=="function"?setTimeout:null,h=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function f(C){for(var P=r(m);P!==null;){if(P.callback===null)n(m);else if(P.startTime<=C)n(m),P.sortIndex=P.expirationTime,s(d,P);else break;P=r(m)}}function E(C){if(M=!1,f(C),!y)if(r(d)!==null)y=!0,se(A);else{var P=r(m);P!==null&&fe(E,P.startTime-C)}}function A(C,P){y=!1,M&&(M=!1,h(b),b=-1),v=!0;var U=c;try{for(f(P),j=r(d);j!==null&&(!(j.expirationTime>P)||C&&!ae());){var G=j.callback;if(typeof G=="function"){j.callback=null,c=j.priorityLevel;var K=G(j.expirationTime<=P);P=e.unstable_now(),typeof K=="function"?j.callback=K:j===r(d)&&n(d),f(P)}else n(d);j=r(d)}if(j!==null)var le=!0;else{var te=r(m);te!==null&&fe(E,te.startTime-P),le=!1}return le}finally{j=null,c=U,v=!1}}var g=!1,N=null,b=-1,S=5,L=-1;function ae(){return!(e.unstable_now()-L<S)}function O(){if(N!==null){var C=e.unstable_now();L=C;var P=!0;try{P=N(!0,C)}finally{P?W():(g=!1,N=null)}}else g=!1}var W;if(typeof x=="function")W=function(){x(O)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,V=T.port2;T.port1.onmessage=O,W=function(){V.postMessage(null)}}else W=function(){z(O,0)};function se(C){N=C,g||(g=!0,W())}function fe(C,P){b=z(function(){C(e.unstable_now())},P)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(C){C.callback=null},e.unstable_continueExecution=function(){y||v||(y=!0,se(A))},e.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<C?Math.floor(1e3/C):5},e.unstable_getCurrentPriorityLevel=function(){return c},e.unstable_getFirstCallbackNode=function(){return r(d)},e.unstable_next=function(C){switch(c){case 1:case 2:case 3:var P=3;break;default:P=c}var U=c;c=P;try{return C()}finally{c=U}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(C,P){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var U=c;c=C;try{return P()}finally{c=U}},e.unstable_scheduleCallback=function(C,P,U){var G=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?G+U:G):U=G,C){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=U+K,C={id:p++,callback:P,priorityLevel:C,startTime:U,expirationTime:K,sortIndex:-1},U>G?(C.sortIndex=U,s(m,C),r(d)===null&&C===r(m)&&(M?(h(b),b=-1):M=!0,fe(E,U-G))):(C.sortIndex=K,s(d,C),y||v||(y=!0,se(A))),C},e.unstable_shouldYield=ae,e.unstable_wrapCallback=function(C){var P=c;return function(){var U=c;c=P;try{return C.apply(this,arguments)}finally{c=U}}}})(Cd);_d.exports=Cd;var cx=_d.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dx=u,Yt=cx;function Q(e){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Dd=new Set,An={};function Mr(e,s){tn(e,s),tn(e+"Capture",s)}function tn(e,s){for(An[e]=s,e=0;e<s.length;e++)Dd.add(s[e])}var Fs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ni=Object.prototype.hasOwnProperty,ux=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ac={},lc={};function mx(e){return ni.call(lc,e)?!0:ni.call(ac,e)?!1:ux.test(e)?lc[e]=!0:(ac[e]=!0,!1)}function xx(e,s,r,n){if(r!==null&&r.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function hx(e,s,r,n){if(s===null||typeof s>"u"||xx(e,s,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function At(e,s,r,n,a,l,i){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=s,this.sanitizeURL=l,this.removeEmptyString=i}var wt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){wt[e]=new At(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var s=e[0];wt[s]=new At(s,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){wt[e]=new At(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){wt[e]=new At(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){wt[e]=new At(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){wt[e]=new At(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){wt[e]=new At(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){wt[e]=new At(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){wt[e]=new At(e,5,!1,e.toLowerCase(),null,!1,!1)});var oo=/[\-:]([a-z])/g;function co(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var s=e.replace(oo,co);wt[s]=new At(s,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var s=e.replace(oo,co);wt[s]=new At(s,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var s=e.replace(oo,co);wt[s]=new At(s,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){wt[e]=new At(e,1,!1,e.toLowerCase(),null,!1,!1)});wt.xlinkHref=new At("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){wt[e]=new At(e,1,!1,e.toLowerCase(),null,!0,!0)});function uo(e,s,r,n){var a=wt.hasOwnProperty(s)?wt[s]:null;(a!==null?a.type!==0:n||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(hx(s,r,a,n)&&(r=null),n||a===null?mx(s)&&(r===null?e.removeAttribute(s):e.setAttribute(s,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(s=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(s):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,s,r):e.setAttribute(s,r))))}var Us=dx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,oa=Symbol.for("react.element"),Fr=Symbol.for("react.portal"),Rr=Symbol.for("react.fragment"),mo=Symbol.for("react.strict_mode"),ai=Symbol.for("react.profiler"),Td=Symbol.for("react.provider"),Ed=Symbol.for("react.context"),xo=Symbol.for("react.forward_ref"),li=Symbol.for("react.suspense"),ii=Symbol.for("react.suspense_list"),ho=Symbol.for("react.memo"),Vs=Symbol.for("react.lazy"),Pd=Symbol.for("react.offscreen"),ic=Symbol.iterator;function xn(e){return e===null||typeof e!="object"?null:(e=ic&&e[ic]||e["@@iterator"],typeof e=="function"?e:null)}var Ye=Object.assign,Pl;function wn(e){if(Pl===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);Pl=s&&s[1]||""}return`
`+Pl+e}var Ml=!1;function Il(e,s){if(!e||Ml)return"";Ml=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(m){var n=m}Reflect.construct(e,[],s)}else{try{s.call()}catch(m){n=m}e.call(s.prototype)}else{try{throw Error()}catch(m){n=m}e()}}catch(m){if(m&&n&&typeof m.stack=="string"){for(var a=m.stack.split(`
`),l=n.stack.split(`
`),i=a.length-1,o=l.length-1;1<=i&&0<=o&&a[i]!==l[o];)o--;for(;1<=i&&0<=o;i--,o--)if(a[i]!==l[o]){if(i!==1||o!==1)do if(i--,o--,0>o||a[i]!==l[o]){var d=`
`+a[i].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=i&&0<=o);break}}}finally{Ml=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?wn(e):""}function px(e){switch(e.tag){case 5:return wn(e.type);case 16:return wn("Lazy");case 13:return wn("Suspense");case 19:return wn("SuspenseList");case 0:case 2:case 15:return e=Il(e.type,!1),e;case 11:return e=Il(e.type.render,!1),e;case 1:return e=Il(e.type,!0),e;default:return""}}function oi(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Rr:return"Fragment";case Fr:return"Portal";case ai:return"Profiler";case mo:return"StrictMode";case li:return"Suspense";case ii:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ed:return(e.displayName||"Context")+".Consumer";case Td:return(e._context.displayName||"Context")+".Provider";case xo:var s=e.render;return e=e.displayName,e||(e=s.displayName||s.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ho:return s=e.displayName||null,s!==null?s:oi(e.type)||"Memo";case Vs:s=e._payload,e=e._init;try{return oi(e(s))}catch{}}return null}function gx(e){var s=e.type;switch(e.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=s.render,e=e.displayName||e.name||"",s.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return oi(s);case 8:return s===mo?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function dr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Md(e){var s=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function fx(e){var s=Md(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,s),n=""+e[s];if(!e.hasOwnProperty(s)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,l=r.set;return Object.defineProperty(e,s,{configurable:!0,get:function(){return a.call(this)},set:function(i){n=""+i,l.call(this,i)}}),Object.defineProperty(e,s,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){e._valueTracker=null,delete e[s]}}}}function ca(e){e._valueTracker||(e._valueTracker=fx(e))}function Id(e){if(!e)return!1;var s=e._valueTracker;if(!s)return!0;var r=s.getValue(),n="";return e&&(n=Md(e)?e.checked?"true":"false":e.value),e=n,e!==r?(s.setValue(e),!0):!1}function Oa(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ci(e,s){var r=s.checked;return Ye({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function oc(e,s){var r=s.defaultValue==null?"":s.defaultValue,n=s.checked!=null?s.checked:s.defaultChecked;r=dr(s.value!=null?s.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Ad(e,s){s=s.checked,s!=null&&uo(e,"checked",s,!1)}function di(e,s){Ad(e,s);var r=dr(s.value),n=s.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}s.hasOwnProperty("value")?ui(e,s.type,r):s.hasOwnProperty("defaultValue")&&ui(e,s.type,dr(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(e.defaultChecked=!!s.defaultChecked)}function cc(e,s,r){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var n=s.type;if(!(n!=="submit"&&n!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+e._wrapperState.initialValue,r||s===e.value||(e.value=s),e.defaultValue=s}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function ui(e,s,r){(s!=="number"||Oa(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Nn=Array.isArray;function Kr(e,s,r,n){if(e=e.options,s){s={};for(var a=0;a<r.length;a++)s["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=s.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+dr(r),s=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}s!==null||e[a].disabled||(s=e[a])}s!==null&&(s.selected=!0)}}function mi(e,s){if(s.dangerouslySetInnerHTML!=null)throw Error(Q(91));return Ye({},s,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function dc(e,s){var r=s.value;if(r==null){if(r=s.children,s=s.defaultValue,r!=null){if(s!=null)throw Error(Q(92));if(Nn(r)){if(1<r.length)throw Error(Q(93));r=r[0]}s=r}s==null&&(s=""),r=s}e._wrapperState={initialValue:dr(r)}}function Ld(e,s){var r=dr(s.value),n=dr(s.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),s.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function uc(e){var s=e.textContent;s===e._wrapperState.initialValue&&s!==""&&s!==null&&(e.value=s)}function zd(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xi(e,s){return e==null||e==="http://www.w3.org/1999/xhtml"?zd(s):e==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var da,Fd=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(s,r,n,a)})}:e}(function(e,s){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=s;else{for(da=da||document.createElement("div"),da.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=da.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;s.firstChild;)e.appendChild(s.firstChild)}});function Ln(e,s){if(s){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=s;return}}e.textContent=s}var Sn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},yx=["Webkit","ms","Moz","O"];Object.keys(Sn).forEach(function(e){yx.forEach(function(s){s=s+e.charAt(0).toUpperCase()+e.substring(1),Sn[s]=Sn[e]})});function Rd(e,s,r){return s==null||typeof s=="boolean"||s===""?"":r||typeof s!="number"||s===0||Sn.hasOwnProperty(e)&&Sn[e]?(""+s).trim():s+"px"}function $d(e,s){e=e.style;for(var r in s)if(s.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=Rd(r,s[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var vx=Ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hi(e,s){if(s){if(vx[e]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(Q(137,e));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(Q(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(Q(61))}if(s.style!=null&&typeof s.style!="object")throw Error(Q(62))}}function pi(e,s){if(e.indexOf("-")===-1)return typeof s.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gi=null;function po(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var fi=null,Yr=null,Xr=null;function mc(e){if(e=sa(e)){if(typeof fi!="function")throw Error(Q(280));var s=e.stateNode;s&&(s=fl(s),fi(e.stateNode,e.type,s))}}function Od(e){Yr?Xr?Xr.push(e):Xr=[e]:Yr=e}function Ud(){if(Yr){var e=Yr,s=Xr;if(Xr=Yr=null,mc(e),s)for(e=0;e<s.length;e++)mc(s[e])}}function Hd(e,s){return e(s)}function Bd(){}var Al=!1;function Vd(e,s,r){if(Al)return e(s,r);Al=!0;try{return Hd(e,s,r)}finally{Al=!1,(Yr!==null||Xr!==null)&&(Bd(),Ud())}}function zn(e,s){var r=e.stateNode;if(r===null)return null;var n=fl(r);if(n===null)return null;r=n[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Q(231,s,typeof r));return r}var yi=!1;if(Fs)try{var hn={};Object.defineProperty(hn,"passive",{get:function(){yi=!0}}),window.addEventListener("test",hn,hn),window.removeEventListener("test",hn,hn)}catch{yi=!1}function jx(e,s,r,n,a,l,i,o,d){var m=Array.prototype.slice.call(arguments,3);try{s.apply(r,m)}catch(p){this.onError(p)}}var _n=!1,Ua=null,Ha=!1,vi=null,wx={onError:function(e){_n=!0,Ua=e}};function Nx(e,s,r,n,a,l,i,o,d){_n=!1,Ua=null,jx.apply(wx,arguments)}function bx(e,s,r,n,a,l,i,o,d){if(Nx.apply(this,arguments),_n){if(_n){var m=Ua;_n=!1,Ua=null}else throw Error(Q(198));Ha||(Ha=!0,vi=m)}}function Ir(e){var s=e,r=e;if(e.alternate)for(;s.return;)s=s.return;else{e=s;do s=e,s.flags&4098&&(r=s.return),e=s.return;while(e)}return s.tag===3?r:null}function Wd(e){if(e.tag===13){var s=e.memoizedState;if(s===null&&(e=e.alternate,e!==null&&(s=e.memoizedState)),s!==null)return s.dehydrated}return null}function xc(e){if(Ir(e)!==e)throw Error(Q(188))}function kx(e){var s=e.alternate;if(!s){if(s=Ir(e),s===null)throw Error(Q(188));return s!==e?null:e}for(var r=e,n=s;;){var a=r.return;if(a===null)break;var l=a.alternate;if(l===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===r)return xc(a),e;if(l===n)return xc(a),s;l=l.sibling}throw Error(Q(188))}if(r.return!==n.return)r=a,n=l;else{for(var i=!1,o=a.child;o;){if(o===r){i=!0,r=a,n=l;break}if(o===n){i=!0,n=a,r=l;break}o=o.sibling}if(!i){for(o=l.child;o;){if(o===r){i=!0,r=l,n=a;break}if(o===n){i=!0,n=l,r=a;break}o=o.sibling}if(!i)throw Error(Q(189))}}if(r.alternate!==n)throw Error(Q(190))}if(r.tag!==3)throw Error(Q(188));return r.stateNode.current===r?e:s}function Gd(e){return e=kx(e),e!==null?qd(e):null}function qd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var s=qd(e);if(s!==null)return s;e=e.sibling}return null}var Qd=Yt.unstable_scheduleCallback,hc=Yt.unstable_cancelCallback,Sx=Yt.unstable_shouldYield,_x=Yt.unstable_requestPaint,tt=Yt.unstable_now,Cx=Yt.unstable_getCurrentPriorityLevel,go=Yt.unstable_ImmediatePriority,Kd=Yt.unstable_UserBlockingPriority,Ba=Yt.unstable_NormalPriority,Dx=Yt.unstable_LowPriority,Yd=Yt.unstable_IdlePriority,xl=null,ks=null;function Tx(e){if(ks&&typeof ks.onCommitFiberRoot=="function")try{ks.onCommitFiberRoot(xl,e,void 0,(e.current.flags&128)===128)}catch{}}var ps=Math.clz32?Math.clz32:Mx,Ex=Math.log,Px=Math.LN2;function Mx(e){return e>>>=0,e===0?32:31-(Ex(e)/Px|0)|0}var ua=64,ma=4194304;function bn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Va(e,s){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,l=e.pingedLanes,i=r&268435455;if(i!==0){var o=i&~a;o!==0?n=bn(o):(l&=i,l!==0&&(n=bn(l)))}else i=r&~a,i!==0?n=bn(i):l!==0&&(n=bn(l));if(n===0)return 0;if(s!==0&&s!==n&&!(s&a)&&(a=n&-n,l=s&-s,a>=l||a===16&&(l&4194240)!==0))return s;if(n&4&&(n|=r&16),s=e.entangledLanes,s!==0)for(e=e.entanglements,s&=n;0<s;)r=31-ps(s),a=1<<r,n|=e[r],s&=~a;return n}function Ix(e,s){switch(e){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ax(e,s){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,l=e.pendingLanes;0<l;){var i=31-ps(l),o=1<<i,d=a[i];d===-1?(!(o&r)||o&n)&&(a[i]=Ix(o,s)):d<=s&&(e.expiredLanes|=o),l&=~o}}function ji(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Xd(){var e=ua;return ua<<=1,!(ua&4194240)&&(ua=64),e}function Ll(e){for(var s=[],r=0;31>r;r++)s.push(e);return s}function ea(e,s,r){e.pendingLanes|=s,s!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,s=31-ps(s),e[s]=r}function Lx(e,s){var r=e.pendingLanes&~s;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=s,e.mutableReadLanes&=s,e.entangledLanes&=s,s=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-ps(r),l=1<<a;s[a]=0,n[a]=-1,e[a]=-1,r&=~l}}function fo(e,s){var r=e.entangledLanes|=s;for(e=e.entanglements;r;){var n=31-ps(r),a=1<<n;a&s|e[n]&s&&(e[n]|=s),r&=~a}}var Pe=0;function Zd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Jd,yo,eu,tu,su,wi=!1,xa=[],tr=null,sr=null,rr=null,Fn=new Map,Rn=new Map,Gs=[],zx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pc(e,s){switch(e){case"focusin":case"focusout":tr=null;break;case"dragenter":case"dragleave":sr=null;break;case"mouseover":case"mouseout":rr=null;break;case"pointerover":case"pointerout":Fn.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rn.delete(s.pointerId)}}function pn(e,s,r,n,a,l){return e===null||e.nativeEvent!==l?(e={blockedOn:s,domEventName:r,eventSystemFlags:n,nativeEvent:l,targetContainers:[a]},s!==null&&(s=sa(s),s!==null&&yo(s)),e):(e.eventSystemFlags|=n,s=e.targetContainers,a!==null&&s.indexOf(a)===-1&&s.push(a),e)}function Fx(e,s,r,n,a){switch(s){case"focusin":return tr=pn(tr,e,s,r,n,a),!0;case"dragenter":return sr=pn(sr,e,s,r,n,a),!0;case"mouseover":return rr=pn(rr,e,s,r,n,a),!0;case"pointerover":var l=a.pointerId;return Fn.set(l,pn(Fn.get(l)||null,e,s,r,n,a)),!0;case"gotpointercapture":return l=a.pointerId,Rn.set(l,pn(Rn.get(l)||null,e,s,r,n,a)),!0}return!1}function ru(e){var s=jr(e.target);if(s!==null){var r=Ir(s);if(r!==null){if(s=r.tag,s===13){if(s=Wd(r),s!==null){e.blockedOn=s,su(e.priority,function(){eu(r)});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ta(e){if(e.blockedOn!==null)return!1;for(var s=e.targetContainers;0<s.length;){var r=Ni(e.domEventName,e.eventSystemFlags,s[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);gi=n,r.target.dispatchEvent(n),gi=null}else return s=sa(r),s!==null&&yo(s),e.blockedOn=r,!1;s.shift()}return!0}function gc(e,s,r){Ta(e)&&r.delete(s)}function Rx(){wi=!1,tr!==null&&Ta(tr)&&(tr=null),sr!==null&&Ta(sr)&&(sr=null),rr!==null&&Ta(rr)&&(rr=null),Fn.forEach(gc),Rn.forEach(gc)}function gn(e,s){e.blockedOn===s&&(e.blockedOn=null,wi||(wi=!0,Yt.unstable_scheduleCallback(Yt.unstable_NormalPriority,Rx)))}function $n(e){function s(a){return gn(a,e)}if(0<xa.length){gn(xa[0],e);for(var r=1;r<xa.length;r++){var n=xa[r];n.blockedOn===e&&(n.blockedOn=null)}}for(tr!==null&&gn(tr,e),sr!==null&&gn(sr,e),rr!==null&&gn(rr,e),Fn.forEach(s),Rn.forEach(s),r=0;r<Gs.length;r++)n=Gs[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Gs.length&&(r=Gs[0],r.blockedOn===null);)ru(r),r.blockedOn===null&&Gs.shift()}var Zr=Us.ReactCurrentBatchConfig,Wa=!0;function $x(e,s,r,n){var a=Pe,l=Zr.transition;Zr.transition=null;try{Pe=1,vo(e,s,r,n)}finally{Pe=a,Zr.transition=l}}function Ox(e,s,r,n){var a=Pe,l=Zr.transition;Zr.transition=null;try{Pe=4,vo(e,s,r,n)}finally{Pe=a,Zr.transition=l}}function vo(e,s,r,n){if(Wa){var a=Ni(e,s,r,n);if(a===null)Wl(e,s,n,Ga,r),pc(e,n);else if(Fx(a,e,s,r,n))n.stopPropagation();else if(pc(e,n),s&4&&-1<zx.indexOf(e)){for(;a!==null;){var l=sa(a);if(l!==null&&Jd(l),l=Ni(e,s,r,n),l===null&&Wl(e,s,n,Ga,r),l===a)break;a=l}a!==null&&n.stopPropagation()}else Wl(e,s,n,null,r)}}var Ga=null;function Ni(e,s,r,n){if(Ga=null,e=po(n),e=jr(e),e!==null)if(s=Ir(e),s===null)e=null;else if(r=s.tag,r===13){if(e=Wd(s),e!==null)return e;e=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;e=null}else s!==e&&(e=null);return Ga=e,null}function nu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Cx()){case go:return 1;case Kd:return 4;case Ba:case Dx:return 16;case Yd:return 536870912;default:return 16}default:return 16}}var Qs=null,jo=null,Ea=null;function au(){if(Ea)return Ea;var e,s=jo,r=s.length,n,a="value"in Qs?Qs.value:Qs.textContent,l=a.length;for(e=0;e<r&&s[e]===a[e];e++);var i=r-e;for(n=1;n<=i&&s[r-n]===a[l-n];n++);return Ea=a.slice(e,1<n?1-n:void 0)}function Pa(e){var s=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&s===13&&(e=13)):e=s,e===10&&(e=13),32<=e||e===13?e:0}function ha(){return!0}function fc(){return!1}function Zt(e){function s(r,n,a,l,i){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=l,this.target=i,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(l):l[o]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?ha:fc,this.isPropagationStopped=fc,this}return Ye(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ha)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ha)},persist:function(){},isPersistent:ha}),s}var dn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wo=Zt(dn),ta=Ye({},dn,{view:0,detail:0}),Ux=Zt(ta),zl,Fl,fn,hl=Ye({},ta,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:No,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fn&&(fn&&e.type==="mousemove"?(zl=e.screenX-fn.screenX,Fl=e.screenY-fn.screenY):Fl=zl=0,fn=e),zl)},movementY:function(e){return"movementY"in e?e.movementY:Fl}}),yc=Zt(hl),Hx=Ye({},hl,{dataTransfer:0}),Bx=Zt(Hx),Vx=Ye({},ta,{relatedTarget:0}),Rl=Zt(Vx),Wx=Ye({},dn,{animationName:0,elapsedTime:0,pseudoElement:0}),Gx=Zt(Wx),qx=Ye({},dn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Qx=Zt(qx),Kx=Ye({},dn,{data:0}),vc=Zt(Kx),Yx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jx(e){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(e):(e=Zx[e])?!!s[e]:!1}function No(){return Jx}var eh=Ye({},ta,{key:function(e){if(e.key){var s=Yx[e.key]||e.key;if(s!=="Unidentified")return s}return e.type==="keypress"?(e=Pa(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Xx[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:No,charCode:function(e){return e.type==="keypress"?Pa(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Pa(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),th=Zt(eh),sh=Ye({},hl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jc=Zt(sh),rh=Ye({},ta,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:No}),nh=Zt(rh),ah=Ye({},dn,{propertyName:0,elapsedTime:0,pseudoElement:0}),lh=Zt(ah),ih=Ye({},hl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),oh=Zt(ih),ch=[9,13,27,32],bo=Fs&&"CompositionEvent"in window,Cn=null;Fs&&"documentMode"in document&&(Cn=document.documentMode);var dh=Fs&&"TextEvent"in window&&!Cn,lu=Fs&&(!bo||Cn&&8<Cn&&11>=Cn),wc=" ",Nc=!1;function iu(e,s){switch(e){case"keyup":return ch.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ou(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var $r=!1;function uh(e,s){switch(e){case"compositionend":return ou(s);case"keypress":return s.which!==32?null:(Nc=!0,wc);case"textInput":return e=s.data,e===wc&&Nc?null:e;default:return null}}function mh(e,s){if($r)return e==="compositionend"||!bo&&iu(e,s)?(e=au(),Ea=jo=Qs=null,$r=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return lu&&s.locale!=="ko"?null:s.data;default:return null}}var xh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bc(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s==="input"?!!xh[e.type]:s==="textarea"}function cu(e,s,r,n){Od(n),s=qa(s,"onChange"),0<s.length&&(r=new wo("onChange","change",null,r,n),e.push({event:r,listeners:s}))}var Dn=null,On=null;function hh(e){ju(e,0)}function pl(e){var s=Hr(e);if(Id(s))return e}function ph(e,s){if(e==="change")return s}var du=!1;if(Fs){var $l;if(Fs){var Ol="oninput"in document;if(!Ol){var kc=document.createElement("div");kc.setAttribute("oninput","return;"),Ol=typeof kc.oninput=="function"}$l=Ol}else $l=!1;du=$l&&(!document.documentMode||9<document.documentMode)}function Sc(){Dn&&(Dn.detachEvent("onpropertychange",uu),On=Dn=null)}function uu(e){if(e.propertyName==="value"&&pl(On)){var s=[];cu(s,On,e,po(e)),Vd(hh,s)}}function gh(e,s,r){e==="focusin"?(Sc(),Dn=s,On=r,Dn.attachEvent("onpropertychange",uu)):e==="focusout"&&Sc()}function fh(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return pl(On)}function yh(e,s){if(e==="click")return pl(s)}function vh(e,s){if(e==="input"||e==="change")return pl(s)}function jh(e,s){return e===s&&(e!==0||1/e===1/s)||e!==e&&s!==s}var fs=typeof Object.is=="function"?Object.is:jh;function Un(e,s){if(fs(e,s))return!0;if(typeof e!="object"||e===null||typeof s!="object"||s===null)return!1;var r=Object.keys(e),n=Object.keys(s);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!ni.call(s,a)||!fs(e[a],s[a]))return!1}return!0}function _c(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Cc(e,s){var r=_c(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=s&&n>=s)return{node:r,offset:s-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=_c(r)}}function mu(e,s){return e&&s?e===s?!0:e&&e.nodeType===3?!1:s&&s.nodeType===3?mu(e,s.parentNode):"contains"in e?e.contains(s):e.compareDocumentPosition?!!(e.compareDocumentPosition(s)&16):!1:!1}function xu(){for(var e=window,s=Oa();s instanceof e.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)e=s.contentWindow;else break;s=Oa(e.document)}return s}function ko(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s&&(s==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||s==="textarea"||e.contentEditable==="true")}function wh(e){var s=xu(),r=e.focusedElem,n=e.selectionRange;if(s!==r&&r&&r.ownerDocument&&mu(r.ownerDocument.documentElement,r)){if(n!==null&&ko(r)){if(s=n.start,e=n.end,e===void 0&&(e=s),"selectionStart"in r)r.selectionStart=s,r.selectionEnd=Math.min(e,r.value.length);else if(e=(s=r.ownerDocument||document)&&s.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,l=Math.min(n.start,a);n=n.end===void 0?l:Math.min(n.end,a),!e.extend&&l>n&&(a=n,n=l,l=a),a=Cc(r,l);var i=Cc(r,n);a&&i&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(s=s.createRange(),s.setStart(a.node,a.offset),e.removeAllRanges(),l>n?(e.addRange(s),e.extend(i.node,i.offset)):(s.setEnd(i.node,i.offset),e.addRange(s)))}}for(s=[],e=r;e=e.parentNode;)e.nodeType===1&&s.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<s.length;r++)e=s[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Nh=Fs&&"documentMode"in document&&11>=document.documentMode,Or=null,bi=null,Tn=null,ki=!1;function Dc(e,s,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ki||Or==null||Or!==Oa(n)||(n=Or,"selectionStart"in n&&ko(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Tn&&Un(Tn,n)||(Tn=n,n=qa(bi,"onSelect"),0<n.length&&(s=new wo("onSelect","select",null,s,r),e.push({event:s,listeners:n}),s.target=Or)))}function pa(e,s){var r={};return r[e.toLowerCase()]=s.toLowerCase(),r["Webkit"+e]="webkit"+s,r["Moz"+e]="moz"+s,r}var Ur={animationend:pa("Animation","AnimationEnd"),animationiteration:pa("Animation","AnimationIteration"),animationstart:pa("Animation","AnimationStart"),transitionend:pa("Transition","TransitionEnd")},Ul={},hu={};Fs&&(hu=document.createElement("div").style,"AnimationEvent"in window||(delete Ur.animationend.animation,delete Ur.animationiteration.animation,delete Ur.animationstart.animation),"TransitionEvent"in window||delete Ur.transitionend.transition);function gl(e){if(Ul[e])return Ul[e];if(!Ur[e])return e;var s=Ur[e],r;for(r in s)if(s.hasOwnProperty(r)&&r in hu)return Ul[e]=s[r];return e}var pu=gl("animationend"),gu=gl("animationiteration"),fu=gl("animationstart"),yu=gl("transitionend"),vu=new Map,Tc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function mr(e,s){vu.set(e,s),Mr(s,[e])}for(var Hl=0;Hl<Tc.length;Hl++){var Bl=Tc[Hl],bh=Bl.toLowerCase(),kh=Bl[0].toUpperCase()+Bl.slice(1);mr(bh,"on"+kh)}mr(pu,"onAnimationEnd");mr(gu,"onAnimationIteration");mr(fu,"onAnimationStart");mr("dblclick","onDoubleClick");mr("focusin","onFocus");mr("focusout","onBlur");mr(yu,"onTransitionEnd");tn("onMouseEnter",["mouseout","mouseover"]);tn("onMouseLeave",["mouseout","mouseover"]);tn("onPointerEnter",["pointerout","pointerover"]);tn("onPointerLeave",["pointerout","pointerover"]);Mr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Mr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Mr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Mr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Mr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Mr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sh=new Set("cancel close invalid load scroll toggle".split(" ").concat(kn));function Ec(e,s,r){var n=e.type||"unknown-event";e.currentTarget=r,bx(n,s,void 0,e),e.currentTarget=null}function ju(e,s){s=(s&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var l=void 0;if(s)for(var i=n.length-1;0<=i;i--){var o=n[i],d=o.instance,m=o.currentTarget;if(o=o.listener,d!==l&&a.isPropagationStopped())break e;Ec(a,o,m),l=d}else for(i=0;i<n.length;i++){if(o=n[i],d=o.instance,m=o.currentTarget,o=o.listener,d!==l&&a.isPropagationStopped())break e;Ec(a,o,m),l=d}}}if(Ha)throw e=vi,Ha=!1,vi=null,e}function Be(e,s){var r=s[Ti];r===void 0&&(r=s[Ti]=new Set);var n=e+"__bubble";r.has(n)||(wu(s,e,2,!1),r.add(n))}function Vl(e,s,r){var n=0;s&&(n|=4),wu(r,e,n,s)}var ga="_reactListening"+Math.random().toString(36).slice(2);function Hn(e){if(!e[ga]){e[ga]=!0,Dd.forEach(function(r){r!=="selectionchange"&&(Sh.has(r)||Vl(r,!1,e),Vl(r,!0,e))});var s=e.nodeType===9?e:e.ownerDocument;s===null||s[ga]||(s[ga]=!0,Vl("selectionchange",!1,s))}}function wu(e,s,r,n){switch(nu(s)){case 1:var a=$x;break;case 4:a=Ox;break;default:a=vo}r=a.bind(null,s,r,e),a=void 0,!yi||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(s,r,{capture:!0,passive:a}):e.addEventListener(s,r,!0):a!==void 0?e.addEventListener(s,r,{passive:a}):e.addEventListener(s,r,!1)}function Wl(e,s,r,n,a){var l=n;if(!(s&1)&&!(s&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var o=n.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(i===4)for(i=n.return;i!==null;){var d=i.tag;if((d===3||d===4)&&(d=i.stateNode.containerInfo,d===a||d.nodeType===8&&d.parentNode===a))return;i=i.return}for(;o!==null;){if(i=jr(o),i===null)return;if(d=i.tag,d===5||d===6){n=l=i;continue e}o=o.parentNode}}n=n.return}Vd(function(){var m=l,p=po(r),j=[];e:{var c=vu.get(e);if(c!==void 0){var v=wo,y=e;switch(e){case"keypress":if(Pa(r)===0)break e;case"keydown":case"keyup":v=th;break;case"focusin":y="focus",v=Rl;break;case"focusout":y="blur",v=Rl;break;case"beforeblur":case"afterblur":v=Rl;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=yc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=Bx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=nh;break;case pu:case gu:case fu:v=Gx;break;case yu:v=lh;break;case"scroll":v=Ux;break;case"wheel":v=oh;break;case"copy":case"cut":case"paste":v=Qx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=jc}var M=(s&4)!==0,z=!M&&e==="scroll",h=M?c!==null?c+"Capture":null:c;M=[];for(var x=m,f;x!==null;){f=x;var E=f.stateNode;if(f.tag===5&&E!==null&&(f=E,h!==null&&(E=zn(x,h),E!=null&&M.push(Bn(x,E,f)))),z)break;x=x.return}0<M.length&&(c=new v(c,y,null,r,p),j.push({event:c,listeners:M}))}}if(!(s&7)){e:{if(c=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",c&&r!==gi&&(y=r.relatedTarget||r.fromElement)&&(jr(y)||y[Rs]))break e;if((v||c)&&(c=p.window===p?p:(c=p.ownerDocument)?c.defaultView||c.parentWindow:window,v?(y=r.relatedTarget||r.toElement,v=m,y=y?jr(y):null,y!==null&&(z=Ir(y),y!==z||y.tag!==5&&y.tag!==6)&&(y=null)):(v=null,y=m),v!==y)){if(M=yc,E="onMouseLeave",h="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(M=jc,E="onPointerLeave",h="onPointerEnter",x="pointer"),z=v==null?c:Hr(v),f=y==null?c:Hr(y),c=new M(E,x+"leave",v,r,p),c.target=z,c.relatedTarget=f,E=null,jr(p)===m&&(M=new M(h,x+"enter",y,r,p),M.target=f,M.relatedTarget=z,E=M),z=E,v&&y)t:{for(M=v,h=y,x=0,f=M;f;f=zr(f))x++;for(f=0,E=h;E;E=zr(E))f++;for(;0<x-f;)M=zr(M),x--;for(;0<f-x;)h=zr(h),f--;for(;x--;){if(M===h||h!==null&&M===h.alternate)break t;M=zr(M),h=zr(h)}M=null}else M=null;v!==null&&Pc(j,c,v,M,!1),y!==null&&z!==null&&Pc(j,z,y,M,!0)}}e:{if(c=m?Hr(m):window,v=c.nodeName&&c.nodeName.toLowerCase(),v==="select"||v==="input"&&c.type==="file")var A=ph;else if(bc(c))if(du)A=vh;else{A=fh;var g=gh}else(v=c.nodeName)&&v.toLowerCase()==="input"&&(c.type==="checkbox"||c.type==="radio")&&(A=yh);if(A&&(A=A(e,m))){cu(j,A,r,p);break e}g&&g(e,c,m),e==="focusout"&&(g=c._wrapperState)&&g.controlled&&c.type==="number"&&ui(c,"number",c.value)}switch(g=m?Hr(m):window,e){case"focusin":(bc(g)||g.contentEditable==="true")&&(Or=g,bi=m,Tn=null);break;case"focusout":Tn=bi=Or=null;break;case"mousedown":ki=!0;break;case"contextmenu":case"mouseup":case"dragend":ki=!1,Dc(j,r,p);break;case"selectionchange":if(Nh)break;case"keydown":case"keyup":Dc(j,r,p)}var N;if(bo)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else $r?iu(e,r)&&(b="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(b="onCompositionStart");b&&(lu&&r.locale!=="ko"&&($r||b!=="onCompositionStart"?b==="onCompositionEnd"&&$r&&(N=au()):(Qs=p,jo="value"in Qs?Qs.value:Qs.textContent,$r=!0)),g=qa(m,b),0<g.length&&(b=new vc(b,e,null,r,p),j.push({event:b,listeners:g}),N?b.data=N:(N=ou(r),N!==null&&(b.data=N)))),(N=dh?uh(e,r):mh(e,r))&&(m=qa(m,"onBeforeInput"),0<m.length&&(p=new vc("onBeforeInput","beforeinput",null,r,p),j.push({event:p,listeners:m}),p.data=N))}ju(j,s)})}function Bn(e,s,r){return{instance:e,listener:s,currentTarget:r}}function qa(e,s){for(var r=s+"Capture",n=[];e!==null;){var a=e,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=zn(e,r),l!=null&&n.unshift(Bn(e,l,a)),l=zn(e,s),l!=null&&n.push(Bn(e,l,a))),e=e.return}return n}function zr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Pc(e,s,r,n,a){for(var l=s._reactName,i=[];r!==null&&r!==n;){var o=r,d=o.alternate,m=o.stateNode;if(d!==null&&d===n)break;o.tag===5&&m!==null&&(o=m,a?(d=zn(r,l),d!=null&&i.unshift(Bn(r,d,o))):a||(d=zn(r,l),d!=null&&i.push(Bn(r,d,o)))),r=r.return}i.length!==0&&e.push({event:s,listeners:i})}var _h=/\r\n?/g,Ch=/\u0000|\uFFFD/g;function Mc(e){return(typeof e=="string"?e:""+e).replace(_h,`
`).replace(Ch,"")}function fa(e,s,r){if(s=Mc(s),Mc(e)!==s&&r)throw Error(Q(425))}function Qa(){}var Si=null,_i=null;function Ci(e,s){return e==="textarea"||e==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Di=typeof setTimeout=="function"?setTimeout:void 0,Dh=typeof clearTimeout=="function"?clearTimeout:void 0,Ic=typeof Promise=="function"?Promise:void 0,Th=typeof queueMicrotask=="function"?queueMicrotask:typeof Ic<"u"?function(e){return Ic.resolve(null).then(e).catch(Eh)}:Di;function Eh(e){setTimeout(function(){throw e})}function Gl(e,s){var r=s,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),$n(s);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);$n(s)}function nr(e){for(;e!=null;e=e.nextSibling){var s=e.nodeType;if(s===1||s===3)break;if(s===8){if(s=e.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return e}function Ac(e){e=e.previousSibling;for(var s=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(s===0)return e;s--}else r==="/$"&&s++}e=e.previousSibling}return null}var un=Math.random().toString(36).slice(2),ws="__reactFiber$"+un,Vn="__reactProps$"+un,Rs="__reactContainer$"+un,Ti="__reactEvents$"+un,Ph="__reactListeners$"+un,Mh="__reactHandles$"+un;function jr(e){var s=e[ws];if(s)return s;for(var r=e.parentNode;r;){if(s=r[Rs]||r[ws]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(e=Ac(e);e!==null;){if(r=e[ws])return r;e=Ac(e)}return s}e=r,r=e.parentNode}return null}function sa(e){return e=e[ws]||e[Rs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Hr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Q(33))}function fl(e){return e[Vn]||null}var Ei=[],Br=-1;function xr(e){return{current:e}}function Ve(e){0>Br||(e.current=Ei[Br],Ei[Br]=null,Br--)}function Oe(e,s){Br++,Ei[Br]=e.current,e.current=s}var ur={},Dt=xr(ur),Ht=xr(!1),Cr=ur;function sn(e,s){var r=e.type.contextTypes;if(!r)return ur;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===s)return n.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in r)a[l]=s[l];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),a}function Bt(e){return e=e.childContextTypes,e!=null}function Ka(){Ve(Ht),Ve(Dt)}function Lc(e,s,r){if(Dt.current!==ur)throw Error(Q(168));Oe(Dt,s),Oe(Ht,r)}function Nu(e,s,r){var n=e.stateNode;if(s=s.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in s))throw Error(Q(108,gx(e)||"Unknown",a));return Ye({},r,n)}function Ya(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ur,Cr=Dt.current,Oe(Dt,e),Oe(Ht,Ht.current),!0}function zc(e,s,r){var n=e.stateNode;if(!n)throw Error(Q(169));r?(e=Nu(e,s,Cr),n.__reactInternalMemoizedMergedChildContext=e,Ve(Ht),Ve(Dt),Oe(Dt,e)):Ve(Ht),Oe(Ht,r)}var Ds=null,yl=!1,ql=!1;function bu(e){Ds===null?Ds=[e]:Ds.push(e)}function Ih(e){yl=!0,bu(e)}function hr(){if(!ql&&Ds!==null){ql=!0;var e=0,s=Pe;try{var r=Ds;for(Pe=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Ds=null,yl=!1}catch(a){throw Ds!==null&&(Ds=Ds.slice(e+1)),Qd(go,hr),a}finally{Pe=s,ql=!1}}return null}var Vr=[],Wr=0,Xa=null,Za=0,rs=[],ns=0,Dr=null,Ts=1,Es="";function fr(e,s){Vr[Wr++]=Za,Vr[Wr++]=Xa,Xa=e,Za=s}function ku(e,s,r){rs[ns++]=Ts,rs[ns++]=Es,rs[ns++]=Dr,Dr=e;var n=Ts;e=Es;var a=32-ps(n)-1;n&=~(1<<a),r+=1;var l=32-ps(s)+a;if(30<l){var i=a-a%5;l=(n&(1<<i)-1).toString(32),n>>=i,a-=i,Ts=1<<32-ps(s)+a|r<<a|n,Es=l+e}else Ts=1<<l|r<<a|n,Es=e}function So(e){e.return!==null&&(fr(e,1),ku(e,1,0))}function _o(e){for(;e===Xa;)Xa=Vr[--Wr],Vr[Wr]=null,Za=Vr[--Wr],Vr[Wr]=null;for(;e===Dr;)Dr=rs[--ns],rs[ns]=null,Es=rs[--ns],rs[ns]=null,Ts=rs[--ns],rs[ns]=null}var Kt=null,Qt=null,qe=!1,hs=null;function Su(e,s){var r=as(5,null,null,0);r.elementType="DELETED",r.stateNode=s,r.return=e,s=e.deletions,s===null?(e.deletions=[r],e.flags|=16):s.push(r)}function Fc(e,s){switch(e.tag){case 5:var r=e.type;return s=s.nodeType!==1||r.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(e.stateNode=s,Kt=e,Qt=nr(s.firstChild),!0):!1;case 6:return s=e.pendingProps===""||s.nodeType!==3?null:s,s!==null?(e.stateNode=s,Kt=e,Qt=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(r=Dr!==null?{id:Ts,overflow:Es}:null,e.memoizedState={dehydrated:s,treeContext:r,retryLane:1073741824},r=as(18,null,null,0),r.stateNode=s,r.return=e,e.child=r,Kt=e,Qt=null,!0):!1;default:return!1}}function Pi(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Mi(e){if(qe){var s=Qt;if(s){var r=s;if(!Fc(e,s)){if(Pi(e))throw Error(Q(418));s=nr(r.nextSibling);var n=Kt;s&&Fc(e,s)?Su(n,r):(e.flags=e.flags&-4097|2,qe=!1,Kt=e)}}else{if(Pi(e))throw Error(Q(418));e.flags=e.flags&-4097|2,qe=!1,Kt=e}}}function Rc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Kt=e}function ya(e){if(e!==Kt)return!1;if(!qe)return Rc(e),qe=!0,!1;var s;if((s=e.tag!==3)&&!(s=e.tag!==5)&&(s=e.type,s=s!=="head"&&s!=="body"&&!Ci(e.type,e.memoizedProps)),s&&(s=Qt)){if(Pi(e))throw _u(),Error(Q(418));for(;s;)Su(e,s),s=nr(s.nextSibling)}if(Rc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Q(317));e:{for(e=e.nextSibling,s=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(s===0){Qt=nr(e.nextSibling);break e}s--}else r!=="$"&&r!=="$!"&&r!=="$?"||s++}e=e.nextSibling}Qt=null}}else Qt=Kt?nr(e.stateNode.nextSibling):null;return!0}function _u(){for(var e=Qt;e;)e=nr(e.nextSibling)}function rn(){Qt=Kt=null,qe=!1}function Co(e){hs===null?hs=[e]:hs.push(e)}var Ah=Us.ReactCurrentBatchConfig;function yn(e,s,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Q(309));var n=r.stateNode}if(!n)throw Error(Q(147,e));var a=n,l=""+e;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===l?s.ref:(s=function(i){var o=a.refs;i===null?delete o[l]:o[l]=i},s._stringRef=l,s)}if(typeof e!="string")throw Error(Q(284));if(!r._owner)throw Error(Q(290,e))}return e}function va(e,s){throw e=Object.prototype.toString.call(s),Error(Q(31,e==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":e))}function $c(e){var s=e._init;return s(e._payload)}function Cu(e){function s(h,x){if(e){var f=h.deletions;f===null?(h.deletions=[x],h.flags|=16):f.push(x)}}function r(h,x){if(!e)return null;for(;x!==null;)s(h,x),x=x.sibling;return null}function n(h,x){for(h=new Map;x!==null;)x.key!==null?h.set(x.key,x):h.set(x.index,x),x=x.sibling;return h}function a(h,x){return h=or(h,x),h.index=0,h.sibling=null,h}function l(h,x,f){return h.index=f,e?(f=h.alternate,f!==null?(f=f.index,f<x?(h.flags|=2,x):f):(h.flags|=2,x)):(h.flags|=1048576,x)}function i(h){return e&&h.alternate===null&&(h.flags|=2),h}function o(h,x,f,E){return x===null||x.tag!==6?(x=ei(f,h.mode,E),x.return=h,x):(x=a(x,f),x.return=h,x)}function d(h,x,f,E){var A=f.type;return A===Rr?p(h,x,f.props.children,E,f.key):x!==null&&(x.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Vs&&$c(A)===x.type)?(E=a(x,f.props),E.ref=yn(h,x,f),E.return=h,E):(E=Ra(f.type,f.key,f.props,null,h.mode,E),E.ref=yn(h,x,f),E.return=h,E)}function m(h,x,f,E){return x===null||x.tag!==4||x.stateNode.containerInfo!==f.containerInfo||x.stateNode.implementation!==f.implementation?(x=ti(f,h.mode,E),x.return=h,x):(x=a(x,f.children||[]),x.return=h,x)}function p(h,x,f,E,A){return x===null||x.tag!==7?(x=Sr(f,h.mode,E,A),x.return=h,x):(x=a(x,f),x.return=h,x)}function j(h,x,f){if(typeof x=="string"&&x!==""||typeof x=="number")return x=ei(""+x,h.mode,f),x.return=h,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case oa:return f=Ra(x.type,x.key,x.props,null,h.mode,f),f.ref=yn(h,null,x),f.return=h,f;case Fr:return x=ti(x,h.mode,f),x.return=h,x;case Vs:var E=x._init;return j(h,E(x._payload),f)}if(Nn(x)||xn(x))return x=Sr(x,h.mode,f,null),x.return=h,x;va(h,x)}return null}function c(h,x,f,E){var A=x!==null?x.key:null;if(typeof f=="string"&&f!==""||typeof f=="number")return A!==null?null:o(h,x,""+f,E);if(typeof f=="object"&&f!==null){switch(f.$$typeof){case oa:return f.key===A?d(h,x,f,E):null;case Fr:return f.key===A?m(h,x,f,E):null;case Vs:return A=f._init,c(h,x,A(f._payload),E)}if(Nn(f)||xn(f))return A!==null?null:p(h,x,f,E,null);va(h,f)}return null}function v(h,x,f,E,A){if(typeof E=="string"&&E!==""||typeof E=="number")return h=h.get(f)||null,o(x,h,""+E,A);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case oa:return h=h.get(E.key===null?f:E.key)||null,d(x,h,E,A);case Fr:return h=h.get(E.key===null?f:E.key)||null,m(x,h,E,A);case Vs:var g=E._init;return v(h,x,f,g(E._payload),A)}if(Nn(E)||xn(E))return h=h.get(f)||null,p(x,h,E,A,null);va(x,E)}return null}function y(h,x,f,E){for(var A=null,g=null,N=x,b=x=0,S=null;N!==null&&b<f.length;b++){N.index>b?(S=N,N=null):S=N.sibling;var L=c(h,N,f[b],E);if(L===null){N===null&&(N=S);break}e&&N&&L.alternate===null&&s(h,N),x=l(L,x,b),g===null?A=L:g.sibling=L,g=L,N=S}if(b===f.length)return r(h,N),qe&&fr(h,b),A;if(N===null){for(;b<f.length;b++)N=j(h,f[b],E),N!==null&&(x=l(N,x,b),g===null?A=N:g.sibling=N,g=N);return qe&&fr(h,b),A}for(N=n(h,N);b<f.length;b++)S=v(N,h,b,f[b],E),S!==null&&(e&&S.alternate!==null&&N.delete(S.key===null?b:S.key),x=l(S,x,b),g===null?A=S:g.sibling=S,g=S);return e&&N.forEach(function(ae){return s(h,ae)}),qe&&fr(h,b),A}function M(h,x,f,E){var A=xn(f);if(typeof A!="function")throw Error(Q(150));if(f=A.call(f),f==null)throw Error(Q(151));for(var g=A=null,N=x,b=x=0,S=null,L=f.next();N!==null&&!L.done;b++,L=f.next()){N.index>b?(S=N,N=null):S=N.sibling;var ae=c(h,N,L.value,E);if(ae===null){N===null&&(N=S);break}e&&N&&ae.alternate===null&&s(h,N),x=l(ae,x,b),g===null?A=ae:g.sibling=ae,g=ae,N=S}if(L.done)return r(h,N),qe&&fr(h,b),A;if(N===null){for(;!L.done;b++,L=f.next())L=j(h,L.value,E),L!==null&&(x=l(L,x,b),g===null?A=L:g.sibling=L,g=L);return qe&&fr(h,b),A}for(N=n(h,N);!L.done;b++,L=f.next())L=v(N,h,b,L.value,E),L!==null&&(e&&L.alternate!==null&&N.delete(L.key===null?b:L.key),x=l(L,x,b),g===null?A=L:g.sibling=L,g=L);return e&&N.forEach(function(O){return s(h,O)}),qe&&fr(h,b),A}function z(h,x,f,E){if(typeof f=="object"&&f!==null&&f.type===Rr&&f.key===null&&(f=f.props.children),typeof f=="object"&&f!==null){switch(f.$$typeof){case oa:e:{for(var A=f.key,g=x;g!==null;){if(g.key===A){if(A=f.type,A===Rr){if(g.tag===7){r(h,g.sibling),x=a(g,f.props.children),x.return=h,h=x;break e}}else if(g.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Vs&&$c(A)===g.type){r(h,g.sibling),x=a(g,f.props),x.ref=yn(h,g,f),x.return=h,h=x;break e}r(h,g);break}else s(h,g);g=g.sibling}f.type===Rr?(x=Sr(f.props.children,h.mode,E,f.key),x.return=h,h=x):(E=Ra(f.type,f.key,f.props,null,h.mode,E),E.ref=yn(h,x,f),E.return=h,h=E)}return i(h);case Fr:e:{for(g=f.key;x!==null;){if(x.key===g)if(x.tag===4&&x.stateNode.containerInfo===f.containerInfo&&x.stateNode.implementation===f.implementation){r(h,x.sibling),x=a(x,f.children||[]),x.return=h,h=x;break e}else{r(h,x);break}else s(h,x);x=x.sibling}x=ti(f,h.mode,E),x.return=h,h=x}return i(h);case Vs:return g=f._init,z(h,x,g(f._payload),E)}if(Nn(f))return y(h,x,f,E);if(xn(f))return M(h,x,f,E);va(h,f)}return typeof f=="string"&&f!==""||typeof f=="number"?(f=""+f,x!==null&&x.tag===6?(r(h,x.sibling),x=a(x,f),x.return=h,h=x):(r(h,x),x=ei(f,h.mode,E),x.return=h,h=x),i(h)):r(h,x)}return z}var nn=Cu(!0),Du=Cu(!1),Ja=xr(null),el=null,Gr=null,Do=null;function To(){Do=Gr=el=null}function Eo(e){var s=Ja.current;Ve(Ja),e._currentValue=s}function Ii(e,s,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&s)!==s?(e.childLanes|=s,n!==null&&(n.childLanes|=s)):n!==null&&(n.childLanes&s)!==s&&(n.childLanes|=s),e===r)break;e=e.return}}function Jr(e,s){el=e,Do=Gr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&s&&(Ut=!0),e.firstContext=null)}function is(e){var s=e._currentValue;if(Do!==e)if(e={context:e,memoizedValue:s,next:null},Gr===null){if(el===null)throw Error(Q(308));Gr=e,el.dependencies={lanes:0,firstContext:e}}else Gr=Gr.next=e;return s}var wr=null;function Po(e){wr===null?wr=[e]:wr.push(e)}function Tu(e,s,r,n){var a=s.interleaved;return a===null?(r.next=r,Po(s)):(r.next=a.next,a.next=r),s.interleaved=r,$s(e,n)}function $s(e,s){e.lanes|=s;var r=e.alternate;for(r!==null&&(r.lanes|=s),r=e,e=e.return;e!==null;)e.childLanes|=s,r=e.alternate,r!==null&&(r.childLanes|=s),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Ws=!1;function Mo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Eu(e,s){e=e.updateQueue,s.updateQueue===e&&(s.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ls(e,s){return{eventTime:e,lane:s,tag:0,payload:null,callback:null,next:null}}function ar(e,s,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,De&2){var a=n.pending;return a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s,$s(e,r)}return a=n.interleaved,a===null?(s.next=s,Po(n)):(s.next=a.next,a.next=s),n.interleaved=s,$s(e,r)}function Ma(e,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194240)!==0)){var n=s.lanes;n&=e.pendingLanes,r|=n,s.lanes=r,fo(e,r)}}function Oc(e,s){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,l=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};l===null?a=l=i:l=l.next=i,r=r.next}while(r!==null);l===null?a=l=s:l=l.next=s}else a=l=s;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=s:e.next=s,r.lastBaseUpdate=s}function tl(e,s,r,n){var a=e.updateQueue;Ws=!1;var l=a.firstBaseUpdate,i=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var d=o,m=d.next;d.next=null,i===null?l=m:i.next=m,i=d;var p=e.alternate;p!==null&&(p=p.updateQueue,o=p.lastBaseUpdate,o!==i&&(o===null?p.firstBaseUpdate=m:o.next=m,p.lastBaseUpdate=d))}if(l!==null){var j=a.baseState;i=0,p=m=d=null,o=l;do{var c=o.lane,v=o.eventTime;if((n&c)===c){p!==null&&(p=p.next={eventTime:v,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var y=e,M=o;switch(c=s,v=r,M.tag){case 1:if(y=M.payload,typeof y=="function"){j=y.call(v,j,c);break e}j=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=M.payload,c=typeof y=="function"?y.call(v,j,c):y,c==null)break e;j=Ye({},j,c);break e;case 2:Ws=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,c=a.effects,c===null?a.effects=[o]:c.push(o))}else v={eventTime:v,lane:c,tag:o.tag,payload:o.payload,callback:o.callback,next:null},p===null?(m=p=v,d=j):p=p.next=v,i|=c;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;c=o,o=c.next,c.next=null,a.lastBaseUpdate=c,a.shared.pending=null}}while(!0);if(p===null&&(d=j),a.baseState=d,a.firstBaseUpdate=m,a.lastBaseUpdate=p,s=a.shared.interleaved,s!==null){a=s;do i|=a.lane,a=a.next;while(a!==s)}else l===null&&(a.shared.lanes=0);Er|=i,e.lanes=i,e.memoizedState=j}}function Uc(e,s,r){if(e=s.effects,s.effects=null,e!==null)for(s=0;s<e.length;s++){var n=e[s],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(Q(191,a));a.call(n)}}}var ra={},Ss=xr(ra),Wn=xr(ra),Gn=xr(ra);function Nr(e){if(e===ra)throw Error(Q(174));return e}function Io(e,s){switch(Oe(Gn,s),Oe(Wn,e),Oe(Ss,ra),e=s.nodeType,e){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:xi(null,"");break;default:e=e===8?s.parentNode:s,s=e.namespaceURI||null,e=e.tagName,s=xi(s,e)}Ve(Ss),Oe(Ss,s)}function an(){Ve(Ss),Ve(Wn),Ve(Gn)}function Pu(e){Nr(Gn.current);var s=Nr(Ss.current),r=xi(s,e.type);s!==r&&(Oe(Wn,e),Oe(Ss,r))}function Ao(e){Wn.current===e&&(Ve(Ss),Ve(Wn))}var Qe=xr(0);function sl(e){for(var s=e;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Ql=[];function Lo(){for(var e=0;e<Ql.length;e++)Ql[e]._workInProgressVersionPrimary=null;Ql.length=0}var Ia=Us.ReactCurrentDispatcher,Kl=Us.ReactCurrentBatchConfig,Tr=0,Ke=null,ct=null,xt=null,rl=!1,En=!1,qn=0,Lh=0;function kt(){throw Error(Q(321))}function zo(e,s){if(s===null)return!1;for(var r=0;r<s.length&&r<e.length;r++)if(!fs(e[r],s[r]))return!1;return!0}function Fo(e,s,r,n,a,l){if(Tr=l,Ke=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Ia.current=e===null||e.memoizedState===null?$h:Oh,e=r(n,a),En){l=0;do{if(En=!1,qn=0,25<=l)throw Error(Q(301));l+=1,xt=ct=null,s.updateQueue=null,Ia.current=Uh,e=r(n,a)}while(En)}if(Ia.current=nl,s=ct!==null&&ct.next!==null,Tr=0,xt=ct=Ke=null,rl=!1,s)throw Error(Q(300));return e}function Ro(){var e=qn!==0;return qn=0,e}function vs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?Ke.memoizedState=xt=e:xt=xt.next=e,xt}function os(){if(ct===null){var e=Ke.alternate;e=e!==null?e.memoizedState:null}else e=ct.next;var s=xt===null?Ke.memoizedState:xt.next;if(s!==null)xt=s,ct=e;else{if(e===null)throw Error(Q(310));ct=e,e={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},xt===null?Ke.memoizedState=xt=e:xt=xt.next=e}return xt}function Qn(e,s){return typeof s=="function"?s(e):s}function Yl(e){var s=os(),r=s.queue;if(r===null)throw Error(Q(311));r.lastRenderedReducer=e;var n=ct,a=n.baseQueue,l=r.pending;if(l!==null){if(a!==null){var i=a.next;a.next=l.next,l.next=i}n.baseQueue=a=l,r.pending=null}if(a!==null){l=a.next,n=n.baseState;var o=i=null,d=null,m=l;do{var p=m.lane;if((Tr&p)===p)d!==null&&(d=d.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),n=m.hasEagerState?m.eagerState:e(n,m.action);else{var j={lane:p,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};d===null?(o=d=j,i=n):d=d.next=j,Ke.lanes|=p,Er|=p}m=m.next}while(m!==null&&m!==l);d===null?i=n:d.next=o,fs(n,s.memoizedState)||(Ut=!0),s.memoizedState=n,s.baseState=i,s.baseQueue=d,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do l=a.lane,Ke.lanes|=l,Er|=l,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[s.memoizedState,r.dispatch]}function Xl(e){var s=os(),r=s.queue;if(r===null)throw Error(Q(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,l=s.memoizedState;if(a!==null){r.pending=null;var i=a=a.next;do l=e(l,i.action),i=i.next;while(i!==a);fs(l,s.memoizedState)||(Ut=!0),s.memoizedState=l,s.baseQueue===null&&(s.baseState=l),r.lastRenderedState=l}return[l,n]}function Mu(){}function Iu(e,s){var r=Ke,n=os(),a=s(),l=!fs(n.memoizedState,a);if(l&&(n.memoizedState=a,Ut=!0),n=n.queue,$o(zu.bind(null,r,n,e),[e]),n.getSnapshot!==s||l||xt!==null&&xt.memoizedState.tag&1){if(r.flags|=2048,Kn(9,Lu.bind(null,r,n,a,s),void 0,null),pt===null)throw Error(Q(349));Tr&30||Au(r,s,a)}return a}function Au(e,s,r){e.flags|=16384,e={getSnapshot:s,value:r},s=Ke.updateQueue,s===null?(s={lastEffect:null,stores:null},Ke.updateQueue=s,s.stores=[e]):(r=s.stores,r===null?s.stores=[e]:r.push(e))}function Lu(e,s,r,n){s.value=r,s.getSnapshot=n,Fu(s)&&Ru(e)}function zu(e,s,r){return r(function(){Fu(s)&&Ru(e)})}function Fu(e){var s=e.getSnapshot;e=e.value;try{var r=s();return!fs(e,r)}catch{return!0}}function Ru(e){var s=$s(e,1);s!==null&&gs(s,e,1,-1)}function Hc(e){var s=vs();return typeof e=="function"&&(e=e()),s.memoizedState=s.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qn,lastRenderedState:e},s.queue=e,e=e.dispatch=Rh.bind(null,Ke,e),[s.memoizedState,e]}function Kn(e,s,r,n){return e={tag:e,create:s,destroy:r,deps:n,next:null},s=Ke.updateQueue,s===null?(s={lastEffect:null,stores:null},Ke.updateQueue=s,s.lastEffect=e.next=e):(r=s.lastEffect,r===null?s.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,s.lastEffect=e)),e}function $u(){return os().memoizedState}function Aa(e,s,r,n){var a=vs();Ke.flags|=e,a.memoizedState=Kn(1|s,r,void 0,n===void 0?null:n)}function vl(e,s,r,n){var a=os();n=n===void 0?null:n;var l=void 0;if(ct!==null){var i=ct.memoizedState;if(l=i.destroy,n!==null&&zo(n,i.deps)){a.memoizedState=Kn(s,r,l,n);return}}Ke.flags|=e,a.memoizedState=Kn(1|s,r,l,n)}function Bc(e,s){return Aa(8390656,8,e,s)}function $o(e,s){return vl(2048,8,e,s)}function Ou(e,s){return vl(4,2,e,s)}function Uu(e,s){return vl(4,4,e,s)}function Hu(e,s){if(typeof s=="function")return e=e(),s(e),function(){s(null)};if(s!=null)return e=e(),s.current=e,function(){s.current=null}}function Bu(e,s,r){return r=r!=null?r.concat([e]):null,vl(4,4,Hu.bind(null,s,e),r)}function Oo(){}function Vu(e,s){var r=os();s=s===void 0?null:s;var n=r.memoizedState;return n!==null&&s!==null&&zo(s,n[1])?n[0]:(r.memoizedState=[e,s],e)}function Wu(e,s){var r=os();s=s===void 0?null:s;var n=r.memoizedState;return n!==null&&s!==null&&zo(s,n[1])?n[0]:(e=e(),r.memoizedState=[e,s],e)}function Gu(e,s,r){return Tr&21?(fs(r,s)||(r=Xd(),Ke.lanes|=r,Er|=r,e.baseState=!0),s):(e.baseState&&(e.baseState=!1,Ut=!0),e.memoizedState=r)}function zh(e,s){var r=Pe;Pe=r!==0&&4>r?r:4,e(!0);var n=Kl.transition;Kl.transition={};try{e(!1),s()}finally{Pe=r,Kl.transition=n}}function qu(){return os().memoizedState}function Fh(e,s,r){var n=ir(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Qu(e))Ku(s,r);else if(r=Tu(e,s,r,n),r!==null){var a=Mt();gs(r,e,n,a),Yu(r,s,n)}}function Rh(e,s,r){var n=ir(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Qu(e))Ku(s,a);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=s.lastRenderedReducer,l!==null))try{var i=s.lastRenderedState,o=l(i,r);if(a.hasEagerState=!0,a.eagerState=o,fs(o,i)){var d=s.interleaved;d===null?(a.next=a,Po(s)):(a.next=d.next,d.next=a),s.interleaved=a;return}}catch{}finally{}r=Tu(e,s,a,n),r!==null&&(a=Mt(),gs(r,e,n,a),Yu(r,s,n))}}function Qu(e){var s=e.alternate;return e===Ke||s!==null&&s===Ke}function Ku(e,s){En=rl=!0;var r=e.pending;r===null?s.next=s:(s.next=r.next,r.next=s),e.pending=s}function Yu(e,s,r){if(r&4194240){var n=s.lanes;n&=e.pendingLanes,r|=n,s.lanes=r,fo(e,r)}}var nl={readContext:is,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useInsertionEffect:kt,useLayoutEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useMutableSource:kt,useSyncExternalStore:kt,useId:kt,unstable_isNewReconciler:!1},$h={readContext:is,useCallback:function(e,s){return vs().memoizedState=[e,s===void 0?null:s],e},useContext:is,useEffect:Bc,useImperativeHandle:function(e,s,r){return r=r!=null?r.concat([e]):null,Aa(4194308,4,Hu.bind(null,s,e),r)},useLayoutEffect:function(e,s){return Aa(4194308,4,e,s)},useInsertionEffect:function(e,s){return Aa(4,2,e,s)},useMemo:function(e,s){var r=vs();return s=s===void 0?null:s,e=e(),r.memoizedState=[e,s],e},useReducer:function(e,s,r){var n=vs();return s=r!==void 0?r(s):s,n.memoizedState=n.baseState=s,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},n.queue=e,e=e.dispatch=Fh.bind(null,Ke,e),[n.memoizedState,e]},useRef:function(e){var s=vs();return e={current:e},s.memoizedState=e},useState:Hc,useDebugValue:Oo,useDeferredValue:function(e){return vs().memoizedState=e},useTransition:function(){var e=Hc(!1),s=e[0];return e=zh.bind(null,e[1]),vs().memoizedState=e,[s,e]},useMutableSource:function(){},useSyncExternalStore:function(e,s,r){var n=Ke,a=vs();if(qe){if(r===void 0)throw Error(Q(407));r=r()}else{if(r=s(),pt===null)throw Error(Q(349));Tr&30||Au(n,s,r)}a.memoizedState=r;var l={value:r,getSnapshot:s};return a.queue=l,Bc(zu.bind(null,n,l,e),[e]),n.flags|=2048,Kn(9,Lu.bind(null,n,l,r,s),void 0,null),r},useId:function(){var e=vs(),s=pt.identifierPrefix;if(qe){var r=Es,n=Ts;r=(n&~(1<<32-ps(n)-1)).toString(32)+r,s=":"+s+"R"+r,r=qn++,0<r&&(s+="H"+r.toString(32)),s+=":"}else r=Lh++,s=":"+s+"r"+r.toString(32)+":";return e.memoizedState=s},unstable_isNewReconciler:!1},Oh={readContext:is,useCallback:Vu,useContext:is,useEffect:$o,useImperativeHandle:Bu,useInsertionEffect:Ou,useLayoutEffect:Uu,useMemo:Wu,useReducer:Yl,useRef:$u,useState:function(){return Yl(Qn)},useDebugValue:Oo,useDeferredValue:function(e){var s=os();return Gu(s,ct.memoizedState,e)},useTransition:function(){var e=Yl(Qn)[0],s=os().memoizedState;return[e,s]},useMutableSource:Mu,useSyncExternalStore:Iu,useId:qu,unstable_isNewReconciler:!1},Uh={readContext:is,useCallback:Vu,useContext:is,useEffect:$o,useImperativeHandle:Bu,useInsertionEffect:Ou,useLayoutEffect:Uu,useMemo:Wu,useReducer:Xl,useRef:$u,useState:function(){return Xl(Qn)},useDebugValue:Oo,useDeferredValue:function(e){var s=os();return ct===null?s.memoizedState=e:Gu(s,ct.memoizedState,e)},useTransition:function(){var e=Xl(Qn)[0],s=os().memoizedState;return[e,s]},useMutableSource:Mu,useSyncExternalStore:Iu,useId:qu,unstable_isNewReconciler:!1};function ms(e,s){if(e&&e.defaultProps){s=Ye({},s),e=e.defaultProps;for(var r in e)s[r]===void 0&&(s[r]=e[r]);return s}return s}function Ai(e,s,r,n){s=e.memoizedState,r=r(n,s),r=r==null?s:Ye({},s,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var jl={isMounted:function(e){return(e=e._reactInternals)?Ir(e)===e:!1},enqueueSetState:function(e,s,r){e=e._reactInternals;var n=Mt(),a=ir(e),l=Ls(n,a);l.payload=s,r!=null&&(l.callback=r),s=ar(e,l,a),s!==null&&(gs(s,e,a,n),Ma(s,e,a))},enqueueReplaceState:function(e,s,r){e=e._reactInternals;var n=Mt(),a=ir(e),l=Ls(n,a);l.tag=1,l.payload=s,r!=null&&(l.callback=r),s=ar(e,l,a),s!==null&&(gs(s,e,a,n),Ma(s,e,a))},enqueueForceUpdate:function(e,s){e=e._reactInternals;var r=Mt(),n=ir(e),a=Ls(r,n);a.tag=2,s!=null&&(a.callback=s),s=ar(e,a,n),s!==null&&(gs(s,e,n,r),Ma(s,e,n))}};function Vc(e,s,r,n,a,l,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,l,i):s.prototype&&s.prototype.isPureReactComponent?!Un(r,n)||!Un(a,l):!0}function Xu(e,s,r){var n=!1,a=ur,l=s.contextType;return typeof l=="object"&&l!==null?l=is(l):(a=Bt(s)?Cr:Dt.current,n=s.contextTypes,l=(n=n!=null)?sn(e,a):ur),s=new s(r,l),e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=jl,e.stateNode=s,s._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=l),s}function Wc(e,s,r,n){e=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,n),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,n),s.state!==e&&jl.enqueueReplaceState(s,s.state,null)}function Li(e,s,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Mo(e);var l=s.contextType;typeof l=="object"&&l!==null?a.context=is(l):(l=Bt(s)?Cr:Dt.current,a.context=sn(e,l)),a.state=e.memoizedState,l=s.getDerivedStateFromProps,typeof l=="function"&&(Ai(e,s,l,r),a.state=e.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(s=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),s!==a.state&&jl.enqueueReplaceState(a,a.state,null),tl(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function ln(e,s){try{var r="",n=s;do r+=px(n),n=n.return;while(n);var a=r}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:s,stack:a,digest:null}}function Zl(e,s,r){return{value:e,source:null,stack:r??null,digest:s??null}}function zi(e,s){try{console.error(s.value)}catch(r){setTimeout(function(){throw r})}}var Hh=typeof WeakMap=="function"?WeakMap:Map;function Zu(e,s,r){r=Ls(-1,r),r.tag=3,r.payload={element:null};var n=s.value;return r.callback=function(){ll||(ll=!0,Gi=n),zi(e,s)},r}function Ju(e,s,r){r=Ls(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=s.value;r.payload=function(){return n(a)},r.callback=function(){zi(e,s)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(r.callback=function(){zi(e,s),typeof n!="function"&&(lr===null?lr=new Set([this]):lr.add(this));var i=s.stack;this.componentDidCatch(s.value,{componentStack:i!==null?i:""})}),r}function Gc(e,s,r){var n=e.pingCache;if(n===null){n=e.pingCache=new Hh;var a=new Set;n.set(s,a)}else a=n.get(s),a===void 0&&(a=new Set,n.set(s,a));a.has(r)||(a.add(r),e=sp.bind(null,e,s,r),s.then(e,e))}function qc(e){do{var s;if((s=e.tag===13)&&(s=e.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return e;e=e.return}while(e!==null);return null}function Qc(e,s,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===s?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(s=Ls(-1,1),s.tag=2,ar(r,s,1))),r.lanes|=1),e)}var Bh=Us.ReactCurrentOwner,Ut=!1;function Et(e,s,r,n){s.child=e===null?Du(s,null,r,n):nn(s,e.child,r,n)}function Kc(e,s,r,n,a){r=r.render;var l=s.ref;return Jr(s,a),n=Fo(e,s,r,n,l,a),r=Ro(),e!==null&&!Ut?(s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~a,Os(e,s,a)):(qe&&r&&So(s),s.flags|=1,Et(e,s,n,a),s.child)}function Yc(e,s,r,n,a){if(e===null){var l=r.type;return typeof l=="function"&&!Qo(l)&&l.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(s.tag=15,s.type=l,em(e,s,l,n,a)):(e=Ra(r.type,null,n,s,s.mode,a),e.ref=s.ref,e.return=s,s.child=e)}if(l=e.child,!(e.lanes&a)){var i=l.memoizedProps;if(r=r.compare,r=r!==null?r:Un,r(i,n)&&e.ref===s.ref)return Os(e,s,a)}return s.flags|=1,e=or(l,n),e.ref=s.ref,e.return=s,s.child=e}function em(e,s,r,n,a){if(e!==null){var l=e.memoizedProps;if(Un(l,n)&&e.ref===s.ref)if(Ut=!1,s.pendingProps=n=l,(e.lanes&a)!==0)e.flags&131072&&(Ut=!0);else return s.lanes=e.lanes,Os(e,s,a)}return Fi(e,s,r,n,a)}function tm(e,s,r){var n=s.pendingProps,a=n.children,l=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Oe(Qr,qt),qt|=r;else{if(!(r&1073741824))return e=l!==null?l.baseLanes|r:r,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:e,cachePool:null,transitions:null},s.updateQueue=null,Oe(Qr,qt),qt|=e,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=l!==null?l.baseLanes:r,Oe(Qr,qt),qt|=n}else l!==null?(n=l.baseLanes|r,s.memoizedState=null):n=r,Oe(Qr,qt),qt|=n;return Et(e,s,a,r),s.child}function sm(e,s){var r=s.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(s.flags|=512,s.flags|=2097152)}function Fi(e,s,r,n,a){var l=Bt(r)?Cr:Dt.current;return l=sn(s,l),Jr(s,a),r=Fo(e,s,r,n,l,a),n=Ro(),e!==null&&!Ut?(s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~a,Os(e,s,a)):(qe&&n&&So(s),s.flags|=1,Et(e,s,r,a),s.child)}function Xc(e,s,r,n,a){if(Bt(r)){var l=!0;Ya(s)}else l=!1;if(Jr(s,a),s.stateNode===null)La(e,s),Xu(s,r,n),Li(s,r,n,a),n=!0;else if(e===null){var i=s.stateNode,o=s.memoizedProps;i.props=o;var d=i.context,m=r.contextType;typeof m=="object"&&m!==null?m=is(m):(m=Bt(r)?Cr:Dt.current,m=sn(s,m));var p=r.getDerivedStateFromProps,j=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function";j||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==n||d!==m)&&Wc(s,i,n,m),Ws=!1;var c=s.memoizedState;i.state=c,tl(s,n,i,a),d=s.memoizedState,o!==n||c!==d||Ht.current||Ws?(typeof p=="function"&&(Ai(s,r,p,n),d=s.memoizedState),(o=Ws||Vc(s,r,o,n,c,d,m))?(j||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(s.flags|=4194308)):(typeof i.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=n,s.memoizedState=d),i.props=n,i.state=d,i.context=m,n=o):(typeof i.componentDidMount=="function"&&(s.flags|=4194308),n=!1)}else{i=s.stateNode,Eu(e,s),o=s.memoizedProps,m=s.type===s.elementType?o:ms(s.type,o),i.props=m,j=s.pendingProps,c=i.context,d=r.contextType,typeof d=="object"&&d!==null?d=is(d):(d=Bt(r)?Cr:Dt.current,d=sn(s,d));var v=r.getDerivedStateFromProps;(p=typeof v=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==j||c!==d)&&Wc(s,i,n,d),Ws=!1,c=s.memoizedState,i.state=c,tl(s,n,i,a);var y=s.memoizedState;o!==j||c!==y||Ht.current||Ws?(typeof v=="function"&&(Ai(s,r,v,n),y=s.memoizedState),(m=Ws||Vc(s,r,m,n,c,y,d)||!1)?(p||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,y,d),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,y,d)),typeof i.componentDidUpdate=="function"&&(s.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof i.componentDidUpdate!="function"||o===e.memoizedProps&&c===e.memoizedState||(s.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&c===e.memoizedState||(s.flags|=1024),s.memoizedProps=n,s.memoizedState=y),i.props=n,i.state=y,i.context=d,n=m):(typeof i.componentDidUpdate!="function"||o===e.memoizedProps&&c===e.memoizedState||(s.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&c===e.memoizedState||(s.flags|=1024),n=!1)}return Ri(e,s,r,n,l,a)}function Ri(e,s,r,n,a,l){sm(e,s);var i=(s.flags&128)!==0;if(!n&&!i)return a&&zc(s,r,!1),Os(e,s,l);n=s.stateNode,Bh.current=s;var o=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return s.flags|=1,e!==null&&i?(s.child=nn(s,e.child,null,l),s.child=nn(s,null,o,l)):Et(e,s,o,l),s.memoizedState=n.state,a&&zc(s,r,!0),s.child}function rm(e){var s=e.stateNode;s.pendingContext?Lc(e,s.pendingContext,s.pendingContext!==s.context):s.context&&Lc(e,s.context,!1),Io(e,s.containerInfo)}function Zc(e,s,r,n,a){return rn(),Co(a),s.flags|=256,Et(e,s,r,n),s.child}var $i={dehydrated:null,treeContext:null,retryLane:0};function Oi(e){return{baseLanes:e,cachePool:null,transitions:null}}function nm(e,s,r){var n=s.pendingProps,a=Qe.current,l=!1,i=(s.flags&128)!==0,o;if((o=i)||(o=e!==null&&e.memoizedState===null?!1:(a&2)!==0),o?(l=!0,s.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Oe(Qe,a&1),e===null)return Mi(s),e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(s.mode&1?e.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(i=n.children,e=n.fallback,l?(n=s.mode,l=s.child,i={mode:"hidden",children:i},!(n&1)&&l!==null?(l.childLanes=0,l.pendingProps=i):l=bl(i,n,0,null),e=Sr(e,n,r,null),l.return=s,e.return=s,l.sibling=e,s.child=l,s.child.memoizedState=Oi(r),s.memoizedState=$i,e):Uo(s,i));if(a=e.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return Vh(e,s,i,n,o,a,r);if(l){l=n.fallback,i=s.mode,a=e.child,o=a.sibling;var d={mode:"hidden",children:n.children};return!(i&1)&&s.child!==a?(n=s.child,n.childLanes=0,n.pendingProps=d,s.deletions=null):(n=or(a,d),n.subtreeFlags=a.subtreeFlags&14680064),o!==null?l=or(o,l):(l=Sr(l,i,r,null),l.flags|=2),l.return=s,n.return=s,n.sibling=l,s.child=n,n=l,l=s.child,i=e.child.memoizedState,i=i===null?Oi(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},l.memoizedState=i,l.childLanes=e.childLanes&~r,s.memoizedState=$i,n}return l=e.child,e=l.sibling,n=or(l,{mode:"visible",children:n.children}),!(s.mode&1)&&(n.lanes=r),n.return=s,n.sibling=null,e!==null&&(r=s.deletions,r===null?(s.deletions=[e],s.flags|=16):r.push(e)),s.child=n,s.memoizedState=null,n}function Uo(e,s){return s=bl({mode:"visible",children:s},e.mode,0,null),s.return=e,e.child=s}function ja(e,s,r,n){return n!==null&&Co(n),nn(s,e.child,null,r),e=Uo(s,s.pendingProps.children),e.flags|=2,s.memoizedState=null,e}function Vh(e,s,r,n,a,l,i){if(r)return s.flags&256?(s.flags&=-257,n=Zl(Error(Q(422))),ja(e,s,i,n)):s.memoizedState!==null?(s.child=e.child,s.flags|=128,null):(l=n.fallback,a=s.mode,n=bl({mode:"visible",children:n.children},a,0,null),l=Sr(l,a,i,null),l.flags|=2,n.return=s,l.return=s,n.sibling=l,s.child=n,s.mode&1&&nn(s,e.child,null,i),s.child.memoizedState=Oi(i),s.memoizedState=$i,l);if(!(s.mode&1))return ja(e,s,i,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var o=n.dgst;return n=o,l=Error(Q(419)),n=Zl(l,n,void 0),ja(e,s,i,n)}if(o=(i&e.childLanes)!==0,Ut||o){if(n=pt,n!==null){switch(i&-i){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|i)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,$s(e,a),gs(n,e,a,-1))}return qo(),n=Zl(Error(Q(421))),ja(e,s,i,n)}return a.data==="$?"?(s.flags|=128,s.child=e.child,s=rp.bind(null,e),a._reactRetry=s,null):(e=l.treeContext,Qt=nr(a.nextSibling),Kt=s,qe=!0,hs=null,e!==null&&(rs[ns++]=Ts,rs[ns++]=Es,rs[ns++]=Dr,Ts=e.id,Es=e.overflow,Dr=s),s=Uo(s,n.children),s.flags|=4096,s)}function Jc(e,s,r){e.lanes|=s;var n=e.alternate;n!==null&&(n.lanes|=s),Ii(e.return,s,r)}function Jl(e,s,r,n,a){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(l.isBackwards=s,l.rendering=null,l.renderingStartTime=0,l.last=n,l.tail=r,l.tailMode=a)}function am(e,s,r){var n=s.pendingProps,a=n.revealOrder,l=n.tail;if(Et(e,s,n.children,r),n=Qe.current,n&2)n=n&1|2,s.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=s.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Jc(e,r,s);else if(e.tag===19)Jc(e,r,s);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===s)break e;for(;e.sibling===null;){if(e.return===null||e.return===s)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Oe(Qe,n),!(s.mode&1))s.memoizedState=null;else switch(a){case"forwards":for(r=s.child,a=null;r!==null;)e=r.alternate,e!==null&&sl(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=s.child,s.child=null):(a=r.sibling,r.sibling=null),Jl(s,!1,a,r,l);break;case"backwards":for(r=null,a=s.child,s.child=null;a!==null;){if(e=a.alternate,e!==null&&sl(e)===null){s.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Jl(s,!0,r,null,l);break;case"together":Jl(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function La(e,s){!(s.mode&1)&&e!==null&&(e.alternate=null,s.alternate=null,s.flags|=2)}function Os(e,s,r){if(e!==null&&(s.dependencies=e.dependencies),Er|=s.lanes,!(r&s.childLanes))return null;if(e!==null&&s.child!==e.child)throw Error(Q(153));if(s.child!==null){for(e=s.child,r=or(e,e.pendingProps),s.child=r,r.return=s;e.sibling!==null;)e=e.sibling,r=r.sibling=or(e,e.pendingProps),r.return=s;r.sibling=null}return s.child}function Wh(e,s,r){switch(s.tag){case 3:rm(s),rn();break;case 5:Pu(s);break;case 1:Bt(s.type)&&Ya(s);break;case 4:Io(s,s.stateNode.containerInfo);break;case 10:var n=s.type._context,a=s.memoizedProps.value;Oe(Ja,n._currentValue),n._currentValue=a;break;case 13:if(n=s.memoizedState,n!==null)return n.dehydrated!==null?(Oe(Qe,Qe.current&1),s.flags|=128,null):r&s.child.childLanes?nm(e,s,r):(Oe(Qe,Qe.current&1),e=Os(e,s,r),e!==null?e.sibling:null);Oe(Qe,Qe.current&1);break;case 19:if(n=(r&s.childLanes)!==0,e.flags&128){if(n)return am(e,s,r);s.flags|=128}if(a=s.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Oe(Qe,Qe.current),n)break;return null;case 22:case 23:return s.lanes=0,tm(e,s,r)}return Os(e,s,r)}var lm,Ui,im,om;lm=function(e,s){for(var r=s.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Ui=function(){};im=function(e,s,r,n){var a=e.memoizedProps;if(a!==n){e=s.stateNode,Nr(Ss.current);var l=null;switch(r){case"input":a=ci(e,a),n=ci(e,n),l=[];break;case"select":a=Ye({},a,{value:void 0}),n=Ye({},n,{value:void 0}),l=[];break;case"textarea":a=mi(e,a),n=mi(e,n),l=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Qa)}hi(r,n);var i;r=null;for(m in a)if(!n.hasOwnProperty(m)&&a.hasOwnProperty(m)&&a[m]!=null)if(m==="style"){var o=a[m];for(i in o)o.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(An.hasOwnProperty(m)?l||(l=[]):(l=l||[]).push(m,null));for(m in n){var d=n[m];if(o=a!=null?a[m]:void 0,n.hasOwnProperty(m)&&d!==o&&(d!=null||o!=null))if(m==="style")if(o){for(i in o)!o.hasOwnProperty(i)||d&&d.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in d)d.hasOwnProperty(i)&&o[i]!==d[i]&&(r||(r={}),r[i]=d[i])}else r||(l||(l=[]),l.push(m,r)),r=d;else m==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,o=o?o.__html:void 0,d!=null&&o!==d&&(l=l||[]).push(m,d)):m==="children"?typeof d!="string"&&typeof d!="number"||(l=l||[]).push(m,""+d):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(An.hasOwnProperty(m)?(d!=null&&m==="onScroll"&&Be("scroll",e),l||o===d||(l=[])):(l=l||[]).push(m,d))}r&&(l=l||[]).push("style",r);var m=l;(s.updateQueue=m)&&(s.flags|=4)}};om=function(e,s,r,n){r!==n&&(s.flags|=4)};function vn(e,s){if(!qe)switch(e.tailMode){case"hidden":s=e.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?s||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function St(e){var s=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(s)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,s}function Gh(e,s,r){var n=s.pendingProps;switch(_o(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(s),null;case 1:return Bt(s.type)&&Ka(),St(s),null;case 3:return n=s.stateNode,an(),Ve(Ht),Ve(Dt),Lo(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(ya(s)?s.flags|=4:e===null||e.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,hs!==null&&(Ki(hs),hs=null))),Ui(e,s),St(s),null;case 5:Ao(s);var a=Nr(Gn.current);if(r=s.type,e!==null&&s.stateNode!=null)im(e,s,r,n,a),e.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!n){if(s.stateNode===null)throw Error(Q(166));return St(s),null}if(e=Nr(Ss.current),ya(s)){n=s.stateNode,r=s.type;var l=s.memoizedProps;switch(n[ws]=s,n[Vn]=l,e=(s.mode&1)!==0,r){case"dialog":Be("cancel",n),Be("close",n);break;case"iframe":case"object":case"embed":Be("load",n);break;case"video":case"audio":for(a=0;a<kn.length;a++)Be(kn[a],n);break;case"source":Be("error",n);break;case"img":case"image":case"link":Be("error",n),Be("load",n);break;case"details":Be("toggle",n);break;case"input":oc(n,l),Be("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!l.multiple},Be("invalid",n);break;case"textarea":dc(n,l),Be("invalid",n)}hi(r,l),a=null;for(var i in l)if(l.hasOwnProperty(i)){var o=l[i];i==="children"?typeof o=="string"?n.textContent!==o&&(l.suppressHydrationWarning!==!0&&fa(n.textContent,o,e),a=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(l.suppressHydrationWarning!==!0&&fa(n.textContent,o,e),a=["children",""+o]):An.hasOwnProperty(i)&&o!=null&&i==="onScroll"&&Be("scroll",n)}switch(r){case"input":ca(n),cc(n,l,!0);break;case"textarea":ca(n),uc(n);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(n.onclick=Qa)}n=a,s.updateQueue=n,n!==null&&(s.flags|=4)}else{i=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=zd(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=i.createElement(r,{is:n.is}):(e=i.createElement(r),r==="select"&&(i=e,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):e=i.createElementNS(e,r),e[ws]=s,e[Vn]=n,lm(e,s,!1,!1),s.stateNode=e;e:{switch(i=pi(r,n),r){case"dialog":Be("cancel",e),Be("close",e),a=n;break;case"iframe":case"object":case"embed":Be("load",e),a=n;break;case"video":case"audio":for(a=0;a<kn.length;a++)Be(kn[a],e);a=n;break;case"source":Be("error",e),a=n;break;case"img":case"image":case"link":Be("error",e),Be("load",e),a=n;break;case"details":Be("toggle",e),a=n;break;case"input":oc(e,n),a=ci(e,n),Be("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=Ye({},n,{value:void 0}),Be("invalid",e);break;case"textarea":dc(e,n),a=mi(e,n),Be("invalid",e);break;default:a=n}hi(r,a),o=a;for(l in o)if(o.hasOwnProperty(l)){var d=o[l];l==="style"?$d(e,d):l==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&Fd(e,d)):l==="children"?typeof d=="string"?(r!=="textarea"||d!=="")&&Ln(e,d):typeof d=="number"&&Ln(e,""+d):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(An.hasOwnProperty(l)?d!=null&&l==="onScroll"&&Be("scroll",e):d!=null&&uo(e,l,d,i))}switch(r){case"input":ca(e),cc(e,n,!1);break;case"textarea":ca(e),uc(e);break;case"option":n.value!=null&&e.setAttribute("value",""+dr(n.value));break;case"select":e.multiple=!!n.multiple,l=n.value,l!=null?Kr(e,!!n.multiple,l,!1):n.defaultValue!=null&&Kr(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Qa)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return St(s),null;case 6:if(e&&s.stateNode!=null)om(e,s,e.memoizedProps,n);else{if(typeof n!="string"&&s.stateNode===null)throw Error(Q(166));if(r=Nr(Gn.current),Nr(Ss.current),ya(s)){if(n=s.stateNode,r=s.memoizedProps,n[ws]=s,(l=n.nodeValue!==r)&&(e=Kt,e!==null))switch(e.tag){case 3:fa(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&fa(n.nodeValue,r,(e.mode&1)!==0)}l&&(s.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ws]=s,s.stateNode=n}return St(s),null;case 13:if(Ve(Qe),n=s.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(qe&&Qt!==null&&s.mode&1&&!(s.flags&128))_u(),rn(),s.flags|=98560,l=!1;else if(l=ya(s),n!==null&&n.dehydrated!==null){if(e===null){if(!l)throw Error(Q(318));if(l=s.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(Q(317));l[ws]=s}else rn(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;St(s),l=!1}else hs!==null&&(Ki(hs),hs=null),l=!0;if(!l)return s.flags&65536?s:null}return s.flags&128?(s.lanes=r,s):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(s.child.flags|=8192,s.mode&1&&(e===null||Qe.current&1?dt===0&&(dt=3):qo())),s.updateQueue!==null&&(s.flags|=4),St(s),null);case 4:return an(),Ui(e,s),e===null&&Hn(s.stateNode.containerInfo),St(s),null;case 10:return Eo(s.type._context),St(s),null;case 17:return Bt(s.type)&&Ka(),St(s),null;case 19:if(Ve(Qe),l=s.memoizedState,l===null)return St(s),null;if(n=(s.flags&128)!==0,i=l.rendering,i===null)if(n)vn(l,!1);else{if(dt!==0||e!==null&&e.flags&128)for(e=s.child;e!==null;){if(i=sl(e),i!==null){for(s.flags|=128,vn(l,!1),n=i.updateQueue,n!==null&&(s.updateQueue=n,s.flags|=4),s.subtreeFlags=0,n=r,r=s.child;r!==null;)l=r,e=n,l.flags&=14680066,i=l.alternate,i===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,l.type=i.type,e=i.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Oe(Qe,Qe.current&1|2),s.child}e=e.sibling}l.tail!==null&&tt()>on&&(s.flags|=128,n=!0,vn(l,!1),s.lanes=4194304)}else{if(!n)if(e=sl(i),e!==null){if(s.flags|=128,n=!0,r=e.updateQueue,r!==null&&(s.updateQueue=r,s.flags|=4),vn(l,!0),l.tail===null&&l.tailMode==="hidden"&&!i.alternate&&!qe)return St(s),null}else 2*tt()-l.renderingStartTime>on&&r!==1073741824&&(s.flags|=128,n=!0,vn(l,!1),s.lanes=4194304);l.isBackwards?(i.sibling=s.child,s.child=i):(r=l.last,r!==null?r.sibling=i:s.child=i,l.last=i)}return l.tail!==null?(s=l.tail,l.rendering=s,l.tail=s.sibling,l.renderingStartTime=tt(),s.sibling=null,r=Qe.current,Oe(Qe,n?r&1|2:r&1),s):(St(s),null);case 22:case 23:return Go(),n=s.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(s.flags|=8192),n&&s.mode&1?qt&1073741824&&(St(s),s.subtreeFlags&6&&(s.flags|=8192)):St(s),null;case 24:return null;case 25:return null}throw Error(Q(156,s.tag))}function qh(e,s){switch(_o(s),s.tag){case 1:return Bt(s.type)&&Ka(),e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 3:return an(),Ve(Ht),Ve(Dt),Lo(),e=s.flags,e&65536&&!(e&128)?(s.flags=e&-65537|128,s):null;case 5:return Ao(s),null;case 13:if(Ve(Qe),e=s.memoizedState,e!==null&&e.dehydrated!==null){if(s.alternate===null)throw Error(Q(340));rn()}return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 19:return Ve(Qe),null;case 4:return an(),null;case 10:return Eo(s.type._context),null;case 22:case 23:return Go(),null;case 24:return null;default:return null}}var wa=!1,_t=!1,Qh=typeof WeakSet=="function"?WeakSet:Set,oe=null;function qr(e,s){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Je(e,s,n)}else r.current=null}function Hi(e,s,r){try{r()}catch(n){Je(e,s,n)}}var ed=!1;function Kh(e,s){if(Si=Wa,e=xu(),ko(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,l=n.focusNode;n=n.focusOffset;try{r.nodeType,l.nodeType}catch{r=null;break e}var i=0,o=-1,d=-1,m=0,p=0,j=e,c=null;t:for(;;){for(var v;j!==r||a!==0&&j.nodeType!==3||(o=i+a),j!==l||n!==0&&j.nodeType!==3||(d=i+n),j.nodeType===3&&(i+=j.nodeValue.length),(v=j.firstChild)!==null;)c=j,j=v;for(;;){if(j===e)break t;if(c===r&&++m===a&&(o=i),c===l&&++p===n&&(d=i),(v=j.nextSibling)!==null)break;j=c,c=j.parentNode}j=v}r=o===-1||d===-1?null:{start:o,end:d}}else r=null}r=r||{start:0,end:0}}else r=null;for(_i={focusedElem:e,selectionRange:r},Wa=!1,oe=s;oe!==null;)if(s=oe,e=s.child,(s.subtreeFlags&1028)!==0&&e!==null)e.return=s,oe=e;else for(;oe!==null;){s=oe;try{var y=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var M=y.memoizedProps,z=y.memoizedState,h=s.stateNode,x=h.getSnapshotBeforeUpdate(s.elementType===s.type?M:ms(s.type,M),z);h.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var f=s.stateNode.containerInfo;f.nodeType===1?f.textContent="":f.nodeType===9&&f.documentElement&&f.removeChild(f.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(E){Je(s,s.return,E)}if(e=s.sibling,e!==null){e.return=s.return,oe=e;break}oe=s.return}return y=ed,ed=!1,y}function Pn(e,s,r){var n=s.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var l=a.destroy;a.destroy=void 0,l!==void 0&&Hi(s,r,l)}a=a.next}while(a!==n)}}function wl(e,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==s)}}function Bi(e){var s=e.ref;if(s!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof s=="function"?s(e):s.current=e}}function cm(e){var s=e.alternate;s!==null&&(e.alternate=null,cm(s)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(s=e.stateNode,s!==null&&(delete s[ws],delete s[Vn],delete s[Ti],delete s[Ph],delete s[Mh])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function dm(e){return e.tag===5||e.tag===3||e.tag===4}function td(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||dm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Vi(e,s,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,s?r.nodeType===8?r.parentNode.insertBefore(e,s):r.insertBefore(e,s):(r.nodeType===8?(s=r.parentNode,s.insertBefore(e,r)):(s=r,s.appendChild(e)),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=Qa));else if(n!==4&&(e=e.child,e!==null))for(Vi(e,s,r),e=e.sibling;e!==null;)Vi(e,s,r),e=e.sibling}function Wi(e,s,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,s?r.insertBefore(e,s):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Wi(e,s,r),e=e.sibling;e!==null;)Wi(e,s,r),e=e.sibling}var vt=null,xs=!1;function Bs(e,s,r){for(r=r.child;r!==null;)um(e,s,r),r=r.sibling}function um(e,s,r){if(ks&&typeof ks.onCommitFiberUnmount=="function")try{ks.onCommitFiberUnmount(xl,r)}catch{}switch(r.tag){case 5:_t||qr(r,s);case 6:var n=vt,a=xs;vt=null,Bs(e,s,r),vt=n,xs=a,vt!==null&&(xs?(e=vt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):vt.removeChild(r.stateNode));break;case 18:vt!==null&&(xs?(e=vt,r=r.stateNode,e.nodeType===8?Gl(e.parentNode,r):e.nodeType===1&&Gl(e,r),$n(e)):Gl(vt,r.stateNode));break;case 4:n=vt,a=xs,vt=r.stateNode.containerInfo,xs=!0,Bs(e,s,r),vt=n,xs=a;break;case 0:case 11:case 14:case 15:if(!_t&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var l=a,i=l.destroy;l=l.tag,i!==void 0&&(l&2||l&4)&&Hi(r,s,i),a=a.next}while(a!==n)}Bs(e,s,r);break;case 1:if(!_t&&(qr(r,s),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){Je(r,s,o)}Bs(e,s,r);break;case 21:Bs(e,s,r);break;case 22:r.mode&1?(_t=(n=_t)||r.memoizedState!==null,Bs(e,s,r),_t=n):Bs(e,s,r);break;default:Bs(e,s,r)}}function sd(e){var s=e.updateQueue;if(s!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Qh),s.forEach(function(n){var a=np.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function us(e,s){var r=s.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var l=e,i=s,o=i;e:for(;o!==null;){switch(o.tag){case 5:vt=o.stateNode,xs=!1;break e;case 3:vt=o.stateNode.containerInfo,xs=!0;break e;case 4:vt=o.stateNode.containerInfo,xs=!0;break e}o=o.return}if(vt===null)throw Error(Q(160));um(l,i,a),vt=null,xs=!1;var d=a.alternate;d!==null&&(d.return=null),a.return=null}catch(m){Je(a,s,m)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)mm(s,e),s=s.sibling}function mm(e,s){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(us(s,e),ys(e),n&4){try{Pn(3,e,e.return),wl(3,e)}catch(M){Je(e,e.return,M)}try{Pn(5,e,e.return)}catch(M){Je(e,e.return,M)}}break;case 1:us(s,e),ys(e),n&512&&r!==null&&qr(r,r.return);break;case 5:if(us(s,e),ys(e),n&512&&r!==null&&qr(r,r.return),e.flags&32){var a=e.stateNode;try{Ln(a,"")}catch(M){Je(e,e.return,M)}}if(n&4&&(a=e.stateNode,a!=null)){var l=e.memoizedProps,i=r!==null?r.memoizedProps:l,o=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{o==="input"&&l.type==="radio"&&l.name!=null&&Ad(a,l),pi(o,i);var m=pi(o,l);for(i=0;i<d.length;i+=2){var p=d[i],j=d[i+1];p==="style"?$d(a,j):p==="dangerouslySetInnerHTML"?Fd(a,j):p==="children"?Ln(a,j):uo(a,p,j,m)}switch(o){case"input":di(a,l);break;case"textarea":Ld(a,l);break;case"select":var c=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var v=l.value;v!=null?Kr(a,!!l.multiple,v,!1):c!==!!l.multiple&&(l.defaultValue!=null?Kr(a,!!l.multiple,l.defaultValue,!0):Kr(a,!!l.multiple,l.multiple?[]:"",!1))}a[Vn]=l}catch(M){Je(e,e.return,M)}}break;case 6:if(us(s,e),ys(e),n&4){if(e.stateNode===null)throw Error(Q(162));a=e.stateNode,l=e.memoizedProps;try{a.nodeValue=l}catch(M){Je(e,e.return,M)}}break;case 3:if(us(s,e),ys(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{$n(s.containerInfo)}catch(M){Je(e,e.return,M)}break;case 4:us(s,e),ys(e);break;case 13:us(s,e),ys(e),a=e.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(Vo=tt())),n&4&&sd(e);break;case 22:if(p=r!==null&&r.memoizedState!==null,e.mode&1?(_t=(m=_t)||p,us(s,e),_t=m):us(s,e),ys(e),n&8192){if(m=e.memoizedState!==null,(e.stateNode.isHidden=m)&&!p&&e.mode&1)for(oe=e,p=e.child;p!==null;){for(j=oe=p;oe!==null;){switch(c=oe,v=c.child,c.tag){case 0:case 11:case 14:case 15:Pn(4,c,c.return);break;case 1:qr(c,c.return);var y=c.stateNode;if(typeof y.componentWillUnmount=="function"){n=c,r=c.return;try{s=n,y.props=s.memoizedProps,y.state=s.memoizedState,y.componentWillUnmount()}catch(M){Je(n,r,M)}}break;case 5:qr(c,c.return);break;case 22:if(c.memoizedState!==null){nd(j);continue}}v!==null?(v.return=c,oe=v):nd(j)}p=p.sibling}e:for(p=null,j=e;;){if(j.tag===5){if(p===null){p=j;try{a=j.stateNode,m?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(o=j.stateNode,d=j.memoizedProps.style,i=d!=null&&d.hasOwnProperty("display")?d.display:null,o.style.display=Rd("display",i))}catch(M){Je(e,e.return,M)}}}else if(j.tag===6){if(p===null)try{j.stateNode.nodeValue=m?"":j.memoizedProps}catch(M){Je(e,e.return,M)}}else if((j.tag!==22&&j.tag!==23||j.memoizedState===null||j===e)&&j.child!==null){j.child.return=j,j=j.child;continue}if(j===e)break e;for(;j.sibling===null;){if(j.return===null||j.return===e)break e;p===j&&(p=null),j=j.return}p===j&&(p=null),j.sibling.return=j.return,j=j.sibling}}break;case 19:us(s,e),ys(e),n&4&&sd(e);break;case 21:break;default:us(s,e),ys(e)}}function ys(e){var s=e.flags;if(s&2){try{e:{for(var r=e.return;r!==null;){if(dm(r)){var n=r;break e}r=r.return}throw Error(Q(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Ln(a,""),n.flags&=-33);var l=td(e);Wi(e,l,a);break;case 3:case 4:var i=n.stateNode.containerInfo,o=td(e);Vi(e,o,i);break;default:throw Error(Q(161))}}catch(d){Je(e,e.return,d)}e.flags&=-3}s&4096&&(e.flags&=-4097)}function Yh(e,s,r){oe=e,xm(e)}function xm(e,s,r){for(var n=(e.mode&1)!==0;oe!==null;){var a=oe,l=a.child;if(a.tag===22&&n){var i=a.memoizedState!==null||wa;if(!i){var o=a.alternate,d=o!==null&&o.memoizedState!==null||_t;o=wa;var m=_t;if(wa=i,(_t=d)&&!m)for(oe=a;oe!==null;)i=oe,d=i.child,i.tag===22&&i.memoizedState!==null?ad(a):d!==null?(d.return=i,oe=d):ad(a);for(;l!==null;)oe=l,xm(l),l=l.sibling;oe=a,wa=o,_t=m}rd(e)}else a.subtreeFlags&8772&&l!==null?(l.return=a,oe=l):rd(e)}}function rd(e){for(;oe!==null;){var s=oe;if(s.flags&8772){var r=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:_t||wl(5,s);break;case 1:var n=s.stateNode;if(s.flags&4&&!_t)if(r===null)n.componentDidMount();else{var a=s.elementType===s.type?r.memoizedProps:ms(s.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var l=s.updateQueue;l!==null&&Uc(s,l,n);break;case 3:var i=s.updateQueue;if(i!==null){if(r=null,s.child!==null)switch(s.child.tag){case 5:r=s.child.stateNode;break;case 1:r=s.child.stateNode}Uc(s,i,r)}break;case 5:var o=s.stateNode;if(r===null&&s.flags&4){r=o;var d=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&r.focus();break;case"img":d.src&&(r.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var m=s.alternate;if(m!==null){var p=m.memoizedState;if(p!==null){var j=p.dehydrated;j!==null&&$n(j)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}_t||s.flags&512&&Bi(s)}catch(c){Je(s,s.return,c)}}if(s===e){oe=null;break}if(r=s.sibling,r!==null){r.return=s.return,oe=r;break}oe=s.return}}function nd(e){for(;oe!==null;){var s=oe;if(s===e){oe=null;break}var r=s.sibling;if(r!==null){r.return=s.return,oe=r;break}oe=s.return}}function ad(e){for(;oe!==null;){var s=oe;try{switch(s.tag){case 0:case 11:case 15:var r=s.return;try{wl(4,s)}catch(d){Je(s,r,d)}break;case 1:var n=s.stateNode;if(typeof n.componentDidMount=="function"){var a=s.return;try{n.componentDidMount()}catch(d){Je(s,a,d)}}var l=s.return;try{Bi(s)}catch(d){Je(s,l,d)}break;case 5:var i=s.return;try{Bi(s)}catch(d){Je(s,i,d)}}}catch(d){Je(s,s.return,d)}if(s===e){oe=null;break}var o=s.sibling;if(o!==null){o.return=s.return,oe=o;break}oe=s.return}}var Xh=Math.ceil,al=Us.ReactCurrentDispatcher,Ho=Us.ReactCurrentOwner,ls=Us.ReactCurrentBatchConfig,De=0,pt=null,at=null,jt=0,qt=0,Qr=xr(0),dt=0,Yn=null,Er=0,Nl=0,Bo=0,Mn=null,Ft=null,Vo=0,on=1/0,Cs=null,ll=!1,Gi=null,lr=null,Na=!1,Ks=null,il=0,In=0,qi=null,za=-1,Fa=0;function Mt(){return De&6?tt():za!==-1?za:za=tt()}function ir(e){return e.mode&1?De&2&&jt!==0?jt&-jt:Ah.transition!==null?(Fa===0&&(Fa=Xd()),Fa):(e=Pe,e!==0||(e=window.event,e=e===void 0?16:nu(e.type)),e):1}function gs(e,s,r,n){if(50<In)throw In=0,qi=null,Error(Q(185));ea(e,r,n),(!(De&2)||e!==pt)&&(e===pt&&(!(De&2)&&(Nl|=r),dt===4&&qs(e,jt)),Vt(e,n),r===1&&De===0&&!(s.mode&1)&&(on=tt()+500,yl&&hr()))}function Vt(e,s){var r=e.callbackNode;Ax(e,s);var n=Va(e,e===pt?jt:0);if(n===0)r!==null&&hc(r),e.callbackNode=null,e.callbackPriority=0;else if(s=n&-n,e.callbackPriority!==s){if(r!=null&&hc(r),s===1)e.tag===0?Ih(ld.bind(null,e)):bu(ld.bind(null,e)),Th(function(){!(De&6)&&hr()}),r=null;else{switch(Zd(n)){case 1:r=go;break;case 4:r=Kd;break;case 16:r=Ba;break;case 536870912:r=Yd;break;default:r=Ba}r=wm(r,hm.bind(null,e))}e.callbackPriority=s,e.callbackNode=r}}function hm(e,s){if(za=-1,Fa=0,De&6)throw Error(Q(327));var r=e.callbackNode;if(en()&&e.callbackNode!==r)return null;var n=Va(e,e===pt?jt:0);if(n===0)return null;if(n&30||n&e.expiredLanes||s)s=ol(e,n);else{s=n;var a=De;De|=2;var l=gm();(pt!==e||jt!==s)&&(Cs=null,on=tt()+500,kr(e,s));do try{ep();break}catch(o){pm(e,o)}while(!0);To(),al.current=l,De=a,at!==null?s=0:(pt=null,jt=0,s=dt)}if(s!==0){if(s===2&&(a=ji(e),a!==0&&(n=a,s=Qi(e,a))),s===1)throw r=Yn,kr(e,0),qs(e,n),Vt(e,tt()),r;if(s===6)qs(e,n);else{if(a=e.current.alternate,!(n&30)&&!Zh(a)&&(s=ol(e,n),s===2&&(l=ji(e),l!==0&&(n=l,s=Qi(e,l))),s===1))throw r=Yn,kr(e,0),qs(e,n),Vt(e,tt()),r;switch(e.finishedWork=a,e.finishedLanes=n,s){case 0:case 1:throw Error(Q(345));case 2:yr(e,Ft,Cs);break;case 3:if(qs(e,n),(n&130023424)===n&&(s=Vo+500-tt(),10<s)){if(Va(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){Mt(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Di(yr.bind(null,e,Ft,Cs),s);break}yr(e,Ft,Cs);break;case 4:if(qs(e,n),(n&4194240)===n)break;for(s=e.eventTimes,a=-1;0<n;){var i=31-ps(n);l=1<<i,i=s[i],i>a&&(a=i),n&=~l}if(n=a,n=tt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Xh(n/1960))-n,10<n){e.timeoutHandle=Di(yr.bind(null,e,Ft,Cs),n);break}yr(e,Ft,Cs);break;case 5:yr(e,Ft,Cs);break;default:throw Error(Q(329))}}}return Vt(e,tt()),e.callbackNode===r?hm.bind(null,e):null}function Qi(e,s){var r=Mn;return e.current.memoizedState.isDehydrated&&(kr(e,s).flags|=256),e=ol(e,s),e!==2&&(s=Ft,Ft=r,s!==null&&Ki(s)),e}function Ki(e){Ft===null?Ft=e:Ft.push.apply(Ft,e)}function Zh(e){for(var s=e;;){if(s.flags&16384){var r=s.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],l=a.getSnapshot;a=a.value;try{if(!fs(l(),a))return!1}catch{return!1}}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function qs(e,s){for(s&=~Bo,s&=~Nl,e.suspendedLanes|=s,e.pingedLanes&=~s,e=e.expirationTimes;0<s;){var r=31-ps(s),n=1<<r;e[r]=-1,s&=~n}}function ld(e){if(De&6)throw Error(Q(327));en();var s=Va(e,0);if(!(s&1))return Vt(e,tt()),null;var r=ol(e,s);if(e.tag!==0&&r===2){var n=ji(e);n!==0&&(s=n,r=Qi(e,n))}if(r===1)throw r=Yn,kr(e,0),qs(e,s),Vt(e,tt()),r;if(r===6)throw Error(Q(345));return e.finishedWork=e.current.alternate,e.finishedLanes=s,yr(e,Ft,Cs),Vt(e,tt()),null}function Wo(e,s){var r=De;De|=1;try{return e(s)}finally{De=r,De===0&&(on=tt()+500,yl&&hr())}}function Pr(e){Ks!==null&&Ks.tag===0&&!(De&6)&&en();var s=De;De|=1;var r=ls.transition,n=Pe;try{if(ls.transition=null,Pe=1,e)return e()}finally{Pe=n,ls.transition=r,De=s,!(De&6)&&hr()}}function Go(){qt=Qr.current,Ve(Qr)}function kr(e,s){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Dh(r)),at!==null)for(r=at.return;r!==null;){var n=r;switch(_o(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Ka();break;case 3:an(),Ve(Ht),Ve(Dt),Lo();break;case 5:Ao(n);break;case 4:an();break;case 13:Ve(Qe);break;case 19:Ve(Qe);break;case 10:Eo(n.type._context);break;case 22:case 23:Go()}r=r.return}if(pt=e,at=e=or(e.current,null),jt=qt=s,dt=0,Yn=null,Bo=Nl=Er=0,Ft=Mn=null,wr!==null){for(s=0;s<wr.length;s++)if(r=wr[s],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,l=r.pending;if(l!==null){var i=l.next;l.next=a,n.next=i}r.pending=n}wr=null}return e}function pm(e,s){do{var r=at;try{if(To(),Ia.current=nl,rl){for(var n=Ke.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}rl=!1}if(Tr=0,xt=ct=Ke=null,En=!1,qn=0,Ho.current=null,r===null||r.return===null){dt=1,Yn=s,at=null;break}e:{var l=e,i=r.return,o=r,d=s;if(s=jt,o.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var m=d,p=o,j=p.tag;if(!(p.mode&1)&&(j===0||j===11||j===15)){var c=p.alternate;c?(p.updateQueue=c.updateQueue,p.memoizedState=c.memoizedState,p.lanes=c.lanes):(p.updateQueue=null,p.memoizedState=null)}var v=qc(i);if(v!==null){v.flags&=-257,Qc(v,i,o,l,s),v.mode&1&&Gc(l,m,s),s=v,d=m;var y=s.updateQueue;if(y===null){var M=new Set;M.add(d),s.updateQueue=M}else y.add(d);break e}else{if(!(s&1)){Gc(l,m,s),qo();break e}d=Error(Q(426))}}else if(qe&&o.mode&1){var z=qc(i);if(z!==null){!(z.flags&65536)&&(z.flags|=256),Qc(z,i,o,l,s),Co(ln(d,o));break e}}l=d=ln(d,o),dt!==4&&(dt=2),Mn===null?Mn=[l]:Mn.push(l),l=i;do{switch(l.tag){case 3:l.flags|=65536,s&=-s,l.lanes|=s;var h=Zu(l,d,s);Oc(l,h);break e;case 1:o=d;var x=l.type,f=l.stateNode;if(!(l.flags&128)&&(typeof x.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(lr===null||!lr.has(f)))){l.flags|=65536,s&=-s,l.lanes|=s;var E=Ju(l,o,s);Oc(l,E);break e}}l=l.return}while(l!==null)}ym(r)}catch(A){s=A,at===r&&r!==null&&(at=r=r.return);continue}break}while(!0)}function gm(){var e=al.current;return al.current=nl,e===null?nl:e}function qo(){(dt===0||dt===3||dt===2)&&(dt=4),pt===null||!(Er&268435455)&&!(Nl&268435455)||qs(pt,jt)}function ol(e,s){var r=De;De|=2;var n=gm();(pt!==e||jt!==s)&&(Cs=null,kr(e,s));do try{Jh();break}catch(a){pm(e,a)}while(!0);if(To(),De=r,al.current=n,at!==null)throw Error(Q(261));return pt=null,jt=0,dt}function Jh(){for(;at!==null;)fm(at)}function ep(){for(;at!==null&&!Sx();)fm(at)}function fm(e){var s=jm(e.alternate,e,qt);e.memoizedProps=e.pendingProps,s===null?ym(e):at=s,Ho.current=null}function ym(e){var s=e;do{var r=s.alternate;if(e=s.return,s.flags&32768){if(r=qh(r,s),r!==null){r.flags&=32767,at=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{dt=6,at=null;return}}else if(r=Gh(r,s,qt),r!==null){at=r;return}if(s=s.sibling,s!==null){at=s;return}at=s=e}while(s!==null);dt===0&&(dt=5)}function yr(e,s,r){var n=Pe,a=ls.transition;try{ls.transition=null,Pe=1,tp(e,s,r,n)}finally{ls.transition=a,Pe=n}return null}function tp(e,s,r,n){do en();while(Ks!==null);if(De&6)throw Error(Q(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Q(177));e.callbackNode=null,e.callbackPriority=0;var l=r.lanes|r.childLanes;if(Lx(e,l),e===pt&&(at=pt=null,jt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Na||(Na=!0,wm(Ba,function(){return en(),null})),l=(r.flags&15990)!==0,r.subtreeFlags&15990||l){l=ls.transition,ls.transition=null;var i=Pe;Pe=1;var o=De;De|=4,Ho.current=null,Kh(e,r),mm(r,e),wh(_i),Wa=!!Si,_i=Si=null,e.current=r,Yh(r),_x(),De=o,Pe=i,ls.transition=l}else e.current=r;if(Na&&(Na=!1,Ks=e,il=a),l=e.pendingLanes,l===0&&(lr=null),Tx(r.stateNode),Vt(e,tt()),s!==null)for(n=e.onRecoverableError,r=0;r<s.length;r++)a=s[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(ll)throw ll=!1,e=Gi,Gi=null,e;return il&1&&e.tag!==0&&en(),l=e.pendingLanes,l&1?e===qi?In++:(In=0,qi=e):In=0,hr(),null}function en(){if(Ks!==null){var e=Zd(il),s=ls.transition,r=Pe;try{if(ls.transition=null,Pe=16>e?16:e,Ks===null)var n=!1;else{if(e=Ks,Ks=null,il=0,De&6)throw Error(Q(331));var a=De;for(De|=4,oe=e.current;oe!==null;){var l=oe,i=l.child;if(oe.flags&16){var o=l.deletions;if(o!==null){for(var d=0;d<o.length;d++){var m=o[d];for(oe=m;oe!==null;){var p=oe;switch(p.tag){case 0:case 11:case 15:Pn(8,p,l)}var j=p.child;if(j!==null)j.return=p,oe=j;else for(;oe!==null;){p=oe;var c=p.sibling,v=p.return;if(cm(p),p===m){oe=null;break}if(c!==null){c.return=v,oe=c;break}oe=v}}}var y=l.alternate;if(y!==null){var M=y.child;if(M!==null){y.child=null;do{var z=M.sibling;M.sibling=null,M=z}while(M!==null)}}oe=l}}if(l.subtreeFlags&2064&&i!==null)i.return=l,oe=i;else e:for(;oe!==null;){if(l=oe,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Pn(9,l,l.return)}var h=l.sibling;if(h!==null){h.return=l.return,oe=h;break e}oe=l.return}}var x=e.current;for(oe=x;oe!==null;){i=oe;var f=i.child;if(i.subtreeFlags&2064&&f!==null)f.return=i,oe=f;else e:for(i=x;oe!==null;){if(o=oe,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:wl(9,o)}}catch(A){Je(o,o.return,A)}if(o===i){oe=null;break e}var E=o.sibling;if(E!==null){E.return=o.return,oe=E;break e}oe=o.return}}if(De=a,hr(),ks&&typeof ks.onPostCommitFiberRoot=="function")try{ks.onPostCommitFiberRoot(xl,e)}catch{}n=!0}return n}finally{Pe=r,ls.transition=s}}return!1}function id(e,s,r){s=ln(r,s),s=Zu(e,s,1),e=ar(e,s,1),s=Mt(),e!==null&&(ea(e,1,s),Vt(e,s))}function Je(e,s,r){if(e.tag===3)id(e,e,r);else for(;s!==null;){if(s.tag===3){id(s,e,r);break}else if(s.tag===1){var n=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(lr===null||!lr.has(n))){e=ln(r,e),e=Ju(s,e,1),s=ar(s,e,1),e=Mt(),s!==null&&(ea(s,1,e),Vt(s,e));break}}s=s.return}}function sp(e,s,r){var n=e.pingCache;n!==null&&n.delete(s),s=Mt(),e.pingedLanes|=e.suspendedLanes&r,pt===e&&(jt&r)===r&&(dt===4||dt===3&&(jt&130023424)===jt&&500>tt()-Vo?kr(e,0):Bo|=r),Vt(e,s)}function vm(e,s){s===0&&(e.mode&1?(s=ma,ma<<=1,!(ma&130023424)&&(ma=4194304)):s=1);var r=Mt();e=$s(e,s),e!==null&&(ea(e,s,r),Vt(e,r))}function rp(e){var s=e.memoizedState,r=0;s!==null&&(r=s.retryLane),vm(e,r)}function np(e,s){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(Q(314))}n!==null&&n.delete(s),vm(e,r)}var jm;jm=function(e,s,r){if(e!==null)if(e.memoizedProps!==s.pendingProps||Ht.current)Ut=!0;else{if(!(e.lanes&r)&&!(s.flags&128))return Ut=!1,Wh(e,s,r);Ut=!!(e.flags&131072)}else Ut=!1,qe&&s.flags&1048576&&ku(s,Za,s.index);switch(s.lanes=0,s.tag){case 2:var n=s.type;La(e,s),e=s.pendingProps;var a=sn(s,Dt.current);Jr(s,r),a=Fo(null,s,n,e,a,r);var l=Ro();return s.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Bt(n)?(l=!0,Ya(s)):l=!1,s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Mo(s),a.updater=jl,s.stateNode=a,a._reactInternals=s,Li(s,n,e,r),s=Ri(null,s,n,!0,l,r)):(s.tag=0,qe&&l&&So(s),Et(null,s,a,r),s=s.child),s;case 16:n=s.elementType;e:{switch(La(e,s),e=s.pendingProps,a=n._init,n=a(n._payload),s.type=n,a=s.tag=lp(n),e=ms(n,e),a){case 0:s=Fi(null,s,n,e,r);break e;case 1:s=Xc(null,s,n,e,r);break e;case 11:s=Kc(null,s,n,e,r);break e;case 14:s=Yc(null,s,n,ms(n.type,e),r);break e}throw Error(Q(306,n,""))}return s;case 0:return n=s.type,a=s.pendingProps,a=s.elementType===n?a:ms(n,a),Fi(e,s,n,a,r);case 1:return n=s.type,a=s.pendingProps,a=s.elementType===n?a:ms(n,a),Xc(e,s,n,a,r);case 3:e:{if(rm(s),e===null)throw Error(Q(387));n=s.pendingProps,l=s.memoizedState,a=l.element,Eu(e,s),tl(s,n,null,r);var i=s.memoizedState;if(n=i.element,l.isDehydrated)if(l={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},s.updateQueue.baseState=l,s.memoizedState=l,s.flags&256){a=ln(Error(Q(423)),s),s=Zc(e,s,n,r,a);break e}else if(n!==a){a=ln(Error(Q(424)),s),s=Zc(e,s,n,r,a);break e}else for(Qt=nr(s.stateNode.containerInfo.firstChild),Kt=s,qe=!0,hs=null,r=Du(s,null,n,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(rn(),n===a){s=Os(e,s,r);break e}Et(e,s,n,r)}s=s.child}return s;case 5:return Pu(s),e===null&&Mi(s),n=s.type,a=s.pendingProps,l=e!==null?e.memoizedProps:null,i=a.children,Ci(n,a)?i=null:l!==null&&Ci(n,l)&&(s.flags|=32),sm(e,s),Et(e,s,i,r),s.child;case 6:return e===null&&Mi(s),null;case 13:return nm(e,s,r);case 4:return Io(s,s.stateNode.containerInfo),n=s.pendingProps,e===null?s.child=nn(s,null,n,r):Et(e,s,n,r),s.child;case 11:return n=s.type,a=s.pendingProps,a=s.elementType===n?a:ms(n,a),Kc(e,s,n,a,r);case 7:return Et(e,s,s.pendingProps,r),s.child;case 8:return Et(e,s,s.pendingProps.children,r),s.child;case 12:return Et(e,s,s.pendingProps.children,r),s.child;case 10:e:{if(n=s.type._context,a=s.pendingProps,l=s.memoizedProps,i=a.value,Oe(Ja,n._currentValue),n._currentValue=i,l!==null)if(fs(l.value,i)){if(l.children===a.children&&!Ht.current){s=Os(e,s,r);break e}}else for(l=s.child,l!==null&&(l.return=s);l!==null;){var o=l.dependencies;if(o!==null){i=l.child;for(var d=o.firstContext;d!==null;){if(d.context===n){if(l.tag===1){d=Ls(-1,r&-r),d.tag=2;var m=l.updateQueue;if(m!==null){m=m.shared;var p=m.pending;p===null?d.next=d:(d.next=p.next,p.next=d),m.pending=d}}l.lanes|=r,d=l.alternate,d!==null&&(d.lanes|=r),Ii(l.return,r,s),o.lanes|=r;break}d=d.next}}else if(l.tag===10)i=l.type===s.type?null:l.child;else if(l.tag===18){if(i=l.return,i===null)throw Error(Q(341));i.lanes|=r,o=i.alternate,o!==null&&(o.lanes|=r),Ii(i,r,s),i=l.sibling}else i=l.child;if(i!==null)i.return=l;else for(i=l;i!==null;){if(i===s){i=null;break}if(l=i.sibling,l!==null){l.return=i.return,i=l;break}i=i.return}l=i}Et(e,s,a.children,r),s=s.child}return s;case 9:return a=s.type,n=s.pendingProps.children,Jr(s,r),a=is(a),n=n(a),s.flags|=1,Et(e,s,n,r),s.child;case 14:return n=s.type,a=ms(n,s.pendingProps),a=ms(n.type,a),Yc(e,s,n,a,r);case 15:return em(e,s,s.type,s.pendingProps,r);case 17:return n=s.type,a=s.pendingProps,a=s.elementType===n?a:ms(n,a),La(e,s),s.tag=1,Bt(n)?(e=!0,Ya(s)):e=!1,Jr(s,r),Xu(s,n,a),Li(s,n,a,r),Ri(null,s,n,!0,e,r);case 19:return am(e,s,r);case 22:return tm(e,s,r)}throw Error(Q(156,s.tag))};function wm(e,s){return Qd(e,s)}function ap(e,s,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function as(e,s,r,n){return new ap(e,s,r,n)}function Qo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function lp(e){if(typeof e=="function")return Qo(e)?1:0;if(e!=null){if(e=e.$$typeof,e===xo)return 11;if(e===ho)return 14}return 2}function or(e,s){var r=e.alternate;return r===null?(r=as(e.tag,s,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=s,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,s=e.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ra(e,s,r,n,a,l){var i=2;if(n=e,typeof e=="function")Qo(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case Rr:return Sr(r.children,a,l,s);case mo:i=8,a|=8;break;case ai:return e=as(12,r,s,a|2),e.elementType=ai,e.lanes=l,e;case li:return e=as(13,r,s,a),e.elementType=li,e.lanes=l,e;case ii:return e=as(19,r,s,a),e.elementType=ii,e.lanes=l,e;case Pd:return bl(r,a,l,s);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Td:i=10;break e;case Ed:i=9;break e;case xo:i=11;break e;case ho:i=14;break e;case Vs:i=16,n=null;break e}throw Error(Q(130,e==null?e:typeof e,""))}return s=as(i,r,s,a),s.elementType=e,s.type=n,s.lanes=l,s}function Sr(e,s,r,n){return e=as(7,e,n,s),e.lanes=r,e}function bl(e,s,r,n){return e=as(22,e,n,s),e.elementType=Pd,e.lanes=r,e.stateNode={isHidden:!1},e}function ei(e,s,r){return e=as(6,e,null,s),e.lanes=r,e}function ti(e,s,r){return s=as(4,e.children!==null?e.children:[],e.key,s),s.lanes=r,s.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},s}function ip(e,s,r,n,a){this.tag=s,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ll(0),this.expirationTimes=Ll(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ll(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Ko(e,s,r,n,a,l,i,o,d){return e=new ip(e,s,r,o,d),s===1?(s=1,l===!0&&(s|=8)):s=0,l=as(3,null,null,s),e.current=l,l.stateNode=e,l.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Mo(l),e}function op(e,s,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fr,key:n==null?null:""+n,children:e,containerInfo:s,implementation:r}}function Nm(e){if(!e)return ur;e=e._reactInternals;e:{if(Ir(e)!==e||e.tag!==1)throw Error(Q(170));var s=e;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Bt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(Q(171))}if(e.tag===1){var r=e.type;if(Bt(r))return Nu(e,r,s)}return s}function bm(e,s,r,n,a,l,i,o,d){return e=Ko(r,n,!0,e,a,l,i,o,d),e.context=Nm(null),r=e.current,n=Mt(),a=ir(r),l=Ls(n,a),l.callback=s??null,ar(r,l,a),e.current.lanes=a,ea(e,a,n),Vt(e,n),e}function kl(e,s,r,n){var a=s.current,l=Mt(),i=ir(a);return r=Nm(r),s.context===null?s.context=r:s.pendingContext=r,s=Ls(l,i),s.payload={element:e},n=n===void 0?null:n,n!==null&&(s.callback=n),e=ar(a,s,i),e!==null&&(gs(e,a,i,l),Ma(e,a,i)),i}function cl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function od(e,s){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<s?r:s}}function Yo(e,s){od(e,s),(e=e.alternate)&&od(e,s)}function cp(){return null}var km=typeof reportError=="function"?reportError:function(e){console.error(e)};function Xo(e){this._internalRoot=e}Sl.prototype.render=Xo.prototype.render=function(e){var s=this._internalRoot;if(s===null)throw Error(Q(409));kl(e,s,null,null)};Sl.prototype.unmount=Xo.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var s=e.containerInfo;Pr(function(){kl(null,e,null,null)}),s[Rs]=null}};function Sl(e){this._internalRoot=e}Sl.prototype.unstable_scheduleHydration=function(e){if(e){var s=tu();e={blockedOn:null,target:e,priority:s};for(var r=0;r<Gs.length&&s!==0&&s<Gs[r].priority;r++);Gs.splice(r,0,e),r===0&&ru(e)}};function Zo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function _l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function cd(){}function dp(e,s,r,n,a){if(a){if(typeof n=="function"){var l=n;n=function(){var m=cl(i);l.call(m)}}var i=bm(s,n,e,0,null,!1,!1,"",cd);return e._reactRootContainer=i,e[Rs]=i.current,Hn(e.nodeType===8?e.parentNode:e),Pr(),i}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var o=n;n=function(){var m=cl(d);o.call(m)}}var d=Ko(e,0,!1,null,null,!1,!1,"",cd);return e._reactRootContainer=d,e[Rs]=d.current,Hn(e.nodeType===8?e.parentNode:e),Pr(function(){kl(s,d,r,n)}),d}function Cl(e,s,r,n,a){var l=r._reactRootContainer;if(l){var i=l;if(typeof a=="function"){var o=a;a=function(){var d=cl(i);o.call(d)}}kl(s,i,e,a)}else i=dp(r,s,e,a,n);return cl(i)}Jd=function(e){switch(e.tag){case 3:var s=e.stateNode;if(s.current.memoizedState.isDehydrated){var r=bn(s.pendingLanes);r!==0&&(fo(s,r|1),Vt(s,tt()),!(De&6)&&(on=tt()+500,hr()))}break;case 13:Pr(function(){var n=$s(e,1);if(n!==null){var a=Mt();gs(n,e,1,a)}}),Yo(e,1)}};yo=function(e){if(e.tag===13){var s=$s(e,134217728);if(s!==null){var r=Mt();gs(s,e,134217728,r)}Yo(e,134217728)}};eu=function(e){if(e.tag===13){var s=ir(e),r=$s(e,s);if(r!==null){var n=Mt();gs(r,e,s,n)}Yo(e,s)}};tu=function(){return Pe};su=function(e,s){var r=Pe;try{return Pe=e,s()}finally{Pe=r}};fi=function(e,s,r){switch(s){case"input":if(di(e,r),s=r.name,r.type==="radio"&&s!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<r.length;s++){var n=r[s];if(n!==e&&n.form===e.form){var a=fl(n);if(!a)throw Error(Q(90));Id(n),di(n,a)}}}break;case"textarea":Ld(e,r);break;case"select":s=r.value,s!=null&&Kr(e,!!r.multiple,s,!1)}};Hd=Wo;Bd=Pr;var up={usingClientEntryPoint:!1,Events:[sa,Hr,fl,Od,Ud,Wo]},jn={findFiberByHostInstance:jr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},mp={bundleType:jn.bundleType,version:jn.version,rendererPackageName:jn.rendererPackageName,rendererConfig:jn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Us.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Gd(e),e===null?null:e.stateNode},findFiberByHostInstance:jn.findFiberByHostInstance||cp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ba=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ba.isDisabled&&ba.supportsFiber)try{xl=ba.inject(mp),ks=ba}catch{}}Xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=up;Xt.createPortal=function(e,s){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zo(s))throw Error(Q(200));return op(e,s,null,r)};Xt.createRoot=function(e,s){if(!Zo(e))throw Error(Q(299));var r=!1,n="",a=km;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(n=s.identifierPrefix),s.onRecoverableError!==void 0&&(a=s.onRecoverableError)),s=Ko(e,1,!1,null,null,r,!1,n,a),e[Rs]=s.current,Hn(e.nodeType===8?e.parentNode:e),new Xo(s)};Xt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var s=e._reactInternals;if(s===void 0)throw typeof e.render=="function"?Error(Q(188)):(e=Object.keys(e).join(","),Error(Q(268,e)));return e=Gd(s),e=e===null?null:e.stateNode,e};Xt.flushSync=function(e){return Pr(e)};Xt.hydrate=function(e,s,r){if(!_l(s))throw Error(Q(200));return Cl(null,e,s,!0,r)};Xt.hydrateRoot=function(e,s,r){if(!Zo(e))throw Error(Q(405));var n=r!=null&&r.hydratedSources||null,a=!1,l="",i=km;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),s=bm(s,null,e,1,r??null,a,!1,l,i),e[Rs]=s.current,Hn(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[r,a]:s.mutableSourceEagerHydrationData.push(r,a);return new Sl(s)};Xt.render=function(e,s,r){if(!_l(s))throw Error(Q(200));return Cl(null,e,s,!1,r)};Xt.unmountComponentAtNode=function(e){if(!_l(e))throw Error(Q(40));return e._reactRootContainer?(Pr(function(){Cl(null,null,e,!1,function(){e._reactRootContainer=null,e[Rs]=null})}),!0):!1};Xt.unstable_batchedUpdates=Wo;Xt.unstable_renderSubtreeIntoContainer=function(e,s,r,n){if(!_l(r))throw Error(Q(200));if(e==null||e._reactInternals===void 0)throw Error(Q(38));return Cl(e,s,r,!1,n)};Xt.version="18.3.1-next-f1338f8080-20240426";function Sm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Sm)}catch(e){console.error(e)}}Sm(),Sd.exports=Xt;var xp=Sd.exports,_m,dd=xp;_m=dd.createRoot,dd.hydrateRoot;const hp="https://workflow.bylinelms.com/api",Cm=u.createContext(void 0);function pp({children:e}){const[s,r]=u.useState(null),[n,a]=u.useState(null),[l,i]=u.useState(!0);u.useEffect(()=>{(()=>{try{const j=localStorage.getItem("access_token"),c=localStorage.getItem("user_data"),v=localStorage.getItem("refresh_token");if(j&&c){const y=JSON.parse(c),M={user:y,access_token:j,refresh_token:v||"",expires_in:3600};r(y),a(M)}}catch{localStorage.removeItem("access_token"),localStorage.removeItem("user_data"),localStorage.removeItem("refresh_token")}finally{i(!1)}})()},[]);const o=async()=>({data:null,error:{message:"Admin registration is not available."}}),d=async(p,j)=>{try{const c=await fetch(`${hp}/auth/admin/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:p,password:j})}),v=await c.json();if(c.ok&&v.success){const{user:y,access_token:M,refresh_token:z,expires_in:h}=v.data;localStorage.setItem("access_token",M),localStorage.setItem("user_data",JSON.stringify(y)),z&&localStorage.setItem("refresh_token",z);const x={user:y,access_token:M,refresh_token:z||"",expires_in:h};return r(y),a(x),{data:{user:y,session:x},error:null}}else return{data:{user:null,session:null},error:{message:v.message||"Login failed"}}}catch{return{data:{user:null,session:null},error:{message:"Network error"}}}},m=async()=>(localStorage.clear(),r(null),a(null),{error:null});return t.jsx(Cm.Provider,{value:{user:s,session:n,loading:l,signUp:o,signIn:d,signOut:m},children:e})}function na(){const e=u.useContext(Cm);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var gp={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fp=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ie=(e,s)=>{const r=u.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:o="",children:d,...m},p)=>u.createElement("svg",{ref:p,...gp,width:a,height:a,stroke:n,strokeWidth:i?Number(l)*24/Number(a):l,className:["lucide",`lucide-${fp(e)}`,o].join(" "),...m},[...s.map(([j,c])=>u.createElement(j,c)),...Array.isArray(d)?d:[d]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yp=ie("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vp=ie("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=ie("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jp=ie("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jo=ie("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wp=ie("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Np=ie("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bp=ie("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yi=ie("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=ie("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kp=ie("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dm=ie("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tm=ie("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $a=ie("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sp=ie("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=ie("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xi=ie("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=ie("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ec=ie("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _p=ie("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=ie("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cp=ie("Clock3",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16.5 12",key:"1aq6pp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=ie("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dp=ie("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dl=ie("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=ie("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Em=ie("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tp=ie("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=ie("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=ie("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ep=ie("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=ie("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pp=ie("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mp=ie("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ip=ie("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=ie("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ap=ie("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lp=ie("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zp=ie("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=ie("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pm=ie("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mm=ie("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Im=ie("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Am=ie("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lm=ie("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=ie("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ud=ie("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fp=ie("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=ie("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zi=ie("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rp=ie("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tl=ie("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zm=ie("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=ie("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fm=ie("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $p=ie("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ji=ie("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=ie("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Op=ie("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dl=ie("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const md=ie("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Up=ie("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eo=ie("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const to=ie("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hp=ie("UsersRound",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=ie("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bp=ie("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const so=ie("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function D({children:e,variant:s="primary",size:r="md",loading:n=!1,icon:a,className:l="",disabled:i,...o}){const d="inline-flex items-center justify-center font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",m={primary:"bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500",secondary:"bg-gray-600 hover:bg-gray-700 text-white focus:ring-gray-500",outline:"border border-gray-300 hover:bg-gray-50 text-gray-700 focus:ring-blue-500",ghost:"hover:bg-gray-100 text-gray-700 focus:ring-blue-500",danger:"bg-red-600 hover:bg-red-700 text-white focus:ring-red-500"},p={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"};return t.jsxs("button",{className:`${d} ${m[s]} ${p[r]} ${l}`,disabled:i||n,...o,children:[n?t.jsx(aa,{className:"w-4 h-4 animate-spin mr-2"}):a?t.jsx("span",{className:"mr-2",children:a}):null,e]})}function re({children:e,className:s="",onClick:r}){return t.jsx("div",{className:`bg-white rounded-lg shadow-sm border border-gray-200 ${r?"cursor-pointer hover:shadow-md transition-shadow":""} ${s}`,onClick:r,children:e})}function ze({children:e,className:s=""}){return t.jsx("div",{className:`px-6 py-4 border-b border-gray-200 ${s}`,children:e})}function ne({children:e,className:s=""}){return t.jsx("div",{className:`px-6 py-4 ${s}`,children:e})}function Fe({children:e,className:s=""}){return t.jsx("h3",{className:`text-lg font-semibold text-gray-900 ${s}`,children:e})}function Vp({onSwitchToTeam:e}){const[s,r]=u.useState(""),[n,a]=u.useState(""),[l,i]=u.useState(!1),[o,d]=u.useState(!1),[m,p]=u.useState(null),{signIn:j}=na(),c=async v=>{v.preventDefault(),d(!0),p(null);try{const{data:y,error:M}=await j(s,n);if(M){p(M.message);return}y!=null&&y.user&&console.log("Sign in successful:",y.user)}catch(y){p(y.message)}finally{d(!1)}};return t.jsxs("div",{className:"min-h-screen  grid grid-cols-1 lg:grid-cols-2 bg-[#FFF6EE] w-[100%]",children:[t.jsxs("div",{className:"relative hidden lg:block",style:{backgroundImage:"url('../admin_login.png')",backgroundSize:"cover",backgroundPosition:"center"},children:[t.jsx("div",{className:"absolute inset-0 bg-amber-900/40"}),t.jsx("div",{className:"relative z-10 h-full w-full flex items-center justify-center",children:t.jsxs("div",{className:"text-center text-white max-w-2xl",children:[t.jsx("h1",{className:"text-4xl xl:text-5xl font-extrabold drop-shadow-sm",children:"Welcome to Byline"}),t.jsx("p",{className:"mt-4 text-white/90 text-lg",children:"Manage projects, teams, and tasks efficiently"})]})})]}),t.jsx("div",{className:"flex items-center justify-center p-6 sm:p-10 !bg-[#FFF6EE]",children:t.jsxs("div",{className:"w-full max-w-md bg-[#FFF6EE] border-2 border-red-100 py-8 rounded-lg shadow-sm",children:[t.jsx("div",{className:"flex items-center justify-center mb-6",children:t.jsx("img",{src:"/logo.png",alt:"Logo",className:"h-24 w-auto"})}),t.jsxs(re,{className:"border-0 bg-[#FFF6EE]",children:[t.jsxs(ze,{className:"text-center pb-4 bg-[#FFF6EE]",children:[t.jsx(Fe,{className:"text-3xl font-bold text-gray-900",children:"Welcome back Admin!"}),t.jsx("p",{className:"text-gray-600 mt-2",children:"Sign in to your account to continue"})]}),t.jsxs(ne,{className:"space-y-6 bg-[#FFF6EE]",children:[t.jsxs("form",{onSubmit:c,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),t.jsxs("div",{className:"relative",children:[t.jsx(Am,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),t.jsx("input",{type:"email",required:!0,value:s,onChange:v=>r(v.target.value),className:"w-full pl-10 pr-3 py-3 rounded-md border border-amber-200 bg-white focus:ring-2 focus:ring-amber-400 focus:border-transparent placeholder:text-gray-400",placeholder:"Email Address"})]})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Password"}),t.jsx("a",{className:"text-xs text-amber-600 hover:underline cursor-pointer",children:"Forget Password?"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(Pm,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),t.jsx("input",{type:l?"text":"password",required:!0,value:n,onChange:v=>a(v.target.value),className:"w-full pl-10 pr-12 py-3 rounded-md border border-amber-200 bg-white focus:ring-2 focus:ring-amber-400 focus:border-transparent placeholder:text-gray-400",placeholder:"Password",minLength:6}),t.jsx("button",{type:"button",onClick:()=>i(!l),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:l?t.jsx(Dl,{className:"w-4 h-4"}):t.jsx(pr,{className:"w-4 h-4"})})]})]}),m&&t.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",children:t.jsx("p",{className:"text-sm text-red-600",children:m})}),t.jsx(D,{type:"submit",className:"w-full py-3 bg-amber-500 hover:bg-amber-600 focus:ring-amber-500",loading:o,icon:o?t.jsx(aa,{className:"w-4 h-4"}):t.jsx(Mm,{className:"w-4 h-4"}),children:"Log In"})]}),t.jsx(D,{variant:"outline",className:"w-full border-amber-200 text-amber-700 hover:bg-amber-50",onClick:e,icon:t.jsx(wp,{className:"w-4 h-4"}),children:"Sign in as Team Member"})]}),t.jsxs("span",{className:"text-gray-600 text-sm text-center flex items-center justify-center gap-1",children:["Team Member? Click Here ",t.jsx(bp,{className:"w-4 h-4"})]})]})]})})]})}const Xs="https://workflow.bylinelms.com/api",ka=()=>{const e=localStorage.getItem("access_token");return{"Content-Type":"application/json",...e&&{Authorization:`Bearer ${e}`}}},Sa=()=>{const e=localStorage.getItem("teamToken");return{"Content-Type":"application/json",...e&&{Authorization:`Bearer ${e}`}}},Zs=async e=>{var r;const s=await e.json();if(!e.ok)throw new Error(((r=s.error)==null?void 0:r.message)||s.message||"API request failed");return s},Js=async(e,s)=>await fetch(e,s),$={get:async e=>{const s=await Js(`${Xs}${e}`,{method:"GET",headers:ka()});return Zs(s)},post:async(e,s)=>{const r=await Js(`${Xs}${e}`,{method:"POST",headers:ka(),body:JSON.stringify(s)});return Zs(r)},put:async(e,s)=>{const r=await Js(`${Xs}${e}`,{method:"PUT",headers:ka(),body:JSON.stringify(s)});return Zs(r)},delete:async e=>{const s=await Js(`${Xs}${e}`,{method:"DELETE",headers:ka()});return Zs(s)}},ss={get:async e=>{const s=await Js(`${Xs}${e}`,{method:"GET",headers:Sa()});return Zs(s)},post:async(e,s)=>{const r=await Js(`${Xs}${e}`,{method:"POST",headers:Sa(),body:JSON.stringify(s)});return Zs(r)},put:async(e,s)=>{const r=await Js(`${Xs}${e}`,{method:"PUT",headers:Sa(),body:JSON.stringify(s)});return Zs(r)},delete:async e=>{const s=await Js(`${Xs}${e}`,{method:"DELETE",headers:Sa()});return Zs(s)}},Wp={getAll:async e=>{const s=new URLSearchParams(e).toString(),r=s?`/projects?${s}`:"/projects";return(await ss.get(r)).data},getById:async e=>(await ss.get(`/projects/${e}`)).data},Ee={getAll:async()=>(await $.get("/team")).data,getMyTasks:async()=>(await ss.get("/team/my-tasks")).data,getMyProfile:async()=>(await ss.get("/team/my-profile")).data,getById:async e=>(await $.get(`/team/${e}`)).data,create:async e=>(await $.post("/team",e)).data,update:async(e,s)=>(await $.put(`/team/${e}`,s)).data,delete:async e=>(await $.delete(`/team/${e}`)).data,getMembers:async()=>(await $.get("/team/members")).data,getMemberById:async e=>(await $.get(`/team/members/${e}`)).data,createMember:async e=>(await $.post("/team/members",e)).data,updateMember:async(e,s)=>(await $.put(`/team/members/${e}`,s)).data,deleteMember:async e=>(await $.delete(`/team/members/${e}`)).data,getTeams:async()=>(await $.get("/team/teams")).data,getTeamById:async e=>(await $.get(`/team/teams/${e}`)).data,createTeam:async e=>(await $.post("/team/teams",e)).data,updateTeam:async(e,s)=>(await $.put(`/team/teams/${e}`,s)).data,deleteTeam:async e=>(await $.delete(`/team/teams/${e}`)).data,addMemberToTeam:async(e,s)=>(await $.post(`/team/teams/${e}/members`,s)).data,removeMemberFromTeam:async(e,s)=>(await $.delete(`/team/teams/${e}/members/${s}`)).data,getTeamMembers:async e=>(await $.get(`/team/teams/${e}`)).data.members||[],authenticate:async e=>await $.post("/team/authenticate",e)},$e={getAll:async e=>{const s=new URLSearchParams(e).toString(),r=s?`/projects?${s}`:"/projects";return await $.get(r)},getById:async e=>(await $.get(`/projects/${e}`)).data,create:async e=>(await $.post("/projects",e)).data,update:async(e,s)=>(await $.put(`/projects/${e}`,s)).data,delete:async e=>(await $.delete(`/projects/${e}`)).data,getMembers:async e=>(await $.get(`/projects/${e}/members`)).data,getTeams:async e=>(await $.get(`/projects/${e}/teams`)).data,addMember:async(e,s)=>(await $.post(`/projects/${e}/members`,s)).data,addTeam:async(e,s)=>(await $.post(`/projects/${e}/members`,s)).data,removeMember:async(e,s)=>(await $.delete(`/projects/${e}/members/${s}`)).data,removeTeam:async(e,s)=>(await $.delete(`/projects/${e}/teams/${s}`)).data},er={getAll:async()=>(await $.get("/categories")).data,getById:async e=>(await $.get(`/categories/${e}`)).data,create:async e=>(await $.post("/categories",e)).data,update:async(e,s)=>(await $.put(`/categories/${e}`,s)).data,delete:async e=>(await $.delete(`/categories/${e}`)).data},bs={getAll:async()=>(await $.get("/skills")).data,getById:async e=>(await $.get(`/skills/${e}`)).data,create:async e=>(await $.post("/skills",e)).data,update:async(e,s)=>(await $.put(`/skills/${e}`,s)).data,delete:async e=>(await $.delete(`/skills/${e}`)).data},Le={getAll:async e=>{const s=new URLSearchParams(e).toString(),r=s?`/tasks?${s}`:"/tasks";return await $.get(r)},getById:async e=>(await $.get(`/tasks/${e}`)).data,create:async e=>(await $.post("/tasks",e)).data,update:async(e,s)=>(await $.put(`/tasks/${e}`,s)).data,delete:async e=>(await $.delete(`/tasks/${e}`)).data,getByProject:async e=>(await $.get(`/tasks?project_id=${e}`)).data,getByAssignee:async(e,s)=>(await $.get(`/tasks?assignee_id=${e}&assignee_type=${s}`)).data,updateStatus:async(e,s,r)=>{const n={status:s};return r!==void 0&&(n.progress=r),(await $.put(`/tasks/${e}`,n)).data},updateProgress:async(e,s)=>(await $.put(`/tasks/${e}`,{progress:s})).data,requestExtension:async(e,s)=>(await $.post(`/tasks/${e}/extensions`,s)).data,getExtensions:async e=>(await $.get(`/tasks/${e}/extensions`)).data,reviewExtension:async(e,s)=>(await $.put(`/tasks/extensions/${e}/review`,s)).data,addRemark:async(e,s)=>(await $.post(`/tasks/${e}/remarks`,s)).data,getRemarks:async e=>(await $.get(`/tasks/${e}/remarks`)).data,deleteRemark:async e=>(await $.delete(`/tasks/remarks/${e}`)).data},xd={update:async(e,s)=>(await ss.put(`/tasks/${e}`,s)).data,updateStatus:async(e,s,r)=>{const n={status:s};return r!==void 0&&(n.progress=r),(await ss.put(`/tasks/${e}`,n)).data},updateProgress:async(e,s)=>(await ss.put(`/tasks/${e}`,{progress:s})).data,requestExtension:async(e,s)=>(await ss.post(`/tasks/${e}/extensions`,s)).data,getExtensions:async e=>(await ss.get(`/tasks/${e}/extensions`)).data,addRemark:async(e,s)=>(await ss.post(`/tasks/${e}/remarks`,s)).data,getRemarks:async e=>(await ss.get(`/tasks/${e}/remarks`)).data,deleteRemark:async e=>(await ss.delete(`/tasks/remarks/${e}`)).data},_a={getAll:async e=>{const s=new URLSearchParams(e).toString(),r=s?`/allocations?${s}`:"/allocations";return(await $.get(r)).data},getById:async e=>(await $.get(`/allocations/${e}`)).data,create:async e=>(await $.post("/allocations",e)).data,update:async(e,s)=>(await $.put(`/allocations/${e}`,s)).data,delete:async e=>(await $.delete(`/allocations/${e}`)).data,getWorkloadSummary:async e=>(await $.get(`/allocations/workload-summary?date=${e}`)).data},Rt={getAll:async e=>{const s=e?`/stages?project_id=${e}`:"/stages";return(await $.get(s)).data},getById:async e=>(await $.get(`/stages/${e}`)).data,create:async e=>(await $.post("/stages",e)).data,update:async(e,s)=>(await $.put(`/stages/${e}`,s)).data,delete:async e=>(await $.delete(`/stages/${e}`)).data,getByCategory:async e=>(await $.get(`/stages/category/${e}`)).data,reorder:async(e,s)=>(await $.post(`/stages/category/${e}/reorder`,{stage_orders:s})).data},si={getByCategory:async e=>(await $.get(`/stage-templates/category/${e}`)).data,getById:async e=>(await $.get(`/stage-templates/${e}`)).data,create:async e=>(await $.post("/stage-templates",e)).data,update:async(e,s)=>(await $.put(`/stage-templates/${e}`,s)).data,delete:async e=>(await $.delete(`/stage-templates/${e}`)).data,bulkCreate:async(e,s)=>(await $.post(`/stage-templates/category/${e}/bulk`,{templates:s})).data},Ms={getByProject:async e=>(await $.get(`/grades/project/${e}`)).data,getAll:async()=>(await $.get("/grades")).data,getById:async e=>(await $.get(`/grades/${e}`)).data,create:async e=>(await $.post("/grades",e)).data,update:async(e,s)=>(await $.put(`/grades/${e}`,s)).data,delete:async e=>(await $.delete(`/grades/${e}`)).data,distributeWeights:async e=>(await $.post("/grades/distribute-weights",{project_id:e})).data},Is={getByGrade:async e=>(await $.get(`/books/grade/${e}`)).data,getAll:async()=>(await $.get("/books")).data,getById:async e=>(await $.get(`/books/${e}`)).data,create:async e=>(await $.post("/books",e)).data,update:async(e,s)=>(await $.put(`/books/${e}`,s)).data,delete:async e=>(await $.delete(`/books/${e}`)).data,distributeWeights:async e=>(await $.post("/books/distribute-weights",{grade_id:e})).data},As={getByBook:async e=>(await $.get(`/units/book/${e}`)).data,getAll:async()=>(await $.get("/units")).data,getById:async e=>(await $.get(`/units/${e}`)).data,create:async e=>(await $.post("/units",e)).data,update:async(e,s)=>(await $.put(`/units/${e}`,s)).data,delete:async e=>(await $.delete(`/units/${e}`)).data,distributeWeights:async e=>(await $.post("/units/distribute-weights",{book_id:e})).data},cr={getByUnit:async e=>(await $.get(`/lessons/unit/${e}`)).data,getAll:async()=>(await $.get("/lessons")).data,getById:async e=>(await $.get(`/lessons/${e}`)).data,create:async e=>(await $.post("/lessons",e)).data,update:async(e,s)=>(await $.put(`/lessons/${e}`,s)).data,delete:async e=>(await $.delete(`/lessons/${e}`)).data,distributeWeights:async e=>(await $.post("/lessons/distribute-weights",{unit_id:e})).data},Gp={getOverview:async()=>{try{const e=await Promise.allSettled([$e.getAll().catch(m=>(console.error(" Projects fetch error:",m),{data:[]})),Ee.getMembers().catch(m=>(console.error(" Team members fetch error:",m),[])),er.getAll().catch(m=>(console.error(" Categories fetch error:",m),[])),bs.getAll().catch(m=>(console.error(" Skills fetch error:",m),[])),Le.getAll({all:"true"}).catch(m=>(console.error(" Tasks fetch error:",m),{data:[]}))]),[s,r,n,a,l]=e.map(m=>m.status==="fulfilled"?m.value||[]:(console.error(" API call failed:",m.reason),[])),i=s&&s.data?s.data:Array.isArray(s)?s:[],o=l&&l.data?l.data:Array.isArray(l)?l:[],d={totalProjects:i.length,activeProjects:i.filter(m=>m.status==="active").length,totalTeamMembers:r.length,activeTeamMembers:r.filter(m=>m.is_active!==!1).length,totalCategories:n.length,totalSkills:a.length,totalTasks:o.length,activeTasks:o.filter(m=>["not-started","in-progress","under-review"].includes(m.status)).length,completedTasks:o.filter(m=>m.status==="completed").length,overdueTasks:o.filter(m=>new Date(m.end_date)<new Date&&m.status!=="completed").length};return{projects:i,teamMembers:r,tasks:o,categories:n,skills:a,stats:d}}catch(e){return console.error("Dashboard overview fetch error:",e),{projects:[],teamMembers:[],tasks:[],categories:[],skills:[],stats:{totalProjects:0,activeProjects:0,totalTeamMembers:0,activeTeamMembers:0,totalCategories:0,totalSkills:0,totalTasks:0,activeTasks:0,completedTasks:0,overdueTasks:0}}}},getRecentActivity:async()=>[]},vr={getByTeamMember:async e=>(await $.get(`/performance-flags/team-member/${e}`)).data,getByTask:async e=>(await $.get(`/performance-flags/task/${e}`)).data,getSummary:async e=>(await $.get(`/performance-flags/summary/${e}`)).data,add:async e=>(await $.post("/performance-flags",e)).data,update:async(e,s)=>(await $.put(`/performance-flags/${e}`,s)).data,delete:async e=>(await $.delete(`/performance-flags/${e}`)).data};function qp({onLogin:e,onBackToAdmin:s}){const[r,n]=u.useState(""),[a,l]=u.useState(""),[i,o]=u.useState(!1),[d,m]=u.useState(""),[p,j]=u.useState(!1),c=async v=>{v.preventDefault(),j(!0),m("");try{const y=await Ee.authenticate({email:r,passcode:a});y.success&&y.data?(y.token&&localStorage.setItem("teamToken",y.token),e(y.data)):m("Invalid email or passcode. Please check your credentials.")}catch(y){console.error("Login error:",y),m(y.message||"Login failed. Please try again.")}finally{j(!1)}};return t.jsxs("div",{className:"min-h-screen  grid grid-cols-1 lg:grid-cols-2 bg-[#FFF6EE] w-[100%]  ",children:[t.jsxs("div",{className:"relative hidden lg:block",style:{backgroundImage:"url('../member_login.png')",backgroundSize:"cover",backgroundPosition:"center"},children:[t.jsx("div",{className:"absolute inset-0 bg-amber-900/40"}),t.jsx("div",{className:"relative z-10 h-full w-full flex items-center justify-center ",children:t.jsxs("div",{className:"text-center text-white max-w-2xl",children:[t.jsx("h1",{className:"text-4xl xl:text-5xl font-extrabold drop-shadow-sm",children:"Welcome to Byline"}),t.jsx("p",{className:"mt-4 text-white/90 text-lg",children:"Access your personalized dashboard and manage your educational journey"})]})})]}),t.jsx("div",{className:"flex items-center justify-center p-6 sm:p-10 !bg-[#FFF6EE]",children:t.jsxs("div",{className:"w-full max-w-md bg-[#FFF6EE]",children:[t.jsx("div",{className:"flex items-center justify-center mb-6",children:t.jsx("img",{src:"/logo.png",alt:"Logo",className:"h-14 w-14"})}),t.jsxs(re,{className:" border-0 bg-[#FFF6EE]",children:[t.jsxs(ze,{className:"text-center pb-4 bg-[#FFF6EE]",children:[t.jsx(Fe,{className:"text-2xl font-bold text-gray-900",children:"Welcome back"}),t.jsx("p",{className:"text-gray-600 mt-2",children:"Sign in to your account to continue"})]}),t.jsxs(ne,{className:"space-y-6 bg-[#FFF6EE]",children:[t.jsxs("form",{onSubmit:c,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),t.jsxs("div",{className:"relative",children:[t.jsx(Am,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),t.jsx("input",{type:"email",required:!0,value:r,onChange:v=>n(v.target.value),className:"w-full pl-10 pr-3 py-3 rounded-md border border-amber-200 bg-white focus:ring-2 focus:ring-amber-400 focus:border-transparent placeholder:text-gray-400",placeholder:"Email Address"})]})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Password"}),t.jsx("a",{className:"text-xs text-amber-600 hover:underline cursor-pointer",children:"Forget Password?"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(Pm,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),t.jsx("input",{type:i?"text":"password",required:!0,value:a,onChange:v=>l(v.target.value),className:"w-full pl-10 pr-12 py-3 rounded-md border border-amber-200 bg-white focus:ring-2 focus:ring-amber-400 focus:border-transparent placeholder:text-gray-400",placeholder:"Password"}),t.jsx("button",{type:"button",onClick:()=>o(!i),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:i?t.jsx(Dl,{className:"w-4 h-4"}):t.jsx(pr,{className:"w-4 h-4"})})]})]}),t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[t.jsx("input",{id:"remember",type:"checkbox",className:"rounded border-gray-300 text-amber-600 focus:ring-amber-500"}),t.jsx("label",{htmlFor:"remember",children:"Remember me"})]}),d&&t.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md flex items-center",children:[t.jsx(vp,{className:"w-4 h-4 text-red-500 mr-2"}),t.jsx("p",{className:"text-sm text-red-600",children:d})]}),t.jsx(D,{type:"submit",className:"w-full py-3 bg-amber-500 hover:bg-amber-600 focus:ring-amber-500",loading:p,icon:t.jsx(Mm,{className:"w-4 h-4"}),children:"Log In"})]}),s&&t.jsx(D,{variant:"outline",className:"w-full border-amber-200 text-amber-700 hover:bg-amber-50",onClick:s,icon:t.jsx(Jo,{className:"w-4 h-4"}),children:"Back to Dashboard Selection"})]})]})]})})]})}function ee({children:e,variant:s="default",size:r="sm",className:n=""}){const a="inline-flex items-center font-medium rounded-full",l={default:"bg-gray-100 text-gray-800",primary:"bg-blue-100 text-blue-800",secondary:"bg-gray-100 text-gray-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800"},i={sm:"px-2.5 py-0.5 text-xs",md:"px-3 py-1 text-sm"};return t.jsx("span",{className:`${a} ${l[s]} ${i[r]} ${n}`,children:e})}function st({isOpen:e,onClose:s,title:r,children:n,size:a="md"}){if(!e)return null;const l={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"};return t.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:t.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[t.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:s}),t.jsxs("div",{className:`inline-block w-full ${l[a]} my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-lg`,children:[t.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:r}),t.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:t.jsx(so,{className:"w-5 h-5"})})]}),t.jsx("div",{className:"px-6 py-4",children:n})]})]})})}function Qp({user:e,onLogout:s}){var te;const[r,n]=u.useState([]),[a,l]=u.useState([]),[i,o]=u.useState(null),[d,m]=u.useState(!1),[p,j]=u.useState(!1),[c,v]=u.useState(""),[y,M]=u.useState(new Date(Date.now()+7*24*60*60*1e3).toISOString().split("T")[0]),[z,h]=u.useState(""),[x,f]=u.useState(new Date().toISOString().split("T")[0]),[E,A]=u.useState("general"),[g,N]=u.useState(!0),[b,S]=u.useState(!1),[L,ae]=u.useState([]);u.useEffect(()=>{O()},[e.id]);const O=async()=>{try{N(!0);const[_,xe,pe]=await Promise.all([Ee.getMyTasks(),Wp.getAll(),vr.getByTeamMember(e.id)]);n(_),l(xe),ae(pe)}catch(_){console.error("Failed to load user data:",_)}finally{N(!1)}},W=async()=>{S(!0),await O(),S(!1)},T=r.filter(_=>_.status!=="completed"),V=r.filter(_=>_.status==="completed"),se=r.filter(_=>_.end_date&&new Date(_.end_date)<new Date&&_.status!=="completed"),fe=r.length>0?Math.round(V.length/r.length*100):0;V.filter(_=>_.updated_at&&_.end_date&&new Date(_.updated_at)<=new Date(_.end_date)).length;const C=_=>{o(_),m(!0)},P=_=>{o(_),j(!0)},U=async()=>{if(i)try{await xd.requestExtension(i.id,{requested_due_date:y,reason:c}),await O()}catch(_){console.error("Failed to submit extension request:",_)}m(!1),o(null),v(""),M(new Date(Date.now()+7*24*60*60*1e3).toISOString().split("T")[0])},G=async()=>{if(i)try{await xd.addRemark(i.id,{remark:z,remark_date:x,remark_type:E}),await O()}catch(_){console.error("Failed to add remark:",_)}j(!1),o(null),h(""),f(new Date().toISOString().split("T")[0]),A("general")},K=_=>{if(!_.end_date)return!1;const xe=new Date;xe.setHours(0,0,0,0);const pe=new Date(_.end_date);return pe.setHours(0,0,0,0),pe<xe&&_.status!=="completed"},le=_=>{if(!_.end_date)return 0;const xe=new Date,Te=new Date(_.end_date).getTime()-xe.getTime();return Math.ceil(Te/(1e3*60*60*24))};return g?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:"relative",children:[t.jsx(Zi,{className:"w-12 h-12 animate-spin mx-auto mb-6 text-blue-600"}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-400 to-purple-400 rounded-full blur-xl opacity-20 animate-pulse"})]}),t.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Loading Your Portal"}),t.jsx("p",{className:"text-gray-600",children:"Preparing your personalized dashboard..."})]})}):t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:[t.jsx("header",{className:"bg-white/80 backdrop-blur-md shadow-lg border-b border-gray-200/50 sticky top-0 z-50",children:t.jsx("div",{className:"w-full px-6 lg:px-16",children:t.jsxs("div",{className:"flex items-center justify-between h-20",children:[t.jsxs("div",{className:"flex items-center space-x-6",children:[t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"w-14 h-14 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 rounded-2xl flex items-center justify-center text-white font-bold text-xl shadow-lg",children:e.name.charAt(0)}),t.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-green-500 rounded-full border-4 border-white shadow-lg"})]}),t.jsxs("div",{className:"flex flex-col space-y-1",children:[t.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Welcome back, ",e.name,"!"]}),t.jsxs("p",{className:"text-gray-600 flex items-center",children:[t.jsx(Mp,{className:"w-4 h-4 mr-2"}),e.skills&&e.skills.length>0?e.skills.join(", "):"Team Member Portal"]})]})]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs(D,{variant:"outline",size:"sm",onClick:W,loading:b,className:"bg-white/50 backdrop-blur-sm border-gray-200 hover:bg-white hover:shadow-md transition-all duration-200",children:[t.jsx(Zi,{className:"w-4 h-4 mr-2"}),"Refresh"]}),t.jsxs(D,{variant:"ghost",className:"relative p-3 hover:bg-gray-100 rounded-xl transition-all duration-200",children:[t.jsx(Dm,{className:"w-5 h-5 text-gray-600"}),t.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full"})]}),t.jsx(D,{variant:"ghost",className:"p-3 hover:bg-gray-100 rounded-xl transition-all duration-200",children:t.jsx(zm,{className:"w-5 h-5 text-gray-600"})}),t.jsx(D,{variant:"ghost",onClick:()=>{localStorage.removeItem("teamToken"),s()},className:"p-3 hover:bg-red-50 hover:text-red-600 rounded-xl transition-all duration-200",children:t.jsx(Im,{className:"w-5 h-5"})})]})]})})}),t.jsxs("div",{className:"w-full px-8 lg:px-12 xl:px-16 py-8",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-10",children:[t.jsx(re,{className:"bg-gradient-to-br from-blue-500 via-blue-600 to-blue-700 text-white border-0 shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-1",children:t.jsx(ne,{className:"p-8",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-blue-100 text-sm font-medium mb-2",children:"Active Tasks"}),t.jsx("p",{className:"text-4xl font-bold",children:T.length}),t.jsx("p",{className:"text-blue-200 text-sm mt-2",children:"Currently working on"})]}),t.jsx("div",{className:"p-4 rounded-2xl bg-blue-400/20 backdrop-blur-sm",children:t.jsx(Ot,{className:"w-8 h-8 text-white"})})]})})}),t.jsx(re,{className:"bg-gradient-to-br from-green-500 via-green-600 to-green-700 text-white border-0 shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-1",children:t.jsx(ne,{className:"p-8",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-green-100 text-sm font-medium mb-2",children:"Completed"}),t.jsx("p",{className:"text-4xl font-bold",children:V.length}),t.jsx("p",{className:"text-green-200 text-sm mt-2",children:"Successfully finished"})]}),t.jsx("div",{className:"p-4 rounded-2xl bg-green-400/20 backdrop-blur-sm",children:t.jsx(Xi,{className:"w-8 h-8 text-white"})})]})})}),t.jsx(re,{className:"bg-gradient-to-br from-red-500 via-red-600 to-red-700 text-white border-0 shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-1",children:t.jsx(ne,{className:"p-8",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-red-100 text-sm font-medium mb-2",children:"Overdue"}),t.jsx("p",{className:"text-4xl font-bold",children:se.length}),t.jsx("p",{className:"text-red-200 text-sm mt-2",children:"Need attention"})]}),t.jsx("div",{className:"p-4 rounded-2xl bg-red-400/20 backdrop-blur-sm",children:t.jsx(Wt,{className:"w-8 h-8 text-white"})})]})})}),t.jsx(re,{className:"bg-gradient-to-br from-purple-500 via-purple-600 to-purple-700 text-white border-0 shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-1",children:t.jsx(ne,{className:"p-8",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-purple-100 text-sm font-medium mb-2",children:"Completion Rate"}),t.jsxs("p",{className:"text-4xl font-bold",children:[fe,"%"]}),t.jsx("p",{className:"text-purple-200 text-sm mt-2",children:"Overall performance"})]}),t.jsx("div",{className:"p-4 rounded-2xl bg-purple-400/20 backdrop-blur-sm",children:t.jsx(dl,{className:"w-8 h-8 text-white"})})]})})})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-10",children:[t.jsxs(re,{className:"bg-white/70 backdrop-blur-sm border-0 shadow-xl hover:shadow-2xl transition-all duration-300",children:[t.jsx(ze,{className:"pb-6",children:t.jsxs(Fe,{className:"flex items-center text-gray-800 text-xl",children:[t.jsx("div",{className:"p-3 rounded-xl bg-purple-100 mr-4",children:t.jsx(Ns,{className:"w-6 h-6 text-purple-600"})}),"My Performance Flags"]})}),t.jsx(ne,{children:L.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-green-100 to-green-200 rounded-3xl flex items-center justify-center",children:t.jsx(Ns,{className:"w-10 h-10 text-green-600"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"No Performance Flags"}),t.jsx("p",{className:"text-gray-600",children:"Keep up the excellent work!"})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"text-center p-6 bg-gradient-to-br from-green-50 to-green-100 rounded-2xl border-2 border-green-200 shadow-sm hover:shadow-md transition-all duration-200",children:[t.jsx("div",{className:"text-3xl font-bold text-green-700 mb-2",children:L.filter(_=>_.type==="green").length}),t.jsx("div",{className:"text-sm text-green-600 font-semibold",children:" Green Flags"})]}),t.jsxs("div",{className:"text-center p-6 bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-2xl border-2 border-yellow-200 shadow-sm hover:shadow-md transition-all duration-200",children:[t.jsx("div",{className:"text-3xl font-bold text-yellow-700 mb-2",children:L.filter(_=>_.type==="yellow").length}),t.jsx("div",{className:"text-sm text-yellow-600 font-semibold",children:" Yellow Flags"})]}),t.jsxs("div",{className:"text-center p-6 bg-gradient-to-br from-orange-50 to-orange-100 rounded-2xl border-2 border-orange-200 shadow-sm hover:shadow-md transition-all duration-200",children:[t.jsx("div",{className:"text-3xl font-bold text-orange-700 mb-2",children:L.filter(_=>_.type==="orange").length}),t.jsx("div",{className:"text-sm text-orange-600 font-semibold",children:" Orange Flags"})]}),t.jsxs("div",{className:"text-center p-6 bg-gradient-to-br from-red-50 to-red-100 rounded-2xl border-2 border-red-200 shadow-sm hover:shadow-md transition-all duration-200",children:[t.jsx("div",{className:"text-3xl font-bold text-red-700 mb-2",children:L.filter(_=>_.type==="red").length}),t.jsx("div",{className:"text-sm text-red-600 font-semibold",children:" Red Flags"})]})]}),t.jsxs("div",{children:[t.jsxs("h4",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center",children:[t.jsx(Ps,{className:"w-5 h-5 mr-2 text-purple-600"}),"Recent Flags"]}),t.jsx("div",{className:"space-y-3",children:L.slice(0,3).map((_,xe)=>t.jsx("div",{className:"flex items-center justify-between p-4 rounded-xl bg-white border border-gray-100 shadow-sm hover:shadow-md transition-all duration-200",children:t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs(ee,{variant:_.type==="green"?"success":_.type==="yellow"||_.type==="orange"?"warning":"danger",size:"sm",className:"shadow-sm",children:[t.jsx(Ns,{className:"w-3 h-3 mr-1"}),_.type.toUpperCase()]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-semibold text-gray-900",children:_.reason}),t.jsxs("p",{className:"text-xs text-gray-500",children:[new Date(_.created_at).toLocaleDateString()," by ",_.added_by]})]})]})},xe))})]})]})})]}),t.jsxs(re,{className:"bg-white/70 backdrop-blur-sm border-0 shadow-xl hover:shadow-2xl transition-all duration-300",children:[t.jsx(ze,{className:"pb-6",children:t.jsxs(Fe,{className:"flex items-center text-gray-800 text-xl",children:[t.jsx("div",{className:"p-3 rounded-xl bg-green-100 mr-4",children:t.jsx(Yi,{className:"w-6 h-6 text-green-600"})}),"Recent Completions"]})}),t.jsx(ne,{children:V.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-blue-100 to-blue-200 rounded-3xl flex items-center justify-center",children:t.jsx(Yi,{className:"w-10 h-10 text-blue-600"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"No Completed Tasks Yet"}),t.jsx("p",{className:"text-gray-600",children:"Start working on your assigned tasks!"})]}):t.jsx("div",{className:"space-y-4",children:V.slice(0,5).map(_=>{const xe=a.find(pe=>pe.id===_.project_id);return t.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl border-2 border-green-200 shadow-sm hover:shadow-md transition-all duration-200",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-semibold text-gray-900 mb-1",children:_.name}),t.jsx("p",{className:"text-xs text-gray-600 bg-white/50 px-2 py-1 rounded-full inline-block",children:xe==null?void 0:xe.name})]}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(Xi,{className:"w-6 h-6 text-green-600"}),t.jsx("span",{className:"text-sm text-green-700 font-semibold",children:"Completed"})]})]},_.id)})})})]})]}),t.jsxs(re,{className:"bg-white/70 backdrop-blur-sm border-0 shadow-xl",children:[t.jsx(ze,{className:"pb-6",children:t.jsxs(Fe,{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"p-3 rounded-xl bg-blue-100 mr-4",children:t.jsx(Ot,{className:"w-6 h-6 text-blue-600"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"My Active Tasks"}),t.jsx("p",{className:"text-gray-600 mt-1 text-sm",children:"Manage your current assignments and track progress"})]})]}),t.jsxs(ee,{variant:"primary",className:"text-base font-bold px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600",children:[T.length," tasks"]})]})}),t.jsx(ne,{children:T.length===0?t.jsxs("div",{className:"text-center py-20 text-gray-500",children:[t.jsx("div",{className:"w-32 h-32 mx-auto mb-8 bg-gradient-to-br from-blue-100 to-blue-200 rounded-full flex items-center justify-center",children:t.jsx(Ot,{className:"w-16 h-16 text-blue-600"})}),t.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-4",children:"No Active Tasks"}),t.jsx("p",{className:"text-gray-600 text-xl max-w-md mx-auto",children:"You're all caught up! No tasks are currently assigned to you. Enjoy your free time!"})]}):t.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:T.map(_=>{const xe=a.find(Ue=>Ue.id===_.project_id),pe=le(_),Te=K(_);return t.jsxs("div",{className:`group relative overflow-hidden rounded-2xl border-2 transition-all duration-500 hover:shadow-xl transform hover:-translate-y-1 ${Te?"border-red-300 bg-gradient-to-br from-red-50 to-red-100 shadow-red-200":"border-gray-200 bg-white hover:border-blue-400 shadow-lg"}`,children:[t.jsx("div",{className:`absolute top-0 left-0 right-0 h-2 ${_.priority==="urgent"?"bg-gradient-to-r from-red-500 via-red-600 to-red-700":_.priority==="high"?"bg-gradient-to-r from-orange-500 via-orange-600 to-orange-700":_.priority==="medium"?"bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700":"bg-gradient-to-r from-gray-400 via-gray-500 to-gray-600"}`}),t.jsxs("div",{className:"p-4 pt-6",children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h4",{className:"font-bold text-gray-900 text-lg mb-2 line-clamp-2 group-hover:text-blue-600 transition-colors",children:_.name}),t.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600 mb-2",children:[t.jsx("span",{className:"font-semibold text-blue-600 bg-blue-50 px-3 py-1 rounded-full border border-blue-200",children:xe==null?void 0:xe.name}),t.jsx("span",{className:"text-gray-400",children:""}),t.jsx("span",{className:"font-semibold text-purple-600 bg-purple-50 px-3 py-1 rounded-full border border-purple-200",children:_.stage_name||"No Stage"}),_.category_name&&t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"text-gray-400",children:""}),t.jsx("span",{className:"text-gray-500 bg-gray-50 px-3 py-1 rounded-full border border-gray-200",children:_.category_name})]})]})]}),t.jsxs("div",{className:"flex flex-col items-end space-y-3 ml-6",children:[Te&&t.jsxs(ee,{variant:"danger",size:"sm",className:"animate-pulse shadow-lg px-4 py-2",children:[t.jsx(Wt,{className:"w-4 h-4 mr-2"}),"Overdue"]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(ee,{variant:_.priority==="urgent"?"danger":_.priority==="high"?"warning":_.priority==="medium"?"primary":"default",size:"sm",className:"shadow-sm px-3 py-1",children:_.priority}),t.jsx(ee,{variant:_.status==="in-progress"?"primary":_.status==="under-review"?"warning":_.status==="blocked"?"danger":"default",size:"sm",className:"shadow-sm px-3 py-1",children:_.status.replace("-"," ")})]})]})]}),_.description&&t.jsx("p",{className:"text-sm text-gray-700 mb-3 line-clamp-2 bg-gradient-to-r from-gray-50 to-blue-50 p-2 rounded-lg border-l-4 border-blue-300",children:_.description}),t.jsxs("div",{className:"mb-3",children:[t.jsxs("div",{className:"flex items-center justify-between text-sm mb-4",children:[t.jsx("span",{className:"text-gray-700 font-bold text-lg",children:"Progress"}),t.jsxs("span",{className:"font-bold text-gray-900 text-2xl",children:[_.progress,"%"]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 overflow-hidden shadow-inner",children:t.jsx("div",{className:`h-4 rounded-full transition-all duration-700 shadow-sm ${_.progress>=80?"bg-gradient-to-r from-green-500 via-green-600 to-green-700":_.progress>=50?"bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700":_.progress>=25?"bg-gradient-to-r from-yellow-500 via-orange-500 to-orange-600":"bg-gradient-to-r from-gray-400 via-gray-500 to-gray-600"}`,style:{width:`${_.progress}%`}})})]}),(_.grade_name||_.book_name||_.unit_name||_.lesson_name)&&t.jsxs("div",{className:"mb-3 p-3 bg-gradient-to-r from-blue-50 via-indigo-50 to-purple-50 rounded-lg border-2 border-blue-200 shadow-sm",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx(Ji,{className:"w-4 h-4 text-blue-600 mr-2"}),t.jsx("span",{className:"text-sm font-bold text-blue-900",children:"Educational Hierarchy"})]}),t.jsxs("div",{className:"flex flex-wrap gap-1",children:[_.grade_name&&t.jsx(ee,{variant:"primary",className:"text-xs bg-blue-100 text-blue-800 border-2 border-blue-200 font-semibold px-2 py-1",children:_.grade_name}),_.book_name&&t.jsx(ee,{variant:"primary",className:"text-xs bg-indigo-100 text-indigo-800 border-2 border-indigo-200 font-semibold px-2 py-1",children:_.book_name}),_.unit_name&&t.jsx(ee,{variant:"primary",className:"text-xs bg-purple-100 text-purple-800 border-2 border-purple-200 font-semibold px-2 py-1",children:_.unit_name}),_.lesson_name&&t.jsx(ee,{variant:"primary",className:"text-xs bg-pink-100 text-pink-800 border-2 border-pink-200 font-semibold px-2 py-1",children:_.lesson_name})]})]}),_.required_skills&&_.required_skills.length>0&&t.jsxs("div",{className:"mb-3 p-3 bg-gradient-to-r from-green-50 via-emerald-50 to-teal-50 rounded-lg border-2 border-green-200 shadow-sm",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx(yp,{className:"w-4 h-4 text-green-600 mr-2"}),t.jsx("span",{className:"text-sm font-bold text-green-900",children:"Required Skills"})]}),t.jsx("div",{className:"flex flex-wrap gap-1",children:_.required_skills.map((Ue,I)=>t.jsx(ee,{variant:"secondary",className:"text-xs bg-green-100 text-green-800 border-2 border-green-200 font-semibold px-2 py-1",children:Ue},I))})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3 p-3 bg-gradient-to-r from-gray-50 via-gray-100 to-gray-200 rounded-lg border border-gray-300 shadow-sm",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-xs text-gray-600 mb-1 font-semibold",children:"Due Date"}),t.jsx("div",{className:"text-sm font-bold text-gray-900",children:_.end_date?new Date(_.end_date).toLocaleDateString():"No due date"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-xs text-gray-600 mb-1 font-semibold",children:"Time Left"}),t.jsx("div",{className:`text-sm font-bold ${Te?"text-red-600":pe<=1?"text-orange-600":pe<=3?"text-yellow-600":"text-green-600"}`,children:Te?`${Math.abs(pe)} days overdue`:pe===0?"Due today":pe===1?"Due tomorrow":`${pe} days left`})]})]}),t.jsx("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-3 p-2 bg-white rounded-lg border border-gray-200 shadow-sm",children:t.jsxs("div",{className:"flex items-center space-x-6",children:[t.jsxs("span",{className:"font-semibold",children:["Estimated: ",t.jsxs("span",{className:"font-bold text-gray-900 text-lg",children:[_.estimated_hours,"h"]})]}),_.actual_hours&&t.jsxs("span",{className:"font-semibold",children:["Actual: ",t.jsxs("span",{className:"font-bold text-gray-900 text-lg",children:[_.actual_hours,"h"]})]})]})}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsxs(D,{variant:"outline",size:"sm",onClick:()=>C(_),className:"flex-1 h-9 font-semibold shadow-md hover:shadow-lg transition-all duration-200 bg-white hover:bg-blue-50 border-2 border-blue-200 hover:border-blue-300 text-sm",children:[t.jsx(_r,{className:"w-3 h-3 mr-1"}),"Request Extension"]}),t.jsxs(D,{variant:"outline",size:"sm",onClick:()=>P(_),className:"flex-1 h-9 font-semibold shadow-md hover:shadow-lg transition-all duration-200 bg-white hover:bg-purple-50 border-2 border-purple-200 hover:border-purple-300 text-sm",children:[t.jsx(Lm,{className:"w-3 h-3 mr-1"}),"Add Remark"]})]})]})]},_.id)})})})]})]}),t.jsx(st,{isOpen:d,onClose:()=>m(!1),title:"Request Task Extension",children:t.jsxs("div",{className:"space-y-6",children:[i&&t.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border-2 border-blue-200",children:[t.jsx("h4",{className:"font-semibold text-gray-900 text-lg",children:i.name}),t.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Current due date: ",i.end_date?new Date(i.end_date).toLocaleDateString():"No due date"]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"New Due Date"}),t.jsx("input",{type:"date",value:y,onChange:_=>M(_.target.value),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Reason for Extension"}),t.jsx("textarea",{value:c,onChange:_=>v(_.target.value),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",rows:4,placeholder:"Please explain why you need an extension...",required:!0})]}),t.jsxs("div",{className:"flex justify-end space-x-4",children:[t.jsx(D,{variant:"outline",onClick:()=>m(!1),className:"px-6 py-3 font-semibold",children:"Cancel"}),t.jsx(D,{onClick:U,disabled:!c.trim(),className:"px-6 py-3 font-semibold bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700",children:"Submit Request"})]})]})}),t.jsx(st,{isOpen:p,onClose:()=>j(!1),title:"Add Task Remark",children:t.jsxs("div",{className:"space-y-6",children:[i&&t.jsxs("div",{className:"p-4 bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl border-2 border-purple-200",children:[t.jsx("h4",{className:"font-semibold text-gray-900 text-lg",children:i.name}),t.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Project: ",(te=a.find(_=>_.id===i.project_id))==null?void 0:te.name]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Remark Date"}),t.jsx("input",{type:"date",value:x,onChange:_=>f(_.target.value),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Remark Type"}),t.jsxs("select",{value:E,onChange:_=>A(_.target.value),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200",children:[t.jsx("option",{value:"general",children:"General"}),t.jsx("option",{value:"progress",children:"Progress Update"}),t.jsx("option",{value:"issue",children:"Issue/Problem"}),t.jsx("option",{value:"update",children:"Update"}),t.jsx("option",{value:"other",children:"Other"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Remark Content"}),t.jsx("textarea",{value:z,onChange:_=>h(_.target.value),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200",rows:4,placeholder:"Add your remark or comment about this task...",required:!0})]}),t.jsxs("div",{className:"flex justify-end space-x-4",children:[t.jsx(D,{variant:"outline",onClick:()=>j(!1),className:"px-6 py-3 font-semibold",children:"Cancel"}),t.jsx(D,{onClick:G,disabled:!z.trim(),className:"px-6 py-3 font-semibold bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700",children:"Add Remark"})]})]})})]})}const Kp=[{id:"1",name:"Sarah Johnson",email:"sarah.johnson@company.com",skills:["Instructional Designers","Content Writers"],passcode:"DEMO123",isActive:!0,performanceFlags:[{id:"1",type:"green",reason:"Completed project ahead of schedule",date:"2024-01-15",addedBy:"Manager"}]},{id:"2",name:"Mike Chen",email:"mike.chen@company.com",skills:["Developers","Tech"],passcode:"TECH456",isActive:!0,performanceFlags:[]},{id:"3",name:"Emily Rodriguez",email:"emily.rodriguez@company.com",skills:["Graphic Designers","Animators"]},{id:"4",name:"David Kim",email:"david.kim@company.com",skills:["QA","Tech"]},{id:"5",name:"Lisa Thompson",email:"lisa.thompson@company.com",skills:["Marketing","Sales"]},{id:"6",name:"John Smith",email:"john.smith@company.com",skills:["Content Writers","Instructional Designers"]}],Yp=[{id:"1",name:"Pre-K Curriculum Development",description:"Comprehensive curriculum design for Pre-K students including KG-1, KG-2, and KG-3 levels",category:"Curriculum Design",status:"active",startDate:new Date("2024-01-15"),endDate:new Date("2024-06-30"),progress:65,stages:[{id:"stage-1",name:"Curriculum Analysis",description:"Analyze curriculum requirements and standards",order:1,weight:20,status:"completed",progress:100,startDate:new Date("2024-01-15"),endDate:new Date("2024-02-01"),reviewRounds:[],tasks:[]},{id:"stage-2",name:"Content Creation",description:"Develop curriculum content and materials",order:2,weight:60,status:"in-progress",progress:65,startDate:new Date("2024-02-01"),endDate:new Date("2024-04-30"),reviewRounds:[],tasks:[]},{id:"stage-3",name:"Review & Finalization",description:"Review and finalize curriculum materials",order:3,weight:20,status:"not-started",progress:0,startDate:new Date("2024-05-01"),endDate:new Date("2024-06-30"),reviewRounds:[],tasks:[]}],teamMembers:["1","3","6"],grades:[{id:"kg1",name:"KG-1",description:"Kindergarten Grade 1",projectId:"1",order:1,weight:40,books:[{id:"kg1-book1",name:"Book 1",type:"student",description:"Student Book 1 for KG-1",gradeId:"kg1",order:1,weight:70,units:[{id:"kg1-book1-unit1",name:"Unit 1: Colors and Shapes",description:"Introduction to basic colors and shapes",bookId:"kg1-book1",order:1,weight:60,lessons:[{id:"kg1-book1-unit1-lesson1",name:"Lesson 1: Primary Colors",description:"Learning red, blue, and yellow",unitId:"kg1-book1-unit1",order:1,weight:50},{id:"kg1-book1-unit1-lesson2",name:"Lesson 2: Basic Shapes",description:"Circle, square, and triangle",unitId:"kg1-book1-unit1",order:2,weight:50}]},{id:"kg1-book1-unit2",name:"Unit 2: Numbers 1-10",description:"Introduction to counting and numbers",bookId:"kg1-book1",order:2,weight:40,lessons:[{id:"kg1-book1-unit2-lesson1",name:"Lesson 1: Numbers 1-5",description:"Learning to count 1 to 5",unitId:"kg1-book1-unit2",order:1,weight:100}]}]},{id:"kg1-teacher-guide",name:"Teacher Guide",type:"teacher",description:"Teacher guide for KG-1",gradeId:"kg1",order:2,weight:30,units:[{id:"kg1-tg-unit1",name:"Unit 1: Teaching Colors and Shapes",description:"Guide for teaching colors and shapes",bookId:"kg1-teacher-guide",order:1,weight:100,lessons:[{id:"kg1-tg-unit1-lesson1",name:"Lesson 1: Color Activities",description:"Activities for teaching colors",unitId:"kg1-tg-unit1",order:1,weight:100}]}]}]},{id:"kg2",name:"KG-2",description:"Kindergarten Grade 2",projectId:"1",order:2,weight:35,books:[{id:"kg2-book1",name:"Book 1",type:"student",description:"Student Book 1 for KG-2",gradeId:"kg2",order:1,weight:100,units:[{id:"kg2-book1-unit1",name:"Unit 1: Letters A-M",description:"Introduction to first half of alphabet",bookId:"kg2-book1",order:1,weight:100,lessons:[{id:"kg2-book1-unit1-lesson1",name:"Lesson 1: Letters A-E",description:"Learning letters A through E",unitId:"kg2-book1-unit1",order:1,weight:100}]}]}]},{id:"kg3",name:"KG-3",description:"Kindergarten Grade 3",projectId:"1",order:3,weight:25,books:[{id:"kg3-book1",name:"Book 1",type:"student",description:"Student Book 1 for KG-3",gradeId:"kg3",order:1,weight:100,units:[{id:"kg3-book1-unit1",name:"Unit 1: Reading Readiness",description:"Preparing for reading",bookId:"kg3-book1",order:1,weight:100,lessons:[{id:"kg3-book1-unit1-lesson1",name:"Lesson 1: Phonics Basics",description:"Introduction to phonics",unitId:"kg3-book1-unit1",order:1,weight:100}]}]}]}]},{id:"2",name:"LMS Platform Redesign",description:"Complete overhaul of the learning management system interface and user experience",category:"IT Applications",status:"active",startDate:new Date("2024-02-01"),endDate:new Date("2024-08-15"),progress:42,stages:[],teamMembers:["2","4","5"]},{id:"3",name:"Interactive Science Course",description:"eLearning course with interactive animations and simulations for high school science",category:"eLearning Design",status:"planning",startDate:new Date("2024-03-01"),endDate:new Date("2024-09-30"),progress:15,stages:[],teamMembers:["1","2","3"]},{id:"4",name:"Corporate Training Module",description:"Employee onboarding and training content for new hires",category:"eLearning Design",status:"completed",startDate:new Date("2023-10-01"),endDate:new Date("2024-01-15"),progress:100,stages:[],teamMembers:["1","6"]}],Xp=[{id:"1",name:"Content Strategy Development",description:"Create comprehensive content strategy for Pre-K curriculum",projectId:"1",stageId:"stage-2",gradeId:"kg1",bookId:"kg1-book1",unitId:"kg1-book1-unit1",lessonId:"kg1-book1-unit1-lesson1",componentPath:"KG-1 > Book 1 > Unit 1: Colors and Shapes > Lesson 1: Primary Colors",assignees:["1","6"],skills:["Content Writers","Instructional Designers"],status:"in-progress",priority:"high",startDate:new Date("2024-01-15"),endDate:new Date("2024-02-15"),progress:75,estimatedHours:40,actualHours:32},{id:"2",name:"UI/UX Design for LMS Dashboard",description:"Design new dashboard interface for the learning management system",projectId:"2",stageId:"stage-2",assignees:["3"],skills:["Graphic Designers"],status:"under-review",priority:"high",startDate:new Date("2024-02-01"),endDate:new Date("2024-02-28"),progress:90,estimatedHours:60,actualHours:55},{id:"3",name:"Database Migration Script",description:"Create scripts for migrating user data to new LMS platform",projectId:"2",stageId:"stage-2",assignees:["2"],skills:["Developers","Tech"],status:"not-started",priority:"medium",startDate:new Date("2024-03-01"),endDate:new Date("2024-03-15"),progress:0,estimatedHours:32},{id:"4",name:"Quality Assurance Testing",description:"Comprehensive testing of LMS functionality and user experience",projectId:"2",stageId:"stage-2",assignees:["4"],skills:["QA"],status:"blocked",priority:"urgent",startDate:new Date("2024-02-15"),endDate:new Date("2024-01-30"),progress:25,estimatedHours:48,actualHours:12},{id:"5",name:"Marketing Campaign Design",description:"Create promotional materials for new curriculum launch",projectId:"1",stageId:"stage-1",assignees:["5"],skills:["Marketing"],status:"completed",priority:"medium",startDate:new Date("2024-01-01"),endDate:new Date("2024-01-31"),progress:100,estimatedHours:24,actualHours:26},{id:"6",name:"Animation Storyboard Creation",description:"Develop storyboards for interactive science course animations",projectId:"3",stageId:"stage-2",assignees:["3"],skills:["Animators","Graphic Designers"],status:"in-progress",priority:"medium",startDate:new Date("2024-02-10"),endDate:new Date("2024-03-10"),progress:40,estimatedHours:36,actualHours:15},{id:"7",name:"KG-2 Letter Recognition Content",description:"Create content for letter recognition in KG-2",projectId:"1",stageId:"stage-2",gradeId:"kg2",bookId:"kg2-book1",unitId:"kg2-book1-unit1",lessonId:"kg2-book1-unit1-lesson1",componentPath:"KG-2 > Book 1 > Unit 1: Letters A-M > Lesson 1: Letters A-E",assignees:["1"],skills:["Content Writers","Instructional Designers"],status:"not-started",priority:"medium",startDate:new Date("2024-02-15"),endDate:new Date("2024-03-15"),progress:0,estimatedHours:30},{id:"8",name:"KG-3 Phonics Activities",description:"Develop phonics activities for KG-3 students",projectId:"1",stageId:"stage-2",gradeId:"kg3",bookId:"kg3-book1",unitId:"kg3-book1-unit1",lessonId:"kg3-book1-unit1-lesson1",componentPath:"KG-3 > Book 1 > Unit 1: Reading Readiness > Lesson 1: Phonics Basics",assignees:["6"],skills:["Instructional Designers"],status:"in-progress",priority:"high",startDate:new Date("2024-02-01"),endDate:new Date("2024-03-01"),progress:30,estimatedHours:25,actualHours:8}],Zp={projects:Yp,users:Kp,tasks:Xp,allocations:[],categories:["eLearning Design","Curriculum Design","IT Applications"],skills:["Content Writers","Instructional Designers","Graphic Designers","Developers","Animators","Tech","Sales","Marketing","QA"],filters:{},selectedProject:null,selectedView:"dashboard"};function Jp(e,s){switch(s.type){case"SET_PROJECTS":return{...e,projects:s.payload};case"ADD_PROJECT":return{...e,projects:[...e.projects,s.payload]};case"UPDATE_PROJECT":return{...e,projects:e.projects.map(r=>r.id===s.payload.id?s.payload:r)};case"DELETE_PROJECT":return{...e,projects:e.projects.filter(r=>r.id!==s.payload)};case"SET_USERS":return{...e,users:s.payload};case"ADD_USER":return{...e,users:[...e.users,s.payload]};case"UPDATE_USER":return{...e,users:e.users.map(r=>r.id===s.payload.id?s.payload:r)};case"SET_TASKS":return{...e,tasks:s.payload};case"ADD_TASK":return{...e,tasks:[...e.tasks,s.payload]};case"UPDATE_TASK":return{...e,tasks:e.tasks.map(r=>r.id===s.payload.id?s.payload:r)};case"SET_ALLOCATIONS":return{...e,allocations:s.payload};case"ADD_ALLOCATION":return{...e,allocations:[...e.allocations,s.payload]};case"UPDATE_ALLOCATION":return{...e,allocations:e.allocations.map(r=>r.userId===s.payload.userId&&r.projectId===s.payload.projectId&&r.taskId===s.payload.taskId?s.payload:r)};case"ADD_CATEGORY":return{...e,categories:[...e.categories,s.payload]};case"ADD_SKILL":return{...e,skills:[...e.skills,s.payload]};case"SET_FILTERS":return{...e,filters:s.payload};case"SET_SELECTED_PROJECT":return{...e,selectedProject:s.payload};case"SET_SELECTED_VIEW":return{...e,selectedView:s.payload};default:return e}}const Rm=u.createContext(null);function e0({children:e}){const[s,r]=u.useReducer(Jp,Zp);return t.jsx(Rm.Provider,{value:{state:s,dispatch:r},children:e})}function Ar(){const e=u.useContext(Rm);if(!e)throw new Error("useApp must be used within an AppProvider");return e}const t0=[{name:"Dashboard",icon:Ap,key:"dashboard"},{name:"Projects",icon:br,key:"projects"},{name:"Teams",icon:et,key:"teams"},{name:"Tasks",icon:Ot,key:"tasks"},{name:"Allocations",icon:Pt,key:"allocations"},{name:"Analytics",icon:Ps,key:"analytics"},{name:"Settings",icon:zm,key:"settings"}];function s0(){const{state:e,dispatch:s}=Ar();return t.jsxs("div",{className:"w-64 bg-white shadow-sm border-r border-gray-200 h-full",children:[t.jsxs("div",{className:"p-6",children:[t.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"ProjectFlow"}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Project Management"})]}),t.jsx("nav",{className:"px-4 space-y-4 h-[100vh]",children:t0.map(r=>{const n=e.selectedView===r.key;return t.jsxs("button",{onClick:()=>s({type:"SET_SELECTED_VIEW",payload:r.key}),className:`w-full flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ${n?"bg-blue-50 text-blue-700 border-r-2 border-blue-700":"text-gray-700 hover:bg-gray-50 hover:text-gray-900"}`,children:[t.jsx(r.icon,{className:`mr-3 h-5 w-5 ${n?"text-blue-700":"text-gray-400"}`}),r.name]},r.key)})})]})}function r0(){const{signOut:e,user:s}=na(),r=async()=>{await e()};return t.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:t.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[t.jsx("div",{className:"flex items-center flex-1",children:t.jsxs("div",{className:"relative max-w-md w-full",children:[t.jsx(Tl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),t.jsx("input",{type:"text",placeholder:"Search projects, tasks, or team members...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx(D,{variant:"ghost",size:"sm",children:t.jsx(Dm,{className:"w-4 h-4"})}),t.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[t.jsx(to,{className:"w-4 h-4"}),t.jsx("span",{children:s==null?void 0:s.email})]}),t.jsx(D,{variant:"ghost",size:"sm",onClick:r,children:t.jsx(Im,{className:"w-4 h-4"})})]})]})})}function $t({value:e,max:s=100,className:r="",showLabel:n=!0,variant:a="default"}){const l=Math.min(e/s*100,100),i={default:"bg-blue-600",success:"bg-green-600",warning:"bg-yellow-600",danger:"bg-red-600"};return t.jsxs("div",{className:`w-full ${r}`,children:[t.jsx("div",{className:"flex items-center justify-between mb-1",children:n&&t.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[Math.round(l),"%"]})}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${i[a]}`,style:{width:`${l}%`}})})]})}function n0(){const{state:e,dispatch:s}=Ar(),[r,n]=u.useState(null),[a,l]=u.useState(!0),[i,o]=u.useState(null);u.useEffect(()=>{let A=!0;return(async()=>{try{l(!0),o(null);const N=await Gp.getOverview();A&&n(N)}catch(N){A&&(console.error("Dashboard fetch error:",N),o(N.message||"Failed to load dashboard data"))}finally{A&&l(!1)}})(),()=>{A=!1}},[]);const d=(A,g)=>{s({type:"SET_SELECTED_VIEW",payload:A}),g&&s({type:"SET_FILTERS",payload:g})},m=(r==null?void 0:r.projects)||[],p=(r==null?void 0:r.teamMembers)||[],j=(r==null?void 0:r.tasks)||[],c=new Date,v=new Date(c);v.setDate(v.getDate()+1);const y=new Date(c);y.setDate(c.getDate()+7);const M=j.filter(A=>{if(!A.end_date)return!1;const g=new Date(A.end_date);g.setHours(0,0,0,0);const N=new Date(c);return N.setHours(0,0,0,0),g.getTime()===N.getTime()&&A.status!=="completed"}),z=j.filter(A=>{if(!A.end_date)return!1;const g=new Date(A.end_date);g.setHours(0,0,0,0);const N=new Date(v);return N.setHours(0,0,0,0),g.getTime()===N.getTime()&&A.status!=="completed"}),h=j.filter(A=>{if(!A.end_date)return!1;const g=new Date(A.end_date);g.setHours(0,0,0,0);const N=new Date(c);N.setHours(0,0,0,0);const b=new Date(y);return b.setHours(0,0,0,0),g>=N&&g<=b&&A.status!=="completed"}),x=A=>{s({type:"SET_SELECTED_VIEW",payload:"tasks"}),s({type:"SET_FILTERS",payload:{teamMembers:[A]}})};if(a)return t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),t.jsx("p",{className:"text-gray-600",children:"Overview of your project management activities"})]}),t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsxs("div",{className:"text-center",children:[t.jsx(aa,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-blue-600"}),t.jsx("p",{className:"text-gray-600",children:"Loading dashboard data..."})]})})]});if(i)return t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),t.jsx("p",{className:"text-gray-600",children:"Overview of your project management activities"})]}),t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsxs("div",{className:"text-center",children:[t.jsx(Wt,{className:"w-8 h-8 mx-auto mb-4 text-red-600"}),t.jsx("p",{className:"text-red-600 mb-4",children:i}),t.jsx(D,{onClick:()=>window.location.reload(),variant:"outline",children:"Try Again"})]})})]});const f=(r==null?void 0:r.stats)||{},E=[{title:"Total Projects",value:f.totalProjects||0,icon:br,color:"text-blue-600",bg:"bg-blue-50",onClick:()=>d("projects")},{title:"Active Projects",value:f.activeProjects||0,icon:dl,color:"text-green-600",bg:"bg-green-50",onClick:()=>d("projects",{statuses:["active"]})},{title:"Team Members",value:f.totalTeamMembers||0,icon:et,color:"text-purple-600",bg:"bg-purple-50",onClick:()=>d("teams")},{title:"Categories",value:f.totalCategories||0,icon:Ot,color:"text-orange-600",bg:"bg-orange-50",onClick:()=>d("settings")}];return t.jsxs("div",{className:"relative min-h-screen p-6  space-y-4 bg-gradient-to-br from-amber-50 via-white to-blue-50",children:[t.jsx("div",{className:"space-y-4 pointer-events-none absolute inset-0 opacity-50 [background-image:radial-gradient(#cbd5e1_1px,transparent_1px)] [background-size:18px_18px]"}),t.jsx("div",{className:"relative",children:t.jsx("div",{className:"rounded-2xl bg-gradient-to-r from-indigo-600 via-blue-600 to-cyan-500 text-white p-6 shadow-lg",children:t.jsxs("div",{className:"flex items-center justify-between gap-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Dashboard"}),t.jsx("p",{className:"text-white/80",children:"Overview of your project management activities"})]}),t.jsxs("div",{className:"hidden md:flex items-center gap-6",children:[t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-xs uppercase tracking-wider text-white/70",children:"Projects"}),t.jsx("p",{className:"text-xl font-semibold",children:f.totalProjects||0})]}),t.jsx("div",{className:"h-10 w-px bg-white/20"}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-xs uppercase tracking-wider text-white/70",children:"Team"}),t.jsx("p",{className:"text-xl font-semibold",children:f.totalTeamMembers||0})]}),t.jsx("div",{className:"h-10 w-px bg-white/20"}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-xs uppercase tracking-wider text-white/70",children:"Categories"}),t.jsx("p",{className:"text-xl font-semibold",children:f.totalCategories||0})]})]})]})})}),t.jsx("div",{className:"relative grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:E.map(A=>t.jsx(re,{className:"rounded-2xl border-0 bg-white/80 backdrop-blur-sm hover:shadow-lg transition-all cursor-pointer hover:-translate-y-0.5",onClick:A.onClick,children:t.jsxs(ne,{className:"p-6",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:`p-2.5 rounded-xl ring-1 ring-inset ring-gray-200 ${A.bg}`,children:t.jsx(A.icon,{className:`w-6 h-6 ${A.color}`})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:A.title}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:A.value})]})]}),t.jsxs("div",{className:"mt-3 flex items-center text-sm text-gray-500",children:[t.jsx("span",{children:"Click to view details"}),t.jsx(js,{className:"w-4 h-4 ml-1"})]})]})},A.title))}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsx(re,{className:"rounded-2xl border-0 bg-white/80 backdrop-blur-sm hover:shadow-lg transition-all cursor-pointer hover:-translate-y-0.5",onClick:()=>d("tasks",{dueToday:!0}),children:t.jsxs(ne,{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Due Today"}),t.jsx("p",{className:"text-2xl font-bold text-red-600",children:M.length})]}),t.jsx(Pt,{className:"w-8 h-8 text-red-500"})]}),t.jsxs("div",{className:"mt-2 flex items-center text-sm text-gray-500",children:[t.jsx("span",{children:"Click to view tasks"}),t.jsx(js,{className:"w-4 h-4 ml-1"})]})]})}),t.jsx(re,{className:"rounded-2xl border-0 bg-white/80 backdrop-blur-sm hover:shadow-lg transition-all cursor-pointer hover:-translate-y-0.5",onClick:()=>d("tasks",{dueTomorrow:!0}),children:t.jsxs(ne,{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Due Tomorrow"}),t.jsx("p",{className:"text-2xl font-bold text-orange-600",children:z.length})]}),t.jsx(Pt,{className:"w-8 h-8 text-orange-500"})]}),t.jsxs("div",{className:"mt-2 flex items-center text-sm text-gray-500",children:[t.jsx("span",{children:"Click to view tasks"}),t.jsx(js,{className:"w-4 h-4 ml-1"})]})]})}),t.jsx(re,{className:"rounded-2xl border-0 bg-white/80 backdrop-blur-sm hover:shadow-lg transition-all cursor-pointer hover:-translate-y-0.5",onClick:()=>d("tasks",{dueThisWeek:!0}),children:t.jsxs(ne,{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Due This Week"}),t.jsx("p",{className:"text-2xl font-bold text-blue-600",children:h.length})]}),t.jsx(Pt,{className:"w-8 h-8 text-blue-500"})]}),t.jsxs("div",{className:"mt-2 flex items-center text-sm text-gray-500",children:[t.jsx("span",{children:"Click to view tasks"}),t.jsx(js,{className:"w-4 h-4 ml-1"})]})]})})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs(re,{className:"rounded-2xl border-0 bg-white/80 backdrop-blur-sm",children:[t.jsx(ze,{className:"pb-2",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(Fe,{children:"Recent Projects"}),t.jsx(D,{variant:"ghost",size:"sm",onClick:()=>d("projects"),children:"View All"})]})}),t.jsx(ne,{className:"space-y-3",children:m.slice(0,5).map(A=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-gray-100 hover:shadow-sm hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>d("projects"),children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:"font-medium text-gray-900",children:A.name}),t.jsx("p",{className:"text-sm text-gray-600",children:A.category_name||A.category}),t.jsx($t,{value:A.progress||0,className:"mt-2"})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(ee,{variant:A.status==="active"?"primary":A.status==="completed"?"success":A.status==="on-hold"?"warning":"default",children:A.status}),t.jsx(js,{className:"w-4 h-4 text-gray-400"})]})]},A.id))})]}),t.jsxs(re,{className:"rounded-2xl border-0 bg-white/80 backdrop-blur-sm",children:[t.jsx(ze,{className:"pb-2",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(Fe,{children:"Team Workload"}),t.jsx(D,{variant:"ghost",size:"sm",onClick:()=>d("teams"),children:"View All"})]})}),t.jsx(ne,{className:"space-y-3",children:p.slice(0,6).map(A=>{var S;const g=j.filter(L=>L.assignees&&L.assignees.includes(A.id)),N=g.filter(L=>L.status==="completed").length,b=g.length>0?N/g.length*100:0;return t.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg border border-gray-100 bg-white hover:shadow-sm hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>x(A.id),children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm font-medium shadow-sm",children:A.name.charAt(0)}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:A.name}),t.jsx("p",{className:"text-sm text-gray-600",children:((S=A.skills)==null?void 0:S[0])||"No skills"})]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsxs("span",{className:"text-sm text-gray-600",children:[g.length," tasks"]}),t.jsx($t,{value:b,className:"w-20",showLabel:!1,variant:b>80?"warning":"default"}),t.jsx(js,{className:"w-4 h-4 text-gray-400"})]})]},A.id)})})]})]}),t.jsxs(re,{className:"rounded-2xl border-0 bg-white/80 backdrop-blur-sm",children:[t.jsx(ze,{className:"pb-2",children:t.jsx(Fe,{children:"Quick Actions"})}),t.jsx(ne,{children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("button",{onClick:()=>s({type:"SET_SELECTED_VIEW",payload:"projects"}),className:"p-4 rounded-lg bg-white border border-gray-100 hover:shadow-md hover:-translate-y-0.5 transition-all",children:[t.jsx(br,{className:"w-8 h-8 text-blue-500 mx-auto mb-2"}),t.jsx("p",{className:"text-sm font-medium text-gray-800",children:"Create New Project"})]}),t.jsxs("button",{onClick:()=>s({type:"SET_SELECTED_VIEW",payload:"teams"}),className:"p-4 rounded-lg bg-white border border-gray-100 hover:shadow-md hover:-translate-y-0.5 transition-all",children:[t.jsx(et,{className:"w-8 h-8 text-green-600 mx-auto mb-2"}),t.jsx("p",{className:"text-sm font-medium text-gray-800",children:"Add Team Member"})]}),t.jsxs("button",{onClick:()=>s({type:"SET_SELECTED_VIEW",payload:"tasks"}),className:"p-4 rounded-lg bg-white border border-gray-100 hover:shadow-md hover:-translate-y-0.5 transition-all",children:[t.jsx(Ot,{className:"w-8 h-8 text-orange-500 mx-auto mb-2"}),t.jsx("p",{className:"text-sm font-medium text-gray-800",children:"Create Task"})]})]})})]})]})}function a0(e,s){const r=s.filter(l=>l.lessonId===e);if(r.length===0)return{progress:0,completedWeight:0,totalWeight:0};const a=r.reduce((l,i)=>l+i.progress,0)/r.length;return{progress:Math.round(a),completedWeight:a,totalWeight:100}}function l0(e,s){let r=0,n=0;return e.lessons.forEach(l=>{const i=a0(l.id,s);r+=i.progress*l.weight/100,n+=l.weight}),{progress:n>0?Math.round(r):0,completedWeight:r,totalWeight:n}}function i0(e,s){let r=0,n=0;return e.units.forEach(l=>{const i=l0(l,s);r+=i.progress*l.weight/100,n+=l.weight}),{progress:n>0?Math.round(r):0,completedWeight:r,totalWeight:n}}function o0(e,s){let r=0,n=0;return e.books.forEach(l=>{const i=i0(l,s);r+=i.progress*l.weight/100,n+=l.weight}),{progress:n>0?Math.round(r):0,completedWeight:r,totalWeight:n}}function ro(e,s){const r=s.filter(l=>l.stageId===e);if(r.length===0)return{progress:0,completedWeight:0,totalWeight:0};const a=r.reduce((l,i)=>l+i.progress,0)/r.length;return{progress:Math.round(a),completedWeight:a,totalWeight:100}}function c0(e,s){let r=0,n=0;return e.stages&&e.stages.length>0&&e.stages.forEach(l=>{const i=ro(l.id,s);r+=i.progress*l.weight/100,n+=l.weight}),e.grades&&e.grades.length>0&&e.grades.forEach(l=>{const i=o0(l,s);r+=i.progress*l.weight/100,n+=l.weight}),{progress:n>0?Math.round(r):0,completedWeight:r,totalWeight:n}}function zs(e){switch(e){case"not-started":return 0;case"in-progress":return 50;case"under-review":return 90;case"completed":return 100;case"blocked":return 25;default:return 0}}function $m({taskId:e,onBack:s}){Ar();const{user:r}=na(),[n,a]=u.useState(null),[l,i]=u.useState(!0),[o,d]=u.useState(null),[m,p]=u.useState(!1),[j,c]=u.useState(null),[v,y]=u.useState(null),[M,z]=u.useState([]),[h,x]=u.useState([]),[f,E]=u.useState([]),[A,g]=u.useState([]),[N,b]=u.useState([]),[S,L]=u.useState([]),[ae,O]=u.useState([]),[W,T]=u.useState([]),[V,se]=u.useState(null),[fe,C]=u.useState([]),[P,U]=u.useState([]),[G,K]=u.useState(!1),[le,te]=u.useState(!1),[_,xe]=u.useState(null),[pe,Te]=u.useState("approved"),[Ue,I]=u.useState(""),[Y,ce]=u.useState(""),[de,ue]=u.useState([]),[ye,ve]=u.useState(!1),[We,Z]=u.useState(null),[J,me]=u.useState("green"),[Re,_e]=u.useState(""),gt=(r==null?void 0:r.id)!==void 0;u.useEffect(()=>{lt()},[e]);const lt=async()=>{try{i(!0),d(null);const k=await Le.getById(e);if(console.log(" Task data received:",k),k.progress===0||k.progress===null){const mt=zs(k.status);console.log(" Calculating progress for status:",k.status,"->",mt),k.progress=mt}a(k);const[B,he,ge,Ne,it,ke,yt,Ze,ut,ot,nt,bt]=await Promise.all([$e.getById(k.project_id),Rt.getById(k.category_stage_id||k.stage_id),Ee.getMembers(),Ee.getTeams(),bs.getAll(),Ms.getAll(),Is.getAll(),As.getAll(),cr.getAll(),Le.getExtensions(e),Le.getRemarks(e),vr.getByTask(e)]);c(B),y(he),x(ge.data||ge),E(Ne.data||Ne),g(it.data||it),b(ke.data||ke),L(yt.data||yt),O(Ze.data||Ze),T(ut.data||ut),C(ot.data||ot),U(nt.data||nt),ue(bt.data||bt);const es=ge.data||ge;console.log(" Task assignees data:",k.assignees),console.log(" All team members:",es);const Hs=es.filter(mt=>Array.isArray(k.assignees)?k.assignees.some(R=>typeof R=="object"&&R.id?R.id===mt.id:R===mt.id):!1);if(console.log(" Filtered task assignees:",Hs),z(Hs),k.grade_id||k.book_id||k.unit_id||k.lesson_id){const mt={};k.grade_id&&(mt.grade=await Ms.getById(k.grade_id)),k.book_id&&(mt.book=await Is.getById(k.book_id)),k.unit_id&&(mt.unit=await As.getById(k.unit_id)),k.lesson_id&&(mt.lesson=await cr.getById(k.lesson_id)),se(mt)}}catch(k){console.error("Failed to load task details:",k),d(k.message||"Failed to load task details")}finally{i(!1)}},Jt=async k=>{try{const B={...k,actual_hours:k.actual_hours!==void 0?k.actual_hours:n==null?void 0:n.actual_hours},he=await Le.update(e,B);a(he),p(!1),await lt()}catch(B){console.error("Failed to update task:",B),d(B.message||"Failed to update task")}},rt=async()=>{if(_)try{const k={status:pe};pe==="approved"&&Y?k.review_notes=`Approved until ${Y}. ${Ue}`:pe==="rejected"&&(k.review_notes=Ue),await Le.reviewExtension(_.id.toString(),k),await lt(),K(!1),xe(null),Te("approved"),I(""),ce("")}catch(k){console.error("Failed to review extension:",k),d(k.message||"Failed to review extension")}},cs=(k,B)=>{xe(k),Te(B),I(""),ce(B==="approved"?k.requested_due_date:""),K(!0)},Xe=async k=>{try{await Le.addRemark(e,k),await lt(),te(!1)}catch(B){console.error("Failed to add remark:",B),d(B.message||"Failed to add remark")}},Lt=async k=>{try{await Le.deleteRemark(k.toString()),await lt()}catch(B){console.error("Failed to delete remark:",B),d(B.message||"Failed to delete remark")}},F=k=>{Z(k),me("green"),_e(""),ve(!0)},X=async()=>{if(!(!We||!Re.trim()))try{await vr.add({team_member_id:We.id,task_id:parseInt(e),type:J,reason:Re.trim()});const k=await vr.getByTask(e);ue(k.data||k),ve(!1),Z(null),me("green"),_e("")}catch(k){console.error("Failed to add performance flag:",k)}},Ce=async k=>{try{await vr.delete(k.toString());const B=await vr.getByTask(e);ue(B.data||B)}catch(B){console.error("Failed to delete performance flag:",B)}},Nt=k=>{switch(k){case"not-started":return"default";case"in-progress":return"primary";case"under-review":return"warning";case"completed":return"success";case"blocked":return"danger";default:return"default"}},Ge=k=>{switch(k){case"low":return"default";case"medium":return"primary";case"high":return"warning";case"urgent":return"danger";default:return"default"}},Gt=k=>{switch(k){case"pending":return"warning";case"approved":return"success";case"rejected":return"danger";default:return"default"}},ft=k=>{switch(k){case"progress":return"success";case"issue":return"danger";case"update":return"primary";case"general":return"default";default:return"secondary"}},w=()=>{if(!(n!=null&&n.end_date))return!1;const k=new Date;k.setHours(0,0,0,0);const B=new Date(n.end_date);return B.setHours(0,0,0,0),B<k&&n.status!=="completed"};return l?t.jsx("div",{className:"p-6 space-y-6",children:t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Loading task details..."})]})})}):o||!n?t.jsx("div",{className:"p-6 space-y-6",children:t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsxs("div",{className:"text-center",children:[t.jsx(Wt,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),t.jsx("p",{className:"text-red-600 mb-4",children:o||"Task not found"}),t.jsx(D,{onClick:s,children:"Go Back"})]})})}):t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs(D,{variant:"ghost",onClick:s,children:[t.jsx(Jo,{className:"w-4 h-4 mr-2"}),"Back to Tasks"]}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:n.name}),t.jsxs("p",{className:"text-gray-600",children:[j==null?void 0:j.name,"  ",v==null?void 0:v.name]})]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(ee,{variant:Nt(n.status),children:n.status.replace("-"," ")}),t.jsx(ee,{variant:Ge(n.priority),children:n.priority}),w()&&t.jsxs(ee,{variant:"danger",children:[t.jsx(Wt,{className:"w-3 h-3 mr-1"}),"Overdue"]}),t.jsxs(D,{variant:"outline",size:"sm",onClick:()=>p(!0),children:[t.jsx(Ys,{className:"w-4 h-4 mr-2"}),"Edit Task"]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[t.jsxs(re,{children:[t.jsx(ze,{children:t.jsx(Fe,{children:"Task Overview"})}),t.jsxs(ne,{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Description"}),t.jsx("p",{className:"text-gray-700",children:n.description||"No description provided"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Progress"}),t.jsxs("div",{className:"space-y-2",children:[t.jsx($t,{value:n.progress}),t.jsxs("p",{className:"text-sm text-gray-600",children:[n.progress,"% complete"]})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Time Tracking"}),t.jsxs("div",{className:"space-y-1",children:[t.jsxs("p",{className:"text-sm text-gray-600",children:["Estimated: ",n.estimated_hours||0,"h"]}),t.jsxs("p",{className:"text-sm text-gray-600",children:["Actual: ",n.actual_hours||0,"h"]})]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Timeline"}),t.jsxs("div",{className:"space-y-1",children:[t.jsxs("p",{className:"text-sm text-gray-600",children:[t.jsx(Pt,{className:"w-3 h-3 inline mr-1"}),"Start: ",n.start_date?new Date(n.start_date).toLocaleDateString():"Not set"]}),t.jsxs("p",{className:"text-sm text-gray-600",children:[t.jsx(Pt,{className:"w-3 h-3 inline mr-1"}),"Due: ",n.end_date?new Date(n.end_date).toLocaleDateString():"Not set"]})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Project Info"}),t.jsxs("div",{className:"space-y-1",children:[t.jsxs("p",{className:"text-sm text-gray-600",children:[t.jsx(Ns,{className:"w-3 h-3 inline mr-1"}),"Project: ",(j==null?void 0:j.name)||"Unknown"]}),t.jsxs("p",{className:"text-sm text-gray-600",children:[t.jsx(Zn,{className:"w-3 h-3 inline mr-1"}),"Stage: ",(v==null?void 0:v.name)||"Unknown"]})]})]})]})]})]}),gt&&fe.length>0&&t.jsxs(re,{children:[t.jsx(ze,{children:t.jsxs(Fe,{className:"flex items-center",children:[t.jsx(_r,{className:"w-5 h-5 mr-2"}),"Extension Requests (",fe.filter(k=>k.status==="pending").length," pending)"]})}),t.jsx(ne,{children:t.jsx("div",{className:"space-y-4",children:fe.map(k=>t.jsx("div",{className:"border rounded-lg p-4",children:t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[t.jsx(ee,{variant:Gt(k.status),children:k.status}),t.jsxs("span",{className:"text-sm text-gray-600",children:["Requested by ",k.requester_name]})]}),t.jsx("p",{className:"text-sm text-gray-700 mb-2",children:k.reason}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-600",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Current Due:"})," ",new Date(k.current_due_date).toLocaleDateString()]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Requested Due:"})," ",new Date(k.requested_due_date).toLocaleDateString()]})]}),k.review_notes&&t.jsxs("div",{className:"mt-2 p-2 bg-gray-50 rounded text-sm",children:[t.jsx("span",{className:"font-medium",children:"Review Notes:"})," ",k.review_notes]})]}),k.status==="pending"&&t.jsxs("div",{className:"flex space-x-2",children:[t.jsxs(D,{size:"sm",variant:"outline",onClick:()=>cs(k,"approved"),className:"text-green-600 hover:text-green-700",children:[t.jsx(Xi,{className:"w-4 h-4 mr-1"}),"Approve"]}),t.jsxs(D,{size:"sm",variant:"outline",onClick:()=>cs(k,"rejected"),className:"text-red-600 hover:text-red-700",children:[t.jsx(Bp,{className:"w-4 h-4 mr-1"}),"Reject"]})]})]})},k.id))})})]}),t.jsxs(re,{children:[t.jsx(ze,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs(Fe,{className:"flex items-center",children:[t.jsx(Lm,{className:"w-5 h-5 mr-2"}),"Remarks (",P.length,")"]}),gt&&t.jsxs(D,{size:"sm",onClick:()=>te(!0),children:[t.jsx(ht,{className:"w-4 h-4 mr-1"}),"Add Remark"]})]})}),t.jsx(ne,{children:P.length>0?t.jsx("div",{className:"space-y-4",children:P.map(k=>t.jsxs("div",{className:"border rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-start justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(ee,{variant:ft(k.remark_type),children:k.remark_type}),k.is_private&&t.jsx(ee,{variant:"secondary",children:"Private"})]}),gt&&t.jsx(D,{size:"sm",variant:"ghost",onClick:()=>Lt(k.id),className:"text-red-600 hover:text-red-700",children:t.jsx(Ct,{className:"w-4 h-4"})})]}),t.jsx("p",{className:"text-gray-700 mb-2",children:k.remark}),t.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[t.jsxs("span",{children:["By ",k.user_name]}),t.jsx("span",{children:new Date(k.remark_date).toLocaleDateString()})]})]},k.id))}):t.jsx("p",{className:"text-gray-500 text-center py-4",children:"No remarks yet"})})]}),V&&t.jsxs(re,{children:[t.jsx(ze,{children:t.jsxs(Fe,{className:"flex items-center",children:[t.jsx(Xn,{className:"w-5 h-5 mr-2"}),"Educational Hierarchy"]})}),t.jsx(ne,{children:t.jsxs("div",{className:"space-y-3",children:[V.grade&&t.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-purple-50 rounded-lg",children:[t.jsx(Xn,{className:"w-5 h-5 text-purple-600"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:V.grade.name}),t.jsx("p",{className:"text-sm text-gray-600",children:"Grade"})]})]}),V.book&&t.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-blue-50 rounded-lg",children:[t.jsx(Tm,{className:"w-5 h-5 text-blue-600"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:V.book.name}),t.jsx("p",{className:"text-sm text-gray-600",children:"Book"})]})]}),V.unit&&t.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-green-50 rounded-lg",children:[t.jsx(Zn,{className:"w-5 h-5 text-green-600"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:V.unit.name}),t.jsx("p",{className:"text-sm text-gray-600",children:"Unit"})]})]}),V.lesson&&t.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-orange-50 rounded-lg",children:[t.jsx(Em,{className:"w-5 h-5 text-orange-600"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:V.lesson.name}),t.jsx("p",{className:"text-sm text-gray-600",children:"Lesson"})]})]})]})})]})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs(re,{children:[t.jsx(ze,{children:t.jsxs(Fe,{className:"flex items-center",children:[t.jsx(et,{className:"w-5 h-5 mr-2"}),"Assignees (",M.length,")"]})}),t.jsx(ne,{children:M.length>0?t.jsx("div",{className:"space-y-3",children:M.map(k=>{var B;return t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm font-medium",children:((B=k.name)==null?void 0:B.charAt(0))||"U"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:k.name}),t.jsx("p",{className:"text-sm text-gray-600",children:k.email})]})]}),gt&&t.jsxs(D,{size:"sm",variant:"outline",onClick:()=>F(k),className:"text-gray-600 hover:text-gray-800",children:[t.jsx(Ns,{className:"w-4 h-4 mr-1"}),"Flag"]})]},k.id)})}):t.jsx("p",{className:"text-gray-500 text-center py-4",children:"No assignees"})})]}),gt&&de.length>0&&t.jsxs(re,{children:[t.jsx(ze,{children:t.jsxs(Fe,{className:"flex items-center",children:[t.jsx(Ns,{className:"w-5 h-5 mr-2"}),"Performance Flags (",de.length,")"]})}),t.jsx(ne,{children:t.jsx("div",{className:"space-y-3",children:de.map(k=>t.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:`w-3 h-3 rounded-full ${k.type==="red"?"bg-red-500":k.type==="orange"?"bg-orange-500":k.type==="yellow"?"bg-yellow-500":"bg-green-500"}`}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:k.team_member_name}),t.jsx("p",{className:"text-sm text-gray-600",children:k.reason}),t.jsxs("p",{className:"text-xs text-gray-500",children:["Added by ",k.added_by_name," on ",new Date(k.created_at).toLocaleDateString()]})]})]}),t.jsx(D,{size:"sm",variant:"outline",onClick:()=>Ce(k.id),className:"text-red-600 hover:text-red-700",children:t.jsx(Ct,{className:"w-4 h-4"})})]},k.id))})})]}),t.jsxs(re,{children:[t.jsx(ze,{children:t.jsxs(Fe,{className:"flex items-center",children:[t.jsx(Ps,{className:"w-5 h-5 mr-2"}),"Statistics"]})}),t.jsxs(ne,{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Days Remaining"}),t.jsx("span",{className:"font-medium",children:n.end_date?Math.ceil((new Date(n.end_date).getTime()-new Date().getTime())/(1e3*60*60*24)):"No due date"})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Hours Remaining"}),t.jsxs("span",{className:"font-medium",children:[Math.max(0,(n.estimated_hours||0)-(n.actual_hours||0)),"h"]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Completion Rate"}),t.jsxs("span",{className:"font-medium",children:[n.progress,"%"]})]})]})]})]})]}),t.jsx(ul,{isOpen:m,onClose:()=>p(!1),onSubmit:Jt,users:h,teams:f,skills:A,projects:j?[j]:[],stages:v?[v]:[],grades:N,books:S,units:ae,lessons:W,editingTask:n}),t.jsx(st,{isOpen:G,onClose:()=>K(!1),title:`${pe==="approved"?"Approve":"Reject"} Extension Request`,children:t.jsxs("div",{className:"space-y-4",children:[_&&t.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[t.jsx("h4",{className:"font-medium mb-2",children:"Extension Details"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Requested by:"})," ",_.requester_name]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Reason:"})," ",_.reason]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Current due date:"})," ",new Date(_.current_due_date).toLocaleDateString()]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Requested due date:"})," ",new Date(_.requested_due_date).toLocaleDateString()]})]})]}),pe==="approved"&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Approved Until Date"}),t.jsx("input",{type:"date",value:Y,onChange:k=>ce(k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:_==null?void 0:_.current_due_date})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Review Notes"}),t.jsx("textarea",{value:Ue,onChange:k=>I(k.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:`Add notes for ${pe==="approved"?"approval":"rejection"}...`})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx(D,{variant:"outline",onClick:()=>K(!1),children:"Cancel"}),t.jsxs(D,{variant:pe==="approved"?"primary":"danger",onClick:rt,disabled:pe==="approved"&&!Y,children:[pe==="approved"?"Approve":"Reject"," Extension"]})]})]})}),t.jsx(st,{isOpen:le,onClose:()=>te(!1),title:"Add Remark",children:t.jsx(d0,{onSubmit:Xe,onCancel:()=>te(!1)})}),t.jsx(st,{isOpen:ye,onClose:()=>ve(!1),title:"Add Performance Flag",children:t.jsxs("div",{className:"space-y-4",children:[We&&t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Flagging:"}),t.jsx("p",{className:"font-medium",children:We.name}),t.jsx("p",{className:"text-sm text-gray-500",children:We.email})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Flag Type"}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:["green","yellow","orange","red"].map(k=>t.jsx("button",{type:"button",onClick:()=>me(k),className:`p-3 border rounded-lg text-left transition-colors ${J===k?k==="red"?"border-red-500 bg-red-50":k==="orange"?"border-orange-500 bg-orange-50":k==="yellow"?"border-yellow-500 bg-yellow-50":"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"}`,children:t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:`w-3 h-3 rounded-full ${k==="red"?"bg-red-500":k==="orange"?"bg-orange-500":k==="yellow"?"bg-yellow-500":"bg-green-500"}`}),t.jsx("span",{className:"capitalize font-medium",children:k})]})},k))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason"}),t.jsx("textarea",{value:Re,onChange:k=>_e(k.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter the reason for this performance flag..."})]}),t.jsxs("div",{className:"flex justify-end space-x-3",children:[t.jsx(D,{variant:"outline",onClick:()=>ve(!1),children:"Cancel"}),t.jsx(D,{variant:"primary",onClick:X,disabled:!Re.trim(),children:"Add Flag"})]})]})})]})}function d0({onSubmit:e,onCancel:s}){const[r,n]=u.useState(""),[a,l]=u.useState(new Date().toISOString().split("T")[0]),[i,o]=u.useState("general"),[d,m]=u.useState(!1),p=j=>{j.preventDefault(),r.trim()&&e({remark:r.trim(),remark_date:a,remark_type:i,is_private:d})};return t.jsxs("form",{onSubmit:p,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Remark"}),t.jsx("textarea",{value:r,onChange:j=>n(j.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your remark...",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),t.jsx("input",{type:"date",value:a,onChange:j=>l(j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type"}),t.jsxs("select",{value:i,onChange:j=>o(j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"general",children:"General"}),t.jsx("option",{value:"progress",children:"Progress"}),t.jsx("option",{value:"issue",children:"Issue"}),t.jsx("option",{value:"update",children:"Update"}),t.jsx("option",{value:"other",children:"Other"})]})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",id:"isPrivate",checked:d,onChange:j=>m(j.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),t.jsx("label",{htmlFor:"isPrivate",className:"ml-2 block text-sm text-gray-700",children:"Private remark (only visible to admins)"})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx(D,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),t.jsx(D,{type:"submit",disabled:!r.trim(),children:"Add Remark"})]})]})}function u0(){const{state:e,dispatch:s}=Ar(),[r,n]=u.useState(!1),[a,l]=u.useState(null),[i,o]=u.useState(null),[d,m]=u.useState(""),[p,j]=u.useState(""),[c,v]=u.useState("all"),[y,M]=u.useState("all"),[z,h]=u.useState("all"),[x,f]=u.useState("all"),[E,A]=u.useState("created_at"),[g,N]=u.useState("desc"),[b,S]=u.useState([]),[L,ae]=u.useState([]),[O,W]=u.useState([]),[T,V]=u.useState([]),[se,fe]=u.useState([]),[C,P]=u.useState([]),[U,G]=u.useState([]),[K,le]=u.useState([]),[te,_]=u.useState([]),[xe,pe]=u.useState([]),[Te,Ue]=u.useState(!0),[I,Y]=u.useState(null),[ce,de]=u.useState(!1),[ue,ye]=u.useState(1),[ve,We]=u.useState(1),[Z,J]=u.useState(0),[me,Re]=u.useState(20),[_e,gt]=u.useState([]);u.useEffect(()=>{(async()=>{var k,B;Ue(!0);try{const he=c==="overdue"||y!=="all"||z!=="all"||p,ge={sort:E,order:g};he?ge.all="true":(ge.page=ue,ge.limit=me),c!=="all"&&c!=="overdue"&&(ge.status=c),y!=="all"&&(ge.priority=y),x!=="all"&&(ge.project_id=x),z!=="all"&&(ge.assignee_id=z),p&&(ge.search=p),console.log(" Sending filters to API:",ge);const[Ne,it,ke,yt,Ze,ut,ot,nt,bt,es]=await Promise.all([Le.getAll(ge),Ee.getMembers(),Ee.getTeams(),Rt.getAll(),$e.getAll(),bs.getAll(),Ms.getAll(),Is.getAll(),As.getAll(),cr.getAll()]);Ne&&Ne.data?he?(S(Ne.data),J(Ne.data.length),We(Math.ceil(Ne.data.length/me))):(S(Ne.data),J(((k=Ne.pagination)==null?void 0:k.total)||0),We(((B=Ne.pagination)==null?void 0:B.pages)||1)):(S(Ne||[]),J((Ne==null?void 0:Ne.length)||0),We(1));try{const mt=await Le.getAll({all:"true"}),R=mt.data||mt||[];console.log(" All tasks for statistics:",R.length,R),gt(R)}catch(mt){console.warn("Failed to fetch all tasks for statistics:",mt),he&&Ne&&Ne.data?(console.log(" Using main fetch data for statistics"),gt(Ne.data)):(console.log(" Using total count for statistics instead of all tasks"),gt([]))}ae(it.data||it),W(ke.data||ke),V(yt.data||yt);const Hs=Ze&&Ze.data?Ze.data:Array.isArray(Ze)?Ze:[];fe(Hs),P(ut.data||ut),G(ot.data||ot),le(nt.data||nt),_(bt.data||bt),pe(es.data||es),Y(null)}catch(he){console.error("Failed to fetch task data:",he),Y(he.message||"Failed to load tasks")}finally{Ue(!1)}})()},[E,g,c,y,x,z,p,ue,me]),u.useEffect(()=>{const w=setTimeout(()=>j(d),250);return()=>clearTimeout(w)},[d]),u.useEffect(()=>{e.filters&&Object.keys(e.filters).length>0&&(e.filters.statuses&&v(e.filters.statuses.length===1?e.filters.statuses[0]:"all"),e.filters.teamMembers&&h(e.filters.teamMembers.length===1?e.filters.teamMembers[0]:"all"),e.filters.priority&&M(e.filters.priority),e.filters.overdue&&de(!0),setTimeout(()=>{s({type:"SET_FILTERS",payload:{}})},0))},[e.filters,s]),u.useEffect(()=>{ye(1)},[c,y,x,z,p]);const lt=w=>{const k=w.end_date||w.endDate;if(!k)return!1;const B=new Date;B.setHours(0,0,0,0);const he=new Date(k);return he.setHours(0,0,0,0),he<B&&w.status!=="completed"},Jt=w=>{const k=w.end_date||w.endDate;if(!k)return!1;const B=new Date;B.setHours(0,0,0,0);const he=new Date(k);return he.setHours(0,0,0,0),he.getTime()===B.getTime()&&w.status!=="completed"},rt=w=>{const k=w.end_date||w.endDate;if(!k)return!1;const B=new Date;B.setDate(B.getDate()+1),B.setHours(0,0,0,0);const he=new Date(k);return he.setHours(0,0,0,0),he.getTime()===B.getTime()&&w.status!=="completed"},cs=w=>{const k=w.end_date||w.endDate;if(!k)return!1;const B=new Date;B.setHours(0,0,0,0);const he=new Date;he.setDate(B.getDate()+7),he.setHours(0,0,0,0);const ge=new Date(k);return ge.setHours(0,0,0,0),ge>=B&&ge<=he&&w.status!=="completed"},Xe=c==="overdue"||y!=="all"||z!=="all"||p;let Lt=b.filter(w=>{var k,B,he,ge;return!((k=e.filters)!=null&&k.overdue&&!lt(w)||(B=e.filters)!=null&&B.dueToday&&!Jt(w)||(he=e.filters)!=null&&he.dueTomorrow&&!rt(w)||(ge=e.filters)!=null&&ge.dueThisWeek&&!cs(w)||ce&&!lt(w)||c==="overdue"&&!lt(w))});if(Xe&&Lt.length>0){const w=(ue-1)*me,k=w+me;Lt=Lt.slice(w,k)}const F=async w=>{var k,B,he,ge;try{if(a){let Ne="";if(w.gradeId){const Ze=U.find(ut=>ut.id===parseInt(w.gradeId||"0"));if(Ze&&(Ne=Ze.name,w.bookId)){const ut=K.find(ot=>ot.id===parseInt(w.bookId||"0"));if(ut&&(Ne+=` > ${ut.name}`,w.unitId)){const ot=te.find(nt=>nt.id===parseInt(w.unitId||"0"));if(ot&&(Ne+=` > ${ot.name}`,w.lessonId)){const nt=xe.find(bt=>bt.id===parseInt(w.lessonId||"0"));nt&&(Ne+=` > ${nt.name}`)}}}}const it={name:w.name,description:w.description,project_id:parseInt(w.projectId||"1"),category_stage_id:parseInt(w.stageId||""),status:w.status,priority:w.priority,start_date:w.startDate,end_date:w.endDate,estimated_hours:parseInt(String(w.estimatedHours||0)),actual_hours:parseInt(String(w.actualHours||0)),assignees:w.assignees||[],skills:w.skills,grade_id:w.gradeId?parseInt(w.gradeId):null,book_id:w.bookId?parseInt(w.bookId):null,unit_id:w.unitId?parseInt(w.unitId):null,lesson_id:w.lessonId?parseInt(w.lessonId):null,component_path:Ne};console.log(" Updating task with hierarchy in TaskManager:",{taskId:a.id,grade_id:it.grade_id,book_id:it.book_id,unit_id:it.unit_id,lesson_id:it.lesson_id,component_path:it.component_path}),await Le.update(a.id,it);const ke={sort:E,order:g,page:ue,limit:me};c!=="all"&&(ke.status=c),y!=="all"&&(ke.priority=y),x!=="all"&&(ke.project_id=x),z!=="all"&&(ke.assignee_id=z),p&&(ke.search=p);const yt=await Le.getAll(ke);yt&&yt.data&&(S(yt.data),J(((k=yt.pagination)==null?void 0:k.total)||0),We(((B=yt.pagination)==null?void 0:B.pages)||1))}else{let Ne="";if(w.gradeId){const ot=U.find(nt=>nt.id===parseInt(w.gradeId||"0"));if(ot&&(Ne=ot.name,w.bookId)){const nt=K.find(bt=>bt.id===parseInt(w.bookId||"0"));if(nt&&(Ne+=` > ${nt.name}`,w.unitId)){const bt=te.find(es=>es.id===parseInt(w.unitId||"0"));if(bt&&(Ne+=` > ${bt.name}`,w.lessonId)){const es=xe.find(Hs=>Hs.id===parseInt(w.lessonId||"0"));es&&(Ne+=` > ${es.name}`)}}}}const it=(w.skills||[]).map(ot=>{const nt=C.find(bt=>bt.name===ot);return nt?nt.id:null}).filter(ot=>ot!==null),ke={name:w.name||"",description:w.description||"",project_id:parseInt(w.projectId||"1"),category_stage_id:parseInt(w.stageId||""),status:w.status||"not-started",priority:w.priority||"medium",start_date:w.startDate||new Date().toISOString().split("T")[0],end_date:w.endDate||new Date(Date.now()+7*24*60*60*1e3).toISOString().split("T")[0],estimated_hours:w.estimatedHours||8,assignees:w.assignees||[],skills:it,component_path:Ne,grade_id:w.gradeId?parseInt(w.gradeId):null,book_id:w.bookId?parseInt(w.bookId):null,unit_id:w.unitId?parseInt(w.unitId):null,lesson_id:w.lessonId?parseInt(w.lessonId):null};console.log(" Creating task with data:",ke),console.log(" Educational hierarchy IDs being sent:",{grade_id:ke.grade_id,book_id:ke.book_id,unit_id:ke.unit_id,lesson_id:ke.lesson_id,component_path:ke.component_path});const yt=await Le.create(ke),Ze={sort:E,order:g,page:ue,limit:me};c!=="all"&&(Ze.status=c),y!=="all"&&(Ze.priority=y),x!=="all"&&(Ze.project_id=x),z!=="all"&&(Ze.assignee_id=z),p&&(Ze.search=p);const ut=await Le.getAll(Ze);ut&&ut.data&&(S(ut.data),J(((he=ut.pagination)==null?void 0:he.total)||0),We(((ge=ut.pagination)==null?void 0:ge.pages)||1)),console.log(" Task created successfully:",yt)}n(!1),l(null)}catch(Ne){console.error(" Failed to save task:",Ne),Y("Failed to save task")}},X=w=>{switch(w){case"not-started":return"default";case"in-progress":return"primary";case"under-review":return"warning";case"completed":return"success";case"blocked":return"danger";default:return"default"}},Ce=w=>{switch(w){case"low":return"default";case"medium":return"primary";case"high":return"warning";case"urgent":return"danger";default:return"default"}},Nt=w=>{l(w),n(!0)},Ge=w=>{E===w?N(g==="asc"?"desc":"asc"):(A(w),N("desc"))},Gt=async w=>{var k,B;if(confirm(`Are you sure you want to delete the task "${w.name}"? This action cannot be undone.`))try{Y(null),await Le.delete(w.id);const he={sort:E,order:g,page:ue,limit:me};c!=="all"&&(he.status=c),y!=="all"&&(he.priority=y),x!=="all"&&(he.project_id=x),z!=="all"&&(he.assignee_id=z),p&&(he.search=p);const ge=await Le.getAll(he);ge&&ge.data&&(S(ge.data),J(((k=ge.pagination)==null?void 0:k.total)||0),We(((B=ge.pagination)==null?void 0:B.pages)||1)),console.log(" Task deleted successfully:",w.name)}catch(he){console.error(" Delete task error:",he),Y(he.message||"Failed to delete task")}},ft=(()=>{if(_e.length>0)return{total:Z,notStarted:_e.filter(w=>w.status==="not-started").length,inProgress:_e.filter(w=>w.status==="in-progress").length,underReview:_e.filter(w=>w.status==="under-review").length,completed:_e.filter(w=>w.status==="completed").length,overdue:_e.filter(w=>{const k=w.end_date||w.endDate;if(!k||w.status==="completed")return!1;const B=new Date;B.setHours(0,0,0,0);const he=new Date(k);return he.setHours(0,0,0,0),he<B}).length};{const w={notStarted:b.filter(B=>B.status==="not-started").length,inProgress:b.filter(B=>B.status==="in-progress").length,underReview:b.filter(B=>B.status==="under-review").length,completed:b.filter(B=>B.status==="completed").length,overdue:b.filter(B=>{const he=B.end_date||B.endDate;if(!he||B.status==="completed")return!1;const ge=new Date;ge.setHours(0,0,0,0);const Ne=new Date(he);return Ne.setHours(0,0,0,0),Ne<ge}).length},k=b.length;if(k>0&&Z>0){const B=Z/k;return{total:Z,notStarted:Math.round(w.notStarted*B),inProgress:Math.round(w.inProgress*B),underReview:Math.round(w.underReview*B),completed:Math.round(w.completed*B),overdue:Math.round(w.overdue*B)}}else return{total:Z,notStarted:0,inProgress:0,underReview:0,completed:0,overdue:0}}})();return console.log(" Task Statistics:",{totalTasks:Z,allTasksLength:_e.length,taskStats:ft,method:_e.length>0?"using all tasks":"using estimated statistics",sampleTasks:_e.length>0?_e.slice(0,3).map(w=>({id:w.id,name:w.name,status:w.status,end_date:w.end_date})):b.slice(0,3).map(w=>({id:w.id,name:w.name,status:w.status,end_date:w.end_date})),statusCounts:_e.length>0?_e.reduce((w,k)=>(w[k.status]=(w[k.status]||0)+1,w),{}):b.reduce((w,k)=>(w[k.status]=(w[k.status]||0)+1,w),{})}),i?t.jsx($m,{taskId:i,onBack:()=>o(null)}):Te?t.jsx("div",{className:"p-6 space-y-6",children:t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-lg font-medium text-gray-900 mb-2",children:"Loading tasks..."}),t.jsx("div",{className:"text-gray-500",children:"Please wait while we fetch your tasks"})]})})}):I?t.jsx("div",{className:"p-6 space-y-6",children:t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-lg font-medium text-red-600 mb-2",children:"Failed to load tasks"}),t.jsx("div",{className:"text-gray-500 mb-4",children:I}),t.jsx(D,{onClick:()=>window.location.reload(),children:"Retry"})]})})}):t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsx("div",{className:"relative",children:t.jsx("div",{className:"rounded-2xl bg-gradient-to-r from-indigo-600 via-blue-600 to-cyan-500 text-white p-6 shadow-lg",children:t.jsxs("div",{className:"flex items-center justify-between gap-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Task Management"}),t.jsx("p",{className:"text-white/80",children:"Track and manage all project tasks"})]}),t.jsx(D,{icon:t.jsx(ht,{className:"w-4 h-4"}),onClick:()=>{l(null),n(!0)},children:"Create Task"})]})})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-6",children:[t.jsx(re,{children:t.jsx(ne,{className:"p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"p-2 rounded-lg bg-gray-50",children:t.jsx(Ot,{className:"w-6 h-6 text-gray-600"})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Tasks"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:ft.total})]})]})})}),t.jsx(re,{children:t.jsx(ne,{className:"p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"p-2 rounded-lg bg-blue-50",children:t.jsx(_r,{className:"w-6 h-6 text-blue-600"})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"In Progress"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:ft.inProgress})]})]})})}),t.jsx(re,{children:t.jsx(ne,{className:"p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"p-2 rounded-lg bg-green-50",children:t.jsx(Ot,{className:"w-6 h-6 text-green-600"})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Completed"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:ft.completed})]})]})})}),t.jsx(re,{children:t.jsx(ne,{className:"p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"p-2 rounded-lg bg-orange-50",children:t.jsx(_r,{className:"w-6 h-6 text-orange-600"})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Not Started"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:ft.notStarted})]})]})})}),t.jsx(re,{children:t.jsx(ne,{className:"p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"p-2 rounded-lg bg-yellow-50",children:t.jsx(_r,{className:"w-6 h-6 text-yellow-600"})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Under Review"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:ft.underReview})]})]})})}),t.jsx(re,{className:`${ce?"ring-2 ring-red-300":""} cursor-pointer hover:shadow-md`,onClick:()=>de(w=>!w),children:t.jsx(ne,{className:"p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"p-2 rounded-lg bg-red-50",children:t.jsx(Wt,{className:"w-6 h-6 text-red-600"})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Overdue"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:ft.overdue})]})]})})})]}),t.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:t.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx(Tl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),t.jsx("input",{type:"text",placeholder:"Search tasks...",value:d,onChange:w=>m(w.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("select",{value:c,onChange:w=>v(w.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[t.jsx("option",{value:"all",children:"All Status"}),t.jsx("option",{value:"not-started",children:"Not Started"}),t.jsx("option",{value:"in-progress",children:"In Progress"}),t.jsx("option",{value:"under-review",children:"Under Review"}),t.jsx("option",{value:"completed",children:"Completed"}),t.jsx("option",{value:"blocked",children:"Blocked"}),t.jsx("option",{value:"overdue",children:"Overdue"})]}),t.jsxs("select",{value:y,onChange:w=>M(w.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[t.jsx("option",{value:"all",children:"All Priority"}),t.jsx("option",{value:"low",children:"Low"}),t.jsx("option",{value:"medium",children:"Medium"}),t.jsx("option",{value:"high",children:"High"}),t.jsx("option",{value:"urgent",children:"Urgent"})]}),t.jsxs("select",{value:x,onChange:w=>f(w.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[t.jsx("option",{value:"all",children:"All Projects"}),se.map(w=>t.jsx("option",{value:w.id,children:w.name},w.id))]}),t.jsxs("select",{value:z,onChange:w=>h(w.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[t.jsx("option",{value:"all",children:"All Assignees"}),t.jsx("option",{value:"none",children:"No Assignees"}),L.map(w=>t.jsx("option",{value:w.id,children:w.name},w.id))]})]})}),t.jsx(re,{children:t.jsxs(ne,{className:"p-0",children:[t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Ge("name"),children:t.jsxs("div",{className:"flex items-center",children:["Task Name",E==="name"&&t.jsx("span",{className:"ml-1 text-blue-600",children:g==="asc"?"":""})]})}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Project"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stage"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Ge("status"),children:t.jsxs("div",{className:"flex items-center",children:["Status",E==="status"&&t.jsx("span",{className:"ml-1 text-blue-600",children:g==="asc"?"":""})]})}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Ge("priority"),children:t.jsxs("div",{className:"flex items-center",children:["Priority",E==="priority"&&t.jsx("span",{className:"ml-1 text-blue-600",children:g==="asc"?"":""})]})}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Ge("assignees"),children:t.jsxs("div",{className:"flex items-center",children:["Assignees",E==="assignees"&&t.jsx("span",{className:"ml-1 text-blue-600",children:g==="asc"?"":""})]})}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Ge("end_date"),children:t.jsxs("div",{className:"flex items-center",children:["Due Date",E==="end_date"&&t.jsx("span",{className:"ml-1 text-blue-600",children:g==="asc"?"":""})]})}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Ge("progress"),children:t.jsxs("div",{className:"flex items-center",children:["Progress",E==="progress"&&t.jsx("span",{className:"ml-1 text-blue-600",children:g==="asc"?"":""})]})})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Lt.map((w,k)=>{const B=L.filter(ke=>w.assignees&&w.assignees.includes(ke.id));O.filter(ke=>w.teamAssignees&&w.teamAssignees.includes(ke.id));const he=lt(w),ge=w.project_id||w.projectId,Ne=se.find(ke=>{const yt=typeof ke.id=="string"?parseInt(ke.id):ke.id,Ze=typeof ge=="string"?parseInt(ge):ge;return yt===Ze}),it=w.stage_name;return t.jsxs("tr",{className:`hover:bg-gray-50 ${he?"bg-red-50":""}`,children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{children:[t.jsxs("div",{className:"text-sm font-medium text-gray-900 flex items-center",children:[w.name,he&&t.jsx(Wt,{className:"w-4 h-4 text-red-500 ml-2"})]}),t.jsxs("div",{className:"text-sm text-gray-500",children:[w.component_path&&t.jsxs("div",{className:"text-xs text-purple-600 mt-1 bg-purple-100 p-1 rounded-md inline-block",children:[" ",w.component_path]}),w.description&&t.jsx("div",{className:"mt-1",children:w.description})]})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"text-sm text-gray-900",children:Ne?t.jsx("div",{children:t.jsx("div",{className:"font-medium text-blue-600",children:Ne.name})}):t.jsx("span",{className:"text-gray-400",children:"Unknown Project"})})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"text-sm text-gray-900",children:it?t.jsx("div",{className:"font-medium text-green-600",children:it}):t.jsx("span",{className:"text-gray-400",children:"Unknown Stage"})})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx(ee,{variant:X(w.status),children:w.status.replace("-"," ")})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx(ee,{variant:Ce(w.priority),children:w.priority})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"space-y-1",children:[B.length>0&&t.jsxs("div",{className:"flex flex-wrap gap-1",children:[B.slice(0,3).map(ke=>t.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:ke.name},ke.id)),B.length>3&&t.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600",children:["+",B.length-3," more"]})]}),B.length===0&&t.jsx("span",{className:`text-xs ${z==="none"?"text-red-600 font-medium":"text-gray-400"}`,children:"No assignees"})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Pt,{className:"w-4 h-4 mr-1 text-gray-400"}),w.end_date||w.endDate?new Date(w.end_date||w.endDate||"").toLocaleDateString():"No due date"]})}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2 mr-2",children:t.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${zs(w.status)}%`}})}),t.jsxs("span",{className:"text-sm text-gray-600",children:[zs(w.status),"%"]})]}),t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(D,{variant:"ghost",size:"sm",onClick:ke=>{ke.stopPropagation(),o(w.id)},title:"View Details",children:t.jsx(pr,{className:"w-4 h-4"})}),t.jsx(D,{variant:"ghost",size:"sm",onClick:ke=>{ke.stopPropagation(),Nt(w)},title:"Edit Task",children:t.jsx(Ys,{className:"w-4 h-4"})}),t.jsx(D,{variant:"ghost",size:"sm",onClick:ke=>{ke.stopPropagation(),Gt(w)},title:"Delete Task",className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:t.jsx(Ct,{className:"w-4 h-4"})})]})]})]},w.id)})})]})}),ve>1&&t.jsx("div",{className:"px-6 py-4 border-t border-gray-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("div",{className:"flex items-center space-x-2",children:t.jsxs("span",{className:"text-sm text-gray-700",children:["Showing ",(ue-1)*me+1," to ",Math.min(ue*me,Z)," of ",Z," tasks"]})}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(D,{variant:"outline",size:"sm",onClick:()=>ye(1),disabled:ue===1,children:"First"}),t.jsx(D,{variant:"outline",size:"sm",onClick:()=>ye(ue-1),disabled:ue===1,children:"Previous"}),t.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,ve)},(w,k)=>{let B;return ve<=5||ue<=3?B=k+1:ue>=ve-2?B=ve-4+k:B=ue-2+k,t.jsx(D,{variant:ue===B?"primary":"outline",size:"sm",onClick:()=>ye(B),className:"w-8 h-8 p-0",children:B},B)})}),t.jsx(D,{variant:"outline",size:"sm",onClick:()=>ye(ue+1),disabled:ue===ve,children:"Next"}),t.jsx(D,{variant:"outline",size:"sm",onClick:()=>ye(ve),disabled:ue===ve,children:"Last"})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("span",{className:"text-sm text-gray-700",children:"Page size:"}),t.jsxs("select",{value:me,onChange:w=>{Re(Number(w.target.value)),ye(1)},className:"border border-gray-300 rounded px-2 py-1 text-sm",children:[t.jsx("option",{value:10,children:"10"}),t.jsx("option",{value:20,children:"20"}),t.jsx("option",{value:50,children:"50"}),t.jsx("option",{value:100,children:"100"})]})]})]})})]})}),t.jsx(ul,{isOpen:r,onClose:()=>{n(!1),l(null)},onSubmit:F,users:L,teams:O,skills:C,projects:se,stages:T,grades:U,books:K,units:te,lessons:xe,editingTask:a})]})}function ul({isOpen:e,onClose:s,onSubmit:r,users:n,teams:a,skills:l,projects:i,stages:o,grades:d,books:m,units:p,lessons:j,editingTask:c}){const[v,y]=u.useState({name:"",description:"",projectId:"",stageId:"",gradeId:"",bookId:"",unitId:"",lessonId:"",status:"not-started",assignees:[],teamAssignees:[],skills:[],priority:"medium",estimatedHours:8,actualHours:0,startDate:new Date().toISOString().split("T")[0],endDate:new Date(Date.now()+6048e5).toISOString().split("T")[0]}),[M,z]=u.useState([]),[h,x]=u.useState(!1),f=async b=>{if(!b){z([]);return}try{x(!0);const S=i.find(L=>L.id===parseInt(b)||L.id===b);if(S&&S.category_id){const L=await Rt.getByCategory(S.category_id);z(L),console.log(" Fetched stages for project category:",L)}else z([])}catch(S){console.error(" Failed to fetch project stages:",S),z([])}finally{x(!1)}};u.useEffect(()=>{v.projectId?f(v.projectId):z([])},[v.projectId]),u.useEffect(()=>{if(c){const b=Array.isArray(c.skills)?c.skills.map(L=>typeof L=="object"&&L.name?L.name:typeof L=="string"?L:"").filter(L=>L!==""):[],S=Array.isArray(c.assignees)?c.assignees.map(L=>typeof L=="object"&&L.id?L.id.toString():L.toString()):[];console.log(" Editing task assignees:",c.assignees),console.log(" Converted assignee IDs:",S),console.log(" Setting form data for editing task:",c),y({name:c.name,description:c.description||"",projectId:c.project_id||c.projectId||"",stageId:c.stage_id||c.stageId||"",gradeId:(c.grade_id||c.gradeId||"").toString(),bookId:(c.book_id||c.bookId||"").toString(),unitId:(c.unit_id||c.unitId||"").toString(),lessonId:(c.lesson_id||c.lessonId||"").toString(),status:c.status,assignees:S,teamAssignees:Array.isArray(c.teamAssignees)?c.teamAssignees.map(L=>L.toString()):[],skills:b,priority:c.priority,estimatedHours:c.estimated_hours||c.estimatedHours||8,actualHours:c.actual_hours||c.actualHours||0,startDate:c.start_date||c.startDate?new Date(c.start_date||c.startDate||"").toISOString().split("T")[0]:new Date().toISOString().split("T")[0],endDate:c.end_date||c.endDate?new Date(c.end_date||c.endDate||"").toISOString().split("T")[0]:new Date(Date.now()+7*24*60*60*1e3).toISOString().split("T")[0]})}else y({name:"",description:"",projectId:"",stageId:"",gradeId:"",bookId:"",unitId:"",lessonId:"",status:"not-started",assignees:[],teamAssignees:[],skills:[],priority:"medium",estimatedHours:8,actualHours:0,startDate:new Date().toISOString().split("T")[0],endDate:new Date(Date.now()+7*24*60*60*1e3).toISOString().split("T")[0]})},[c,e]);const E=b=>{var O;b.preventDefault(),zs(v.status);let S="";const L=i.find(W=>W.id===parseInt(v.projectId)||W.id===v.projectId);if(L&&v.gradeId){const W=(O=L.grades)==null?void 0:O.find(T=>T.id===v.gradeId);if(W&&(S=W.name,v.bookId)){const T=W.books.find(V=>V.id===v.bookId);if(T&&(S+=` > ${T.name}`,v.unitId)){const V=T.units.find(se=>se.id===v.unitId);if(V&&(S+=` > ${V.name}`,v.lessonId)){const se=V.lessons.find(fe=>fe.id===v.lessonId);se&&(S+=` > ${se.name}`)}}}}const ae=v.skills.map(W=>{const T=l.find(V=>V.name===W);return T?T.id:null}).filter(W=>W!==null);r({...v,skills:ae,componentPath:S,startDate:new Date(v.startDate),endDate:new Date(v.endDate)})},A=b=>{y(S=>({...S,assignees:S.assignees.includes(b)?S.assignees.filter(L=>L!==b):[...S.assignees,b]}))},g=i.find(b=>b.id===parseInt(v.projectId)||b.id===v.projectId),N=[];return g&&d.filter(S=>S.project_id===parseInt(g.id)).forEach(S=>{N.push({id:S.id,name:S.name,type:"grade",gradeId:S.id,bookId:null,unitId:null,lessonId:null}),m.filter(ae=>ae.grade_id===S.id).forEach(ae=>{N.push({id:`${S.id}-${ae.id}`,name:`${S.name} > ${ae.name}`,type:"book",gradeId:S.id,bookId:ae.id,unitId:null,lessonId:null}),p.filter(W=>W.book_id===ae.id).forEach(W=>{N.push({id:`${S.id}-${ae.id}-${W.id}`,name:`${S.name} > ${ae.name} > ${W.name}`,type:"unit",gradeId:S.id,bookId:ae.id,unitId:W.id,lessonId:null}),j.filter(V=>V.unit_id===W.id).forEach(V=>{N.push({id:`${S.id}-${ae.id}-${W.id}-${V.id}`,name:`${S.name} > ${ae.name} > ${W.name} > ${V.name}`,type:"lesson",gradeId:S.id,bookId:ae.id,unitId:W.id,lessonId:V.id})})})})}),t.jsx(st,{isOpen:e,onClose:s,title:c?`Edit Task: ${c.name}`:"Create New Task",size:"xl",children:t.jsxs("form",{onSubmit:E,className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Task Name"}),t.jsx("input",{type:"text",required:!0,value:v.name,onChange:b=>y({...v,name:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter task name"})]}),t.jsxs("div",{className:"col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),t.jsx("textarea",{value:v.description,onChange:b=>y({...v,description:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Task description"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project *"}),t.jsxs("select",{required:!0,value:v.projectId,onChange:b=>y({...v,projectId:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"",children:"Select Project"}),i.map(b=>t.jsx("option",{value:b.id,children:b.name},b.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stage *"}),t.jsxs("select",{required:!0,value:v.stageId,onChange:b=>y({...v,stageId:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:!v.projectId||h,children:[t.jsx("option",{value:"",children:h?"Loading stages...":"Select Stage"}),M.map(b=>t.jsxs("option",{value:b.id,children:[b.name," ",b.description&&`- ${b.description}`]},b.id))]}),!v.projectId&&t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Please select a project first to load available stages"}),v.projectId&&M.length===0&&!h&&t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"No stages found for this project's category"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Educational Hierarchy (Optional)"}),t.jsxs("select",{value:(()=>{const b=v.gradeId?parseInt(v.gradeId):null,S=v.bookId?parseInt(v.bookId):null,L=v.unitId?parseInt(v.unitId):null,ae=v.lessonId?parseInt(v.lessonId):null;console.log(" Educational hierarchy matching:",{formData:{gradeId:b,bookId:S,unitId:L,lessonId:ae},availableHierarchy:N.length});const O=N.find(W=>W.gradeId===b&&W.bookId===S&&W.unitId===L&&W.lessonId===ae);return console.log(" Matching hierarchy item:",O),O?O.id:""})(),onChange:b=>{const S=N.find(L=>L.id===b.target.value);y(S?{...v,gradeId:S.gradeId?S.gradeId.toString():"",bookId:S.bookId?S.bookId.toString():"",unitId:S.unitId?S.unitId.toString():"",lessonId:S.lessonId?S.lessonId.toString():""}:{...v,gradeId:"",bookId:"",unitId:"",lessonId:""})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:!v.projectId,children:[t.jsx("option",{value:"",children:"Project Level Task"}),N.map(b=>t.jsxs("option",{value:b.id,children:[b.name," (",b.type,")"]},b.id))]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select a specific educational hierarchy item to assign this task to a particular grade, book, unit, or lesson"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),t.jsxs("select",{value:v.status,onChange:b=>{const S=b.target.value;y({...v,status:S})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"not-started",children:"Not Started"}),t.jsx("option",{value:"in-progress",children:"In Progress"}),t.jsx("option",{value:"under-review",children:"Under Review"}),t.jsx("option",{value:"completed",children:"Completed"}),t.jsx("option",{value:"blocked",children:"Blocked"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),t.jsxs("select",{value:v.priority,onChange:b=>y({...v,priority:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"low",children:"Low"}),t.jsx("option",{value:"medium",children:"Medium"}),t.jsx("option",{value:"high",children:"High"}),t.jsx("option",{value:"urgent",children:"Urgent"})]})]}),t.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Progress (Auto-calculated)"}),t.jsxs("span",{className:"text-sm text-blue-600 font-semibold",children:[zs(v.status),"%"]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${zs(v.status)}%`}})}),t.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Progress is automatically calculated based on task status"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estimated Hours"}),t.jsx("input",{type:"number",min:"1",value:v.estimatedHours,onChange:b=>y({...v,estimatedHours:parseInt(b.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),c&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Actual Hours"}),t.jsx("input",{type:"number",min:"0",value:v.actualHours,onChange:b=>y({...v,actualHours:parseInt(b.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),t.jsx("input",{type:"date",value:v.startDate,onChange:b=>y({...v,startDate:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Due Date"}),t.jsx("input",{type:"date",value:v.endDate,onChange:b=>y({...v,endDate:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Individual Assignees"}),t.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-32 overflow-y-auto border border-gray-300 rounded-lg p-2",children:n&&n.length>0?n.map(b=>{const S=v.assignees.includes(b.id.toString());return t.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:S,onChange:()=>A(b.id.toString()),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:b.name})]},b.id)}):t.jsx("p",{className:"text-gray-500 text-sm",children:"No team members available"})})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx(D,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),t.jsx(D,{type:"submit",children:c?"Update Task":"Create Task"})]})]})})}function m0({isOpen:e,onClose:s,onSubmit:r,project:n,categories:a}){const[l,i]=u.useState({name:"",description:"",category_id:null,current_stage_id:null,status:"planning",start_date:"",end_date:""}),[o,d]=u.useState([]),[m,p]=u.useState(!1);u.useEffect(()=>{if(n&&e){const y=x=>{if(!x)return new Date().toISOString().split("T")[0];try{const f=new Date(x);return isNaN(f.getTime())?new Date().toISOString().split("T")[0]:f.toISOString().split("T")[0]}catch(f){return console.warn("Invalid date value:",x,f),new Date().toISOString().split("T")[0]}},M=n.start_date,z=n.end_date,h={name:n.name||"",description:n.description||"",category_id:n.category_id||null,current_stage_id:n.current_stage_id||null,status:n.status||"planning",start_date:y(M),end_date:y(z)};i(h),n.category_id&&j(n.category_id)}},[n,e]),u.useEffect(()=>{o.length>0&&n.current_stage_id&&o.find(M=>M.id===n.current_stage_id)&&i(M=>({...M,current_stage_id:n.current_stage_id||null}))},[o,n.current_stage_id]);const j=async y=>{p(!0);try{const M=await Rt.getByCategory(y);d(M),n.current_stage_id?M.find(h=>h.id===n.current_stage_id)||console.warn(" Current stage ID not found in loaded stages:",n.current_stage_id):console.log(" No current_stage_id set for this project")}catch(M){console.error("Failed to load stages for category:",M),d([])}finally{p(!1)}},c=async y=>{if(i(M=>({...M,category_id:y,current_stage_id:null})),y){p(!0);try{const M=await Rt.getByCategory(y);d(M)}catch(M){console.error("Failed to load stages for category:",M),d([])}finally{p(!1)}}else d([])},v=y=>{y.preventDefault(),r({...l,start_date:l.start_date,end_date:l.end_date,currentStageId:l.current_stage_id||void 0})};return t.jsx(st,{isOpen:e,onClose:s,title:"Edit Project",size:"lg",children:t.jsxs("form",{onSubmit:v,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Name"}),t.jsx("input",{type:"text",required:!0,value:l.name,onChange:y=>i({...l,name:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter project name"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),t.jsx("textarea",{value:l.description,onChange:y=>i({...l,description:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Project description"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),t.jsxs("select",{value:l.category_id||"",onChange:y=>c(y.target.value?parseInt(y.target.value):null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"",children:"Select a category"}),a.map(y=>t.jsx("option",{value:y.id,children:y.name},y.id))]})]}),l.category_id&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Stage"}),m?t.jsxs("div",{className:"flex items-center justify-center py-4",children:[t.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),t.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Loading stages..."})]}):o.length>0?t.jsxs("select",{value:l.current_stage_id||"",onChange:y=>i({...l,current_stage_id:y.target.value?parseInt(y.target.value):null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"",children:"Select a stage"}),o.map(y=>t.jsxs("option",{value:y.id,children:[y.name," - ",y.description]},y.id))]}):t.jsx("div",{className:"text-sm text-gray-500 py-2",children:"No stages available for this category."})]}),t.jsx("div",{className:"grid grid-cols-2 gap-4",children:t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),t.jsxs("select",{value:l.status,onChange:y=>i({...l,status:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"planning",children:"Planning"}),t.jsx("option",{value:"active",children:"Active"}),t.jsx("option",{value:"on-hold",children:"On Hold"}),t.jsx("option",{value:"completed",children:"Completed"}),t.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),t.jsx("input",{type:"date",value:l.start_date,onChange:y=>i({...l,start_date:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),t.jsx("input",{type:"date",value:l.end_date,onChange:y=>i({...l,end_date:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx(D,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),t.jsx(D,{type:"submit",children:"Update Project"})]})]})})}const x0=({projectId:e})=>{const[s,r]=u.useState([]),[n,a]=u.useState([]),[l,i]=u.useState([]),[o,d]=u.useState([]),[m,p]=u.useState(!0),[j,c]=u.useState(null),[v,y]=u.useState(new Set);u.useState(new Set);const[M,z]=u.useState(!1),[h,x]=u.useState(!1),[f,E]=u.useState(!1),[A,g]=u.useState(!1),[N,b]=u.useState(null),[S,L]=u.useState(null),[ae,O]=u.useState(null),[W,T]=u.useState(null),[V,se]=u.useState(null),[fe,C]=u.useState(null),[P,U]=u.useState(null);u.useEffect(()=>{G()},[e]);const G=async()=>{try{p(!0),c(null);const[Z,J,me,Re]=await Promise.all([Ms.getByProject(e),Is.getAll(),As.getAll(),cr.getAll()]);r(Z||[]);const _e=new Set((Z||[]).map(Xe=>Xe.id)),gt=(J||[]).filter(Xe=>_e.has(Xe.grade_id));a(gt);const lt=new Set(gt.map(Xe=>Xe.id)),Jt=(me||[]).filter(Xe=>lt.has(Xe.book_id));i(Jt);const rt=new Set(Jt.map(Xe=>Xe.id)),cs=(Re||[]).filter(Xe=>rt.has(Xe.unit_id));d(cs)}catch(Z){console.error("Error loading educational hierarchy:",Z),c(Z.message||"Failed to load educational hierarchy")}finally{p(!1)}},K=Z=>{const J=new Set(v);J.has(Z)?J.delete(Z):J.add(Z),y(J)},le=async Z=>{try{const J=await Ms.create({...Z,project_id:e});r([...s,J]),z(!1)}catch(J){c(J.message||"Failed to create grade")}},te=async Z=>{if(N)try{const J=await Ms.update(N.id,Z);r(s.map(me=>me.id===N.id?J:me)),z(!1),b(null)}catch(J){c(J.message||"Failed to update grade")}},_=async Z=>{if(confirm("Are you sure you want to delete this grade? This will also delete all associated books, units, and lessons."))try{await Ms.delete(Z),r(s.filter(J=>J.id!==Z)),a(n.filter(J=>J.grade_id!==Z)),i(l.filter(J=>{const me=n.find(Re=>Re.id===J.book_id);return me&&me.grade_id!==Z})),d(o.filter(J=>{const me=l.find(_e=>_e.id===J.unit_id),Re=n.find(_e=>_e.id===(me==null?void 0:me.book_id));return Re&&Re.grade_id!==Z}))}catch(J){c(J.message||"Failed to delete grade")}},xe=async Z=>{if(V)try{const J=await Is.create({...Z,grade_id:V});a([...n,J]),x(!1),se(null)}catch(J){c(J.message||"Failed to create book")}},pe=async Z=>{if(S)try{const J=await Is.update(S.id,Z);a(n.map(me=>me.id===S.id?J:me)),x(!1),L(null)}catch(J){c(J.message||"Failed to update book")}},Te=async Z=>{if(confirm("Are you sure you want to delete this book? This will also delete all associated units and lessons."))try{await Is.delete(Z),a(n.filter(J=>J.id!==Z)),i(l.filter(J=>J.book_id!==Z)),d(o.filter(J=>{const me=l.find(Re=>Re.id===J.unit_id);return me&&me.book_id!==Z}))}catch(J){c(J.message||"Failed to delete book")}},Ue=async Z=>{if(fe)try{const J=await As.create({...Z,book_id:fe});i([...l,J]),E(!1),C(null)}catch(J){c(J.message||"Failed to create unit")}},I=async Z=>{if(ae)try{const J=await As.update(ae.id,Z);i(l.map(me=>me.id===ae.id?J:me)),E(!1),O(null)}catch(J){c(J.message||"Failed to update unit")}},Y=async Z=>{if(confirm("Are you sure you want to delete this unit? This will also delete all associated lessons."))try{await As.delete(Z),i(l.filter(J=>J.id!==Z)),d(o.filter(J=>J.unit_id!==Z))}catch(J){c(J.message||"Failed to delete unit")}},ce=async Z=>{if(P)try{const J=await cr.create({...Z,unit_id:P});d([...o,J]),g(!1),U(null)}catch(J){c(J.message||"Failed to create lesson")}},de=async Z=>{if(W)try{const J=await cr.update(W.id,Z);d(o.map(me=>me.id===W.id?J:me)),g(!1),T(null)}catch(J){c(J.message||"Failed to update lesson")}},ue=Z=>{C(Z),O(null),E(!0)},ye=Z=>{U(Z),T(null),g(!0)},ve=Z=>{L(Z),x(!0)},We=Z=>{O(Z),E(!0)};return m?t.jsx("div",{className:"flex items-center justify-center p-8",children:t.jsx("div",{className:"text-lg",children:"Loading educational hierarchy..."})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Educational Hierarchy"}),t.jsx("p",{className:"text-gray-600",children:"Manage grades, books, units, and lessons for this project"})]}),t.jsxs(D,{onClick:()=>{b(null),z(!0)},className:"flex items-center space-x-2",children:[t.jsx(ht,{className:"w-4 h-4"}),t.jsx("span",{children:"Add Grade"})]})]}),j&&t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:t.jsx("p",{className:"text-red-800",children:j})}),t.jsx("div",{className:"space-y-4",children:!s||s.length===0?t.jsx(re,{children:t.jsxs(ne,{className:"p-8 text-center",children:[t.jsx(Xn,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Grades Yet"}),t.jsx("p",{className:"text-gray-600 mb-4",children:"Start by creating the first grade for this project."}),t.jsx(D,{onClick:()=>{b(null),z(!0)},children:"Create First Grade"})]})}):(s||[]).map(Z=>t.jsx(h0,{grade:Z,books:(n||[]).filter(J=>J.grade_id===Z.id),units:l||[],lessons:o||[],expanded:v.has(Z.id),onToggleExpansion:()=>K(Z.id),onEdit:()=>{b(Z),z(!0)},onDelete:()=>_(Z.id),onAddBook:()=>{se(Z.id),L(null),x(!0)},onAddUnit:ue,onEditBook:ve,onDeleteBook:Te,onAddLesson:ye,onEditUnit:We,onDeleteUnit:Y},Z.id))}),t.jsx(f0,{isOpen:M,onClose:()=>{z(!1),b(null)},grade:N,onSubmit:N?te:le}),t.jsx(y0,{isOpen:h,onClose:()=>{x(!1),L(null),se(null)},book:S,onSubmit:S?pe:xe}),t.jsx(v0,{isOpen:f,onClose:()=>{E(!1),O(null),C(null)},unit:ae,onSubmit:ae?I:Ue}),t.jsx(j0,{isOpen:A,onClose:()=>{g(!1),T(null),U(null)},lesson:W,onSubmit:W?de:ce})]})},h0=({grade:e,books:s,units:r,lessons:n,expanded:a,onToggleExpansion:l,onEdit:i,onDelete:o,onAddBook:d,onAddUnit:m,onEditBook:p,onDeleteBook:j,onAddLesson:c,onEditUnit:v,onDeleteUnit:y})=>t.jsx(re,{children:t.jsxs(ne,{className:"p-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("button",{onClick:l,className:"p-1 hover:bg-gray-100 rounded",children:a?t.jsx(ec,{className:"w-4 h-4"}):t.jsx(js,{className:"w-4 h-4"})}),t.jsx(Xn,{className:"w-5 h-5 text-blue-600"}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-medium text-gray-900",children:e.name}),e.description&&t.jsx("p",{className:"text-sm text-gray-600",children:e.description})]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsxs(ee,{variant:"secondary",children:[typeof e.weight=="number"?e.weight.toFixed(1):"0.0","%"]}),t.jsxs(ee,{variant:"secondary",children:[(s||[]).length," books"]}),t.jsxs("div",{className:"flex space-x-1",children:[t.jsx(D,{size:"sm",variant:"outline",onClick:i,children:t.jsx(la,{className:"w-3 h-3"})}),t.jsx(D,{size:"sm",variant:"outline",onClick:d,children:t.jsx(ht,{className:"w-3 h-3"})}),t.jsx(D,{size:"sm",variant:"outline",onClick:o,children:t.jsx(Ct,{className:"w-3 h-3"})})]})]})]}),a&&t.jsx("div",{className:"mt-4 border-t pt-4",children:!s||s.length===0?t.jsxs("div",{className:"text-center py-4",children:[t.jsx("p",{className:"text-gray-600 mb-2",children:"No books in this grade"}),t.jsx(D,{size:"sm",onClick:d,children:"Add Book"})]}):t.jsx("div",{className:"space-y-3",children:s.map(M=>t.jsx(p0,{book:M,units:(r||[]).filter(z=>z.book_id===M.id),lessons:n||[],onAddUnit:m,onEditBook:p,onDeleteBook:j,onAddLesson:c,onEditUnit:v,onDeleteUnit:y},M.id))})})]})}),p0=({book:e,units:s,lessons:r,onAddUnit:n,onEditBook:a,onDeleteBook:l,onAddLesson:i,onEditUnit:o,onDeleteUnit:d})=>{const[m,p]=u.useState(!1);return t.jsxs("div",{className:"ml-6 border-l-2 border-gray-200 pl-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("button",{onClick:()=>p(!m),className:"p-1 hover:bg-gray-100 rounded",children:m?t.jsx(ec,{className:"w-3 h-3"}):t.jsx(js,{className:"w-3 h-3"})}),t.jsx(Tm,{className:"w-4 h-4 text-green-600"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900",children:e.name}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(ee,{variant:"secondary",children:e.type}),t.jsxs(ee,{variant:"secondary",children:[typeof e.weight=="number"?e.weight.toFixed(1):"0.0","%"]})]})]})]}),t.jsxs("div",{className:"flex space-x-1",children:[t.jsx(D,{size:"sm",variant:"outline",onClick:()=>a(e),children:t.jsx(la,{className:"w-3 h-3"})}),t.jsx(D,{size:"sm",variant:"outline",onClick:()=>n(e.id),children:t.jsx(ht,{className:"w-3 h-3"})}),t.jsx(D,{size:"sm",variant:"outline",onClick:()=>l(e.id),children:t.jsx(Ct,{className:"w-3 h-3"})})]})]}),m&&t.jsx("div",{className:"mt-3 space-y-2",children:!s||s.length===0?t.jsxs("div",{className:"text-center py-2",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"No units in this book"}),t.jsx(D,{size:"sm",onClick:()=>n(e.id),children:"Add Unit"})]}):s.map(j=>t.jsx(g0,{unit:j,lessons:(r||[]).filter(c=>c.unit_id===j.id),onAddLesson:i,onEditUnit:o,onDeleteUnit:d},j.id))})]})},g0=({unit:e,lessons:s,onAddLesson:r,onEditUnit:n,onDeleteUnit:a})=>{const[l,i]=u.useState(!1);return t.jsxs("div",{className:"ml-6 border-l-2 border-gray-200 pl-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("button",{onClick:()=>i(!l),className:"p-1 hover:bg-gray-100 rounded",children:l?t.jsx(ec,{className:"w-3 h-3"}):t.jsx(js,{className:"w-3 h-3"})}),t.jsx(Zn,{className:"w-4 h-4 text-purple-600"}),t.jsxs("div",{children:[t.jsx("h5",{className:"font-medium text-gray-900",children:e.name}),t.jsxs(ee,{variant:"secondary",children:[typeof e.weight=="number"?e.weight.toFixed(1):"0.0","%"]})]})]}),t.jsxs("div",{className:"flex space-x-1",children:[t.jsx(D,{size:"sm",variant:"outline",onClick:()=>n(e),children:t.jsx(la,{className:"w-3 h-3"})}),t.jsx(D,{size:"sm",variant:"outline",onClick:()=>r(e.id),children:t.jsx(ht,{className:"w-3 h-3"})}),t.jsx(D,{size:"sm",variant:"outline",onClick:()=>a(e.id),children:t.jsx(Ct,{className:"w-3 h-3"})})]})]}),l&&t.jsx("div",{className:"mt-3 space-y-2",children:!s||s.length===0?t.jsxs("div",{className:"text-center py-2",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"No lessons in this unit"}),t.jsx(D,{size:"sm",onClick:()=>r(e.id),children:"Add Lesson"})]}):s.map(o=>t.jsxs("div",{className:"ml-6 flex items-center space-x-2",children:[t.jsx(Em,{className:"w-3 h-3 text-orange-600"}),t.jsx("span",{className:"text-sm text-gray-900",children:o.name}),t.jsxs(ee,{variant:"secondary",children:[typeof o.weight=="number"?o.weight.toFixed(1):"0.0","%"]})]},o.id))})]})},f0=({isOpen:e,onClose:s,grade:r,onSubmit:n})=>{const[a,l]=u.useState({name:(r==null?void 0:r.name)||"",description:(r==null?void 0:r.description)||"",weight:typeof(r==null?void 0:r.weight)=="number"?r.weight:0});u.useEffect(()=>{l(r?{name:r.name,description:r.description||"",weight:typeof r.weight=="number"?r.weight:0}:{name:"",description:"",weight:0})},[r]);const i=o=>{o.preventDefault(),n(a)};return t.jsx(st,{isOpen:e,onClose:s,title:r?"Edit Grade":"Create Grade",children:t.jsxs("form",{onSubmit:i,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),t.jsx("input",{type:"text",value:a.name,onChange:o=>l({...a,name:o.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),t.jsx("textarea",{value:a.description,onChange:o=>l({...a,description:o.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:3})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Weight (%)"}),t.jsx("input",{type:"number",step:"0.1",min:"0",max:"100",value:a.weight,onChange:o=>l({...a,weight:parseFloat(o.target.value)||0}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),t.jsxs("div",{className:"flex justify-end space-x-2",children:[t.jsx(D,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),t.jsx(D,{type:"submit",children:r?"Update":"Create"})]})]})})},y0=({isOpen:e,onClose:s,book:r,onSubmit:n})=>{const[a,l]=u.useState({name:(r==null?void 0:r.name)||"",type:(r==null?void 0:r.type)||"student",description:(r==null?void 0:r.description)||"",weight:typeof(r==null?void 0:r.weight)=="number"?r.weight:0});u.useEffect(()=>{l(r?{name:r.name,type:r.type,description:r.description||"",weight:typeof r.weight=="number"?r.weight:0}:{name:"",type:"student",description:"",weight:0})},[r]);const i=o=>{o.preventDefault(),n(a)};return t.jsx(st,{isOpen:e,onClose:s,title:r?"Edit Book":"Create Book",children:t.jsxs("form",{onSubmit:i,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),t.jsx("input",{type:"text",value:a.name,onChange:o=>l({...a,name:o.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Type"}),t.jsxs("select",{value:a.type,onChange:o=>l({...a,type:o.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[t.jsx("option",{value:"student",children:"Student Book"}),t.jsx("option",{value:"teacher",children:"Teacher Guide"}),t.jsx("option",{value:"practice",children:"Practice Book"}),t.jsx("option",{value:"digital",children:"Digital"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),t.jsx("textarea",{value:a.description,onChange:o=>l({...a,description:o.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:3})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Weight (%)"}),t.jsx("input",{type:"number",step:"0.1",min:"0",max:"100",value:a.weight,onChange:o=>l({...a,weight:parseFloat(o.target.value)||0}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),t.jsxs("div",{className:"flex justify-end space-x-2",children:[t.jsx(D,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),t.jsx(D,{type:"submit",children:r?"Update":"Create"})]})]})})},v0=({isOpen:e,onClose:s,unit:r,onSubmit:n})=>{const[a,l]=u.useState({name:(r==null?void 0:r.name)||"",description:(r==null?void 0:r.description)||"",weight:typeof(r==null?void 0:r.weight)=="number"?r.weight:0});u.useEffect(()=>{l(r?{name:r.name,description:r.description||"",weight:typeof r.weight=="number"?r.weight:0}:{name:"",description:"",weight:0})},[r]);const i=o=>{o.preventDefault(),n(a)};return t.jsx(st,{isOpen:e,onClose:s,title:r?"Edit Unit":"Create Unit",children:t.jsxs("form",{onSubmit:i,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),t.jsx("input",{type:"text",value:a.name,onChange:o=>l({...a,name:o.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),t.jsx("textarea",{value:a.description,onChange:o=>l({...a,description:o.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:3})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Weight (%)"}),t.jsx("input",{type:"number",step:"0.1",min:"0",max:"100",value:a.weight,onChange:o=>l({...a,weight:parseFloat(o.target.value)||0}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),t.jsxs("div",{className:"flex justify-end space-x-2",children:[t.jsx(D,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),t.jsx(D,{type:"submit",children:r?"Update":"Create"})]})]})})},j0=({isOpen:e,onClose:s,lesson:r,onSubmit:n})=>{const[a,l]=u.useState({name:(r==null?void 0:r.name)||"",description:(r==null?void 0:r.description)||"",weight:typeof(r==null?void 0:r.weight)=="number"?r.weight:0});u.useEffect(()=>{l(r?{name:r.name,description:r.description||"",weight:typeof r.weight=="number"?r.weight:0}:{name:"",description:"",weight:0})},[r]);const i=o=>{o.preventDefault(),n(a)};return t.jsx(st,{isOpen:e,onClose:s,title:r?"Edit Lesson":"Create Lesson",children:t.jsxs("form",{onSubmit:i,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),t.jsx("input",{type:"text",value:a.name,onChange:o=>l({...a,name:o.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),t.jsx("textarea",{value:a.description,onChange:o=>l({...a,description:o.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:3})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Weight (%)"}),t.jsx("input",{type:"number",step:"0.1",min:"0",max:"100",value:a.weight,onChange:o=>l({...a,weight:parseFloat(o.target.value)||0}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),t.jsxs("div",{className:"flex justify-end space-x-2",children:[t.jsx(D,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),t.jsx(D,{type:"submit",children:r?"Update":"Create"})]})]})})};function w0({project:e,onBack:s,onUpdate:r,categories:n}){const{state:a,dispatch:l}=Ar(),[i,o]=u.useState("overview"),[d,m]=u.useState(!1),[p,j]=u.useState(!1),[c,v]=u.useState([]),[y,M]=u.useState([]),[z,h]=u.useState([]),[x,f]=u.useState([]),[E,A]=u.useState([]),[g,N]=u.useState([]),[b,S]=u.useState([]),[L,ae]=u.useState([]),[O,W]=u.useState([]),[T,V]=u.useState([]),[se,fe]=u.useState([]),[C,P]=u.useState(!1),[U,G]=u.useState(!1),[K,le]=u.useState(!1),[te,_]=u.useState(e),[xe,pe]=u.useState([]),[Te,Ue]=u.useState([]),[I,Y]=u.useState([]),[ce,de]=u.useState([]),[ue,ye]=u.useState(null),[ve,We]=u.useState(null),[Z,J]=u.useState(!1),[me,Re]=u.useState(1),[_e,gt]=u.useState(1),[lt,Jt]=u.useState(0),[rt,cs]=u.useState(20),[Xe,Lt]=u.useState([]),[F,X]=u.useState(""),[Ce,Nt]=u.useState(""),[Ge,Gt]=u.useState("all"),[ft,w]=u.useState("all"),[k,B]=u.useState("all"),he=te.progress!==void 0?{progress:te.progress,completedWeight:te.progress,totalWeight:100}:c0(te,g),ge=te.current_stage_id?T.find(R=>R.id===te.current_stage_id):null;u.useEffect(()=>{(async()=>{le(!0);try{const[je,be,Me,q,He,H,we,Ie,Tt,Ae,zt,ds,ts,_s,gr]=await Promise.all([$e.getById(e.id),$e.getMembers(e.id),$e.getTeams(e.id),Ee.getMembers(),Ee.getTeams(),Ee.getTeams(),Le.getAll({all:"true"}),bs.getAll(),$e.getAll(),Rt.getAll(),er.getAll(),Ms.getAll(),Is.getAll(),As.getAll(),cr.getAll()]);_(je),v(be.data||be),M(Me.data||Me),h(q.data||q),f(He.data||He),A(H.data||H);const Lr=(we.data||we).filter(Um=>Um.project_id===Number(e.id));Lt(Lr),Jt(Lr.length),gt(Math.ceil(Lr.length/rt));const tc=(me-1)*rt,Om=tc+rt;N(Lr.slice(tc,Om)),S(q.data||q),ae(Ie.data||Ie),W(Tt.data||Tt),V(Ae.data||Ae),fe(zt.data||zt),pe(ds.data||ds),Ue(ts.data||ts),Y(_s.data||_s),de(gr.data||gr)}catch(je){console.error("Failed to fetch project data:",je)}finally{le(!1)}})()},[e.id]),u.useEffect(()=>{const R=setTimeout(()=>Nt(F),250);return()=>clearTimeout(R)},[F]),u.useEffect(()=>{if(Xe.length>0){let R=Xe.filter(q=>{if(Ce){const He=Ce.toLowerCase();if(!q.name.toLowerCase().includes(He)&&!q.description.toLowerCase().includes(He))return!1}if(Ge!=="all"&&Ge!=="overdue"&&q.status!==Ge)return!1;if(Ge==="overdue"){const He=q.end_date||q.endDate;if(!He||q.status==="completed")return!1;const H=new Date;H.setHours(0,0,0,0);const we=new Date(He);if(we.setHours(0,0,0,0),we>=H)return!1}if(ft!=="all"&&q.priority!==ft)return!1;if(k!=="all"){if(k==="none"){if(q.assignees&&q.assignees.length>0)return!1}else if(!q.assignees||!q.assignees.includes(parseInt(k)))return!1}return!0});Jt(R.length),gt(Math.ceil(R.length/rt));const je=Math.ceil(R.length/rt);me>je&&je>0&&Re(1);const be=(me-1)*rt,Me=be+rt;N(R.slice(be,Me))}},[me,rt,Xe,Ce,Ge,ft,k]),u.useEffect(()=>{Re(1)},[Ce,Ge,ft,k]);const Ne=async(R,je="member")=>{try{await $e.addMember(e.id,{user_id:R,user_type:"team",role:je});const be=await $e.getMembers(e.id);v(be.data||be),P(!1)}catch(be){console.error("Failed to add member:",be)}},it=async(R,je="member")=>{try{await $e.addTeam(e.id,{team_id:R,role:je});const[be,Me]=await Promise.all([$e.getMembers(e.id),$e.getTeams(e.id)]);v(be.data||be),M(Me.data||Me),G(!1)}catch(be){console.error("Failed to add team:",be)}},ke=async R=>{try{await $e.removeMember(e.id,R);const je=await $e.getMembers(e.id);v(je.data||je)}catch(je){console.error("Failed to remove member:",je)}},yt=async R=>{try{await $e.removeTeam(e.id,R);const[je,be]=await Promise.all([$e.getMembers(e.id),$e.getTeams(e.id)]);v(je.data||je),M(be.data||be)}catch(je){console.error("Failed to remove team:",je)}},Ze=async R=>{try{const je=R.status?zs(R.status):0;let be="";if(R.gradeId){const Ae=xe.find(zt=>zt.id===parseInt(R.gradeId||"0"));if(Ae&&(be=Ae.name,R.bookId)){const zt=Te.find(ds=>ds.id===parseInt(R.bookId||"0"));if(zt&&(be+=` > ${zt.name}`,R.unitId)){const ds=I.find(ts=>ts.id===parseInt(R.unitId||"0"));if(ds&&(be+=` > ${ds.name}`,R.lessonId)){const ts=ce.find(_s=>_s.id===parseInt(R.lessonId||"0"));ts&&(be+=` > ${ts.name}`)}}}}const Me=(R.skills||[]).map(Ae=>{const zt=L.find(ds=>ds.name===Ae);return zt?zt.id:null}).filter(Ae=>Ae!==null),q={name:R.name||"",description:R.description||"",project_id:parseInt(e.id),category_stage_id:parseInt(R.stageId||""),status:R.status||"not-started",priority:R.priority||"medium",start_date:R.startDate||new Date().toISOString().split("T")[0],end_date:R.endDate||new Date(Date.now()+7*24*60*60*1e3).toISOString().split("T")[0],estimated_hours:R.estimatedHours||8,assignees:R.assignees||[],teamAssignees:R.teamAssignees||[],skills:Me,component_path:be,grade_id:R.gradeId?parseInt(R.gradeId):null,book_id:R.bookId?parseInt(R.bookId):null,unit_id:R.unitId?parseInt(R.unitId):null,lesson_id:R.lessonId?parseInt(R.lessonId):null},He=await Le.create(q),H=await Le.getAll({all:"true"}),Ie=(H.data||H).filter(Ae=>Ae.project_id===Number(e.id));Lt(Ie);const Tt=await $e.getById(e.id);_(Tt),console.log(" Task created successfully from ProjectDetails:",He),m(!1)}catch(je){console.error(" Failed to create task from ProjectDetails:",je)}},ut=async R=>{try{le(!0);const je=await $e.update(e.id,R),be={...e,...je,start_date:R.start_date||e.start_date,end_date:R.end_date||e.end_date};_(be),r&&r(be),l({type:"UPDATE_PROJECT",payload:be}),j(!1),console.log(" Project updated successfully:",je)}catch(je){console.error(" Failed to update project:",je)}finally{le(!1)}},ot=[{key:"overview",label:"Overview",icon:Ps},{key:"educational-hierarchy",label:"Educational Hierarchy",icon:Xn},{key:"tasks",label:"Tasks",icon:Ot},{key:"timeline",label:"Timeline",icon:Pt},{key:"team",label:"Team",icon:et}],nt=()=>t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[t.jsx(re,{children:t.jsx(ne,{className:"p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"p-2 rounded-lg bg-blue-50",children:t.jsx(Ps,{className:"w-6 h-6 text-blue-600"})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Progress"}),t.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[he.progress,"%"]})]})]})})}),t.jsx(re,{children:t.jsx(ne,{className:"p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"p-2 rounded-lg bg-green-50",children:t.jsx(Ot,{className:"w-6 h-6 text-green-600"})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Tasks"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:lt})]})]})})}),t.jsx(re,{children:t.jsx(ne,{className:"p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"p-2 rounded-lg bg-purple-50",children:t.jsx(et,{className:"w-6 h-6 text-purple-600"})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Team"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c.length})]})]})})}),t.jsx(re,{children:t.jsx(ne,{className:"p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"p-2 rounded-lg bg-orange-50",children:t.jsx(_r,{className:"w-6 h-6 text-orange-600"})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Days Left"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Math.ceil((new Date(e.end_date||e.endDate||"").getTime()-new Date().getTime())/(1e3*60*60*24))})]})]})})})]}),t.jsxs(re,{children:[t.jsx(ze,{children:t.jsxs(Fe,{className:"flex items-center",children:[t.jsx(Ns,{className:"w-5 h-5 mr-2 text-blue-600"}),"Current Stage"]})}),t.jsx(ne,{children:ge?t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-gray-900",children:ge.name}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:ge.description}),t.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[t.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[t.jsx(Ps,{className:"w-4 h-4 mr-1"}),"Order: ",ge.order_index||ge.template_order||"N/A"]}),ge.is_active!==void 0&&t.jsx(ee,{variant:ge.is_active?"success":"default",size:"sm",children:ge.is_active?"Active":"Inactive"})]})]}),t.jsx("div",{className:"text-right",children:t.jsx(ee,{variant:"primary",children:"Current"})})]}):t.jsxs("div",{className:"text-center py-4",children:[t.jsx(Ns,{className:"w-8 h-8 text-gray-300 mx-auto mb-2"}),t.jsx("p",{className:"text-gray-500",children:"No current stage set"}),t.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Edit the project to select a stage"})]})})]}),t.jsxs(re,{children:[t.jsx(ze,{children:t.jsx(Fe,{children:"Project Description"})}),t.jsxs(ne,{children:[t.jsx("p",{className:"text-gray-700",children:e.description}),t.jsxs("div",{className:"mt-4 flex items-center space-x-4",children:[t.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[t.jsx(Pt,{className:"w-4 h-4 mr-1"}),"Start: ",new Date(e.start_date||e.startDate||"").toLocaleDateString()]}),t.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[t.jsx(Pt,{className:"w-4 h-4 mr-1"}),"End: ",new Date(e.end_date||e.endDate||"").toLocaleDateString()]}),t.jsx(ee,{variant:e.status==="active"?"primary":e.status==="completed"?"success":e.status==="on-hold"?"warning":"default",children:e.status})]})]})]})]}),bt=()=>{var Me;const R=[];R.push({id:"project-start",type:"milestone",title:"Project Start",date:new Date(e.start_date||e.startDate||""),status:"completed",description:"Project officially started"}),(Me=e.stages)==null||Me.forEach(q=>{const He=ro(q.id,g);R.push({id:q.id,type:"stage",title:q.name,date:new Date(q.startDate),endDate:new Date(q.endDate),status:q.status,progress:He.progress,description:q.description,weight:q.weight})}),g.filter(q=>q.priority==="high"||q.priority==="urgent").forEach(q=>{R.push({id:q.id,type:"task",title:q.name,date:new Date(q.startDate),endDate:new Date(q.endDate),status:q.status,progress:q.progress,description:q.description,priority:q.priority,assignees:q.assignees})}),R.push({id:"project-end",type:"milestone",title:"Project Completion",date:new Date(e.end_date||e.endDate||""),status:e.status==="completed"?"completed":"pending",description:"Planned project completion date"}),R.sort((q,He)=>q.date.getTime()-He.date.getTime());const je=(q,He)=>{if(He==="milestone")return q==="completed"?"bg-green-500":"bg-gray-400";switch(q){case"completed":return"bg-green-500";case"in-progress":return"bg-blue-500";case"under-review":return"bg-yellow-500";case"not-started":return"bg-gray-400";case"blocked":return"bg-red-500";default:return"bg-gray-400"}},be=q=>{const He=q.endDate||q.date;if(!He)return!1;const H=new Date;H.setHours(0,0,0,0);const we=new Date(He);return we.setHours(0,0,0,0),we<H&&q.status!=="completed"&&q.type!=="milestone"};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Project Timeline"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Track project milestones, stages, and key tasks"})]}),t.jsx("div",{className:"flex items-center space-x-2",children:t.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-2"}),t.jsx("span",{children:"Completed"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full mr-2"}),t.jsx("span",{children:"In Progress"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-3 h-3 bg-gray-400 rounded-full mr-2"}),t.jsx("span",{children:"Not Started"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full mr-2"}),t.jsx("span",{children:"Overdue"})]})]})})]}),t.jsx(re,{children:t.jsx(ne,{className:"p-6",children:t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute left-6 top-0 bottom-0 w-0.5 bg-gray-200"}),t.jsx("div",{className:"space-y-8",children:R.map((q,He)=>t.jsxs("div",{className:"relative flex items-start",children:[t.jsxs("div",{className:`relative z-10 w-12 h-12 rounded-full ${je(q.status,q.type)} flex items-center justify-center`,children:[q.type==="milestone"&&t.jsx(Ns,{className:"w-5 h-5 text-white"}),q.type==="stage"&&t.jsx(Ps,{className:"w-5 h-5 text-white"}),q.type==="task"&&t.jsx(Ot,{className:"w-5 h-5 text-white"})]}),t.jsx("div",{className:"ml-6 flex-1",children:t.jsx("div",{className:`p-4 rounded-lg border-2 ${be(q)?"border-red-200 bg-red-50":"border-gray-200 bg-white"}`,children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("h4",{className:"font-semibold text-gray-900",children:q.title}),q.type==="stage"&&q.weight&&t.jsxs(ee,{variant:"secondary",size:"sm",children:[q.weight,"% weight"]}),q.priority&&t.jsx(ee,{variant:q.priority==="urgent"?"danger":q.priority==="high"?"warning":"primary",size:"sm",children:q.priority}),be(q)&&t.jsxs(ee,{variant:"danger",size:"sm",children:[t.jsx(Wt,{className:"w-3 h-3 mr-1"}),"Overdue"]})]}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:q.description}),t.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-500",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(Pt,{className:"w-4 h-4 mr-1"}),q.date.toLocaleDateString(),q.endDate&&` - ${q.endDate.toLocaleDateString()}`]}),q.assignees&&q.assignees.length>0&&t.jsxs("div",{className:"flex items-center",children:[t.jsx(et,{className:"w-4 h-4 mr-1"}),q.assignees.length," assigned"]})]}),(q.type==="stage"||q.type==="task")&&t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[t.jsx("span",{className:"text-gray-600",children:"Progress"}),t.jsxs("span",{className:"font-medium",children:[q.progress,"%"]})]}),t.jsx($t,{value:q.progress,showLabel:!1})]})]}),t.jsx(ee,{variant:q.status==="completed"?"success":q.status==="in-progress"?"primary":q.status==="under-review"?"warning":q.status==="blocked"?"danger":"default",children:q.status.replace("-"," ")})]})})})]},q.id))})]})})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsx(re,{children:t.jsx(ne,{className:"p-6",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-green-600",children:R.filter(q=>q.status==="completed").length}),t.jsx("div",{className:"text-sm text-gray-600",children:"Completed Items"})]})})}),t.jsx(re,{children:t.jsx(ne,{className:"p-6",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-blue-600",children:R.filter(q=>q.status==="in-progress").length}),t.jsx("div",{className:"text-sm text-gray-600",children:"In Progress"})]})})}),t.jsx(re,{children:t.jsx(ne,{className:"p-6",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-red-600",children:R.filter(q=>be(q)).length}),t.jsx("div",{className:"text-sm text-gray-600",children:"Overdue Items"})]})})})]})]})},es=()=>t.jsx("div",{className:"space-y-6",children:e.stages&&e.stages.length>0?e.stages.map(R=>{const je=g.filter(Me=>Me.stageId===R.id),be=ro(R.id,g);return t.jsxs(re,{children:[t.jsx(ze,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs(Fe,{className:"flex items-center",children:["Stage ",R.order,": ",R.name,t.jsxs(ee,{variant:"secondary",size:"sm",className:"ml-2",children:[R.weight,"% weight"]})]}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:R.description})]}),t.jsx(ee,{variant:R.status==="completed"?"success":R.status==="in-progress"?"primary":R.status==="under-review"?"warning":"default",children:R.status.replace("-"," ")})]})}),t.jsxs(ne,{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[t.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Start: ",new Date(R.startDate).toLocaleDateString()]}),t.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[t.jsx(Pt,{className:"w-4 h-4 mr-2"}),"End: ",new Date(R.endDate).toLocaleDateString()]}),t.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[t.jsx(Ot,{className:"w-4 h-4 mr-2"}),je.length," tasks"]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600",children:"Progress"}),t.jsxs("span",{className:"font-medium",children:[be.progress,"%"]})]}),t.jsx($t,{value:be.progress})]}),je.length>0&&t.jsxs("div",{className:"space-y-2",children:[t.jsx("h5",{className:"font-medium text-gray-900",children:"Recent Tasks:"}),je.slice(0,3).map(Me=>t.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[t.jsx("span",{className:"text-sm text-gray-700",children:Me.name}),t.jsx(ee,{variant:Me.status==="completed"?"success":Me.status==="in-progress"?"primary":Me.status==="under-review"?"warning":Me.status==="blocked"?"danger":"default",size:"sm",children:Me.status.replace("-"," ")})]},Me.id)),je.length>3&&t.jsxs("p",{className:"text-xs text-gray-500",children:["+",je.length-3," more tasks"]})]})]})]},R.id)}):t.jsx(re,{children:t.jsxs(ne,{className:"p-8 text-center",children:[t.jsx(Ns,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Stages Defined"}),t.jsx("p",{className:"text-gray-600",children:"This project doesn't have any stages configured yet."})]})})}),Hs=()=>{if(ue)return t.jsx($m,{taskId:ue,onBack:()=>ye(null)});const R=H=>{We(H),J(!0)},je=async H=>{try{if(ve){let we="";if(H.gradeId){const ts=xe.find(_s=>_s.id===parseInt(H.gradeId||"0"));if(ts&&(we=ts.name,H.bookId)){const _s=Te.find(gr=>gr.id===parseInt(H.bookId||"0"));if(_s&&(we+=` > ${_s.name}`,H.unitId)){const gr=I.find(mn=>mn.id===parseInt(H.unitId||"0"));if(gr&&(we+=` > ${gr.name}`,H.lessonId)){const mn=ce.find(Lr=>Lr.id===parseInt(H.lessonId||"0"));mn&&(we+=` > ${mn.name}`)}}}}const Ie={name:H.name,description:H.description,project_id:parseInt(H.projectId||"1"),category_stage_id:parseInt(H.stageId||""),status:H.status,priority:H.priority,start_date:H.startDate,end_date:H.endDate,estimated_hours:parseInt(String(H.estimatedHours||0)),actual_hours:parseInt(String(H.actualHours||0)),assignees:H.assignees||[],skills:H.skills,grade_id:H.gradeId?parseInt(H.gradeId):null,book_id:H.bookId?parseInt(H.bookId):null,unit_id:H.unitId?parseInt(H.unitId):null,lesson_id:H.lessonId?parseInt(H.lessonId):null,component_path:we};console.log(" Updating task with hierarchy:",{taskId:ve.id,grade_id:Ie.grade_id,book_id:Ie.book_id,unit_id:Ie.unit_id,lesson_id:Ie.lesson_id,component_path:Ie.component_path}),await Le.update(ve.id,Ie);const Tt=await Le.getAll({all:"true"}),zt=(Tt.data||Tt).filter(ts=>ts.project_id===Number(e.id));Lt(zt);const ds=await $e.getById(e.id);_(ds)}J(!1),We(null)}catch(we){console.error(" Failed to update task:",we)}},be=async H=>{if(confirm(`Are you sure you want to delete the task "${H.name}"? This action cannot be undone.`))try{await Le.delete(H.id);const we=await Le.getAll({all:"true"}),Tt=(we.data||we).filter(zt=>zt.project_id===Number(e.id));Lt(Tt);const Ae=await $e.getById(e.id);_(Ae),console.log(" Task deleted successfully:",H.name)}catch(we){console.error(" Delete task error:",we)}},Me=H=>{switch(H){case"not-started":return"default";case"in-progress":return"primary";case"under-review":return"warning";case"completed":return"success";case"blocked":return"danger";default:return"default"}},q=H=>{switch(H){case"low":return"default";case"medium":return"primary";case"high":return"warning";case"urgent":return"danger";default:return"default"}},He=H=>{const we=H.end_date||H.endDate;if(!we)return!1;const Ie=new Date;Ie.setHours(0,0,0,0);const Tt=new Date(we);return Tt.setHours(0,0,0,0),Tt<Ie&&H.status!=="completed"};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Project Tasks"}),t.jsx(D,{icon:t.jsx(ht,{className:"w-4 h-4"}),onClick:()=>m(!0),children:"Add Task"})]}),t.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:t.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx(Tl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),t.jsx("input",{type:"text",placeholder:"Search tasks...",value:F,onChange:H=>X(H.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("select",{value:Ge,onChange:H=>Gt(H.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[t.jsx("option",{value:"all",children:"All Status"}),t.jsx("option",{value:"not-started",children:"Not Started"}),t.jsx("option",{value:"in-progress",children:"In Progress"}),t.jsx("option",{value:"under-review",children:"Under Review"}),t.jsx("option",{value:"completed",children:"Completed"}),t.jsx("option",{value:"blocked",children:"Blocked"}),t.jsx("option",{value:"overdue",children:"Overdue"})]}),t.jsxs("select",{value:ft,onChange:H=>w(H.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[t.jsx("option",{value:"all",children:"All Priority"}),t.jsx("option",{value:"low",children:"Low"}),t.jsx("option",{value:"medium",children:"Medium"}),t.jsx("option",{value:"high",children:"High"}),t.jsx("option",{value:"urgent",children:"Urgent"})]}),t.jsxs("select",{value:k,onChange:H=>B(H.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[t.jsx("option",{value:"all",children:"All Assignees"}),t.jsx("option",{value:"none",children:"No Assignees"}),b.map(H=>t.jsx("option",{value:H.id,children:H.name},H.id))]})]})}),g.length>0?t.jsx(re,{children:t.jsxs(ne,{className:"p-0",children:[t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Task Name"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stage"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Priority"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assignees"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Due Date"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Progress"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:g.map(H=>{const we=b.filter(Ae=>H.assignees&&H.assignees.includes(Ae.id)),Ie=He(H),Tt=T.find(Ae=>Ae.id===H.category_stage_id||H.stage_id);return t.jsxs("tr",{className:`hover:bg-gray-50 ${Ie?"bg-red-50":""}`,children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{children:[t.jsxs("div",{className:"text-sm font-medium text-gray-900 flex items-center",children:[H.name,Ie&&t.jsx(Wt,{className:"w-4 h-4 text-red-500 ml-2"})]}),t.jsxs("div",{className:"text-sm text-gray-500",children:[H.component_path&&t.jsxs("div",{className:"text-xs text-purple-600 mt-1 bg-purple-100 p-1 rounded-md inline-block",children:[" ",H.component_path]}),H.description&&t.jsx("div",{className:"mt-1",children:H.description})]})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"text-sm text-gray-900",children:Tt?t.jsx("div",{className:"font-medium text-blue-600",children:Tt.name}):t.jsx("span",{className:"text-gray-400",children:"Unknown Stage"})})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx(ee,{variant:Me(H.status),children:H.status.replace("-"," ")})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx(ee,{variant:q(H.priority),children:H.priority})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"space-y-1",children:[we.length>0&&t.jsxs("div",{className:"flex flex-wrap gap-1",children:[we.slice(0,3).map(Ae=>t.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:Ae.name},Ae.id)),we.length>3&&t.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600",children:["+",we.length-3," more"]})]}),we.length===0&&t.jsx("span",{className:"text-xs text-gray-400",children:"No assignees"})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Pt,{className:"w-4 h-4 mr-1 text-gray-400"}),H.end_date||H.endDate?new Date(H.end_date||H.endDate||"").toLocaleDateString():"No due date"]})}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2 mr-2",children:t.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${zs(H.status)}%`}})}),t.jsxs("span",{className:"text-sm text-gray-600",children:[zs(H.status),"%"]})]}),t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(D,{variant:"ghost",size:"sm",onClick:Ae=>{Ae.stopPropagation(),ye(H.id)},title:"View Details",children:t.jsx(pr,{className:"w-4 h-4"})}),t.jsx(D,{variant:"ghost",size:"sm",onClick:Ae=>{Ae.stopPropagation(),R(H)},title:"Edit Task",children:t.jsx(Ys,{className:"w-4 h-4"})}),t.jsx(D,{variant:"ghost",size:"sm",onClick:Ae=>{Ae.stopPropagation(),be(H)},title:"Delete Task",className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:t.jsx(Ct,{className:"w-4 h-4"})})]})]})]},H.id)})})]})}),_e>1&&t.jsx("div",{className:"px-6 py-4 border-t border-gray-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("div",{className:"flex items-center space-x-2",children:t.jsxs("span",{className:"text-sm text-gray-700",children:["Showing ",(me-1)*rt+1," to ",Math.min(me*rt,lt)," of ",lt," tasks"]})}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(D,{variant:"outline",size:"sm",onClick:()=>Re(1),disabled:me===1,children:"First"}),t.jsx(D,{variant:"outline",size:"sm",onClick:()=>Re(me-1),disabled:me===1,children:"Previous"}),t.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,_e)},(H,we)=>{let Ie;return _e<=5||me<=3?Ie=we+1:me>=_e-2?Ie=_e-4+we:Ie=me-2+we,t.jsx(D,{variant:me===Ie?"primary":"outline",size:"sm",onClick:()=>Re(Ie),className:"w-8 h-8 p-0",children:Ie},Ie)})}),t.jsx(D,{variant:"outline",size:"sm",onClick:()=>Re(me+1),disabled:me===_e,children:"Next"}),t.jsx(D,{variant:"outline",size:"sm",onClick:()=>Re(_e),disabled:me===_e,children:"Last"})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("span",{className:"text-sm text-gray-700",children:"Page size:"}),t.jsxs("select",{value:rt,onChange:H=>{cs(Number(H.target.value)),Re(1)},className:"border border-gray-300 rounded px-2 py-1 text-sm",children:[t.jsx("option",{value:10,children:"10"}),t.jsx("option",{value:20,children:"20"}),t.jsx("option",{value:50,children:"50"}),t.jsx("option",{value:100,children:"100"})]})]})]})})]})}):t.jsx(re,{children:t.jsxs(ne,{className:"p-8 text-center",children:[t.jsx(Ot,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Tasks Yet"}),t.jsx("p",{className:"text-gray-600 mb-4",children:"Start by creating your first task for this project."}),t.jsx(D,{icon:t.jsx(ht,{className:"w-4 h-4"}),onClick:()=>m(!0),children:"Create First Task"})]})}),t.jsx(ul,{isOpen:Z,onClose:()=>{J(!1),We(null)},onSubmit:je,users:b,teams:E,skills:L,projects:O,stages:T,grades:xe,books:Te,units:I,lessons:ce,editingTask:ve})]})},mt=()=>t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Project Team"}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsxs(D,{onClick:()=>G(!0),className:"flex items-center space-x-2",variant:"outline",children:[t.jsx(et,{className:"w-4 h-4"}),t.jsx("span",{children:"Add Team"})]}),t.jsxs(D,{onClick:()=>P(!0),className:"flex items-center space-x-2",children:[t.jsx(eo,{className:"w-4 h-4"}),t.jsx("span",{children:"Add Member"})]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h4",{className:"text-md font-medium text-gray-900",children:"Assigned Teams"}),y.length>0?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:y.map(R=>t.jsx(re,{children:t.jsxs(ne,{className:"p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-lg flex items-center justify-center text-white",children:t.jsx(et,{className:"w-5 h-5"})}),t.jsxs("div",{children:[t.jsx("h5",{className:"font-medium text-gray-900",children:R.team_name}),t.jsx(ee,{variant:"secondary",className:"text-xs",children:R.role})]})]}),t.jsx(D,{variant:"ghost",size:"sm",onClick:()=>yt(R.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:t.jsx(so,{className:"w-4 h-4"})})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600",children:"Members"}),t.jsxs("span",{className:"font-medium",children:[R.member_count," / ",R.max_capacity]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${Math.min(R.member_count/R.max_capacity*100,100)}%`}})})]})]})},R.id))}):t.jsxs("div",{className:"text-center py-6 bg-gray-50 rounded-lg",children:[t.jsx(et,{className:"w-8 h-8 text-gray-300 mx-auto mb-2"}),t.jsx("p",{className:"text-gray-500",children:"No teams assigned to this project"})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h4",{className:"text-md font-medium text-gray-900",children:"Individual Members"}),K?t.jsx("div",{className:"text-center py-8",children:t.jsx("div",{className:"text-gray-500",children:"Loading team members..."})}):c.length>0?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(R=>{var q,He,H;const je=g.filter(we=>we.assignees&&we.assignees.includes(R.user_id||R.team_member_id)),be=je.filter(we=>we.status==="completed"),Me=je.length>0?Math.round(be.length/je.length*100):0;return t.jsx(re,{children:t.jsxs(ne,{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center text-white font-semibold text-lg",children:((q=R.name)==null?void 0:q.charAt(0))||"U"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900",children:R.name||"Unknown User"}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(ee,{variant:"secondary",children:R.role||"member"}),R.skills&&t.jsx("p",{className:"text-sm text-gray-600",children:((H=(He=R.skills).join)==null?void 0:H.call(He,", "))||R.skills})]})]})]}),t.jsx(D,{variant:"ghost",size:"sm",onClick:()=>ke(R.project_member_id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:t.jsx(so,{className:"w-4 h-4"})})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600",children:"Tasks Assigned"}),t.jsx("span",{className:"font-medium",children:je.length})]}),t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600",children:"Completed"}),t.jsx("span",{className:"font-medium text-green-600",children:be.length})]}),t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600",children:"Completion Rate"}),t.jsxs("span",{className:"font-medium",children:[Me,"%"]})]}),t.jsx($t,{value:Me})]})]})]})},R.project_member_id)})}):t.jsx(re,{children:t.jsxs(ne,{className:"p-8 text-center",children:[t.jsx(et,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Team Members"}),t.jsx("p",{className:"text-gray-600 mb-4",children:"No team members have been assigned to this project yet."}),t.jsxs(D,{onClick:()=>P(!0),className:"flex items-center space-x-2",children:[t.jsx(eo,{className:"w-4 h-4"}),t.jsx("span",{children:"Add First Member"})]})]})})]})]});return t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs(D,{variant:"ghost",onClick:s,children:[t.jsx(Jo,{className:"w-4 h-4 mr-2"}),"Back to Projects"]}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:te.name}),t.jsx("p",{className:"text-gray-600",children:te.category})]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(ee,{variant:te.status==="active"?"primary":te.status==="completed"?"success":te.status==="on-hold"?"warning":"default",children:te.status}),t.jsxs(D,{variant:"outline",size:"sm",onClick:()=>j(!0),children:[t.jsx(Ys,{className:"w-4 h-4 mr-2"}),"Edit Project"]})]})]}),t.jsx(re,{children:t.jsx(ne,{className:"p-6",children:t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Overall Progress"}),t.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[he.progress,"%"]})]}),t.jsx($t,{value:he.progress})]})})}),t.jsx("div",{className:"border-b border-gray-200",children:t.jsx("nav",{className:"-mb-px flex space-x-8",children:ot.map(R=>t.jsxs("button",{onClick:()=>o(R.key),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${i===R.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[t.jsx(R.icon,{className:"w-4 h-4"}),t.jsx("span",{children:R.label})]},R.key))})}),t.jsxs("div",{children:[i==="overview"&&nt(),i==="stages"&&es(),i==="educational-hierarchy"&&t.jsx(x0,{projectId:Number(te.id)}),i==="tasks"&&Hs(),i==="timeline"&&bt(),i==="team"&&mt()]}),t.jsx(ul,{isOpen:d,onClose:()=>m(!1),onSubmit:Ze,users:b,teams:E,skills:L,projects:O,stages:T,grades:xe,books:Te,units:I,lessons:ce}),t.jsx(m0,{isOpen:p,onClose:()=>j(!1),onSubmit:ut,project:te,categories:n||se}),t.jsx(b0,{isOpen:C,onClose:()=>P(!1),onSubmit:Ne,availableMembers:z,projectMembers:c}),t.jsx(N0,{isOpen:U,onClose:()=>G(!1),onSubmit:it,availableTeams:x,projectTeams:y})]})}function N0({isOpen:e,onClose:s,onSubmit:r,availableTeams:n,projectTeams:a}){const[l,i]=u.useState(null),[o,d]=u.useState("member"),m=a.map(c=>c.team_id),p=n.filter(c=>!m.includes(c.id)),j=c=>{c.preventDefault(),l&&(r(l,o),i(null),d("member"))};return t.jsx(st,{isOpen:e,onClose:s,title:"Add Team to Project",children:t.jsxs("form",{onSubmit:j,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Team"}),t.jsxs("select",{value:l||"",onChange:c=>i(Number(c.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[t.jsx("option",{value:"",children:"Choose a team..."}),p.map(c=>t.jsxs("option",{value:c.id,children:[c.name," - ",c.member_count||0," members"]},c.id))]}),p.length===0&&t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"All teams are already assigned to this project."})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),t.jsxs("select",{value:o,onChange:c=>d(c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"member",children:"Member"}),t.jsx("option",{value:"admin",children:"Admin"}),t.jsx("option",{value:"owner",children:"Owner"}),t.jsx("option",{value:"viewer",children:"Viewer"})]})]}),t.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:t.jsxs("p",{className:"text-sm text-blue-800",children:[t.jsx("strong",{children:"Note:"})," When you assign a team to this project, all team members will automatically be added as individual project members."]})}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx(D,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),t.jsx(D,{type:"submit",disabled:!l||p.length===0,children:"Add Team"})]})]})})}function b0({isOpen:e,onClose:s,onSubmit:r,availableMembers:n,projectMembers:a}){const[l,i]=u.useState(null),[o,d]=u.useState("member"),m=a.map(c=>c.user_id||c.team_member_id),p=n.filter(c=>!m.includes(c.id)),j=c=>{c.preventDefault(),l&&(r(l,o),i(null),d("member"))};return t.jsx(st,{isOpen:e,onClose:s,title:"Add Team Member",children:t.jsxs("form",{onSubmit:j,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Team Member"}),t.jsxs("select",{value:l||"",onChange:c=>i(Number(c.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[t.jsx("option",{value:"",children:"Choose a team member..."}),p.map(c=>t.jsxs("option",{value:c.id,children:[c.name," (",c.email,")"]},c.id))]}),p.length===0&&t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"All team members are already assigned to this project."})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),t.jsxs("select",{value:o,onChange:c=>d(c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"member",children:"Member"}),t.jsx("option",{value:"admin",children:"Admin"}),t.jsx("option",{value:"owner",children:"Owner"}),t.jsx("option",{value:"viewer",children:"Viewer"})]})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx(D,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),t.jsx(D,{type:"submit",disabled:!l||p.length===0,children:"Add Member"})]})]})})}const ri={"eLearning Design":[{id:"1",name:"Content Strategy",description:"Define learning objectives and content outline",order:1},{id:"2",name:"Instructional Design",description:"Create detailed instructional design document",order:2},{id:"3",name:"Storyboarding",description:"Visual planning and storyboard creation",order:3},{id:"4",name:"Content Development",description:"Content creation and writing phase",order:4},{id:"5",name:"Media Production",description:"Graphics, animations, and multimedia creation",order:5},{id:"6",name:"Development & Integration",description:"Technical development and LMS integration",order:6},{id:"7",name:"Review & QA",description:"Quality assurance and review process",order:7},{id:"8",name:"Deployment",description:"Final deployment and launch",order:8}],"Curriculum Design":[{id:"9",name:"Curriculum Analysis",description:"Analyze curriculum requirements and standards",order:1},{id:"10",name:"Scope & Sequence",description:"Define scope and sequence of curriculum",order:2},{id:"11",name:"Learning Objectives",description:"Define detailed learning objectives",order:3},{id:"12",name:"Content Creation",description:"Develop curriculum content and materials",order:4},{id:"13",name:"Assessment Design",description:"Create assessments and evaluation tools",order:5},{id:"14",name:"Teacher Resources",description:"Develop teacher guides and resources",order:6},{id:"15",name:"Pilot Testing",description:"Pilot test with target audience",order:7},{id:"16",name:"Revision & Finalization",description:"Revise based on feedback and finalize",order:8}],"IT Applications":[{id:"17",name:"Requirements Analysis",description:"Gather and analyze system requirements",order:1},{id:"18",name:"System Design",description:"Design system architecture and database",order:2},{id:"19",name:"UI/UX Design",description:"Design user interface and user experience",order:3},{id:"20",name:"Frontend Development",description:"Develop user interface and client-side logic",order:4},{id:"21",name:"Backend Development",description:"Develop server-side logic and APIs",order:5},{id:"22",name:"Database Implementation",description:"Implement database and data models",order:6},{id:"23",name:"Integration Testing",description:"Test system integration and APIs",order:7},{id:"24",name:"User Acceptance Testing",description:"Conduct user acceptance testing",order:8},{id:"25",name:"Deployment & Launch",description:"Deploy to production and launch",order:9}]};function k0(){const[e,s]=u.useState("grid"),[r,n]=u.useState(!1),[a,l]=u.useState(null),[i,o]=u.useState("all"),[d,m]=u.useState("all"),[p,j]=u.useState([]),[c,v]=u.useState([]),[y,M]=u.useState(!0),[z,h]=u.useState(null),[x,f]=u.useState({}),[E,A]=u.useState([]);u.useEffect(()=>{(async()=>{try{M(!0),h(null);const[V,se,fe,C]=await Promise.all([$e.getAll(),er.getAll(),Le.getAll({all:"true"}),Rt.getAll()]),P=V&&V.data?V.data:Array.isArray(V)?V:[];j(P),console.log("Data",p,c),v(se),A(C||[]);const U=fe&&fe.data?fe.data:Array.isArray(fe)?fe:[],G={};(U||[]).forEach(K=>{const le=(K.project_id??K.projectId??"").toString();le&&(G[le]=(G[le]||0)+1)}),f(G)}catch(V){console.error("ProjectManager fetch error:",V),h(V.message||"Failed to load projects data")}finally{M(!1)}})()},[]);const g=u.useMemo(()=>{const T={};return(c||[]).forEach(V=>{V&&V.id!==void 0&&V.name&&(T[String(V.id)]=V.name)}),T},[c]),N=T=>{const V=T==null?void 0:T.category;if(V&&typeof V=="string"&&V.trim()!=="")return V;const se=(T==null?void 0:T.category_id)??(T==null?void 0:T.categoryId);if(se!=null){const fe=g[String(se)];if(fe)return fe}return"Uncategorized"},b=u.useMemo(()=>{const T={};return(E||[]).forEach(V=>{V&&V.id!==void 0&&V.name&&(T[String(V.id)]=V.name)}),T},[E]),S=p.filter(T=>!(i!=="all"&&N(T)!==i||d!=="all"&&T.status!==d)),L=async T=>{var V;try{h(null);const se={name:T.name||"",description:T.description||"",category_id:T.category_id||((V=c[0])==null?void 0:V.id),current_stage_id:T.currentStageId||null,start_date:T.start_date||new Date().toISOString().split("T")[0],end_date:T.end_date||new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0],status:"planning",progress:0};console.log(" Creating project:",se);const fe=await $e.create(se);j(C=>[...C,fe]),n(!1),console.log(" Project created successfully:",fe)}catch(se){console.error(" Create project error:",se),h(se.message||"Failed to create project")}},ae=async T=>{try{if(h(null),!confirm("Are you sure you want to delete this project? This action cannot be undone."))return;console.log(" Deleting project:",T),await $e.delete(T),j(V=>V.filter(se=>se.id!==T)),(a==null?void 0:a.id)===T&&l(null),console.log(" Project deleted successfully")}catch(V){console.error(" Delete project error:",V),h(V.message||"Failed to delete project")}},O=T=>{switch(T){case"active":return"primary";case"completed":return"success";case"on-hold":return"warning";case"cancelled":return"danger";default:return"default"}},W=T=>{if(!T)return null;const V=new Date(T),se=new Date;V.setHours(0,0,0,0),se.setHours(0,0,0,0);const fe=V.getTime()-se.getTime();return Math.ceil(fe/(1e3*60*60*24))};return a?t.jsx(w0,{project:a,onBack:()=>l(null),onUpdate:T=>{l(T),j(V=>V.map(se=>se.id===T.id?T:se))},categories:c}):y?t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Projects"}),t.jsx("p",{className:"text-gray-600",children:"Manage and track your project portfolio"})]}),t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsxs("div",{className:"text-center",children:[t.jsx(aa,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-blue-600"}),t.jsx("p",{className:"text-gray-600",children:"Loading projects..."})]})})]}):z?t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Projects"}),t.jsx("p",{className:"text-gray-600",children:"Manage and track your project portfolio"})]}),t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsxs("div",{className:"text-center",children:[t.jsx(Wt,{className:"w-8 h-8 mx-auto mb-4 text-red-600"}),t.jsx("p",{className:"text-red-600 mb-4",children:z}),t.jsx(D,{onClick:()=>window.location.reload(),children:"Try Again"})]})})]}):t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-r from-indigo-600 via-blue-600 to-cyan-500 text-white p-6 shadow-lg",children:[t.jsx("div",{className:"absolute -top-10 -right-10 w-40 h-40 bg-white/10 rounded-full blur-2xl"}),t.jsx("div",{className:"absolute -bottom-14 -left-12 w-56 h-56 bg-white/10 rounded-full blur-2xl"}),t.jsxs("div",{className:"relative z-10 flex items-center justify-between gap-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:"Projects"}),t.jsx("p",{className:"text-white/80",children:"Manage and track your project portfolio"})]}),t.jsx(D,{icon:t.jsx(ht,{className:"w-4 h-4"}),onClick:()=>n(!0),className:"bg-blue/90 text-indigo-900 hover:text-blue-200 hover:bg:white hover:shadow-lg",children:"New Project"})]})]}),t.jsxs("div",{className:"flex items-center justify-between bg-white/80 backdrop-blur-sm p-4 rounded-xl border border-gray-200 shadow-sm",children:[t.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[t.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg border border-gray-200",children:[t.jsx(Tp,{className:"w-4 h-4 text-gray-500"}),t.jsxs("select",{value:i,onChange:T=>o(T.target.value),className:"bg-transparent outline-none text-sm",children:[t.jsx("option",{value:"all",children:"All Categories"}),c.map(T=>t.jsx("option",{value:T.name,children:T.name},T.id))]})]}),t.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg border border-gray-200",children:[t.jsx("span",{className:"text-xs text-gray-500",children:"Status"}),t.jsxs("select",{value:d,onChange:T=>m(T.target.value),className:"bg-transparent outline-none text-sm",children:[t.jsx("option",{value:"all",children:"All"}),t.jsx("option",{value:"planning",children:"Planning"}),t.jsx("option",{value:"active",children:"Active"}),t.jsx("option",{value:"on-hold",children:"On Hold"}),t.jsx("option",{value:"completed",children:"Completed"}),t.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(D,{variant:e==="grid"?"primary":"ghost",size:"sm",onClick:()=>s("grid"),className:e==="grid"?"":"hover:bg-gray-100",title:"Grid view",children:t.jsx(Pp,{className:"w-4 h-4"})}),t.jsx(D,{variant:e==="list"?"primary":"ghost",size:"sm",onClick:()=>s("list"),className:e==="list"?"":"hover:bg-gray-100",title:"List view",children:t.jsx(zp,{className:"w-4 h-4"})})]})]}),e==="grid"?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:S.map(T=>{var V;return t.jsxs(re,{className:`relative overflow-hidden hover:shadow-2xl transition-all duration-300 cursor-pointer border-0 bg-white/90 backdrop-blur-sm ${T.status==="active"?"ring-1 ring-blue-200":""}`,onClick:()=>l(T),children:[t.jsx("div",{className:"absolute inset-x-0 top-0 h-1 bg-gradient-to-r from-indigo-500 via-blue-500 to-cyan-500"}),t.jsx(ze,{className:"pb-3",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx(Fe,{className:"text-lg flex items-center gap-2 flex-wrap",children:T.name}),t.jsxs("div",{className:"mt-1",children:[t.jsx(ee,{variant:"secondary",className:"text-xs bg-blue-50 text-blue-700 border border-blue-200",children:N(T)}),(()=>{const se=T.current_stage_id??T.currentStageId,fe=se!=null?b[String(se)]:null;return fe?t.jsx(ee,{variant:"secondary",className:"text-[11px] px-2 mx-3 py-0.5 bg-purple-50 text-purple-700 border border-purple-200",children:fe}):null})()]})]}),t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(D,{variant:"ghost",size:"sm",onClick:se=>{se.stopPropagation(),l(T)},title:"Edit Project",children:t.jsx(ud,{className:"w-4 h-4"})}),t.jsx(D,{variant:"ghost",size:"sm",onClick:se=>{se.stopPropagation(),ae(T.id)},title:"Delete Project",className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:t.jsx(Ct,{className:"w-4 h-4"})})]})]})}),t.jsxs(ne,{className:"space-y-4",children:[t.jsx("p",{className:"text-sm text-gray-700 line-clamp-2",children:T.description}),N(T)==="IT Applications"&&t.jsxs("div",{className:"mt-1",children:[t.jsx("div",{className:"text-xs text-gray-500",children:"IT Applications Phases"}),t.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[ri["IT Applications"].slice(0,3).map(se=>t.jsx(ee,{variant:"secondary",className:"text-[10px] px-2 py-0.5",children:se.name},se.id)),ri["IT Applications"].length>3&&t.jsxs(ee,{variant:"secondary",className:"text-[10px] px-2 py-0.5",children:["+",ri["IT Applications"].length-3," more"]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600",children:"Progress"}),t.jsxs("span",{className:"font-medium",children:[T.progress,"%"]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 overflow-hidden",children:t.jsx("div",{className:`h-2 rounded-full transition-all duration-700 ${T.progress>=80?"bg-gradient-to-r from-green-500 to-emerald-600":T.progress>=50?"bg-gradient-to-r from-blue-500 to-indigo-600":T.progress>=25?"bg-gradient-to-r from-yellow-500 to-orange-500":"bg-gradient-to-r from-gray-400 to-gray-500"}`,style:{width:`${T.progress}%`}})})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(ee,{variant:O(T.status),children:T.status}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{className:"inline-flex items-center text-gray-700",children:[t.jsx(Ot,{className:"w-4 h-4 mr-1 text-blue-600"}),t.jsx("span",{className:"font-medium",children:x[(V=T.id)==null?void 0:V.toString()]||0}),t.jsx("span",{className:"ml-1 text-gray-500",children:"tasks"})]}),t.jsxs("div",{className:"inline-flex items-center text-gray-700",children:[t.jsx(et,{className:"w-4 h-4 mr-1 text-purple-600"}),t.jsx("span",{className:"font-medium",children:T.userCount||0}),t.jsx("span",{className:"ml-1 text-gray-500",children:"team"})]})]})]}),t.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[t.jsxs("div",{className:"inline-flex items-center",children:[t.jsx(Pt,{className:"w-4 h-4 mr-2"}),T.end_date||T.endDate?new Date(T.end_date||T.endDate||"").toLocaleDateString():"No due date"]}),(()=>{const se=W(T.end_date||T.endDate);if(se===null)return null;const fe=se<0?`${Math.abs(se)} days overdue`:se===0?"Due today":`${se} days left`,C=se<0?"text-red-600":se<=3?"text-orange-600":"text-green-600";return t.jsx("span",{className:`font-medium ${C}`,children:fe})})()]})]})]},T.id)})}):t.jsx(re,{children:t.jsx(ne,{className:"p-0",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Project Name"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Progress"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tasks"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Team"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Due Date"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Days Left"}),t.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.map(T=>{var V;return t.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>l(T),children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{children:[t.jsxs("div",{className:"text-sm font-medium text-gray-900 flex items-center gap-2",children:[T.name,(()=>{const se=T.current_stage_id??T.currentStageId,fe=se!=null?b[String(se)]:null;return fe?t.jsx(ee,{variant:"secondary",className:"text-[11px] px-2 py-0.5 bg-purple-50 text-purple-700 border border-purple-200",children:fe}):null})()]}),t.jsx("div",{className:"text-sm text-gray-500",children:T.description})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:N(T)}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx(ee,{variant:O(T.status),children:T.status})}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[t.jsx("div",{className:"w-24",children:t.jsx($t,{value:T.progress,showLabel:!1})}),t.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[T.progress,"%"]})]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:x[(V=T.id)==null?void 0:V.toString()]||0}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(et,{className:"w-4 h-4 mr-1 text-gray-400"}),T.userCount||0]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:T.end_date||T.endDate?new Date(T.end_date||T.endDate||"").toLocaleDateString():"No due date"}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(()=>{const se=W(T.end_date||T.endDate);return se===null?"-":se<0?`${Math.abs(se)} overdue`:se===0?"Due today":`${se} days`})()}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:t.jsxs("div",{className:"flex items-center justify-end space-x-1",children:[t.jsx(D,{variant:"ghost",size:"sm",onClick:se=>{se.stopPropagation(),l(T)},title:"Edit Project",children:t.jsx(ud,{className:"w-4 h-4"})}),t.jsx(D,{variant:"ghost",size:"sm",onClick:se=>{se.stopPropagation(),ae(T.id)},title:"Delete Project",className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:t.jsx(Ct,{className:"w-4 h-4"})})]})})]},T.id)})})]})})})}),t.jsx(S0,{isOpen:r,onClose:()=>n(!1),onSubmit:L,categories:c})]})}function S0({isOpen:e,onClose:s,onSubmit:r,categories:n}){const[a,l]=u.useState({name:"",description:"",category_id:null,current_stage_id:null,start_date:new Date().toISOString().split("T")[0],end_date:new Date(Date.now()+2592e6).toISOString().split("T")[0]}),[i,o]=u.useState([]),[d,m]=u.useState(!1),p=async c=>{if(l({...a,category_id:c,current_stage_id:null}),c){m(!0);try{const v=await Rt.getByCategory(c);o(v)}catch(v){console.error("Failed to load stages for category:",v),o([])}finally{m(!1)}}else o([])},j=c=>{c.preventDefault(),r({...a,start_date:a.start_date,end_date:a.end_date,currentStageId:a.current_stage_id||void 0}),l({name:"",description:"",category_id:null,current_stage_id:null,start_date:new Date().toISOString().split("T")[0],end_date:new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0]}),o([])};return t.jsx(st,{isOpen:e,onClose:s,title:"Create New Project",size:"lg",children:t.jsxs("form",{onSubmit:j,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Name"}),t.jsx("input",{type:"text",required:!0,value:a.name,onChange:c=>l({...a,name:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter project name"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),t.jsx("textarea",{value:a.description,onChange:c=>l({...a,description:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Project description"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),t.jsxs("select",{value:a.category_id||"",onChange:c=>p(c.target.value?parseInt(c.target.value):null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"",children:"Select a category"}),n&&n.length>0?n.map(c=>t.jsx("option",{value:c.id,children:c.name},c.id)):t.jsx("option",{value:"",disabled:!0,children:"No categories available"})]})]}),a.category_id&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Stage"}),d?t.jsxs("div",{className:"flex items-center justify-center py-4",children:[t.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),t.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Loading stages..."})]}):i.length>0?t.jsxs("select",{value:a.current_stage_id||"",onChange:c=>l({...a,current_stage_id:c.target.value?parseInt(c.target.value):null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"",children:"Select a stage"}),i.map(c=>t.jsxs("option",{value:c.id,children:[c.name," - ",c.description]},c.id))]}):t.jsx("div",{className:"text-sm text-gray-500 py-2",children:"No stages available for this category."})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),t.jsx("input",{type:"date",value:a.start_date,onChange:c=>l({...a,start_date:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),t.jsx("input",{type:"date",value:a.end_date,onChange:c=>l({...a,end_date:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx(D,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),t.jsx(D,{type:"submit",children:"Create Project"})]})]})})}function _0(){var lt,Jt,rt,cs,Xe,Lt;const{dispatch:e}=Ar(),[s,r]=u.useState("members"),[n,a]=u.useState(!1),[l,i]=u.useState(null),[o,d]=u.useState([]),[m,p]=u.useState([]),[j,c]=u.useState(""),[v,y]=u.useState(!1),[M,z]=u.useState(null),[h,x]=u.useState([]),[f,E]=u.useState([]),[A,g]=u.useState(!1),[N,b]=u.useState(null),[S,L]=u.useState(null),[ae,O]=u.useState(!1),[W,T]=u.useState(!1),[V,se]=u.useState([]),[fe,C]=u.useState(!1),[P,U]=u.useState(null),[G,K]=u.useState({name:"",email:"",passcode:"",skills:[],team_id:null}),[le,te]=u.useState({name:"",description:"",functional_unit_id:null,team_lead_id:null,team_lead_type:"team",max_capacity:10,members:[]}),[_,xe]=u.useState([]);u.useEffect(()=>{pe()},[s]),u.useEffect(()=>{(async()=>{try{const X=await bs.getAll();console.log(" Raw skills data:",X);let Ce=[];Array.isArray(X)&&(Ce=X),console.log(" Skills array:",Ce);const Nt=Ce.map(Ge=>Ge.name||Ge);xe(Nt),console.log(" Skills fetched:",Nt),console.log(" Skills array length:",Nt.length)}catch(X){console.error("Error fetching skills:",X)}})()},[]);const pe=async()=>{try{if(a(!0),i(null),s==="members"){const[F,X]=await Promise.all([Ee.getMembers(),Le.getAll({all:"true"})]);console.log(" Team members fetched:",F),console.log(" Tasks fetched:",X);const Ce=F.data||F,Nt=X.data||X;console.log(" Members array:",Ce),console.log(" Tasks array:",Nt);const Ge=await Promise.all((Ce||[]).map(async Gt=>{const ft=Nt.filter(k=>k.assignees&&k.assignees.includes(Gt.id));let w=null;try{const k=await vr.getSummary(Gt.id.toString());k&&k.summary&&(w={red:0,orange:0,yellow:0,green:0},k.summary.forEach(B=>{B.type&&B.count&&(w[B.type]=B.count)}))}catch(k){console.warn(`Failed to fetch performance flags for member ${Gt.id}:`,k)}return{...Gt,task_count:ft.length,performance_flags_summary:w}}));d(Ge),p(Ge)}else{const F=await Ee.getTeams();console.log(" Teams fetched:",F);const X=F.data||F;x(X||[]),E(X||[])}}catch(F){console.error(" Fetch team data error:",F),i("Failed to load team data")}finally{a(!1)}};u.useEffect(()=>{(async()=>{try{const X=await Ee.getTeams(),Ce=X.data||X;x(Ce||[]),console.log(" Teams for dropdown fetched:",X)}catch(X){console.error("Error fetching teams for dropdown:",X)}})()},[]),u.useEffect(()=>{if(s==="members"){const F=o.filter(X=>X.name.toLowerCase().includes(j.toLowerCase())||X.email.toLowerCase().includes(j.toLowerCase())||X.skills&&X.skills.some(Ce=>Ce.toLowerCase().includes(j.toLowerCase())));p(F)}else{const F=h.filter(X=>X.name.toLowerCase().includes(j.toLowerCase())||X.description&&X.description.toLowerCase().includes(j.toLowerCase())||X.skills&&X.skills.some(Ce=>Ce.toLowerCase().includes(j.toLowerCase())));E(F)}},[j,o,h,s]);const Te=async F=>{if(F.preventDefault(),!G.passcode||G.passcode.trim()===""){i("Passcode is required for new team members");return}try{const X=await Ee.createMember(G);d([...o,X]),y(!1),ce()}catch(X){console.error("Error creating team member:",X),i("Failed to create team member")}},Ue=async F=>{if(F.preventDefault(),!!M)try{const X={...G};(!X.passcode||X.passcode.trim()==="")&&delete X.passcode;const Ce=await Ee.updateMember(M.id.toString(),X);d(o.map(Nt=>Nt.id===M.id?Ce:Nt)),y(!1),z(null),ce()}catch(X){console.error("Error updating team member:",X),i("Failed to update team member")}},I=async F=>{if(confirm("Are you sure you want to delete this team member?"))try{await Ee.deleteMember(F.toString()),d(o.filter(X=>X.id!==F))}catch(X){console.error("Error deleting team member:",X),i("Failed to delete team member")}},Y=F=>{e({type:"SET_SELECTED_VIEW",payload:"tasks"}),e({type:"SET_FILTERS",payload:{teamMembers:[F.id.toString()]}})},ce=()=>{K({name:"",email:"",passcode:"",skills:[],team_id:null})},de=async F=>{F.preventDefault();try{const X=await Ee.createTeam(le);x([...h,X]),g(!1),ve()}catch(X){console.error("Error creating team:",X),i("Failed to create team")}},ue=async F=>{if(F.preventDefault(),!!N)try{const X=await Ee.updateTeam(N.id.toString(),le);x(h.map(Ce=>Ce.id===N.id?X:Ce)),g(!1),b(null),ve()}catch(X){console.error("Error updating team:",X),i("Failed to update team")}},ye=async F=>{if(confirm("Are you sure you want to delete this team?"))try{await Ee.deleteTeam(F.toString()),x(h.filter(X=>X.id!==F))}catch(X){console.error("Error deleting team:",X),i("Failed to delete team")}},ve=()=>{te({name:"",description:"",functional_unit_id:null,team_lead_id:null,team_lead_type:"team",max_capacity:10,members:[]})},We=F=>{z(F),K({name:F.name,email:F.email,passcode:"",skills:F.skills,team_id:F.team_ids&&F.team_ids.length>0?F.team_ids[0]:null}),y(!0)},Z=F=>{b(F),te({name:F.name,description:F.description,functional_unit_id:null,team_lead_id:null,team_lead_type:"team",max_capacity:F.max_capacity,members:[]}),g(!0)},J=async F=>{try{const X=await Ee.getTeamById(F.id.toString());L(X),O(!0)}catch(X){console.error("Error fetching team details:",X),i("Failed to fetch team details")}},me=async F=>{try{const X=await Ee.getMembers(),Ge=(X.data||X||[]).filter(Gt=>!Gt.team_ids||!Gt.team_ids.includes(F.id));se(Ge),L(F),T(!0)}catch(X){console.error("Error fetching available members:",X),i("Failed to fetch available members")}},Re=async F=>{if(S)try{await Ee.addMemberToTeam(S.id.toString(),{member_id:F});const X=await Ee.getTeamById(S.id.toString());L(X),await pe(),T(!1)}catch(X){console.error("Error adding member to team:",X),i("Failed to add member to team")}},_e=async F=>{if(S&&confirm(`Are you sure you want to remove this member from ${S.name}?`))try{await Ee.removeMemberFromTeam(S.id.toString(),F.toString());const X=await Ee.getTeamById(S.id.toString());L(X),await pe(),i(null)}catch(X){console.error("Error removing member from team:",X),i("Failed to remove member from team")}},gt=F=>{U(F),C(!0)};return n?t.jsx("div",{className:"flex items-center justify-center p-8",children:t.jsx("div",{className:"text-lg",children:"Loading team data..."})}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Team Management"}),t.jsx("p",{className:"text-gray-600",children:"Manage team members and teams"})]})}),l&&t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:t.jsx("p",{className:"text-red-800",children:l})}),t.jsx("div",{className:"border-b border-gray-200",children:t.jsxs("nav",{className:"-mb-px flex space-x-8",children:[t.jsxs("button",{onClick:()=>r("members"),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${s==="members"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[t.jsx(et,{className:"w-4 h-4"}),t.jsx("span",{children:"Team Members"})]}),t.jsxs("button",{onClick:()=>r("teams"),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${s==="teams"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[t.jsx($a,{className:"w-4 h-4"}),t.jsx("span",{children:"Teams"})]})]})}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("div",{className:"flex items-center space-x-4",children:t.jsxs("div",{className:"relative",children:[t.jsx(Tl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),t.jsx("input",{type:"text",placeholder:`Search ${s==="members"?"team members":"teams"}...`,value:j,onChange:F=>c(F.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]})}),t.jsxs(D,{onClick:()=>{s==="members"?(z(null),ce(),y(!0)):(b(null),ve(),g(!0))},className:"flex items-center space-x-2",children:[t.jsx(ht,{className:"w-4 h-4"}),t.jsxs("span",{children:["Add ",s==="members"?"Member":"Team"]})]})]}),s==="members"?t.jsx(C0,{members:m,onEdit:We,onDelete:I,onMemberClick:Y}):t.jsx(D0,{teams:f,onEdit:Z,onDelete:ye,onViewDetails:J}),t.jsx(st,{isOpen:v,onClose:()=>{y(!1),z(null),ce()},title:M?"Edit Team Member":"Create Team Member",children:t.jsxs("form",{onSubmit:M?Ue:Te,className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name"}),t.jsx("input",{type:"text",value:G.name,onChange:F=>K({...G,name:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter full name",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),t.jsx("input",{type:"email",value:G.email,onChange:F=>K({...G,email:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter email address",required:!0})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Passcode ",M&&t.jsx("span",{className:"text-gray-500 text-xs",children:"(leave empty to keep current)"})]}),t.jsx("input",{type:"text",value:G.passcode,onChange:F=>K({...G,passcode:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:M?"Leave empty to keep current passcode":"Enter passcode",required:!M}),!M&&t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Passcode is required for new team members"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assign to Team"}),t.jsxs("select",{value:G.team_id||"",onChange:F=>K({...G,team_id:F.target.value?Number(F.target.value):null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[t.jsx("option",{value:"",children:"Select a team (optional)"}),h.map(F=>t.jsx("option",{value:F.id,children:F.name},F.id))]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Skills"}),t.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:["Available skills: ",_.length]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 max-h-48 overflow-y-auto border border-gray-200 rounded-lg p-4",children:_.length>0?_.map(F=>t.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer hover:bg-gray-50 p-2 rounded",children:[t.jsx("input",{type:"checkbox",checked:G.skills.includes(F),onChange:X=>{X.target.checked?K({...G,skills:[...G.skills,F]}):K({...G,skills:G.skills.filter(Ce=>Ce!==F)})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:F})]},F)):t.jsx("div",{className:"col-span-3 text-center text-gray-500 py-4",children:"No skills available. Please add skills first."})}),G.skills.length>0&&t.jsxs("div",{className:"mt-3",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Selected skills:"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:G.skills.map(F=>t.jsx(ee,{variant:"secondary",className:"text-xs",children:F},F))})]})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[t.jsx(D,{type:"button",variant:"outline",onClick:()=>{y(!1),z(null),ce()},className:"px-6",children:"Cancel"}),t.jsx(D,{type:"submit",className:"px-6 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700",children:M?"Update Member":"Create Member"})]})]})}),t.jsx(st,{isOpen:A,onClose:()=>{g(!1),b(null),ve()},title:N?"Edit Team":"Create Team",children:t.jsxs("form",{onSubmit:N?ue:de,className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Team Name"}),t.jsx("input",{type:"text",value:le.name,onChange:F=>te({...le,name:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter team name",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Capacity"}),t.jsx("input",{type:"number",value:le.max_capacity,onChange:F=>te({...le,max_capacity:parseInt(F.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"1",max:"50",placeholder:"10"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),t.jsx("textarea",{value:le.description,onChange:F=>te({...le,description:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:3,placeholder:"Enter team description"})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[t.jsx(D,{type:"button",variant:"outline",onClick:()=>{g(!1),b(null),ve()},className:"px-6",children:"Cancel"}),t.jsx(D,{type:"submit",className:"px-6 bg-gradient-to-r from-green-500 to-teal-600 hover:from-green-600 hover:to-teal-700",children:N?"Update Team":"Create Team"})]})]})}),S&&t.jsx(st,{isOpen:ae,onClose:()=>{O(!1),L(null)},title:`${S.name} - Team Details`,children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Team Information"}),t.jsx("p",{className:"text-gray-600",children:S.description})]}),t.jsx("div",{children:t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Members"}),t.jsxs("p",{className:"text-gray-900 font-semibold",children:[t.jsx("span",{className:"text-blue-600",children:((lt=S.members)==null?void 0:lt.length)||S.member_count||0})," / ",t.jsx("span",{className:"text-gray-600",children:S.max_capacity})]}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[!((Jt=S.members)!=null&&Jt.length)&&!S.member_count||((rt=S.members)==null?void 0:rt.length)===0&&S.member_count===0?"No members":(((cs=S.members)==null?void 0:cs.length)||S.member_count)===1?"1 member":`${((Xe=S.members)==null?void 0:Xe.length)||S.member_count} members`," assigned"]})]})}),S.skills&&S.skills.length>0&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Team Skills"}),t.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:S.skills.map((F,X)=>t.jsx(ee,{variant:"secondary",children:F},X))})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Team Members"}),t.jsxs(D,{size:"sm",onClick:()=>me(S),className:"bg-blue-500 hover:bg-blue-600 text-white",disabled:S.member_count>=S.max_capacity,children:[t.jsx(eo,{className:"w-3 h-3 mr-1"}),"Add Member"]})]}),S.members&&S.members.length>0?t.jsx("div",{className:"space-y-2 mt-1",children:S.members.map(F=>{var X;return t.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:F.name}),t.jsx("p",{className:"text-sm text-gray-600",children:F.team_role})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsxs(ee,{variant:"secondary",children:[((X=F.skills)==null?void 0:X.length)||0," skills"]}),t.jsxs("div",{className:"relative group",children:[t.jsx(D,{size:"sm",variant:"outline",onClick:Ce=>{Ce.stopPropagation(),gt(F)},className:"text-blue-600 hover:text-blue-700",children:t.jsx(pr,{className:"w-3 h-3"})}),t.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-10",children:["View Details",t.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900"})]})]}),t.jsxs("div",{className:"relative group",children:[t.jsx(D,{size:"sm",variant:"outline",onClick:Ce=>{Ce.stopPropagation(),_e(F.id)},className:"text-red-600 hover:text-red-700",children:t.jsx(Up,{className:"w-3 h-3"})}),t.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-10",children:["Remove User",t.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900"})]})]})]})]},F.id)})}):t.jsxs("div",{className:"text-center py-4 text-gray-500",children:[t.jsx(et,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),t.jsx("p",{children:"No members assigned to this team"})]})]})]})}),S&&t.jsx(st,{isOpen:W,onClose:()=>{T(!1),L(null),se([])},title:`Add Member to ${S.name}`,children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"mb-4",children:[t.jsxs("p",{className:"text-sm text-gray-600",children:["Select a member to add to ",t.jsx("strong",{children:S.name})]}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Current: ",S.member_count," / ",S.max_capacity," members"]})]}),V.length>0?t.jsx("div",{className:"max-h-64 overflow-y-auto space-y-2",children:V.map(F=>t.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",onClick:()=>Re(F.id),children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-white font-semibold text-xs",children:F.name.split(" ").map(X=>X[0]).join("").toUpperCase()})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:F.name}),t.jsx("p",{className:"text-sm text-gray-600",children:F.email})]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsxs(ee,{variant:"secondary",className:"text-xs",children:[F.skills.length," skills"]}),t.jsx(D,{size:"sm",variant:"outline",className:"text-xs",children:"Add"})]})]},F.id))}):t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx(et,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),t.jsx("p",{className:"text-lg font-medium",children:"No available members"}),t.jsx("p",{className:"text-sm",children:"All team members are already assigned to this team or other teams."})]}),t.jsx("div",{className:"flex justify-end pt-4 border-t",children:t.jsx(D,{variant:"outline",onClick:()=>{T(!1),L(null),se([])},children:"Cancel"})})]})}),P&&t.jsx(st,{isOpen:fe,onClose:()=>{C(!1),U(null)},title:`${P.name} - Member Details`,children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-white font-semibold text-lg",children:P.name.split(" ").map(F=>F[0]).join("").toUpperCase()})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:P.name}),t.jsx("p",{className:"text-gray-600",children:P.team_role||"Member"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),t.jsx("p",{className:"text-gray-900",children:P.email||"Not provided"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Skills"}),t.jsxs("p",{className:"text-gray-900",children:[((Lt=P.skills)==null?void 0:Lt.length)||0," skills"]})]})]}),P.skills&&P.skills.length>0&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Skill Details"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:P.skills.map((F,X)=>t.jsx(ee,{variant:"secondary",children:F},X))})]}),t.jsx("div",{className:"flex justify-end pt-4 border-t",children:t.jsx(D,{variant:"outline",onClick:()=>{C(!1),U(null)},children:"Close"})})]})})]})}function C0({members:e,onEdit:s,onDelete:r,onMemberClick:n}){return t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(a=>{var l,i,o,d;return t.jsx(re,{className:"hover:shadow-lg transition-shadow duration-200 cursor-pointer",onClick:()=>n&&n(a),children:t.jsx(ne,{className:"p-6",children:t.jsx("div",{className:"flex items-start justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-white font-semibold text-sm",children:a.name.split(" ").map(m=>m[0]).join("").toUpperCase()})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-900 text-lg",children:a.name}),t.jsxs("p",{className:"text-sm text-gray-600 flex items-center",children:[t.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),a.email]}),a.passcode&&t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Passcode: ",t.jsx("span",{className:"font-mono bg-gray-100 px-1 rounded",children:a.passcode})]})]})]}),t.jsxs("div",{className:"mb-4 space-y-3",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Tasks"}),t.jsxs("span",{className:"text-xs bg-orange-100 text-orange-800 px-2 py-1 rounded-full",children:[a.task_count||0," tasks"]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:"bg-orange-500 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min((a.task_count||0)*10,100)}%`}})})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Skills"}),t.jsxs("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:[a.skills.length," skills"]})]}),a.skills.length>0&&t.jsxs("div",{className:"flex flex-wrap gap-1",children:[a.skills.slice(0,3).map((m,p)=>t.jsx(ee,{variant:"secondary",className:"text-xs px-2 py-1",children:m},p)),a.skills.length>3&&t.jsxs(ee,{variant:"secondary",className:"text-xs px-2 py-1",children:["+",a.skills.length-3," more"]})]})]}),a.team_names&&a.team_names.length>0&&t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Teams"}),t.jsxs("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:[a.team_names.length," team",a.team_names.length>1?"s":""]})]}),t.jsx("div",{className:"flex flex-wrap gap-1",children:a.team_names.map((m,p)=>t.jsx(ee,{variant:"default",className:"text-xs px-2 py-1 bg-green-100 text-green-800",children:m},p))})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(ee,{variant:a.is_active?"default":"secondary",className:"px-3 py-1",children:a.is_active?"Active":"Inactive"}),a.performance_flags_count>0&&t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsxs(ee,{variant:"danger",className:"px-2 py-1 text-xs",children:[" ",((l=a.performance_flags_summary)==null?void 0:l.red)||0]}),t.jsxs(ee,{variant:"warning",className:"px-2 py-1 text-xs",children:[" ",((i=a.performance_flags_summary)==null?void 0:i.orange)||0]}),t.jsxs(ee,{variant:"warning",className:"px-2 py-1 text-xs",children:[" ",((o=a.performance_flags_summary)==null?void 0:o.yellow)||0]}),t.jsxs(ee,{variant:"success",className:"px-2 py-1 text-xs",children:[" ",((d=a.performance_flags_summary)==null?void 0:d.green)||0]})]})]}),t.jsxs("div",{className:"flex space-x-1",children:[t.jsx(D,{size:"sm",variant:"outline",onClick:m=>{m.stopPropagation(),s(a)},className:"hover:bg-blue-50 hover:border-blue-300 transition-colors",children:t.jsx(la,{className:"w-3 h-3"})}),t.jsx(D,{size:"sm",variant:"outline",onClick:m=>{m.stopPropagation(),r(a.id)},className:"hover:bg-red-50 hover:border-red-300 transition-colors",children:t.jsx(Ct,{className:"w-3 h-3"})})]})]})]})})})},a.id)})})}function D0({teams:e,onEdit:s,onDelete:r,onViewDetails:n}){return!e||e.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-100 to-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx($a,{className:"w-8 h-8 text-gray-400"})}),t.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No teams found"}),t.jsx("p",{className:"text-gray-600 mb-6",children:"Create your first team to get started."}),t.jsxs(D,{className:"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700",children:[t.jsx(ht,{className:"w-4 h-4 mr-2"}),"Create Team"]})]}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(a=>t.jsx(re,{className:"hover:shadow-lg transition-shadow duration-200",children:t.jsx(ne,{className:"p-6",children:t.jsx("div",{className:"flex items-start justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-teal-600 rounded-lg flex items-center justify-center",children:t.jsx($a,{className:"w-6 h-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-900 text-lg",children:a.name}),t.jsx("p",{className:"text-sm text-gray-600",children:a.description||"No description"})]})]}),t.jsxs("div",{className:"space-y-3 mb-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx($a,{className:"w-4 h-4 text-gray-400"}),t.jsx("span",{className:"text-sm text-gray-600",children:a.functional_unit_name||"No unit"})]}),t.jsx(ee,{variant:a.is_active?"default":"secondary",className:"px-2 py-1 text-xs",children:a.is_active?"Active":"Inactive"})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Hp,{className:"w-4 h-4 text-gray-400"}),t.jsxs("span",{className:"text-sm text-gray-600",children:[a.member_count||0," / ",a.max_capacity||10," members"]}),t.jsx("div",{className:"flex-1 ml-2",children:t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min((a.member_count||0)/(a.max_capacity||10)*100,100)}%`}})})})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Fm,{className:"w-4 h-4 text-gray-400"}),t.jsx("span",{className:"text-sm text-gray-600",children:a.team_lead_name||"No team lead"})]})]}),a.skills&&a.skills.length>0&&t.jsxs("div",{className:"mb-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Team Skills"}),t.jsxs("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:[a.skills.length," skills"]})]}),t.jsxs("div",{className:"flex flex-wrap gap-1",children:[a.skills.slice(0,3).map((l,i)=>t.jsx(ee,{variant:"secondary",className:"text-xs px-2 py-1",children:l},i)),a.skills.length>3&&t.jsxs(ee,{variant:"secondary",className:"text-xs px-2 py-1",children:["+",a.skills.length-3," more"]})]})]}),t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{className:"flex space-x-1",children:[t.jsx(D,{size:"sm",variant:"outline",onClick:()=>n(a),className:"hover:bg-blue-50 hover:border-blue-300 transition-colors",children:t.jsx(et,{className:"w-3 h-3"})}),t.jsx(D,{size:"sm",variant:"outline",onClick:()=>s(a),className:"hover:bg-green-50 hover:border-green-300 transition-colors",children:t.jsx(la,{className:"w-3 h-3"})}),t.jsx(D,{size:"sm",variant:"outline",onClick:()=>r(a.id),className:"hover:bg-red-50 hover:border-red-300 transition-colors",children:t.jsx(Ct,{className:"w-3 h-3"})})]})})]})})})},a.id))})}function T0(){const[e,s]=u.useState(new Date("2025-08-11")),[r,n]=u.useState("week"),[a,l]=u.useState("team"),[i,o]=u.useState(!1);u.useState(null);const[d,m]=u.useState([]),[p,j]=u.useState([]),[c,v]=u.useState([]),[y,M]=u.useState([]);u.useState([]),u.useState([]),u.useState([]),u.useState([]);const[z,h]=u.useState(!1),[x,f]=u.useState(null),E=async C=>{try{h(!0),f(null);const P=await _a.getAll(C);m(P)}catch(P){console.error("Failed to fetch allocations:",P),f("Failed to load allocations")}finally{h(!1)}};u.useEffect(()=>{(async()=>{try{h(!0),f(null);const[P,U,G,K,le,te,_,xe]=await Promise.all([_a.getAll(),Ee.getMembers(),$e.getAll(),Le.getAll({all:"true"}),Ms.getAll(),Is.getAll(),As.getAll(),cr.getAll()]);m(P.data||P),j(U.data||U),v(G.data||G),M(K.data||K)}catch(P){console.error("Failed to fetch data:",P),f("Failed to load data")}finally{h(!1)}})()},[]);const A=async()=>{if(d.length===0&&y.length>0)try{h(!0);for(const C of y)if(C.assignees&&C.assignees.length>0){const P=C.start_date||C.startDate,U=C.end_date||C.endDate,G=C.estimated_hours||C.estimatedHours||8;if(P&&U){const K=Math.ceil((new Date(U).getTime()-new Date(P).getTime())/864e5),le=Math.min(G/Math.max(K,1),8);for(const te of C.assignees){const _={user_id:te,project_id:C.project_id||C.projectId||"",task_id:C.id,hours_per_day:Math.round(le*100)/100,start_date:new Date(P).toISOString().split("T")[0],end_date:new Date(U).toISOString().split("T")[0]};await _a.create(_)}}}await E()}catch(C){console.error("Failed to create allocations from tasks:",C),f("Failed to create initial allocations")}finally{h(!1)}};u.useEffect(()=>{d.length===0&&!z&&y.length>0&&A()},[d.length,z,y.length]);const g=C=>{const P=[],U=new Date(C);U.setDate(C.getDate()-C.getDay());for(let G=0;G<7;G++){const K=new Date(U);K.setDate(U.getDate()+G),P.push(K)}return P},N=(C,P,U)=>(d||[]).filter(K=>{var Ue,I,Y;const le=C.toISOString().split("T")[0],te=K.start_date.split("T")[0],_=K.end_date.split("T")[0],xe=le>=te&&le<=_,pe=!P||((Ue=K.user_id)==null?void 0:Ue.toString())===P,Te=!U||((I=K.project_id)==null?void 0:I.toString())===U;return P&&((Y=K.user_id)==null?void 0:Y.toString())===P&&!xe&&console.log(` Date mismatch: Looking for ${le}, allocation ${K.id} range is ${te} to ${_}`),xe&&pe&&Te}),b=(C,P)=>N(P,C).reduce((G,K)=>{const le=typeof K.hours_per_day=="string"?parseFloat(K.hours_per_day):K.hours_per_day||0;return G+le},0),S=(C,P)=>N(P,void 0,C).reduce((G,K)=>{const le=typeof K.hours_per_day=="string"?parseFloat(K.hours_per_day):K.hours_per_day||0;return G+le},0),L=(C,P)=>{const U=b(C,P);return U===0?"available":U>8?"overloaded":U>=6?"busy":"normal"},ae=C=>{switch(C){case"available":return"bg-green-100 text-green-800";case"normal":return"bg-blue-100 text-blue-800";case"busy":return"bg-yellow-100 text-yellow-800";case"overloaded":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},O=C=>{const P=new Date(e);r==="day"?P.setDate(e.getDate()+(C==="next"?1:-1)):r==="week"?P.setDate(e.getDate()+(C==="next"?7:-7)):P.setMonth(e.getMonth()+(C==="next"?1:-1)),s(P)},W=()=>{if(r==="day")return e.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});if(r==="week"){const C=g(e),P=C[0].toLocaleDateString("en-US",{month:"short",day:"numeric"}),U=C[6].toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return`${P} - ${U}`}else return e.toLocaleDateString("en-US",{year:"numeric",month:"long"})},T=async C=>{var P,U;try{const G={user_id:C.userId||"",project_id:C.projectId||"",task_id:C.taskId||void 0,hours_per_day:C.hoursPerDay||8,start_date:((P=C.startDate)==null?void 0:P.toISOString().split("T")[0])||new Date().toISOString().split("T")[0],end_date:((U=C.endDate)==null?void 0:U.toISOString().split("T")[0])||new Date().toISOString().split("T")[0]};await _a.create(G),await E(),o(!1)}catch(G){console.error("Failed to create allocation:",G),f("Failed to create allocation")}},V=()=>{const C=g(e);return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-8 gap-2 mb-4",children:[t.jsx("div",{className:"font-medium text-gray-700 p-2",children:"Team Member"}),C.map(P=>t.jsxs("div",{className:"text-center p-2",children:[t.jsx("div",{className:"font-medium text-gray-700",children:P.toLocaleDateString("en-US",{weekday:"short"})}),t.jsx("div",{className:"text-sm text-gray-500",children:P.getDate()})]},P.toISOString()))]}),p.map(P=>{var U;return t.jsx(re,{className:"overflow-hidden",children:t.jsx(ne,{className:"p-0",children:t.jsxs("div",{className:"grid grid-cols-8 gap-2",children:[t.jsxs("div",{className:"p-4 bg-gray-50 flex items-center space-x-3",children:[t.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-medium",children:P.name.charAt(0)}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-gray-900",children:P.name}),t.jsx("div",{className:"text-sm text-gray-600",children:((U=P.skills)==null?void 0:U[0])||"No skills"})]})]}),C.map(G=>{const K=N(G,P.id),le=b(P.id,G),te=L(P.id,G);return t.jsxs("div",{className:"p-2 border-l border-gray-200",children:[t.jsxs("div",{className:`rounded-lg p-2 text-center ${ae(te)}`,children:[t.jsxs("div",{className:"font-semibold",children:[le,"h"]}),t.jsxs("div",{className:"text-xs mt-1",children:[K.length," tasks"]})]}),K.length>0&&t.jsxs("div",{className:"mt-2 space-y-1",children:[K.slice(0,2).map(_=>{var Ue,I;const xe=y.find(Y=>Y.id===_.task_id),pe=c.find(Y=>Y.id===_.project_id),Te=p.find(Y=>Y.id===_.user_id);return t.jsxs("div",{className:"text-xs bg-white rounded p-1 border",title:`${pe==null?void 0:pe.name}: ${xe==null?void 0:xe.name} (${(Ue=Te==null?void 0:Te.skills)==null?void 0:Ue[0]})`,children:[t.jsx("div",{className:"font-medium truncate",children:xe==null?void 0:xe.name}),t.jsxs("div",{className:"text-gray-600",children:[_.hours_per_day,"h  ",(I=Te==null?void 0:Te.skills)==null?void 0:I[0]]})]},_.task_id||_.id)}),K.length>2&&t.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["+",K.length-2," more"]})]})]},G.toISOString())})]})})},P.id)})]})},se=()=>{const C=g(e);return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-8 gap-2 mb-4",children:[t.jsx("div",{className:"font-medium text-gray-700 p-2",children:"Project"}),C.map(P=>t.jsxs("div",{className:"text-center p-2",children:[t.jsx("div",{className:"font-medium text-gray-700",children:P.toLocaleDateString("en-US",{weekday:"short"})}),t.jsx("div",{className:"text-sm text-gray-500",children:P.getDate()})]},P.toISOString()))]}),c.map(P=>t.jsx(re,{className:"overflow-hidden",children:t.jsx(ne,{className:"p-0",children:t.jsxs("div",{className:"grid grid-cols-8 gap-2",children:[t.jsxs("div",{className:"p-4 bg-gray-50 flex items-center space-x-3",children:[t.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-full flex items-center justify-center text-white",children:t.jsx(br,{className:"w-5 h-5"})}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-gray-900",children:P.name}),t.jsx("div",{className:"text-sm text-gray-600",children:P.category})]})]}),C.map(U=>{const G=N(U,void 0,P.id),K=S(P.id,U),le=new Set(G.map(te=>te.user_id)).size;return t.jsxs("div",{className:"p-2 border-l border-gray-200",children:[t.jsxs("div",{className:"rounded-lg p-2 text-center bg-blue-100 text-blue-800",children:[t.jsxs("div",{className:"font-semibold",children:[K,"h"]}),t.jsxs("div",{className:"text-xs mt-1",children:[le," people"]})]}),G.length>0&&t.jsxs("div",{className:"mt-2 space-y-1",children:[G.slice(0,2).map(te=>{const _=p.find(pe=>pe.id===te.user_id),xe=y.find(pe=>pe.id===te.task_id);return t.jsxs("div",{className:"text-xs bg-white rounded p-1 border",title:`${_==null?void 0:_.name}: ${xe==null?void 0:xe.name}`,children:[t.jsx("div",{className:"font-medium truncate",children:_==null?void 0:_.name}),t.jsxs("div",{className:"text-gray-600",children:[te.hours_per_day,"h"]})]},`${te.user_id}-${te.task_id}`)}),G.length>2&&t.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["+",G.length-2," more"]})]})]},U.toISOString())})]})})},P.id))]})},fe=()=>a==="team"?t.jsx("div",{className:"space-y-6",children:p.map(C=>{const P=N(e,C.id),U=b(C.id,e),G=L(C.id,e);return t.jsxs(re,{children:[t.jsx(ze,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center text-white font-medium text-lg",children:C.name.charAt(0)}),t.jsxs("div",{children:[t.jsx(Fe,{children:C.name}),t.jsx("p",{className:"text-sm text-gray-600",children:C.skills.join(", ")})]})]}),t.jsx("div",{className:"text-right",children:t.jsxs(ee,{variant:G==="available"?"success":G==="overloaded"?"danger":G==="busy"?"warning":"primary",children:[U,"h allocated"]})})]})}),t.jsx(ne,{children:P.length===0?t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx(to,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),t.jsx("p",{children:"No tasks allocated for this day"})]}):t.jsx("div",{className:"space-y-3",children:P.map(K=>{const le=y.find(_=>_.id===K.taskId),te=c.find(_=>_.id===K.projectId);return t.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"font-medium text-gray-900",children:le==null?void 0:le.name}),t.jsx("div",{className:"text-sm text-gray-600",children:te==null?void 0:te.name}),t.jsxs("div",{className:"flex items-center mt-1 space-x-4",children:[t.jsx(ee,{variant:"secondary",size:"sm",children:le==null?void 0:le.priority}),t.jsx(ee,{variant:(le==null?void 0:le.status)==="completed"?"success":(le==null?void 0:le.status)==="in-progress"?"primary":(le==null?void 0:le.status)==="blocked"?"danger":"default",size:"sm",children:le==null?void 0:le.status})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("div",{className:"font-semibold text-lg",children:[K.hoursPerDay,"h"]}),t.jsx("div",{className:"text-sm text-gray-600",children:"allocated"})]})]},K.taskId)})})})]},C.id)})}):t.jsx("div",{className:"space-y-6",children:c.map(C=>{const P=N(e,void 0,C.id),U=S(C.id,e),G=new Set(P.map(K=>K.userId)).size;return t.jsxs(re,{children:[t.jsx(ze,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-full flex items-center justify-center text-white",children:t.jsx(br,{className:"w-6 h-6"})}),t.jsxs("div",{children:[t.jsx(Fe,{children:C.name}),t.jsx("p",{className:"text-sm text-gray-600",children:C.category})]})]}),t.jsx("div",{className:"text-right",children:t.jsxs(ee,{variant:"primary",children:[U,"h  ",G," people"]})})]})}),t.jsx(ne,{children:P.length===0?t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx(br,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),t.jsx("p",{children:"No allocations for this project today"})]}):t.jsx("div",{className:"space-y-3",children:P.map(K=>{const le=p.find(_=>_.id===K.userId),te=y.find(_=>_.id===K.taskId);return t.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"font-medium text-gray-900",children:te==null?void 0:te.name}),t.jsxs("div",{className:"text-sm text-gray-600",children:["Assigned to: ",le==null?void 0:le.name]}),t.jsxs("div",{className:"flex items-center mt-1 space-x-4",children:[t.jsx(ee,{variant:"secondary",size:"sm",children:te==null?void 0:te.priority}),t.jsx(ee,{variant:(te==null?void 0:te.status)==="completed"?"success":(te==null?void 0:te.status)==="in-progress"?"primary":(te==null?void 0:te.status)==="blocked"?"danger":"default",size:"sm",children:te==null?void 0:te.status})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("div",{className:"font-semibold text-lg",children:[K.hoursPerDay,"h"]}),t.jsx("div",{className:"text-sm text-gray-600",children:"allocated"})]})]},`${K.userId}-${K.taskId}`)})})})]},C.id)})});return t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Daily Allocations"}),t.jsx("p",{className:"text-gray-600",children:"View team member and project task allocations"})]}),t.jsx(D,{icon:t.jsx(ht,{className:"w-4 h-4"}),onClick:()=>o(!0),children:"Add Allocation"})]}),t.jsxs("div",{className:"flex items-center justify-between bg-white p-4 rounded-lg border border-gray-200",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(D,{variant:"ghost",size:"sm",onClick:()=>O("prev"),children:t.jsx(_p,{className:"w-4 h-4"})}),t.jsx("div",{className:"font-medium text-gray-900 min-w-[200px] text-center",children:W()}),t.jsx(D,{variant:"ghost",size:"sm",onClick:()=>O("next"),children:t.jsx(js,{className:"w-4 h-4"})})]}),t.jsx(D,{variant:"outline",size:"sm",onClick:()=>s(new Date),children:"Today"})]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Group by:"}),t.jsxs(D,{variant:a==="team"?"primary":"ghost",size:"sm",onClick:()=>l("team"),children:[t.jsx(et,{className:"w-4 h-4 mr-1"}),"Team"]}),t.jsxs(D,{variant:a==="project"?"primary":"ghost",size:"sm",onClick:()=>l("project"),children:[t.jsx(br,{className:"w-4 h-4 mr-1"}),"Project"]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(D,{variant:r==="day"?"primary":"ghost",size:"sm",onClick:()=>n("day"),children:"Day"}),t.jsx(D,{variant:r==="week"?"primary":"ghost",size:"sm",onClick:()=>n("week"),children:"Week"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[t.jsx(re,{children:t.jsx(ne,{className:"p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"p-2 rounded-lg bg-blue-50",children:t.jsx(to,{className:"w-6 h-6 text-blue-600"})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Team"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:p.length})]})]})})}),t.jsx(re,{children:t.jsx(ne,{className:"p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"p-2 rounded-lg bg-green-50",children:t.jsx(_r,{className:"w-6 h-6 text-green-600"})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Available"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:p.filter(C=>L(C.id,e)==="available").length})]})]})})}),t.jsx(re,{children:t.jsx(ne,{className:"p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"p-2 rounded-lg bg-yellow-50",children:t.jsx(Ps,{className:"w-6 h-6 text-yellow-600"})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Busy"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:p.filter(C=>L(C.id,e)==="busy").length})]})]})})}),t.jsx(re,{children:t.jsx(ne,{className:"p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"p-2 rounded-lg bg-red-50",children:t.jsx(Wt,{className:"w-6 h-6 text-red-600"})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Overloaded"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:p.filter(C=>L(C.id,e)==="overloaded").length})]})]})})})]}),x&&t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Wt,{className:"w-5 h-5 text-red-400 mr-2"}),t.jsx("span",{className:"text-red-800",children:x})]})}),z&&t.jsxs("div",{className:"flex items-center justify-center py-12",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),t.jsx("span",{className:"ml-2 text-gray-600",children:"Loading allocations..."})]}),!z&&(r==="week"?a==="team"?V():se():fe()),t.jsx(E0,{isOpen:i,onClose:()=>o(!1),onSubmit:T,users:p,projects:c,tasks:y})]})}function E0({isOpen:e,onClose:s,onSubmit:r,users:n,projects:a,tasks:l}){const[i,o]=u.useState({userId:"",projectId:"",taskId:"",hoursPerDay:8,startDate:new Date().toISOString().split("T")[0],endDate:new Date(Date.now()+6048e5).toISOString().split("T")[0]}),d=p=>{p.preventDefault(),r({...i,startDate:new Date(i.startDate),endDate:new Date(i.endDate)}),o({userId:"",projectId:"",taskId:"",hoursPerDay:8,startDate:new Date().toISOString().split("T")[0],endDate:new Date(Date.now()+7*24*60*60*1e3).toISOString().split("T")[0]})},m=(l||[]).filter(p=>!i.projectId||p.projectId===i.projectId);return t.jsx(st,{isOpen:e,onClose:s,title:"Add Team Allocation",size:"lg",children:t.jsxs("form",{onSubmit:d,className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Team Member *"}),t.jsxs("select",{required:!0,value:i.userId,onChange:p=>o({...i,userId:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"",children:"Select Team Member"}),n.map(p=>t.jsx("option",{value:p.id,children:p.name},p.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project *"}),t.jsxs("select",{required:!0,value:i.projectId,onChange:p=>o({...i,projectId:p.target.value,taskId:""}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"",children:"Select Project"}),a.map(p=>t.jsx("option",{value:p.id,children:p.name},p.id))]})]}),t.jsxs("div",{className:"col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Task *"}),t.jsxs("select",{required:!0,value:i.taskId,onChange:p=>o({...i,taskId:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:!i.projectId,children:[t.jsx("option",{value:"",children:"Select Task"}),m.map(p=>t.jsx("option",{value:p.id,children:p.name},p.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hours per Day"}),t.jsx("input",{type:"number",min:"0.5",max:"12",step:"0.5",value:i.hoursPerDay,onChange:p=>o({...i,hoursPerDay:parseFloat(p.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),t.jsx("input",{type:"date",value:i.startDate,onChange:p=>o({...i,startDate:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),t.jsx("input",{type:"date",value:i.endDate,onChange:p=>o({...i,endDate:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx(D,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),t.jsx(D,{type:"submit",children:"Add Allocation"})]})]})})}function P0(){const[e,s]=u.useState("categories"),[r,n]=u.useState(!1),[a,l]=u.useState(null),[i,o]=u.useState(!1),[d,m]=u.useState(null),[p,j]=u.useState("eLearning Design"),c=async I=>{try{V(!0);const Y=f.find(ce=>ce.name===I);if(Y){console.log("Loading stages for category:",I,"ID:",Y.id);const ce=await Rt.getByCategory(Y.id);console.log("Stages data received:",ce),W(ce)}}catch(Y){console.error("Failed to load stages for category:",Y),W([])}finally{V(!1)}},[v,y]=u.useState([]),[M,z]=u.useState([]),[h,x]=u.useState("admin"),[f,E]=u.useState([]),[A,g]=u.useState([]),[N,b]=u.useState(!0),[S,L]=u.useState([{id:"1",name:"Content Development Unit",description:"Responsible for creating and developing educational content",skills:["Content Writers","Instructional Designers"],lead:"Sarah Johnson",isDefault:!0}]),{signUp:ae}=na(),[O,W]=u.useState([]),[T,V]=u.useState(!1);u.useEffect(()=>{(async()=>{var Y;try{b(!0);const[ce,de]=await Promise.all([er.getAll(),bs.getAll()]);if(E(ce),g(de),ce.length>0&&(ce.find(ve=>ve.name===p)||j(ce[0].name)),ce.length>0){const ye=(Y=ce.find(ve=>ve.name===p))==null?void 0:Y.id;if(ye){console.log("Initial load - Loading stages for category:",p,"ID:",ye);const ve=await Rt.getByCategory(ye);console.log("Initial stages data received:",ve),W(ve)}}y([{id:"1",name:"Admin User",email:"admin@company.com",role:"admin",createdAt:new Date,isActive:!0}]);const ue=await Ee.getAll();z(ue)}catch(ce){console.error("Failed to load data:",ce)}finally{b(!1)}})()},[p]);const se=[{key:"categories",label:"Categories",icon:$p},{key:"skills",label:"Skills",icon:et},{key:"stages",label:"Project Stages",icon:Zn}],fe=async(I,Y)=>{var ce;try{if(I==="category")if(a!=null&&a.id){const de=await er.update(a.id,{name:Y.name,description:Y.description||null});E(f.map(ue=>ue.id===a.id?de:ue))}else{const de=await er.create({name:Y.name,description:Y.description||null});E([...f,de])}else if(I==="skill")if(a!=null&&a.id){const de=await bs.update(a.id,{name:Y.name,description:Y.description||null});g(A.map(ue=>ue.id===a.id?de:ue))}else{const de=await bs.create({name:Y.name,description:Y.description||null});g([...A,de])}else if(I==="stage")try{if(a!=null&&a.id){const de=await Rt.update(a.id,{name:Y.name,description:Y.description||null});await c(p)}else{const de=await Rt.create({name:Y.name,description:Y.description||null,order_index:O.length+1}),ue=(ce=f.find(ye=>ye.name===p))==null?void 0:ce.id;ue&&await si.create({category_id:ue,stage_id:de.id,order_index:O.length+1,is_default:!1}),await c(p)}}catch(de){console.error("Failed to save stage:",de),alert("Failed to save stage. Please try again.")}else if(I==="admin-user"){U(Y,"admin");return}else if(I==="team-user"){U(Y,"team");return}else if(I==="functional-unit"){const de={id:Date.now().toString(),name:Y.name,description:Y.description||"",skills:Y.skills||[],lead:Y.lead||"",isDefault:!1};L([...S,de])}n(!1),l(null)}catch(de){console.error("Failed to add item:",de),alert("Failed to add item. Please try again.")}},C=async(I,Y)=>{I==="category"||I==="skill"?(l({...Y,type:I}),n(!0)):(l({...Y,type:I}),n(!0))},P=async(I,Y)=>{var ce;try{if(I==="category")await er.delete(Y),E(f.filter(de=>de.id!==Y));else if(I==="skill")await bs.delete(Y),g(A.filter(de=>de.id!==Y));else if(I==="stage")try{const de=(ce=f.find(ue=>ue.name===p))==null?void 0:ce.id;if(de)try{const ye=(await si.getByCategory(de)).find(ve=>ve.stage_id===Y);ye&&await si.delete(ye.id)}catch{console.log("No stage template found to delete")}await Rt.delete(Y),W(O.filter(ue=>ue.id!==Y))}catch(de){console.error("Failed to delete stage:",de),alert("Failed to delete stage. Please try again.")}else I==="admin-user"?y(v.filter(de=>de.id!==Y)):I==="team-user"?le(Y):I==="functional-unit"&&L(S.filter(de=>de.id!==Y))}catch(de){console.error("Failed to delete item:",de),alert("Failed to delete item. Please try again.")}},U=async(I,Y)=>{try{if(Y==="admin"){const{data:ce,error:de}=await ae(I.email,I.password,I.name);if(de)throw de;if(ce.user){const ue={id:ce.user.id,name:I.name,email:I.email,role:"admin",createdAt:new Date,isActive:!0};y([...v,ue])}}else{const ce={name:I.name,email:I.email,skills:I.skills||[],passcode:I.passcode||Math.random().toString(36).substring(2,8).toUpperCase(),isActive:I.isActive!==!1,performanceFlags:[]},de=await Ee.create(ce),ue={...ce,id:de.id};z([...M,ue])}n(!1),l(null)}catch(ce){console.error("Failed to create admin user:",ce),alert(`Failed to create user: ${ce.message}`)}},G=async(I,Y)=>{try{if(Y==="admin"){alert("Admin user access control requires server-side implementation");return}else{const ce=M.find(de=>de.id===I);if(ce){const de={...ce,isActive:!ce.isActive};await Ee.update(I,de),z(M.map(ue=>ue.id===I?de:ue))}}}catch(ce){console.error("Failed to toggle user access:",ce),alert("Failed to toggle user access")}},K=async(I,Y)=>{m(I),x(Y),o(!0)},le=async I=>{try{z(M.filter(Y=>Y.id!==I))}catch(Y){console.error("Failed to delete team member:",Y)}},te=async(I,Y)=>{var ce;try{console.log("moveStage called:",{stageId:I,direction:Y,currentStages:O});const de=[...O].sort((Z,J)=>(Z.template_order||Z.order_index)-(J.template_order||J.order_index)),ue=de.findIndex(Z=>Z.id===I);if(console.log("Stage index found:",ue),ue===-1){console.log("Stage not found, returning");return}const ye=[...de],ve=Y==="up"?ue-1:ue+1;if(console.log("Target index:",ve),ve<0||ve>=ye.length){console.log("Target index out of bounds, returning");return}[ye[ue],ye[ve]]=[ye[ve],ye[ue]],console.log("Stages swapped"),ye.forEach((Z,J)=>{Z.template_order=J+1}),console.log("Order numbers updated:",ye.map(Z=>({id:Z.id,order:Z.template_order}))),W(ye),console.log("Stages state updated");const We=(ce=f.find(Z=>Z.name===p))==null?void 0:ce.id;if(We){const Z=ye.map((J,me)=>({stage_id:J.id,order:me+1}));console.log("Sending reorder request:",{categoryId:We,stageOrders:Z}),await Rt.reorder(We,Z),console.log("Reorder request completed successfully")}}catch(de){console.error("Failed to reorder stages:",de),alert("Failed to reorder stages. Please try again.")}},_=()=>t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Project Categories"}),t.jsx(D,{icon:t.jsx(ht,{className:"w-4 h-4"}),onClick:()=>{l({type:"category"}),n(!0)},children:"Add Category"})]}),N?t.jsx("div",{className:"flex items-center justify-center py-8",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Loading categories..."})]})}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:f.map(I=>t.jsx(re,{className:"hover:shadow-md transition-shadow",children:t.jsx(ne,{className:"p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900",children:I.name}),t.jsx("p",{className:"text-sm text-gray-600",children:I.isDefault?"Default category":"Custom category"})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(D,{variant:"ghost",size:"sm",onClick:()=>C("category",I),children:t.jsx(Ys,{className:"w-4 h-4"})}),!I.isDefault&&t.jsx(D,{variant:"ghost",size:"sm",onClick:()=>P("category",I.id),children:t.jsx(Ct,{className:"w-4 h-4"})})]})]})})},I.id))})]}),xe=()=>t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Team Skills"}),t.jsx(D,{icon:t.jsx(ht,{className:"w-4 h-4"}),onClick:()=>{l({type:"skill"}),n(!0)},children:"Add Skill"})]}),N?t.jsx("div",{className:"flex items-center justify-center py-8",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Loading skills..."})]})}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:A.map(I=>t.jsx(re,{className:"hover:shadow-md transition-shadow",children:t.jsx(ne,{className:"p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900",children:I.name}),t.jsx("p",{className:"text-sm text-gray-600",children:I.isDefault?"Default skill":"Custom skill"})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(D,{variant:"ghost",size:"sm",onClick:()=>C("skill",I),children:t.jsx(Ys,{className:"w-4 h-4"})}),!I.isDefault&&t.jsx(D,{variant:"ghost",size:"sm",onClick:()=>P("skill",I.id),children:t.jsx(Ct,{className:"w-4 h-4"})})]})]})})},I.id))})]}),pe=()=>t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Project Stages"}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("select",{value:p,onChange:I=>{j(I.target.value),c(I.target.value)},className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:f.map(I=>t.jsx("option",{value:I.name,children:I.name},I.id))}),t.jsx(D,{icon:t.jsx(ht,{className:"w-4 h-4"}),onClick:()=>{l({type:"stage"}),n(!0)},children:"Add Stage"})]})]}),t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[t.jsxs("h4",{className:"font-medium text-blue-900 mb-2",children:["Category: ",p]}),t.jsxs("p",{className:"text-sm text-blue-700",children:["These stages are specific to ",t.jsx("strong",{children:p})," projects. Each category can have its own unique workflow."]})]}),t.jsx(re,{children:t.jsx(ne,{className:"p-0",children:t.jsx("div",{className:"space-y-2 p-4",children:T?t.jsx("div",{className:"flex items-center justify-center py-8",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Loading stages..."})]})}):O.length===0?t.jsxs("div",{className:"text-center py-8",children:[t.jsxs("div",{className:"text-gray-500 mb-4",children:[t.jsx(Zn,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),t.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"No stages found"}),t.jsx("p",{className:"text-gray-600",children:"No stages have been created for this category yet."})]}),t.jsx(D,{icon:t.jsx(ht,{className:"w-4 h-4"}),onClick:()=>{l({type:"stage"}),n(!0)},children:"Add First Stage"})]}):O.sort((I,Y)=>(I.template_order||I.order_index)-(Y.template_order||Y.order_index)).map((I,Y,ce)=>t.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("div",{className:"flex flex-col space-y-1",children:[t.jsx(D,{variant:"ghost",size:"sm",onClick:()=>te(I.id,"up"),disabled:Y===0,className:"h-6 w-6 p-0",children:""}),t.jsx(D,{variant:"ghost",size:"sm",onClick:()=>te(I.id,"down"),disabled:Y===ce.length-1,className:"h-6 w-6 p-0",children:""})]}),t.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-blue-100 text-blue-600 rounded-full font-semibold text-sm",children:I.template_order||I.order_index}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900",children:I.name}),t.jsx("p",{className:"text-sm text-gray-600",children:I.description})]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[I.is_default&&t.jsx(ee,{variant:"secondary",size:"sm",children:"Default"}),t.jsx(D,{variant:"ghost",size:"sm",onClick:()=>C("stage",I),children:t.jsx(Ys,{className:"w-4 h-4"})}),!I.is_default&&t.jsx(D,{variant:"ghost",size:"sm",onClick:()=>P("stage",I.id),children:t.jsx(Ct,{className:"w-4 h-4"})})]})]},I.id))})})})]}),Te=()=>t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"User Management"}),t.jsxs("div",{className:"flex items-center space-x-2 bg-gray-100 rounded-lg p-1",children:[t.jsx(D,{variant:h==="admin"?"primary":"ghost",size:"sm",onClick:()=>x("admin"),children:"Admin Users"}),t.jsx(D,{variant:h==="team"?"primary":"ghost",size:"sm",onClick:()=>x("team"),children:"Team Members"})]})]}),t.jsxs(D,{icon:t.jsx(ht,{className:"w-4 h-4"}),onClick:()=>{l({type:h==="admin"?"admin-user":"team-user"}),n(!0)},children:["Add ",h==="admin"?"Admin User":"Team Member"]})]}),t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[t.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:h==="admin"?"Admin User Management":"Team Member Management"}),t.jsx("p",{className:"text-sm text-blue-700",children:h==="admin"?"Admin users can access the full project management system. They can manage projects, teams, tasks, and settings.":"Team members can access the team portal to view their tasks and performance. They use email and passcode to login."})]}),t.jsx(re,{children:t.jsx(ne,{className:"p-0",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:h==="admin"?"Admin User":"Team Member"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),h==="team"&&t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Passcode"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:h==="admin"?"Role":"Skills"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:h==="admin"?"Created":"Performance"}),t.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(h==="admin"?v:M).map(I=>{var Y,ce,de,ue;return t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:`w-8 h-8 ${h==="admin"?"bg-blue-500":"bg-green-500"} rounded-full flex items-center justify-center text-white text-sm font-medium`,children:I.name.charAt(0).toUpperCase()}),t.jsx("div",{className:"ml-3",children:t.jsx("div",{className:"text-sm font-medium text-gray-900",children:I.name})})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:I.email}),h==="team"&&t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("code",{className:"text-xs bg-gray-100 px-2 py-1 rounded font-mono",children:I.passcode})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:h==="admin"?t.jsx(ee,{variant:"primary",size:"sm",children:I.role}):t.jsxs("div",{className:"flex flex-wrap gap-1",children:[(Y=I.skills)==null?void 0:Y.slice(0,2).map((ye,ve)=>t.jsx(ee,{variant:"secondary",size:"sm",children:ye},ve)),((ce=I.skills)==null?void 0:ce.length)>2&&t.jsxs(ee,{variant:"secondary",size:"sm",children:["+",I.skills.length-2]})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.jsx(ee,{variant:I.isActive?"success":"secondary",children:I.isActive?"Active":"Disabled"})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:h==="admin"?((de=I.createdAt)==null?void 0:de.toLocaleDateString())||"N/A":t.jsx("div",{className:"flex space-x-1",children:(ue=I.performanceFlags)==null?void 0:ue.slice(0,3).map(ye=>t.jsx("div",{className:`text-xs px-2 py-1 rounded ${ye.type==="gold"?"bg-yellow-500 text-white":ye.type==="green"?"bg-green-500 text-white":ye.type==="orange"?"bg-orange-500 text-white":"bg-red-500 text-white"}`,title:ye.reason,children:ye.type},ye.id))})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:t.jsxs(D,{variant:"ghost",size:"sm",onClick:()=>P("user",I.id),children:[t.jsx(D,{variant:"ghost",size:"sm",onClick:()=>K(I,h),title:h==="admin"?"Reset Password":"Reset Passcode",children:t.jsx(Ip,{className:"w-4 h-4"})}),t.jsx(D,{variant:"ghost",size:"sm",onClick:()=>G(I.id,h),title:I.isActive?"Disable Access":"Enable Access",children:I.isActive?t.jsx(Dl,{className:"w-4 h-4"}):t.jsx(pr,{className:"w-4 h-4"})}),t.jsx(D,{variant:"ghost",size:"sm",onClick:()=>P(h==="admin"?"admin-user":"team-user",I.id),children:t.jsx(Ct,{className:"w-4 h-4"})})]})})]},I.id)})})]})})})})]}),Ue=()=>t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Functional Units"}),t.jsx(D,{icon:t.jsx(ht,{className:"w-4 h-4"}),onClick:()=>{l({type:"functional-unit"}),n(!0)},children:"Add Functional Unit"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:S.map(I=>t.jsx(re,{className:"hover:shadow-md transition-shadow",children:t.jsx(ne,{className:"p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900",children:I.name}),t.jsx("p",{className:"text-sm text-gray-600",children:I.description}),I.skills&&I.skills.length>0&&t.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:I.skills.map((Y,ce)=>t.jsx(ee,{variant:"secondary",size:"sm",children:Y},ce))}),I.lead&&t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Lead: ",I.lead]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(D,{variant:"ghost",size:"sm",onClick:()=>C("functional-unit",I),children:t.jsx(Ys,{className:"w-4 h-4"})}),!I.isDefault&&t.jsx(D,{variant:"ghost",size:"sm",onClick:()=>P("functional-unit",I.id),children:t.jsx(Ct,{className:"w-4 h-4"})})]})]})})},I.id))})]});return t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsx("div",{className:"relative",children:t.jsx("div",{className:"rounded-2xl bg-gradient-to-r from-indigo-600 via-blue-600 to-cyan-500 text-white p-6 shadow-lg",children:t.jsx("div",{className:"flex items-center justify-between gap-6",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Settings"}),t.jsx("p",{className:"text-white/80",children:"Manage categories, skills, and project stages"})]})})})}),t.jsx("div",{className:"border-b border-gray-200",children:t.jsx("nav",{className:"-mb-px flex space-x-8",children:se.map(I=>t.jsxs("button",{onClick:()=>s(I.key),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${e===I.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[t.jsx(I.icon,{className:"w-4 h-4"}),t.jsx("span",{children:I.label})]},I.key))})}),t.jsxs("div",{children:[e==="categories"&&_(),e==="skills"&&xe(),e==="stages"&&pe(),e==="users"&&Te(),e==="functional-units"&&Ue()]}),t.jsx(M0,{isOpen:r,onClose:()=>{n(!1),l(null)},onSubmit:fe,editingItem:a})]})}function M0({isOpen:e,onClose:s,onSubmit:r,editingItem:n}){const[a,l]=u.useState({name:"",description:"",email:"",password:"",showPassword:!1,skills:[],lead:""});u.useEffect(()=>{l(n?{name:n.name||"",description:n.description||"",email:n.email||"",password:"",showPassword:!1,skills:n.skills||[],lead:n.lead||""}:{name:"",description:"",email:"",password:"",showPassword:!1,skills:[],lead:""})},[n]);const i=d=>{d.preventDefault(),n!=null&&n.type&&r(n.type,a),l({name:"",description:"",email:"",password:"",showPassword:!1,skills:[],lead:""})},o=()=>{if(!n)return"Add Item";const d=n.id?"Edit":"Add",m=n.type==="category"?"Category":n.type==="skill"?"Skill":n.type==="stage"?"Stage":n.type==="functional-unit"?"Functional Unit":"Admin User";return`${d} ${m}`};return t.jsx(st,{isOpen:e,onClose:s,title:o(),children:t.jsxs("form",{onSubmit:i,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name"}),t.jsx("input",{type:"text",required:!0,value:a.name,onChange:d=>l({...a,name:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:`Enter ${(n==null?void 0:n.type)||"item"} name`})]}),((n==null?void 0:n.type)==="admin-user"||(n==null?void 0:n.type)==="team-user")&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),t.jsx("input",{type:"email",required:!0,value:a.email,onChange:d=>l({...a,email:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter email address"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:a.showPassword?"text":"password",required:!0,value:a.password,onChange:d=>l({...a,password:d.target.value}),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter password",minLength:6}),t.jsx("button",{type:"button",onClick:()=>l({...a,showPassword:!a.showPassword}),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:a.showPassword?t.jsx(Dl,{className:"w-4 h-4 text-gray-400"}):t.jsx(pr,{className:"w-4 h-4 text-gray-400"})})]})]})]}),((n==null?void 0:n.type)==="stage"||(n==null?void 0:n.type)==="functional-unit")&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),t.jsx("textarea",{value:a.description,onChange:d=>l({...a,description:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:`Enter ${(n==null?void 0:n.type)==="stage"?"stage":"functional unit"} description`})]}),(n==null?void 0:n.type)==="functional-unit"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Skills"}),t.jsx("div",{className:"grid grid-cols-3 gap-2 max-h-32 overflow-y-auto border border-gray-300 rounded-lg p-2",children:["Content Writers","Instructional Designers","Graphic Designers","Developers","Animators","Tech","Sales","Marketing","QA"].map(d=>t.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:a.skills.includes(d),onChange:m=>{m.target.checked?l({...a,skills:[...a.skills,d]}):l({...a,skills:a.skills.filter(p=>p!==d)})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:d})]},d))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unit Lead (Optional)"}),t.jsx("input",{type:"text",value:a.lead,onChange:d=>l({...a,lead:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter unit lead name"})]})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx(D,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),t.jsx(D,{type:"submit",children:n!=null&&n.id?"Update":"Add"})]})]})})}function I0(){const[e,s]=u.useState("month"),[r,n]=u.useState("overview"),[a,l]=u.useState("all"),[i,o]=u.useState("all"),[d,m]=u.useState(!0),[p,j]=u.useState(!1),[c,v]=u.useState({projects:[],tasks:[],teamMembers:[],categories:[],skills:[]});u.useEffect(()=>{y()},[]);const y=async()=>{try{m(!0);const[g,N,b,S,L]=await Promise.all([$e.getAll(),Le.getAll({all:"true"}),Ee.getAll(),er.getAll(),bs.getAll()]);v({projects:g.data||g,tasks:N.data||N,teamMembers:b.data||b,categories:S.data||S,skills:L.data||L})}catch(g){console.error("Failed to load analytics data:",g)}finally{m(!1)}},M=async()=>{j(!0),await y(),j(!1)},z=u.useMemo(()=>{const g=a==="all"?c.projects||[]:(c.projects||[]).filter(O=>O.category_id===parseInt(a)),N=i==="all"?c.tasks||[]:(c.tasks||[]).filter(O=>O.skills&&O.skills.includes(parseInt(i))),b=new Date,S={week:7,month:30,quarter:90,year:365}[e],L=(c.tasks||[]).filter(O=>{const W=new Date(O.created_at);return(b.getTime()-W.getTime())/(1e3*3600*24)<=S}),ae=(c.projects||[]).filter(O=>{const W=new Date(O.created_at);return(b.getTime()-W.getTime())/(1e3*3600*24)<=S});return{projectStats:{total:g.length,active:g.filter(O=>O.status==="active").length,completed:g.filter(O=>O.status==="completed").length,onHold:g.filter(O=>O.status==="on-hold").length,recent:ae.length,avgDuration:g.length>0?Math.round(g.reduce((O,W)=>{if(W.start_date&&W.end_date){const T=new Date(W.start_date),V=new Date(W.end_date);return O+(V.getTime()-T.getTime())/(1e3*3600*24)}return O},0)/g.length):0},taskStats:{total:N.length,completed:N.filter(O=>O.status==="completed").length,inProgress:N.filter(O=>O.status==="in-progress").length,overdue:N.filter(O=>{if(!O.end_date||O.status==="completed")return!1;const W=new Date;W.setHours(0,0,0,0);const T=new Date(O.end_date);return T.setHours(0,0,0,0),T<W}).length,recent:L.length,avgCompletionTime:N.filter(O=>O.status==="completed").length>0?Math.round(N.filter(O=>O.status==="completed").reduce((O,W)=>{if(W.created_at&&W.updated_at){const T=new Date(W.created_at),V=new Date(W.updated_at);return O+(V.getTime()-T.getTime())/(1e3*3600*24)}return O},0)/N.filter(O=>O.status==="completed").length):0},teamStats:{total:(c.teamMembers||[]).length,active:(c.teamMembers||[]).filter(O=>N.some(W=>W.assignees&&W.assignees.includes(O.id)&&W.status!=="completed")).length,available:(c.teamMembers||[]).filter(O=>!N.some(W=>W.assignees&&W.assignees.includes(O.id)&&W.status!=="completed")).length,utilization:(c.teamMembers||[]).length>0?Math.round((c.teamMembers||[]).filter(O=>N.some(W=>W.assignees&&W.assignees.includes(O.id)&&W.status!=="completed")).length/(c.teamMembers||[]).length*100):0},productivity:{completionRate:N.length>0?Math.round(N.filter(O=>O.status==="completed").length/N.length*100):0,averageProgress:g.length>0?Math.round(g.reduce((O,W)=>O+(W.progress||0),0)/g.length):0,efficiency:N.length>0?Math.round(N.filter(O=>O.status==="completed").length/N.length*100):0},trends:{taskGrowth:L.length>0?Math.round(L.length/(c.tasks||[]).length*100):0,projectGrowth:ae.length>0?Math.round(ae.length/(c.projects||[]).length*100):0,completionTrend:L.filter(O=>O.status==="completed").length>0?Math.round(L.filter(O=>O.status==="completed").length/L.length*100):0}}},[c,e,a,i]),h=u.useMemo(()=>(c.categories||[]).map(g=>({name:g.name,count:(c.projects||[]).filter(N=>N.category_id===g.id).length,percentage:(c.projects||[]).length>0?Math.round((c.projects||[]).filter(N=>N.category_id===g.id).length/(c.projects||[]).length*100):0,avgProgress:(c.projects||[]).filter(N=>N.category_id===g.id).length>0?Math.round((c.projects||[]).filter(N=>N.category_id===g.id).reduce((N,b)=>N+(b.progress||0),0)/(c.projects||[]).filter(N=>N.category_id===g.id).length):0,completionRate:(c.projects||[]).filter(N=>N.category_id===g.id).length>0?Math.round((c.projects||[]).filter(N=>N.category_id===g.id&&N.status==="completed").length/(c.projects||[]).filter(N=>N.category_id===g.id).length*100):0})),[c]),x=u.useMemo(()=>(c.skills||[]).map(g=>{const N=(c.tasks||[]).filter(S=>S.skills&&S.skills.includes(g.id)),b=(c.teamMembers||[]).filter(S=>S.skills&&S.skills.includes(g.id));return{name:g.name,users:b.length,activeTasks:N.filter(S=>S.status!=="completed").length,totalTasks:N.length,completionRate:N.length>0?Math.round(N.filter(S=>S.status==="completed").length/N.length*100):0,demand:N.length>0?Math.round(N.length/(c.tasks||[]).length*100):0}}),[c]),f=u.useMemo(()=>(c.teamMembers||[]).map(g=>{const N=(c.tasks||[]).filter(ae=>ae.assignees&&ae.assignees.includes(g.id)),b=N.filter(ae=>ae.status==="completed"),S=N.length>0?Math.round(b.length/N.length*100):0,L=N.length>0?Math.round(S*.4+N.filter(ae=>{if(ae.status!=="completed")return!1;const O=new Date;O.setHours(0,0,0,0);const W=new Date(ae.end_date);return W.setHours(0,0,0,0),W>=O}).length/N.length*60):0;return{...g,totalTasks:N.length,completedTasks:b.length,completionRate:S,efficiencyScore:L,avgTaskDuration:b.length>0?Math.round(b.reduce((ae,O)=>{if(O.created_at&&O.updated_at){const W=new Date(O.created_at),T=new Date(O.updated_at);return ae+(T.getTime()-W.getTime())/(1e3*3600*24)}return ae},0)/b.length):0}}).sort((g,N)=>N.efficiencyScore-g.efficiencyScore).slice(0,5),[c]),E=u.useMemo(()=>{const g=(c.tasks||[]).filter(S=>{if(!S.end_date||S.status==="completed")return!1;const L=new Date;L.setHours(0,0,0,0);const ae=new Date(S.end_date);return ae.setHours(0,0,0,0),ae<L}),N=(c.tasks||[]).filter(S=>S.priority==="high"),b=(c.projects||[]).filter(S=>(S.progress||0)<30);return{overdueTasks:g.length,highPriorityTasks:N.length,lowProgressProjects:b.length,riskScore:Math.round((g.length*.4+N.length*.3+b.length*.3)/Math.max((c.tasks||[]).length+(c.projects||[]).length,1)*100),efficiencyGap:z.productivity.completionRate>0?Math.round((100-z.productivity.completionRate)/10):0}},[c,z]),A=u.useMemo(()=>{const g=new Date,N=(c.tasks||[]).filter(S=>{const L=new Date(S.created_at);return(g.getTime()-L.getTime())/(1e3*3600*24)<=7}),b=(c.tasks||[]).filter(S=>{const L=new Date(S.created_at);return(g.getTime()-L.getTime())/(1e3*3600*24)<=30});return{weeklyGrowth:N.length>0?Math.round(N.length/c.tasks.length*100):0,monthlyGrowth:b.length>0?Math.round(b.length/c.tasks.length*100):0,weeklyCompletion:N.filter(S=>S.status==="completed").length,monthlyCompletion:b.filter(S=>S.status==="completed").length}},[c]);return d?t.jsx("div",{className:"p-6 space-y-6",children:t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Loading analytics data..."})]})})}):t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Analytics Dashboard"}),t.jsx("p",{className:"text-gray-600",children:"Advanced insights and performance metrics for your projects"})]}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 rounded-lg p-1",children:[t.jsxs(D,{variant:r==="overview"?"primary":"ghost",size:"sm",onClick:()=>n("overview"),children:[t.jsx(pr,{className:"w-4 h-4 mr-1"}),"Overview"]}),t.jsxs(D,{variant:r==="detailed"?"primary":"ghost",size:"sm",onClick:()=>n("detailed"),children:[t.jsx(kp,{className:"w-4 h-4 mr-1"}),"Detailed"]}),t.jsxs(D,{variant:r==="trends"?"primary":"ghost",size:"sm",onClick:()=>n("trends"),children:[t.jsx(dl,{className:"w-4 h-4 mr-1"}),"Trends"]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsxs("select",{value:a,onChange:g=>l(g.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[t.jsx("option",{value:"all",children:"All Categories"}),c.categories.map(g=>t.jsx("option",{value:g.id,children:g.name},g.id))]}),t.jsxs("select",{value:i,onChange:g=>o(g.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[t.jsx("option",{value:"all",children:"All Skills"}),c.skills.map(g=>t.jsx("option",{value:g.id,children:g.name},g.id))]}),t.jsxs("select",{value:e,onChange:g=>s(g.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[t.jsx("option",{value:"week",children:"Last Week"}),t.jsx("option",{value:"month",children:"Last Month"}),t.jsx("option",{value:"quarter",children:"Last Quarter"}),t.jsx("option",{value:"year",children:"Last Year"})]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsxs(D,{variant:"outline",size:"sm",onClick:M,disabled:p,children:[t.jsx(Zi,{className:`w-4 h-4 mr-1 ${p?"animate-spin":""}`}),"Refresh"]}),t.jsxs(D,{variant:"outline",size:"sm",children:[t.jsx(Dp,{className:"w-4 h-4 mr-1"}),"Export"]})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[t.jsx(re,{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:t.jsx(ne,{className:"p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("p",{className:"text-blue-100 text-sm font-medium",children:"Efficiency Score"}),t.jsx(ee,{variant:"default",className:"bg-blue-400 text-white text-xs",children:z.productivity.efficiency>z.productivity.completionRate?t.jsx(Np,{className:"w-3 h-3"}):t.jsx(jp,{className:"w-3 h-3"})})]}),t.jsxs("p",{className:"text-3xl font-bold",children:[z.productivity.efficiency,"%"]}),t.jsxs("p",{className:"text-blue-100 text-sm",children:[z.productivity.completionRate,"% completion rate"]})]}),t.jsx(Ji,{className:"w-12 h-12 text-blue-200"})]})})}),t.jsx(re,{className:"bg-gradient-to-r from-green-500 to-green-600 text-white",children:t.jsx(ne,{className:"p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("p",{className:"text-green-100 text-sm font-medium",children:"Team Utilization"}),t.jsxs(ee,{variant:"default",className:"bg-green-400 text-white text-xs",children:[z.teamStats.utilization,"%"]})]}),t.jsx("p",{className:"text-3xl font-bold",children:z.teamStats.active}),t.jsxs("p",{className:"text-green-100 text-sm",children:["of ",z.teamStats.total," members active"]})]}),t.jsx(et,{className:"w-12 h-12 text-green-200"})]})})}),t.jsx(re,{className:"bg-gradient-to-r from-purple-500 to-purple-600 text-white",children:t.jsx(ne,{className:"p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("p",{className:"text-purple-100 text-sm font-medium",children:"Productivity"}),t.jsxs(ee,{variant:"default",className:"bg-purple-400 text-white text-xs",children:[z.trends.completionTrend,"% trend"]})]}),t.jsxs("p",{className:"text-3xl font-bold",children:[z.productivity.averageProgress,"%"]}),t.jsxs("p",{className:"text-purple-100 text-sm",children:[z.taskStats.completed,"/",z.taskStats.total," tasks done"]})]}),t.jsx(Rp,{className:"w-12 h-12 text-purple-200"})]})})}),t.jsx(re,{className:"bg-gradient-to-r from-red-500 to-red-600 text-white",children:t.jsx(ne,{className:"p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("p",{className:"text-red-100 text-sm font-medium",children:"Risk Score"}),t.jsxs(ee,{variant:"default",className:"bg-red-400 text-white text-xs",children:[E.riskScore,"%"]})]}),t.jsx("p",{className:"text-3xl font-bold",children:z.taskStats.overdue}),t.jsxs("p",{className:"text-red-100 text-sm",children:[E.highPriorityTasks," high priority"]})]}),t.jsx(Wt,{className:"w-12 h-12 text-red-200"})]})})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsx(re,{className:"bg-gradient-to-r from-yellow-500 to-yellow-600 text-white",children:t.jsx(ne,{className:"p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-yellow-100 text-sm font-medium",children:"Weekly Growth"}),t.jsxs("p",{className:"text-2xl font-bold",children:[A.weeklyGrowth,"%"]}),t.jsxs("p",{className:"text-yellow-100 text-sm",children:[A.weeklyCompletion," completed this week"]})]}),t.jsx(dl,{className:"w-10 h-10 text-yellow-200"})]})})}),t.jsx(re,{className:"bg-gradient-to-r from-indigo-500 to-indigo-600 text-white",children:t.jsx(ne,{className:"p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-indigo-100 text-sm font-medium",children:"Avg Task Duration"}),t.jsx("p",{className:"text-2xl font-bold",children:z.taskStats.avgCompletionTime}),t.jsx("p",{className:"text-indigo-100 text-sm",children:"days to complete"})]}),t.jsx(Cp,{className:"w-10 h-10 text-indigo-200"})]})})}),t.jsx(re,{className:"bg-gradient-to-r from-pink-500 to-pink-600 text-white",children:t.jsx(ne,{className:"p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-pink-100 text-sm font-medium",children:"Efficiency Gap"}),t.jsxs("p",{className:"text-2xl font-bold",children:[E.efficiencyGap,"%"]}),t.jsx("p",{className:"text-pink-100 text-sm",children:"room for improvement"})]}),t.jsx(Ep,{className:"w-10 h-10 text-pink-200"})]})})})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs(re,{children:[t.jsx(ze,{children:t.jsxs(Fe,{className:"flex items-center",children:[t.jsx(Fp,{className:"w-5 h-5 mr-2"}),"Project Status Distribution"]})}),t.jsx(ne,{className:"space-y-4",children:t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-32",children:t.jsx($t,{value:z.projectStats.total>0?z.projectStats.active/z.projectStats.total*100:0,variant:"default",showLabel:!1})}),t.jsx("span",{className:"text-sm text-gray-600",children:z.projectStats.active})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Completed"}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-32",children:t.jsx($t,{value:z.projectStats.total>0?z.projectStats.completed/z.projectStats.total*100:0,variant:"success",showLabel:!1})}),t.jsx("span",{className:"text-sm text-gray-600",children:z.projectStats.completed})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"On Hold"}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-32",children:t.jsx($t,{value:z.projectStats.total>0?z.projectStats.onHold/z.projectStats.total*100:0,variant:"warning",showLabel:!1})}),t.jsx("span",{className:"text-sm text-gray-600",children:z.projectStats.onHold})]})]})]})})]}),t.jsxs(re,{children:[t.jsx(ze,{children:t.jsxs(Fe,{className:"flex items-center",children:[t.jsx(Ps,{className:"w-5 h-5 mr-2"}),"Category Performance"]})}),t.jsx(ne,{className:"space-y-4",children:h.map(g=>t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700",children:g.name}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsxs(ee,{variant:g.completionRate>=80?"success":g.completionRate>=60?"default":"warning",children:[g.completionRate,"%"]}),t.jsxs("span",{className:"text-sm text-gray-600",children:[g.count," projects"]})]})]}),t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[t.jsx("span",{children:"Distribution"}),t.jsxs("span",{children:[g.percentage,"%"]})]}),t.jsx($t,{value:g.percentage,showLabel:!1}),t.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[t.jsx("span",{children:"Avg Progress"}),t.jsxs("span",{children:[g.avgProgress,"%"]})]}),t.jsx($t,{value:g.avgProgress,variant:"success",showLabel:!1})]})]},g.name))})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs(re,{children:[t.jsx(ze,{children:t.jsxs(Fe,{className:"flex items-center",children:[t.jsx(md,{className:"w-5 h-5 mr-2"}),"Top Performers"]})}),t.jsx(ne,{className:"space-y-4",children:f.map((g,N)=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-gradient-to-r from-yellow-400 to-yellow-600 text-white rounded-full font-semibold text-sm",children:N===0?t.jsx(md,{className:"w-4 h-4"}):N===1?t.jsx(Yi,{className:"w-4 h-4"}):N===2?t.jsx(Fm,{className:"w-4 h-4"}):`#${N+1}`}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:g.name}),t.jsxs("p",{className:"text-sm text-gray-600",children:[g.completedTasks,"/",g.totalTasks," tasks  ",g.avgTaskDuration," days avg"]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs(ee,{variant:g.efficiencyScore>=80?"success":g.efficiencyScore>=60?"default":"warning",children:[g.efficiencyScore,"%"]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Efficiency"})]})]},g.id))})]}),t.jsxs(re,{children:[t.jsx(ze,{children:t.jsxs(Fe,{className:"flex items-center",children:[t.jsx(et,{className:"w-5 h-5 mr-2"}),"Skill Demand & Utilization"]})}),t.jsx(ne,{className:"space-y-4",children:x.slice(0,6).map(g=>t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:g.name}),t.jsxs("p",{className:"text-sm text-gray-600",children:[g.users," members  ",g.totalTasks," total tasks"]})]}),t.jsx("div",{className:"text-right",children:t.jsxs(ee,{variant:g.demand>=20?"success":g.demand>=10?"default":"warning",children:[g.demand,"% demand"]})})]}),t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[t.jsx("span",{children:"Completion Rate"}),t.jsxs("span",{children:[g.completionRate,"%"]})]}),t.jsx($t,{value:g.completionRate,variant:g.completionRate>=80?"success":g.completionRate>=60?"default":"warning",showLabel:!1}),t.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[t.jsx("span",{children:"Active Tasks"}),t.jsx("span",{children:g.activeTasks})]})]})]},g.name))})]})]}),t.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:t.jsxs(re,{children:[t.jsx(ze,{children:t.jsxs(Fe,{className:"flex items-center",children:[t.jsx(Lp,{className:"w-5 h-5 mr-2"}),"Performance Insights"]})}),t.jsx(ne,{className:"space-y-4",children:t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Wt,{className:"w-5 h-5 text-orange-500"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Overdue Tasks"})]}),t.jsx(ee,{variant:"warning",children:E.overdueTasks})]}),t.jsxs("div",{className:"flex items-center justify-between p-3 bg-yellow-50 rounded-lg",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Ji,{className:"w-5 h-5 text-yellow-500"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"High Priority"})]}),t.jsx(ee,{variant:"warning",children:E.highPriorityTasks})]}),t.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Op,{className:"w-5 h-5 text-red-500"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Low Progress Projects"})]}),t.jsx(ee,{variant:"danger",children:E.lowProgressProjects})]})]})})]})}),t.jsxs(re,{children:[t.jsx(ze,{children:t.jsxs(Fe,{className:"flex items-center",children:[t.jsx(Sp,{className:"w-5 h-5 mr-2"}),"Task Timeline Overview"]})}),t.jsx(ne,{children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[t.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[t.jsx("div",{className:"text-3xl font-bold text-blue-600",children:z.taskStats.total}),t.jsx("div",{className:"text-sm text-gray-600",children:"Total Tasks"}),t.jsxs("div",{className:"text-xs text-blue-500 mt-1",children:["+",A.weeklyGrowth,"% this week"]})]}),t.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[t.jsx("div",{className:"text-3xl font-bold text-green-600",children:z.taskStats.completed}),t.jsx("div",{className:"text-sm text-gray-600",children:"Completed"}),t.jsxs("div",{className:"text-xs text-green-500 mt-1",children:["+",A.weeklyCompletion," this week"]})]}),t.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[t.jsx("div",{className:"text-3xl font-bold text-purple-600",children:z.taskStats.inProgress}),t.jsx("div",{className:"text-sm text-gray-600",children:"In Progress"}),t.jsxs("div",{className:"text-xs text-purple-500 mt-1",children:[z.taskStats.avgCompletionTime," days avg"]})]}),t.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[t.jsx("div",{className:"text-3xl font-bold text-red-600",children:z.taskStats.overdue}),t.jsx("div",{className:"text-sm text-gray-600",children:"Overdue"}),t.jsxs("div",{className:"text-xs text-red-500 mt-1",children:["Risk Score: ",E.riskScore,"%"]})]})]})})]})]})}function A0(){const{state:e}=Ar(),s=()=>{switch(e.selectedView){case"projects":return t.jsx(k0,{});case"teams":return t.jsx(_0,{});case"tasks":return t.jsx(u0,{});case"allocations":return t.jsx(T0,{});case"analytics":return t.jsx(I0,{});case"settings":return t.jsx(P0,{});default:return t.jsx(n0,{})}};return t.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[t.jsx(s0,{}),t.jsxs("div",{className:"flex-1 flex flex-col",children:[t.jsx(r0,{}),t.jsx("main",{className:"flex-1 overflow-y-auto",children:s()})]})]})}function L0(){const{user:e,loading:s}=na(),[r,n]=u.useState(null),[a,l]=u.useState(!1);return s?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx(aa,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-blue-600"}),t.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):a?r?t.jsx(Qp,{user:r,onLogout:()=>{n(null),l(!1)}}):t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-emerald-100 flex items-center justify-center p-4",children:t.jsx(qp,{onLogin:i=>n(i),onBackToAdmin:()=>l(!1)})}):e?t.jsx(A0,{}):t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:t.jsx(Vp,{onSwitchToTeam:()=>l(!0)})})}_m(document.getElementById("root")).render(t.jsx(u.StrictMode,{children:t.jsx(pp,{children:t.jsx(e0,{children:t.jsx(L0,{})})})}));
