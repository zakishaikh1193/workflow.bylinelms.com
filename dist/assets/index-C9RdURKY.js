(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(a){if(a.ep)return;a.ep=!0;const l=r(a);fetch(a.href,l)}})();var fd={exports:{}},gl={},yd={exports:{}},_e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sa=Symbol.for("react.element"),Wm=Symbol.for("react.portal"),Vm=Symbol.for("react.fragment"),Gm=Symbol.for("react.strict_mode"),qm=Symbol.for("react.profiler"),Qm=Symbol.for("react.provider"),Km=Symbol.for("react.context"),Ym=Symbol.for("react.forward_ref"),Xm=Symbol.for("react.suspense"),Zm=Symbol.for("react.memo"),Jm=Symbol.for("react.lazy"),ac=Symbol.iterator;function ex(e){return e===null||typeof e!="object"?null:(e=ac&&e[ac]||e["@@iterator"],typeof e=="function"?e:null)}var vd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},jd=Object.assign,wd={};function mn(e,s,r){this.props=e,this.context=s,this.refs=wd,this.updater=r||vd}mn.prototype.isReactComponent={};mn.prototype.setState=function(e,s){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,s,"setState")};mn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Nd(){}Nd.prototype=mn.prototype;function io(e,s,r){this.props=e,this.context=s,this.refs=wd,this.updater=r||vd}var oo=io.prototype=new Nd;oo.constructor=io;jd(oo,mn.prototype);oo.isPureReactComponent=!0;var lc=Array.isArray,bd=Object.prototype.hasOwnProperty,co={current:null},kd={key:!0,ref:!0,__self:!0,__source:!0};function Sd(e,s,r){var n,a={},l=null,i=null;if(s!=null)for(n in s.ref!==void 0&&(i=s.ref),s.key!==void 0&&(l=""+s.key),s)bd.call(s,n)&&!kd.hasOwnProperty(n)&&(a[n]=s[n]);var o=arguments.length-2;if(o===1)a.children=r;else if(1<o){for(var c=Array(o),m=0;m<o;m++)c[m]=arguments[m+2];a.children=c}if(e&&e.defaultProps)for(n in o=e.defaultProps,o)a[n]===void 0&&(a[n]=o[n]);return{$$typeof:sa,type:e,key:l,ref:i,props:a,_owner:co.current}}function tx(e,s){return{$$typeof:sa,type:e.type,key:s,ref:e.ref,props:e.props,_owner:e._owner}}function uo(e){return typeof e=="object"&&e!==null&&e.$$typeof===sa}function sx(e){var s={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return s[r]})}var ic=/\/+/g;function Al(e,s){return typeof e=="object"&&e!==null&&e.key!=null?sx(""+e.key):s.toString(36)}function Pa(e,s,r,n,a){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(l){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case sa:case Wm:i=!0}}if(i)return i=e,a=a(i),e=n===""?"."+Al(i,0):n,lc(a)?(r="",e!=null&&(r=e.replace(ic,"$&/")+"/"),Pa(a,s,r,"",function(m){return m})):a!=null&&(uo(a)&&(a=tx(a,r+(!a.key||i&&i.key===a.key?"":(""+a.key).replace(ic,"$&/")+"/")+e)),s.push(a)),1;if(i=0,n=n===""?".":n+":",lc(e))for(var o=0;o<e.length;o++){l=e[o];var c=n+Al(l,o);i+=Pa(l,s,r,c,a)}else if(c=ex(e),typeof c=="function")for(e=c.call(e),o=0;!(l=e.next()).done;)l=l.value,c=n+Al(l,o++),i+=Pa(l,s,r,c,a);else if(l==="object")throw s=String(e),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return i}function da(e,s,r){if(e==null)return e;var n=[],a=0;return Pa(e,n,"","",function(l){return s.call(r,l,a++)}),n}function rx(e){if(e._status===-1){var s=e._result;s=s(),s.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=s)}if(e._status===1)return e._result.default;throw e._result}var Ft={current:null},Ea={transition:null},nx={ReactCurrentDispatcher:Ft,ReactCurrentBatchConfig:Ea,ReactCurrentOwner:co};function _d(){throw Error("act(...) is not supported in production builds of React.")}_e.Children={map:da,forEach:function(e,s,r){da(e,function(){s.apply(this,arguments)},r)},count:function(e){var s=0;return da(e,function(){s++}),s},toArray:function(e){return da(e,function(s){return s})||[]},only:function(e){if(!uo(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};_e.Component=mn;_e.Fragment=Vm;_e.Profiler=qm;_e.PureComponent=io;_e.StrictMode=Gm;_e.Suspense=Xm;_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nx;_e.act=_d;_e.cloneElement=function(e,s,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=jd({},e.props),a=e.key,l=e.ref,i=e._owner;if(s!=null){if(s.ref!==void 0&&(l=s.ref,i=co.current),s.key!==void 0&&(a=""+s.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in s)bd.call(s,c)&&!kd.hasOwnProperty(c)&&(n[c]=s[c]===void 0&&o!==void 0?o[c]:s[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){o=Array(c);for(var m=0;m<c;m++)o[m]=arguments[m+2];n.children=o}return{$$typeof:sa,type:e.type,key:a,ref:l,props:n,_owner:i}};_e.createContext=function(e){return e={$$typeof:Km,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Qm,_context:e},e.Consumer=e};_e.createElement=Sd;_e.createFactory=function(e){var s=Sd.bind(null,e);return s.type=e,s};_e.createRef=function(){return{current:null}};_e.forwardRef=function(e){return{$$typeof:Ym,render:e}};_e.isValidElement=uo;_e.lazy=function(e){return{$$typeof:Jm,_payload:{_status:-1,_result:e},_init:rx}};_e.memo=function(e,s){return{$$typeof:Zm,type:e,compare:s===void 0?null:s}};_e.startTransition=function(e){var s=Ea.transition;Ea.transition={};try{e()}finally{Ea.transition=s}};_e.unstable_act=_d;_e.useCallback=function(e,s){return Ft.current.useCallback(e,s)};_e.useContext=function(e){return Ft.current.useContext(e)};_e.useDebugValue=function(){};_e.useDeferredValue=function(e){return Ft.current.useDeferredValue(e)};_e.useEffect=function(e,s){return Ft.current.useEffect(e,s)};_e.useId=function(){return Ft.current.useId()};_e.useImperativeHandle=function(e,s,r){return Ft.current.useImperativeHandle(e,s,r)};_e.useInsertionEffect=function(e,s){return Ft.current.useInsertionEffect(e,s)};_e.useLayoutEffect=function(e,s){return Ft.current.useLayoutEffect(e,s)};_e.useMemo=function(e,s){return Ft.current.useMemo(e,s)};_e.useReducer=function(e,s,r){return Ft.current.useReducer(e,s,r)};_e.useRef=function(e){return Ft.current.useRef(e)};_e.useState=function(e){return Ft.current.useState(e)};_e.useSyncExternalStore=function(e,s,r){return Ft.current.useSyncExternalStore(e,s,r)};_e.useTransition=function(){return Ft.current.useTransition()};_e.version="18.3.1";yd.exports=_e;var u=yd.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ax=u,lx=Symbol.for("react.element"),ix=Symbol.for("react.fragment"),ox=Object.prototype.hasOwnProperty,cx=ax.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,dx={key:!0,ref:!0,__self:!0,__source:!0};function Cd(e,s,r){var n,a={},l=null,i=null;r!==void 0&&(l=""+r),s.key!==void 0&&(l=""+s.key),s.ref!==void 0&&(i=s.ref);for(n in s)ox.call(s,n)&&!dx.hasOwnProperty(n)&&(a[n]=s[n]);if(e&&e.defaultProps)for(n in s=e.defaultProps,s)a[n]===void 0&&(a[n]=s[n]);return{$$typeof:lx,type:e,key:l,ref:i,props:a,_owner:cx.current}}gl.Fragment=ix;gl.jsx=Cd;gl.jsxs=Cd;fd.exports=gl;var t=fd.exports,Dd={exports:{}},Xt={},Td={exports:{}},Pd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function s(H,D){var L=H.length;H.push(D);e:for(;0<L;){var re=L-1>>>1,X=H[re];if(0<a(X,D))H[re]=D,H[L]=X,L=re;else break e}}function r(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var D=H[0],L=H.pop();if(L!==D){H[0]=L;e:for(var re=0,X=H.length,ne=X>>>1;re<ne;){var Z=2*(re+1)-1,k=H[Z],ie=Z+1,pe=H[ie];if(0>a(k,L))ie<X&&0>a(pe,k)?(H[re]=pe,H[ie]=L,re=ie):(H[re]=k,H[Z]=L,re=Z);else if(ie<X&&0>a(pe,L))H[re]=pe,H[ie]=L,re=ie;else break e}}return D}function a(H,D){var L=H.sortIndex-D.sortIndex;return L!==0?L:H.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var c=[],m=[],x=1,y=null,d=3,f=!1,b=!1,S=!1,z=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(H){for(var D=r(m);D!==null;){if(D.callback===null)n(m);else if(D.startTime<=H)n(m),D.sortIndex=D.expirationTime,s(c,D);else break;D=r(m)}}function I(H){if(S=!1,j(H),!b)if(r(c)!==null)b=!0,le(F);else{var D=r(m);D!==null&&se(I,D.startTime-H)}}function F(H,D){b=!1,S&&(S=!1,g(N),N=-1),f=!0;var L=d;try{for(j(D),y=r(c);y!==null&&(!(y.expirationTime>D)||H&&!G());){var re=y.callback;if(typeof re=="function"){y.callback=null,d=y.priorityLevel;var X=re(y.expirationTime<=D);D=e.unstable_now(),typeof X=="function"?y.callback=X:y===r(c)&&n(c),j(D)}else n(c);y=r(c)}if(y!==null)var ne=!0;else{var Z=r(m);Z!==null&&se(I,Z.startTime-D),ne=!1}return ne}finally{y=null,d=L,f=!1}}var v=!1,w=null,N=-1,C=5,P=-1;function G(){return!(e.unstable_now()-P<C)}function B(){if(w!==null){var H=e.unstable_now();P=H;var D=!0;try{D=w(!0,H)}finally{D?$():(v=!1,w=null)}}else v=!1}var $;if(typeof h=="function")$=function(){h(B)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,E=fe.port2;fe.port1.onmessage=B,$=function(){E.postMessage(null)}}else $=function(){z(B,0)};function le(H){w=H,v||(v=!0,$())}function se(H,D){N=z(function(){H(e.unstable_now())},D)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(H){H.callback=null},e.unstable_continueExecution=function(){b||f||(b=!0,le(F))},e.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<H?Math.floor(1e3/H):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(H){switch(d){case 1:case 2:case 3:var D=3;break;default:D=d}var L=d;d=D;try{return H()}finally{d=L}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(H,D){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var L=d;d=H;try{return D()}finally{d=L}},e.unstable_scheduleCallback=function(H,D,L){var re=e.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?re+L:re):L=re,H){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=L+X,H={id:x++,callback:D,priorityLevel:H,startTime:L,expirationTime:X,sortIndex:-1},L>re?(H.sortIndex=L,s(m,H),r(c)===null&&H===r(m)&&(S?(g(N),N=-1):S=!0,se(I,L-re))):(H.sortIndex=X,s(c,H),b||f||(b=!0,le(F))),H},e.unstable_shouldYield=G,e.unstable_wrapCallback=function(H){var D=d;return function(){var L=d;d=D;try{return H.apply(this,arguments)}finally{d=L}}}})(Pd);Td.exports=Pd;var ux=Td.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mx=u,Yt=ux;function Y(e){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ed=new Set,Fn={};function Ar(e,s){rn(e,s),rn(e+"Capture",s)}function rn(e,s){for(Fn[e]=s,e=0;e<s.length;e++)Ed.add(s[e])}var Fs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),oi=Object.prototype.hasOwnProperty,xx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,oc={},cc={};function hx(e){return oi.call(cc,e)?!0:oi.call(oc,e)?!1:xx.test(e)?cc[e]=!0:(oc[e]=!0,!1)}function px(e,s,r,n){if(r!==null&&r.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function gx(e,s,r,n){if(s===null||typeof s>"u"||px(e,s,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function Rt(e,s,r,n,a,l,i){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=s,this.sanitizeURL=l,this.removeEmptyString=i}var bt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){bt[e]=new Rt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var s=e[0];bt[s]=new Rt(s,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){bt[e]=new Rt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){bt[e]=new Rt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){bt[e]=new Rt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){bt[e]=new Rt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){bt[e]=new Rt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){bt[e]=new Rt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){bt[e]=new Rt(e,5,!1,e.toLowerCase(),null,!1,!1)});var mo=/[\-:]([a-z])/g;function xo(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var s=e.replace(mo,xo);bt[s]=new Rt(s,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var s=e.replace(mo,xo);bt[s]=new Rt(s,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var s=e.replace(mo,xo);bt[s]=new Rt(s,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){bt[e]=new Rt(e,1,!1,e.toLowerCase(),null,!1,!1)});bt.xlinkHref=new Rt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){bt[e]=new Rt(e,1,!1,e.toLowerCase(),null,!0,!0)});function ho(e,s,r,n){var a=bt.hasOwnProperty(s)?bt[s]:null;(a!==null?a.type!==0:n||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(gx(s,r,a,n)&&(r=null),n||a===null?hx(s)&&(r===null?e.removeAttribute(s):e.setAttribute(s,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(s=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(s):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,s,r):e.setAttribute(s,r))))}var Us=mx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ua=Symbol.for("react.element"),$r=Symbol.for("react.portal"),Or=Symbol.for("react.fragment"),po=Symbol.for("react.strict_mode"),ci=Symbol.for("react.profiler"),Id=Symbol.for("react.provider"),Md=Symbol.for("react.context"),go=Symbol.for("react.forward_ref"),di=Symbol.for("react.suspense"),ui=Symbol.for("react.suspense_list"),fo=Symbol.for("react.memo"),Ws=Symbol.for("react.lazy"),Ad=Symbol.for("react.offscreen"),dc=Symbol.iterator;function gn(e){return e===null||typeof e!="object"?null:(e=dc&&e[dc]||e["@@iterator"],typeof e=="function"?e:null)}var tt=Object.assign,Ll;function kn(e){if(Ll===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);Ll=s&&s[1]||""}return`
`+Ll+e}var zl=!1;function Fl(e,s){if(!e||zl)return"";zl=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(m){var n=m}Reflect.construct(e,[],s)}else{try{s.call()}catch(m){n=m}e.call(s.prototype)}else{try{throw Error()}catch(m){n=m}e()}}catch(m){if(m&&n&&typeof m.stack=="string"){for(var a=m.stack.split(`
`),l=n.stack.split(`
`),i=a.length-1,o=l.length-1;1<=i&&0<=o&&a[i]!==l[o];)o--;for(;1<=i&&0<=o;i--,o--)if(a[i]!==l[o]){if(i!==1||o!==1)do if(i--,o--,0>o||a[i]!==l[o]){var c=`
`+a[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=o);break}}}finally{zl=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?kn(e):""}function fx(e){switch(e.tag){case 5:return kn(e.type);case 16:return kn("Lazy");case 13:return kn("Suspense");case 19:return kn("SuspenseList");case 0:case 2:case 15:return e=Fl(e.type,!1),e;case 11:return e=Fl(e.type.render,!1),e;case 1:return e=Fl(e.type,!0),e;default:return""}}function mi(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Or:return"Fragment";case $r:return"Portal";case ci:return"Profiler";case po:return"StrictMode";case di:return"Suspense";case ui:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Md:return(e.displayName||"Context")+".Consumer";case Id:return(e._context.displayName||"Context")+".Provider";case go:var s=e.render;return e=e.displayName,e||(e=s.displayName||s.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case fo:return s=e.displayName||null,s!==null?s:mi(e.type)||"Memo";case Ws:s=e._payload,e=e._init;try{return mi(e(s))}catch{}}return null}function yx(e){var s=e.type;switch(e.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=s.render,e=e.displayName||e.name||"",s.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return mi(s);case 8:return s===po?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function ur(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ld(e){var s=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function vx(e){var s=Ld(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,s),n=""+e[s];if(!e.hasOwnProperty(s)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,l=r.set;return Object.defineProperty(e,s,{configurable:!0,get:function(){return a.call(this)},set:function(i){n=""+i,l.call(this,i)}}),Object.defineProperty(e,s,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){e._valueTracker=null,delete e[s]}}}}function ma(e){e._valueTracker||(e._valueTracker=vx(e))}function zd(e){if(!e)return!1;var s=e._valueTracker;if(!s)return!0;var r=s.getValue(),n="";return e&&(n=Ld(e)?e.checked?"true":"false":e.value),e=n,e!==r?(s.setValue(e),!0):!1}function Ba(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function xi(e,s){var r=s.checked;return tt({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function uc(e,s){var r=s.defaultValue==null?"":s.defaultValue,n=s.checked!=null?s.checked:s.defaultChecked;r=ur(s.value!=null?s.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Fd(e,s){s=s.checked,s!=null&&ho(e,"checked",s,!1)}function hi(e,s){Fd(e,s);var r=ur(s.value),n=s.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}s.hasOwnProperty("value")?pi(e,s.type,r):s.hasOwnProperty("defaultValue")&&pi(e,s.type,ur(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(e.defaultChecked=!!s.defaultChecked)}function mc(e,s,r){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var n=s.type;if(!(n!=="submit"&&n!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+e._wrapperState.initialValue,r||s===e.value||(e.value=s),e.defaultValue=s}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function pi(e,s,r){(s!=="number"||Ba(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Sn=Array.isArray;function Xr(e,s,r,n){if(e=e.options,s){s={};for(var a=0;a<r.length;a++)s["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=s.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+ur(r),s=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}s!==null||e[a].disabled||(s=e[a])}s!==null&&(s.selected=!0)}}function gi(e,s){if(s.dangerouslySetInnerHTML!=null)throw Error(Y(91));return tt({},s,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function xc(e,s){var r=s.value;if(r==null){if(r=s.children,s=s.defaultValue,r!=null){if(s!=null)throw Error(Y(92));if(Sn(r)){if(1<r.length)throw Error(Y(93));r=r[0]}s=r}s==null&&(s=""),r=s}e._wrapperState={initialValue:ur(r)}}function Rd(e,s){var r=ur(s.value),n=ur(s.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),s.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function hc(e){var s=e.textContent;s===e._wrapperState.initialValue&&s!==""&&s!==null&&(e.value=s)}function $d(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fi(e,s){return e==null||e==="http://www.w3.org/1999/xhtml"?$d(s):e==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var xa,Od=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(s,r,n,a)})}:e}(function(e,s){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=s;else{for(xa=xa||document.createElement("div"),xa.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=xa.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;s.firstChild;)e.appendChild(s.firstChild)}});function Rn(e,s){if(s){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=s;return}}e.textContent=s}var Dn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jx=["Webkit","ms","Moz","O"];Object.keys(Dn).forEach(function(e){jx.forEach(function(s){s=s+e.charAt(0).toUpperCase()+e.substring(1),Dn[s]=Dn[e]})});function Ud(e,s,r){return s==null||typeof s=="boolean"||s===""?"":r||typeof s!="number"||s===0||Dn.hasOwnProperty(e)&&Dn[e]?(""+s).trim():s+"px"}function Hd(e,s){e=e.style;for(var r in s)if(s.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=Ud(r,s[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var wx=tt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yi(e,s){if(s){if(wx[e]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(Y(137,e));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(Y(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(Y(61))}if(s.style!=null&&typeof s.style!="object")throw Error(Y(62))}}function vi(e,s){if(e.indexOf("-")===-1)return typeof s.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ji=null;function yo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var wi=null,Zr=null,Jr=null;function pc(e){if(e=aa(e)){if(typeof wi!="function")throw Error(Y(280));var s=e.stateNode;s&&(s=wl(s),wi(e.stateNode,e.type,s))}}function Bd(e){Zr?Jr?Jr.push(e):Jr=[e]:Zr=e}function Wd(){if(Zr){var e=Zr,s=Jr;if(Jr=Zr=null,pc(e),s)for(e=0;e<s.length;e++)pc(s[e])}}function Vd(e,s){return e(s)}function Gd(){}var Rl=!1;function qd(e,s,r){if(Rl)return e(s,r);Rl=!0;try{return Vd(e,s,r)}finally{Rl=!1,(Zr!==null||Jr!==null)&&(Gd(),Wd())}}function $n(e,s){var r=e.stateNode;if(r===null)return null;var n=wl(r);if(n===null)return null;r=n[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Y(231,s,typeof r));return r}var Ni=!1;if(Fs)try{var fn={};Object.defineProperty(fn,"passive",{get:function(){Ni=!0}}),window.addEventListener("test",fn,fn),window.removeEventListener("test",fn,fn)}catch{Ni=!1}function Nx(e,s,r,n,a,l,i,o,c){var m=Array.prototype.slice.call(arguments,3);try{s.apply(r,m)}catch(x){this.onError(x)}}var Tn=!1,Wa=null,Va=!1,bi=null,bx={onError:function(e){Tn=!0,Wa=e}};function kx(e,s,r,n,a,l,i,o,c){Tn=!1,Wa=null,Nx.apply(bx,arguments)}function Sx(e,s,r,n,a,l,i,o,c){if(kx.apply(this,arguments),Tn){if(Tn){var m=Wa;Tn=!1,Wa=null}else throw Error(Y(198));Va||(Va=!0,bi=m)}}function Lr(e){var s=e,r=e;if(e.alternate)for(;s.return;)s=s.return;else{e=s;do s=e,s.flags&4098&&(r=s.return),e=s.return;while(e)}return s.tag===3?r:null}function Qd(e){if(e.tag===13){var s=e.memoizedState;if(s===null&&(e=e.alternate,e!==null&&(s=e.memoizedState)),s!==null)return s.dehydrated}return null}function gc(e){if(Lr(e)!==e)throw Error(Y(188))}function _x(e){var s=e.alternate;if(!s){if(s=Lr(e),s===null)throw Error(Y(188));return s!==e?null:e}for(var r=e,n=s;;){var a=r.return;if(a===null)break;var l=a.alternate;if(l===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===r)return gc(a),e;if(l===n)return gc(a),s;l=l.sibling}throw Error(Y(188))}if(r.return!==n.return)r=a,n=l;else{for(var i=!1,o=a.child;o;){if(o===r){i=!0,r=a,n=l;break}if(o===n){i=!0,n=a,r=l;break}o=o.sibling}if(!i){for(o=l.child;o;){if(o===r){i=!0,r=l,n=a;break}if(o===n){i=!0,n=l,r=a;break}o=o.sibling}if(!i)throw Error(Y(189))}}if(r.alternate!==n)throw Error(Y(190))}if(r.tag!==3)throw Error(Y(188));return r.stateNode.current===r?e:s}function Kd(e){return e=_x(e),e!==null?Yd(e):null}function Yd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var s=Yd(e);if(s!==null)return s;e=e.sibling}return null}var Xd=Yt.unstable_scheduleCallback,fc=Yt.unstable_cancelCallback,Cx=Yt.unstable_shouldYield,Dx=Yt.unstable_requestPaint,it=Yt.unstable_now,Tx=Yt.unstable_getCurrentPriorityLevel,vo=Yt.unstable_ImmediatePriority,Zd=Yt.unstable_UserBlockingPriority,Ga=Yt.unstable_NormalPriority,Px=Yt.unstable_LowPriority,Jd=Yt.unstable_IdlePriority,fl=null,bs=null;function Ex(e){if(bs&&typeof bs.onCommitFiberRoot=="function")try{bs.onCommitFiberRoot(fl,e,void 0,(e.current.flags&128)===128)}catch{}}var xs=Math.clz32?Math.clz32:Ax,Ix=Math.log,Mx=Math.LN2;function Ax(e){return e>>>=0,e===0?32:31-(Ix(e)/Mx|0)|0}var ha=64,pa=4194304;function _n(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function qa(e,s){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,l=e.pingedLanes,i=r&268435455;if(i!==0){var o=i&~a;o!==0?n=_n(o):(l&=i,l!==0&&(n=_n(l)))}else i=r&~a,i!==0?n=_n(i):l!==0&&(n=_n(l));if(n===0)return 0;if(s!==0&&s!==n&&!(s&a)&&(a=n&-n,l=s&-s,a>=l||a===16&&(l&4194240)!==0))return s;if(n&4&&(n|=r&16),s=e.entangledLanes,s!==0)for(e=e.entanglements,s&=n;0<s;)r=31-xs(s),a=1<<r,n|=e[r],s&=~a;return n}function Lx(e,s){switch(e){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zx(e,s){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,l=e.pendingLanes;0<l;){var i=31-xs(l),o=1<<i,c=a[i];c===-1?(!(o&r)||o&n)&&(a[i]=Lx(o,s)):c<=s&&(e.expiredLanes|=o),l&=~o}}function ki(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function eu(){var e=ha;return ha<<=1,!(ha&4194240)&&(ha=64),e}function $l(e){for(var s=[],r=0;31>r;r++)s.push(e);return s}function ra(e,s,r){e.pendingLanes|=s,s!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,s=31-xs(s),e[s]=r}function Fx(e,s){var r=e.pendingLanes&~s;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=s,e.mutableReadLanes&=s,e.entangledLanes&=s,s=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-xs(r),l=1<<a;s[a]=0,n[a]=-1,e[a]=-1,r&=~l}}function jo(e,s){var r=e.entangledLanes|=s;for(e=e.entanglements;r;){var n=31-xs(r),a=1<<n;a&s|e[n]&s&&(e[n]|=s),r&=~a}}var He=0;function tu(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var su,wo,ru,nu,au,Si=!1,ga=[],tr=null,sr=null,rr=null,On=new Map,Un=new Map,Gs=[],Rx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yc(e,s){switch(e){case"focusin":case"focusout":tr=null;break;case"dragenter":case"dragleave":sr=null;break;case"mouseover":case"mouseout":rr=null;break;case"pointerover":case"pointerout":On.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Un.delete(s.pointerId)}}function yn(e,s,r,n,a,l){return e===null||e.nativeEvent!==l?(e={blockedOn:s,domEventName:r,eventSystemFlags:n,nativeEvent:l,targetContainers:[a]},s!==null&&(s=aa(s),s!==null&&wo(s)),e):(e.eventSystemFlags|=n,s=e.targetContainers,a!==null&&s.indexOf(a)===-1&&s.push(a),e)}function $x(e,s,r,n,a){switch(s){case"focusin":return tr=yn(tr,e,s,r,n,a),!0;case"dragenter":return sr=yn(sr,e,s,r,n,a),!0;case"mouseover":return rr=yn(rr,e,s,r,n,a),!0;case"pointerover":var l=a.pointerId;return On.set(l,yn(On.get(l)||null,e,s,r,n,a)),!0;case"gotpointercapture":return l=a.pointerId,Un.set(l,yn(Un.get(l)||null,e,s,r,n,a)),!0}return!1}function lu(e){var s=kr(e.target);if(s!==null){var r=Lr(s);if(r!==null){if(s=r.tag,s===13){if(s=Qd(r),s!==null){e.blockedOn=s,au(e.priority,function(){ru(r)});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ia(e){if(e.blockedOn!==null)return!1;for(var s=e.targetContainers;0<s.length;){var r=_i(e.domEventName,e.eventSystemFlags,s[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);ji=n,r.target.dispatchEvent(n),ji=null}else return s=aa(r),s!==null&&wo(s),e.blockedOn=r,!1;s.shift()}return!0}function vc(e,s,r){Ia(e)&&r.delete(s)}function Ox(){Si=!1,tr!==null&&Ia(tr)&&(tr=null),sr!==null&&Ia(sr)&&(sr=null),rr!==null&&Ia(rr)&&(rr=null),On.forEach(vc),Un.forEach(vc)}function vn(e,s){e.blockedOn===s&&(e.blockedOn=null,Si||(Si=!0,Yt.unstable_scheduleCallback(Yt.unstable_NormalPriority,Ox)))}function Hn(e){function s(a){return vn(a,e)}if(0<ga.length){vn(ga[0],e);for(var r=1;r<ga.length;r++){var n=ga[r];n.blockedOn===e&&(n.blockedOn=null)}}for(tr!==null&&vn(tr,e),sr!==null&&vn(sr,e),rr!==null&&vn(rr,e),On.forEach(s),Un.forEach(s),r=0;r<Gs.length;r++)n=Gs[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Gs.length&&(r=Gs[0],r.blockedOn===null);)lu(r),r.blockedOn===null&&Gs.shift()}var en=Us.ReactCurrentBatchConfig,Qa=!0;function Ux(e,s,r,n){var a=He,l=en.transition;en.transition=null;try{He=1,No(e,s,r,n)}finally{He=a,en.transition=l}}function Hx(e,s,r,n){var a=He,l=en.transition;en.transition=null;try{He=4,No(e,s,r,n)}finally{He=a,en.transition=l}}function No(e,s,r,n){if(Qa){var a=_i(e,s,r,n);if(a===null)Kl(e,s,n,Ka,r),yc(e,n);else if($x(a,e,s,r,n))n.stopPropagation();else if(yc(e,n),s&4&&-1<Rx.indexOf(e)){for(;a!==null;){var l=aa(a);if(l!==null&&su(l),l=_i(e,s,r,n),l===null&&Kl(e,s,n,Ka,r),l===a)break;a=l}a!==null&&n.stopPropagation()}else Kl(e,s,n,null,r)}}var Ka=null;function _i(e,s,r,n){if(Ka=null,e=yo(n),e=kr(e),e!==null)if(s=Lr(e),s===null)e=null;else if(r=s.tag,r===13){if(e=Qd(s),e!==null)return e;e=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;e=null}else s!==e&&(e=null);return Ka=e,null}function iu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Tx()){case vo:return 1;case Zd:return 4;case Ga:case Px:return 16;case Jd:return 536870912;default:return 16}default:return 16}}var Qs=null,bo=null,Ma=null;function ou(){if(Ma)return Ma;var e,s=bo,r=s.length,n,a="value"in Qs?Qs.value:Qs.textContent,l=a.length;for(e=0;e<r&&s[e]===a[e];e++);var i=r-e;for(n=1;n<=i&&s[r-n]===a[l-n];n++);return Ma=a.slice(e,1<n?1-n:void 0)}function Aa(e){var s=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&s===13&&(e=13)):e=s,e===10&&(e=13),32<=e||e===13?e:0}function fa(){return!0}function jc(){return!1}function Zt(e){function s(r,n,a,l,i){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=l,this.target=i,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(l):l[o]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?fa:jc,this.isPropagationStopped=jc,this}return tt(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=fa)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=fa)},persist:function(){},isPersistent:fa}),s}var xn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ko=Zt(xn),na=tt({},xn,{view:0,detail:0}),Bx=Zt(na),Ol,Ul,jn,yl=tt({},na,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:So,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==jn&&(jn&&e.type==="mousemove"?(Ol=e.screenX-jn.screenX,Ul=e.screenY-jn.screenY):Ul=Ol=0,jn=e),Ol)},movementY:function(e){return"movementY"in e?e.movementY:Ul}}),wc=Zt(yl),Wx=tt({},yl,{dataTransfer:0}),Vx=Zt(Wx),Gx=tt({},na,{relatedTarget:0}),Hl=Zt(Gx),qx=tt({},xn,{animationName:0,elapsedTime:0,pseudoElement:0}),Qx=Zt(qx),Kx=tt({},xn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Yx=Zt(Kx),Xx=tt({},xn,{data:0}),Nc=Zt(Xx),Zx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function th(e){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(e):(e=eh[e])?!!s[e]:!1}function So(){return th}var sh=tt({},na,{key:function(e){if(e.key){var s=Zx[e.key]||e.key;if(s!=="Unidentified")return s}return e.type==="keypress"?(e=Aa(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Jx[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:So,charCode:function(e){return e.type==="keypress"?Aa(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Aa(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),rh=Zt(sh),nh=tt({},yl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bc=Zt(nh),ah=tt({},na,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:So}),lh=Zt(ah),ih=tt({},xn,{propertyName:0,elapsedTime:0,pseudoElement:0}),oh=Zt(ih),ch=tt({},yl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),dh=Zt(ch),uh=[9,13,27,32],_o=Fs&&"CompositionEvent"in window,Pn=null;Fs&&"documentMode"in document&&(Pn=document.documentMode);var mh=Fs&&"TextEvent"in window&&!Pn,cu=Fs&&(!_o||Pn&&8<Pn&&11>=Pn),kc=" ",Sc=!1;function du(e,s){switch(e){case"keyup":return uh.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ur=!1;function xh(e,s){switch(e){case"compositionend":return uu(s);case"keypress":return s.which!==32?null:(Sc=!0,kc);case"textInput":return e=s.data,e===kc&&Sc?null:e;default:return null}}function hh(e,s){if(Ur)return e==="compositionend"||!_o&&du(e,s)?(e=ou(),Ma=bo=Qs=null,Ur=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return cu&&s.locale!=="ko"?null:s.data;default:return null}}var ph={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _c(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s==="input"?!!ph[e.type]:s==="textarea"}function mu(e,s,r,n){Bd(n),s=Ya(s,"onChange"),0<s.length&&(r=new ko("onChange","change",null,r,n),e.push({event:r,listeners:s}))}var En=null,Bn=null;function gh(e){bu(e,0)}function vl(e){var s=Wr(e);if(zd(s))return e}function fh(e,s){if(e==="change")return s}var xu=!1;if(Fs){var Bl;if(Fs){var Wl="oninput"in document;if(!Wl){var Cc=document.createElement("div");Cc.setAttribute("oninput","return;"),Wl=typeof Cc.oninput=="function"}Bl=Wl}else Bl=!1;xu=Bl&&(!document.documentMode||9<document.documentMode)}function Dc(){En&&(En.detachEvent("onpropertychange",hu),Bn=En=null)}function hu(e){if(e.propertyName==="value"&&vl(Bn)){var s=[];mu(s,Bn,e,yo(e)),qd(gh,s)}}function yh(e,s,r){e==="focusin"?(Dc(),En=s,Bn=r,En.attachEvent("onpropertychange",hu)):e==="focusout"&&Dc()}function vh(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return vl(Bn)}function jh(e,s){if(e==="click")return vl(s)}function wh(e,s){if(e==="input"||e==="change")return vl(s)}function Nh(e,s){return e===s&&(e!==0||1/e===1/s)||e!==e&&s!==s}var ps=typeof Object.is=="function"?Object.is:Nh;function Wn(e,s){if(ps(e,s))return!0;if(typeof e!="object"||e===null||typeof s!="object"||s===null)return!1;var r=Object.keys(e),n=Object.keys(s);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!oi.call(s,a)||!ps(e[a],s[a]))return!1}return!0}function Tc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Pc(e,s){var r=Tc(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=s&&n>=s)return{node:r,offset:s-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Tc(r)}}function pu(e,s){return e&&s?e===s?!0:e&&e.nodeType===3?!1:s&&s.nodeType===3?pu(e,s.parentNode):"contains"in e?e.contains(s):e.compareDocumentPosition?!!(e.compareDocumentPosition(s)&16):!1:!1}function gu(){for(var e=window,s=Ba();s instanceof e.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)e=s.contentWindow;else break;s=Ba(e.document)}return s}function Co(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s&&(s==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||s==="textarea"||e.contentEditable==="true")}function bh(e){var s=gu(),r=e.focusedElem,n=e.selectionRange;if(s!==r&&r&&r.ownerDocument&&pu(r.ownerDocument.documentElement,r)){if(n!==null&&Co(r)){if(s=n.start,e=n.end,e===void 0&&(e=s),"selectionStart"in r)r.selectionStart=s,r.selectionEnd=Math.min(e,r.value.length);else if(e=(s=r.ownerDocument||document)&&s.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,l=Math.min(n.start,a);n=n.end===void 0?l:Math.min(n.end,a),!e.extend&&l>n&&(a=n,n=l,l=a),a=Pc(r,l);var i=Pc(r,n);a&&i&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(s=s.createRange(),s.setStart(a.node,a.offset),e.removeAllRanges(),l>n?(e.addRange(s),e.extend(i.node,i.offset)):(s.setEnd(i.node,i.offset),e.addRange(s)))}}for(s=[],e=r;e=e.parentNode;)e.nodeType===1&&s.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<s.length;r++)e=s[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var kh=Fs&&"documentMode"in document&&11>=document.documentMode,Hr=null,Ci=null,In=null,Di=!1;function Ec(e,s,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Di||Hr==null||Hr!==Ba(n)||(n=Hr,"selectionStart"in n&&Co(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),In&&Wn(In,n)||(In=n,n=Ya(Ci,"onSelect"),0<n.length&&(s=new ko("onSelect","select",null,s,r),e.push({event:s,listeners:n}),s.target=Hr)))}function ya(e,s){var r={};return r[e.toLowerCase()]=s.toLowerCase(),r["Webkit"+e]="webkit"+s,r["Moz"+e]="moz"+s,r}var Br={animationend:ya("Animation","AnimationEnd"),animationiteration:ya("Animation","AnimationIteration"),animationstart:ya("Animation","AnimationStart"),transitionend:ya("Transition","TransitionEnd")},Vl={},fu={};Fs&&(fu=document.createElement("div").style,"AnimationEvent"in window||(delete Br.animationend.animation,delete Br.animationiteration.animation,delete Br.animationstart.animation),"TransitionEvent"in window||delete Br.transitionend.transition);function jl(e){if(Vl[e])return Vl[e];if(!Br[e])return e;var s=Br[e],r;for(r in s)if(s.hasOwnProperty(r)&&r in fu)return Vl[e]=s[r];return e}var yu=jl("animationend"),vu=jl("animationiteration"),ju=jl("animationstart"),wu=jl("transitionend"),Nu=new Map,Ic="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xr(e,s){Nu.set(e,s),Ar(s,[e])}for(var Gl=0;Gl<Ic.length;Gl++){var ql=Ic[Gl],Sh=ql.toLowerCase(),_h=ql[0].toUpperCase()+ql.slice(1);xr(Sh,"on"+_h)}xr(yu,"onAnimationEnd");xr(vu,"onAnimationIteration");xr(ju,"onAnimationStart");xr("dblclick","onDoubleClick");xr("focusin","onFocus");xr("focusout","onBlur");xr(wu,"onTransitionEnd");rn("onMouseEnter",["mouseout","mouseover"]);rn("onMouseLeave",["mouseout","mouseover"]);rn("onPointerEnter",["pointerout","pointerover"]);rn("onPointerLeave",["pointerout","pointerover"]);Ar("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ar("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ar("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ar("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ar("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ar("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ch=new Set("cancel close invalid load scroll toggle".split(" ").concat(Cn));function Mc(e,s,r){var n=e.type||"unknown-event";e.currentTarget=r,Sx(n,s,void 0,e),e.currentTarget=null}function bu(e,s){s=(s&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var l=void 0;if(s)for(var i=n.length-1;0<=i;i--){var o=n[i],c=o.instance,m=o.currentTarget;if(o=o.listener,c!==l&&a.isPropagationStopped())break e;Mc(a,o,m),l=c}else for(i=0;i<n.length;i++){if(o=n[i],c=o.instance,m=o.currentTarget,o=o.listener,c!==l&&a.isPropagationStopped())break e;Mc(a,o,m),l=c}}}if(Va)throw e=bi,Va=!1,bi=null,e}function qe(e,s){var r=s[Mi];r===void 0&&(r=s[Mi]=new Set);var n=e+"__bubble";r.has(n)||(ku(s,e,2,!1),r.add(n))}function Ql(e,s,r){var n=0;s&&(n|=4),ku(r,e,n,s)}var va="_reactListening"+Math.random().toString(36).slice(2);function Vn(e){if(!e[va]){e[va]=!0,Ed.forEach(function(r){r!=="selectionchange"&&(Ch.has(r)||Ql(r,!1,e),Ql(r,!0,e))});var s=e.nodeType===9?e:e.ownerDocument;s===null||s[va]||(s[va]=!0,Ql("selectionchange",!1,s))}}function ku(e,s,r,n){switch(iu(s)){case 1:var a=Ux;break;case 4:a=Hx;break;default:a=No}r=a.bind(null,s,r,e),a=void 0,!Ni||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(s,r,{capture:!0,passive:a}):e.addEventListener(s,r,!0):a!==void 0?e.addEventListener(s,r,{passive:a}):e.addEventListener(s,r,!1)}function Kl(e,s,r,n,a){var l=n;if(!(s&1)&&!(s&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var o=n.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(i===4)for(i=n.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;i=i.return}for(;o!==null;){if(i=kr(o),i===null)return;if(c=i.tag,c===5||c===6){n=l=i;continue e}o=o.parentNode}}n=n.return}qd(function(){var m=l,x=yo(r),y=[];e:{var d=Nu.get(e);if(d!==void 0){var f=ko,b=e;switch(e){case"keypress":if(Aa(r)===0)break e;case"keydown":case"keyup":f=rh;break;case"focusin":b="focus",f=Hl;break;case"focusout":b="blur",f=Hl;break;case"beforeblur":case"afterblur":f=Hl;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=wc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=Vx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=lh;break;case yu:case vu:case ju:f=Qx;break;case wu:f=oh;break;case"scroll":f=Bx;break;case"wheel":f=dh;break;case"copy":case"cut":case"paste":f=Yx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=bc}var S=(s&4)!==0,z=!S&&e==="scroll",g=S?d!==null?d+"Capture":null:d;S=[];for(var h=m,j;h!==null;){j=h;var I=j.stateNode;if(j.tag===5&&I!==null&&(j=I,g!==null&&(I=$n(h,g),I!=null&&S.push(Gn(h,I,j)))),z)break;h=h.return}0<S.length&&(d=new f(d,b,null,r,x),y.push({event:d,listeners:S}))}}if(!(s&7)){e:{if(d=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",d&&r!==ji&&(b=r.relatedTarget||r.fromElement)&&(kr(b)||b[Rs]))break e;if((f||d)&&(d=x.window===x?x:(d=x.ownerDocument)?d.defaultView||d.parentWindow:window,f?(b=r.relatedTarget||r.toElement,f=m,b=b?kr(b):null,b!==null&&(z=Lr(b),b!==z||b.tag!==5&&b.tag!==6)&&(b=null)):(f=null,b=m),f!==b)){if(S=wc,I="onMouseLeave",g="onMouseEnter",h="mouse",(e==="pointerout"||e==="pointerover")&&(S=bc,I="onPointerLeave",g="onPointerEnter",h="pointer"),z=f==null?d:Wr(f),j=b==null?d:Wr(b),d=new S(I,h+"leave",f,r,x),d.target=z,d.relatedTarget=j,I=null,kr(x)===m&&(S=new S(g,h+"enter",b,r,x),S.target=j,S.relatedTarget=z,I=S),z=I,f&&b)t:{for(S=f,g=b,h=0,j=S;j;j=Rr(j))h++;for(j=0,I=g;I;I=Rr(I))j++;for(;0<h-j;)S=Rr(S),h--;for(;0<j-h;)g=Rr(g),j--;for(;h--;){if(S===g||g!==null&&S===g.alternate)break t;S=Rr(S),g=Rr(g)}S=null}else S=null;f!==null&&Ac(y,d,f,S,!1),b!==null&&z!==null&&Ac(y,z,b,S,!0)}}e:{if(d=m?Wr(m):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var F=fh;else if(_c(d))if(xu)F=wh;else{F=vh;var v=yh}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(F=jh);if(F&&(F=F(e,m))){mu(y,F,r,x);break e}v&&v(e,d,m),e==="focusout"&&(v=d._wrapperState)&&v.controlled&&d.type==="number"&&pi(d,"number",d.value)}switch(v=m?Wr(m):window,e){case"focusin":(_c(v)||v.contentEditable==="true")&&(Hr=v,Ci=m,In=null);break;case"focusout":In=Ci=Hr=null;break;case"mousedown":Di=!0;break;case"contextmenu":case"mouseup":case"dragend":Di=!1,Ec(y,r,x);break;case"selectionchange":if(kh)break;case"keydown":case"keyup":Ec(y,r,x)}var w;if(_o)e:{switch(e){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Ur?du(e,r)&&(N="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(N="onCompositionStart");N&&(cu&&r.locale!=="ko"&&(Ur||N!=="onCompositionStart"?N==="onCompositionEnd"&&Ur&&(w=ou()):(Qs=x,bo="value"in Qs?Qs.value:Qs.textContent,Ur=!0)),v=Ya(m,N),0<v.length&&(N=new Nc(N,e,null,r,x),y.push({event:N,listeners:v}),w?N.data=w:(w=uu(r),w!==null&&(N.data=w)))),(w=mh?xh(e,r):hh(e,r))&&(m=Ya(m,"onBeforeInput"),0<m.length&&(x=new Nc("onBeforeInput","beforeinput",null,r,x),y.push({event:x,listeners:m}),x.data=w))}bu(y,s)})}function Gn(e,s,r){return{instance:e,listener:s,currentTarget:r}}function Ya(e,s){for(var r=s+"Capture",n=[];e!==null;){var a=e,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=$n(e,r),l!=null&&n.unshift(Gn(e,l,a)),l=$n(e,s),l!=null&&n.push(Gn(e,l,a))),e=e.return}return n}function Rr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ac(e,s,r,n,a){for(var l=s._reactName,i=[];r!==null&&r!==n;){var o=r,c=o.alternate,m=o.stateNode;if(c!==null&&c===n)break;o.tag===5&&m!==null&&(o=m,a?(c=$n(r,l),c!=null&&i.unshift(Gn(r,c,o))):a||(c=$n(r,l),c!=null&&i.push(Gn(r,c,o)))),r=r.return}i.length!==0&&e.push({event:s,listeners:i})}var Dh=/\r\n?/g,Th=/\u0000|\uFFFD/g;function Lc(e){return(typeof e=="string"?e:""+e).replace(Dh,`
`).replace(Th,"")}function ja(e,s,r){if(s=Lc(s),Lc(e)!==s&&r)throw Error(Y(425))}function Xa(){}var Ti=null,Pi=null;function Ei(e,s){return e==="textarea"||e==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Ii=typeof setTimeout=="function"?setTimeout:void 0,Ph=typeof clearTimeout=="function"?clearTimeout:void 0,zc=typeof Promise=="function"?Promise:void 0,Eh=typeof queueMicrotask=="function"?queueMicrotask:typeof zc<"u"?function(e){return zc.resolve(null).then(e).catch(Ih)}:Ii;function Ih(e){setTimeout(function(){throw e})}function Yl(e,s){var r=s,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),Hn(s);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);Hn(s)}function nr(e){for(;e!=null;e=e.nextSibling){var s=e.nodeType;if(s===1||s===3)break;if(s===8){if(s=e.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return e}function Fc(e){e=e.previousSibling;for(var s=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(s===0)return e;s--}else r==="/$"&&s++}e=e.previousSibling}return null}var hn=Math.random().toString(36).slice(2),vs="__reactFiber$"+hn,qn="__reactProps$"+hn,Rs="__reactContainer$"+hn,Mi="__reactEvents$"+hn,Mh="__reactListeners$"+hn,Ah="__reactHandles$"+hn;function kr(e){var s=e[vs];if(s)return s;for(var r=e.parentNode;r;){if(s=r[Rs]||r[vs]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(e=Fc(e);e!==null;){if(r=e[vs])return r;e=Fc(e)}return s}e=r,r=e.parentNode}return null}function aa(e){return e=e[vs]||e[Rs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Wr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Y(33))}function wl(e){return e[qn]||null}var Ai=[],Vr=-1;function hr(e){return{current:e}}function Qe(e){0>Vr||(e.current=Ai[Vr],Ai[Vr]=null,Vr--)}function Ge(e,s){Vr++,Ai[Vr]=e.current,e.current=s}var mr={},Dt=hr(mr),Wt=hr(!1),Tr=mr;function nn(e,s){var r=e.type.contextTypes;if(!r)return mr;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===s)return n.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in r)a[l]=s[l];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),a}function Vt(e){return e=e.childContextTypes,e!=null}function Za(){Qe(Wt),Qe(Dt)}function Rc(e,s,r){if(Dt.current!==mr)throw Error(Y(168));Ge(Dt,s),Ge(Wt,r)}function Su(e,s,r){var n=e.stateNode;if(s=s.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in s))throw Error(Y(108,yx(e)||"Unknown",a));return tt({},r,n)}function Ja(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||mr,Tr=Dt.current,Ge(Dt,e),Ge(Wt,Wt.current),!0}function $c(e,s,r){var n=e.stateNode;if(!n)throw Error(Y(169));r?(e=Su(e,s,Tr),n.__reactInternalMemoizedMergedChildContext=e,Qe(Wt),Qe(Dt),Ge(Dt,e)):Qe(Wt),Ge(Wt,r)}var Ds=null,Nl=!1,Xl=!1;function _u(e){Ds===null?Ds=[e]:Ds.push(e)}function Lh(e){Nl=!0,_u(e)}function pr(){if(!Xl&&Ds!==null){Xl=!0;var e=0,s=He;try{var r=Ds;for(He=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Ds=null,Nl=!1}catch(a){throw Ds!==null&&(Ds=Ds.slice(e+1)),Xd(vo,pr),a}finally{He=s,Xl=!1}}return null}var Gr=[],qr=0,el=null,tl=0,ss=[],rs=0,Pr=null,Ts=1,Ps="";function wr(e,s){Gr[qr++]=tl,Gr[qr++]=el,el=e,tl=s}function Cu(e,s,r){ss[rs++]=Ts,ss[rs++]=Ps,ss[rs++]=Pr,Pr=e;var n=Ts;e=Ps;var a=32-xs(n)-1;n&=~(1<<a),r+=1;var l=32-xs(s)+a;if(30<l){var i=a-a%5;l=(n&(1<<i)-1).toString(32),n>>=i,a-=i,Ts=1<<32-xs(s)+a|r<<a|n,Ps=l+e}else Ts=1<<l|r<<a|n,Ps=e}function Do(e){e.return!==null&&(wr(e,1),Cu(e,1,0))}function To(e){for(;e===el;)el=Gr[--qr],Gr[qr]=null,tl=Gr[--qr],Gr[qr]=null;for(;e===Pr;)Pr=ss[--rs],ss[rs]=null,Ps=ss[--rs],ss[rs]=null,Ts=ss[--rs],ss[rs]=null}var Kt=null,Qt=null,Xe=!1,ms=null;function Du(e,s){var r=ns(5,null,null,0);r.elementType="DELETED",r.stateNode=s,r.return=e,s=e.deletions,s===null?(e.deletions=[r],e.flags|=16):s.push(r)}function Oc(e,s){switch(e.tag){case 5:var r=e.type;return s=s.nodeType!==1||r.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(e.stateNode=s,Kt=e,Qt=nr(s.firstChild),!0):!1;case 6:return s=e.pendingProps===""||s.nodeType!==3?null:s,s!==null?(e.stateNode=s,Kt=e,Qt=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(r=Pr!==null?{id:Ts,overflow:Ps}:null,e.memoizedState={dehydrated:s,treeContext:r,retryLane:1073741824},r=ns(18,null,null,0),r.stateNode=s,r.return=e,e.child=r,Kt=e,Qt=null,!0):!1;default:return!1}}function Li(e){return(e.mode&1)!==0&&(e.flags&128)===0}function zi(e){if(Xe){var s=Qt;if(s){var r=s;if(!Oc(e,s)){if(Li(e))throw Error(Y(418));s=nr(r.nextSibling);var n=Kt;s&&Oc(e,s)?Du(n,r):(e.flags=e.flags&-4097|2,Xe=!1,Kt=e)}}else{if(Li(e))throw Error(Y(418));e.flags=e.flags&-4097|2,Xe=!1,Kt=e}}}function Uc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Kt=e}function wa(e){if(e!==Kt)return!1;if(!Xe)return Uc(e),Xe=!0,!1;var s;if((s=e.tag!==3)&&!(s=e.tag!==5)&&(s=e.type,s=s!=="head"&&s!=="body"&&!Ei(e.type,e.memoizedProps)),s&&(s=Qt)){if(Li(e))throw Tu(),Error(Y(418));for(;s;)Du(e,s),s=nr(s.nextSibling)}if(Uc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Y(317));e:{for(e=e.nextSibling,s=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(s===0){Qt=nr(e.nextSibling);break e}s--}else r!=="$"&&r!=="$!"&&r!=="$?"||s++}e=e.nextSibling}Qt=null}}else Qt=Kt?nr(e.stateNode.nextSibling):null;return!0}function Tu(){for(var e=Qt;e;)e=nr(e.nextSibling)}function an(){Qt=Kt=null,Xe=!1}function Po(e){ms===null?ms=[e]:ms.push(e)}var zh=Us.ReactCurrentBatchConfig;function wn(e,s,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Y(309));var n=r.stateNode}if(!n)throw Error(Y(147,e));var a=n,l=""+e;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===l?s.ref:(s=function(i){var o=a.refs;i===null?delete o[l]:o[l]=i},s._stringRef=l,s)}if(typeof e!="string")throw Error(Y(284));if(!r._owner)throw Error(Y(290,e))}return e}function Na(e,s){throw e=Object.prototype.toString.call(s),Error(Y(31,e==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":e))}function Hc(e){var s=e._init;return s(e._payload)}function Pu(e){function s(g,h){if(e){var j=g.deletions;j===null?(g.deletions=[h],g.flags|=16):j.push(h)}}function r(g,h){if(!e)return null;for(;h!==null;)s(g,h),h=h.sibling;return null}function n(g,h){for(g=new Map;h!==null;)h.key!==null?g.set(h.key,h):g.set(h.index,h),h=h.sibling;return g}function a(g,h){return g=or(g,h),g.index=0,g.sibling=null,g}function l(g,h,j){return g.index=j,e?(j=g.alternate,j!==null?(j=j.index,j<h?(g.flags|=2,h):j):(g.flags|=2,h)):(g.flags|=1048576,h)}function i(g){return e&&g.alternate===null&&(g.flags|=2),g}function o(g,h,j,I){return h===null||h.tag!==6?(h=ni(j,g.mode,I),h.return=g,h):(h=a(h,j),h.return=g,h)}function c(g,h,j,I){var F=j.type;return F===Or?x(g,h,j.props.children,I,j.key):h!==null&&(h.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Ws&&Hc(F)===h.type)?(I=a(h,j.props),I.ref=wn(g,h,j),I.return=g,I):(I=Ua(j.type,j.key,j.props,null,g.mode,I),I.ref=wn(g,h,j),I.return=g,I)}function m(g,h,j,I){return h===null||h.tag!==4||h.stateNode.containerInfo!==j.containerInfo||h.stateNode.implementation!==j.implementation?(h=ai(j,g.mode,I),h.return=g,h):(h=a(h,j.children||[]),h.return=g,h)}function x(g,h,j,I,F){return h===null||h.tag!==7?(h=Dr(j,g.mode,I,F),h.return=g,h):(h=a(h,j),h.return=g,h)}function y(g,h,j){if(typeof h=="string"&&h!==""||typeof h=="number")return h=ni(""+h,g.mode,j),h.return=g,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case ua:return j=Ua(h.type,h.key,h.props,null,g.mode,j),j.ref=wn(g,null,h),j.return=g,j;case $r:return h=ai(h,g.mode,j),h.return=g,h;case Ws:var I=h._init;return y(g,I(h._payload),j)}if(Sn(h)||gn(h))return h=Dr(h,g.mode,j,null),h.return=g,h;Na(g,h)}return null}function d(g,h,j,I){var F=h!==null?h.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return F!==null?null:o(g,h,""+j,I);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case ua:return j.key===F?c(g,h,j,I):null;case $r:return j.key===F?m(g,h,j,I):null;case Ws:return F=j._init,d(g,h,F(j._payload),I)}if(Sn(j)||gn(j))return F!==null?null:x(g,h,j,I,null);Na(g,j)}return null}function f(g,h,j,I,F){if(typeof I=="string"&&I!==""||typeof I=="number")return g=g.get(j)||null,o(h,g,""+I,F);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case ua:return g=g.get(I.key===null?j:I.key)||null,c(h,g,I,F);case $r:return g=g.get(I.key===null?j:I.key)||null,m(h,g,I,F);case Ws:var v=I._init;return f(g,h,j,v(I._payload),F)}if(Sn(I)||gn(I))return g=g.get(j)||null,x(h,g,I,F,null);Na(h,I)}return null}function b(g,h,j,I){for(var F=null,v=null,w=h,N=h=0,C=null;w!==null&&N<j.length;N++){w.index>N?(C=w,w=null):C=w.sibling;var P=d(g,w,j[N],I);if(P===null){w===null&&(w=C);break}e&&w&&P.alternate===null&&s(g,w),h=l(P,h,N),v===null?F=P:v.sibling=P,v=P,w=C}if(N===j.length)return r(g,w),Xe&&wr(g,N),F;if(w===null){for(;N<j.length;N++)w=y(g,j[N],I),w!==null&&(h=l(w,h,N),v===null?F=w:v.sibling=w,v=w);return Xe&&wr(g,N),F}for(w=n(g,w);N<j.length;N++)C=f(w,g,N,j[N],I),C!==null&&(e&&C.alternate!==null&&w.delete(C.key===null?N:C.key),h=l(C,h,N),v===null?F=C:v.sibling=C,v=C);return e&&w.forEach(function(G){return s(g,G)}),Xe&&wr(g,N),F}function S(g,h,j,I){var F=gn(j);if(typeof F!="function")throw Error(Y(150));if(j=F.call(j),j==null)throw Error(Y(151));for(var v=F=null,w=h,N=h=0,C=null,P=j.next();w!==null&&!P.done;N++,P=j.next()){w.index>N?(C=w,w=null):C=w.sibling;var G=d(g,w,P.value,I);if(G===null){w===null&&(w=C);break}e&&w&&G.alternate===null&&s(g,w),h=l(G,h,N),v===null?F=G:v.sibling=G,v=G,w=C}if(P.done)return r(g,w),Xe&&wr(g,N),F;if(w===null){for(;!P.done;N++,P=j.next())P=y(g,P.value,I),P!==null&&(h=l(P,h,N),v===null?F=P:v.sibling=P,v=P);return Xe&&wr(g,N),F}for(w=n(g,w);!P.done;N++,P=j.next())P=f(w,g,N,P.value,I),P!==null&&(e&&P.alternate!==null&&w.delete(P.key===null?N:P.key),h=l(P,h,N),v===null?F=P:v.sibling=P,v=P);return e&&w.forEach(function(B){return s(g,B)}),Xe&&wr(g,N),F}function z(g,h,j,I){if(typeof j=="object"&&j!==null&&j.type===Or&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case ua:e:{for(var F=j.key,v=h;v!==null;){if(v.key===F){if(F=j.type,F===Or){if(v.tag===7){r(g,v.sibling),h=a(v,j.props.children),h.return=g,g=h;break e}}else if(v.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Ws&&Hc(F)===v.type){r(g,v.sibling),h=a(v,j.props),h.ref=wn(g,v,j),h.return=g,g=h;break e}r(g,v);break}else s(g,v);v=v.sibling}j.type===Or?(h=Dr(j.props.children,g.mode,I,j.key),h.return=g,g=h):(I=Ua(j.type,j.key,j.props,null,g.mode,I),I.ref=wn(g,h,j),I.return=g,g=I)}return i(g);case $r:e:{for(v=j.key;h!==null;){if(h.key===v)if(h.tag===4&&h.stateNode.containerInfo===j.containerInfo&&h.stateNode.implementation===j.implementation){r(g,h.sibling),h=a(h,j.children||[]),h.return=g,g=h;break e}else{r(g,h);break}else s(g,h);h=h.sibling}h=ai(j,g.mode,I),h.return=g,g=h}return i(g);case Ws:return v=j._init,z(g,h,v(j._payload),I)}if(Sn(j))return b(g,h,j,I);if(gn(j))return S(g,h,j,I);Na(g,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,h!==null&&h.tag===6?(r(g,h.sibling),h=a(h,j),h.return=g,g=h):(r(g,h),h=ni(j,g.mode,I),h.return=g,g=h),i(g)):r(g,h)}return z}var ln=Pu(!0),Eu=Pu(!1),sl=hr(null),rl=null,Qr=null,Eo=null;function Io(){Eo=Qr=rl=null}function Mo(e){var s=sl.current;Qe(sl),e._currentValue=s}function Fi(e,s,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&s)!==s?(e.childLanes|=s,n!==null&&(n.childLanes|=s)):n!==null&&(n.childLanes&s)!==s&&(n.childLanes|=s),e===r)break;e=e.return}}function tn(e,s){rl=e,Eo=Qr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&s&&(Bt=!0),e.firstContext=null)}function ls(e){var s=e._currentValue;if(Eo!==e)if(e={context:e,memoizedValue:s,next:null},Qr===null){if(rl===null)throw Error(Y(308));Qr=e,rl.dependencies={lanes:0,firstContext:e}}else Qr=Qr.next=e;return s}var Sr=null;function Ao(e){Sr===null?Sr=[e]:Sr.push(e)}function Iu(e,s,r,n){var a=s.interleaved;return a===null?(r.next=r,Ao(s)):(r.next=a.next,a.next=r),s.interleaved=r,$s(e,n)}function $s(e,s){e.lanes|=s;var r=e.alternate;for(r!==null&&(r.lanes|=s),r=e,e=e.return;e!==null;)e.childLanes|=s,r=e.alternate,r!==null&&(r.childLanes|=s),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Vs=!1;function Lo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mu(e,s){e=e.updateQueue,s.updateQueue===e&&(s.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ls(e,s){return{eventTime:e,lane:s,tag:0,payload:null,callback:null,next:null}}function ar(e,s,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Me&2){var a=n.pending;return a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s,$s(e,r)}return a=n.interleaved,a===null?(s.next=s,Ao(n)):(s.next=a.next,a.next=s),n.interleaved=s,$s(e,r)}function La(e,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194240)!==0)){var n=s.lanes;n&=e.pendingLanes,r|=n,s.lanes=r,jo(e,r)}}function Bc(e,s){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,l=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};l===null?a=l=i:l=l.next=i,r=r.next}while(r!==null);l===null?a=l=s:l=l.next=s}else a=l=s;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=s:e.next=s,r.lastBaseUpdate=s}function nl(e,s,r,n){var a=e.updateQueue;Vs=!1;var l=a.firstBaseUpdate,i=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var c=o,m=c.next;c.next=null,i===null?l=m:i.next=m,i=c;var x=e.alternate;x!==null&&(x=x.updateQueue,o=x.lastBaseUpdate,o!==i&&(o===null?x.firstBaseUpdate=m:o.next=m,x.lastBaseUpdate=c))}if(l!==null){var y=a.baseState;i=0,x=m=c=null,o=l;do{var d=o.lane,f=o.eventTime;if((n&d)===d){x!==null&&(x=x.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var b=e,S=o;switch(d=s,f=r,S.tag){case 1:if(b=S.payload,typeof b=="function"){y=b.call(f,y,d);break e}y=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=S.payload,d=typeof b=="function"?b.call(f,y,d):b,d==null)break e;y=tt({},y,d);break e;case 2:Vs=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,d=a.effects,d===null?a.effects=[o]:d.push(o))}else f={eventTime:f,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},x===null?(m=x=f,c=y):x=x.next=f,i|=d;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;d=o,o=d.next,d.next=null,a.lastBaseUpdate=d,a.shared.pending=null}}while(!0);if(x===null&&(c=y),a.baseState=c,a.firstBaseUpdate=m,a.lastBaseUpdate=x,s=a.shared.interleaved,s!==null){a=s;do i|=a.lane,a=a.next;while(a!==s)}else l===null&&(a.shared.lanes=0);Ir|=i,e.lanes=i,e.memoizedState=y}}function Wc(e,s,r){if(e=s.effects,s.effects=null,e!==null)for(s=0;s<e.length;s++){var n=e[s],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(Y(191,a));a.call(n)}}}var la={},ks=hr(la),Qn=hr(la),Kn=hr(la);function _r(e){if(e===la)throw Error(Y(174));return e}function zo(e,s){switch(Ge(Kn,s),Ge(Qn,e),Ge(ks,la),e=s.nodeType,e){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:fi(null,"");break;default:e=e===8?s.parentNode:s,s=e.namespaceURI||null,e=e.tagName,s=fi(s,e)}Qe(ks),Ge(ks,s)}function on(){Qe(ks),Qe(Qn),Qe(Kn)}function Au(e){_r(Kn.current);var s=_r(ks.current),r=fi(s,e.type);s!==r&&(Ge(Qn,e),Ge(ks,r))}function Fo(e){Qn.current===e&&(Qe(ks),Qe(Qn))}var Je=hr(0);function al(e){for(var s=e;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Zl=[];function Ro(){for(var e=0;e<Zl.length;e++)Zl[e]._workInProgressVersionPrimary=null;Zl.length=0}var za=Us.ReactCurrentDispatcher,Jl=Us.ReactCurrentBatchConfig,Er=0,et=null,ht=null,ft=null,ll=!1,Mn=!1,Yn=0,Fh=0;function kt(){throw Error(Y(321))}function $o(e,s){if(s===null)return!1;for(var r=0;r<s.length&&r<e.length;r++)if(!ps(e[r],s[r]))return!1;return!0}function Oo(e,s,r,n,a,l){if(Er=l,et=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,za.current=e===null||e.memoizedState===null?Uh:Hh,e=r(n,a),Mn){l=0;do{if(Mn=!1,Yn=0,25<=l)throw Error(Y(301));l+=1,ft=ht=null,s.updateQueue=null,za.current=Bh,e=r(n,a)}while(Mn)}if(za.current=il,s=ht!==null&&ht.next!==null,Er=0,ft=ht=et=null,ll=!1,s)throw Error(Y(300));return e}function Uo(){var e=Yn!==0;return Yn=0,e}function fs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ft===null?et.memoizedState=ft=e:ft=ft.next=e,ft}function is(){if(ht===null){var e=et.alternate;e=e!==null?e.memoizedState:null}else e=ht.next;var s=ft===null?et.memoizedState:ft.next;if(s!==null)ft=s,ht=e;else{if(e===null)throw Error(Y(310));ht=e,e={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},ft===null?et.memoizedState=ft=e:ft=ft.next=e}return ft}function Xn(e,s){return typeof s=="function"?s(e):s}function ei(e){var s=is(),r=s.queue;if(r===null)throw Error(Y(311));r.lastRenderedReducer=e;var n=ht,a=n.baseQueue,l=r.pending;if(l!==null){if(a!==null){var i=a.next;a.next=l.next,l.next=i}n.baseQueue=a=l,r.pending=null}if(a!==null){l=a.next,n=n.baseState;var o=i=null,c=null,m=l;do{var x=m.lane;if((Er&x)===x)c!==null&&(c=c.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),n=m.hasEagerState?m.eagerState:e(n,m.action);else{var y={lane:x,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};c===null?(o=c=y,i=n):c=c.next=y,et.lanes|=x,Ir|=x}m=m.next}while(m!==null&&m!==l);c===null?i=n:c.next=o,ps(n,s.memoizedState)||(Bt=!0),s.memoizedState=n,s.baseState=i,s.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do l=a.lane,et.lanes|=l,Ir|=l,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[s.memoizedState,r.dispatch]}function ti(e){var s=is(),r=s.queue;if(r===null)throw Error(Y(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,l=s.memoizedState;if(a!==null){r.pending=null;var i=a=a.next;do l=e(l,i.action),i=i.next;while(i!==a);ps(l,s.memoizedState)||(Bt=!0),s.memoizedState=l,s.baseQueue===null&&(s.baseState=l),r.lastRenderedState=l}return[l,n]}function Lu(){}function zu(e,s){var r=et,n=is(),a=s(),l=!ps(n.memoizedState,a);if(l&&(n.memoizedState=a,Bt=!0),n=n.queue,Ho($u.bind(null,r,n,e),[e]),n.getSnapshot!==s||l||ft!==null&&ft.memoizedState.tag&1){if(r.flags|=2048,Zn(9,Ru.bind(null,r,n,a,s),void 0,null),vt===null)throw Error(Y(349));Er&30||Fu(r,s,a)}return a}function Fu(e,s,r){e.flags|=16384,e={getSnapshot:s,value:r},s=et.updateQueue,s===null?(s={lastEffect:null,stores:null},et.updateQueue=s,s.stores=[e]):(r=s.stores,r===null?s.stores=[e]:r.push(e))}function Ru(e,s,r,n){s.value=r,s.getSnapshot=n,Ou(s)&&Uu(e)}function $u(e,s,r){return r(function(){Ou(s)&&Uu(e)})}function Ou(e){var s=e.getSnapshot;e=e.value;try{var r=s();return!ps(e,r)}catch{return!0}}function Uu(e){var s=$s(e,1);s!==null&&hs(s,e,1,-1)}function Vc(e){var s=fs();return typeof e=="function"&&(e=e()),s.memoizedState=s.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xn,lastRenderedState:e},s.queue=e,e=e.dispatch=Oh.bind(null,et,e),[s.memoizedState,e]}function Zn(e,s,r,n){return e={tag:e,create:s,destroy:r,deps:n,next:null},s=et.updateQueue,s===null?(s={lastEffect:null,stores:null},et.updateQueue=s,s.lastEffect=e.next=e):(r=s.lastEffect,r===null?s.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,s.lastEffect=e)),e}function Hu(){return is().memoizedState}function Fa(e,s,r,n){var a=fs();et.flags|=e,a.memoizedState=Zn(1|s,r,void 0,n===void 0?null:n)}function bl(e,s,r,n){var a=is();n=n===void 0?null:n;var l=void 0;if(ht!==null){var i=ht.memoizedState;if(l=i.destroy,n!==null&&$o(n,i.deps)){a.memoizedState=Zn(s,r,l,n);return}}et.flags|=e,a.memoizedState=Zn(1|s,r,l,n)}function Gc(e,s){return Fa(8390656,8,e,s)}function Ho(e,s){return bl(2048,8,e,s)}function Bu(e,s){return bl(4,2,e,s)}function Wu(e,s){return bl(4,4,e,s)}function Vu(e,s){if(typeof s=="function")return e=e(),s(e),function(){s(null)};if(s!=null)return e=e(),s.current=e,function(){s.current=null}}function Gu(e,s,r){return r=r!=null?r.concat([e]):null,bl(4,4,Vu.bind(null,s,e),r)}function Bo(){}function qu(e,s){var r=is();s=s===void 0?null:s;var n=r.memoizedState;return n!==null&&s!==null&&$o(s,n[1])?n[0]:(r.memoizedState=[e,s],e)}function Qu(e,s){var r=is();s=s===void 0?null:s;var n=r.memoizedState;return n!==null&&s!==null&&$o(s,n[1])?n[0]:(e=e(),r.memoizedState=[e,s],e)}function Ku(e,s,r){return Er&21?(ps(r,s)||(r=eu(),et.lanes|=r,Ir|=r,e.baseState=!0),s):(e.baseState&&(e.baseState=!1,Bt=!0),e.memoizedState=r)}function Rh(e,s){var r=He;He=r!==0&&4>r?r:4,e(!0);var n=Jl.transition;Jl.transition={};try{e(!1),s()}finally{He=r,Jl.transition=n}}function Yu(){return is().memoizedState}function $h(e,s,r){var n=ir(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Xu(e))Zu(s,r);else if(r=Iu(e,s,r,n),r!==null){var a=Lt();hs(r,e,n,a),Ju(r,s,n)}}function Oh(e,s,r){var n=ir(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Xu(e))Zu(s,a);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=s.lastRenderedReducer,l!==null))try{var i=s.lastRenderedState,o=l(i,r);if(a.hasEagerState=!0,a.eagerState=o,ps(o,i)){var c=s.interleaved;c===null?(a.next=a,Ao(s)):(a.next=c.next,c.next=a),s.interleaved=a;return}}catch{}finally{}r=Iu(e,s,a,n),r!==null&&(a=Lt(),hs(r,e,n,a),Ju(r,s,n))}}function Xu(e){var s=e.alternate;return e===et||s!==null&&s===et}function Zu(e,s){Mn=ll=!0;var r=e.pending;r===null?s.next=s:(s.next=r.next,r.next=s),e.pending=s}function Ju(e,s,r){if(r&4194240){var n=s.lanes;n&=e.pendingLanes,r|=n,s.lanes=r,jo(e,r)}}var il={readContext:ls,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useInsertionEffect:kt,useLayoutEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useMutableSource:kt,useSyncExternalStore:kt,useId:kt,unstable_isNewReconciler:!1},Uh={readContext:ls,useCallback:function(e,s){return fs().memoizedState=[e,s===void 0?null:s],e},useContext:ls,useEffect:Gc,useImperativeHandle:function(e,s,r){return r=r!=null?r.concat([e]):null,Fa(4194308,4,Vu.bind(null,s,e),r)},useLayoutEffect:function(e,s){return Fa(4194308,4,e,s)},useInsertionEffect:function(e,s){return Fa(4,2,e,s)},useMemo:function(e,s){var r=fs();return s=s===void 0?null:s,e=e(),r.memoizedState=[e,s],e},useReducer:function(e,s,r){var n=fs();return s=r!==void 0?r(s):s,n.memoizedState=n.baseState=s,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},n.queue=e,e=e.dispatch=$h.bind(null,et,e),[n.memoizedState,e]},useRef:function(e){var s=fs();return e={current:e},s.memoizedState=e},useState:Vc,useDebugValue:Bo,useDeferredValue:function(e){return fs().memoizedState=e},useTransition:function(){var e=Vc(!1),s=e[0];return e=Rh.bind(null,e[1]),fs().memoizedState=e,[s,e]},useMutableSource:function(){},useSyncExternalStore:function(e,s,r){var n=et,a=fs();if(Xe){if(r===void 0)throw Error(Y(407));r=r()}else{if(r=s(),vt===null)throw Error(Y(349));Er&30||Fu(n,s,r)}a.memoizedState=r;var l={value:r,getSnapshot:s};return a.queue=l,Gc($u.bind(null,n,l,e),[e]),n.flags|=2048,Zn(9,Ru.bind(null,n,l,r,s),void 0,null),r},useId:function(){var e=fs(),s=vt.identifierPrefix;if(Xe){var r=Ps,n=Ts;r=(n&~(1<<32-xs(n)-1)).toString(32)+r,s=":"+s+"R"+r,r=Yn++,0<r&&(s+="H"+r.toString(32)),s+=":"}else r=Fh++,s=":"+s+"r"+r.toString(32)+":";return e.memoizedState=s},unstable_isNewReconciler:!1},Hh={readContext:ls,useCallback:qu,useContext:ls,useEffect:Ho,useImperativeHandle:Gu,useInsertionEffect:Bu,useLayoutEffect:Wu,useMemo:Qu,useReducer:ei,useRef:Hu,useState:function(){return ei(Xn)},useDebugValue:Bo,useDeferredValue:function(e){var s=is();return Ku(s,ht.memoizedState,e)},useTransition:function(){var e=ei(Xn)[0],s=is().memoizedState;return[e,s]},useMutableSource:Lu,useSyncExternalStore:zu,useId:Yu,unstable_isNewReconciler:!1},Bh={readContext:ls,useCallback:qu,useContext:ls,useEffect:Ho,useImperativeHandle:Gu,useInsertionEffect:Bu,useLayoutEffect:Wu,useMemo:Qu,useReducer:ti,useRef:Hu,useState:function(){return ti(Xn)},useDebugValue:Bo,useDeferredValue:function(e){var s=is();return ht===null?s.memoizedState=e:Ku(s,ht.memoizedState,e)},useTransition:function(){var e=ti(Xn)[0],s=is().memoizedState;return[e,s]},useMutableSource:Lu,useSyncExternalStore:zu,useId:Yu,unstable_isNewReconciler:!1};function ds(e,s){if(e&&e.defaultProps){s=tt({},s),e=e.defaultProps;for(var r in e)s[r]===void 0&&(s[r]=e[r]);return s}return s}function Ri(e,s,r,n){s=e.memoizedState,r=r(n,s),r=r==null?s:tt({},s,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var kl={isMounted:function(e){return(e=e._reactInternals)?Lr(e)===e:!1},enqueueSetState:function(e,s,r){e=e._reactInternals;var n=Lt(),a=ir(e),l=Ls(n,a);l.payload=s,r!=null&&(l.callback=r),s=ar(e,l,a),s!==null&&(hs(s,e,a,n),La(s,e,a))},enqueueReplaceState:function(e,s,r){e=e._reactInternals;var n=Lt(),a=ir(e),l=Ls(n,a);l.tag=1,l.payload=s,r!=null&&(l.callback=r),s=ar(e,l,a),s!==null&&(hs(s,e,a,n),La(s,e,a))},enqueueForceUpdate:function(e,s){e=e._reactInternals;var r=Lt(),n=ir(e),a=Ls(r,n);a.tag=2,s!=null&&(a.callback=s),s=ar(e,a,n),s!==null&&(hs(s,e,n,r),La(s,e,n))}};function qc(e,s,r,n,a,l,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,l,i):s.prototype&&s.prototype.isPureReactComponent?!Wn(r,n)||!Wn(a,l):!0}function em(e,s,r){var n=!1,a=mr,l=s.contextType;return typeof l=="object"&&l!==null?l=ls(l):(a=Vt(s)?Tr:Dt.current,n=s.contextTypes,l=(n=n!=null)?nn(e,a):mr),s=new s(r,l),e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=kl,e.stateNode=s,s._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=l),s}function Qc(e,s,r,n){e=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,n),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,n),s.state!==e&&kl.enqueueReplaceState(s,s.state,null)}function $i(e,s,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Lo(e);var l=s.contextType;typeof l=="object"&&l!==null?a.context=ls(l):(l=Vt(s)?Tr:Dt.current,a.context=nn(e,l)),a.state=e.memoizedState,l=s.getDerivedStateFromProps,typeof l=="function"&&(Ri(e,s,l,r),a.state=e.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(s=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),s!==a.state&&kl.enqueueReplaceState(a,a.state,null),nl(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function cn(e,s){try{var r="",n=s;do r+=fx(n),n=n.return;while(n);var a=r}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:s,stack:a,digest:null}}function si(e,s,r){return{value:e,source:null,stack:r??null,digest:s??null}}function Oi(e,s){try{console.error(s.value)}catch(r){setTimeout(function(){throw r})}}var Wh=typeof WeakMap=="function"?WeakMap:Map;function tm(e,s,r){r=Ls(-1,r),r.tag=3,r.payload={element:null};var n=s.value;return r.callback=function(){cl||(cl=!0,Yi=n),Oi(e,s)},r}function sm(e,s,r){r=Ls(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=s.value;r.payload=function(){return n(a)},r.callback=function(){Oi(e,s)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(r.callback=function(){Oi(e,s),typeof n!="function"&&(lr===null?lr=new Set([this]):lr.add(this));var i=s.stack;this.componentDidCatch(s.value,{componentStack:i!==null?i:""})}),r}function Kc(e,s,r){var n=e.pingCache;if(n===null){n=e.pingCache=new Wh;var a=new Set;n.set(s,a)}else a=n.get(s),a===void 0&&(a=new Set,n.set(s,a));a.has(r)||(a.add(r),e=np.bind(null,e,s,r),s.then(e,e))}function Yc(e){do{var s;if((s=e.tag===13)&&(s=e.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return e;e=e.return}while(e!==null);return null}function Xc(e,s,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===s?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(s=Ls(-1,1),s.tag=2,ar(r,s,1))),r.lanes|=1),e)}var Vh=Us.ReactCurrentOwner,Bt=!1;function Mt(e,s,r,n){s.child=e===null?Eu(s,null,r,n):ln(s,e.child,r,n)}function Zc(e,s,r,n,a){r=r.render;var l=s.ref;return tn(s,a),n=Oo(e,s,r,n,l,a),r=Uo(),e!==null&&!Bt?(s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~a,Os(e,s,a)):(Xe&&r&&Do(s),s.flags|=1,Mt(e,s,n,a),s.child)}function Jc(e,s,r,n,a){if(e===null){var l=r.type;return typeof l=="function"&&!Xo(l)&&l.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(s.tag=15,s.type=l,rm(e,s,l,n,a)):(e=Ua(r.type,null,n,s,s.mode,a),e.ref=s.ref,e.return=s,s.child=e)}if(l=e.child,!(e.lanes&a)){var i=l.memoizedProps;if(r=r.compare,r=r!==null?r:Wn,r(i,n)&&e.ref===s.ref)return Os(e,s,a)}return s.flags|=1,e=or(l,n),e.ref=s.ref,e.return=s,s.child=e}function rm(e,s,r,n,a){if(e!==null){var l=e.memoizedProps;if(Wn(l,n)&&e.ref===s.ref)if(Bt=!1,s.pendingProps=n=l,(e.lanes&a)!==0)e.flags&131072&&(Bt=!0);else return s.lanes=e.lanes,Os(e,s,a)}return Ui(e,s,r,n,a)}function nm(e,s,r){var n=s.pendingProps,a=n.children,l=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ge(Yr,qt),qt|=r;else{if(!(r&1073741824))return e=l!==null?l.baseLanes|r:r,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:e,cachePool:null,transitions:null},s.updateQueue=null,Ge(Yr,qt),qt|=e,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=l!==null?l.baseLanes:r,Ge(Yr,qt),qt|=n}else l!==null?(n=l.baseLanes|r,s.memoizedState=null):n=r,Ge(Yr,qt),qt|=n;return Mt(e,s,a,r),s.child}function am(e,s){var r=s.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(s.flags|=512,s.flags|=2097152)}function Ui(e,s,r,n,a){var l=Vt(r)?Tr:Dt.current;return l=nn(s,l),tn(s,a),r=Oo(e,s,r,n,l,a),n=Uo(),e!==null&&!Bt?(s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~a,Os(e,s,a)):(Xe&&n&&Do(s),s.flags|=1,Mt(e,s,r,a),s.child)}function ed(e,s,r,n,a){if(Vt(r)){var l=!0;Ja(s)}else l=!1;if(tn(s,a),s.stateNode===null)Ra(e,s),em(s,r,n),$i(s,r,n,a),n=!0;else if(e===null){var i=s.stateNode,o=s.memoizedProps;i.props=o;var c=i.context,m=r.contextType;typeof m=="object"&&m!==null?m=ls(m):(m=Vt(r)?Tr:Dt.current,m=nn(s,m));var x=r.getDerivedStateFromProps,y=typeof x=="function"||typeof i.getSnapshotBeforeUpdate=="function";y||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==n||c!==m)&&Qc(s,i,n,m),Vs=!1;var d=s.memoizedState;i.state=d,nl(s,n,i,a),c=s.memoizedState,o!==n||d!==c||Wt.current||Vs?(typeof x=="function"&&(Ri(s,r,x,n),c=s.memoizedState),(o=Vs||qc(s,r,o,n,d,c,m))?(y||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(s.flags|=4194308)):(typeof i.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=n,s.memoizedState=c),i.props=n,i.state=c,i.context=m,n=o):(typeof i.componentDidMount=="function"&&(s.flags|=4194308),n=!1)}else{i=s.stateNode,Mu(e,s),o=s.memoizedProps,m=s.type===s.elementType?o:ds(s.type,o),i.props=m,y=s.pendingProps,d=i.context,c=r.contextType,typeof c=="object"&&c!==null?c=ls(c):(c=Vt(r)?Tr:Dt.current,c=nn(s,c));var f=r.getDerivedStateFromProps;(x=typeof f=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==y||d!==c)&&Qc(s,i,n,c),Vs=!1,d=s.memoizedState,i.state=d,nl(s,n,i,a);var b=s.memoizedState;o!==y||d!==b||Wt.current||Vs?(typeof f=="function"&&(Ri(s,r,f,n),b=s.memoizedState),(m=Vs||qc(s,r,m,n,d,b,c)||!1)?(x||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,b,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,b,c)),typeof i.componentDidUpdate=="function"&&(s.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof i.componentDidUpdate!="function"||o===e.memoizedProps&&d===e.memoizedState||(s.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&d===e.memoizedState||(s.flags|=1024),s.memoizedProps=n,s.memoizedState=b),i.props=n,i.state=b,i.context=c,n=m):(typeof i.componentDidUpdate!="function"||o===e.memoizedProps&&d===e.memoizedState||(s.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&d===e.memoizedState||(s.flags|=1024),n=!1)}return Hi(e,s,r,n,l,a)}function Hi(e,s,r,n,a,l){am(e,s);var i=(s.flags&128)!==0;if(!n&&!i)return a&&$c(s,r,!1),Os(e,s,l);n=s.stateNode,Vh.current=s;var o=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return s.flags|=1,e!==null&&i?(s.child=ln(s,e.child,null,l),s.child=ln(s,null,o,l)):Mt(e,s,o,l),s.memoizedState=n.state,a&&$c(s,r,!0),s.child}function lm(e){var s=e.stateNode;s.pendingContext?Rc(e,s.pendingContext,s.pendingContext!==s.context):s.context&&Rc(e,s.context,!1),zo(e,s.containerInfo)}function td(e,s,r,n,a){return an(),Po(a),s.flags|=256,Mt(e,s,r,n),s.child}var Bi={dehydrated:null,treeContext:null,retryLane:0};function Wi(e){return{baseLanes:e,cachePool:null,transitions:null}}function im(e,s,r){var n=s.pendingProps,a=Je.current,l=!1,i=(s.flags&128)!==0,o;if((o=i)||(o=e!==null&&e.memoizedState===null?!1:(a&2)!==0),o?(l=!0,s.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Ge(Je,a&1),e===null)return zi(s),e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(s.mode&1?e.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(i=n.children,e=n.fallback,l?(n=s.mode,l=s.child,i={mode:"hidden",children:i},!(n&1)&&l!==null?(l.childLanes=0,l.pendingProps=i):l=Cl(i,n,0,null),e=Dr(e,n,r,null),l.return=s,e.return=s,l.sibling=e,s.child=l,s.child.memoizedState=Wi(r),s.memoizedState=Bi,e):Wo(s,i));if(a=e.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return Gh(e,s,i,n,o,a,r);if(l){l=n.fallback,i=s.mode,a=e.child,o=a.sibling;var c={mode:"hidden",children:n.children};return!(i&1)&&s.child!==a?(n=s.child,n.childLanes=0,n.pendingProps=c,s.deletions=null):(n=or(a,c),n.subtreeFlags=a.subtreeFlags&14680064),o!==null?l=or(o,l):(l=Dr(l,i,r,null),l.flags|=2),l.return=s,n.return=s,n.sibling=l,s.child=n,n=l,l=s.child,i=e.child.memoizedState,i=i===null?Wi(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},l.memoizedState=i,l.childLanes=e.childLanes&~r,s.memoizedState=Bi,n}return l=e.child,e=l.sibling,n=or(l,{mode:"visible",children:n.children}),!(s.mode&1)&&(n.lanes=r),n.return=s,n.sibling=null,e!==null&&(r=s.deletions,r===null?(s.deletions=[e],s.flags|=16):r.push(e)),s.child=n,s.memoizedState=null,n}function Wo(e,s){return s=Cl({mode:"visible",children:s},e.mode,0,null),s.return=e,e.child=s}function ba(e,s,r,n){return n!==null&&Po(n),ln(s,e.child,null,r),e=Wo(s,s.pendingProps.children),e.flags|=2,s.memoizedState=null,e}function Gh(e,s,r,n,a,l,i){if(r)return s.flags&256?(s.flags&=-257,n=si(Error(Y(422))),ba(e,s,i,n)):s.memoizedState!==null?(s.child=e.child,s.flags|=128,null):(l=n.fallback,a=s.mode,n=Cl({mode:"visible",children:n.children},a,0,null),l=Dr(l,a,i,null),l.flags|=2,n.return=s,l.return=s,n.sibling=l,s.child=n,s.mode&1&&ln(s,e.child,null,i),s.child.memoizedState=Wi(i),s.memoizedState=Bi,l);if(!(s.mode&1))return ba(e,s,i,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var o=n.dgst;return n=o,l=Error(Y(419)),n=si(l,n,void 0),ba(e,s,i,n)}if(o=(i&e.childLanes)!==0,Bt||o){if(n=vt,n!==null){switch(i&-i){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|i)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,$s(e,a),hs(n,e,a,-1))}return Yo(),n=si(Error(Y(421))),ba(e,s,i,n)}return a.data==="$?"?(s.flags|=128,s.child=e.child,s=ap.bind(null,e),a._reactRetry=s,null):(e=l.treeContext,Qt=nr(a.nextSibling),Kt=s,Xe=!0,ms=null,e!==null&&(ss[rs++]=Ts,ss[rs++]=Ps,ss[rs++]=Pr,Ts=e.id,Ps=e.overflow,Pr=s),s=Wo(s,n.children),s.flags|=4096,s)}function sd(e,s,r){e.lanes|=s;var n=e.alternate;n!==null&&(n.lanes|=s),Fi(e.return,s,r)}function ri(e,s,r,n,a){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(l.isBackwards=s,l.rendering=null,l.renderingStartTime=0,l.last=n,l.tail=r,l.tailMode=a)}function om(e,s,r){var n=s.pendingProps,a=n.revealOrder,l=n.tail;if(Mt(e,s,n.children,r),n=Je.current,n&2)n=n&1|2,s.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=s.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&sd(e,r,s);else if(e.tag===19)sd(e,r,s);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===s)break e;for(;e.sibling===null;){if(e.return===null||e.return===s)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ge(Je,n),!(s.mode&1))s.memoizedState=null;else switch(a){case"forwards":for(r=s.child,a=null;r!==null;)e=r.alternate,e!==null&&al(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=s.child,s.child=null):(a=r.sibling,r.sibling=null),ri(s,!1,a,r,l);break;case"backwards":for(r=null,a=s.child,s.child=null;a!==null;){if(e=a.alternate,e!==null&&al(e)===null){s.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}ri(s,!0,r,null,l);break;case"together":ri(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Ra(e,s){!(s.mode&1)&&e!==null&&(e.alternate=null,s.alternate=null,s.flags|=2)}function Os(e,s,r){if(e!==null&&(s.dependencies=e.dependencies),Ir|=s.lanes,!(r&s.childLanes))return null;if(e!==null&&s.child!==e.child)throw Error(Y(153));if(s.child!==null){for(e=s.child,r=or(e,e.pendingProps),s.child=r,r.return=s;e.sibling!==null;)e=e.sibling,r=r.sibling=or(e,e.pendingProps),r.return=s;r.sibling=null}return s.child}function qh(e,s,r){switch(s.tag){case 3:lm(s),an();break;case 5:Au(s);break;case 1:Vt(s.type)&&Ja(s);break;case 4:zo(s,s.stateNode.containerInfo);break;case 10:var n=s.type._context,a=s.memoizedProps.value;Ge(sl,n._currentValue),n._currentValue=a;break;case 13:if(n=s.memoizedState,n!==null)return n.dehydrated!==null?(Ge(Je,Je.current&1),s.flags|=128,null):r&s.child.childLanes?im(e,s,r):(Ge(Je,Je.current&1),e=Os(e,s,r),e!==null?e.sibling:null);Ge(Je,Je.current&1);break;case 19:if(n=(r&s.childLanes)!==0,e.flags&128){if(n)return om(e,s,r);s.flags|=128}if(a=s.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ge(Je,Je.current),n)break;return null;case 22:case 23:return s.lanes=0,nm(e,s,r)}return Os(e,s,r)}var cm,Vi,dm,um;cm=function(e,s){for(var r=s.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Vi=function(){};dm=function(e,s,r,n){var a=e.memoizedProps;if(a!==n){e=s.stateNode,_r(ks.current);var l=null;switch(r){case"input":a=xi(e,a),n=xi(e,n),l=[];break;case"select":a=tt({},a,{value:void 0}),n=tt({},n,{value:void 0}),l=[];break;case"textarea":a=gi(e,a),n=gi(e,n),l=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Xa)}yi(r,n);var i;r=null;for(m in a)if(!n.hasOwnProperty(m)&&a.hasOwnProperty(m)&&a[m]!=null)if(m==="style"){var o=a[m];for(i in o)o.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(Fn.hasOwnProperty(m)?l||(l=[]):(l=l||[]).push(m,null));for(m in n){var c=n[m];if(o=a!=null?a[m]:void 0,n.hasOwnProperty(m)&&c!==o&&(c!=null||o!=null))if(m==="style")if(o){for(i in o)!o.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&o[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(l||(l=[]),l.push(m,r)),r=c;else m==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(l=l||[]).push(m,c)):m==="children"?typeof c!="string"&&typeof c!="number"||(l=l||[]).push(m,""+c):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(Fn.hasOwnProperty(m)?(c!=null&&m==="onScroll"&&qe("scroll",e),l||o===c||(l=[])):(l=l||[]).push(m,c))}r&&(l=l||[]).push("style",r);var m=l;(s.updateQueue=m)&&(s.flags|=4)}};um=function(e,s,r,n){r!==n&&(s.flags|=4)};function Nn(e,s){if(!Xe)switch(e.tailMode){case"hidden":s=e.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?s||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function St(e){var s=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(s)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,s}function Qh(e,s,r){var n=s.pendingProps;switch(To(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(s),null;case 1:return Vt(s.type)&&Za(),St(s),null;case 3:return n=s.stateNode,on(),Qe(Wt),Qe(Dt),Ro(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(wa(s)?s.flags|=4:e===null||e.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,ms!==null&&(Ji(ms),ms=null))),Vi(e,s),St(s),null;case 5:Fo(s);var a=_r(Kn.current);if(r=s.type,e!==null&&s.stateNode!=null)dm(e,s,r,n,a),e.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!n){if(s.stateNode===null)throw Error(Y(166));return St(s),null}if(e=_r(ks.current),wa(s)){n=s.stateNode,r=s.type;var l=s.memoizedProps;switch(n[vs]=s,n[qn]=l,e=(s.mode&1)!==0,r){case"dialog":qe("cancel",n),qe("close",n);break;case"iframe":case"object":case"embed":qe("load",n);break;case"video":case"audio":for(a=0;a<Cn.length;a++)qe(Cn[a],n);break;case"source":qe("error",n);break;case"img":case"image":case"link":qe("error",n),qe("load",n);break;case"details":qe("toggle",n);break;case"input":uc(n,l),qe("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!l.multiple},qe("invalid",n);break;case"textarea":xc(n,l),qe("invalid",n)}yi(r,l),a=null;for(var i in l)if(l.hasOwnProperty(i)){var o=l[i];i==="children"?typeof o=="string"?n.textContent!==o&&(l.suppressHydrationWarning!==!0&&ja(n.textContent,o,e),a=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(l.suppressHydrationWarning!==!0&&ja(n.textContent,o,e),a=["children",""+o]):Fn.hasOwnProperty(i)&&o!=null&&i==="onScroll"&&qe("scroll",n)}switch(r){case"input":ma(n),mc(n,l,!0);break;case"textarea":ma(n),hc(n);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(n.onclick=Xa)}n=a,s.updateQueue=n,n!==null&&(s.flags|=4)}else{i=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=$d(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=i.createElement(r,{is:n.is}):(e=i.createElement(r),r==="select"&&(i=e,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):e=i.createElementNS(e,r),e[vs]=s,e[qn]=n,cm(e,s,!1,!1),s.stateNode=e;e:{switch(i=vi(r,n),r){case"dialog":qe("cancel",e),qe("close",e),a=n;break;case"iframe":case"object":case"embed":qe("load",e),a=n;break;case"video":case"audio":for(a=0;a<Cn.length;a++)qe(Cn[a],e);a=n;break;case"source":qe("error",e),a=n;break;case"img":case"image":case"link":qe("error",e),qe("load",e),a=n;break;case"details":qe("toggle",e),a=n;break;case"input":uc(e,n),a=xi(e,n),qe("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=tt({},n,{value:void 0}),qe("invalid",e);break;case"textarea":xc(e,n),a=gi(e,n),qe("invalid",e);break;default:a=n}yi(r,a),o=a;for(l in o)if(o.hasOwnProperty(l)){var c=o[l];l==="style"?Hd(e,c):l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Od(e,c)):l==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Rn(e,c):typeof c=="number"&&Rn(e,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Fn.hasOwnProperty(l)?c!=null&&l==="onScroll"&&qe("scroll",e):c!=null&&ho(e,l,c,i))}switch(r){case"input":ma(e),mc(e,n,!1);break;case"textarea":ma(e),hc(e);break;case"option":n.value!=null&&e.setAttribute("value",""+ur(n.value));break;case"select":e.multiple=!!n.multiple,l=n.value,l!=null?Xr(e,!!n.multiple,l,!1):n.defaultValue!=null&&Xr(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Xa)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return St(s),null;case 6:if(e&&s.stateNode!=null)um(e,s,e.memoizedProps,n);else{if(typeof n!="string"&&s.stateNode===null)throw Error(Y(166));if(r=_r(Kn.current),_r(ks.current),wa(s)){if(n=s.stateNode,r=s.memoizedProps,n[vs]=s,(l=n.nodeValue!==r)&&(e=Kt,e!==null))switch(e.tag){case 3:ja(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ja(n.nodeValue,r,(e.mode&1)!==0)}l&&(s.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[vs]=s,s.stateNode=n}return St(s),null;case 13:if(Qe(Je),n=s.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Xe&&Qt!==null&&s.mode&1&&!(s.flags&128))Tu(),an(),s.flags|=98560,l=!1;else if(l=wa(s),n!==null&&n.dehydrated!==null){if(e===null){if(!l)throw Error(Y(318));if(l=s.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(Y(317));l[vs]=s}else an(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;St(s),l=!1}else ms!==null&&(Ji(ms),ms=null),l=!0;if(!l)return s.flags&65536?s:null}return s.flags&128?(s.lanes=r,s):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(s.child.flags|=8192,s.mode&1&&(e===null||Je.current&1?pt===0&&(pt=3):Yo())),s.updateQueue!==null&&(s.flags|=4),St(s),null);case 4:return on(),Vi(e,s),e===null&&Vn(s.stateNode.containerInfo),St(s),null;case 10:return Mo(s.type._context),St(s),null;case 17:return Vt(s.type)&&Za(),St(s),null;case 19:if(Qe(Je),l=s.memoizedState,l===null)return St(s),null;if(n=(s.flags&128)!==0,i=l.rendering,i===null)if(n)Nn(l,!1);else{if(pt!==0||e!==null&&e.flags&128)for(e=s.child;e!==null;){if(i=al(e),i!==null){for(s.flags|=128,Nn(l,!1),n=i.updateQueue,n!==null&&(s.updateQueue=n,s.flags|=4),s.subtreeFlags=0,n=r,r=s.child;r!==null;)l=r,e=n,l.flags&=14680066,i=l.alternate,i===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,l.type=i.type,e=i.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ge(Je,Je.current&1|2),s.child}e=e.sibling}l.tail!==null&&it()>dn&&(s.flags|=128,n=!0,Nn(l,!1),s.lanes=4194304)}else{if(!n)if(e=al(i),e!==null){if(s.flags|=128,n=!0,r=e.updateQueue,r!==null&&(s.updateQueue=r,s.flags|=4),Nn(l,!0),l.tail===null&&l.tailMode==="hidden"&&!i.alternate&&!Xe)return St(s),null}else 2*it()-l.renderingStartTime>dn&&r!==1073741824&&(s.flags|=128,n=!0,Nn(l,!1),s.lanes=4194304);l.isBackwards?(i.sibling=s.child,s.child=i):(r=l.last,r!==null?r.sibling=i:s.child=i,l.last=i)}return l.tail!==null?(s=l.tail,l.rendering=s,l.tail=s.sibling,l.renderingStartTime=it(),s.sibling=null,r=Je.current,Ge(Je,n?r&1|2:r&1),s):(St(s),null);case 22:case 23:return Ko(),n=s.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(s.flags|=8192),n&&s.mode&1?qt&1073741824&&(St(s),s.subtreeFlags&6&&(s.flags|=8192)):St(s),null;case 24:return null;case 25:return null}throw Error(Y(156,s.tag))}function Kh(e,s){switch(To(s),s.tag){case 1:return Vt(s.type)&&Za(),e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 3:return on(),Qe(Wt),Qe(Dt),Ro(),e=s.flags,e&65536&&!(e&128)?(s.flags=e&-65537|128,s):null;case 5:return Fo(s),null;case 13:if(Qe(Je),e=s.memoizedState,e!==null&&e.dehydrated!==null){if(s.alternate===null)throw Error(Y(340));an()}return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 19:return Qe(Je),null;case 4:return on(),null;case 10:return Mo(s.type._context),null;case 22:case 23:return Ko(),null;case 24:return null;default:return null}}var ka=!1,_t=!1,Yh=typeof WeakSet=="function"?WeakSet:Set,me=null;function Kr(e,s){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){at(e,s,n)}else r.current=null}function Gi(e,s,r){try{r()}catch(n){at(e,s,n)}}var rd=!1;function Xh(e,s){if(Ti=Qa,e=gu(),Co(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,l=n.focusNode;n=n.focusOffset;try{r.nodeType,l.nodeType}catch{r=null;break e}var i=0,o=-1,c=-1,m=0,x=0,y=e,d=null;t:for(;;){for(var f;y!==r||a!==0&&y.nodeType!==3||(o=i+a),y!==l||n!==0&&y.nodeType!==3||(c=i+n),y.nodeType===3&&(i+=y.nodeValue.length),(f=y.firstChild)!==null;)d=y,y=f;for(;;){if(y===e)break t;if(d===r&&++m===a&&(o=i),d===l&&++x===n&&(c=i),(f=y.nextSibling)!==null)break;y=d,d=y.parentNode}y=f}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Pi={focusedElem:e,selectionRange:r},Qa=!1,me=s;me!==null;)if(s=me,e=s.child,(s.subtreeFlags&1028)!==0&&e!==null)e.return=s,me=e;else for(;me!==null;){s=me;try{var b=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var S=b.memoizedProps,z=b.memoizedState,g=s.stateNode,h=g.getSnapshotBeforeUpdate(s.elementType===s.type?S:ds(s.type,S),z);g.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var j=s.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(I){at(s,s.return,I)}if(e=s.sibling,e!==null){e.return=s.return,me=e;break}me=s.return}return b=rd,rd=!1,b}function An(e,s,r){var n=s.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var l=a.destroy;a.destroy=void 0,l!==void 0&&Gi(s,r,l)}a=a.next}while(a!==n)}}function Sl(e,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==s)}}function qi(e){var s=e.ref;if(s!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof s=="function"?s(e):s.current=e}}function mm(e){var s=e.alternate;s!==null&&(e.alternate=null,mm(s)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(s=e.stateNode,s!==null&&(delete s[vs],delete s[qn],delete s[Mi],delete s[Mh],delete s[Ah])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function xm(e){return e.tag===5||e.tag===3||e.tag===4}function nd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||xm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Qi(e,s,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,s?r.nodeType===8?r.parentNode.insertBefore(e,s):r.insertBefore(e,s):(r.nodeType===8?(s=r.parentNode,s.insertBefore(e,r)):(s=r,s.appendChild(e)),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=Xa));else if(n!==4&&(e=e.child,e!==null))for(Qi(e,s,r),e=e.sibling;e!==null;)Qi(e,s,r),e=e.sibling}function Ki(e,s,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,s?r.insertBefore(e,s):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Ki(e,s,r),e=e.sibling;e!==null;)Ki(e,s,r),e=e.sibling}var wt=null,us=!1;function Bs(e,s,r){for(r=r.child;r!==null;)hm(e,s,r),r=r.sibling}function hm(e,s,r){if(bs&&typeof bs.onCommitFiberUnmount=="function")try{bs.onCommitFiberUnmount(fl,r)}catch{}switch(r.tag){case 5:_t||Kr(r,s);case 6:var n=wt,a=us;wt=null,Bs(e,s,r),wt=n,us=a,wt!==null&&(us?(e=wt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):wt.removeChild(r.stateNode));break;case 18:wt!==null&&(us?(e=wt,r=r.stateNode,e.nodeType===8?Yl(e.parentNode,r):e.nodeType===1&&Yl(e,r),Hn(e)):Yl(wt,r.stateNode));break;case 4:n=wt,a=us,wt=r.stateNode.containerInfo,us=!0,Bs(e,s,r),wt=n,us=a;break;case 0:case 11:case 14:case 15:if(!_t&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var l=a,i=l.destroy;l=l.tag,i!==void 0&&(l&2||l&4)&&Gi(r,s,i),a=a.next}while(a!==n)}Bs(e,s,r);break;case 1:if(!_t&&(Kr(r,s),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){at(r,s,o)}Bs(e,s,r);break;case 21:Bs(e,s,r);break;case 22:r.mode&1?(_t=(n=_t)||r.memoizedState!==null,Bs(e,s,r),_t=n):Bs(e,s,r);break;default:Bs(e,s,r)}}function ad(e){var s=e.updateQueue;if(s!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Yh),s.forEach(function(n){var a=lp.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function cs(e,s){var r=s.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var l=e,i=s,o=i;e:for(;o!==null;){switch(o.tag){case 5:wt=o.stateNode,us=!1;break e;case 3:wt=o.stateNode.containerInfo,us=!0;break e;case 4:wt=o.stateNode.containerInfo,us=!0;break e}o=o.return}if(wt===null)throw Error(Y(160));hm(l,i,a),wt=null,us=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(m){at(a,s,m)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)pm(s,e),s=s.sibling}function pm(e,s){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(cs(s,e),gs(e),n&4){try{An(3,e,e.return),Sl(3,e)}catch(S){at(e,e.return,S)}try{An(5,e,e.return)}catch(S){at(e,e.return,S)}}break;case 1:cs(s,e),gs(e),n&512&&r!==null&&Kr(r,r.return);break;case 5:if(cs(s,e),gs(e),n&512&&r!==null&&Kr(r,r.return),e.flags&32){var a=e.stateNode;try{Rn(a,"")}catch(S){at(e,e.return,S)}}if(n&4&&(a=e.stateNode,a!=null)){var l=e.memoizedProps,i=r!==null?r.memoizedProps:l,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&l.type==="radio"&&l.name!=null&&Fd(a,l),vi(o,i);var m=vi(o,l);for(i=0;i<c.length;i+=2){var x=c[i],y=c[i+1];x==="style"?Hd(a,y):x==="dangerouslySetInnerHTML"?Od(a,y):x==="children"?Rn(a,y):ho(a,x,y,m)}switch(o){case"input":hi(a,l);break;case"textarea":Rd(a,l);break;case"select":var d=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var f=l.value;f!=null?Xr(a,!!l.multiple,f,!1):d!==!!l.multiple&&(l.defaultValue!=null?Xr(a,!!l.multiple,l.defaultValue,!0):Xr(a,!!l.multiple,l.multiple?[]:"",!1))}a[qn]=l}catch(S){at(e,e.return,S)}}break;case 6:if(cs(s,e),gs(e),n&4){if(e.stateNode===null)throw Error(Y(162));a=e.stateNode,l=e.memoizedProps;try{a.nodeValue=l}catch(S){at(e,e.return,S)}}break;case 3:if(cs(s,e),gs(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Hn(s.containerInfo)}catch(S){at(e,e.return,S)}break;case 4:cs(s,e),gs(e);break;case 13:cs(s,e),gs(e),a=e.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(qo=it())),n&4&&ad(e);break;case 22:if(x=r!==null&&r.memoizedState!==null,e.mode&1?(_t=(m=_t)||x,cs(s,e),_t=m):cs(s,e),gs(e),n&8192){if(m=e.memoizedState!==null,(e.stateNode.isHidden=m)&&!x&&e.mode&1)for(me=e,x=e.child;x!==null;){for(y=me=x;me!==null;){switch(d=me,f=d.child,d.tag){case 0:case 11:case 14:case 15:An(4,d,d.return);break;case 1:Kr(d,d.return);var b=d.stateNode;if(typeof b.componentWillUnmount=="function"){n=d,r=d.return;try{s=n,b.props=s.memoizedProps,b.state=s.memoizedState,b.componentWillUnmount()}catch(S){at(n,r,S)}}break;case 5:Kr(d,d.return);break;case 22:if(d.memoizedState!==null){id(y);continue}}f!==null?(f.return=d,me=f):id(y)}x=x.sibling}e:for(x=null,y=e;;){if(y.tag===5){if(x===null){x=y;try{a=y.stateNode,m?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(o=y.stateNode,c=y.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=Ud("display",i))}catch(S){at(e,e.return,S)}}}else if(y.tag===6){if(x===null)try{y.stateNode.nodeValue=m?"":y.memoizedProps}catch(S){at(e,e.return,S)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===e)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===e)break e;for(;y.sibling===null;){if(y.return===null||y.return===e)break e;x===y&&(x=null),y=y.return}x===y&&(x=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:cs(s,e),gs(e),n&4&&ad(e);break;case 21:break;default:cs(s,e),gs(e)}}function gs(e){var s=e.flags;if(s&2){try{e:{for(var r=e.return;r!==null;){if(xm(r)){var n=r;break e}r=r.return}throw Error(Y(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Rn(a,""),n.flags&=-33);var l=nd(e);Ki(e,l,a);break;case 3:case 4:var i=n.stateNode.containerInfo,o=nd(e);Qi(e,o,i);break;default:throw Error(Y(161))}}catch(c){at(e,e.return,c)}e.flags&=-3}s&4096&&(e.flags&=-4097)}function Zh(e,s,r){me=e,gm(e)}function gm(e,s,r){for(var n=(e.mode&1)!==0;me!==null;){var a=me,l=a.child;if(a.tag===22&&n){var i=a.memoizedState!==null||ka;if(!i){var o=a.alternate,c=o!==null&&o.memoizedState!==null||_t;o=ka;var m=_t;if(ka=i,(_t=c)&&!m)for(me=a;me!==null;)i=me,c=i.child,i.tag===22&&i.memoizedState!==null?od(a):c!==null?(c.return=i,me=c):od(a);for(;l!==null;)me=l,gm(l),l=l.sibling;me=a,ka=o,_t=m}ld(e)}else a.subtreeFlags&8772&&l!==null?(l.return=a,me=l):ld(e)}}function ld(e){for(;me!==null;){var s=me;if(s.flags&8772){var r=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:_t||Sl(5,s);break;case 1:var n=s.stateNode;if(s.flags&4&&!_t)if(r===null)n.componentDidMount();else{var a=s.elementType===s.type?r.memoizedProps:ds(s.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var l=s.updateQueue;l!==null&&Wc(s,l,n);break;case 3:var i=s.updateQueue;if(i!==null){if(r=null,s.child!==null)switch(s.child.tag){case 5:r=s.child.stateNode;break;case 1:r=s.child.stateNode}Wc(s,i,r)}break;case 5:var o=s.stateNode;if(r===null&&s.flags&4){r=o;var c=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var m=s.alternate;if(m!==null){var x=m.memoizedState;if(x!==null){var y=x.dehydrated;y!==null&&Hn(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}_t||s.flags&512&&qi(s)}catch(d){at(s,s.return,d)}}if(s===e){me=null;break}if(r=s.sibling,r!==null){r.return=s.return,me=r;break}me=s.return}}function id(e){for(;me!==null;){var s=me;if(s===e){me=null;break}var r=s.sibling;if(r!==null){r.return=s.return,me=r;break}me=s.return}}function od(e){for(;me!==null;){var s=me;try{switch(s.tag){case 0:case 11:case 15:var r=s.return;try{Sl(4,s)}catch(c){at(s,r,c)}break;case 1:var n=s.stateNode;if(typeof n.componentDidMount=="function"){var a=s.return;try{n.componentDidMount()}catch(c){at(s,a,c)}}var l=s.return;try{qi(s)}catch(c){at(s,l,c)}break;case 5:var i=s.return;try{qi(s)}catch(c){at(s,i,c)}}}catch(c){at(s,s.return,c)}if(s===e){me=null;break}var o=s.sibling;if(o!==null){o.return=s.return,me=o;break}me=s.return}}var Jh=Math.ceil,ol=Us.ReactCurrentDispatcher,Vo=Us.ReactCurrentOwner,as=Us.ReactCurrentBatchConfig,Me=0,vt=null,mt=null,Nt=0,qt=0,Yr=hr(0),pt=0,Jn=null,Ir=0,_l=0,Go=0,Ln=null,$t=null,qo=0,dn=1/0,Cs=null,cl=!1,Yi=null,lr=null,Sa=!1,Ks=null,dl=0,zn=0,Xi=null,$a=-1,Oa=0;function Lt(){return Me&6?it():$a!==-1?$a:$a=it()}function ir(e){return e.mode&1?Me&2&&Nt!==0?Nt&-Nt:zh.transition!==null?(Oa===0&&(Oa=eu()),Oa):(e=He,e!==0||(e=window.event,e=e===void 0?16:iu(e.type)),e):1}function hs(e,s,r,n){if(50<zn)throw zn=0,Xi=null,Error(Y(185));ra(e,r,n),(!(Me&2)||e!==vt)&&(e===vt&&(!(Me&2)&&(_l|=r),pt===4&&qs(e,Nt)),Gt(e,n),r===1&&Me===0&&!(s.mode&1)&&(dn=it()+500,Nl&&pr()))}function Gt(e,s){var r=e.callbackNode;zx(e,s);var n=qa(e,e===vt?Nt:0);if(n===0)r!==null&&fc(r),e.callbackNode=null,e.callbackPriority=0;else if(s=n&-n,e.callbackPriority!==s){if(r!=null&&fc(r),s===1)e.tag===0?Lh(cd.bind(null,e)):_u(cd.bind(null,e)),Eh(function(){!(Me&6)&&pr()}),r=null;else{switch(tu(n)){case 1:r=vo;break;case 4:r=Zd;break;case 16:r=Ga;break;case 536870912:r=Jd;break;default:r=Ga}r=km(r,fm.bind(null,e))}e.callbackPriority=s,e.callbackNode=r}}function fm(e,s){if($a=-1,Oa=0,Me&6)throw Error(Y(327));var r=e.callbackNode;if(sn()&&e.callbackNode!==r)return null;var n=qa(e,e===vt?Nt:0);if(n===0)return null;if(n&30||n&e.expiredLanes||s)s=ul(e,n);else{s=n;var a=Me;Me|=2;var l=vm();(vt!==e||Nt!==s)&&(Cs=null,dn=it()+500,Cr(e,s));do try{sp();break}catch(o){ym(e,o)}while(!0);Io(),ol.current=l,Me=a,mt!==null?s=0:(vt=null,Nt=0,s=pt)}if(s!==0){if(s===2&&(a=ki(e),a!==0&&(n=a,s=Zi(e,a))),s===1)throw r=Jn,Cr(e,0),qs(e,n),Gt(e,it()),r;if(s===6)qs(e,n);else{if(a=e.current.alternate,!(n&30)&&!ep(a)&&(s=ul(e,n),s===2&&(l=ki(e),l!==0&&(n=l,s=Zi(e,l))),s===1))throw r=Jn,Cr(e,0),qs(e,n),Gt(e,it()),r;switch(e.finishedWork=a,e.finishedLanes=n,s){case 0:case 1:throw Error(Y(345));case 2:Nr(e,$t,Cs);break;case 3:if(qs(e,n),(n&130023424)===n&&(s=qo+500-it(),10<s)){if(qa(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){Lt(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Ii(Nr.bind(null,e,$t,Cs),s);break}Nr(e,$t,Cs);break;case 4:if(qs(e,n),(n&4194240)===n)break;for(s=e.eventTimes,a=-1;0<n;){var i=31-xs(n);l=1<<i,i=s[i],i>a&&(a=i),n&=~l}if(n=a,n=it()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Jh(n/1960))-n,10<n){e.timeoutHandle=Ii(Nr.bind(null,e,$t,Cs),n);break}Nr(e,$t,Cs);break;case 5:Nr(e,$t,Cs);break;default:throw Error(Y(329))}}}return Gt(e,it()),e.callbackNode===r?fm.bind(null,e):null}function Zi(e,s){var r=Ln;return e.current.memoizedState.isDehydrated&&(Cr(e,s).flags|=256),e=ul(e,s),e!==2&&(s=$t,$t=r,s!==null&&Ji(s)),e}function Ji(e){$t===null?$t=e:$t.push.apply($t,e)}function ep(e){for(var s=e;;){if(s.flags&16384){var r=s.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],l=a.getSnapshot;a=a.value;try{if(!ps(l(),a))return!1}catch{return!1}}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function qs(e,s){for(s&=~Go,s&=~_l,e.suspendedLanes|=s,e.pingedLanes&=~s,e=e.expirationTimes;0<s;){var r=31-xs(s),n=1<<r;e[r]=-1,s&=~n}}function cd(e){if(Me&6)throw Error(Y(327));sn();var s=qa(e,0);if(!(s&1))return Gt(e,it()),null;var r=ul(e,s);if(e.tag!==0&&r===2){var n=ki(e);n!==0&&(s=n,r=Zi(e,n))}if(r===1)throw r=Jn,Cr(e,0),qs(e,s),Gt(e,it()),r;if(r===6)throw Error(Y(345));return e.finishedWork=e.current.alternate,e.finishedLanes=s,Nr(e,$t,Cs),Gt(e,it()),null}function Qo(e,s){var r=Me;Me|=1;try{return e(s)}finally{Me=r,Me===0&&(dn=it()+500,Nl&&pr())}}function Mr(e){Ks!==null&&Ks.tag===0&&!(Me&6)&&sn();var s=Me;Me|=1;var r=as.transition,n=He;try{if(as.transition=null,He=1,e)return e()}finally{He=n,as.transition=r,Me=s,!(Me&6)&&pr()}}function Ko(){qt=Yr.current,Qe(Yr)}function Cr(e,s){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Ph(r)),mt!==null)for(r=mt.return;r!==null;){var n=r;switch(To(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Za();break;case 3:on(),Qe(Wt),Qe(Dt),Ro();break;case 5:Fo(n);break;case 4:on();break;case 13:Qe(Je);break;case 19:Qe(Je);break;case 10:Mo(n.type._context);break;case 22:case 23:Ko()}r=r.return}if(vt=e,mt=e=or(e.current,null),Nt=qt=s,pt=0,Jn=null,Go=_l=Ir=0,$t=Ln=null,Sr!==null){for(s=0;s<Sr.length;s++)if(r=Sr[s],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,l=r.pending;if(l!==null){var i=l.next;l.next=a,n.next=i}r.pending=n}Sr=null}return e}function ym(e,s){do{var r=mt;try{if(Io(),za.current=il,ll){for(var n=et.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}ll=!1}if(Er=0,ft=ht=et=null,Mn=!1,Yn=0,Vo.current=null,r===null||r.return===null){pt=1,Jn=s,mt=null;break}e:{var l=e,i=r.return,o=r,c=s;if(s=Nt,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var m=c,x=o,y=x.tag;if(!(x.mode&1)&&(y===0||y===11||y===15)){var d=x.alternate;d?(x.updateQueue=d.updateQueue,x.memoizedState=d.memoizedState,x.lanes=d.lanes):(x.updateQueue=null,x.memoizedState=null)}var f=Yc(i);if(f!==null){f.flags&=-257,Xc(f,i,o,l,s),f.mode&1&&Kc(l,m,s),s=f,c=m;var b=s.updateQueue;if(b===null){var S=new Set;S.add(c),s.updateQueue=S}else b.add(c);break e}else{if(!(s&1)){Kc(l,m,s),Yo();break e}c=Error(Y(426))}}else if(Xe&&o.mode&1){var z=Yc(i);if(z!==null){!(z.flags&65536)&&(z.flags|=256),Xc(z,i,o,l,s),Po(cn(c,o));break e}}l=c=cn(c,o),pt!==4&&(pt=2),Ln===null?Ln=[l]:Ln.push(l),l=i;do{switch(l.tag){case 3:l.flags|=65536,s&=-s,l.lanes|=s;var g=tm(l,c,s);Bc(l,g);break e;case 1:o=c;var h=l.type,j=l.stateNode;if(!(l.flags&128)&&(typeof h.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(lr===null||!lr.has(j)))){l.flags|=65536,s&=-s,l.lanes|=s;var I=sm(l,o,s);Bc(l,I);break e}}l=l.return}while(l!==null)}wm(r)}catch(F){s=F,mt===r&&r!==null&&(mt=r=r.return);continue}break}while(!0)}function vm(){var e=ol.current;return ol.current=il,e===null?il:e}function Yo(){(pt===0||pt===3||pt===2)&&(pt=4),vt===null||!(Ir&268435455)&&!(_l&268435455)||qs(vt,Nt)}function ul(e,s){var r=Me;Me|=2;var n=vm();(vt!==e||Nt!==s)&&(Cs=null,Cr(e,s));do try{tp();break}catch(a){ym(e,a)}while(!0);if(Io(),Me=r,ol.current=n,mt!==null)throw Error(Y(261));return vt=null,Nt=0,pt}function tp(){for(;mt!==null;)jm(mt)}function sp(){for(;mt!==null&&!Cx();)jm(mt)}function jm(e){var s=bm(e.alternate,e,qt);e.memoizedProps=e.pendingProps,s===null?wm(e):mt=s,Vo.current=null}function wm(e){var s=e;do{var r=s.alternate;if(e=s.return,s.flags&32768){if(r=Kh(r,s),r!==null){r.flags&=32767,mt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{pt=6,mt=null;return}}else if(r=Qh(r,s,qt),r!==null){mt=r;return}if(s=s.sibling,s!==null){mt=s;return}mt=s=e}while(s!==null);pt===0&&(pt=5)}function Nr(e,s,r){var n=He,a=as.transition;try{as.transition=null,He=1,rp(e,s,r,n)}finally{as.transition=a,He=n}return null}function rp(e,s,r,n){do sn();while(Ks!==null);if(Me&6)throw Error(Y(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Y(177));e.callbackNode=null,e.callbackPriority=0;var l=r.lanes|r.childLanes;if(Fx(e,l),e===vt&&(mt=vt=null,Nt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Sa||(Sa=!0,km(Ga,function(){return sn(),null})),l=(r.flags&15990)!==0,r.subtreeFlags&15990||l){l=as.transition,as.transition=null;var i=He;He=1;var o=Me;Me|=4,Vo.current=null,Xh(e,r),pm(r,e),bh(Pi),Qa=!!Ti,Pi=Ti=null,e.current=r,Zh(r),Dx(),Me=o,He=i,as.transition=l}else e.current=r;if(Sa&&(Sa=!1,Ks=e,dl=a),l=e.pendingLanes,l===0&&(lr=null),Ex(r.stateNode),Gt(e,it()),s!==null)for(n=e.onRecoverableError,r=0;r<s.length;r++)a=s[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(cl)throw cl=!1,e=Yi,Yi=null,e;return dl&1&&e.tag!==0&&sn(),l=e.pendingLanes,l&1?e===Xi?zn++:(zn=0,Xi=e):zn=0,pr(),null}function sn(){if(Ks!==null){var e=tu(dl),s=as.transition,r=He;try{if(as.transition=null,He=16>e?16:e,Ks===null)var n=!1;else{if(e=Ks,Ks=null,dl=0,Me&6)throw Error(Y(331));var a=Me;for(Me|=4,me=e.current;me!==null;){var l=me,i=l.child;if(me.flags&16){var o=l.deletions;if(o!==null){for(var c=0;c<o.length;c++){var m=o[c];for(me=m;me!==null;){var x=me;switch(x.tag){case 0:case 11:case 15:An(8,x,l)}var y=x.child;if(y!==null)y.return=x,me=y;else for(;me!==null;){x=me;var d=x.sibling,f=x.return;if(mm(x),x===m){me=null;break}if(d!==null){d.return=f,me=d;break}me=f}}}var b=l.alternate;if(b!==null){var S=b.child;if(S!==null){b.child=null;do{var z=S.sibling;S.sibling=null,S=z}while(S!==null)}}me=l}}if(l.subtreeFlags&2064&&i!==null)i.return=l,me=i;else e:for(;me!==null;){if(l=me,l.flags&2048)switch(l.tag){case 0:case 11:case 15:An(9,l,l.return)}var g=l.sibling;if(g!==null){g.return=l.return,me=g;break e}me=l.return}}var h=e.current;for(me=h;me!==null;){i=me;var j=i.child;if(i.subtreeFlags&2064&&j!==null)j.return=i,me=j;else e:for(i=h;me!==null;){if(o=me,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Sl(9,o)}}catch(F){at(o,o.return,F)}if(o===i){me=null;break e}var I=o.sibling;if(I!==null){I.return=o.return,me=I;break e}me=o.return}}if(Me=a,pr(),bs&&typeof bs.onPostCommitFiberRoot=="function")try{bs.onPostCommitFiberRoot(fl,e)}catch{}n=!0}return n}finally{He=r,as.transition=s}}return!1}function dd(e,s,r){s=cn(r,s),s=tm(e,s,1),e=ar(e,s,1),s=Lt(),e!==null&&(ra(e,1,s),Gt(e,s))}function at(e,s,r){if(e.tag===3)dd(e,e,r);else for(;s!==null;){if(s.tag===3){dd(s,e,r);break}else if(s.tag===1){var n=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(lr===null||!lr.has(n))){e=cn(r,e),e=sm(s,e,1),s=ar(s,e,1),e=Lt(),s!==null&&(ra(s,1,e),Gt(s,e));break}}s=s.return}}function np(e,s,r){var n=e.pingCache;n!==null&&n.delete(s),s=Lt(),e.pingedLanes|=e.suspendedLanes&r,vt===e&&(Nt&r)===r&&(pt===4||pt===3&&(Nt&130023424)===Nt&&500>it()-qo?Cr(e,0):Go|=r),Gt(e,s)}function Nm(e,s){s===0&&(e.mode&1?(s=pa,pa<<=1,!(pa&130023424)&&(pa=4194304)):s=1);var r=Lt();e=$s(e,s),e!==null&&(ra(e,s,r),Gt(e,r))}function ap(e){var s=e.memoizedState,r=0;s!==null&&(r=s.retryLane),Nm(e,r)}function lp(e,s){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(Y(314))}n!==null&&n.delete(s),Nm(e,r)}var bm;bm=function(e,s,r){if(e!==null)if(e.memoizedProps!==s.pendingProps||Wt.current)Bt=!0;else{if(!(e.lanes&r)&&!(s.flags&128))return Bt=!1,qh(e,s,r);Bt=!!(e.flags&131072)}else Bt=!1,Xe&&s.flags&1048576&&Cu(s,tl,s.index);switch(s.lanes=0,s.tag){case 2:var n=s.type;Ra(e,s),e=s.pendingProps;var a=nn(s,Dt.current);tn(s,r),a=Oo(null,s,n,e,a,r);var l=Uo();return s.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Vt(n)?(l=!0,Ja(s)):l=!1,s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Lo(s),a.updater=kl,s.stateNode=a,a._reactInternals=s,$i(s,n,e,r),s=Hi(null,s,n,!0,l,r)):(s.tag=0,Xe&&l&&Do(s),Mt(null,s,a,r),s=s.child),s;case 16:n=s.elementType;e:{switch(Ra(e,s),e=s.pendingProps,a=n._init,n=a(n._payload),s.type=n,a=s.tag=op(n),e=ds(n,e),a){case 0:s=Ui(null,s,n,e,r);break e;case 1:s=ed(null,s,n,e,r);break e;case 11:s=Zc(null,s,n,e,r);break e;case 14:s=Jc(null,s,n,ds(n.type,e),r);break e}throw Error(Y(306,n,""))}return s;case 0:return n=s.type,a=s.pendingProps,a=s.elementType===n?a:ds(n,a),Ui(e,s,n,a,r);case 1:return n=s.type,a=s.pendingProps,a=s.elementType===n?a:ds(n,a),ed(e,s,n,a,r);case 3:e:{if(lm(s),e===null)throw Error(Y(387));n=s.pendingProps,l=s.memoizedState,a=l.element,Mu(e,s),nl(s,n,null,r);var i=s.memoizedState;if(n=i.element,l.isDehydrated)if(l={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},s.updateQueue.baseState=l,s.memoizedState=l,s.flags&256){a=cn(Error(Y(423)),s),s=td(e,s,n,r,a);break e}else if(n!==a){a=cn(Error(Y(424)),s),s=td(e,s,n,r,a);break e}else for(Qt=nr(s.stateNode.containerInfo.firstChild),Kt=s,Xe=!0,ms=null,r=Eu(s,null,n,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(an(),n===a){s=Os(e,s,r);break e}Mt(e,s,n,r)}s=s.child}return s;case 5:return Au(s),e===null&&zi(s),n=s.type,a=s.pendingProps,l=e!==null?e.memoizedProps:null,i=a.children,Ei(n,a)?i=null:l!==null&&Ei(n,l)&&(s.flags|=32),am(e,s),Mt(e,s,i,r),s.child;case 6:return e===null&&zi(s),null;case 13:return im(e,s,r);case 4:return zo(s,s.stateNode.containerInfo),n=s.pendingProps,e===null?s.child=ln(s,null,n,r):Mt(e,s,n,r),s.child;case 11:return n=s.type,a=s.pendingProps,a=s.elementType===n?a:ds(n,a),Zc(e,s,n,a,r);case 7:return Mt(e,s,s.pendingProps,r),s.child;case 8:return Mt(e,s,s.pendingProps.children,r),s.child;case 12:return Mt(e,s,s.pendingProps.children,r),s.child;case 10:e:{if(n=s.type._context,a=s.pendingProps,l=s.memoizedProps,i=a.value,Ge(sl,n._currentValue),n._currentValue=i,l!==null)if(ps(l.value,i)){if(l.children===a.children&&!Wt.current){s=Os(e,s,r);break e}}else for(l=s.child,l!==null&&(l.return=s);l!==null;){var o=l.dependencies;if(o!==null){i=l.child;for(var c=o.firstContext;c!==null;){if(c.context===n){if(l.tag===1){c=Ls(-1,r&-r),c.tag=2;var m=l.updateQueue;if(m!==null){m=m.shared;var x=m.pending;x===null?c.next=c:(c.next=x.next,x.next=c),m.pending=c}}l.lanes|=r,c=l.alternate,c!==null&&(c.lanes|=r),Fi(l.return,r,s),o.lanes|=r;break}c=c.next}}else if(l.tag===10)i=l.type===s.type?null:l.child;else if(l.tag===18){if(i=l.return,i===null)throw Error(Y(341));i.lanes|=r,o=i.alternate,o!==null&&(o.lanes|=r),Fi(i,r,s),i=l.sibling}else i=l.child;if(i!==null)i.return=l;else for(i=l;i!==null;){if(i===s){i=null;break}if(l=i.sibling,l!==null){l.return=i.return,i=l;break}i=i.return}l=i}Mt(e,s,a.children,r),s=s.child}return s;case 9:return a=s.type,n=s.pendingProps.children,tn(s,r),a=ls(a),n=n(a),s.flags|=1,Mt(e,s,n,r),s.child;case 14:return n=s.type,a=ds(n,s.pendingProps),a=ds(n.type,a),Jc(e,s,n,a,r);case 15:return rm(e,s,s.type,s.pendingProps,r);case 17:return n=s.type,a=s.pendingProps,a=s.elementType===n?a:ds(n,a),Ra(e,s),s.tag=1,Vt(n)?(e=!0,Ja(s)):e=!1,tn(s,r),em(s,n,a),$i(s,n,a,r),Hi(null,s,n,!0,e,r);case 19:return om(e,s,r);case 22:return nm(e,s,r)}throw Error(Y(156,s.tag))};function km(e,s){return Xd(e,s)}function ip(e,s,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ns(e,s,r,n){return new ip(e,s,r,n)}function Xo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function op(e){if(typeof e=="function")return Xo(e)?1:0;if(e!=null){if(e=e.$$typeof,e===go)return 11;if(e===fo)return 14}return 2}function or(e,s){var r=e.alternate;return r===null?(r=ns(e.tag,s,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=s,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,s=e.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ua(e,s,r,n,a,l){var i=2;if(n=e,typeof e=="function")Xo(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case Or:return Dr(r.children,a,l,s);case po:i=8,a|=8;break;case ci:return e=ns(12,r,s,a|2),e.elementType=ci,e.lanes=l,e;case di:return e=ns(13,r,s,a),e.elementType=di,e.lanes=l,e;case ui:return e=ns(19,r,s,a),e.elementType=ui,e.lanes=l,e;case Ad:return Cl(r,a,l,s);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Id:i=10;break e;case Md:i=9;break e;case go:i=11;break e;case fo:i=14;break e;case Ws:i=16,n=null;break e}throw Error(Y(130,e==null?e:typeof e,""))}return s=ns(i,r,s,a),s.elementType=e,s.type=n,s.lanes=l,s}function Dr(e,s,r,n){return e=ns(7,e,n,s),e.lanes=r,e}function Cl(e,s,r,n){return e=ns(22,e,n,s),e.elementType=Ad,e.lanes=r,e.stateNode={isHidden:!1},e}function ni(e,s,r){return e=ns(6,e,null,s),e.lanes=r,e}function ai(e,s,r){return s=ns(4,e.children!==null?e.children:[],e.key,s),s.lanes=r,s.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},s}function cp(e,s,r,n,a){this.tag=s,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$l(0),this.expirationTimes=$l(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$l(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Zo(e,s,r,n,a,l,i,o,c){return e=new cp(e,s,r,o,c),s===1?(s=1,l===!0&&(s|=8)):s=0,l=ns(3,null,null,s),e.current=l,l.stateNode=e,l.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lo(l),e}function dp(e,s,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$r,key:n==null?null:""+n,children:e,containerInfo:s,implementation:r}}function Sm(e){if(!e)return mr;e=e._reactInternals;e:{if(Lr(e)!==e||e.tag!==1)throw Error(Y(170));var s=e;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Vt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(Y(171))}if(e.tag===1){var r=e.type;if(Vt(r))return Su(e,r,s)}return s}function _m(e,s,r,n,a,l,i,o,c){return e=Zo(r,n,!0,e,a,l,i,o,c),e.context=Sm(null),r=e.current,n=Lt(),a=ir(r),l=Ls(n,a),l.callback=s??null,ar(r,l,a),e.current.lanes=a,ra(e,a,n),Gt(e,n),e}function Dl(e,s,r,n){var a=s.current,l=Lt(),i=ir(a);return r=Sm(r),s.context===null?s.context=r:s.pendingContext=r,s=Ls(l,i),s.payload={element:e},n=n===void 0?null:n,n!==null&&(s.callback=n),e=ar(a,s,i),e!==null&&(hs(e,a,i,l),La(e,a,i)),i}function ml(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ud(e,s){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<s?r:s}}function Jo(e,s){ud(e,s),(e=e.alternate)&&ud(e,s)}function up(){return null}var Cm=typeof reportError=="function"?reportError:function(e){console.error(e)};function ec(e){this._internalRoot=e}Tl.prototype.render=ec.prototype.render=function(e){var s=this._internalRoot;if(s===null)throw Error(Y(409));Dl(e,s,null,null)};Tl.prototype.unmount=ec.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var s=e.containerInfo;Mr(function(){Dl(null,e,null,null)}),s[Rs]=null}};function Tl(e){this._internalRoot=e}Tl.prototype.unstable_scheduleHydration=function(e){if(e){var s=nu();e={blockedOn:null,target:e,priority:s};for(var r=0;r<Gs.length&&s!==0&&s<Gs[r].priority;r++);Gs.splice(r,0,e),r===0&&lu(e)}};function tc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Pl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function md(){}function mp(e,s,r,n,a){if(a){if(typeof n=="function"){var l=n;n=function(){var m=ml(i);l.call(m)}}var i=_m(s,n,e,0,null,!1,!1,"",md);return e._reactRootContainer=i,e[Rs]=i.current,Vn(e.nodeType===8?e.parentNode:e),Mr(),i}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var o=n;n=function(){var m=ml(c);o.call(m)}}var c=Zo(e,0,!1,null,null,!1,!1,"",md);return e._reactRootContainer=c,e[Rs]=c.current,Vn(e.nodeType===8?e.parentNode:e),Mr(function(){Dl(s,c,r,n)}),c}function El(e,s,r,n,a){var l=r._reactRootContainer;if(l){var i=l;if(typeof a=="function"){var o=a;a=function(){var c=ml(i);o.call(c)}}Dl(s,i,e,a)}else i=mp(r,s,e,a,n);return ml(i)}su=function(e){switch(e.tag){case 3:var s=e.stateNode;if(s.current.memoizedState.isDehydrated){var r=_n(s.pendingLanes);r!==0&&(jo(s,r|1),Gt(s,it()),!(Me&6)&&(dn=it()+500,pr()))}break;case 13:Mr(function(){var n=$s(e,1);if(n!==null){var a=Lt();hs(n,e,1,a)}}),Jo(e,1)}};wo=function(e){if(e.tag===13){var s=$s(e,134217728);if(s!==null){var r=Lt();hs(s,e,134217728,r)}Jo(e,134217728)}};ru=function(e){if(e.tag===13){var s=ir(e),r=$s(e,s);if(r!==null){var n=Lt();hs(r,e,s,n)}Jo(e,s)}};nu=function(){return He};au=function(e,s){var r=He;try{return He=e,s()}finally{He=r}};wi=function(e,s,r){switch(s){case"input":if(hi(e,r),s=r.name,r.type==="radio"&&s!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<r.length;s++){var n=r[s];if(n!==e&&n.form===e.form){var a=wl(n);if(!a)throw Error(Y(90));zd(n),hi(n,a)}}}break;case"textarea":Rd(e,r);break;case"select":s=r.value,s!=null&&Xr(e,!!r.multiple,s,!1)}};Vd=Qo;Gd=Mr;var xp={usingClientEntryPoint:!1,Events:[aa,Wr,wl,Bd,Wd,Qo]},bn={findFiberByHostInstance:kr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},hp={bundleType:bn.bundleType,version:bn.version,rendererPackageName:bn.rendererPackageName,rendererConfig:bn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Us.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Kd(e),e===null?null:e.stateNode},findFiberByHostInstance:bn.findFiberByHostInstance||up,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _a=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_a.isDisabled&&_a.supportsFiber)try{fl=_a.inject(hp),bs=_a}catch{}}Xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xp;Xt.createPortal=function(e,s){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tc(s))throw Error(Y(200));return dp(e,s,null,r)};Xt.createRoot=function(e,s){if(!tc(e))throw Error(Y(299));var r=!1,n="",a=Cm;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(n=s.identifierPrefix),s.onRecoverableError!==void 0&&(a=s.onRecoverableError)),s=Zo(e,1,!1,null,null,r,!1,n,a),e[Rs]=s.current,Vn(e.nodeType===8?e.parentNode:e),new ec(s)};Xt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var s=e._reactInternals;if(s===void 0)throw typeof e.render=="function"?Error(Y(188)):(e=Object.keys(e).join(","),Error(Y(268,e)));return e=Kd(s),e=e===null?null:e.stateNode,e};Xt.flushSync=function(e){return Mr(e)};Xt.hydrate=function(e,s,r){if(!Pl(s))throw Error(Y(200));return El(null,e,s,!0,r)};Xt.hydrateRoot=function(e,s,r){if(!tc(e))throw Error(Y(405));var n=r!=null&&r.hydratedSources||null,a=!1,l="",i=Cm;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),s=_m(s,null,e,1,r??null,a,!1,l,i),e[Rs]=s.current,Vn(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[r,a]:s.mutableSourceEagerHydrationData.push(r,a);return new Tl(s)};Xt.render=function(e,s,r){if(!Pl(s))throw Error(Y(200));return El(null,e,s,!1,r)};Xt.unmountComponentAtNode=function(e){if(!Pl(e))throw Error(Y(40));return e._reactRootContainer?(Mr(function(){El(null,null,e,!1,function(){e._reactRootContainer=null,e[Rs]=null})}),!0):!1};Xt.unstable_batchedUpdates=Qo;Xt.unstable_renderSubtreeIntoContainer=function(e,s,r,n){if(!Pl(r))throw Error(Y(200));if(e==null||e._reactInternals===void 0)throw Error(Y(38));return El(e,s,r,!1,n)};Xt.version="18.3.1-next-f1338f8080-20240426";function Dm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Dm)}catch(e){console.error(e)}}Dm(),Dd.exports=Xt;var pp=Dd.exports,Tm,xd=pp;Tm=xd.createRoot,xd.hydrateRoot;const gp="https://workflow.bylinelms.com/api",Pm=u.createContext(void 0);function fp({children:e}){const[s,r]=u.useState(null),[n,a]=u.useState(null),[l,i]=u.useState(!0);u.useEffect(()=>{(()=>{try{const y=localStorage.getItem("access_token"),d=localStorage.getItem("user_data"),f=localStorage.getItem("refresh_token");if(y&&d){const b=JSON.parse(d),S={user:b,access_token:y,refresh_token:f||"",expires_in:3600};r(b),a(S)}}catch{localStorage.removeItem("access_token"),localStorage.removeItem("user_data"),localStorage.removeItem("refresh_token")}finally{i(!1)}})()},[]);const o=async()=>({data:null,error:{message:"Admin registration is not available."}}),c=async(x,y)=>{try{const d=await fetch(`${gp}/auth/admin/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:x,password:y})}),f=await d.json();if(d.ok&&f.success){const{user:b,access_token:S,refresh_token:z,expires_in:g}=f.data;localStorage.setItem("access_token",S),localStorage.setItem("user_data",JSON.stringify(b)),z&&localStorage.setItem("refresh_token",z);const h={user:b,access_token:S,refresh_token:z||"",expires_in:g};return r(b),a(h),{data:{user:b,session:h},error:null}}else return{data:{user:null,session:null},error:{message:f.message||"Login failed"}}}catch{return{data:{user:null,session:null},error:{message:"Network error"}}}},m=async()=>(localStorage.clear(),r(null),a(null),{error:null});return t.jsx(Pm.Provider,{value:{user:s,session:n,loading:l,signUp:o,signIn:c,signOut:m},children:e})}function Ss(){const e=u.useContext(Pm);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var yp={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vp=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ce=(e,s)=>{const r=u.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:o="",children:c,...m},x)=>u.createElement("svg",{ref:x,...yp,width:a,height:a,stroke:n,strokeWidth:i?Number(l)*24/Number(a):l,className:["lucide",`lucide-${vp(e)}`,o].join(" "),...m},[...s.map(([y,d])=>u.createElement(y,d)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jp=ce("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wp=ce("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=ce("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Np=ce("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sc=ce("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bp=ce("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kp=ce("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sp=ce("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eo=ce("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=ce("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _p=ce("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Em=ce("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xl=ce("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=ce("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cp=ce("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=ce("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hl=ce("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=ce("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Il=ce("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dp=ce("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=ce("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tp=ce("Clock3",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16.5 12",key:"1aq6pp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=ce("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pp=ce("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=ce("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=ce("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rc=ce("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Im=ce("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=ce("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=ce("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ep=ce("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=ce("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ip=ce("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mp=ce("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ap=ce("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=ce("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lp=ce("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zp=ce("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fp=ce("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=ce("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mm=ce("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Am=ce("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lm=ce("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zm=ce("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fm=ce("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=ce("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hd=ce("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rp=ce("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=ce("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const to=ce("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $p=ce("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ml=ce("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rm=ce("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=ce("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $m=ce("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Op=ce("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const so=ce("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=ce("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Up=ce("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=ce("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pd=ce("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hp=ce("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ro=ce("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const no=ce("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bp=ce("UsersRound",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=ce("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wp=ce("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ao=ce("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function _({children:e,variant:s="primary",size:r="md",loading:n=!1,icon:a,className:l="",disabled:i,...o}){const c="inline-flex items-center justify-center font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",m={primary:"bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500",secondary:"bg-gray-600 hover:bg-gray-700 text-white focus:ring-gray-500",outline:"border border-gray-300 hover:bg-gray-50 text-gray-700 focus:ring-blue-500",ghost:"hover:bg-gray-100 text-gray-700 focus:ring-blue-500",danger:"bg-red-600 hover:bg-red-700 text-white focus:ring-red-500"},x={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"};return t.jsxs("button",{className:`${c} ${m[s]} ${x[r]} ${l}`,disabled:i||n,...o,children:[n?t.jsx(oa,{className:"w-4 h-4 animate-spin mr-2"}):a?t.jsx("span",{className:"mr-2",children:a}):null,e]})}function q({children:e,className:s="",onClick:r}){return t.jsx("div",{className:`bg-white rounded-lg shadow-sm border border-gray-200 ${r?"cursor-pointer hover:shadow-md transition-shadow":""} ${s}`,onClick:r,children:e})}function Te({children:e,className:s=""}){return t.jsx("div",{className:`px-6 py-4 border-b border-gray-200 ${s}`,children:e})}function Q({children:e,className:s=""}){return t.jsx("div",{className:`px-6 py-4 ${s}`,children:e})}function Pe({children:e,className:s=""}){return t.jsx("h3",{className:`text-lg font-semibold text-gray-900 ${s}`,children:e})}function Vp({onSwitchToTeam:e}){const[s,r]=u.useState(""),[n,a]=u.useState(""),[l,i]=u.useState(!1),[o,c]=u.useState(!1),[m,x]=u.useState(null),{signIn:y}=Ss(),d=async f=>{f.preventDefault(),c(!0),x(null);try{const{data:b,error:S}=await y(s,n);if(S){x(S.message);return}b!=null&&b.user&&console.log("Sign in successful:",b.user)}catch(b){x(b.message)}finally{c(!1)}};return t.jsxs("div",{className:"min-h-screen  grid grid-cols-1 lg:grid-cols-2 bg-[#FFF6EE] w-[100%]",children:[t.jsxs("div",{className:"relative hidden lg:block",style:{backgroundImage:"url('../admin_login.png')",backgroundSize:"cover",backgroundPosition:"center"},children:[t.jsx("div",{className:"absolute inset-0 bg-amber-900/40"}),t.jsx("div",{className:"relative z-10 h-full w-full flex items-center justify-center",children:t.jsxs("div",{className:"text-center text-white max-w-2xl",children:[t.jsx("h1",{className:"text-4xl xl:text-5xl font-extrabold drop-shadow-sm",children:"Welcome to Byline"}),t.jsx("p",{className:"mt-4 text-white/90 text-lg",children:"Manage projects, teams, and tasks efficiently"})]})})]}),t.jsx("div",{className:"flex items-center justify-center p-6 sm:p-10 !bg-[#FFF6EE]",children:t.jsxs("div",{className:"w-full max-w-md bg-[#FFF6EE] border-2 border-red-100 py-8 rounded-lg shadow-sm",children:[t.jsx("div",{className:"flex items-center justify-center mb-6",children:t.jsx("img",{src:"/logo.png",alt:"Logo",className:"h-24 w-auto"})}),t.jsxs(q,{className:"border-0 bg-[#FFF6EE]",children:[t.jsxs(Te,{className:"text-center pb-4 bg-[#FFF6EE]",children:[t.jsx(Pe,{className:"text-3xl font-bold text-gray-900",children:"Welcome back Admin!"}),t.jsx("p",{className:"text-gray-600 mt-2",children:"Sign in to your account to continue"})]}),t.jsxs(Q,{className:"space-y-6 bg-[#FFF6EE]",children:[t.jsxs("form",{onSubmit:d,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),t.jsxs("div",{className:"relative",children:[t.jsx(zm,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),t.jsx("input",{type:"email",required:!0,value:s,onChange:f=>r(f.target.value),className:"w-full pl-10 pr-3 py-3 rounded-md border border-amber-200 bg-white focus:ring-2 focus:ring-amber-400 focus:border-transparent placeholder:text-gray-400",placeholder:"Email Address"})]})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Password"}),t.jsx("a",{className:"text-xs text-amber-600 hover:underline cursor-pointer",children:"Forget Password?"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(Mm,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),t.jsx("input",{type:l?"text":"password",required:!0,value:n,onChange:f=>a(f.target.value),className:"w-full pl-10 pr-12 py-3 rounded-md border border-amber-200 bg-white focus:ring-2 focus:ring-amber-400 focus:border-transparent placeholder:text-gray-400",placeholder:"Password",minLength:6}),t.jsx("button",{type:"button",onClick:()=>i(!l),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:l?t.jsx(ia,{className:"w-4 h-4"}):t.jsx(Hs,{className:"w-4 h-4"})})]})]}),m&&t.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",children:t.jsx("p",{className:"text-sm text-red-600",children:m})}),t.jsx(_,{type:"submit",className:"w-full py-3 bg-amber-500 hover:bg-amber-600 focus:ring-amber-500",loading:o,icon:o?t.jsx(oa,{className:"w-4 h-4"}):t.jsx(Am,{className:"w-4 h-4"}),children:"Log In"})]}),t.jsx(_,{variant:"outline",className:"w-full border-amber-200 text-amber-700 hover:bg-amber-50",onClick:e,icon:t.jsx(bp,{className:"w-4 h-4"}),children:"Sign in as Team Member"})]}),t.jsxs("span",{className:"text-gray-600 text-sm text-center flex items-center justify-center gap-1",children:["Team Member? Click Here ",t.jsx(Sp,{className:"w-4 h-4"})]})]})]})})]})}const Xs="https://workflow.bylinelms.com/api",Ca=()=>{const e=localStorage.getItem("access_token");return{"Content-Type":"application/json",...e&&{Authorization:`Bearer ${e}`}}},Da=()=>{const e=localStorage.getItem("teamToken");return{"Content-Type":"application/json",...e&&{Authorization:`Bearer ${e}`}}},Zs=async e=>{var r;const s=await e.json();if(!e.ok)throw new Error(((r=s.error)==null?void 0:r.message)||s.message||"API request failed");return s},Js=async(e,s)=>await fetch(e,s),U={get:async e=>{const s=await Js(`${Xs}${e}`,{method:"GET",headers:Ca()});return Zs(s)},post:async(e,s)=>{const r=await Js(`${Xs}${e}`,{method:"POST",headers:Ca(),body:JSON.stringify(s)});return Zs(r)},put:async(e,s)=>{const r=await Js(`${Xs}${e}`,{method:"PUT",headers:Ca(),body:JSON.stringify(s)});return Zs(r)},delete:async e=>{const s=await Js(`${Xs}${e}`,{method:"DELETE",headers:Ca()});return Zs(s)}},ts={get:async e=>{const s=await Js(`${Xs}${e}`,{method:"GET",headers:Da()});return Zs(s)},post:async(e,s)=>{const r=await Js(`${Xs}${e}`,{method:"POST",headers:Da(),body:JSON.stringify(s)});return Zs(r)},put:async(e,s)=>{const r=await Js(`${Xs}${e}`,{method:"PUT",headers:Da(),body:JSON.stringify(s)});return Zs(r)},delete:async e=>{const s=await Js(`${Xs}${e}`,{method:"DELETE",headers:Da()});return Zs(s)}},Gp={getAll:async e=>{const s=new URLSearchParams(e).toString(),r=s?`/projects?${s}`:"/projects";return(await ts.get(r)).data},getById:async e=>(await ts.get(`/projects/${e}`)).data},Fe={getAll:async()=>(await U.get("/team")).data,getMyTasks:async()=>(await ts.get("/team/my-tasks")).data,getMyProfile:async()=>(await ts.get("/team/my-profile")).data,getById:async e=>(await U.get(`/team/${e}`)).data,create:async e=>(await U.post("/team",e)).data,update:async(e,s)=>(await U.put(`/team/${e}`,s)).data,delete:async e=>(await U.delete(`/team/${e}`)).data,getMembers:async()=>(await U.get("/team/members")).data,getMemberById:async e=>(await U.get(`/team/members/${e}`)).data,createMember:async e=>(await U.post("/team/members",e)).data,updateMember:async(e,s)=>(await U.put(`/team/members/${e}`,s)).data,deleteMember:async e=>(await U.delete(`/team/members/${e}`)).data,getTeams:async()=>(await U.get("/team/teams")).data,getTeamById:async e=>(await U.get(`/team/teams/${e}`)).data,createTeam:async e=>(await U.post("/team/teams",e)).data,updateTeam:async(e,s)=>(await U.put(`/team/teams/${e}`,s)).data,deleteTeam:async e=>(await U.delete(`/team/teams/${e}`)).data,addMemberToTeam:async(e,s)=>(await U.post(`/team/teams/${e}/members`,s)).data,removeMemberFromTeam:async(e,s)=>(await U.delete(`/team/teams/${e}/members/${s}`)).data,getTeamMembers:async e=>(await U.get(`/team/teams/${e}`)).data.members||[],authenticate:async e=>await U.post("/team/authenticate",e)},Ve={getAll:async e=>{const s=new URLSearchParams(e).toString(),r=s?`/projects?${s}`:"/projects";return await U.get(r)},getById:async e=>(await U.get(`/projects/${e}`)).data,create:async e=>(await U.post("/projects",e)).data,update:async(e,s)=>(await U.put(`/projects/${e}`,s)).data,delete:async e=>(await U.delete(`/projects/${e}`)).data,getMembers:async e=>(await U.get(`/projects/${e}/members`)).data,getTeams:async e=>(await U.get(`/projects/${e}/teams`)).data,addMember:async(e,s)=>(await U.post(`/projects/${e}/members`,s)).data,addTeam:async(e,s)=>(await U.post(`/projects/${e}/members`,s)).data,removeMember:async(e,s)=>(await U.delete(`/projects/${e}/members/${s}`)).data,removeTeam:async(e,s)=>(await U.delete(`/projects/${e}/teams/${s}`)).data},er={getAll:async()=>(await U.get("/categories")).data,getById:async e=>(await U.get(`/categories/${e}`)).data,create:async e=>(await U.post("/categories",e)).data,update:async(e,s)=>(await U.put(`/categories/${e}`,s)).data,delete:async e=>(await U.delete(`/categories/${e}`)).data},Ns={getAll:async()=>(await U.get("/skills")).data,getById:async e=>(await U.get(`/skills/${e}`)).data,create:async e=>(await U.post("/skills",e)).data,update:async(e,s)=>(await U.put(`/skills/${e}`,s)).data,delete:async e=>(await U.delete(`/skills/${e}`)).data},We={getAll:async e=>{const s=new URLSearchParams(e).toString(),r=s?`/tasks?${s}`:"/tasks";return await U.get(r)},getById:async e=>(await U.get(`/tasks/${e}`)).data,create:async e=>(await U.post("/tasks",e)).data,update:async(e,s)=>(await U.put(`/tasks/${e}`,s)).data,delete:async e=>(await U.delete(`/tasks/${e}`)).data,getByProject:async e=>(await U.get(`/tasks?project_id=${e}`)).data,getByAssignee:async(e,s)=>(await U.get(`/tasks?assignee_id=${e}&assignee_type=${s}`)).data,updateStatus:async(e,s,r)=>{const n={status:s};return r!==void 0&&(n.progress=r),(await U.put(`/tasks/${e}`,n)).data},updateProgress:async(e,s)=>(await U.put(`/tasks/${e}`,{progress:s})).data,requestExtension:async(e,s)=>(await U.post(`/tasks/${e}/extensions`,s)).data,getExtensions:async e=>(await U.get(`/tasks/${e}/extensions`)).data,reviewExtension:async(e,s)=>(await U.put(`/tasks/extensions/${e}/review`,s)).data,addRemark:async(e,s)=>(await U.post(`/tasks/${e}/remarks`,s)).data,getRemarks:async e=>(await U.get(`/tasks/${e}/remarks`)).data,deleteRemark:async e=>(await U.delete(`/tasks/remarks/${e}`)).data},gd={update:async(e,s)=>(await ts.put(`/tasks/${e}`,s)).data,updateStatus:async(e,s,r)=>{const n={status:s};return r!==void 0&&(n.progress=r),(await ts.put(`/tasks/${e}`,n)).data},updateProgress:async(e,s)=>(await ts.put(`/tasks/${e}`,{progress:s})).data,requestExtension:async(e,s)=>(await ts.post(`/tasks/${e}/extensions`,s)).data,getExtensions:async e=>(await ts.get(`/tasks/${e}/extensions`)).data,addRemark:async(e,s)=>(await ts.post(`/tasks/${e}/remarks`,s)).data,getRemarks:async e=>(await ts.get(`/tasks/${e}/remarks`)).data,deleteRemark:async e=>(await ts.delete(`/tasks/remarks/${e}`)).data},Ta={getAll:async e=>{const s=new URLSearchParams(e).toString(),r=s?`/allocations?${s}`:"/allocations";return(await U.get(r)).data},getById:async e=>(await U.get(`/allocations/${e}`)).data,create:async e=>(await U.post("/allocations",e)).data,update:async(e,s)=>(await U.put(`/allocations/${e}`,s)).data,delete:async e=>(await U.delete(`/allocations/${e}`)).data,getWorkloadSummary:async e=>(await U.get(`/allocations/workload-summary?date=${e}`)).data},Ot={getAll:async e=>{const s=e?`/stages?project_id=${e}`:"/stages";return(await U.get(s)).data},getById:async e=>(await U.get(`/stages/${e}`)).data,create:async e=>(await U.post("/stages",e)).data,update:async(e,s)=>(await U.put(`/stages/${e}`,s)).data,delete:async e=>(await U.delete(`/stages/${e}`)).data,getByCategory:async e=>(await U.get(`/stages/category/${e}`)).data,reorder:async(e,s)=>(await U.post(`/stages/category/${e}/reorder`,{stage_orders:s})).data},li={getByCategory:async e=>(await U.get(`/stage-templates/category/${e}`)).data,getById:async e=>(await U.get(`/stage-templates/${e}`)).data,create:async e=>(await U.post("/stage-templates",e)).data,update:async(e,s)=>(await U.put(`/stage-templates/${e}`,s)).data,delete:async e=>(await U.delete(`/stage-templates/${e}`)).data,bulkCreate:async(e,s)=>(await U.post(`/stage-templates/category/${e}/bulk`,{templates:s})).data},Is={getByProject:async e=>(await U.get(`/grades/project/${e}`)).data,getAll:async()=>(await U.get("/grades")).data,getById:async e=>(await U.get(`/grades/${e}`)).data,create:async e=>(await U.post("/grades",e)).data,update:async(e,s)=>(await U.put(`/grades/${e}`,s)).data,delete:async e=>(await U.delete(`/grades/${e}`)).data,distributeWeights:async e=>(await U.post("/grades/distribute-weights",{project_id:e})).data},Ms={getByGrade:async e=>(await U.get(`/books/grade/${e}`)).data,getAll:async()=>(await U.get("/books")).data,getById:async e=>(await U.get(`/books/${e}`)).data,create:async e=>(await U.post("/books",e)).data,update:async(e,s)=>(await U.put(`/books/${e}`,s)).data,delete:async e=>(await U.delete(`/books/${e}`)).data,distributeWeights:async e=>(await U.post("/books/distribute-weights",{grade_id:e})).data},As={getByBook:async e=>(await U.get(`/units/book/${e}`)).data,getAll:async()=>(await U.get("/units")).data,getById:async e=>(await U.get(`/units/${e}`)).data,create:async e=>(await U.post("/units",e)).data,update:async(e,s)=>(await U.put(`/units/${e}`,s)).data,delete:async e=>(await U.delete(`/units/${e}`)).data,distributeWeights:async e=>(await U.post("/units/distribute-weights",{book_id:e})).data},dr={getByUnit:async e=>(await U.get(`/lessons/unit/${e}`)).data,getAll:async()=>(await U.get("/lessons")).data,getById:async e=>(await U.get(`/lessons/${e}`)).data,create:async e=>(await U.post("/lessons",e)).data,update:async(e,s)=>(await U.put(`/lessons/${e}`,s)).data,delete:async e=>(await U.delete(`/lessons/${e}`)).data,distributeWeights:async e=>(await U.post("/lessons/distribute-weights",{unit_id:e})).data},qp={getOverview:async()=>{try{const e=await Promise.allSettled([Ve.getAll().catch(m=>(console.error(" Projects fetch error:",m),{data:[]})),Fe.getMembers().catch(m=>(console.error(" Team members fetch error:",m),[])),er.getAll().catch(m=>(console.error(" Categories fetch error:",m),[])),Ns.getAll().catch(m=>(console.error(" Skills fetch error:",m),[])),We.getAll({all:"true"}).catch(m=>(console.error(" Tasks fetch error:",m),{data:[]}))]),[s,r,n,a,l]=e.map(m=>m.status==="fulfilled"?m.value||[]:(console.error(" API call failed:",m.reason),[])),i=s&&s.data?s.data:Array.isArray(s)?s:[],o=l&&l.data?l.data:Array.isArray(l)?l:[],c={totalProjects:i.length,activeProjects:i.filter(m=>m.status==="active").length,totalTeamMembers:r.length,activeTeamMembers:r.filter(m=>m.is_active!==!1).length,totalCategories:n.length,totalSkills:a.length,totalTasks:o.length,activeTasks:o.filter(m=>["not-started","in-progress","under-review"].includes(m.status)).length,completedTasks:o.filter(m=>m.status==="completed").length,overdueTasks:o.filter(m=>new Date(m.end_date)<new Date&&m.status!=="completed").length};return{projects:i,teamMembers:r,tasks:o,categories:n,skills:a,stats:c}}catch(e){return console.error("Dashboard overview fetch error:",e),{projects:[],teamMembers:[],tasks:[],categories:[],skills:[],stats:{totalProjects:0,activeProjects:0,totalTeamMembers:0,activeTeamMembers:0,totalCategories:0,totalSkills:0,totalTasks:0,activeTasks:0,completedTasks:0,overdueTasks:0}}}},getRecentActivity:async()=>[]},br={getByTeamMember:async e=>(await U.get(`/performance-flags/team-member/${e}`)).data,getByTask:async e=>(await U.get(`/performance-flags/task/${e}`)).data,getSummary:async e=>(await U.get(`/performance-flags/summary/${e}`)).data,add:async e=>(await U.post("/performance-flags",e)).data,update:async(e,s)=>(await U.put(`/performance-flags/${e}`,s)).data,delete:async e=>(await U.delete(`/performance-flags/${e}`)).data};function Qp({onLogin:e,onBackToAdmin:s}){const[r,n]=u.useState(""),[a,l]=u.useState(""),[i,o]=u.useState(!1),[c,m]=u.useState(""),[x,y]=u.useState(!1),d=async f=>{f.preventDefault(),y(!0),m("");try{const b=await Fe.authenticate({email:r,passcode:a});b.success&&b.data?(b.token&&localStorage.setItem("teamToken",b.token),e(b.data)):m("Invalid email or passcode. Please check your credentials.")}catch(b){console.error("Login error:",b),m(b.message||"Login failed. Please try again.")}finally{y(!1)}};return t.jsxs("div",{className:"min-h-screen  grid grid-cols-1 lg:grid-cols-2 bg-[#FFF6EE] w-[100%]  ",children:[t.jsxs("div",{className:"relative hidden lg:block",style:{backgroundImage:"url('../member_login.png')",backgroundSize:"cover",backgroundPosition:"center"},children:[t.jsx("div",{className:"absolute inset-0 bg-amber-900/40"}),t.jsx("div",{className:"relative z-10 h-full w-full flex items-center justify-center ",children:t.jsxs("div",{className:"text-center text-white max-w-2xl",children:[t.jsx("h1",{className:"text-4xl xl:text-5xl font-extrabold drop-shadow-sm",children:"Welcome to Byline"}),t.jsx("p",{className:"mt-4 text-white/90 text-lg",children:"Access your personalized dashboard and manage your educational journey"})]})})]}),t.jsx("div",{className:"flex items-center justify-center p-6 sm:p-10 !bg-[#FFF6EE]",children:t.jsxs("div",{className:"w-full max-w-md bg-[#FFF6EE]",children:[t.jsx("div",{className:"flex items-center justify-center mb-6",children:t.jsx("img",{src:"/logo.png",alt:"Logo",className:"h-14 w-14"})}),t.jsxs(q,{className:" border-0 bg-[#FFF6EE]",children:[t.jsxs(Te,{className:"text-center pb-4 bg-[#FFF6EE]",children:[t.jsx(Pe,{className:"text-2xl font-bold text-gray-900",children:"Welcome back"}),t.jsx("p",{className:"text-gray-600 mt-2",children:"Sign in to your account to continue"})]}),t.jsxs(Q,{className:"space-y-6 bg-[#FFF6EE]",children:[t.jsxs("form",{onSubmit:d,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),t.jsxs("div",{className:"relative",children:[t.jsx(zm,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),t.jsx("input",{type:"email",required:!0,value:r,onChange:f=>n(f.target.value),className:"w-full pl-10 pr-3 py-3 rounded-md border border-amber-200 bg-white focus:ring-2 focus:ring-amber-400 focus:border-transparent placeholder:text-gray-400",placeholder:"Email Address"})]})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Password"}),t.jsx("a",{className:"text-xs text-amber-600 hover:underline cursor-pointer",children:"Forget Password?"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(Mm,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),t.jsx("input",{type:i?"text":"password",required:!0,value:a,onChange:f=>l(f.target.value),className:"w-full pl-10 pr-12 py-3 rounded-md border border-amber-200 bg-white focus:ring-2 focus:ring-amber-400 focus:border-transparent placeholder:text-gray-400",placeholder:"Password"}),t.jsx("button",{type:"button",onClick:()=>o(!i),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:i?t.jsx(ia,{className:"w-4 h-4"}):t.jsx(Hs,{className:"w-4 h-4"})})]})]}),t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[t.jsx("input",{id:"remember",type:"checkbox",className:"rounded border-gray-300 text-amber-600 focus:ring-amber-500"}),t.jsx("label",{htmlFor:"remember",children:"Remember me"})]}),c&&t.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md flex items-center",children:[t.jsx(wp,{className:"w-4 h-4 text-red-500 mr-2"}),t.jsx("p",{className:"text-sm text-red-600",children:c})]}),t.jsx(_,{type:"submit",className:"w-full py-3 bg-amber-500 hover:bg-amber-600 focus:ring-amber-500",loading:x,icon:t.jsx(Am,{className:"w-4 h-4"}),children:"Log In"})]}),s&&t.jsx(_,{variant:"outline",className:"w-full border-amber-200 text-amber-700 hover:bg-amber-50",onClick:s,icon:t.jsx(sc,{className:"w-4 h-4"}),children:"Back to Dashboard Selection"})]})]})]})})]})}function ee({children:e,variant:s="default",size:r="sm",className:n=""}){const a="inline-flex items-center font-medium rounded-full",l={default:"bg-gray-100 text-gray-800",primary:"bg-blue-100 text-blue-800",secondary:"bg-gray-100 text-gray-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800"},i={sm:"px-2.5 py-0.5 text-xs",md:"px-3 py-1 text-sm"};return t.jsx("span",{className:`${a} ${l[s]} ${i[r]} ${n}`,children:e})}function ot({isOpen:e,onClose:s,title:r,children:n,size:a="md"}){if(!e)return null;const l={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"};return t.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:t.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[t.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:s}),t.jsxs("div",{className:`inline-block w-full ${l[a]} my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-lg`,children:[t.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:r}),t.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:t.jsx(ao,{className:"w-5 h-5"})})]}),t.jsx("div",{className:"px-6 py-4",children:n})]})]})})}function Kp({user:e,onLogout:s}){var Z;const[r,n]=u.useState([]),[a,l]=u.useState([]),[i,o]=u.useState(null),[c,m]=u.useState(!1),[x,y]=u.useState(!1),[d,f]=u.useState(""),[b,S]=u.useState(new Date(Date.now()+7*24*60*60*1e3).toISOString().split("T")[0]),[z,g]=u.useState(""),[h,j]=u.useState(new Date().toISOString().split("T")[0]),[I,F]=u.useState("general"),[v,w]=u.useState(!0),[N,C]=u.useState(!1),[P,G]=u.useState([]);u.useEffect(()=>{B()},[e.id]);const B=async()=>{try{w(!0);const[k,ie,pe]=await Promise.all([Fe.getMyTasks(),Gp.getAll(),br.getByTeamMember(e.id)]);n(k),l(ie),G(pe)}catch(k){console.error("Failed to load user data:",k)}finally{w(!1)}},$=async()=>{C(!0),await B(),C(!1)},fe=r.filter(k=>k.status!=="completed"),E=r.filter(k=>k.status==="completed"),le=r.filter(k=>k.end_date&&new Date(k.end_date)<new Date&&k.status!=="completed"),se=r.length>0?Math.round(E.length/r.length*100):0;E.filter(k=>k.updated_at&&k.end_date&&new Date(k.updated_at)<=new Date(k.end_date)).length;const H=k=>{o(k),m(!0)},D=k=>{o(k),y(!0)},L=async()=>{if(i)try{await gd.requestExtension(i.id,{requested_due_date:b,reason:d}),await B()}catch(k){console.error("Failed to submit extension request:",k)}m(!1),o(null),f(""),S(new Date(Date.now()+7*24*60*60*1e3).toISOString().split("T")[0])},re=async()=>{if(i)try{await gd.addRemark(i.id,{remark:z,remark_date:h,remark_type:I}),await B()}catch(k){console.error("Failed to add remark:",k)}y(!1),o(null),g(""),j(new Date().toISOString().split("T")[0]),F("general")},X=k=>{if(!k.end_date)return!1;const ie=new Date;ie.setHours(0,0,0,0);const pe=new Date(k.end_date);return pe.setHours(0,0,0,0),pe<ie&&k.status!=="completed"},ne=k=>{if(!k.end_date)return 0;const ie=new Date,Ee=new Date(k.end_date).getTime()-ie.getTime();return Math.ceil(Ee/(1e3*60*60*24))};return v?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:"relative",children:[t.jsx(to,{className:"w-12 h-12 animate-spin mx-auto mb-6 text-blue-600"}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-400 to-purple-400 rounded-full blur-xl opacity-20 animate-pulse"})]}),t.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Loading Your Portal"}),t.jsx("p",{className:"text-gray-600",children:"Preparing your personalized dashboard..."})]})}):t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:[t.jsx("header",{className:"bg-white/80 backdrop-blur-md shadow-lg border-b border-gray-200/50 sticky top-0 z-50",children:t.jsx("div",{className:"w-full px-6 lg:px-16",children:t.jsxs("div",{className:"flex items-center justify-between h-20",children:[t.jsxs("div",{className:"flex items-center space-x-6",children:[t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"w-14 h-14 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 rounded-2xl flex items-center justify-center text-white font-bold text-xl shadow-lg",children:e.name.charAt(0)}),t.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-green-500 rounded-full border-4 border-white shadow-lg"})]}),t.jsxs("div",{className:"flex flex-col space-y-1",children:[t.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Welcome back, ",e.name,"!"]}),t.jsxs("p",{className:"text-gray-600 flex items-center",children:[t.jsx(Mp,{className:"w-4 h-4 mr-2"}),e.skills&&e.skills.length>0?e.skills.join(", "):"Team Member Portal"]})]})]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs(_,{variant:"outline",size:"sm",onClick:$,loading:N,className:"bg-white/50 backdrop-blur-sm border-gray-200 hover:bg-white hover:shadow-md transition-all duration-200",children:[t.jsx(to,{className:"w-4 h-4 mr-2"}),"Refresh"]}),t.jsxs(_,{variant:"ghost",className:"relative p-3 hover:bg-gray-100 rounded-xl transition-all duration-200",children:[t.jsx(Em,{className:"w-5 h-5 text-gray-600"}),t.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full"})]}),t.jsx(_,{variant:"ghost",className:"p-3 hover:bg-gray-100 rounded-xl transition-all duration-200",children:t.jsx(Rm,{className:"w-5 h-5 text-gray-600"})}),t.jsx(_,{variant:"ghost",onClick:()=>{localStorage.removeItem("teamToken"),s()},className:"p-3 hover:bg-red-50 hover:text-red-600 rounded-xl transition-all duration-200",children:t.jsx(Lm,{className:"w-5 h-5"})})]})]})})}),t.jsxs("div",{className:"w-full px-8 lg:px-12 xl:px-16 py-8",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-10",children:[t.jsx(q,{className:"bg-gradient-to-br from-blue-500 via-blue-600 to-blue-700 text-white border-0 shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-1",children:t.jsx(Q,{className:"p-8",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-blue-100 text-sm font-medium mb-2",children:"Active Tasks"}),t.jsx("p",{className:"text-4xl font-bold",children:fe.length}),t.jsx("p",{className:"text-blue-200 text-sm mt-2",children:"Currently working on"})]}),t.jsx("div",{className:"p-4 rounded-2xl bg-blue-400/20 backdrop-blur-sm",children:t.jsx(Ht,{className:"w-8 h-8 text-white"})})]})})}),t.jsx(q,{className:"bg-gradient-to-br from-green-500 via-green-600 to-green-700 text-white border-0 shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-1",children:t.jsx(Q,{className:"p-8",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-green-100 text-sm font-medium mb-2",children:"Completed"}),t.jsx("p",{className:"text-4xl font-bold",children:E.length}),t.jsx("p",{className:"text-green-200 text-sm mt-2",children:"Successfully finished"})]}),t.jsx("div",{className:"p-4 rounded-2xl bg-green-400/20 backdrop-blur-sm",children:t.jsx(hl,{className:"w-8 h-8 text-white"})})]})})}),t.jsx(q,{className:"bg-gradient-to-br from-red-500 via-red-600 to-red-700 text-white border-0 shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-1",children:t.jsx(Q,{className:"p-8",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-red-100 text-sm font-medium mb-2",children:"Overdue"}),t.jsx("p",{className:"text-4xl font-bold",children:le.length}),t.jsx("p",{className:"text-red-200 text-sm mt-2",children:"Need attention"})]}),t.jsx("div",{className:"p-4 rounded-2xl bg-red-400/20 backdrop-blur-sm",children:t.jsx(zt,{className:"w-8 h-8 text-white"})})]})})}),t.jsx(q,{className:"bg-gradient-to-br from-purple-500 via-purple-600 to-purple-700 text-white border-0 shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-1",children:t.jsx(Q,{className:"p-8",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-purple-100 text-sm font-medium mb-2",children:"Completion Rate"}),t.jsxs("p",{className:"text-4xl font-bold",children:[se,"%"]}),t.jsx("p",{className:"text-purple-200 text-sm mt-2",children:"Overall performance"})]}),t.jsx("div",{className:"p-4 rounded-2xl bg-purple-400/20 backdrop-blur-sm",children:t.jsx(un,{className:"w-8 h-8 text-white"})})]})})})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-10",children:[t.jsxs(q,{className:"bg-white/70 backdrop-blur-sm border-0 shadow-xl hover:shadow-2xl transition-all duration-300",children:[t.jsx(Te,{className:"pb-6",children:t.jsxs(Pe,{className:"flex items-center text-gray-800 text-xl",children:[t.jsx("div",{className:"p-3 rounded-xl bg-purple-100 mr-4",children:t.jsx(ws,{className:"w-6 h-6 text-purple-600"})}),"My Performance Flags"]})}),t.jsx(Q,{children:P.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-green-100 to-green-200 rounded-3xl flex items-center justify-center",children:t.jsx(ws,{className:"w-10 h-10 text-green-600"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"No Performance Flags"}),t.jsx("p",{className:"text-gray-600",children:"Keep up the excellent work!"})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"text-center p-6 bg-gradient-to-br from-green-50 to-green-100 rounded-2xl border-2 border-green-200 shadow-sm hover:shadow-md transition-all duration-200",children:[t.jsx("div",{className:"text-3xl font-bold text-green-700 mb-2",children:P.filter(k=>k.type==="green").length}),t.jsx("div",{className:"text-sm text-green-600 font-semibold",children:" Green Flags"})]}),t.jsxs("div",{className:"text-center p-6 bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-2xl border-2 border-yellow-200 shadow-sm hover:shadow-md transition-all duration-200",children:[t.jsx("div",{className:"text-3xl font-bold text-yellow-700 mb-2",children:P.filter(k=>k.type==="yellow").length}),t.jsx("div",{className:"text-sm text-yellow-600 font-semibold",children:" Yellow Flags"})]}),t.jsxs("div",{className:"text-center p-6 bg-gradient-to-br from-orange-50 to-orange-100 rounded-2xl border-2 border-orange-200 shadow-sm hover:shadow-md transition-all duration-200",children:[t.jsx("div",{className:"text-3xl font-bold text-orange-700 mb-2",children:P.filter(k=>k.type==="orange").length}),t.jsx("div",{className:"text-sm text-orange-600 font-semibold",children:" Orange Flags"})]}),t.jsxs("div",{className:"text-center p-6 bg-gradient-to-br from-red-50 to-red-100 rounded-2xl border-2 border-red-200 shadow-sm hover:shadow-md transition-all duration-200",children:[t.jsx("div",{className:"text-3xl font-bold text-red-700 mb-2",children:P.filter(k=>k.type==="red").length}),t.jsx("div",{className:"text-sm text-red-600 font-semibold",children:" Red Flags"})]})]}),t.jsxs("div",{children:[t.jsxs("h4",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center",children:[t.jsx(js,{className:"w-5 h-5 mr-2 text-purple-600"}),"Recent Flags"]}),t.jsx("div",{className:"space-y-3",children:P.slice(0,3).map((k,ie)=>t.jsx("div",{className:"flex items-center justify-between p-4 rounded-xl bg-white border border-gray-100 shadow-sm hover:shadow-md transition-all duration-200",children:t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs(ee,{variant:k.type==="green"?"success":k.type==="yellow"||k.type==="orange"?"warning":"danger",size:"sm",className:"shadow-sm",children:[t.jsx(ws,{className:"w-3 h-3 mr-1"}),k.type.toUpperCase()]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-semibold text-gray-900",children:k.reason}),t.jsxs("p",{className:"text-xs text-gray-500",children:[new Date(k.created_at).toLocaleDateString()," by ",k.added_by]})]})]})},ie))})]})]})})]}),t.jsxs(q,{className:"bg-white/70 backdrop-blur-sm border-0 shadow-xl hover:shadow-2xl transition-all duration-300",children:[t.jsx(Te,{className:"pb-6",children:t.jsxs(Pe,{className:"flex items-center text-gray-800 text-xl",children:[t.jsx("div",{className:"p-3 rounded-xl bg-green-100 mr-4",children:t.jsx(eo,{className:"w-6 h-6 text-green-600"})}),"Recent Completions"]})}),t.jsx(Q,{children:E.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-blue-100 to-blue-200 rounded-3xl flex items-center justify-center",children:t.jsx(eo,{className:"w-10 h-10 text-blue-600"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"No Completed Tasks Yet"}),t.jsx("p",{className:"text-gray-600",children:"Start working on your assigned tasks!"})]}):t.jsx("div",{className:"space-y-4",children:E.slice(0,5).map(k=>{const ie=a.find(pe=>pe.id===k.project_id);return t.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl border-2 border-green-200 shadow-sm hover:shadow-md transition-all duration-200",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-semibold text-gray-900 mb-1",children:k.name}),t.jsx("p",{className:"text-xs text-gray-600 bg-white/50 px-2 py-1 rounded-full inline-block",children:ie==null?void 0:ie.name})]}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(hl,{className:"w-6 h-6 text-green-600"}),t.jsx("span",{className:"text-sm text-green-700 font-semibold",children:"Completed"})]})]},k.id)})})})]})]}),t.jsxs(q,{className:"bg-white/70 backdrop-blur-sm border-0 shadow-xl",children:[t.jsx(Te,{className:"pb-6",children:t.jsxs(Pe,{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"p-3 rounded-xl bg-blue-100 mr-4",children:t.jsx(Ht,{className:"w-6 h-6 text-blue-600"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"My Active Tasks"}),t.jsx("p",{className:"text-gray-600 mt-1 text-sm",children:"Manage your current assignments and track progress"})]})]}),t.jsxs(ee,{variant:"primary",className:"text-base font-bold px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600",children:[fe.length," tasks"]})]})}),t.jsx(Q,{children:fe.length===0?t.jsxs("div",{className:"text-center py-20 text-gray-500",children:[t.jsx("div",{className:"w-32 h-32 mx-auto mb-8 bg-gradient-to-br from-blue-100 to-blue-200 rounded-full flex items-center justify-center",children:t.jsx(Ht,{className:"w-16 h-16 text-blue-600"})}),t.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-4",children:"No Active Tasks"}),t.jsx("p",{className:"text-gray-600 text-xl max-w-md mx-auto",children:"You're all caught up! No tasks are currently assigned to you. Enjoy your free time!"})]}):t.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:fe.map(k=>{const ie=a.find(Re=>Re.id===k.project_id),pe=ne(k),Ee=X(k);return t.jsxs("div",{className:`group relative overflow-hidden rounded-2xl border-2 transition-all duration-500 hover:shadow-xl transform hover:-translate-y-1 ${Ee?"border-red-300 bg-gradient-to-br from-red-50 to-red-100 shadow-red-200":"border-gray-200 bg-white hover:border-blue-400 shadow-lg"}`,children:[t.jsx("div",{className:`absolute top-0 left-0 right-0 h-2 ${k.priority==="urgent"?"bg-gradient-to-r from-red-500 via-red-600 to-red-700":k.priority==="high"?"bg-gradient-to-r from-orange-500 via-orange-600 to-orange-700":k.priority==="medium"?"bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700":"bg-gradient-to-r from-gray-400 via-gray-500 to-gray-600"}`}),t.jsxs("div",{className:"p-4 pt-6",children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h4",{className:"font-bold text-gray-900 text-lg mb-2 line-clamp-2 group-hover:text-blue-600 transition-colors",children:k.name}),t.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600 mb-2",children:[t.jsx("span",{className:"font-semibold text-blue-600 bg-blue-50 px-3 py-1 rounded-full border border-blue-200",children:ie==null?void 0:ie.name}),t.jsx("span",{className:"text-gray-400",children:""}),t.jsx("span",{className:"font-semibold text-purple-600 bg-purple-50 px-3 py-1 rounded-full border border-purple-200",children:k.stage_name||"No Stage"}),k.category_name&&t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"text-gray-400",children:""}),t.jsx("span",{className:"text-gray-500 bg-gray-50 px-3 py-1 rounded-full border border-gray-200",children:k.category_name})]})]})]}),t.jsxs("div",{className:"flex flex-col items-end space-y-3 ml-6",children:[Ee&&t.jsxs(ee,{variant:"danger",size:"sm",className:"animate-pulse shadow-lg px-4 py-2",children:[t.jsx(zt,{className:"w-4 h-4 mr-2"}),"Overdue"]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(ee,{variant:k.priority==="urgent"?"danger":k.priority==="high"?"warning":k.priority==="medium"?"primary":"default",size:"sm",className:"shadow-sm px-3 py-1",children:k.priority}),t.jsx(ee,{variant:k.status==="in-progress"?"primary":k.status==="under-review"?"warning":k.status==="blocked"?"danger":"default",size:"sm",className:"shadow-sm px-3 py-1",children:k.status.replace("-"," ")})]})]})]}),k.description&&t.jsx("p",{className:"text-sm text-gray-700 mb-3 line-clamp-2 bg-gradient-to-r from-gray-50 to-blue-50 p-2 rounded-lg border-l-4 border-blue-300",children:k.description}),t.jsxs("div",{className:"mb-3",children:[t.jsxs("div",{className:"flex items-center justify-between text-sm mb-4",children:[t.jsx("span",{className:"text-gray-700 font-bold text-lg",children:"Progress"}),t.jsxs("span",{className:"font-bold text-gray-900 text-2xl",children:[k.progress,"%"]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 overflow-hidden shadow-inner",children:t.jsx("div",{className:`h-4 rounded-full transition-all duration-700 shadow-sm ${k.progress>=80?"bg-gradient-to-r from-green-500 via-green-600 to-green-700":k.progress>=50?"bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700":k.progress>=25?"bg-gradient-to-r from-yellow-500 via-orange-500 to-orange-600":"bg-gradient-to-r from-gray-400 via-gray-500 to-gray-600"}`,style:{width:`${k.progress}%`}})})]}),(k.grade_name||k.book_name||k.unit_name||k.lesson_name)&&t.jsxs("div",{className:"mb-3 p-3 bg-gradient-to-r from-blue-50 via-indigo-50 to-purple-50 rounded-lg border-2 border-blue-200 shadow-sm",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx(so,{className:"w-4 h-4 text-blue-600 mr-2"}),t.jsx("span",{className:"text-sm font-bold text-blue-900",children:"Educational Hierarchy"})]}),t.jsxs("div",{className:"flex flex-wrap gap-1",children:[k.grade_name&&t.jsx(ee,{variant:"primary",className:"text-xs bg-blue-100 text-blue-800 border-2 border-blue-200 font-semibold px-2 py-1",children:k.grade_name}),k.book_name&&t.jsx(ee,{variant:"primary",className:"text-xs bg-indigo-100 text-indigo-800 border-2 border-indigo-200 font-semibold px-2 py-1",children:k.book_name}),k.unit_name&&t.jsx(ee,{variant:"primary",className:"text-xs bg-purple-100 text-purple-800 border-2 border-purple-200 font-semibold px-2 py-1",children:k.unit_name}),k.lesson_name&&t.jsx(ee,{variant:"primary",className:"text-xs bg-pink-100 text-pink-800 border-2 border-pink-200 font-semibold px-2 py-1",children:k.lesson_name})]})]}),k.required_skills&&k.required_skills.length>0&&t.jsxs("div",{className:"mb-3 p-3 bg-gradient-to-r from-green-50 via-emerald-50 to-teal-50 rounded-lg border-2 border-green-200 shadow-sm",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx(jp,{className:"w-4 h-4 text-green-600 mr-2"}),t.jsx("span",{className:"text-sm font-bold text-green-900",children:"Required Skills"})]}),t.jsx("div",{className:"flex flex-wrap gap-1",children:k.required_skills.map((Re,M)=>t.jsx(ee,{variant:"secondary",className:"text-xs bg-green-100 text-green-800 border-2 border-green-200 font-semibold px-2 py-1",children:Re},M))})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3 p-3 bg-gradient-to-r from-gray-50 via-gray-100 to-gray-200 rounded-lg border border-gray-300 shadow-sm",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-xs text-gray-600 mb-1 font-semibold",children:"Due Date"}),t.jsx("div",{className:"text-sm font-bold text-gray-900",children:k.end_date?new Date(k.end_date).toLocaleDateString():"No due date"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-xs text-gray-600 mb-1 font-semibold",children:"Time Left"}),t.jsx("div",{className:`text-sm font-bold ${Ee?"text-red-600":pe<=1?"text-orange-600":pe<=3?"text-yellow-600":"text-green-600"}`,children:Ee?`${Math.abs(pe)} days overdue`:pe===0?"Due today":pe===1?"Due tomorrow":`${pe} days left`})]})]}),t.jsx("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-3 p-2 bg-white rounded-lg border border-gray-200 shadow-sm",children:t.jsxs("div",{className:"flex items-center space-x-6",children:[t.jsxs("span",{className:"font-semibold",children:["Estimated: ",t.jsxs("span",{className:"font-bold text-gray-900 text-lg",children:[k.estimated_hours,"h"]})]}),k.actual_hours&&t.jsxs("span",{className:"font-semibold",children:["Actual: ",t.jsxs("span",{className:"font-bold text-gray-900 text-lg",children:[k.actual_hours,"h"]})]})]})}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsxs(_,{variant:"outline",size:"sm",onClick:()=>H(k),className:"flex-1 h-9 font-semibold shadow-md hover:shadow-lg transition-all duration-200 bg-white hover:bg-blue-50 border-2 border-blue-200 hover:border-blue-300 text-sm",children:[t.jsx(cr,{className:"w-3 h-3 mr-1"}),"Request Extension"]}),t.jsxs(_,{variant:"outline",size:"sm",onClick:()=>D(k),className:"flex-1 h-9 font-semibold shadow-md hover:shadow-lg transition-all duration-200 bg-white hover:bg-purple-50 border-2 border-purple-200 hover:border-purple-300 text-sm",children:[t.jsx(Fm,{className:"w-3 h-3 mr-1"}),"Add Remark"]})]})]})]},k.id)})})})]})]}),t.jsx(ot,{isOpen:c,onClose:()=>m(!1),title:"Request Task Extension",children:t.jsxs("div",{className:"space-y-6",children:[i&&t.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border-2 border-blue-200",children:[t.jsx("h4",{className:"font-semibold text-gray-900 text-lg",children:i.name}),t.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Current due date: ",i.end_date?new Date(i.end_date).toLocaleDateString():"No due date"]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"New Due Date"}),t.jsx("input",{type:"date",value:b,onChange:k=>S(k.target.value),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Reason for Extension"}),t.jsx("textarea",{value:d,onChange:k=>f(k.target.value),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",rows:4,placeholder:"Please explain why you need an extension...",required:!0})]}),t.jsxs("div",{className:"flex justify-end space-x-4",children:[t.jsx(_,{variant:"outline",onClick:()=>m(!1),className:"px-6 py-3 font-semibold",children:"Cancel"}),t.jsx(_,{onClick:L,disabled:!d.trim(),className:"px-6 py-3 font-semibold bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700",children:"Submit Request"})]})]})}),t.jsx(ot,{isOpen:x,onClose:()=>y(!1),title:"Add Task Remark",children:t.jsxs("div",{className:"space-y-6",children:[i&&t.jsxs("div",{className:"p-4 bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl border-2 border-purple-200",children:[t.jsx("h4",{className:"font-semibold text-gray-900 text-lg",children:i.name}),t.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Project: ",(Z=a.find(k=>k.id===i.project_id))==null?void 0:Z.name]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Remark Date"}),t.jsx("input",{type:"date",value:h,onChange:k=>j(k.target.value),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Remark Type"}),t.jsxs("select",{value:I,onChange:k=>F(k.target.value),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200",children:[t.jsx("option",{value:"general",children:"General"}),t.jsx("option",{value:"progress",children:"Progress Update"}),t.jsx("option",{value:"issue",children:"Issue/Problem"}),t.jsx("option",{value:"update",children:"Update"}),t.jsx("option",{value:"other",children:"Other"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Remark Content"}),t.jsx("textarea",{value:z,onChange:k=>g(k.target.value),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200",rows:4,placeholder:"Add your remark or comment about this task...",required:!0})]}),t.jsxs("div",{className:"flex justify-end space-x-4",children:[t.jsx(_,{variant:"outline",onClick:()=>y(!1),className:"px-6 py-3 font-semibold",children:"Cancel"}),t.jsx(_,{onClick:re,disabled:!z.trim(),className:"px-6 py-3 font-semibold bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700",children:"Add Remark"})]})]})})]})}const Yp=[{id:"1",name:"Sarah Johnson",email:"sarah.johnson@company.com",skills:["Instructional Designers","Content Writers"],passcode:"DEMO123",isActive:!0,performanceFlags:[{id:"1",type:"green",reason:"Completed project ahead of schedule",date:"2024-01-15",addedBy:"Manager"}]},{id:"2",name:"Mike Chen",email:"mike.chen@company.com",skills:["Developers","Tech"],passcode:"TECH456",isActive:!0,performanceFlags:[]},{id:"3",name:"Emily Rodriguez",email:"emily.rodriguez@company.com",skills:["Graphic Designers","Animators"]},{id:"4",name:"David Kim",email:"david.kim@company.com",skills:["QA","Tech"]},{id:"5",name:"Lisa Thompson",email:"lisa.thompson@company.com",skills:["Marketing","Sales"]},{id:"6",name:"John Smith",email:"john.smith@company.com",skills:["Content Writers","Instructional Designers"]}],Xp=[{id:"1",name:"Pre-K Curriculum Development",description:"Comprehensive curriculum design for Pre-K students including KG-1, KG-2, and KG-3 levels",category:"Curriculum Design",status:"active",startDate:new Date("2024-01-15"),endDate:new Date("2024-06-30"),progress:65,stages:[{id:"stage-1",name:"Curriculum Analysis",description:"Analyze curriculum requirements and standards",order:1,weight:20,status:"completed",progress:100,startDate:new Date("2024-01-15"),endDate:new Date("2024-02-01"),reviewRounds:[],tasks:[]},{id:"stage-2",name:"Content Creation",description:"Develop curriculum content and materials",order:2,weight:60,status:"in-progress",progress:65,startDate:new Date("2024-02-01"),endDate:new Date("2024-04-30"),reviewRounds:[],tasks:[]},{id:"stage-3",name:"Review & Finalization",description:"Review and finalize curriculum materials",order:3,weight:20,status:"not-started",progress:0,startDate:new Date("2024-05-01"),endDate:new Date("2024-06-30"),reviewRounds:[],tasks:[]}],teamMembers:["1","3","6"],grades:[{id:"kg1",name:"KG-1",description:"Kindergarten Grade 1",projectId:"1",order:1,weight:40,books:[{id:"kg1-book1",name:"Book 1",type:"student",description:"Student Book 1 for KG-1",gradeId:"kg1",order:1,weight:70,units:[{id:"kg1-book1-unit1",name:"Unit 1: Colors and Shapes",description:"Introduction to basic colors and shapes",bookId:"kg1-book1",order:1,weight:60,lessons:[{id:"kg1-book1-unit1-lesson1",name:"Lesson 1: Primary Colors",description:"Learning red, blue, and yellow",unitId:"kg1-book1-unit1",order:1,weight:50},{id:"kg1-book1-unit1-lesson2",name:"Lesson 2: Basic Shapes",description:"Circle, square, and triangle",unitId:"kg1-book1-unit1",order:2,weight:50}]},{id:"kg1-book1-unit2",name:"Unit 2: Numbers 1-10",description:"Introduction to counting and numbers",bookId:"kg1-book1",order:2,weight:40,lessons:[{id:"kg1-book1-unit2-lesson1",name:"Lesson 1: Numbers 1-5",description:"Learning to count 1 to 5",unitId:"kg1-book1-unit2",order:1,weight:100}]}]},{id:"kg1-teacher-guide",name:"Teacher Guide",type:"teacher",description:"Teacher guide for KG-1",gradeId:"kg1",order:2,weight:30,units:[{id:"kg1-tg-unit1",name:"Unit 1: Teaching Colors and Shapes",description:"Guide for teaching colors and shapes",bookId:"kg1-teacher-guide",order:1,weight:100,lessons:[{id:"kg1-tg-unit1-lesson1",name:"Lesson 1: Color Activities",description:"Activities for teaching colors",unitId:"kg1-tg-unit1",order:1,weight:100}]}]}]},{id:"kg2",name:"KG-2",description:"Kindergarten Grade 2",projectId:"1",order:2,weight:35,books:[{id:"kg2-book1",name:"Book 1",type:"student",description:"Student Book 1 for KG-2",gradeId:"kg2",order:1,weight:100,units:[{id:"kg2-book1-unit1",name:"Unit 1: Letters A-M",description:"Introduction to first half of alphabet",bookId:"kg2-book1",order:1,weight:100,lessons:[{id:"kg2-book1-unit1-lesson1",name:"Lesson 1: Letters A-E",description:"Learning letters A through E",unitId:"kg2-book1-unit1",order:1,weight:100}]}]}]},{id:"kg3",name:"KG-3",description:"Kindergarten Grade 3",projectId:"1",order:3,weight:25,books:[{id:"kg3-book1",name:"Book 1",type:"student",description:"Student Book 1 for KG-3",gradeId:"kg3",order:1,weight:100,units:[{id:"kg3-book1-unit1",name:"Unit 1: Reading Readiness",description:"Preparing for reading",bookId:"kg3-book1",order:1,weight:100,lessons:[{id:"kg3-book1-unit1-lesson1",name:"Lesson 1: Phonics Basics",description:"Introduction to phonics",unitId:"kg3-book1-unit1",order:1,weight:100}]}]}]}]},{id:"2",name:"LMS Platform Redesign",description:"Complete overhaul of the learning management system interface and user experience",category:"IT Applications",status:"active",startDate:new Date("2024-02-01"),endDate:new Date("2024-08-15"),progress:42,stages:[],teamMembers:["2","4","5"]},{id:"3",name:"Interactive Science Course",description:"eLearning course with interactive animations and simulations for high school science",category:"eLearning Design",status:"planning",startDate:new Date("2024-03-01"),endDate:new Date("2024-09-30"),progress:15,stages:[],teamMembers:["1","2","3"]},{id:"4",name:"Corporate Training Module",description:"Employee onboarding and training content for new hires",category:"eLearning Design",status:"completed",startDate:new Date("2023-10-01"),endDate:new Date("2024-01-15"),progress:100,stages:[],teamMembers:["1","6"]}],Zp=[{id:"1",name:"Content Strategy Development",description:"Create comprehensive content strategy for Pre-K curriculum",projectId:"1",stageId:"stage-2",gradeId:"kg1",bookId:"kg1-book1",unitId:"kg1-book1-unit1",lessonId:"kg1-book1-unit1-lesson1",componentPath:"KG-1 > Book 1 > Unit 1: Colors and Shapes > Lesson 1: Primary Colors",assignees:["1","6"],skills:["Content Writers","Instructional Designers"],status:"in-progress",priority:"high",startDate:new Date("2024-01-15"),endDate:new Date("2024-02-15"),progress:75,estimatedHours:40,actualHours:32},{id:"2",name:"UI/UX Design for LMS Dashboard",description:"Design new dashboard interface for the learning management system",projectId:"2",stageId:"stage-2",assignees:["3"],skills:["Graphic Designers"],status:"under-review",priority:"high",startDate:new Date("2024-02-01"),endDate:new Date("2024-02-28"),progress:90,estimatedHours:60,actualHours:55},{id:"3",name:"Database Migration Script",description:"Create scripts for migrating user data to new LMS platform",projectId:"2",stageId:"stage-2",assignees:["2"],skills:["Developers","Tech"],status:"not-started",priority:"medium",startDate:new Date("2024-03-01"),endDate:new Date("2024-03-15"),progress:0,estimatedHours:32},{id:"4",name:"Quality Assurance Testing",description:"Comprehensive testing of LMS functionality and user experience",projectId:"2",stageId:"stage-2",assignees:["4"],skills:["QA"],status:"blocked",priority:"urgent",startDate:new Date("2024-02-15"),endDate:new Date("2024-01-30"),progress:25,estimatedHours:48,actualHours:12},{id:"5",name:"Marketing Campaign Design",description:"Create promotional materials for new curriculum launch",projectId:"1",stageId:"stage-1",assignees:["5"],skills:["Marketing"],status:"completed",priority:"medium",startDate:new Date("2024-01-01"),endDate:new Date("2024-01-31"),progress:100,estimatedHours:24,actualHours:26},{id:"6",name:"Animation Storyboard Creation",description:"Develop storyboards for interactive science course animations",projectId:"3",stageId:"stage-2",assignees:["3"],skills:["Animators","Graphic Designers"],status:"in-progress",priority:"medium",startDate:new Date("2024-02-10"),endDate:new Date("2024-03-10"),progress:40,estimatedHours:36,actualHours:15},{id:"7",name:"KG-2 Letter Recognition Content",description:"Create content for letter recognition in KG-2",projectId:"1",stageId:"stage-2",gradeId:"kg2",bookId:"kg2-book1",unitId:"kg2-book1-unit1",lessonId:"kg2-book1-unit1-lesson1",componentPath:"KG-2 > Book 1 > Unit 1: Letters A-M > Lesson 1: Letters A-E",assignees:["1"],skills:["Content Writers","Instructional Designers"],status:"not-started",priority:"medium",startDate:new Date("2024-02-15"),endDate:new Date("2024-03-15"),progress:0,estimatedHours:30},{id:"8",name:"KG-3 Phonics Activities",description:"Develop phonics activities for KG-3 students",projectId:"1",stageId:"stage-2",gradeId:"kg3",bookId:"kg3-book1",unitId:"kg3-book1-unit1",lessonId:"kg3-book1-unit1-lesson1",componentPath:"KG-3 > Book 1 > Unit 1: Reading Readiness > Lesson 1: Phonics Basics",assignees:["6"],skills:["Instructional Designers"],status:"in-progress",priority:"high",startDate:new Date("2024-02-01"),endDate:new Date("2024-03-01"),progress:30,estimatedHours:25,actualHours:8}],Jp={projects:Xp,users:Yp,tasks:Zp,allocations:[],categories:["eLearning Design","Curriculum Design","IT Applications"],skills:["Content Writers","Instructional Designers","Graphic Designers","Developers","Animators","Tech","Sales","Marketing","QA"],filters:{},selectedProject:null,selectedView:"dashboard"};function e0(e,s){switch(s.type){case"SET_PROJECTS":return{...e,projects:s.payload};case"ADD_PROJECT":return{...e,projects:[...e.projects,s.payload]};case"UPDATE_PROJECT":return{...e,projects:e.projects.map(r=>r.id===s.payload.id?s.payload:r)};case"DELETE_PROJECT":return{...e,projects:e.projects.filter(r=>r.id!==s.payload)};case"SET_USERS":return{...e,users:s.payload};case"ADD_USER":return{...e,users:[...e.users,s.payload]};case"UPDATE_USER":return{...e,users:e.users.map(r=>r.id===s.payload.id?s.payload:r)};case"SET_TASKS":return{...e,tasks:s.payload};case"ADD_TASK":return{...e,tasks:[...e.tasks,s.payload]};case"UPDATE_TASK":return{...e,tasks:e.tasks.map(r=>r.id===s.payload.id?s.payload:r)};case"SET_ALLOCATIONS":return{...e,allocations:s.payload};case"ADD_ALLOCATION":return{...e,allocations:[...e.allocations,s.payload]};case"UPDATE_ALLOCATION":return{...e,allocations:e.allocations.map(r=>r.userId===s.payload.userId&&r.projectId===s.payload.projectId&&r.taskId===s.payload.taskId?s.payload:r)};case"ADD_CATEGORY":return{...e,categories:[...e.categories,s.payload]};case"ADD_SKILL":return{...e,skills:[...e.skills,s.payload]};case"SET_FILTERS":return{...e,filters:s.payload};case"SET_SELECTED_PROJECT":return{...e,selectedProject:s.payload};case"SET_SELECTED_VIEW":return{...e,selectedView:s.payload};default:return e}}const Om=u.createContext(null);function t0({children:e}){const[s,r]=u.useReducer(e0,Jp);return t.jsx(Om.Provider,{value:{state:s,dispatch:r},children:e})}function zr(){const e=u.useContext(Om);if(!e)throw new Error("useApp must be used within an AppProvider");return e}const s0=[{name:"Dashboard",icon:Lp,key:"dashboard"},{name:"Projects",icon:Es,key:"projects"},{name:"Teams",icon:lt,key:"teams"},{name:"Tasks",icon:Ht,key:"tasks"},{name:"Allocations",icon:At,key:"allocations"},{name:"Analytics",icon:js,key:"analytics"},{name:"Core Analytics",icon:un,key:"core-analytics"},{name:"Settings",icon:Rm,key:"settings"}];function r0(){const{state:e,dispatch:s}=zr();return t.jsxs("div",{className:"w-64 bg-white shadow-sm border-r border-gray-200 h-full",children:[t.jsxs("div",{className:"p-6",children:[t.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"ProjectFlow"}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Project Management"})]}),t.jsx("nav",{className:"px-4 space-y-4 h-[100vh]",children:s0.map(r=>{const n=e.selectedView===r.key;return t.jsxs("button",{onClick:()=>s({type:"SET_SELECTED_VIEW",payload:r.key}),className:`w-full flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ${n?"bg-blue-50 text-blue-700 border-r-2 border-blue-700":"text-gray-700 hover:bg-gray-50 hover:text-gray-900"}`,children:[t.jsx(r.icon,{className:`mr-3 h-5 w-5 ${n?"text-blue-700":"text-gray-400"}`}),r.name]},r.key)})})]})}function n0(){const{signOut:e,user:s}=Ss(),r=async()=>{await e()};return t.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:t.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[t.jsx("div",{className:"flex items-center flex-1",children:t.jsxs("div",{className:"relative max-w-md w-full",children:[t.jsx(Ml,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),t.jsx("input",{type:"text",placeholder:"Search projects, tasks, or team members...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx(_,{variant:"ghost",size:"sm",children:t.jsx(Em,{className:"w-4 h-4"})}),t.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[t.jsx(no,{className:"w-4 h-4"}),t.jsx("span",{children:s==null?void 0:s.email})]}),t.jsx(_,{variant:"ghost",size:"sm",onClick:r,children:t.jsx(Lm,{className:"w-4 h-4"})})]})]})})}function Ut({value:e,max:s=100,className:r="",showLabel:n=!0,variant:a="default"}){const l=Math.min(e/s*100,100),i={default:"bg-blue-600",success:"bg-green-600",warning:"bg-yellow-600",danger:"bg-red-600"};return t.jsxs("div",{className:`w-full ${r}`,children:[t.jsx("div",{className:"flex items-center justify-between mb-1",children:n&&t.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[Math.round(l),"%"]})}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${i[a]}`,style:{width:`${l}%`}})})]})}function a0(){const{user:e}=Ss(),{state:s,dispatch:r}=zr(),[n,a]=u.useState(null),[l,i]=u.useState(!0),[o,c]=u.useState(null);u.useEffect(()=>{let v=!0;return e&&(async()=>{try{i(!0),c(null);const N=await qp.getOverview();v&&a(N)}catch(N){v&&(console.error("Dashboard fetch error:",N),c(N.message||"Failed to load dashboard data"))}finally{v&&i(!1)}})(),()=>{v=!1}},[e]);const m=(v,w)=>{r({type:"SET_SELECTED_VIEW",payload:v}),w&&r({type:"SET_FILTERS",payload:w})},x=(n==null?void 0:n.projects)||[],y=(n==null?void 0:n.teamMembers)||[],d=(n==null?void 0:n.tasks)||[],f=new Date,b=new Date(f);b.setDate(b.getDate()+1);const S=new Date(f);S.setDate(f.getDate()+7);const z=d.filter(v=>{if(!v.end_date)return!1;const w=new Date(v.end_date);w.setHours(0,0,0,0);const N=new Date(f);return N.setHours(0,0,0,0),w.getTime()===N.getTime()&&v.status!=="completed"}),g=d.filter(v=>{if(!v.end_date)return!1;const w=new Date(v.end_date);w.setHours(0,0,0,0);const N=new Date(b);return N.setHours(0,0,0,0),w.getTime()===N.getTime()&&v.status!=="completed"}),h=d.filter(v=>{if(!v.end_date)return!1;const w=new Date(v.end_date);w.setHours(0,0,0,0);const N=new Date(f);N.setHours(0,0,0,0);const C=new Date(S);return C.setHours(0,0,0,0),w>=N&&w<=C&&v.status!=="completed"}),j=v=>{r({type:"SET_SELECTED_VIEW",payload:"tasks"}),r({type:"SET_FILTERS",payload:{teamMembers:[v]}})};if(l)return t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),t.jsx("p",{className:"text-gray-600",children:"Overview of your project management activities"})]}),t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsxs("div",{className:"text-center",children:[t.jsx(oa,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-blue-600"}),t.jsx("p",{className:"text-gray-600",children:"Loading dashboard data..."})]})})]});if(o)return t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),t.jsx("p",{className:"text-gray-600",children:"Overview of your project management activities"})]}),t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsxs("div",{className:"text-center",children:[t.jsx(zt,{className:"w-8 h-8 mx-auto mb-4 text-red-600"}),t.jsx("p",{className:"text-red-600 mb-4",children:o}),t.jsx(_,{onClick:()=>window.location.reload(),variant:"outline",children:"Try Again"})]})})]});const I=(n==null?void 0:n.stats)||{},F=[{title:"Total Projects",value:I.totalProjects||0,icon:Es,color:"text-blue-600",bg:"bg-blue-50",onClick:()=>m("projects")},{title:"Active Projects",value:I.activeProjects||0,icon:un,color:"text-green-600",bg:"bg-green-50",onClick:()=>m("projects",{statuses:["active"]})},{title:"Team Members",value:I.totalTeamMembers||0,icon:lt,color:"text-purple-600",bg:"bg-purple-50",onClick:()=>m("teams")},{title:"Categories",value:I.totalCategories||0,icon:Ht,color:"text-orange-600",bg:"bg-orange-50",onClick:()=>m("settings")}];return t.jsxs("div",{className:"relative min-h-screen p-6  space-y-4 bg-gradient-to-br from-amber-50 via-white to-blue-50",children:[t.jsx("div",{className:"space-y-4 pointer-events-none absolute inset-0 opacity-50 [background-image:radial-gradient(#cbd5e1_1px,transparent_1px)] [background-size:18px_18px]"}),t.jsx("div",{className:"relative",children:t.jsx("div",{className:"rounded-2xl bg-gradient-to-r from-indigo-600 via-blue-600 to-cyan-500 text-white p-6 shadow-lg",children:t.jsxs("div",{className:"flex items-center justify-between gap-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Dashboard"}),t.jsx("p",{className:"text-white/80",children:"Overview of your project management activities"})]}),t.jsxs("div",{className:"hidden md:flex items-center gap-6",children:[t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-xs uppercase tracking-wider text-white/70",children:"Projects"}),t.jsx("p",{className:"text-xl font-semibold",children:I.totalProjects||0})]}),t.jsx("div",{className:"h-10 w-px bg-white/20"}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-xs uppercase tracking-wider text-white/70",children:"Team"}),t.jsx("p",{className:"text-xl font-semibold",children:I.totalTeamMembers||0})]}),t.jsx("div",{className:"h-10 w-px bg-white/20"}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-xs uppercase tracking-wider text-white/70",children:"Categories"}),t.jsx("p",{className:"text-xl font-semibold",children:I.totalCategories||0})]})]})]})})}),t.jsx("div",{className:"relative grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:F.map(v=>t.jsx(q,{className:"rounded-2xl border-0 bg-white/80 backdrop-blur-sm hover:shadow-lg transition-all cursor-pointer hover:-translate-y-0.5",onClick:v.onClick,children:t.jsxs(Q,{className:"p-6",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:`p-2.5 rounded-xl ring-1 ring-inset ring-gray-200 ${v.bg}`,children:t.jsx(v.icon,{className:`w-6 h-6 ${v.color}`})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:v.title}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:v.value})]})]}),t.jsxs("div",{className:"mt-3 flex items-center text-sm text-gray-500",children:[t.jsx("span",{children:"Click to view details"}),t.jsx(ys,{className:"w-4 h-4 ml-1"})]})]})},v.title))}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsx(q,{className:"rounded-2xl border-0 bg-white/80 backdrop-blur-sm hover:shadow-lg transition-all cursor-pointer hover:-translate-y-0.5",onClick:()=>m("tasks",{dueToday:!0}),children:t.jsxs(Q,{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Due Today"}),t.jsx("p",{className:"text-2xl font-bold text-red-600",children:z.length})]}),t.jsx(At,{className:"w-8 h-8 text-red-500"})]}),t.jsxs("div",{className:"mt-2 flex items-center text-sm text-gray-500",children:[t.jsx("span",{children:"Click to view tasks"}),t.jsx(ys,{className:"w-4 h-4 ml-1"})]})]})}),t.jsx(q,{className:"rounded-2xl border-0 bg-white/80 backdrop-blur-sm hover:shadow-lg transition-all cursor-pointer hover:-translate-y-0.5",onClick:()=>m("tasks",{dueTomorrow:!0}),children:t.jsxs(Q,{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Due Tomorrow"}),t.jsx("p",{className:"text-2xl font-bold text-orange-600",children:g.length})]}),t.jsx(At,{className:"w-8 h-8 text-orange-500"})]}),t.jsxs("div",{className:"mt-2 flex items-center text-sm text-gray-500",children:[t.jsx("span",{children:"Click to view tasks"}),t.jsx(ys,{className:"w-4 h-4 ml-1"})]})]})}),t.jsx(q,{className:"rounded-2xl border-0 bg-white/80 backdrop-blur-sm hover:shadow-lg transition-all cursor-pointer hover:-translate-y-0.5",onClick:()=>m("tasks",{dueThisWeek:!0}),children:t.jsxs(Q,{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Due This Week"}),t.jsx("p",{className:"text-2xl font-bold text-blue-600",children:h.length})]}),t.jsx(At,{className:"w-8 h-8 text-blue-500"})]}),t.jsxs("div",{className:"mt-2 flex items-center text-sm text-gray-500",children:[t.jsx("span",{children:"Click to view tasks"}),t.jsx(ys,{className:"w-4 h-4 ml-1"})]})]})})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs(q,{className:"rounded-2xl border-0 bg-white/80 backdrop-blur-sm",children:[t.jsx(Te,{className:"pb-2",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(Pe,{children:"Recent Projects"}),t.jsx(_,{variant:"ghost",size:"sm",onClick:()=>m("projects"),children:"View All"})]})}),t.jsx(Q,{className:"space-y-3",children:x.slice(0,5).map(v=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-gray-100 hover:shadow-sm hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>m("projects"),children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:"font-medium text-gray-900",children:v.name}),t.jsx("p",{className:"text-sm text-gray-600",children:v.category_name||v.category}),t.jsx(Ut,{value:v.progress||0,className:"mt-2"})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(ee,{variant:v.status==="active"?"primary":v.status==="completed"?"success":v.status==="on-hold"?"warning":"default",children:v.status}),t.jsx(ys,{className:"w-4 h-4 text-gray-400"})]})]},v.id))})]}),t.jsxs(q,{className:"rounded-2xl border-0 bg-white/80 backdrop-blur-sm",children:[t.jsx(Te,{className:"pb-2",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(Pe,{children:"Team Workload"}),t.jsx(_,{variant:"ghost",size:"sm",onClick:()=>m("teams"),children:"View All"})]})}),t.jsx(Q,{className:"space-y-3",children:y.slice(0,6).map(v=>{var P;const w=d.filter(G=>G.assignees&&G.assignees.includes(v.id)),N=w.filter(G=>G.status==="completed").length,C=w.length>0?N/w.length*100:0;return t.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg border border-gray-100 bg-white hover:shadow-sm hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>j(v.id),children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm font-medium shadow-sm",children:v.name.charAt(0)}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:v.name}),t.jsx("p",{className:"text-sm text-gray-600",children:((P=v.skills)==null?void 0:P[0])||"No skills"})]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsxs("span",{className:"text-sm text-gray-600",children:[w.length," tasks"]}),t.jsx(Ut,{value:C,className:"w-20",showLabel:!1,variant:C>80?"warning":"default"}),t.jsx(ys,{className:"w-4 h-4 text-gray-400"})]})]},v.id)})})]})]}),t.jsxs(q,{className:"rounded-2xl border-0 bg-white/80 backdrop-blur-sm",children:[t.jsx(Te,{className:"pb-2",children:t.jsx(Pe,{children:"Quick Actions"})}),t.jsx(Q,{children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("button",{onClick:()=>r({type:"SET_SELECTED_VIEW",payload:"projects"}),className:"p-4 rounded-lg bg-white border border-gray-100 hover:shadow-md hover:-translate-y-0.5 transition-all",children:[t.jsx(Es,{className:"w-8 h-8 text-blue-500 mx-auto mb-2"}),t.jsx("p",{className:"text-sm font-medium text-gray-800",children:"Create New Project"})]}),t.jsxs("button",{onClick:()=>r({type:"SET_SELECTED_VIEW",payload:"teams"}),className:"p-4 rounded-lg bg-white border border-gray-100 hover:shadow-md hover:-translate-y-0.5 transition-all",children:[t.jsx(lt,{className:"w-8 h-8 text-green-600 mx-auto mb-2"}),t.jsx("p",{className:"text-sm font-medium text-gray-800",children:"Add Team Member"})]}),t.jsxs("button",{onClick:()=>r({type:"SET_SELECTED_VIEW",payload:"tasks"}),className:"p-4 rounded-lg bg-white border border-gray-100 hover:shadow-md hover:-translate-y-0.5 transition-all",children:[t.jsx(Ht,{className:"w-8 h-8 text-orange-500 mx-auto mb-2"}),t.jsx("p",{className:"text-sm font-medium text-gray-800",children:"Create Task"})]})]})})]})]})}function l0(e,s){const r=s.filter(l=>l.lessonId===e);if(r.length===0)return{progress:0,completedWeight:0,totalWeight:0};const a=r.reduce((l,i)=>l+i.progress,0)/r.length;return{progress:Math.round(a),completedWeight:a,totalWeight:100}}function i0(e,s){let r=0,n=0;return e.lessons.forEach(l=>{const i=l0(l.id,s);r+=i.progress*l.weight/100,n+=l.weight}),{progress:n>0?Math.round(r):0,completedWeight:r,totalWeight:n}}function o0(e,s){let r=0,n=0;return e.units.forEach(l=>{const i=i0(l,s);r+=i.progress*l.weight/100,n+=l.weight}),{progress:n>0?Math.round(r):0,completedWeight:r,totalWeight:n}}function c0(e,s){let r=0,n=0;return e.books.forEach(l=>{const i=o0(l,s);r+=i.progress*l.weight/100,n+=l.weight}),{progress:n>0?Math.round(r):0,completedWeight:r,totalWeight:n}}function lo(e,s){const r=s.filter(l=>l.stageId===e);if(r.length===0)return{progress:0,completedWeight:0,totalWeight:0};const a=r.reduce((l,i)=>l+i.progress,0)/r.length;return{progress:Math.round(a),completedWeight:a,totalWeight:100}}function d0(e,s){let r=0,n=0;return e.stages&&e.stages.length>0&&e.stages.forEach(l=>{const i=lo(l.id,s);r+=i.progress*l.weight/100,n+=l.weight}),e.grades&&e.grades.length>0&&e.grades.forEach(l=>{const i=c0(l,s);r+=i.progress*l.weight/100,n+=l.weight}),{progress:n>0?Math.round(r):0,completedWeight:r,totalWeight:n}}function zs(e){switch(e){case"not-started":return 0;case"in-progress":return 50;case"under-review":return 90;case"completed":return 100;case"blocked":return 25;default:return 0}}function Um({taskId:e,onBack:s}){zr();const{user:r}=Ss(),[n,a]=u.useState(null),[l,i]=u.useState(!0),[o,c]=u.useState(null),[m,x]=u.useState(!1),[y,d]=u.useState(null),[f,b]=u.useState(null),[S,z]=u.useState([]),[g,h]=u.useState([]),[j,I]=u.useState([]),[F,v]=u.useState([]),[w,N]=u.useState([]),[C,P]=u.useState([]),[G,B]=u.useState([]),[$,fe]=u.useState([]),[E,le]=u.useState(null),[se,H]=u.useState([]),[D,L]=u.useState([]),[re,X]=u.useState(!1),[ne,Z]=u.useState(!1),[k,ie]=u.useState(null),[pe,Ee]=u.useState("approved"),[Re,M]=u.useState(""),[J,oe]=u.useState(""),[de,ve]=u.useState([]),[be,Ce]=u.useState(!1),[Ke,te]=u.useState(null),[V,ge]=u.useState("green"),[Ie,Be]=u.useState(""),st=(r==null?void 0:r.id)!==void 0;u.useEffect(()=>{ct()},[e]);const ct=async()=>{try{i(!0),c(null);const A=await We.getById(e);if(console.log(" Task data received:",A),A.progress===0||A.progress===null){const ue=zs(A.status);console.log(" Calculating progress for status:",A.status,"->",ue),A.progress=ue}a(A);const[ke,xt,Pt,Jt,fr,yr,vr,p,xe,ae,je,Le]=await Promise.all([Ve.getById(A.project_id),Ot.getById(A.category_stage_id||A.stage_id),Fe.getMembers(),Fe.getTeams(),Ns.getAll(),Is.getAll(),Ms.getAll(),As.getAll(),dr.getAll(),We.getExtensions(e),We.getRemarks(e),br.getByTask(e)]);d(ke),b(xt),h(Pt.data||Pt),I(Jt.data||Jt),v(fr.data||fr),N(yr.data||yr),P(vr.data||vr),B(p.data||p),fe(xe.data||xe),H(ae.data||ae),L(je.data||je),ve(Le.data||Le);const De=Pt.data||Pt;console.log(" Task assignees data:",A.assignees),console.log(" All team members:",De);const $e=De.filter(ue=>Array.isArray(A.assignees)?A.assignees.some(T=>typeof T=="object"&&T.id?T.id===ue.id:T===ue.id):!1);if(console.log(" Filtered task assignees:",$e),z($e),A.grade_id||A.book_id||A.unit_id||A.lesson_id){const ue={};A.grade_id&&(ue.grade=await Is.getById(A.grade_id)),A.book_id&&(ue.book=await Ms.getById(A.book_id)),A.unit_id&&(ue.unit=await As.getById(A.unit_id)),A.lesson_id&&(ue.lesson=await dr.getById(A.lesson_id)),le(ue)}}catch(A){console.error("Failed to load task details:",A),c(A.message||"Failed to load task details")}finally{i(!1)}},rt=async A=>{try{const ke={...A,actual_hours:A.actual_hours!==void 0?A.actual_hours:n==null?void 0:n.actual_hours},xt=await We.update(e,ke);a(xt),x(!1),await ct()}catch(ke){console.error("Failed to update task:",ke),c(ke.message||"Failed to update task")}},dt=async()=>{if(k)try{const A={status:pe};pe==="approved"&&J?A.review_notes=`Approved until ${J}. ${Re}`:pe==="rejected"&&(A.review_notes=Re),await We.reviewExtension(k.id.toString(),A),await ct(),X(!1),ie(null),Ee("approved"),M(""),oe("")}catch(A){console.error("Failed to review extension:",A),c(A.message||"Failed to review extension")}},nt=(A,ke)=>{ie(A),Ee(ke),M(""),oe(ke==="approved"?A.requested_due_date:""),X(!0)},Ye=async A=>{try{await We.addRemark(e,A),await ct(),Z(!1)}catch(ke){console.error("Failed to add remark:",ke),c(ke.message||"Failed to add remark")}},Tt=async A=>{try{await We.deleteRemark(A.toString()),await ct()}catch(ke){console.error("Failed to delete remark:",ke),c(ke.message||"Failed to delete remark")}},os=A=>{te(A),ge("green"),Be(""),Ce(!0)},O=async()=>{if(!(!Ke||!Ie.trim()))try{await br.add({team_member_id:Ke.id,task_id:parseInt(e),type:V,reason:Ie.trim()});const A=await br.getByTask(e);ve(A.data||A),Ce(!1),te(null),ge("green"),Be("")}catch(A){console.error("Failed to add performance flag:",A)}},K=async A=>{try{await br.delete(A.toString());const ke=await br.getByTask(e);ve(ke.data||ke)}catch(ke){console.error("Failed to delete performance flag:",ke)}},Ae=A=>{switch(A){case"not-started":return"default";case"in-progress":return"primary";case"under-review":return"warning";case"completed":return"success";case"blocked":return"danger";default:return"default"}},Ze=A=>{switch(A){case"low":return"default";case"medium":return"primary";case"high":return"warning";case"urgent":return"danger";default:return"default"}},ut=A=>{switch(A){case"pending":return"warning";case"approved":return"success";case"rejected":return"danger";default:return"default"}},jt=A=>{switch(A){case"progress":return"success";case"issue":return"danger";case"update":return"primary";case"general":return"default";default:return"secondary"}},gr=()=>{if(!(n!=null&&n.end_date))return!1;const A=new Date;A.setHours(0,0,0,0);const ke=new Date(n.end_date);return ke.setHours(0,0,0,0),ke<A&&n.status!=="completed"};return l?t.jsx("div",{className:"p-6 space-y-6",children:t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Loading task details..."})]})})}):o||!n?t.jsx("div",{className:"p-6 space-y-6",children:t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsxs("div",{className:"text-center",children:[t.jsx(zt,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),t.jsx("p",{className:"text-red-600 mb-4",children:o||"Task not found"}),t.jsx(_,{onClick:s,children:"Go Back"})]})})}):t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs(_,{variant:"ghost",onClick:s,children:[t.jsx(sc,{className:"w-4 h-4 mr-2"}),"Back to Tasks"]}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:n.name}),t.jsxs("p",{className:"text-gray-600",children:[y==null?void 0:y.name,"  ",f==null?void 0:f.name]})]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(ee,{variant:Ae(n.status),children:n.status.replace("-"," ")}),t.jsx(ee,{variant:Ze(n.priority),children:n.priority}),gr()&&t.jsxs(ee,{variant:"danger",children:[t.jsx(zt,{className:"w-3 h-3 mr-1"}),"Overdue"]}),t.jsxs(_,{variant:"outline",size:"sm",onClick:()=>x(!0),children:[t.jsx(Ys,{className:"w-4 h-4 mr-2"}),"Edit Task"]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[t.jsxs(q,{children:[t.jsx(Te,{children:t.jsx(Pe,{children:"Task Overview"})}),t.jsxs(Q,{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Description"}),t.jsx("p",{className:"text-gray-700",children:n.description||"No description provided"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Progress"}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(Ut,{value:n.progress}),t.jsxs("p",{className:"text-sm text-gray-600",children:[n.progress,"% complete"]})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Time Tracking"}),t.jsxs("div",{className:"space-y-1",children:[t.jsxs("p",{className:"text-sm text-gray-600",children:["Estimated: ",n.estimated_hours||0,"h"]}),t.jsxs("p",{className:"text-sm text-gray-600",children:["Actual: ",n.actual_hours||0,"h"]})]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Timeline"}),t.jsxs("div",{className:"space-y-1",children:[t.jsxs("p",{className:"text-sm text-gray-600",children:[t.jsx(At,{className:"w-3 h-3 inline mr-1"}),"Start: ",n.start_date?new Date(n.start_date).toLocaleDateString():"Not set"]}),t.jsxs("p",{className:"text-sm text-gray-600",children:[t.jsx(At,{className:"w-3 h-3 inline mr-1"}),"Due: ",n.end_date?new Date(n.end_date).toLocaleDateString():"Not set"]})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Project Info"}),t.jsxs("div",{className:"space-y-1",children:[t.jsxs("p",{className:"text-sm text-gray-600",children:[t.jsx(ws,{className:"w-3 h-3 inline mr-1"}),"Project: ",(y==null?void 0:y.name)||"Unknown"]}),t.jsxs("p",{className:"text-sm text-gray-600",children:[t.jsx(ta,{className:"w-3 h-3 inline mr-1"}),"Stage: ",(f==null?void 0:f.name)||"Unknown"]})]})]})]})]})]}),st&&se.length>0&&t.jsxs(q,{children:[t.jsx(Te,{children:t.jsxs(Pe,{className:"flex items-center",children:[t.jsx(cr,{className:"w-5 h-5 mr-2"}),"Extension Requests (",se.filter(A=>A.status==="pending").length," pending)"]})}),t.jsx(Q,{children:t.jsx("div",{className:"space-y-4",children:se.map(A=>t.jsx("div",{className:"border rounded-lg p-4",children:t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[t.jsx(ee,{variant:ut(A.status),children:A.status}),t.jsxs("span",{className:"text-sm text-gray-600",children:["Requested by ",A.requester_name]})]}),t.jsx("p",{className:"text-sm text-gray-700 mb-2",children:A.reason}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-600",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Current Due:"})," ",new Date(A.current_due_date).toLocaleDateString()]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Requested Due:"})," ",new Date(A.requested_due_date).toLocaleDateString()]})]}),A.review_notes&&t.jsxs("div",{className:"mt-2 p-2 bg-gray-50 rounded text-sm",children:[t.jsx("span",{className:"font-medium",children:"Review Notes:"})," ",A.review_notes]})]}),A.status==="pending"&&t.jsxs("div",{className:"flex space-x-2",children:[t.jsxs(_,{size:"sm",variant:"outline",onClick:()=>nt(A,"approved"),className:"text-green-600 hover:text-green-700",children:[t.jsx(hl,{className:"w-4 h-4 mr-1"}),"Approve"]}),t.jsxs(_,{size:"sm",variant:"outline",onClick:()=>nt(A,"rejected"),className:"text-red-600 hover:text-red-700",children:[t.jsx(Wp,{className:"w-4 h-4 mr-1"}),"Reject"]})]})]})},A.id))})})]}),t.jsxs(q,{children:[t.jsx(Te,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs(Pe,{className:"flex items-center",children:[t.jsx(Fm,{className:"w-5 h-5 mr-2"}),"Remarks (",D.length,")"]}),st&&t.jsxs(_,{size:"sm",onClick:()=>Z(!0),children:[t.jsx(yt,{className:"w-4 h-4 mr-1"}),"Add Remark"]})]})}),t.jsx(Q,{children:D.length>0?t.jsx("div",{className:"space-y-4",children:D.map(A=>t.jsxs("div",{className:"border rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-start justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(ee,{variant:jt(A.remark_type),children:A.remark_type}),A.is_private&&t.jsx(ee,{variant:"secondary",children:"Private"})]}),st&&t.jsx(_,{size:"sm",variant:"ghost",onClick:()=>Tt(A.id),className:"text-red-600 hover:text-red-700",children:t.jsx(Ct,{className:"w-4 h-4"})})]}),t.jsx("p",{className:"text-gray-700 mb-2",children:A.remark}),t.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[t.jsxs("span",{children:["By ",A.user_name]}),t.jsx("span",{children:new Date(A.remark_date).toLocaleDateString()})]})]},A.id))}):t.jsx("p",{className:"text-gray-500 text-center py-4",children:"No remarks yet"})})]}),E&&t.jsxs(q,{children:[t.jsx(Te,{children:t.jsxs(Pe,{className:"flex items-center",children:[t.jsx(ea,{className:"w-5 h-5 mr-2"}),"Educational Hierarchy"]})}),t.jsx(Q,{children:t.jsxs("div",{className:"space-y-3",children:[E.grade&&t.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-purple-50 rounded-lg",children:[t.jsx(ea,{className:"w-5 h-5 text-purple-600"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:E.grade.name}),t.jsx("p",{className:"text-sm text-gray-600",children:"Grade"})]})]}),E.book&&t.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-blue-50 rounded-lg",children:[t.jsx(xl,{className:"w-5 h-5 text-blue-600"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:E.book.name}),t.jsx("p",{className:"text-sm text-gray-600",children:"Book"})]})]}),E.unit&&t.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-green-50 rounded-lg",children:[t.jsx(ta,{className:"w-5 h-5 text-green-600"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:E.unit.name}),t.jsx("p",{className:"text-sm text-gray-600",children:"Unit"})]})]}),E.lesson&&t.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-orange-50 rounded-lg",children:[t.jsx(rc,{className:"w-5 h-5 text-orange-600"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:E.lesson.name}),t.jsx("p",{className:"text-sm text-gray-600",children:"Lesson"})]})]})]})})]})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs(q,{children:[t.jsx(Te,{children:t.jsxs(Pe,{className:"flex items-center",children:[t.jsx(lt,{className:"w-5 h-5 mr-2"}),"Assignees (",S.length,")"]})}),t.jsx(Q,{children:S.length>0?t.jsx("div",{className:"space-y-3",children:S.map(A=>{var ke;return t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm font-medium",children:((ke=A.name)==null?void 0:ke.charAt(0))||"U"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:A.name}),t.jsx("p",{className:"text-sm text-gray-600",children:A.email})]})]}),st&&t.jsxs(_,{size:"sm",variant:"outline",onClick:()=>os(A),className:"text-gray-600 hover:text-gray-800",children:[t.jsx(ws,{className:"w-4 h-4 mr-1"}),"Flag"]})]},A.id)})}):t.jsx("p",{className:"text-gray-500 text-center py-4",children:"No assignees"})})]}),st&&de.length>0&&t.jsxs(q,{children:[t.jsx(Te,{children:t.jsxs(Pe,{className:"flex items-center",children:[t.jsx(ws,{className:"w-5 h-5 mr-2"}),"Performance Flags (",de.length,")"]})}),t.jsx(Q,{children:t.jsx("div",{className:"space-y-3",children:de.map(A=>t.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:`w-3 h-3 rounded-full ${A.type==="red"?"bg-red-500":A.type==="orange"?"bg-orange-500":A.type==="yellow"?"bg-yellow-500":"bg-green-500"}`}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:A.team_member_name}),t.jsx("p",{className:"text-sm text-gray-600",children:A.reason}),t.jsxs("p",{className:"text-xs text-gray-500",children:["Added by ",A.added_by_name," on ",new Date(A.created_at).toLocaleDateString()]})]})]}),t.jsx(_,{size:"sm",variant:"outline",onClick:()=>K(A.id),className:"text-red-600 hover:text-red-700",children:t.jsx(Ct,{className:"w-4 h-4"})})]},A.id))})})]}),t.jsxs(q,{children:[t.jsx(Te,{children:t.jsxs(Pe,{className:"flex items-center",children:[t.jsx(js,{className:"w-5 h-5 mr-2"}),"Statistics"]})}),t.jsxs(Q,{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Days Remaining"}),t.jsx("span",{className:"font-medium",children:n.end_date?Math.ceil((new Date(n.end_date).getTime()-new Date().getTime())/(1e3*60*60*24)):"No due date"})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Hours Remaining"}),t.jsxs("span",{className:"font-medium",children:[Math.max(0,(n.estimated_hours||0)-(n.actual_hours||0)),"h"]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Completion Rate"}),t.jsxs("span",{className:"font-medium",children:[n.progress,"%"]})]})]})]})]})]}),t.jsx(pl,{isOpen:m,onClose:()=>x(!1),onSubmit:rt,users:g,teams:j,skills:F,projects:y?[y]:[],stages:f?[f]:[],grades:w,books:C,units:G,lessons:$,editingTask:n}),t.jsx(ot,{isOpen:re,onClose:()=>X(!1),title:`${pe==="approved"?"Approve":"Reject"} Extension Request`,children:t.jsxs("div",{className:"space-y-4",children:[k&&t.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[t.jsx("h4",{className:"font-medium mb-2",children:"Extension Details"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Requested by:"})," ",k.requester_name]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Reason:"})," ",k.reason]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Current due date:"})," ",new Date(k.current_due_date).toLocaleDateString()]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Requested due date:"})," ",new Date(k.requested_due_date).toLocaleDateString()]})]})]}),pe==="approved"&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Approved Until Date"}),t.jsx("input",{type:"date",value:J,onChange:A=>oe(A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:k==null?void 0:k.current_due_date})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Review Notes"}),t.jsx("textarea",{value:Re,onChange:A=>M(A.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:`Add notes for ${pe==="approved"?"approval":"rejection"}...`})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx(_,{variant:"outline",onClick:()=>X(!1),children:"Cancel"}),t.jsxs(_,{variant:pe==="approved"?"primary":"danger",onClick:dt,disabled:pe==="approved"&&!J,children:[pe==="approved"?"Approve":"Reject"," Extension"]})]})]})}),t.jsx(ot,{isOpen:ne,onClose:()=>Z(!1),title:"Add Remark",children:t.jsx(u0,{onSubmit:Ye,onCancel:()=>Z(!1)})}),t.jsx(ot,{isOpen:be,onClose:()=>Ce(!1),title:"Add Performance Flag",children:t.jsxs("div",{className:"space-y-4",children:[Ke&&t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Flagging:"}),t.jsx("p",{className:"font-medium",children:Ke.name}),t.jsx("p",{className:"text-sm text-gray-500",children:Ke.email})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Flag Type"}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:["green","yellow","orange","red"].map(A=>t.jsx("button",{type:"button",onClick:()=>ge(A),className:`p-3 border rounded-lg text-left transition-colors ${V===A?A==="red"?"border-red-500 bg-red-50":A==="orange"?"border-orange-500 bg-orange-50":A==="yellow"?"border-yellow-500 bg-yellow-50":"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"}`,children:t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:`w-3 h-3 rounded-full ${A==="red"?"bg-red-500":A==="orange"?"bg-orange-500":A==="yellow"?"bg-yellow-500":"bg-green-500"}`}),t.jsx("span",{className:"capitalize font-medium",children:A})]})},A))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason"}),t.jsx("textarea",{value:Ie,onChange:A=>Be(A.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter the reason for this performance flag..."})]}),t.jsxs("div",{className:"flex justify-end space-x-3",children:[t.jsx(_,{variant:"outline",onClick:()=>Ce(!1),children:"Cancel"}),t.jsx(_,{variant:"primary",onClick:O,disabled:!Ie.trim(),children:"Add Flag"})]})]})})]})}function u0({onSubmit:e,onCancel:s}){const[r,n]=u.useState(""),[a,l]=u.useState(new Date().toISOString().split("T")[0]),[i,o]=u.useState("general"),[c,m]=u.useState(!1),x=y=>{y.preventDefault(),r.trim()&&e({remark:r.trim(),remark_date:a,remark_type:i,is_private:c})};return t.jsxs("form",{onSubmit:x,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Remark"}),t.jsx("textarea",{value:r,onChange:y=>n(y.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your remark...",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),t.jsx("input",{type:"date",value:a,onChange:y=>l(y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type"}),t.jsxs("select",{value:i,onChange:y=>o(y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"general",children:"General"}),t.jsx("option",{value:"progress",children:"Progress"}),t.jsx("option",{value:"issue",children:"Issue"}),t.jsx("option",{value:"update",children:"Update"}),t.jsx("option",{value:"other",children:"Other"})]})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",id:"isPrivate",checked:c,onChange:y=>m(y.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),t.jsx("label",{htmlFor:"isPrivate",className:"ml-2 block text-sm text-gray-700",children:"Private remark (only visible to admins)"})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx(_,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),t.jsx(_,{type:"submit",disabled:!r.trim(),children:"Add Remark"})]})]})}function m0(){var fr,yr,vr;const{state:e,dispatch:s}=zr(),{user:r}=Ss(),[n,a]=u.useState(!1),[l,i]=u.useState(null),[o,c]=u.useState(null),[m,x]=u.useState(""),[y,d]=u.useState(""),[f,b]=u.useState("all"),[S,z]=u.useState("all"),[g,h]=u.useState("all"),[j,I]=u.useState("all"),[F,v]=u.useState("all"),[w,N]=u.useState("all");u.useState(!1);const[C,P]=u.useState("created_at"),[G,B]=u.useState("desc"),[$,fe]=u.useState([]),[E,le]=u.useState([]),[se,H]=u.useState([]),[D,L]=u.useState([]),[re,X]=u.useState([]),[ne,Z]=u.useState([]),[k,ie]=u.useState([]),[pe,Ee]=u.useState([]),[Re,M]=u.useState([]),[J,oe]=u.useState([]),[de,ve]=u.useState(!0),[be,Ce]=u.useState(null),[Ke,te]=u.useState(!1),[V,ge]=u.useState(1),[Ie,Be]=u.useState(1),[st,ct]=u.useState(0),[rt,dt]=u.useState(20),[nt,Ye]=u.useState([]);u.useEffect(()=>{r&&(async()=>{var xe,ae,je,Le,De;ve(!0);try{const $e=f==="overdue"||S!=="all"||g!=="all"||y,ue={sort:C,order:G};$e?ue.all="true":(ue.page=V,ue.limit=rt),f!=="all"&&f!=="overdue"&&(ue.status=f),S!=="all"&&(ue.priority=S),j!=="all"&&(ue.project_id=j),F!=="all"?console.log(" Stage filter will be applied on frontend:",F):console.log(' No stage filter applied - selectedStage is "all"'),w!=="all"&&(ue.due_date=w),g!=="all"&&(ue.assignee_id=g),y&&(ue.search=y),console.log(" Sending filters to API:",ue),console.log(" Available stages:",D),console.log(" Selected stage:",F);const[T,he,ye,Ne,R,Se,W,we,ze,gt]=await Promise.all([We.getAll(ue),Fe.getMembers(),Fe.getTeams(),Ot.getAll(),Ve.getAll(),Ns.getAll(),Is.getAll(),Ms.getAll(),As.getAll(),dr.getAll()]);console.log(" Tasks response:",T),console.log(" Tasks data:",T==null?void 0:T.data),console.log(" Tasks stage info:",(xe=T==null?void 0:T.data)==null?void 0:xe.map(Ue=>({id:Ue.id,name:Ue.name,category_stage_id:Ue.category_stage_id,stage_name:Ue.stage_name}))),console.log(" Number of tasks returned:",((ae=T==null?void 0:T.data)==null?void 0:ae.length)||0),console.log(" Tasks stage info:",(je=T==null?void 0:T.data)==null?void 0:je.map(Ue=>({id:Ue.id,name:Ue.name,category_stage_id:Ue.category_stage_id,stage_name:Ue.stage_name}))),T&&T.data?$e?(fe(T.data),ct(T.data.length),Be(Math.ceil(T.data.length/rt))):(fe(T.data),ct(((Le=T.pagination)==null?void 0:Le.total)||0),Be(((De=T.pagination)==null?void 0:De.pages)||1)):(fe(T||[]),ct((T==null?void 0:T.length)||0),Be(1));try{const Ue=await We.getAll({all:"true"}),Et=Ue.data||Ue||[];console.log(" All tasks for statistics:",Et.length,Et),Ye(Et)}catch(Ue){console.warn("Failed to fetch all tasks for statistics:",Ue),$e&&T&&T.data?(console.log(" Using main fetch data for statistics"),Ye(T.data)):(console.log(" Using total count for statistics instead of all tasks"),Ye([]))}le(he.data||he),H(ye.data||ye),L(Ne.data||Ne),console.log(" Stages data received:",Ne),console.log(" Stages set to state:",Ne.data||Ne);const Oe=R&&R.data?R.data:Array.isArray(R)?R:[];X(Oe),Z(Se.data||Se),ie(W.data||W),Ee(we.data||we),M(ze.data||ze),oe(gt.data||gt),Ce(null)}catch($e){console.error("Failed to fetch task data:",$e),Ce($e.message||"Failed to load tasks")}finally{ve(!1)}})()},[r,C,G,f,S,j,F,w,g,y,V,rt]),u.useEffect(()=>{const p=setTimeout(()=>d(m),250);return()=>clearTimeout(p)},[m]),u.useEffect(()=>{if(console.log(" Stages state updated:",D),console.log(" Stages length:",D.length),console.log(" All stages with IDs:",D.map(p=>({id:p.id,name:p.name,idType:typeof p.id}))),F!=="all"&&D.length>0){const p=parseInt(F),xe=D.find(ae=>ae.id===p);console.log(" Stage validation:",{selectedStage:F,selectedStageId:p,stageExists:!!xe,stageDetails:xe})}},[D,F]),u.useEffect(()=>{e.filters&&Object.keys(e.filters).length>0&&(e.filters.statuses&&b(e.filters.statuses.length===1?e.filters.statuses[0]:"all"),e.filters.teamMembers&&h(e.filters.teamMembers.length===1?e.filters.teamMembers[0]:"all"),e.filters.priority&&z(e.filters.priority),e.filters.overdue&&te(!0),setTimeout(()=>{s({type:"SET_FILTERS",payload:{}})},0))},[e.filters,s]),u.useEffect(()=>{ge(1)},[f,S,j,F,w,g,y]);const Tt=p=>{const xe=p.end_date||p.endDate;if(!xe)return!1;const ae=new Date;ae.setHours(0,0,0,0);const je=new Date(xe);return je.setHours(0,0,0,0),je<ae&&p.status!=="completed"},os=p=>{const xe=p.end_date||p.endDate;if(!xe)return!1;const ae=new Date;ae.setHours(0,0,0,0);const je=new Date(xe);return je.setHours(0,0,0,0),je.getTime()===ae.getTime()&&p.status!=="completed"},O=p=>{const xe=p.end_date||p.endDate;if(!xe)return!1;const ae=new Date;ae.setDate(ae.getDate()+1),ae.setHours(0,0,0,0);const je=new Date(xe);return je.setHours(0,0,0,0),je.getTime()===ae.getTime()&&p.status!=="completed"},K=p=>{const xe=p.end_date||p.endDate;if(!xe)return!1;const ae=new Date;ae.setHours(0,0,0,0);const je=new Date;je.setDate(ae.getDate()+7),je.setHours(0,0,0,0);const Le=new Date(xe);return Le.setHours(0,0,0,0),Le>=ae&&Le<=je&&p.status!=="completed"},Ae=f==="overdue"||S!=="all"||F!=="all"||w!=="all"||g!=="all"||y;console.log(" Starting task filtering. Total tasks:",$.length),console.log(" Selected stage:",F),console.log(" Sample tasks with stage info:",$.slice(0,3).map(p=>({id:p.id,name:p.name,category_stage_id:p.category_stage_id,stage_name:p.stage_name})));const Ze=[...new Set($.map(p=>p.category_stage_id).filter(p=>p!=null))];console.log(" Unique stage IDs in tasks:",Ze),console.log(" Tasks by stage ID:",Ze.map(p=>({stageId:p,count:$.filter(xe=>xe.category_stage_id===p).length,tasks:$.filter(xe=>xe.category_stage_id===p).map(xe=>({id:xe.id,name:xe.name}))})));let ut=$.filter(p=>{var xe,ae,je,Le;if((xe=e.filters)!=null&&xe.overdue&&!Tt(p)||(ae=e.filters)!=null&&ae.dueToday&&!os(p)||(je=e.filters)!=null&&je.dueTomorrow&&!O(p)||(Le=e.filters)!=null&&Le.dueThisWeek&&!K(p)||Ke&&!Tt(p)||f==="overdue"&&!Tt(p))return!1;if(F!=="all"){const De=p.category_stage_id,$e=parseInt(F),ue=De?parseInt(De):null,T=parseInt(F);if(console.log(" Stage filter check:",{taskId:p.id,taskName:p.name,taskStageId:De,taskStageIdType:typeof De,taskStageIdNum:ue,selectedStageId:$e,selectedStageIdNum:T,matches:ue===T}),ue!==T)return!1}if(w!=="all"){const De=p.end_date||p.endDate;if(!De)return!1;const $e=new Date(De);switch($e.setHours(0,0,0,0),w){case"overdue":if(!Tt(p))return!1;break;case"today":if(!os(p))return!1;break;case"tomorrow":if(!O(p))return!1;break;case"this-week":if(!K(p))return!1;break;case"next-week":const ue=new Date;ue.setHours(0,0,0,0);const T=new Date;T.setDate(ue.getDate()+7),T.setHours(0,0,0,0);const he=new Date;if(he.setDate(ue.getDate()+14),he.setHours(0,0,0,0),$e<T||$e>he||p.status==="completed")return!1;break;case"no-due-date":if(De)return!1;break}}return!0});if(console.log(" Task filtering completed. Filtered tasks:",ut.length),console.log(" Filtered tasks sample:",ut.slice(0,3).map(p=>({id:p.id,name:p.name,category_stage_id:p.category_stage_id,stage_name:p.stage_name}))),F!=="all"){const p=parseInt(F),xe=((fr=D.find(ae=>ae.id===p))==null?void 0:fr.name)||"Unknown";console.log(" Stage filter summary:",{selectedStage:F,selectedStageId:p,selectedStageName:xe,totalTasks:$.length,filteredTasks:ut.length,expectedTasks:$.filter(ae=>(ae.category_stage_id?parseInt(ae.category_stage_id):null)===p).length})}if(Ae&&ut.length>0){const p=(V-1)*rt,xe=p+rt;ut=ut.slice(p,xe)}const jt=async p=>{var xe,ae,je,Le;try{if(l){let De="";if(p.gradeId){const he=k.find(ye=>ye.id===parseInt(p.gradeId||"0"));if(he&&(De=he.name,p.bookId)){const ye=pe.find(Ne=>Ne.id===parseInt(p.bookId||"0"));if(ye&&(De+=` > ${ye.name}`,p.unitId)){const Ne=Re.find(R=>R.id===parseInt(p.unitId||"0"));if(Ne&&(De+=` > ${Ne.name}`,p.lessonId)){const R=J.find(Se=>Se.id===parseInt(p.lessonId||"0"));R&&(De+=` > ${R.name}`)}}}}const $e={name:p.name,description:p.description,project_id:parseInt(p.projectId||"1"),category_stage_id:parseInt(p.stageId||""),status:p.status,priority:p.priority,start_date:p.startDate,end_date:p.endDate,estimated_hours:parseInt(String(p.estimatedHours||0)),actual_hours:parseInt(String(p.actualHours||0)),assignees:p.assignees||[],skills:p.skills,grade_id:p.gradeId?parseInt(p.gradeId):null,book_id:p.bookId?parseInt(p.bookId):null,unit_id:p.unitId?parseInt(p.unitId):null,lesson_id:p.lessonId?parseInt(p.lessonId):null,component_path:De};console.log(" Updating task with hierarchy in TaskManager:",{taskId:l.id,grade_id:$e.grade_id,book_id:$e.book_id,unit_id:$e.unit_id,lesson_id:$e.lesson_id,component_path:$e.component_path}),await We.update(l.id,$e);const ue={sort:C,order:G,page:V,limit:rt};f!=="all"&&(ue.status=f),S!=="all"&&(ue.priority=S),j!=="all"&&(ue.project_id=j),w!=="all"&&(ue.due_date=w),g!=="all"&&(ue.assignee_id=g),y&&(ue.search=y);const T=await We.getAll(ue);T&&T.data&&(fe(T.data),ct(((xe=T.pagination)==null?void 0:xe.total)||0),Be(((ae=T.pagination)==null?void 0:ae.pages)||1))}else{let De="";if(p.gradeId){const Ne=k.find(R=>R.id===parseInt(p.gradeId||"0"));if(Ne&&(De=Ne.name,p.bookId)){const R=pe.find(Se=>Se.id===parseInt(p.bookId||"0"));if(R&&(De+=` > ${R.name}`,p.unitId)){const Se=Re.find(W=>W.id===parseInt(p.unitId||"0"));if(Se&&(De+=` > ${Se.name}`,p.lessonId)){const W=J.find(we=>we.id===parseInt(p.lessonId||"0"));W&&(De+=` > ${W.name}`)}}}}const $e=(p.skills||[]).map(Ne=>{const R=ne.find(Se=>Se.name===Ne);return R?R.id:null}).filter(Ne=>Ne!==null),ue={name:p.name||"",description:p.description||"",project_id:parseInt(p.projectId||"1"),category_stage_id:parseInt(p.stageId||""),status:p.status||"not-started",priority:p.priority||"medium",start_date:p.startDate||new Date().toISOString().split("T")[0],end_date:p.endDate||new Date(Date.now()+7*24*60*60*1e3).toISOString().split("T")[0],estimated_hours:p.estimatedHours||8,assignees:p.assignees||[],skills:$e,component_path:De,grade_id:p.gradeId?parseInt(p.gradeId):null,book_id:p.bookId?parseInt(p.bookId):null,unit_id:p.unitId?parseInt(p.unitId):null,lesson_id:p.lessonId?parseInt(p.lessonId):null};console.log(" Creating task with data:",ue),console.log(" Educational hierarchy IDs being sent:",{grade_id:ue.grade_id,book_id:ue.book_id,unit_id:ue.unit_id,lesson_id:ue.lesson_id,component_path:ue.component_path});const T=await We.create(ue),he={sort:C,order:G,page:V,limit:rt};f!=="all"&&(he.status=f),S!=="all"&&(he.priority=S),j!=="all"&&(he.project_id=j),w!=="all"&&(he.due_date=w),g!=="all"&&(he.assignee_id=g),y&&(he.search=y);const ye=await We.getAll(he);ye&&ye.data&&(fe(ye.data),ct(((je=ye.pagination)==null?void 0:je.total)||0),Be(((Le=ye.pagination)==null?void 0:Le.pages)||1)),console.log(" Task created successfully:",T)}a(!1),i(null)}catch(De){console.error(" Failed to save task:",De),Ce("Failed to save task")}},gr=p=>{switch(p){case"not-started":return"default";case"in-progress":return"primary";case"under-review":return"warning";case"completed":return"success";case"blocked":return"danger";default:return"default"}},A=p=>{switch(p){case"low":return"default";case"medium":return"primary";case"high":return"warning";case"urgent":return"danger";default:return"default"}},ke=p=>{i(p),a(!0)},xt=p=>{C===p?B(G==="asc"?"desc":"asc"):(P(p),B("desc"))},Pt=async p=>{var xe,ae;if(confirm(`Are you sure you want to delete the task "${p.name}"? This action cannot be undone.`))try{Ce(null),await We.delete(p.id);const je={sort:C,order:G,page:V,limit:rt};f!=="all"&&(je.status=f),S!=="all"&&(je.priority=S),j!=="all"&&(je.project_id=j),w!=="all"&&(je.due_date=w),g!=="all"&&(je.assignee_id=g),y&&(je.search=y);const Le=await We.getAll(je);Le&&Le.data&&(fe(Le.data),ct(((xe=Le.pagination)==null?void 0:xe.total)||0),Be(((ae=Le.pagination)==null?void 0:ae.pages)||1)),console.log(" Task deleted successfully:",p.name)}catch(je){console.error(" Delete task error:",je),Ce(je.message||"Failed to delete task")}},Jt=(()=>{if(nt.length>0)return{total:st,notStarted:nt.filter(p=>p.status==="not-started").length,inProgress:nt.filter(p=>p.status==="in-progress").length,underReview:nt.filter(p=>p.status==="under-review").length,completed:nt.filter(p=>p.status==="completed").length,overdue:nt.filter(p=>{const xe=p.end_date||p.endDate;if(!xe||p.status==="completed")return!1;const ae=new Date;ae.setHours(0,0,0,0);const je=new Date(xe);return je.setHours(0,0,0,0),je<ae}).length};{const p={notStarted:$.filter(ae=>ae.status==="not-started").length,inProgress:$.filter(ae=>ae.status==="in-progress").length,underReview:$.filter(ae=>ae.status==="under-review").length,completed:$.filter(ae=>ae.status==="completed").length,overdue:$.filter(ae=>{const je=ae.end_date||ae.endDate;if(!je||ae.status==="completed")return!1;const Le=new Date;Le.setHours(0,0,0,0);const De=new Date(je);return De.setHours(0,0,0,0),De<Le}).length},xe=$.length;if(xe>0&&st>0){const ae=st/xe;return{total:st,notStarted:Math.round(p.notStarted*ae),inProgress:Math.round(p.inProgress*ae),underReview:Math.round(p.underReview*ae),completed:Math.round(p.completed*ae),overdue:Math.round(p.overdue*ae)}}else return{total:st,notStarted:0,inProgress:0,underReview:0,completed:0,overdue:0}}})();return console.log(" Task Statistics:",{totalTasks:st,allTasksLength:nt.length,taskStats:Jt,method:nt.length>0?"using all tasks":"using estimated statistics",sampleTasks:nt.length>0?nt.slice(0,3).map(p=>({id:p.id,name:p.name,status:p.status,end_date:p.end_date})):$.slice(0,3).map(p=>({id:p.id,name:p.name,status:p.status,end_date:p.end_date})),statusCounts:nt.length>0?nt.reduce((p,xe)=>(p[xe.status]=(p[xe.status]||0)+1,p),{}):$.reduce((p,xe)=>(p[xe.status]=(p[xe.status]||0)+1,p),{})}),o?t.jsx(Um,{taskId:o,onBack:()=>c(null)}):de?t.jsx("div",{className:"p-6 space-y-6",children:t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-lg font-medium text-gray-900 mb-2",children:"Loading tasks..."}),t.jsx("div",{className:"text-gray-500",children:"Please wait while we fetch your tasks"})]})})}):be?t.jsx("div",{className:"p-6 space-y-6",children:t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-lg font-medium text-red-600 mb-2",children:"Failed to load tasks"}),t.jsx("div",{className:"text-gray-500 mb-4",children:be}),t.jsx(_,{onClick:()=>window.location.reload(),children:"Retry"})]})})}):t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsx("div",{className:"relative",children:t.jsx("div",{className:"rounded-2xl bg-gradient-to-r from-indigo-600 via-blue-600 to-cyan-500 text-white p-6 shadow-lg",children:t.jsxs("div",{className:"flex items-center justify-between gap-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Task Management"}),t.jsx("p",{className:"text-white/80",children:"Track and manage all project tasks"}),!1]}),t.jsx(_,{icon:t.jsx(yt,{className:"w-4 h-4"}),onClick:()=>{i(null),a(!0)},children:"Create Task"})]})})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-6",children:[t.jsx(q,{children:t.jsx(Q,{className:"p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"p-2 rounded-lg bg-gray-50",children:t.jsx(Ht,{className:"w-6 h-6 text-gray-600"})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Tasks"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Jt.total})]})]})})}),t.jsx(q,{children:t.jsx(Q,{className:"p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"p-2 rounded-lg bg-blue-50",children:t.jsx(cr,{className:"w-6 h-6 text-blue-600"})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"In Progress"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Jt.inProgress})]})]})})}),t.jsx(q,{children:t.jsx(Q,{className:"p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"p-2 rounded-lg bg-green-50",children:t.jsx(Ht,{className:"w-6 h-6 text-green-600"})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Completed"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Jt.completed})]})]})})}),t.jsx(q,{children:t.jsx(Q,{className:"p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"p-2 rounded-lg bg-orange-50",children:t.jsx(cr,{className:"w-6 h-6 text-orange-600"})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Not Started"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Jt.notStarted})]})]})})}),t.jsx(q,{children:t.jsx(Q,{className:"p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"p-2 rounded-lg bg-yellow-50",children:t.jsx(cr,{className:"w-6 h-6 text-yellow-600"})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Under Review"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Jt.underReview})]})]})})}),t.jsx(q,{className:`${Ke?"ring-2 ring-red-300":""} cursor-pointer hover:shadow-md`,onClick:()=>te(p=>!p),children:t.jsx(Q,{className:"p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"p-2 rounded-lg bg-red-50",children:t.jsx(zt,{className:"w-6 h-6 text-red-600"})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Overdue"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Jt.overdue})]})]})})})]}),t.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx(Ml,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),t.jsx("input",{type:"text",placeholder:"Search tasks...",value:m,onChange:p=>x(p.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("select",{value:f,onChange:p=>b(p.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[t.jsx("option",{value:"all",children:"All Status"}),t.jsx("option",{value:"not-started",children:"Not Started"}),t.jsx("option",{value:"in-progress",children:"In Progress"}),t.jsx("option",{value:"under-review",children:"Under Review"}),t.jsx("option",{value:"completed",children:"Completed"}),t.jsx("option",{value:"blocked",children:"Blocked"}),t.jsx("option",{value:"overdue",children:"Overdue"})]}),t.jsxs("select",{value:S,onChange:p=>z(p.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[t.jsx("option",{value:"all",children:"All Priority"}),t.jsx("option",{value:"low",children:"Low"}),t.jsx("option",{value:"medium",children:"Medium"}),t.jsx("option",{value:"high",children:"High"}),t.jsx("option",{value:"urgent",children:"Urgent"})]}),t.jsxs("select",{value:j,onChange:p=>I(p.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[t.jsx("option",{value:"all",children:"All Projects"}),re.map(p=>t.jsx("option",{value:p.id,children:p.name},p.id))]}),t.jsxs("select",{value:F,onChange:p=>{console.log(" Stage selected:",p.target.value),console.log(" Stage selected type:",typeof p.target.value),console.log(" Stage selected value:",p.target.value),v(p.target.value)},className:`border rounded-lg px-3 py-2 text-sm ${F!=="all"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300"}`,children:[t.jsx("option",{value:"all",children:"All Stages"}),D.map(p=>{const xe=$.filter(ae=>ae.category_stage_id===p.id).length;return console.log(" Stage option:",{id:p.id,name:p.name,idType:typeof p.id,idValue:p.id,taskCount:xe}),t.jsxs("option",{value:p.id,children:[p.name," (",xe," tasks)"]},p.id)})]}),F!=="all"&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-xs text-blue-600 bg-blue-100 px-2 py-1 rounded",children:((yr=D.find(p=>p.id===parseInt(F)))==null?void 0:yr.name)||"Unknown Stage"}),t.jsx("button",{onClick:()=>v("all"),className:"px-2 py-1 text-xs bg-blue-100 text-blue-600 rounded hover:bg-blue-200",title:"Clear stage filter",children:"Clear Stage"})]}),F!=="all"&&ut.length===0&&t.jsx("div",{className:"col-span-full mt-2 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"text-yellow-600",children:t.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),t.jsx("div",{className:"ml-3",children:t.jsxs("p",{className:"text-sm text-yellow-800",children:[t.jsx("strong",{children:"No tasks found"}),' for stage "',((vr=D.find(p=>p.id===parseInt(F)))==null?void 0:vr.name)||"Unknown Stage",'". This stage currently has no assigned tasks.']})})]})}),t.jsxs("select",{value:w,onChange:p=>N(p.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[t.jsx("option",{value:"all",children:"All Due Dates"}),t.jsx("option",{value:"overdue",children:"Overdue"}),t.jsx("option",{value:"today",children:"Due Today"}),t.jsx("option",{value:"tomorrow",children:"Due Tomorrow"}),t.jsx("option",{value:"this-week",children:"Due This Week"}),t.jsx("option",{value:"next-week",children:"Due Next Week"}),t.jsx("option",{value:"no-due-date",children:"No Due Date"})]}),t.jsxs("select",{value:g,onChange:p=>h(p.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[t.jsx("option",{value:"all",children:"All Assignees"}),t.jsx("option",{value:"none",children:"No Assignees"}),E.map(p=>t.jsx("option",{value:p.id,children:p.name},p.id))]}),!1]}),!1]}),t.jsx(q,{children:t.jsxs(Q,{className:"p-0",children:[t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>xt("name"),children:t.jsxs("div",{className:"flex items-center",children:["Task Name",C==="name"&&t.jsx("span",{className:"ml-1 text-blue-600",children:G==="asc"?"":""})]})}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Project"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stage"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>xt("status"),children:t.jsxs("div",{className:"flex items-center",children:["Status",C==="status"&&t.jsx("span",{className:"ml-1 text-blue-600",children:G==="asc"?"":""})]})}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>xt("priority"),children:t.jsxs("div",{className:"flex items-center",children:["Priority",C==="priority"&&t.jsx("span",{className:"ml-1 text-blue-600",children:G==="asc"?"":""})]})}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>xt("assignees"),children:t.jsxs("div",{className:"flex items-center",children:["Assignees",C==="assignees"&&t.jsx("span",{className:"ml-1 text-blue-600",children:G==="asc"?"":""})]})}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>xt("end_date"),children:t.jsxs("div",{className:"flex items-center",children:["Due Date",C==="end_date"&&t.jsx("span",{className:"ml-1 text-blue-600",children:G==="asc"?"":""})]})}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>xt("progress"),children:t.jsxs("div",{className:"flex items-center",children:["Progress",C==="progress"&&t.jsx("span",{className:"ml-1 text-blue-600",children:G==="asc"?"":""})]})})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ut.map((p,xe)=>{const ae=E.filter(ue=>p.assignees&&p.assignees.includes(ue.id));se.filter(ue=>p.teamAssignees&&p.teamAssignees.includes(ue.id));const je=Tt(p),Le=p.project_id||p.projectId,De=re.find(ue=>{const T=typeof ue.id=="string"?parseInt(ue.id):ue.id,he=typeof Le=="string"?parseInt(Le):Le;return T===he}),$e=p.stage_name;return console.log(" Task stage info:",{taskId:p.id,taskName:p.name,category_stage_id:p.category_stage_id,stage_name:p.stage_name}),t.jsxs("tr",{className:`hover:bg-gray-50 ${je?"bg-red-50":""}`,children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{children:[t.jsxs("div",{className:"text-sm font-medium text-gray-900 flex items-center",children:[p.name,je&&t.jsx(zt,{className:"w-4 h-4 text-red-500 ml-2"})]}),t.jsxs("div",{className:"text-sm text-gray-500",children:[p.component_path&&t.jsxs("div",{className:"text-xs text-purple-600 mt-1 bg-purple-100 p-1 rounded-md inline-block",children:[" ",p.component_path]}),p.description&&t.jsx("div",{className:"mt-1",children:p.description})]})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"text-sm text-gray-900",children:De?t.jsx("div",{children:t.jsx("div",{className:"font-medium text-blue-600",children:De.name})}):t.jsx("span",{className:"text-gray-400",children:"Unknown Project"})})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"text-sm text-gray-900",children:$e?t.jsx("div",{className:"font-medium text-green-600",children:$e}):t.jsx("span",{className:"text-gray-400",children:"Unknown Stage"})})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx(ee,{variant:gr(p.status),children:p.status.replace("-"," ")})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx(ee,{variant:A(p.priority),children:p.priority})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"space-y-1",children:[ae.length>0&&t.jsxs("div",{className:"flex flex-wrap gap-1",children:[ae.slice(0,3).map(ue=>t.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:ue.name},ue.id)),ae.length>3&&t.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600",children:["+",ae.length-3," more"]})]}),ae.length===0&&t.jsx("span",{className:`text-xs ${g==="none"?"text-red-600 font-medium":"text-gray-400"}`,children:"No assignees"})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(At,{className:"w-4 h-4 mr-1 text-gray-400"}),p.end_date||p.endDate?new Date(p.end_date||p.endDate||"").toLocaleDateString():"No due date"]})}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2 mr-2",children:t.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${zs(p.status)}%`}})}),t.jsxs("span",{className:"text-sm text-gray-600",children:[zs(p.status),"%"]})]}),t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(_,{variant:"ghost",size:"sm",onClick:ue=>{ue.stopPropagation(),c(p.id)},title:"View Details",children:t.jsx(Hs,{className:"w-4 h-4"})}),t.jsx(_,{variant:"ghost",size:"sm",onClick:ue=>{ue.stopPropagation(),ke(p)},title:"Edit Task",children:t.jsx(Ys,{className:"w-4 h-4"})}),t.jsx(_,{variant:"ghost",size:"sm",onClick:ue=>{ue.stopPropagation(),Pt(p)},title:"Delete Task",className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:t.jsx(Ct,{className:"w-4 h-4"})})]})]})]},p.id)})})]})}),Ie>1&&t.jsx("div",{className:"px-6 py-4 border-t border-gray-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("div",{className:"flex items-center space-x-2",children:t.jsxs("span",{className:"text-sm text-gray-700",children:["Showing ",(V-1)*rt+1," to ",Math.min(V*rt,st)," of ",st," tasks"]})}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(_,{variant:"outline",size:"sm",onClick:()=>ge(1),disabled:V===1,children:"First"}),t.jsx(_,{variant:"outline",size:"sm",onClick:()=>ge(V-1),disabled:V===1,children:"Previous"}),t.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,Ie)},(p,xe)=>{let ae;return Ie<=5||V<=3?ae=xe+1:V>=Ie-2?ae=Ie-4+xe:ae=V-2+xe,t.jsx(_,{variant:V===ae?"primary":"outline",size:"sm",onClick:()=>ge(ae),className:"w-8 h-8 p-0",children:ae},ae)})}),t.jsx(_,{variant:"outline",size:"sm",onClick:()=>ge(V+1),disabled:V===Ie,children:"Next"}),t.jsx(_,{variant:"outline",size:"sm",onClick:()=>ge(Ie),disabled:V===Ie,children:"Last"})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("span",{className:"text-sm text-gray-700",children:"Page size:"}),t.jsxs("select",{value:rt,onChange:p=>{dt(Number(p.target.value)),ge(1)},className:"border border-gray-300 rounded px-2 py-1 text-sm",children:[t.jsx("option",{value:10,children:"10"}),t.jsx("option",{value:20,children:"20"}),t.jsx("option",{value:50,children:"50"}),t.jsx("option",{value:100,children:"100"})]})]})]})})]})}),t.jsx(pl,{isOpen:n,onClose:()=>{a(!1),i(null)},onSubmit:jt,users:E,teams:se,skills:ne,projects:re,stages:D,grades:k,books:pe,units:Re,lessons:J,editingTask:l})]})}function pl({isOpen:e,onClose:s,onSubmit:r,users:n,teams:a,skills:l,projects:i,stages:o,grades:c,books:m,units:x,lessons:y,editingTask:d}){const[f,b]=u.useState({name:"",description:"",projectId:"",stageId:"",gradeId:"",bookId:"",unitId:"",lessonId:"",status:"not-started",assignees:[],teamAssignees:[],skills:[],priority:"medium",estimatedHours:8,actualHours:0,startDate:new Date().toISOString().split("T")[0],endDate:new Date(Date.now()+6048e5).toISOString().split("T")[0]}),[S,z]=u.useState([]),[g,h]=u.useState(!1),j=async N=>{if(!N){z([]);return}try{h(!0);const C=i.find(P=>P.id===parseInt(N)||P.id===N);if(C&&C.category_id){const P=await Ot.getByCategory(C.category_id);z(P),console.log(" Fetched stages for project category:",P)}else z([])}catch(C){console.error(" Failed to fetch project stages:",C),z([])}finally{h(!1)}};u.useEffect(()=>{f.projectId?j(f.projectId):z([])},[f.projectId]),u.useEffect(()=>{if(d){const N=Array.isArray(d.skills)?d.skills.map(P=>typeof P=="object"&&P.name?P.name:typeof P=="string"?P:"").filter(P=>P!==""):[],C=Array.isArray(d.assignees)?d.assignees.map(P=>typeof P=="object"&&P.id?P.id.toString():P.toString()):[];console.log(" Editing task assignees:",d.assignees),console.log(" Converted assignee IDs:",C),console.log(" Setting form data for editing task:",d),b({name:d.name,description:d.description||"",projectId:d.project_id||d.projectId||"",stageId:d.stage_id||d.stageId||"",gradeId:(d.grade_id||d.gradeId||"").toString(),bookId:(d.book_id||d.bookId||"").toString(),unitId:(d.unit_id||d.unitId||"").toString(),lessonId:(d.lesson_id||d.lessonId||"").toString(),status:d.status,assignees:C,teamAssignees:Array.isArray(d.teamAssignees)?d.teamAssignees.map(P=>P.toString()):[],skills:N,priority:d.priority,estimatedHours:d.estimated_hours||d.estimatedHours||8,actualHours:d.actual_hours||d.actualHours||0,startDate:d.start_date||d.startDate?new Date(d.start_date||d.startDate||"").toISOString().split("T")[0]:new Date().toISOString().split("T")[0],endDate:d.end_date||d.endDate?new Date(d.end_date||d.endDate||"").toISOString().split("T")[0]:new Date(Date.now()+7*24*60*60*1e3).toISOString().split("T")[0]})}else b({name:"",description:"",projectId:"",stageId:"",gradeId:"",bookId:"",unitId:"",lessonId:"",status:"not-started",assignees:[],teamAssignees:[],skills:[],priority:"medium",estimatedHours:8,actualHours:0,startDate:new Date().toISOString().split("T")[0],endDate:new Date(Date.now()+7*24*60*60*1e3).toISOString().split("T")[0]})},[d,e]);const I=N=>{var B;N.preventDefault(),zs(f.status);let C="";const P=i.find($=>$.id===parseInt(f.projectId)||$.id===f.projectId);if(P&&f.gradeId){const $=(B=P.grades)==null?void 0:B.find(fe=>fe.id===f.gradeId);if($&&(C=$.name,f.bookId)){const fe=$.books.find(E=>E.id===f.bookId);if(fe&&(C+=` > ${fe.name}`,f.unitId)){const E=fe.units.find(le=>le.id===f.unitId);if(E&&(C+=` > ${E.name}`,f.lessonId)){const le=E.lessons.find(se=>se.id===f.lessonId);le&&(C+=` > ${le.name}`)}}}}const G=f.skills.map($=>{const fe=l.find(E=>E.name===$);return fe?fe.id:null}).filter($=>$!==null);r({...f,skills:G,componentPath:C,startDate:new Date(f.startDate),endDate:new Date(f.endDate)})},F=N=>{b(C=>({...C,assignees:C.assignees.includes(N)?C.assignees.filter(P=>P!==N):[...C.assignees,N]}))},v=i.find(N=>N.id===parseInt(f.projectId)||N.id===f.projectId),w=[];return v&&c.filter(C=>C.project_id===parseInt(v.id)).forEach(C=>{w.push({id:C.id,name:C.name,type:"grade",gradeId:C.id,bookId:null,unitId:null,lessonId:null}),m.filter(G=>G.grade_id===C.id).forEach(G=>{w.push({id:`${C.id}-${G.id}`,name:`${C.name} > ${G.name}`,type:"book",gradeId:C.id,bookId:G.id,unitId:null,lessonId:null}),x.filter($=>$.book_id===G.id).forEach($=>{w.push({id:`${C.id}-${G.id}-${$.id}`,name:`${C.name} > ${G.name} > ${$.name}`,type:"unit",gradeId:C.id,bookId:G.id,unitId:$.id,lessonId:null}),y.filter(E=>E.unit_id===$.id).forEach(E=>{w.push({id:`${C.id}-${G.id}-${$.id}-${E.id}`,name:`${C.name} > ${G.name} > ${$.name} > ${E.name}`,type:"lesson",gradeId:C.id,bookId:G.id,unitId:$.id,lessonId:E.id})})})})}),t.jsx(ot,{isOpen:e,onClose:s,title:d?`Edit Task: ${d.name}`:"Create New Task",size:"xl",children:t.jsxs("form",{onSubmit:I,className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Task Name"}),t.jsx("input",{type:"text",required:!0,value:f.name,onChange:N=>b({...f,name:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter task name"})]}),t.jsxs("div",{className:"col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),t.jsx("textarea",{value:f.description,onChange:N=>b({...f,description:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Task description"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project *"}),t.jsxs("select",{required:!0,value:f.projectId,onChange:N=>b({...f,projectId:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"",children:"Select Project"}),i.map(N=>t.jsx("option",{value:N.id,children:N.name},N.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stage *"}),t.jsxs("select",{required:!0,value:f.stageId,onChange:N=>b({...f,stageId:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:!f.projectId||g,children:[t.jsx("option",{value:"",children:g?"Loading stages...":"Select Stage"}),S.map(N=>t.jsxs("option",{value:N.id,children:[N.name," ",N.description&&`- ${N.description}`]},N.id))]}),!f.projectId&&t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Please select a project first to load available stages"}),f.projectId&&S.length===0&&!g&&t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"No stages found for this project's category"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Educational Hierarchy (Optional)"}),t.jsxs("select",{value:(()=>{const N=f.gradeId?parseInt(f.gradeId):null,C=f.bookId?parseInt(f.bookId):null,P=f.unitId?parseInt(f.unitId):null,G=f.lessonId?parseInt(f.lessonId):null;console.log(" Educational hierarchy matching:",{formData:{gradeId:N,bookId:C,unitId:P,lessonId:G},availableHierarchy:w.length});const B=w.find($=>$.gradeId===N&&$.bookId===C&&$.unitId===P&&$.lessonId===G);return console.log(" Matching hierarchy item:",B),B?B.id:""})(),onChange:N=>{const C=w.find(P=>P.id===N.target.value);b(C?{...f,gradeId:C.gradeId?C.gradeId.toString():"",bookId:C.bookId?C.bookId.toString():"",unitId:C.unitId?C.unitId.toString():"",lessonId:C.lessonId?C.lessonId.toString():""}:{...f,gradeId:"",bookId:"",unitId:"",lessonId:""})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:!f.projectId,children:[t.jsx("option",{value:"",children:"Project Level Task"}),w.map(N=>t.jsxs("option",{value:N.id,children:[N.name," (",N.type,")"]},N.id))]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select a specific educational hierarchy item to assign this task to a particular grade, book, unit, or lesson"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),t.jsxs("select",{value:f.status,onChange:N=>{const C=N.target.value;b({...f,status:C})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"not-started",children:"Not Started"}),t.jsx("option",{value:"in-progress",children:"In Progress"}),t.jsx("option",{value:"under-review",children:"Under Review"}),t.jsx("option",{value:"completed",children:"Completed"}),t.jsx("option",{value:"blocked",children:"Blocked"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),t.jsxs("select",{value:f.priority,onChange:N=>b({...f,priority:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"low",children:"Low"}),t.jsx("option",{value:"medium",children:"Medium"}),t.jsx("option",{value:"high",children:"High"}),t.jsx("option",{value:"urgent",children:"Urgent"})]})]}),t.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Progress (Auto-calculated)"}),t.jsxs("span",{className:"text-sm text-blue-600 font-semibold",children:[zs(f.status),"%"]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${zs(f.status)}%`}})}),t.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Progress is automatically calculated based on task status"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estimated Hours"}),t.jsx("input",{type:"number",min:"1",value:f.estimatedHours,onChange:N=>b({...f,estimatedHours:parseInt(N.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),d&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Actual Hours"}),t.jsx("input",{type:"number",min:"0",value:f.actualHours,onChange:N=>b({...f,actualHours:parseInt(N.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),t.jsx("input",{type:"date",value:f.startDate,onChange:N=>b({...f,startDate:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Due Date"}),t.jsx("input",{type:"date",value:f.endDate,onChange:N=>b({...f,endDate:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Individual Assignees"}),t.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-32 overflow-y-auto border border-gray-300 rounded-lg p-2",children:n&&n.length>0?n.map(N=>{const C=f.assignees.includes(N.id.toString());return t.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:C,onChange:()=>F(N.id.toString()),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:N.name})]},N.id)}):t.jsx("p",{className:"text-gray-500 text-sm",children:"No team members available"})})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx(_,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),t.jsx(_,{type:"submit",children:d?"Update Task":"Create Task"})]})]})})}function x0({isOpen:e,onClose:s,onSubmit:r,project:n,categories:a}){const[l,i]=u.useState({name:"",description:"",category_id:null,current_stage_id:null,status:"planning",start_date:"",end_date:""}),[o,c]=u.useState([]),[m,x]=u.useState(!1);u.useEffect(()=>{if(n&&e){const b=h=>{if(!h)return new Date().toISOString().split("T")[0];try{const j=new Date(h);return isNaN(j.getTime())?new Date().toISOString().split("T")[0]:j.toISOString().split("T")[0]}catch(j){return console.warn("Invalid date value:",h,j),new Date().toISOString().split("T")[0]}},S=n.start_date,z=n.end_date,g={name:n.name||"",description:n.description||"",category_id:n.category_id||null,current_stage_id:n.current_stage_id||null,status:n.status||"planning",start_date:b(S),end_date:b(z)};i(g),n.category_id&&y(n.category_id)}},[n,e]),u.useEffect(()=>{o.length>0&&n.current_stage_id&&o.find(S=>S.id===n.current_stage_id)&&i(S=>({...S,current_stage_id:n.current_stage_id||null}))},[o,n.current_stage_id]);const y=async b=>{x(!0);try{const S=await Ot.getByCategory(b);c(S),n.current_stage_id?S.find(g=>g.id===n.current_stage_id)||console.warn(" Current stage ID not found in loaded stages:",n.current_stage_id):console.log(" No current_stage_id set for this project")}catch(S){console.error("Failed to load stages for category:",S),c([])}finally{x(!1)}},d=async b=>{if(i(S=>({...S,category_id:b,current_stage_id:null})),b){x(!0);try{const S=await Ot.getByCategory(b);c(S)}catch(S){console.error("Failed to load stages for category:",S),c([])}finally{x(!1)}}else c([])},f=b=>{b.preventDefault(),r({...l,start_date:l.start_date,end_date:l.end_date,currentStageId:l.current_stage_id||void 0})};return t.jsx(ot,{isOpen:e,onClose:s,title:"Edit Project",size:"lg",children:t.jsxs("form",{onSubmit:f,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Name"}),t.jsx("input",{type:"text",required:!0,value:l.name,onChange:b=>i({...l,name:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter project name"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),t.jsx("textarea",{value:l.description,onChange:b=>i({...l,description:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Project description"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),t.jsxs("select",{value:l.category_id||"",onChange:b=>d(b.target.value?parseInt(b.target.value):null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"",children:"Select a category"}),a.map(b=>t.jsx("option",{value:b.id,children:b.name},b.id))]})]}),l.category_id&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Stage"}),m?t.jsxs("div",{className:"flex items-center justify-center py-4",children:[t.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),t.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Loading stages..."})]}):o.length>0?t.jsxs("select",{value:l.current_stage_id||"",onChange:b=>i({...l,current_stage_id:b.target.value?parseInt(b.target.value):null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"",children:"Select a stage"}),o.map(b=>t.jsxs("option",{value:b.id,children:[b.name," - ",b.description]},b.id))]}):t.jsx("div",{className:"text-sm text-gray-500 py-2",children:"No stages available for this category."})]}),t.jsx("div",{className:"grid grid-cols-2 gap-4",children:t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),t.jsxs("select",{value:l.status,onChange:b=>i({...l,status:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"planning",children:"Planning"}),t.jsx("option",{value:"active",children:"Active"}),t.jsx("option",{value:"on-hold",children:"On Hold"}),t.jsx("option",{value:"completed",children:"Completed"}),t.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),t.jsx("input",{type:"date",value:l.start_date,onChange:b=>i({...l,start_date:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),t.jsx("input",{type:"date",value:l.end_date,onChange:b=>i({...l,end_date:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx(_,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),t.jsx(_,{type:"submit",children:"Update Project"})]})]})})}const h0=({projectId:e})=>{const[s,r]=u.useState([]),[n,a]=u.useState([]),[l,i]=u.useState([]),[o,c]=u.useState([]),[m,x]=u.useState(!0),[y,d]=u.useState(null),[f,b]=u.useState(new Set);u.useState(new Set);const[S,z]=u.useState(!1),[g,h]=u.useState(!1),[j,I]=u.useState(!1),[F,v]=u.useState(!1),[w,N]=u.useState(null),[C,P]=u.useState(null),[G,B]=u.useState(null),[$,fe]=u.useState(null),[E,le]=u.useState(null),[se,H]=u.useState(null),[D,L]=u.useState(null);u.useEffect(()=>{re()},[e]);const re=async()=>{try{x(!0),d(null);const[te,V,ge,Ie]=await Promise.all([Is.getByProject(e),Ms.getAll(),As.getAll(),dr.getAll()]);r(te||[]);const Be=new Set((te||[]).map(Ye=>Ye.id)),st=(V||[]).filter(Ye=>Be.has(Ye.grade_id));a(st);const ct=new Set(st.map(Ye=>Ye.id)),rt=(ge||[]).filter(Ye=>ct.has(Ye.book_id));i(rt);const dt=new Set(rt.map(Ye=>Ye.id)),nt=(Ie||[]).filter(Ye=>dt.has(Ye.unit_id));c(nt)}catch(te){console.error("Error loading educational hierarchy:",te),d(te.message||"Failed to load educational hierarchy")}finally{x(!1)}},X=te=>{const V=new Set(f);V.has(te)?V.delete(te):V.add(te),b(V)},ne=async te=>{try{const V=await Is.create({...te,project_id:e});r([...s,V]),z(!1)}catch(V){d(V.message||"Failed to create grade")}},Z=async te=>{if(w)try{const V=await Is.update(w.id,te);r(s.map(ge=>ge.id===w.id?V:ge)),z(!1),N(null)}catch(V){d(V.message||"Failed to update grade")}},k=async te=>{if(confirm("Are you sure you want to delete this grade? This will also delete all associated books, units, and lessons."))try{await Is.delete(te),r(s.filter(V=>V.id!==te)),a(n.filter(V=>V.grade_id!==te)),i(l.filter(V=>{const ge=n.find(Ie=>Ie.id===V.book_id);return ge&&ge.grade_id!==te})),c(o.filter(V=>{const ge=l.find(Be=>Be.id===V.unit_id),Ie=n.find(Be=>Be.id===(ge==null?void 0:ge.book_id));return Ie&&Ie.grade_id!==te}))}catch(V){d(V.message||"Failed to delete grade")}},ie=async te=>{if(E)try{const V=await Ms.create({...te,grade_id:E});a([...n,V]),h(!1),le(null)}catch(V){d(V.message||"Failed to create book")}},pe=async te=>{if(C)try{const V=await Ms.update(C.id,te);a(n.map(ge=>ge.id===C.id?V:ge)),h(!1),P(null)}catch(V){d(V.message||"Failed to update book")}},Ee=async te=>{if(confirm("Are you sure you want to delete this book? This will also delete all associated units and lessons."))try{await Ms.delete(te),a(n.filter(V=>V.id!==te)),i(l.filter(V=>V.book_id!==te)),c(o.filter(V=>{const ge=l.find(Ie=>Ie.id===V.unit_id);return ge&&ge.book_id!==te}))}catch(V){d(V.message||"Failed to delete book")}},Re=async te=>{if(se)try{const V=await As.create({...te,book_id:se});i([...l,V]),I(!1),H(null)}catch(V){d(V.message||"Failed to create unit")}},M=async te=>{if(G)try{const V=await As.update(G.id,te);i(l.map(ge=>ge.id===G.id?V:ge)),I(!1),B(null)}catch(V){d(V.message||"Failed to update unit")}},J=async te=>{if(confirm("Are you sure you want to delete this unit? This will also delete all associated lessons."))try{await As.delete(te),i(l.filter(V=>V.id!==te)),c(o.filter(V=>V.unit_id!==te))}catch(V){d(V.message||"Failed to delete unit")}},oe=async te=>{if(D)try{const V=await dr.create({...te,unit_id:D});c([...o,V]),v(!1),L(null)}catch(V){d(V.message||"Failed to create lesson")}},de=async te=>{if($)try{const V=await dr.update($.id,te);c(o.map(ge=>ge.id===$.id?V:ge)),v(!1),fe(null)}catch(V){d(V.message||"Failed to update lesson")}},ve=te=>{H(te),B(null),I(!0)},be=te=>{L(te),fe(null),v(!0)},Ce=te=>{P(te),h(!0)},Ke=te=>{B(te),I(!0)};return m?t.jsx("div",{className:"flex items-center justify-center p-8",children:t.jsx("div",{className:"text-lg",children:"Loading educational hierarchy..."})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Educational Hierarchy"}),t.jsx("p",{className:"text-gray-600",children:"Manage grades, books, units, and lessons for this project"})]}),t.jsxs(_,{onClick:()=>{N(null),z(!0)},className:"flex items-center space-x-2",children:[t.jsx(yt,{className:"w-4 h-4"}),t.jsx("span",{children:"Add Grade"})]})]}),y&&t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:t.jsx("p",{className:"text-red-800",children:y})}),t.jsx("div",{className:"space-y-4",children:!s||s.length===0?t.jsx(q,{children:t.jsxs(Q,{className:"p-8 text-center",children:[t.jsx(ea,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Grades Yet"}),t.jsx("p",{className:"text-gray-600 mb-4",children:"Start by creating the first grade for this project."}),t.jsx(_,{onClick:()=>{N(null),z(!0)},children:"Create First Grade"})]})}):(s||[]).map(te=>t.jsx(p0,{grade:te,books:(n||[]).filter(V=>V.grade_id===te.id),units:l||[],lessons:o||[],expanded:f.has(te.id),onToggleExpansion:()=>X(te.id),onEdit:()=>{N(te),z(!0)},onDelete:()=>k(te.id),onAddBook:()=>{le(te.id),P(null),h(!0)},onAddUnit:ve,onEditBook:Ce,onDeleteBook:Ee,onAddLesson:be,onEditUnit:Ke,onDeleteUnit:J},te.id))}),t.jsx(y0,{isOpen:S,onClose:()=>{z(!1),N(null)},grade:w,onSubmit:w?Z:ne}),t.jsx(v0,{isOpen:g,onClose:()=>{h(!1),P(null),le(null)},book:C,onSubmit:C?pe:ie}),t.jsx(j0,{isOpen:j,onClose:()=>{I(!1),B(null),H(null)},unit:G,onSubmit:G?M:Re}),t.jsx(w0,{isOpen:F,onClose:()=>{v(!1),fe(null),L(null)},lesson:$,onSubmit:$?de:oe})]})},p0=({grade:e,books:s,units:r,lessons:n,expanded:a,onToggleExpansion:l,onEdit:i,onDelete:o,onAddBook:c,onAddUnit:m,onEditBook:x,onDeleteBook:y,onAddLesson:d,onEditUnit:f,onDeleteUnit:b})=>t.jsx(q,{children:t.jsxs(Q,{className:"p-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("button",{onClick:l,className:"p-1 hover:bg-gray-100 rounded",children:a?t.jsx(Il,{className:"w-4 h-4"}):t.jsx(ys,{className:"w-4 h-4"})}),t.jsx(ea,{className:"w-5 h-5 text-blue-600"}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-medium text-gray-900",children:e.name}),e.description&&t.jsx("p",{className:"text-sm text-gray-600",children:e.description})]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsxs(ee,{variant:"secondary",children:[typeof e.weight=="number"?e.weight.toFixed(1):"0.0","%"]}),t.jsxs(ee,{variant:"secondary",children:[(s||[]).length," books"]}),t.jsxs("div",{className:"flex space-x-1",children:[t.jsx(_,{size:"sm",variant:"outline",onClick:i,children:t.jsx(ca,{className:"w-3 h-3"})}),t.jsx(_,{size:"sm",variant:"outline",onClick:c,children:t.jsx(yt,{className:"w-3 h-3"})}),t.jsx(_,{size:"sm",variant:"outline",onClick:o,children:t.jsx(Ct,{className:"w-3 h-3"})})]})]})]}),a&&t.jsx("div",{className:"mt-4 border-t pt-4",children:!s||s.length===0?t.jsxs("div",{className:"text-center py-4",children:[t.jsx("p",{className:"text-gray-600 mb-2",children:"No books in this grade"}),t.jsx(_,{size:"sm",onClick:c,children:"Add Book"})]}):t.jsx("div",{className:"space-y-3",children:s.map(S=>t.jsx(g0,{book:S,units:(r||[]).filter(z=>z.book_id===S.id),lessons:n||[],onAddUnit:m,onEditBook:x,onDeleteBook:y,onAddLesson:d,onEditUnit:f,onDeleteUnit:b},S.id))})})]})}),g0=({book:e,units:s,lessons:r,onAddUnit:n,onEditBook:a,onDeleteBook:l,onAddLesson:i,onEditUnit:o,onDeleteUnit:c})=>{const[m,x]=u.useState(!1);return t.jsxs("div",{className:"ml-6 border-l-2 border-gray-200 pl-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("button",{onClick:()=>x(!m),className:"p-1 hover:bg-gray-100 rounded",children:m?t.jsx(Il,{className:"w-3 h-3"}):t.jsx(ys,{className:"w-3 h-3"})}),t.jsx(xl,{className:"w-4 h-4 text-green-600"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900",children:e.name}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(ee,{variant:"secondary",children:e.type}),t.jsxs(ee,{variant:"secondary",children:[typeof e.weight=="number"?e.weight.toFixed(1):"0.0","%"]})]})]})]}),t.jsxs("div",{className:"flex space-x-1",children:[t.jsx(_,{size:"sm",variant:"outline",onClick:()=>a(e),children:t.jsx(ca,{className:"w-3 h-3"})}),t.jsx(_,{size:"sm",variant:"outline",onClick:()=>n(e.id),children:t.jsx(yt,{className:"w-3 h-3"})}),t.jsx(_,{size:"sm",variant:"outline",onClick:()=>l(e.id),children:t.jsx(Ct,{className:"w-3 h-3"})})]})]}),m&&t.jsx("div",{className:"mt-3 space-y-2",children:!s||s.length===0?t.jsxs("div",{className:"text-center py-2",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"No units in this book"}),t.jsx(_,{size:"sm",onClick:()=>n(e.id),children:"Add Unit"})]}):s.map(y=>t.jsx(f0,{unit:y,lessons:(r||[]).filter(d=>d.unit_id===y.id),onAddLesson:i,onEditUnit:o,onDeleteUnit:c},y.id))})]})},f0=({unit:e,lessons:s,onAddLesson:r,onEditUnit:n,onDeleteUnit:a})=>{const[l,i]=u.useState(!1);return t.jsxs("div",{className:"ml-6 border-l-2 border-gray-200 pl-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("button",{onClick:()=>i(!l),className:"p-1 hover:bg-gray-100 rounded",children:l?t.jsx(Il,{className:"w-3 h-3"}):t.jsx(ys,{className:"w-3 h-3"})}),t.jsx(ta,{className:"w-4 h-4 text-purple-600"}),t.jsxs("div",{children:[t.jsx("h5",{className:"font-medium text-gray-900",children:e.name}),t.jsxs(ee,{variant:"secondary",children:[typeof e.weight=="number"?e.weight.toFixed(1):"0.0","%"]})]})]}),t.jsxs("div",{className:"flex space-x-1",children:[t.jsx(_,{size:"sm",variant:"outline",onClick:()=>n(e),children:t.jsx(ca,{className:"w-3 h-3"})}),t.jsx(_,{size:"sm",variant:"outline",onClick:()=>r(e.id),children:t.jsx(yt,{className:"w-3 h-3"})}),t.jsx(_,{size:"sm",variant:"outline",onClick:()=>a(e.id),children:t.jsx(Ct,{className:"w-3 h-3"})})]})]}),l&&t.jsx("div",{className:"mt-3 space-y-2",children:!s||s.length===0?t.jsxs("div",{className:"text-center py-2",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"No lessons in this unit"}),t.jsx(_,{size:"sm",onClick:()=>r(e.id),children:"Add Lesson"})]}):s.map(o=>t.jsxs("div",{className:"ml-6 flex items-center space-x-2",children:[t.jsx(rc,{className:"w-3 h-3 text-orange-600"}),t.jsx("span",{className:"text-sm text-gray-900",children:o.name}),t.jsxs(ee,{variant:"secondary",children:[typeof o.weight=="number"?o.weight.toFixed(1):"0.0","%"]})]},o.id))})]})},y0=({isOpen:e,onClose:s,grade:r,onSubmit:n})=>{const[a,l]=u.useState({name:(r==null?void 0:r.name)||"",description:(r==null?void 0:r.description)||"",weight:typeof(r==null?void 0:r.weight)=="number"?r.weight:0});u.useEffect(()=>{l(r?{name:r.name,description:r.description||"",weight:typeof r.weight=="number"?r.weight:0}:{name:"",description:"",weight:0})},[r]);const i=o=>{o.preventDefault(),n(a)};return t.jsx(ot,{isOpen:e,onClose:s,title:r?"Edit Grade":"Create Grade",children:t.jsxs("form",{onSubmit:i,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),t.jsx("input",{type:"text",value:a.name,onChange:o=>l({...a,name:o.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),t.jsx("textarea",{value:a.description,onChange:o=>l({...a,description:o.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:3})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Weight (%)"}),t.jsx("input",{type:"number",step:"0.1",min:"0",max:"100",value:a.weight,onChange:o=>l({...a,weight:parseFloat(o.target.value)||0}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),t.jsxs("div",{className:"flex justify-end space-x-2",children:[t.jsx(_,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),t.jsx(_,{type:"submit",children:r?"Update":"Create"})]})]})})},v0=({isOpen:e,onClose:s,book:r,onSubmit:n})=>{const[a,l]=u.useState({name:(r==null?void 0:r.name)||"",type:(r==null?void 0:r.type)||"student",description:(r==null?void 0:r.description)||"",weight:typeof(r==null?void 0:r.weight)=="number"?r.weight:0});u.useEffect(()=>{l(r?{name:r.name,type:r.type,description:r.description||"",weight:typeof r.weight=="number"?r.weight:0}:{name:"",type:"student",description:"",weight:0})},[r]);const i=o=>{o.preventDefault(),n(a)};return t.jsx(ot,{isOpen:e,onClose:s,title:r?"Edit Book":"Create Book",children:t.jsxs("form",{onSubmit:i,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),t.jsx("input",{type:"text",value:a.name,onChange:o=>l({...a,name:o.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Type"}),t.jsxs("select",{value:a.type,onChange:o=>l({...a,type:o.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[t.jsx("option",{value:"student",children:"Student Book"}),t.jsx("option",{value:"teacher",children:"Teacher Guide"}),t.jsx("option",{value:"practice",children:"Practice Book"}),t.jsx("option",{value:"digital",children:"Digital"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),t.jsx("textarea",{value:a.description,onChange:o=>l({...a,description:o.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:3})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Weight (%)"}),t.jsx("input",{type:"number",step:"0.1",min:"0",max:"100",value:a.weight,onChange:o=>l({...a,weight:parseFloat(o.target.value)||0}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),t.jsxs("div",{className:"flex justify-end space-x-2",children:[t.jsx(_,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),t.jsx(_,{type:"submit",children:r?"Update":"Create"})]})]})})},j0=({isOpen:e,onClose:s,unit:r,onSubmit:n})=>{const[a,l]=u.useState({name:(r==null?void 0:r.name)||"",description:(r==null?void 0:r.description)||"",weight:typeof(r==null?void 0:r.weight)=="number"?r.weight:0});u.useEffect(()=>{l(r?{name:r.name,description:r.description||"",weight:typeof r.weight=="number"?r.weight:0}:{name:"",description:"",weight:0})},[r]);const i=o=>{o.preventDefault(),n(a)};return t.jsx(ot,{isOpen:e,onClose:s,title:r?"Edit Unit":"Create Unit",children:t.jsxs("form",{onSubmit:i,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),t.jsx("input",{type:"text",value:a.name,onChange:o=>l({...a,name:o.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),t.jsx("textarea",{value:a.description,onChange:o=>l({...a,description:o.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:3})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Weight (%)"}),t.jsx("input",{type:"number",step:"0.1",min:"0",max:"100",value:a.weight,onChange:o=>l({...a,weight:parseFloat(o.target.value)||0}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),t.jsxs("div",{className:"flex justify-end space-x-2",children:[t.jsx(_,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),t.jsx(_,{type:"submit",children:r?"Update":"Create"})]})]})})},w0=({isOpen:e,onClose:s,lesson:r,onSubmit:n})=>{const[a,l]=u.useState({name:(r==null?void 0:r.name)||"",description:(r==null?void 0:r.description)||"",weight:typeof(r==null?void 0:r.weight)=="number"?r.weight:0});u.useEffect(()=>{l(r?{name:r.name,description:r.description||"",weight:typeof r.weight=="number"?r.weight:0}:{name:"",description:"",weight:0})},[r]);const i=o=>{o.preventDefault(),n(a)};return t.jsx(ot,{isOpen:e,onClose:s,title:r?"Edit Lesson":"Create Lesson",children:t.jsxs("form",{onSubmit:i,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),t.jsx("input",{type:"text",value:a.name,onChange:o=>l({...a,name:o.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),t.jsx("textarea",{value:a.description,onChange:o=>l({...a,description:o.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:3})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Weight (%)"}),t.jsx("input",{type:"number",step:"0.1",min:"0",max:"100",value:a.weight,onChange:o=>l({...a,weight:parseFloat(o.target.value)||0}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),t.jsxs("div",{className:"flex justify-end space-x-2",children:[t.jsx(_,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),t.jsx(_,{type:"submit",children:r?"Update":"Create"})]})]})})};function N0({project:e,onBack:s,onUpdate:r,categories:n}){const{state:a,dispatch:l}=zr(),[i,o]=u.useState("overview"),[c,m]=u.useState(!1),[x,y]=u.useState(!1),[d,f]=u.useState([]),[b,S]=u.useState([]),[z,g]=u.useState([]),[h,j]=u.useState([]),[I,F]=u.useState([]),[v,w]=u.useState([]),[N,C]=u.useState([]),[P,G]=u.useState([]),[B,$]=u.useState([]),[fe,E]=u.useState([]),[le,se]=u.useState([]),[H,D]=u.useState(!1),[L,re]=u.useState(!1),[X,ne]=u.useState(!1),[Z,k]=u.useState(e),[ie,pe]=u.useState([]),[Ee,Re]=u.useState([]),[M,J]=u.useState([]),[oe,de]=u.useState([]),[ve,be]=u.useState(null),[Ce,Ke]=u.useState(null),[te,V]=u.useState(!1),[ge,Ie]=u.useState(1),[Be,st]=u.useState(1),[ct,rt]=u.useState(0),[dt,nt]=u.useState(20),[Ye,Tt]=u.useState([]),[os,O]=u.useState(""),[K,Ae]=u.useState(""),[Ze,ut]=u.useState("all"),[jt,gr]=u.useState("all"),[A,ke]=u.useState("all"),xt=Z.progress!==void 0?{progress:Z.progress,completedWeight:Z.progress,totalWeight:100}:d0(Z,v),Pt=Z.current_stage_id?fe.find(T=>T.id===Z.current_stage_id):null;u.useEffect(()=>{(async()=>{ne(!0);try{const[he,ye,Ne,R,Se,W,we,ze,gt,Oe,Ue,Et,es,_s,jr]=await Promise.all([Ve.getById(e.id),Ve.getMembers(e.id),Ve.getTeams(e.id),Fe.getMembers(),Fe.getTeams(),Fe.getTeams(),We.getAll({all:"true"}),Ns.getAll(),Ve.getAll(),Ot.getAll(),er.getAll(),Is.getAll(),Ms.getAll(),As.getAll(),dr.getAll()]);k(he),f(ye.data||ye),S(Ne.data||Ne),g(R.data||R),j(Se.data||Se),F(W.data||W);const Fr=(we.data||we).filter(Bm=>Bm.project_id===Number(e.id));Tt(Fr),rt(Fr.length),st(Math.ceil(Fr.length/dt));const nc=(ge-1)*dt,Hm=nc+dt;w(Fr.slice(nc,Hm)),C(R.data||R),G(ze.data||ze),$(gt.data||gt),E(Oe.data||Oe),se(Ue.data||Ue),pe(Et.data||Et),Re(es.data||es),J(_s.data||_s),de(jr.data||jr)}catch(he){console.error("Failed to fetch project data:",he)}finally{ne(!1)}})()},[e.id]),u.useEffect(()=>{const T=setTimeout(()=>Ae(os),250);return()=>clearTimeout(T)},[os]),u.useEffect(()=>{if(Ye.length>0){let T=Ye.filter(R=>{if(K){const Se=K.toLowerCase();if(!R.name.toLowerCase().includes(Se)&&!R.description.toLowerCase().includes(Se))return!1}if(Ze!=="all"&&Ze!=="overdue"&&R.status!==Ze)return!1;if(Ze==="overdue"){const Se=R.end_date||R.endDate;if(!Se||R.status==="completed")return!1;const W=new Date;W.setHours(0,0,0,0);const we=new Date(Se);if(we.setHours(0,0,0,0),we>=W)return!1}if(jt!=="all"&&R.priority!==jt)return!1;if(A!=="all"){if(A==="none"){if(R.assignees&&R.assignees.length>0)return!1}else if(!R.assignees||!R.assignees.includes(parseInt(A)))return!1}return!0});rt(T.length),st(Math.ceil(T.length/dt));const he=Math.ceil(T.length/dt);ge>he&&he>0&&Ie(1);const ye=(ge-1)*dt,Ne=ye+dt;w(T.slice(ye,Ne))}},[ge,dt,Ye,K,Ze,jt,A]),u.useEffect(()=>{Ie(1)},[K,Ze,jt,A]);const Jt=async(T,he="member")=>{try{await Ve.addMember(e.id,{user_id:T,user_type:"team",role:he});const ye=await Ve.getMembers(e.id);f(ye.data||ye),D(!1)}catch(ye){console.error("Failed to add member:",ye)}},fr=async(T,he="member")=>{try{await Ve.addTeam(e.id,{team_id:T,role:he});const[ye,Ne]=await Promise.all([Ve.getMembers(e.id),Ve.getTeams(e.id)]);f(ye.data||ye),S(Ne.data||Ne),re(!1)}catch(ye){console.error("Failed to add team:",ye)}},yr=async T=>{try{await Ve.removeMember(e.id,T);const he=await Ve.getMembers(e.id);f(he.data||he)}catch(he){console.error("Failed to remove member:",he)}},vr=async T=>{try{await Ve.removeTeam(e.id,T);const[he,ye]=await Promise.all([Ve.getMembers(e.id),Ve.getTeams(e.id)]);f(he.data||he),S(ye.data||ye)}catch(he){console.error("Failed to remove team:",he)}},p=async T=>{try{const he=T.status?zs(T.status):0;let ye="";if(T.gradeId){const Oe=ie.find(Ue=>Ue.id===parseInt(T.gradeId||"0"));if(Oe&&(ye=Oe.name,T.bookId)){const Ue=Ee.find(Et=>Et.id===parseInt(T.bookId||"0"));if(Ue&&(ye+=` > ${Ue.name}`,T.unitId)){const Et=M.find(es=>es.id===parseInt(T.unitId||"0"));if(Et&&(ye+=` > ${Et.name}`,T.lessonId)){const es=oe.find(_s=>_s.id===parseInt(T.lessonId||"0"));es&&(ye+=` > ${es.name}`)}}}}const Ne=(T.skills||[]).map(Oe=>{const Ue=P.find(Et=>Et.name===Oe);return Ue?Ue.id:null}).filter(Oe=>Oe!==null),R={name:T.name||"",description:T.description||"",project_id:parseInt(e.id),category_stage_id:parseInt(T.stageId||""),status:T.status||"not-started",priority:T.priority||"medium",start_date:T.startDate||new Date().toISOString().split("T")[0],end_date:T.endDate||new Date(Date.now()+7*24*60*60*1e3).toISOString().split("T")[0],estimated_hours:T.estimatedHours||8,assignees:T.assignees||[],teamAssignees:T.teamAssignees||[],skills:Ne,component_path:ye,grade_id:T.gradeId?parseInt(T.gradeId):null,book_id:T.bookId?parseInt(T.bookId):null,unit_id:T.unitId?parseInt(T.unitId):null,lesson_id:T.lessonId?parseInt(T.lessonId):null},Se=await We.create(R),W=await We.getAll({all:"true"}),ze=(W.data||W).filter(Oe=>Oe.project_id===Number(e.id));Tt(ze);const gt=await Ve.getById(e.id);k(gt),console.log(" Task created successfully from ProjectDetails:",Se),m(!1)}catch(he){console.error(" Failed to create task from ProjectDetails:",he)}},xe=async T=>{try{ne(!0);const he=await Ve.update(e.id,T),ye={...e,...he,start_date:T.start_date||e.start_date,end_date:T.end_date||e.end_date};k(ye),r&&r(ye),l({type:"UPDATE_PROJECT",payload:ye}),y(!1),console.log(" Project updated successfully:",he)}catch(he){console.error(" Failed to update project:",he)}finally{ne(!1)}},ae=[{key:"overview",label:"Overview",icon:js},{key:"educational-hierarchy",label:"Educational Hierarchy",icon:ea},{key:"tasks",label:"Tasks",icon:Ht},{key:"timeline",label:"Timeline",icon:At},{key:"team",label:"Team",icon:lt}],je=()=>t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[t.jsx(q,{children:t.jsx(Q,{className:"p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"p-2 rounded-lg bg-blue-50",children:t.jsx(js,{className:"w-6 h-6 text-blue-600"})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Progress"}),t.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[xt.progress,"%"]})]})]})})}),t.jsx(q,{children:t.jsx(Q,{className:"p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"p-2 rounded-lg bg-green-50",children:t.jsx(Ht,{className:"w-6 h-6 text-green-600"})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Tasks"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:ct})]})]})})}),t.jsx(q,{children:t.jsx(Q,{className:"p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"p-2 rounded-lg bg-purple-50",children:t.jsx(lt,{className:"w-6 h-6 text-purple-600"})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Team"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d.length})]})]})})}),t.jsx(q,{children:t.jsx(Q,{className:"p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"p-2 rounded-lg bg-orange-50",children:t.jsx(cr,{className:"w-6 h-6 text-orange-600"})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Days Left"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Math.ceil((new Date(e.end_date||e.endDate||"").getTime()-new Date().getTime())/(1e3*60*60*24))})]})]})})})]}),t.jsxs(q,{children:[t.jsx(Te,{children:t.jsxs(Pe,{className:"flex items-center",children:[t.jsx(ws,{className:"w-5 h-5 mr-2 text-blue-600"}),"Current Stage"]})}),t.jsx(Q,{children:Pt?t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-gray-900",children:Pt.name}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:Pt.description}),t.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[t.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[t.jsx(js,{className:"w-4 h-4 mr-1"}),"Order: ",Pt.order_index||Pt.template_order||"N/A"]}),Pt.is_active!==void 0&&t.jsx(ee,{variant:Pt.is_active?"success":"default",size:"sm",children:Pt.is_active?"Active":"Inactive"})]})]}),t.jsx("div",{className:"text-right",children:t.jsx(ee,{variant:"primary",children:"Current"})})]}):t.jsxs("div",{className:"text-center py-4",children:[t.jsx(ws,{className:"w-8 h-8 text-gray-300 mx-auto mb-2"}),t.jsx("p",{className:"text-gray-500",children:"No current stage set"}),t.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Edit the project to select a stage"})]})})]}),t.jsxs(q,{children:[t.jsx(Te,{children:t.jsx(Pe,{children:"Project Description"})}),t.jsxs(Q,{children:[t.jsx("p",{className:"text-gray-700",children:e.description}),t.jsxs("div",{className:"mt-4 flex items-center space-x-4",children:[t.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[t.jsx(At,{className:"w-4 h-4 mr-1"}),"Start: ",new Date(e.start_date||e.startDate||"").toLocaleDateString()]}),t.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[t.jsx(At,{className:"w-4 h-4 mr-1"}),"End: ",new Date(e.end_date||e.endDate||"").toLocaleDateString()]}),t.jsx(ee,{variant:e.status==="active"?"primary":e.status==="completed"?"success":e.status==="on-hold"?"warning":"default",children:e.status})]})]})]})]}),Le=()=>{var Ne;const T=[];T.push({id:"project-start",type:"milestone",title:"Project Start",date:new Date(e.start_date||e.startDate||""),status:"completed",description:"Project officially started"}),(Ne=e.stages)==null||Ne.forEach(R=>{const Se=lo(R.id,v);T.push({id:R.id,type:"stage",title:R.name,date:new Date(R.startDate),endDate:new Date(R.endDate),status:R.status,progress:Se.progress,description:R.description,weight:R.weight})}),v.filter(R=>R.priority==="high"||R.priority==="urgent").forEach(R=>{T.push({id:R.id,type:"task",title:R.name,date:new Date(R.startDate),endDate:new Date(R.endDate),status:R.status,progress:R.progress,description:R.description,priority:R.priority,assignees:R.assignees})}),T.push({id:"project-end",type:"milestone",title:"Project Completion",date:new Date(e.end_date||e.endDate||""),status:e.status==="completed"?"completed":"pending",description:"Planned project completion date"}),T.sort((R,Se)=>R.date.getTime()-Se.date.getTime());const he=(R,Se)=>{if(Se==="milestone")return R==="completed"?"bg-green-500":"bg-gray-400";switch(R){case"completed":return"bg-green-500";case"in-progress":return"bg-blue-500";case"under-review":return"bg-yellow-500";case"not-started":return"bg-gray-400";case"blocked":return"bg-red-500";default:return"bg-gray-400"}},ye=R=>{const Se=R.endDate||R.date;if(!Se)return!1;const W=new Date;W.setHours(0,0,0,0);const we=new Date(Se);return we.setHours(0,0,0,0),we<W&&R.status!=="completed"&&R.type!=="milestone"};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Project Timeline"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Track project milestones, stages, and key tasks"})]}),t.jsx("div",{className:"flex items-center space-x-2",children:t.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-2"}),t.jsx("span",{children:"Completed"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full mr-2"}),t.jsx("span",{children:"In Progress"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-3 h-3 bg-gray-400 rounded-full mr-2"}),t.jsx("span",{children:"Not Started"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full mr-2"}),t.jsx("span",{children:"Overdue"})]})]})})]}),t.jsx(q,{children:t.jsx(Q,{className:"p-6",children:t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute left-6 top-0 bottom-0 w-0.5 bg-gray-200"}),t.jsx("div",{className:"space-y-8",children:T.map((R,Se)=>t.jsxs("div",{className:"relative flex items-start",children:[t.jsxs("div",{className:`relative z-10 w-12 h-12 rounded-full ${he(R.status,R.type)} flex items-center justify-center`,children:[R.type==="milestone"&&t.jsx(ws,{className:"w-5 h-5 text-white"}),R.type==="stage"&&t.jsx(js,{className:"w-5 h-5 text-white"}),R.type==="task"&&t.jsx(Ht,{className:"w-5 h-5 text-white"})]}),t.jsx("div",{className:"ml-6 flex-1",children:t.jsx("div",{className:`p-4 rounded-lg border-2 ${ye(R)?"border-red-200 bg-red-50":"border-gray-200 bg-white"}`,children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("h4",{className:"font-semibold text-gray-900",children:R.title}),R.type==="stage"&&R.weight&&t.jsxs(ee,{variant:"secondary",size:"sm",children:[R.weight,"% weight"]}),R.priority&&t.jsx(ee,{variant:R.priority==="urgent"?"danger":R.priority==="high"?"warning":"primary",size:"sm",children:R.priority}),ye(R)&&t.jsxs(ee,{variant:"danger",size:"sm",children:[t.jsx(zt,{className:"w-3 h-3 mr-1"}),"Overdue"]})]}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:R.description}),t.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-500",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(At,{className:"w-4 h-4 mr-1"}),R.date.toLocaleDateString(),R.endDate&&` - ${R.endDate.toLocaleDateString()}`]}),R.assignees&&R.assignees.length>0&&t.jsxs("div",{className:"flex items-center",children:[t.jsx(lt,{className:"w-4 h-4 mr-1"}),R.assignees.length," assigned"]})]}),(R.type==="stage"||R.type==="task")&&t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[t.jsx("span",{className:"text-gray-600",children:"Progress"}),t.jsxs("span",{className:"font-medium",children:[R.progress,"%"]})]}),t.jsx(Ut,{value:R.progress,showLabel:!1})]})]}),t.jsx(ee,{variant:R.status==="completed"?"success":R.status==="in-progress"?"primary":R.status==="under-review"?"warning":R.status==="blocked"?"danger":"default",children:R.status.replace("-"," ")})]})})})]},R.id))})]})})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsx(q,{children:t.jsx(Q,{className:"p-6",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-green-600",children:T.filter(R=>R.status==="completed").length}),t.jsx("div",{className:"text-sm text-gray-600",children:"Completed Items"})]})})}),t.jsx(q,{children:t.jsx(Q,{className:"p-6",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-blue-600",children:T.filter(R=>R.status==="in-progress").length}),t.jsx("div",{className:"text-sm text-gray-600",children:"In Progress"})]})})}),t.jsx(q,{children:t.jsx(Q,{className:"p-6",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-red-600",children:T.filter(R=>ye(R)).length}),t.jsx("div",{className:"text-sm text-gray-600",children:"Overdue Items"})]})})})]})]})},De=()=>t.jsx("div",{className:"space-y-6",children:e.stages&&e.stages.length>0?e.stages.map(T=>{const he=v.filter(Ne=>Ne.stageId===T.id),ye=lo(T.id,v);return t.jsxs(q,{children:[t.jsx(Te,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs(Pe,{className:"flex items-center",children:["Stage ",T.order,": ",T.name,t.jsxs(ee,{variant:"secondary",size:"sm",className:"ml-2",children:[T.weight,"% weight"]})]}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:T.description})]}),t.jsx(ee,{variant:T.status==="completed"?"success":T.status==="in-progress"?"primary":T.status==="under-review"?"warning":"default",children:T.status.replace("-"," ")})]})}),t.jsxs(Q,{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[t.jsx(At,{className:"w-4 h-4 mr-2"}),"Start: ",new Date(T.startDate).toLocaleDateString()]}),t.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[t.jsx(At,{className:"w-4 h-4 mr-2"}),"End: ",new Date(T.endDate).toLocaleDateString()]}),t.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[t.jsx(Ht,{className:"w-4 h-4 mr-2"}),he.length," tasks"]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600",children:"Progress"}),t.jsxs("span",{className:"font-medium",children:[ye.progress,"%"]})]}),t.jsx(Ut,{value:ye.progress})]}),he.length>0&&t.jsxs("div",{className:"space-y-2",children:[t.jsx("h5",{className:"font-medium text-gray-900",children:"Recent Tasks:"}),he.slice(0,3).map(Ne=>t.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[t.jsx("span",{className:"text-sm text-gray-700",children:Ne.name}),t.jsx(ee,{variant:Ne.status==="completed"?"success":Ne.status==="in-progress"?"primary":Ne.status==="under-review"?"warning":Ne.status==="blocked"?"danger":"default",size:"sm",children:Ne.status.replace("-"," ")})]},Ne.id)),he.length>3&&t.jsxs("p",{className:"text-xs text-gray-500",children:["+",he.length-3," more tasks"]})]})]})]},T.id)}):t.jsx(q,{children:t.jsxs(Q,{className:"p-8 text-center",children:[t.jsx(ws,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Stages Defined"}),t.jsx("p",{className:"text-gray-600",children:"This project doesn't have any stages configured yet."})]})})}),$e=()=>{if(ve)return t.jsx(Um,{taskId:ve,onBack:()=>be(null)});const T=W=>{Ke(W),V(!0)},he=async W=>{try{if(Ce){let we="";if(W.gradeId){const es=ie.find(_s=>_s.id===parseInt(W.gradeId||"0"));if(es&&(we=es.name,W.bookId)){const _s=Ee.find(jr=>jr.id===parseInt(W.bookId||"0"));if(_s&&(we+=` > ${_s.name}`,W.unitId)){const jr=M.find(pn=>pn.id===parseInt(W.unitId||"0"));if(jr&&(we+=` > ${jr.name}`,W.lessonId)){const pn=oe.find(Fr=>Fr.id===parseInt(W.lessonId||"0"));pn&&(we+=` > ${pn.name}`)}}}}const ze={name:W.name,description:W.description,project_id:parseInt(W.projectId||"1"),category_stage_id:parseInt(W.stageId||""),status:W.status,priority:W.priority,start_date:W.startDate,end_date:W.endDate,estimated_hours:parseInt(String(W.estimatedHours||0)),actual_hours:parseInt(String(W.actualHours||0)),assignees:W.assignees||[],skills:W.skills,grade_id:W.gradeId?parseInt(W.gradeId):null,book_id:W.bookId?parseInt(W.bookId):null,unit_id:W.unitId?parseInt(W.unitId):null,lesson_id:W.lessonId?parseInt(W.lessonId):null,component_path:we};console.log(" Updating task with hierarchy:",{taskId:Ce.id,grade_id:ze.grade_id,book_id:ze.book_id,unit_id:ze.unit_id,lesson_id:ze.lesson_id,component_path:ze.component_path}),await We.update(Ce.id,ze);const gt=await We.getAll({all:"true"}),Ue=(gt.data||gt).filter(es=>es.project_id===Number(e.id));Tt(Ue);const Et=await Ve.getById(e.id);k(Et)}V(!1),Ke(null)}catch(we){console.error(" Failed to update task:",we)}},ye=async W=>{if(confirm(`Are you sure you want to delete the task "${W.name}"? This action cannot be undone.`))try{await We.delete(W.id);const we=await We.getAll({all:"true"}),gt=(we.data||we).filter(Ue=>Ue.project_id===Number(e.id));Tt(gt);const Oe=await Ve.getById(e.id);k(Oe),console.log(" Task deleted successfully:",W.name)}catch(we){console.error(" Delete task error:",we)}},Ne=W=>{switch(W){case"not-started":return"default";case"in-progress":return"primary";case"under-review":return"warning";case"completed":return"success";case"blocked":return"danger";default:return"default"}},R=W=>{switch(W){case"low":return"default";case"medium":return"primary";case"high":return"warning";case"urgent":return"danger";default:return"default"}},Se=W=>{const we=W.end_date||W.endDate;if(!we)return!1;const ze=new Date;ze.setHours(0,0,0,0);const gt=new Date(we);return gt.setHours(0,0,0,0),gt<ze&&W.status!=="completed"};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Project Tasks"}),t.jsx(_,{icon:t.jsx(yt,{className:"w-4 h-4"}),onClick:()=>m(!0),children:"Add Task"})]}),t.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:t.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx(Ml,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),t.jsx("input",{type:"text",placeholder:"Search tasks...",value:os,onChange:W=>O(W.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("select",{value:Ze,onChange:W=>ut(W.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[t.jsx("option",{value:"all",children:"All Status"}),t.jsx("option",{value:"not-started",children:"Not Started"}),t.jsx("option",{value:"in-progress",children:"In Progress"}),t.jsx("option",{value:"under-review",children:"Under Review"}),t.jsx("option",{value:"completed",children:"Completed"}),t.jsx("option",{value:"blocked",children:"Blocked"}),t.jsx("option",{value:"overdue",children:"Overdue"})]}),t.jsxs("select",{value:jt,onChange:W=>gr(W.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[t.jsx("option",{value:"all",children:"All Priority"}),t.jsx("option",{value:"low",children:"Low"}),t.jsx("option",{value:"medium",children:"Medium"}),t.jsx("option",{value:"high",children:"High"}),t.jsx("option",{value:"urgent",children:"Urgent"})]}),t.jsxs("select",{value:A,onChange:W=>ke(W.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[t.jsx("option",{value:"all",children:"All Assignees"}),t.jsx("option",{value:"none",children:"No Assignees"}),N.map(W=>t.jsx("option",{value:W.id,children:W.name},W.id))]})]})}),v.length>0?t.jsx(q,{children:t.jsxs(Q,{className:"p-0",children:[t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Task Name"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stage"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Priority"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assignees"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Due Date"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Progress"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:v.map(W=>{const we=N.filter(Oe=>W.assignees&&W.assignees.includes(Oe.id)),ze=Se(W),gt=fe.find(Oe=>Oe.id===W.category_stage_id||W.stage_id);return t.jsxs("tr",{className:`hover:bg-gray-50 ${ze?"bg-red-50":""}`,children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{children:[t.jsxs("div",{className:"text-sm font-medium text-gray-900 flex items-center",children:[W.name,ze&&t.jsx(zt,{className:"w-4 h-4 text-red-500 ml-2"})]}),t.jsxs("div",{className:"text-sm text-gray-500",children:[W.component_path&&t.jsxs("div",{className:"text-xs text-purple-600 mt-1 bg-purple-100 p-1 rounded-md inline-block",children:[" ",W.component_path]}),W.description&&t.jsx("div",{className:"mt-1",children:W.description})]})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"text-sm text-gray-900",children:gt?t.jsx("div",{className:"font-medium text-blue-600",children:gt.name}):t.jsx("span",{className:"text-gray-400",children:"Unknown Stage"})})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx(ee,{variant:Ne(W.status),children:W.status.replace("-"," ")})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx(ee,{variant:R(W.priority),children:W.priority})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"space-y-1",children:[we.length>0&&t.jsxs("div",{className:"flex flex-wrap gap-1",children:[we.slice(0,3).map(Oe=>t.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:Oe.name},Oe.id)),we.length>3&&t.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600",children:["+",we.length-3," more"]})]}),we.length===0&&t.jsx("span",{className:"text-xs text-gray-400",children:"No assignees"})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(At,{className:"w-4 h-4 mr-1 text-gray-400"}),W.end_date||W.endDate?new Date(W.end_date||W.endDate||"").toLocaleDateString():"No due date"]})}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2 mr-2",children:t.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${zs(W.status)}%`}})}),t.jsxs("span",{className:"text-sm text-gray-600",children:[zs(W.status),"%"]})]}),t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(_,{variant:"ghost",size:"sm",onClick:Oe=>{Oe.stopPropagation(),be(W.id)},title:"View Details",children:t.jsx(Hs,{className:"w-4 h-4"})}),t.jsx(_,{variant:"ghost",size:"sm",onClick:Oe=>{Oe.stopPropagation(),T(W)},title:"Edit Task",children:t.jsx(Ys,{className:"w-4 h-4"})}),t.jsx(_,{variant:"ghost",size:"sm",onClick:Oe=>{Oe.stopPropagation(),ye(W)},title:"Delete Task",className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:t.jsx(Ct,{className:"w-4 h-4"})})]})]})]},W.id)})})]})}),Be>1&&t.jsx("div",{className:"px-6 py-4 border-t border-gray-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("div",{className:"flex items-center space-x-2",children:t.jsxs("span",{className:"text-sm text-gray-700",children:["Showing ",(ge-1)*dt+1," to ",Math.min(ge*dt,ct)," of ",ct," tasks"]})}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(_,{variant:"outline",size:"sm",onClick:()=>Ie(1),disabled:ge===1,children:"First"}),t.jsx(_,{variant:"outline",size:"sm",onClick:()=>Ie(ge-1),disabled:ge===1,children:"Previous"}),t.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,Be)},(W,we)=>{let ze;return Be<=5||ge<=3?ze=we+1:ge>=Be-2?ze=Be-4+we:ze=ge-2+we,t.jsx(_,{variant:ge===ze?"primary":"outline",size:"sm",onClick:()=>Ie(ze),className:"w-8 h-8 p-0",children:ze},ze)})}),t.jsx(_,{variant:"outline",size:"sm",onClick:()=>Ie(ge+1),disabled:ge===Be,children:"Next"}),t.jsx(_,{variant:"outline",size:"sm",onClick:()=>Ie(Be),disabled:ge===Be,children:"Last"})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("span",{className:"text-sm text-gray-700",children:"Page size:"}),t.jsxs("select",{value:dt,onChange:W=>{nt(Number(W.target.value)),Ie(1)},className:"border border-gray-300 rounded px-2 py-1 text-sm",children:[t.jsx("option",{value:10,children:"10"}),t.jsx("option",{value:20,children:"20"}),t.jsx("option",{value:50,children:"50"}),t.jsx("option",{value:100,children:"100"})]})]})]})})]})}):t.jsx(q,{children:t.jsxs(Q,{className:"p-8 text-center",children:[t.jsx(Ht,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Tasks Yet"}),t.jsx("p",{className:"text-gray-600 mb-4",children:"Start by creating your first task for this project."}),t.jsx(_,{icon:t.jsx(yt,{className:"w-4 h-4"}),onClick:()=>m(!0),children:"Create First Task"})]})}),t.jsx(pl,{isOpen:te,onClose:()=>{V(!1),Ke(null)},onSubmit:he,users:N,teams:I,skills:P,projects:B,stages:fe,grades:ie,books:Ee,units:M,lessons:oe,editingTask:Ce})]})},ue=()=>t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Project Team"}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsxs(_,{onClick:()=>re(!0),className:"flex items-center space-x-2",variant:"outline",children:[t.jsx(lt,{className:"w-4 h-4"}),t.jsx("span",{children:"Add Team"})]}),t.jsxs(_,{onClick:()=>D(!0),className:"flex items-center space-x-2",children:[t.jsx(ro,{className:"w-4 h-4"}),t.jsx("span",{children:"Add Member"})]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h4",{className:"text-md font-medium text-gray-900",children:"Assigned Teams"}),b.length>0?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:b.map(T=>t.jsx(q,{children:t.jsxs(Q,{className:"p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-lg flex items-center justify-center text-white",children:t.jsx(lt,{className:"w-5 h-5"})}),t.jsxs("div",{children:[t.jsx("h5",{className:"font-medium text-gray-900",children:T.team_name}),t.jsx(ee,{variant:"secondary",className:"text-xs",children:T.role})]})]}),t.jsx(_,{variant:"ghost",size:"sm",onClick:()=>vr(T.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:t.jsx(ao,{className:"w-4 h-4"})})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600",children:"Members"}),t.jsxs("span",{className:"font-medium",children:[T.member_count," / ",T.max_capacity]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${Math.min(T.member_count/T.max_capacity*100,100)}%`}})})]})]})},T.id))}):t.jsxs("div",{className:"text-center py-6 bg-gray-50 rounded-lg",children:[t.jsx(lt,{className:"w-8 h-8 text-gray-300 mx-auto mb-2"}),t.jsx("p",{className:"text-gray-500",children:"No teams assigned to this project"})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h4",{className:"text-md font-medium text-gray-900",children:"Individual Members"}),X?t.jsx("div",{className:"text-center py-8",children:t.jsx("div",{className:"text-gray-500",children:"Loading team members..."})}):d.length>0?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(T=>{var R,Se,W;const he=v.filter(we=>we.assignees&&we.assignees.includes(T.user_id||T.team_member_id)),ye=he.filter(we=>we.status==="completed"),Ne=he.length>0?Math.round(ye.length/he.length*100):0;return t.jsx(q,{children:t.jsxs(Q,{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center text-white font-semibold text-lg",children:((R=T.name)==null?void 0:R.charAt(0))||"U"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900",children:T.name||"Unknown User"}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(ee,{variant:"secondary",children:T.role||"member"}),T.skills&&t.jsx("p",{className:"text-sm text-gray-600",children:((W=(Se=T.skills).join)==null?void 0:W.call(Se,", "))||T.skills})]})]})]}),t.jsx(_,{variant:"ghost",size:"sm",onClick:()=>yr(T.project_member_id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:t.jsx(ao,{className:"w-4 h-4"})})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600",children:"Tasks Assigned"}),t.jsx("span",{className:"font-medium",children:he.length})]}),t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600",children:"Completed"}),t.jsx("span",{className:"font-medium text-green-600",children:ye.length})]}),t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600",children:"Completion Rate"}),t.jsxs("span",{className:"font-medium",children:[Ne,"%"]})]}),t.jsx(Ut,{value:Ne})]})]})]})},T.project_member_id)})}):t.jsx(q,{children:t.jsxs(Q,{className:"p-8 text-center",children:[t.jsx(lt,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Team Members"}),t.jsx("p",{className:"text-gray-600 mb-4",children:"No team members have been assigned to this project yet."}),t.jsxs(_,{onClick:()=>D(!0),className:"flex items-center space-x-2",children:[t.jsx(ro,{className:"w-4 h-4"}),t.jsx("span",{children:"Add First Member"})]})]})})]})]});return t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs(_,{variant:"ghost",onClick:s,children:[t.jsx(sc,{className:"w-4 h-4 mr-2"}),"Back to Projects"]}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:Z.name}),t.jsx("p",{className:"text-gray-600",children:Z.category})]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(ee,{variant:Z.status==="active"?"primary":Z.status==="completed"?"success":Z.status==="on-hold"?"warning":"default",children:Z.status}),t.jsxs(_,{variant:"outline",size:"sm",onClick:()=>y(!0),children:[t.jsx(Ys,{className:"w-4 h-4 mr-2"}),"Edit Project"]})]})]}),t.jsx(q,{children:t.jsx(Q,{className:"p-6",children:t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Overall Progress"}),t.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[xt.progress,"%"]})]}),t.jsx(Ut,{value:xt.progress})]})})}),t.jsx("div",{className:"border-b border-gray-200",children:t.jsx("nav",{className:"-mb-px flex space-x-8",children:ae.map(T=>t.jsxs("button",{onClick:()=>o(T.key),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${i===T.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[t.jsx(T.icon,{className:"w-4 h-4"}),t.jsx("span",{children:T.label})]},T.key))})}),t.jsxs("div",{children:[i==="overview"&&je(),i==="stages"&&De(),i==="educational-hierarchy"&&t.jsx(h0,{projectId:Number(Z.id)}),i==="tasks"&&$e(),i==="timeline"&&Le(),i==="team"&&ue()]}),t.jsx(pl,{isOpen:c,onClose:()=>m(!1),onSubmit:p,users:N,teams:I,skills:P,projects:B,stages:fe,grades:ie,books:Ee,units:M,lessons:oe}),t.jsx(x0,{isOpen:x,onClose:()=>y(!1),onSubmit:xe,project:Z,categories:n||le}),t.jsx(k0,{isOpen:H,onClose:()=>D(!1),onSubmit:Jt,availableMembers:z,projectMembers:d}),t.jsx(b0,{isOpen:L,onClose:()=>re(!1),onSubmit:fr,availableTeams:h,projectTeams:b})]})}function b0({isOpen:e,onClose:s,onSubmit:r,availableTeams:n,projectTeams:a}){const[l,i]=u.useState(null),[o,c]=u.useState("member"),m=a.map(d=>d.team_id),x=n.filter(d=>!m.includes(d.id)),y=d=>{d.preventDefault(),l&&(r(l,o),i(null),c("member"))};return t.jsx(ot,{isOpen:e,onClose:s,title:"Add Team to Project",children:t.jsxs("form",{onSubmit:y,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Team"}),t.jsxs("select",{value:l||"",onChange:d=>i(Number(d.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[t.jsx("option",{value:"",children:"Choose a team..."}),x.map(d=>t.jsxs("option",{value:d.id,children:[d.name," - ",d.member_count||0," members"]},d.id))]}),x.length===0&&t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"All teams are already assigned to this project."})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),t.jsxs("select",{value:o,onChange:d=>c(d.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"member",children:"Member"}),t.jsx("option",{value:"admin",children:"Admin"}),t.jsx("option",{value:"owner",children:"Owner"}),t.jsx("option",{value:"viewer",children:"Viewer"})]})]}),t.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:t.jsxs("p",{className:"text-sm text-blue-800",children:[t.jsx("strong",{children:"Note:"})," When you assign a team to this project, all team members will automatically be added as individual project members."]})}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx(_,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),t.jsx(_,{type:"submit",disabled:!l||x.length===0,children:"Add Team"})]})]})})}function k0({isOpen:e,onClose:s,onSubmit:r,availableMembers:n,projectMembers:a}){const[l,i]=u.useState(null),[o,c]=u.useState("member"),m=a.map(d=>d.user_id||d.team_member_id),x=n.filter(d=>!m.includes(d.id)),y=d=>{d.preventDefault(),l&&(r(l,o),i(null),c("member"))};return t.jsx(ot,{isOpen:e,onClose:s,title:"Add Team Member",children:t.jsxs("form",{onSubmit:y,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Team Member"}),t.jsxs("select",{value:l||"",onChange:d=>i(Number(d.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[t.jsx("option",{value:"",children:"Choose a team member..."}),x.map(d=>t.jsxs("option",{value:d.id,children:[d.name," (",d.email,")"]},d.id))]}),x.length===0&&t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"All team members are already assigned to this project."})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),t.jsxs("select",{value:o,onChange:d=>c(d.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"member",children:"Member"}),t.jsx("option",{value:"admin",children:"Admin"}),t.jsx("option",{value:"owner",children:"Owner"}),t.jsx("option",{value:"viewer",children:"Viewer"})]})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx(_,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),t.jsx(_,{type:"submit",disabled:!l||x.length===0,children:"Add Member"})]})]})})}const ii={"eLearning Design":[{id:"1",name:"Content Strategy",description:"Define learning objectives and content outline",order:1},{id:"2",name:"Instructional Design",description:"Create detailed instructional design document",order:2},{id:"3",name:"Storyboarding",description:"Visual planning and storyboard creation",order:3},{id:"4",name:"Content Development",description:"Content creation and writing phase",order:4},{id:"5",name:"Media Production",description:"Graphics, animations, and multimedia creation",order:5},{id:"6",name:"Development & Integration",description:"Technical development and LMS integration",order:6},{id:"7",name:"Review & QA",description:"Quality assurance and review process",order:7},{id:"8",name:"Deployment",description:"Final deployment and launch",order:8}],"Curriculum Design":[{id:"9",name:"Curriculum Analysis",description:"Analyze curriculum requirements and standards",order:1},{id:"10",name:"Scope & Sequence",description:"Define scope and sequence of curriculum",order:2},{id:"11",name:"Learning Objectives",description:"Define detailed learning objectives",order:3},{id:"12",name:"Content Creation",description:"Develop curriculum content and materials",order:4},{id:"13",name:"Assessment Design",description:"Create assessments and evaluation tools",order:5},{id:"14",name:"Teacher Resources",description:"Develop teacher guides and resources",order:6},{id:"15",name:"Pilot Testing",description:"Pilot test with target audience",order:7},{id:"16",name:"Revision & Finalization",description:"Revise based on feedback and finalize",order:8}],"IT Applications":[{id:"17",name:"Requirements Analysis",description:"Gather and analyze system requirements",order:1},{id:"18",name:"System Design",description:"Design system architecture and database",order:2},{id:"19",name:"UI/UX Design",description:"Design user interface and user experience",order:3},{id:"20",name:"Frontend Development",description:"Develop user interface and client-side logic",order:4},{id:"21",name:"Backend Development",description:"Develop server-side logic and APIs",order:5},{id:"22",name:"Database Implementation",description:"Implement database and data models",order:6},{id:"23",name:"Integration Testing",description:"Test system integration and APIs",order:7},{id:"24",name:"User Acceptance Testing",description:"Conduct user acceptance testing",order:8},{id:"25",name:"Deployment & Launch",description:"Deploy to production and launch",order:9}]};function S0(){const{user:e}=Ss(),[s,r]=u.useState("grid"),[n,a]=u.useState(!1),[l,i]=u.useState(null),[o,c]=u.useState("all"),[m,x]=u.useState("all"),[y,d]=u.useState([]),[f,b]=u.useState([]),[S,z]=u.useState(!0),[g,h]=u.useState(null),[j,I]=u.useState({}),[F,v]=u.useState([]);u.useEffect(()=>{e&&(async()=>{try{z(!0),h(null);const[le,se,H,D]=await Promise.all([Ve.getAll(),er.getAll(),We.getAll({all:"true"}),Ot.getAll()]),L=le&&le.data?le.data:Array.isArray(le)?le:[];d(L),console.log("Data",y,f),b(se),v(D||[]);const re=H&&H.data?H.data:Array.isArray(H)?H:[],X={};(re||[]).forEach(ne=>{const Z=(ne.project_id??ne.projectId??"").toString();Z&&(X[Z]=(X[Z]||0)+1)}),I(X)}catch(le){console.error("ProjectManager fetch error:",le),h(le.message||"Failed to load projects data")}finally{z(!1)}})()},[e]);const w=u.useMemo(()=>{const E={};return(f||[]).forEach(le=>{le&&le.id!==void 0&&le.name&&(E[String(le.id)]=le.name)}),E},[f]),N=E=>{const le=E==null?void 0:E.category;if(le&&typeof le=="string"&&le.trim()!=="")return le;const se=(E==null?void 0:E.category_id)??(E==null?void 0:E.categoryId);if(se!=null){const H=w[String(se)];if(H)return H}return"Uncategorized"},C=u.useMemo(()=>{const E={};return(F||[]).forEach(le=>{le&&le.id!==void 0&&le.name&&(E[String(le.id)]=le.name)}),E},[F]),P=y.filter(E=>!(o!=="all"&&N(E)!==o||m!=="all"&&E.status!==m)),G=async E=>{var le;try{h(null);const se={name:E.name||"",description:E.description||"",category_id:E.category_id||((le=f[0])==null?void 0:le.id),current_stage_id:E.currentStageId||null,start_date:E.start_date||new Date().toISOString().split("T")[0],end_date:E.end_date||new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0],status:"planning",progress:0};console.log(" Creating project:",se);const H=await Ve.create(se);d(D=>[...D,H]),a(!1),console.log(" Project created successfully:",H)}catch(se){console.error(" Create project error:",se),h(se.message||"Failed to create project")}},B=async E=>{try{if(h(null),!confirm("Are you sure you want to delete this project? This action cannot be undone."))return;console.log(" Deleting project:",E),await Ve.delete(E),d(le=>le.filter(se=>se.id!==E)),(l==null?void 0:l.id)===E&&i(null),console.log(" Project deleted successfully")}catch(le){console.error(" Delete project error:",le),h(le.message||"Failed to delete project")}},$=E=>{switch(E){case"active":return"primary";case"completed":return"success";case"on-hold":return"warning";case"cancelled":return"danger";default:return"default"}},fe=E=>{if(!E)return null;const le=new Date(E),se=new Date;le.setHours(0,0,0,0),se.setHours(0,0,0,0);const H=le.getTime()-se.getTime();return Math.ceil(H/(1e3*60*60*24))};return l?t.jsx(N0,{project:l,onBack:()=>i(null),onUpdate:E=>{i(E),d(le=>le.map(se=>se.id===E.id?E:se))},categories:f}):S?t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Projects"}),t.jsx("p",{className:"text-gray-600",children:"Manage and track your project portfolio"})]}),t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsxs("div",{className:"text-center",children:[t.jsx(oa,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-blue-600"}),t.jsx("p",{className:"text-gray-600",children:"Loading projects..."})]})})]}):g?t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Projects"}),t.jsx("p",{className:"text-gray-600",children:"Manage and track your project portfolio"})]}),t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsxs("div",{className:"text-center",children:[t.jsx(zt,{className:"w-8 h-8 mx-auto mb-4 text-red-600"}),t.jsx("p",{className:"text-red-600 mb-4",children:g}),t.jsx(_,{onClick:()=>window.location.reload(),children:"Try Again"})]})})]}):t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-r from-indigo-600 via-blue-600 to-cyan-500 text-white p-6 shadow-lg",children:[t.jsx("div",{className:"absolute -top-10 -right-10 w-40 h-40 bg-white/10 rounded-full blur-2xl"}),t.jsx("div",{className:"absolute -bottom-14 -left-12 w-56 h-56 bg-white/10 rounded-full blur-2xl"}),t.jsxs("div",{className:"relative z-10 flex items-center justify-between gap-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:"Projects"}),t.jsx("p",{className:"text-white/80",children:"Manage and track your project portfolio"})]}),t.jsx(_,{icon:t.jsx(yt,{className:"w-4 h-4"}),onClick:()=>a(!0),className:"bg-blue/90 text-indigo-900 hover:text-blue-200 hover:bg:white hover:shadow-lg",children:"New Project"})]})]}),t.jsxs("div",{className:"flex items-center justify-between bg-white/80 backdrop-blur-sm p-4 rounded-xl border border-gray-200 shadow-sm",children:[t.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[t.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg border border-gray-200",children:[t.jsx(Im,{className:"w-4 h-4 text-gray-500"}),t.jsxs("select",{value:o,onChange:E=>c(E.target.value),className:"bg-transparent outline-none text-sm",children:[t.jsx("option",{value:"all",children:"All Categories"}),f.map(E=>t.jsx("option",{value:E.name,children:E.name},E.id))]})]}),t.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg border border-gray-200",children:[t.jsx("span",{className:"text-xs text-gray-500",children:"Status"}),t.jsxs("select",{value:m,onChange:E=>x(E.target.value),className:"bg-transparent outline-none text-sm",children:[t.jsx("option",{value:"all",children:"All"}),t.jsx("option",{value:"planning",children:"Planning"}),t.jsx("option",{value:"active",children:"Active"}),t.jsx("option",{value:"on-hold",children:"On Hold"}),t.jsx("option",{value:"completed",children:"Completed"}),t.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(_,{variant:s==="grid"?"primary":"ghost",size:"sm",onClick:()=>r("grid"),className:s==="grid"?"":"hover:bg-gray-100",title:"Grid view",children:t.jsx(Ip,{className:"w-4 h-4"})}),t.jsx(_,{variant:s==="list"?"primary":"ghost",size:"sm",onClick:()=>r("list"),className:s==="list"?"":"hover:bg-gray-100",title:"List view",children:t.jsx(Fp,{className:"w-4 h-4"})})]})]}),s==="grid"?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:P.map(E=>{var le;return t.jsxs(q,{className:`relative overflow-hidden hover:shadow-2xl transition-all duration-300 cursor-pointer border-0 bg-white/90 backdrop-blur-sm ${E.status==="active"?"ring-1 ring-blue-200":""}`,onClick:()=>i(E),children:[t.jsx("div",{className:"absolute inset-x-0 top-0 h-1 bg-gradient-to-r from-indigo-500 via-blue-500 to-cyan-500"}),t.jsx(Te,{className:"pb-3",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx(Pe,{className:"text-lg flex items-center gap-2 flex-wrap",children:E.name}),t.jsxs("div",{className:"mt-1",children:[t.jsx(ee,{variant:"secondary",className:"text-xs bg-blue-50 text-blue-700 border border-blue-200",children:N(E)}),(()=>{const se=E.current_stage_id??E.currentStageId,H=se!=null?C[String(se)]:null;return H?t.jsx(ee,{variant:"secondary",className:"text-[11px] px-2 mx-3 py-0.5 bg-purple-50 text-purple-700 border border-purple-200",children:H}):null})()]})]}),t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(_,{variant:"ghost",size:"sm",onClick:se=>{se.stopPropagation(),i(E)},title:"Edit Project",children:t.jsx(hd,{className:"w-4 h-4"})}),t.jsx(_,{variant:"ghost",size:"sm",onClick:se=>{se.stopPropagation(),B(E.id)},title:"Delete Project",className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:t.jsx(Ct,{className:"w-4 h-4"})})]})]})}),t.jsxs(Q,{className:"space-y-4",children:[t.jsx("p",{className:"text-sm text-gray-700 line-clamp-2",children:E.description}),N(E)==="IT Applications"&&t.jsxs("div",{className:"mt-1",children:[t.jsx("div",{className:"text-xs text-gray-500",children:"IT Applications Phases"}),t.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[ii["IT Applications"].slice(0,3).map(se=>t.jsx(ee,{variant:"secondary",className:"text-[10px] px-2 py-0.5",children:se.name},se.id)),ii["IT Applications"].length>3&&t.jsxs(ee,{variant:"secondary",className:"text-[10px] px-2 py-0.5",children:["+",ii["IT Applications"].length-3," more"]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600",children:"Progress"}),t.jsxs("span",{className:"font-medium",children:[E.progress,"%"]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 overflow-hidden",children:t.jsx("div",{className:`h-2 rounded-full transition-all duration-700 ${E.progress>=80?"bg-gradient-to-r from-green-500 to-emerald-600":E.progress>=50?"bg-gradient-to-r from-blue-500 to-indigo-600":E.progress>=25?"bg-gradient-to-r from-yellow-500 to-orange-500":"bg-gradient-to-r from-gray-400 to-gray-500"}`,style:{width:`${E.progress}%`}})})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(ee,{variant:$(E.status),children:E.status}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{className:"inline-flex items-center text-gray-700",children:[t.jsx(Ht,{className:"w-4 h-4 mr-1 text-blue-600"}),t.jsx("span",{className:"font-medium",children:j[(le=E.id)==null?void 0:le.toString()]||0}),t.jsx("span",{className:"ml-1 text-gray-500",children:"tasks"})]}),t.jsxs("div",{className:"inline-flex items-center text-gray-700",children:[t.jsx(lt,{className:"w-4 h-4 mr-1 text-purple-600"}),t.jsx("span",{className:"font-medium",children:E.userCount||0}),t.jsx("span",{className:"ml-1 text-gray-500",children:"team"})]})]})]}),t.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[t.jsxs("div",{className:"inline-flex items-center",children:[t.jsx(At,{className:"w-4 h-4 mr-2"}),E.end_date||E.endDate?new Date(E.end_date||E.endDate||"").toLocaleDateString():"No due date"]}),(()=>{const se=fe(E.end_date||E.endDate);if(se===null)return null;const H=se<0?`${Math.abs(se)} days overdue`:se===0?"Due today":`${se} days left`,D=se<0?"text-red-600":se<=3?"text-orange-600":"text-green-600";return t.jsx("span",{className:`font-medium ${D}`,children:H})})()]})]})]},E.id)})}):t.jsx(q,{children:t.jsx(Q,{className:"p-0",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Project Name"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Progress"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tasks"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Team"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Due Date"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Days Left"}),t.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:P.map(E=>{var le;return t.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>i(E),children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{children:[t.jsxs("div",{className:"text-sm font-medium text-gray-900 flex items-center gap-2",children:[E.name,(()=>{const se=E.current_stage_id??E.currentStageId,H=se!=null?C[String(se)]:null;return H?t.jsx(ee,{variant:"secondary",className:"text-[11px] px-2 py-0.5 bg-purple-50 text-purple-700 border border-purple-200",children:H}):null})()]}),t.jsx("div",{className:"text-sm text-gray-500",children:E.description})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:N(E)}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx(ee,{variant:$(E.status),children:E.status})}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[t.jsx("div",{className:"w-24",children:t.jsx(Ut,{value:E.progress,showLabel:!1})}),t.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[E.progress,"%"]})]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:j[(le=E.id)==null?void 0:le.toString()]||0}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(lt,{className:"w-4 h-4 mr-1 text-gray-400"}),E.userCount||0]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:E.end_date||E.endDate?new Date(E.end_date||E.endDate||"").toLocaleDateString():"No due date"}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(()=>{const se=fe(E.end_date||E.endDate);return se===null?"-":se<0?`${Math.abs(se)} overdue`:se===0?"Due today":`${se} days`})()}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:t.jsxs("div",{className:"flex items-center justify-end space-x-1",children:[t.jsx(_,{variant:"ghost",size:"sm",onClick:se=>{se.stopPropagation(),i(E)},title:"Edit Project",children:t.jsx(hd,{className:"w-4 h-4"})}),t.jsx(_,{variant:"ghost",size:"sm",onClick:se=>{se.stopPropagation(),B(E.id)},title:"Delete Project",className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:t.jsx(Ct,{className:"w-4 h-4"})})]})})]},E.id)})})]})})})}),t.jsx(_0,{isOpen:n,onClose:()=>a(!1),onSubmit:G,categories:f})]})}function _0({isOpen:e,onClose:s,onSubmit:r,categories:n}){const[a,l]=u.useState({name:"",description:"",category_id:null,current_stage_id:null,start_date:new Date().toISOString().split("T")[0],end_date:new Date(Date.now()+2592e6).toISOString().split("T")[0]}),[i,o]=u.useState([]),[c,m]=u.useState(!1),x=async d=>{if(l({...a,category_id:d,current_stage_id:null}),d){m(!0);try{const f=await Ot.getByCategory(d);o(f)}catch(f){console.error("Failed to load stages for category:",f),o([])}finally{m(!1)}}else o([])},y=d=>{d.preventDefault(),r({...a,start_date:a.start_date,end_date:a.end_date,currentStageId:a.current_stage_id||void 0}),l({name:"",description:"",category_id:null,current_stage_id:null,start_date:new Date().toISOString().split("T")[0],end_date:new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0]}),o([])};return t.jsx(ot,{isOpen:e,onClose:s,title:"Create New Project",size:"lg",children:t.jsxs("form",{onSubmit:y,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Name"}),t.jsx("input",{type:"text",required:!0,value:a.name,onChange:d=>l({...a,name:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter project name"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),t.jsx("textarea",{value:a.description,onChange:d=>l({...a,description:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Project description"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),t.jsxs("select",{value:a.category_id||"",onChange:d=>x(d.target.value?parseInt(d.target.value):null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"",children:"Select a category"}),n&&n.length>0?n.map(d=>t.jsx("option",{value:d.id,children:d.name},d.id)):t.jsx("option",{value:"",disabled:!0,children:"No categories available"})]})]}),a.category_id&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Stage"}),c?t.jsxs("div",{className:"flex items-center justify-center py-4",children:[t.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),t.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Loading stages..."})]}):i.length>0?t.jsxs("select",{value:a.current_stage_id||"",onChange:d=>l({...a,current_stage_id:d.target.value?parseInt(d.target.value):null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"",children:"Select a stage"}),i.map(d=>t.jsxs("option",{value:d.id,children:[d.name," - ",d.description]},d.id))]}):t.jsx("div",{className:"text-sm text-gray-500 py-2",children:"No stages available for this category."})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),t.jsx("input",{type:"date",value:a.start_date,onChange:d=>l({...a,start_date:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),t.jsx("input",{type:"date",value:a.end_date,onChange:d=>l({...a,end_date:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx(_,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),t.jsx(_,{type:"submit",children:"Create Project"})]})]})})}function C0(){var rt,dt,nt,Ye,Tt,os;const{user:e}=Ss(),{dispatch:s}=zr(),[r,n]=u.useState("members"),[a,l]=u.useState(!1),[i,o]=u.useState(null),[c,m]=u.useState([]),[x,y]=u.useState([]),[d,f]=u.useState(""),[b,S]=u.useState(!1),[z,g]=u.useState(null),[h,j]=u.useState([]),[I,F]=u.useState([]),[v,w]=u.useState(!1),[N,C]=u.useState(null),[P,G]=u.useState(null),[B,$]=u.useState(!1),[fe,E]=u.useState(!1),[le,se]=u.useState([]),[H,D]=u.useState(!1),[L,re]=u.useState(null),[X,ne]=u.useState({name:"",email:"",passcode:"",skills:[],team_id:null}),[Z,k]=u.useState({name:"",description:"",functional_unit_id:null,team_lead_id:null,team_lead_type:"team",max_capacity:10,members:[]}),[ie,pe]=u.useState([]);u.useEffect(()=>{e&&Ee()},[e,r]),u.useEffect(()=>{e&&(async()=>{try{const K=await Ns.getAll();console.log(" Raw skills data:",K);let Ae=[];Array.isArray(K)&&(Ae=K),console.log(" Skills array:",Ae);const Ze=Ae.map(ut=>ut.name||ut);pe(Ze),console.log(" Skills fetched:",Ze),console.log(" Skills array length:",Ze.length)}catch(K){console.error("Error fetching skills:",K)}})()},[e]);const Ee=async()=>{try{if(l(!0),o(null),r==="members"){const[O,K]=await Promise.all([Fe.getMembers(),We.getAll({all:"true"})]);console.log(" Team members fetched:",O),console.log(" Tasks fetched:",K);const Ae=O.data||O,Ze=K.data||K;console.log(" Members array:",Ae),console.log(" Tasks array:",Ze);const ut=await Promise.all((Ae||[]).map(async jt=>{const gr=Ze.filter(ke=>ke.assignees&&ke.assignees.includes(jt.id));let A=null;try{const ke=await br.getSummary(jt.id.toString());ke&&ke.summary&&(A={red:0,orange:0,yellow:0,green:0},ke.summary.forEach(xt=>{xt.type&&xt.count&&(A[xt.type]=xt.count)}))}catch(ke){console.warn(`Failed to fetch performance flags for member ${jt.id}:`,ke)}return{...jt,task_count:gr.length,performance_flags_summary:A}}));m(ut),y(ut)}else{const O=await Fe.getTeams();console.log(" Teams fetched:",O);const K=O.data||O;j(K||[]),F(K||[])}}catch(O){console.error(" Fetch team data error:",O),o("Failed to load team data")}finally{l(!1)}};u.useEffect(()=>{(async()=>{try{const K=await Fe.getTeams(),Ae=K.data||K;j(Ae||[]),console.log(" Teams for dropdown fetched:",K)}catch(K){console.error("Error fetching teams for dropdown:",K)}})()},[]),u.useEffect(()=>{if(r==="members"){const O=c.filter(K=>K.name.toLowerCase().includes(d.toLowerCase())||K.email.toLowerCase().includes(d.toLowerCase())||K.skills&&K.skills.some(Ae=>Ae.toLowerCase().includes(d.toLowerCase())));y(O)}else{const O=h.filter(K=>K.name.toLowerCase().includes(d.toLowerCase())||K.description&&K.description.toLowerCase().includes(d.toLowerCase())||K.skills&&K.skills.some(Ae=>Ae.toLowerCase().includes(d.toLowerCase())));F(O)}},[d,c,h,r]);const Re=async O=>{if(O.preventDefault(),!X.passcode||X.passcode.trim()===""){o("Passcode is required for new team members");return}try{const K=await Fe.createMember(X);m([...c,K]),S(!1),de()}catch(K){console.error("Error creating team member:",K),o("Failed to create team member")}},M=async O=>{if(O.preventDefault(),!!z)try{const K={...X};(!K.passcode||K.passcode.trim()==="")&&delete K.passcode;const Ae=await Fe.updateMember(z.id.toString(),K);m(c.map(Ze=>Ze.id===z.id?Ae:Ze)),S(!1),g(null),de()}catch(K){console.error("Error updating team member:",K),o("Failed to update team member")}},J=async O=>{if(confirm("Are you sure you want to delete this team member?"))try{await Fe.deleteMember(O.toString()),m(c.filter(K=>K.id!==O))}catch(K){console.error("Error deleting team member:",K),o("Failed to delete team member")}},oe=O=>{s({type:"SET_SELECTED_VIEW",payload:"tasks"}),s({type:"SET_FILTERS",payload:{teamMembers:[O.id.toString()]}})},de=()=>{ne({name:"",email:"",passcode:"",skills:[],team_id:null})},ve=async O=>{O.preventDefault();try{const K=await Fe.createTeam(Z);j([...h,K]),w(!1),Ke()}catch(K){console.error("Error creating team:",K),o("Failed to create team")}},be=async O=>{if(O.preventDefault(),!!N)try{const K=await Fe.updateTeam(N.id.toString(),Z);j(h.map(Ae=>Ae.id===N.id?K:Ae)),w(!1),C(null),Ke()}catch(K){console.error("Error updating team:",K),o("Failed to update team")}},Ce=async O=>{if(confirm("Are you sure you want to delete this team?"))try{await Fe.deleteTeam(O.toString()),j(h.filter(K=>K.id!==O))}catch(K){console.error("Error deleting team:",K),o("Failed to delete team")}},Ke=()=>{k({name:"",description:"",functional_unit_id:null,team_lead_id:null,team_lead_type:"team",max_capacity:10,members:[]})},te=O=>{g(O),ne({name:O.name,email:O.email,passcode:"",skills:O.skills,team_id:O.team_ids&&O.team_ids.length>0?O.team_ids[0]:null}),S(!0)},V=O=>{C(O),k({name:O.name,description:O.description,functional_unit_id:null,team_lead_id:null,team_lead_type:"team",max_capacity:O.max_capacity,members:[]}),w(!0)},ge=async O=>{try{const K=await Fe.getTeamById(O.id.toString());G(K),$(!0)}catch(K){console.error("Error fetching team details:",K),o("Failed to fetch team details")}},Ie=async O=>{try{const K=await Fe.getMembers(),ut=(K.data||K||[]).filter(jt=>!jt.team_ids||!jt.team_ids.includes(O.id));se(ut),G(O),E(!0)}catch(K){console.error("Error fetching available members:",K),o("Failed to fetch available members")}},Be=async O=>{if(P)try{await Fe.addMemberToTeam(P.id.toString(),{member_id:O});const K=await Fe.getTeamById(P.id.toString());G(K),await Ee(),E(!1)}catch(K){console.error("Error adding member to team:",K),o("Failed to add member to team")}},st=async O=>{if(P&&confirm(`Are you sure you want to remove this member from ${P.name}?`))try{await Fe.removeMemberFromTeam(P.id.toString(),O.toString());const K=await Fe.getTeamById(P.id.toString());G(K),await Ee(),o(null)}catch(K){console.error("Error removing member from team:",K),o("Failed to remove member from team")}},ct=O=>{re(O),D(!0)};return a?t.jsx("div",{className:"flex items-center justify-center p-8",children:t.jsx("div",{className:"text-lg",children:"Loading team data..."})}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Team Management"}),t.jsx("p",{className:"text-gray-600",children:"Manage team members and teams"})]})}),i&&t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:t.jsx("p",{className:"text-red-800",children:i})}),t.jsx("div",{className:"border-b border-gray-200",children:t.jsxs("nav",{className:"-mb-px flex space-x-8",children:[t.jsxs("button",{onClick:()=>n("members"),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${r==="members"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[t.jsx(lt,{className:"w-4 h-4"}),t.jsx("span",{children:"Team Members"})]}),t.jsxs("button",{onClick:()=>n("teams"),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${r==="teams"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[t.jsx(Ha,{className:"w-4 h-4"}),t.jsx("span",{children:"Teams"})]})]})}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("div",{className:"flex items-center space-x-4",children:t.jsxs("div",{className:"relative",children:[t.jsx(Ml,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),t.jsx("input",{type:"text",placeholder:`Search ${r==="members"?"team members":"teams"}...`,value:d,onChange:O=>f(O.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]})}),t.jsxs(_,{onClick:()=>{r==="members"?(g(null),de(),S(!0)):(C(null),Ke(),w(!0))},className:"flex items-center space-x-2",children:[t.jsx(yt,{className:"w-4 h-4"}),t.jsxs("span",{children:["Add ",r==="members"?"Member":"Team"]})]})]}),r==="members"?t.jsx(D0,{members:x,onEdit:te,onDelete:J,onMemberClick:oe}):t.jsx(T0,{teams:I,onEdit:V,onDelete:Ce,onViewDetails:ge}),t.jsx(ot,{isOpen:b,onClose:()=>{S(!1),g(null),de()},title:z?"Edit Team Member":"Create Team Member",children:t.jsxs("form",{onSubmit:z?M:Re,className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name"}),t.jsx("input",{type:"text",value:X.name,onChange:O=>ne({...X,name:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter full name",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),t.jsx("input",{type:"email",value:X.email,onChange:O=>ne({...X,email:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter email address",required:!0})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Passcode ",z&&t.jsx("span",{className:"text-gray-500 text-xs",children:"(leave empty to keep current)"})]}),t.jsx("input",{type:"text",value:X.passcode,onChange:O=>ne({...X,passcode:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:z?"Leave empty to keep current passcode":"Enter passcode",required:!z}),!z&&t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Passcode is required for new team members"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assign to Team"}),t.jsxs("select",{value:X.team_id||"",onChange:O=>ne({...X,team_id:O.target.value?Number(O.target.value):null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[t.jsx("option",{value:"",children:"Select a team (optional)"}),h.map(O=>t.jsx("option",{value:O.id,children:O.name},O.id))]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Skills"}),t.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:["Available skills: ",ie.length]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 max-h-48 overflow-y-auto border border-gray-200 rounded-lg p-4",children:ie.length>0?ie.map(O=>t.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer hover:bg-gray-50 p-2 rounded",children:[t.jsx("input",{type:"checkbox",checked:X.skills.includes(O),onChange:K=>{K.target.checked?ne({...X,skills:[...X.skills,O]}):ne({...X,skills:X.skills.filter(Ae=>Ae!==O)})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:O})]},O)):t.jsx("div",{className:"col-span-3 text-center text-gray-500 py-4",children:"No skills available. Please add skills first."})}),X.skills.length>0&&t.jsxs("div",{className:"mt-3",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Selected skills:"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:X.skills.map(O=>t.jsx(ee,{variant:"secondary",className:"text-xs",children:O},O))})]})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[t.jsx(_,{type:"button",variant:"outline",onClick:()=>{S(!1),g(null),de()},className:"px-6",children:"Cancel"}),t.jsx(_,{type:"submit",className:"px-6 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700",children:z?"Update Member":"Create Member"})]})]})}),t.jsx(ot,{isOpen:v,onClose:()=>{w(!1),C(null),Ke()},title:N?"Edit Team":"Create Team",children:t.jsxs("form",{onSubmit:N?be:ve,className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Team Name"}),t.jsx("input",{type:"text",value:Z.name,onChange:O=>k({...Z,name:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter team name",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Capacity"}),t.jsx("input",{type:"number",value:Z.max_capacity,onChange:O=>k({...Z,max_capacity:parseInt(O.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"1",max:"50",placeholder:"10"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),t.jsx("textarea",{value:Z.description,onChange:O=>k({...Z,description:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:3,placeholder:"Enter team description"})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[t.jsx(_,{type:"button",variant:"outline",onClick:()=>{w(!1),C(null),Ke()},className:"px-6",children:"Cancel"}),t.jsx(_,{type:"submit",className:"px-6 bg-gradient-to-r from-green-500 to-teal-600 hover:from-green-600 hover:to-teal-700",children:N?"Update Team":"Create Team"})]})]})}),P&&t.jsx(ot,{isOpen:B,onClose:()=>{$(!1),G(null)},title:`${P.name} - Team Details`,children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Team Information"}),t.jsx("p",{className:"text-gray-600",children:P.description})]}),t.jsx("div",{children:t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Members"}),t.jsxs("p",{className:"text-gray-900 font-semibold",children:[t.jsx("span",{className:"text-blue-600",children:((rt=P.members)==null?void 0:rt.length)||P.member_count||0})," / ",t.jsx("span",{className:"text-gray-600",children:P.max_capacity})]}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[!((dt=P.members)!=null&&dt.length)&&!P.member_count||((nt=P.members)==null?void 0:nt.length)===0&&P.member_count===0?"No members":(((Ye=P.members)==null?void 0:Ye.length)||P.member_count)===1?"1 member":`${((Tt=P.members)==null?void 0:Tt.length)||P.member_count} members`," assigned"]})]})}),P.skills&&P.skills.length>0&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Team Skills"}),t.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:P.skills.map((O,K)=>t.jsx(ee,{variant:"secondary",children:O},K))})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Team Members"}),t.jsxs(_,{size:"sm",onClick:()=>Ie(P),className:"bg-blue-500 hover:bg-blue-600 text-white",disabled:P.member_count>=P.max_capacity,children:[t.jsx(ro,{className:"w-3 h-3 mr-1"}),"Add Member"]})]}),P.members&&P.members.length>0?t.jsx("div",{className:"space-y-2 mt-1",children:P.members.map(O=>{var K;return t.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:O.name}),t.jsx("p",{className:"text-sm text-gray-600",children:O.team_role})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsxs(ee,{variant:"secondary",children:[((K=O.skills)==null?void 0:K.length)||0," skills"]}),t.jsxs("div",{className:"relative group",children:[t.jsx(_,{size:"sm",variant:"outline",onClick:Ae=>{Ae.stopPropagation(),ct(O)},className:"text-blue-600 hover:text-blue-700",children:t.jsx(Hs,{className:"w-3 h-3"})}),t.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-10",children:["View Details",t.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900"})]})]}),t.jsxs("div",{className:"relative group",children:[t.jsx(_,{size:"sm",variant:"outline",onClick:Ae=>{Ae.stopPropagation(),st(O.id)},className:"text-red-600 hover:text-red-700",children:t.jsx(Hp,{className:"w-3 h-3"})}),t.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-10",children:["Remove User",t.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900"})]})]})]})]},O.id)})}):t.jsxs("div",{className:"text-center py-4 text-gray-500",children:[t.jsx(lt,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),t.jsx("p",{children:"No members assigned to this team"})]})]})]})}),P&&t.jsx(ot,{isOpen:fe,onClose:()=>{E(!1),G(null),se([])},title:`Add Member to ${P.name}`,children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"mb-4",children:[t.jsxs("p",{className:"text-sm text-gray-600",children:["Select a member to add to ",t.jsx("strong",{children:P.name})]}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Current: ",P.member_count," / ",P.max_capacity," members"]})]}),le.length>0?t.jsx("div",{className:"max-h-64 overflow-y-auto space-y-2",children:le.map(O=>t.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",onClick:()=>Be(O.id),children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-white font-semibold text-xs",children:O.name.split(" ").map(K=>K[0]).join("").toUpperCase()})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:O.name}),t.jsx("p",{className:"text-sm text-gray-600",children:O.email})]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsxs(ee,{variant:"secondary",className:"text-xs",children:[O.skills.length," skills"]}),t.jsx(_,{size:"sm",variant:"outline",className:"text-xs",children:"Add"})]})]},O.id))}):t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx(lt,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),t.jsx("p",{className:"text-lg font-medium",children:"No available members"}),t.jsx("p",{className:"text-sm",children:"All team members are already assigned to this team or other teams."})]}),t.jsx("div",{className:"flex justify-end pt-4 border-t",children:t.jsx(_,{variant:"outline",onClick:()=>{E(!1),G(null),se([])},children:"Cancel"})})]})}),L&&t.jsx(ot,{isOpen:H,onClose:()=>{D(!1),re(null)},title:`${L.name} - Member Details`,children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-white font-semibold text-lg",children:L.name.split(" ").map(O=>O[0]).join("").toUpperCase()})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:L.name}),t.jsx("p",{className:"text-gray-600",children:L.team_role||"Member"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),t.jsx("p",{className:"text-gray-900",children:L.email||"Not provided"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Skills"}),t.jsxs("p",{className:"text-gray-900",children:[((os=L.skills)==null?void 0:os.length)||0," skills"]})]})]}),L.skills&&L.skills.length>0&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Skill Details"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:L.skills.map((O,K)=>t.jsx(ee,{variant:"secondary",children:O},K))})]}),t.jsx("div",{className:"flex justify-end pt-4 border-t",children:t.jsx(_,{variant:"outline",onClick:()=>{D(!1),re(null)},children:"Close"})})]})})]})}function D0({members:e,onEdit:s,onDelete:r,onMemberClick:n}){return t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(a=>{var l,i,o,c;return t.jsx(q,{className:"hover:shadow-lg transition-shadow duration-200 cursor-pointer",onClick:()=>n&&n(a),children:t.jsx(Q,{className:"p-6",children:t.jsx("div",{className:"flex items-start justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-white font-semibold text-sm",children:a.name.split(" ").map(m=>m[0]).join("").toUpperCase()})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-900 text-lg",children:a.name}),t.jsxs("p",{className:"text-sm text-gray-600 flex items-center",children:[t.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),a.email]}),a.passcode&&t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Passcode: ",t.jsx("span",{className:"font-mono bg-gray-100 px-1 rounded",children:a.passcode})]})]})]}),t.jsxs("div",{className:"mb-4 space-y-3",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Tasks"}),t.jsxs("span",{className:"text-xs bg-orange-100 text-orange-800 px-2 py-1 rounded-full",children:[a.task_count||0," tasks"]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:"bg-orange-500 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min((a.task_count||0)*10,100)}%`}})})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Skills"}),t.jsxs("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:[a.skills.length," skills"]})]}),a.skills.length>0&&t.jsxs("div",{className:"flex flex-wrap gap-1",children:[a.skills.slice(0,3).map((m,x)=>t.jsx(ee,{variant:"secondary",className:"text-xs px-2 py-1",children:m},x)),a.skills.length>3&&t.jsxs(ee,{variant:"secondary",className:"text-xs px-2 py-1",children:["+",a.skills.length-3," more"]})]})]}),a.team_names&&a.team_names.length>0&&t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Teams"}),t.jsxs("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:[a.team_names.length," team",a.team_names.length>1?"s":""]})]}),t.jsx("div",{className:"flex flex-wrap gap-1",children:a.team_names.map((m,x)=>t.jsx(ee,{variant:"default",className:"text-xs px-2 py-1 bg-green-100 text-green-800",children:m},x))})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(ee,{variant:a.is_active?"default":"secondary",className:"px-3 py-1",children:a.is_active?"Active":"Inactive"}),a.performance_flags_count>0&&t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsxs(ee,{variant:"danger",className:"px-2 py-1 text-xs",children:[" ",((l=a.performance_flags_summary)==null?void 0:l.red)||0]}),t.jsxs(ee,{variant:"warning",className:"px-2 py-1 text-xs",children:[" ",((i=a.performance_flags_summary)==null?void 0:i.orange)||0]}),t.jsxs(ee,{variant:"warning",className:"px-2 py-1 text-xs",children:[" ",((o=a.performance_flags_summary)==null?void 0:o.yellow)||0]}),t.jsxs(ee,{variant:"success",className:"px-2 py-1 text-xs",children:[" ",((c=a.performance_flags_summary)==null?void 0:c.green)||0]})]})]}),t.jsxs("div",{className:"flex space-x-1",children:[t.jsx(_,{size:"sm",variant:"outline",onClick:m=>{m.stopPropagation(),s(a)},className:"hover:bg-blue-50 hover:border-blue-300 transition-colors",children:t.jsx(ca,{className:"w-3 h-3"})}),t.jsx(_,{size:"sm",variant:"outline",onClick:m=>{m.stopPropagation(),r(a.id)},className:"hover:bg-red-50 hover:border-red-300 transition-colors",children:t.jsx(Ct,{className:"w-3 h-3"})})]})]})]})})})},a.id)})})}function T0({teams:e,onEdit:s,onDelete:r,onViewDetails:n}){return!e||e.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-100 to-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(Ha,{className:"w-8 h-8 text-gray-400"})}),t.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No teams found"}),t.jsx("p",{className:"text-gray-600 mb-6",children:"Create your first team to get started."}),t.jsxs(_,{className:"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700",children:[t.jsx(yt,{className:"w-4 h-4 mr-2"}),"Create Team"]})]}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(a=>t.jsx(q,{className:"hover:shadow-lg transition-shadow duration-200",children:t.jsx(Q,{className:"p-6",children:t.jsx("div",{className:"flex items-start justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-teal-600 rounded-lg flex items-center justify-center",children:t.jsx(Ha,{className:"w-6 h-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-900 text-lg",children:a.name}),t.jsx("p",{className:"text-sm text-gray-600",children:a.description||"No description"})]})]}),t.jsxs("div",{className:"space-y-3 mb-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Ha,{className:"w-4 h-4 text-gray-400"}),t.jsx("span",{className:"text-sm text-gray-600",children:a.functional_unit_name||"No unit"})]}),t.jsx(ee,{variant:a.is_active?"default":"secondary",className:"px-2 py-1 text-xs",children:a.is_active?"Active":"Inactive"})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Bp,{className:"w-4 h-4 text-gray-400"}),t.jsxs("span",{className:"text-sm text-gray-600",children:[a.member_count||0," / ",a.max_capacity||10," members"]}),t.jsx("div",{className:"flex-1 ml-2",children:t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min((a.member_count||0)/(a.max_capacity||10)*100,100)}%`}})})})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx($m,{className:"w-4 h-4 text-gray-400"}),t.jsx("span",{className:"text-sm text-gray-600",children:a.team_lead_name||"No team lead"})]})]}),a.skills&&a.skills.length>0&&t.jsxs("div",{className:"mb-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Team Skills"}),t.jsxs("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:[a.skills.length," skills"]})]}),t.jsxs("div",{className:"flex flex-wrap gap-1",children:[a.skills.slice(0,3).map((l,i)=>t.jsx(ee,{variant:"secondary",className:"text-xs px-2 py-1",children:l},i)),a.skills.length>3&&t.jsxs(ee,{variant:"secondary",className:"text-xs px-2 py-1",children:["+",a.skills.length-3," more"]})]})]}),t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{className:"flex space-x-1",children:[t.jsx(_,{size:"sm",variant:"outline",onClick:()=>n(a),className:"hover:bg-blue-50 hover:border-blue-300 transition-colors",children:t.jsx(lt,{className:"w-3 h-3"})}),t.jsx(_,{size:"sm",variant:"outline",onClick:()=>s(a),className:"hover:bg-green-50 hover:border-green-300 transition-colors",children:t.jsx(ca,{className:"w-3 h-3"})}),t.jsx(_,{size:"sm",variant:"outline",onClick:()=>r(a.id),className:"hover:bg-red-50 hover:border-red-300 transition-colors",children:t.jsx(Ct,{className:"w-3 h-3"})})]})})]})})})},a.id))})}function P0(){const{user:e}=Ss(),[s,r]=u.useState(new Date("2025-08-11")),[n,a]=u.useState("week"),[l,i]=u.useState("team"),[o,c]=u.useState(!1);u.useState(null);const[m,x]=u.useState([]),[y,d]=u.useState([]),[f,b]=u.useState([]),[S,z]=u.useState([]);u.useState([]),u.useState([]),u.useState([]),u.useState([]);const[g,h]=u.useState(!1),[j,I]=u.useState(null),F=async D=>{try{h(!0),I(null);const L=await Ta.getAll(D);x(L)}catch(L){console.error("Failed to fetch allocations:",L),I("Failed to load allocations")}finally{h(!1)}};u.useEffect(()=>{e&&(async()=>{try{h(!0),I(null);const[L,re,X,ne,Z,k,ie,pe]=await Promise.all([Ta.getAll(),Fe.getMembers(),Ve.getAll(),We.getAll({all:"true"}),Is.getAll(),Ms.getAll(),As.getAll(),dr.getAll()]);x(L.data||L),d(re.data||re),b(X.data||X),z(ne.data||ne)}catch(L){console.error("Failed to fetch data:",L),I("Failed to load data")}finally{h(!1)}})()},[e]);const v=async()=>{if(m.length===0&&S.length>0)try{h(!0);for(const D of S)if(D.assignees&&D.assignees.length>0){const L=D.start_date||D.startDate,re=D.end_date||D.endDate,X=D.estimated_hours||D.estimatedHours||8;if(L&&re){const ne=Math.ceil((new Date(re).getTime()-new Date(L).getTime())/864e5),Z=Math.min(X/Math.max(ne,1),8);for(const k of D.assignees){const ie={user_id:k,project_id:D.project_id||D.projectId||"",task_id:D.id,hours_per_day:Math.round(Z*100)/100,start_date:new Date(L).toISOString().split("T")[0],end_date:new Date(re).toISOString().split("T")[0]};await Ta.create(ie)}}}await F()}catch(D){console.error("Failed to create allocations from tasks:",D),I("Failed to create initial allocations")}finally{h(!1)}};u.useEffect(()=>{m.length===0&&!g&&S.length>0&&v()},[m.length,g,S.length]);const w=D=>{const L=[],re=new Date(D);re.setDate(D.getDate()-D.getDay());for(let X=0;X<7;X++){const ne=new Date(re);ne.setDate(re.getDate()+X),L.push(ne)}return L},N=(D,L,re)=>(m||[]).filter(ne=>{var M,J,oe;const Z=D.toISOString().split("T")[0],k=ne.start_date.split("T")[0],ie=ne.end_date.split("T")[0],pe=Z>=k&&Z<=ie,Ee=!L||((M=ne.user_id)==null?void 0:M.toString())===L,Re=!re||((J=ne.project_id)==null?void 0:J.toString())===re;return L&&((oe=ne.user_id)==null?void 0:oe.toString())===L&&!pe&&console.log(` Date mismatch: Looking for ${Z}, allocation ${ne.id} range is ${k} to ${ie}`),pe&&Ee&&Re}),C=(D,L)=>N(L,D).reduce((X,ne)=>{const Z=typeof ne.hours_per_day=="string"?parseFloat(ne.hours_per_day):ne.hours_per_day||0;return X+Z},0),P=(D,L)=>N(L,void 0,D).reduce((X,ne)=>{const Z=typeof ne.hours_per_day=="string"?parseFloat(ne.hours_per_day):ne.hours_per_day||0;return X+Z},0),G=(D,L)=>{const re=C(D,L);return re===0?"available":re>8?"overloaded":re>=6?"busy":"normal"},B=D=>{switch(D){case"available":return"bg-green-100 text-green-800";case"normal":return"bg-blue-100 text-blue-800";case"busy":return"bg-yellow-100 text-yellow-800";case"overloaded":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},$=D=>{const L=new Date(s);n==="day"?L.setDate(s.getDate()+(D==="next"?1:-1)):n==="week"?L.setDate(s.getDate()+(D==="next"?7:-7)):L.setMonth(s.getMonth()+(D==="next"?1:-1)),r(L)},fe=()=>{if(n==="day")return s.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});if(n==="week"){const D=w(s),L=D[0].toLocaleDateString("en-US",{month:"short",day:"numeric"}),re=D[6].toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return`${L} - ${re}`}else return s.toLocaleDateString("en-US",{year:"numeric",month:"long"})},E=async D=>{var L,re;try{const X={user_id:D.userId||"",project_id:D.projectId||"",task_id:D.taskId||void 0,hours_per_day:D.hoursPerDay||8,start_date:((L=D.startDate)==null?void 0:L.toISOString().split("T")[0])||new Date().toISOString().split("T")[0],end_date:((re=D.endDate)==null?void 0:re.toISOString().split("T")[0])||new Date().toISOString().split("T")[0]};await Ta.create(X),await F(),c(!1)}catch(X){console.error("Failed to create allocation:",X),I("Failed to create allocation")}},le=()=>{const D=w(s);return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-8 gap-2 mb-4",children:[t.jsx("div",{className:"font-medium text-gray-700 p-2",children:"Team Member"}),D.map(L=>t.jsxs("div",{className:"text-center p-2",children:[t.jsx("div",{className:"font-medium text-gray-700",children:L.toLocaleDateString("en-US",{weekday:"short"})}),t.jsx("div",{className:"text-sm text-gray-500",children:L.getDate()})]},L.toISOString()))]}),y.map(L=>{var re;return t.jsx(q,{className:"overflow-hidden",children:t.jsx(Q,{className:"p-0",children:t.jsxs("div",{className:"grid grid-cols-8 gap-2",children:[t.jsxs("div",{className:"p-4 bg-gray-50 flex items-center space-x-3",children:[t.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-medium",children:L.name.charAt(0)}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-gray-900",children:L.name}),t.jsx("div",{className:"text-sm text-gray-600",children:((re=L.skills)==null?void 0:re[0])||"No skills"})]})]}),D.map(X=>{const ne=N(X,L.id),Z=C(L.id,X),k=G(L.id,X);return t.jsxs("div",{className:"p-2 border-l border-gray-200",children:[t.jsxs("div",{className:`rounded-lg p-2 text-center ${B(k)}`,children:[t.jsxs("div",{className:"font-semibold",children:[Z,"h"]}),t.jsxs("div",{className:"text-xs mt-1",children:[ne.length," tasks"]})]}),ne.length>0&&t.jsxs("div",{className:"mt-2 space-y-1",children:[ne.slice(0,2).map(ie=>{var M,J;const pe=S.find(oe=>oe.id===ie.task_id),Ee=f.find(oe=>oe.id===ie.project_id),Re=y.find(oe=>oe.id===ie.user_id);return t.jsxs("div",{className:"text-xs bg-white rounded p-1 border",title:`${Ee==null?void 0:Ee.name}: ${pe==null?void 0:pe.name} (${(M=Re==null?void 0:Re.skills)==null?void 0:M[0]})`,children:[t.jsx("div",{className:"font-medium truncate",children:pe==null?void 0:pe.name}),t.jsxs("div",{className:"text-gray-600",children:[ie.hours_per_day,"h  ",(J=Re==null?void 0:Re.skills)==null?void 0:J[0]]})]},ie.task_id||ie.id)}),ne.length>2&&t.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["+",ne.length-2," more"]})]})]},X.toISOString())})]})})},L.id)})]})},se=()=>{const D=w(s);return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-8 gap-2 mb-4",children:[t.jsx("div",{className:"font-medium text-gray-700 p-2",children:"Project"}),D.map(L=>t.jsxs("div",{className:"text-center p-2",children:[t.jsx("div",{className:"font-medium text-gray-700",children:L.toLocaleDateString("en-US",{weekday:"short"})}),t.jsx("div",{className:"text-sm text-gray-500",children:L.getDate()})]},L.toISOString()))]}),f.map(L=>t.jsx(q,{className:"overflow-hidden",children:t.jsx(Q,{className:"p-0",children:t.jsxs("div",{className:"grid grid-cols-8 gap-2",children:[t.jsxs("div",{className:"p-4 bg-gray-50 flex items-center space-x-3",children:[t.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-full flex items-center justify-center text-white",children:t.jsx(Es,{className:"w-5 h-5"})}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-gray-900",children:L.name}),t.jsx("div",{className:"text-sm text-gray-600",children:L.category})]})]}),D.map(re=>{const X=N(re,void 0,L.id),ne=P(L.id,re),Z=new Set(X.map(k=>k.user_id)).size;return t.jsxs("div",{className:"p-2 border-l border-gray-200",children:[t.jsxs("div",{className:"rounded-lg p-2 text-center bg-blue-100 text-blue-800",children:[t.jsxs("div",{className:"font-semibold",children:[ne,"h"]}),t.jsxs("div",{className:"text-xs mt-1",children:[Z," people"]})]}),X.length>0&&t.jsxs("div",{className:"mt-2 space-y-1",children:[X.slice(0,2).map(k=>{const ie=y.find(Ee=>Ee.id===k.user_id),pe=S.find(Ee=>Ee.id===k.task_id);return t.jsxs("div",{className:"text-xs bg-white rounded p-1 border",title:`${ie==null?void 0:ie.name}: ${pe==null?void 0:pe.name}`,children:[t.jsx("div",{className:"font-medium truncate",children:ie==null?void 0:ie.name}),t.jsxs("div",{className:"text-gray-600",children:[k.hours_per_day,"h"]})]},`${k.user_id}-${k.task_id}`)}),X.length>2&&t.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["+",X.length-2," more"]})]})]},re.toISOString())})]})})},L.id))]})},H=()=>l==="team"?t.jsx("div",{className:"space-y-6",children:y.map(D=>{const L=N(s,D.id),re=C(D.id,s),X=G(D.id,s);return t.jsxs(q,{children:[t.jsx(Te,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center text-white font-medium text-lg",children:D.name.charAt(0)}),t.jsxs("div",{children:[t.jsx(Pe,{children:D.name}),t.jsx("p",{className:"text-sm text-gray-600",children:D.skills.join(", ")})]})]}),t.jsx("div",{className:"text-right",children:t.jsxs(ee,{variant:X==="available"?"success":X==="overloaded"?"danger":X==="busy"?"warning":"primary",children:[re,"h allocated"]})})]})}),t.jsx(Q,{children:L.length===0?t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx(no,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),t.jsx("p",{children:"No tasks allocated for this day"})]}):t.jsx("div",{className:"space-y-3",children:L.map(ne=>{const Z=S.find(ie=>ie.id===ne.taskId),k=f.find(ie=>ie.id===ne.projectId);return t.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"font-medium text-gray-900",children:Z==null?void 0:Z.name}),t.jsx("div",{className:"text-sm text-gray-600",children:k==null?void 0:k.name}),t.jsxs("div",{className:"flex items-center mt-1 space-x-4",children:[t.jsx(ee,{variant:"secondary",size:"sm",children:Z==null?void 0:Z.priority}),t.jsx(ee,{variant:(Z==null?void 0:Z.status)==="completed"?"success":(Z==null?void 0:Z.status)==="in-progress"?"primary":(Z==null?void 0:Z.status)==="blocked"?"danger":"default",size:"sm",children:Z==null?void 0:Z.status})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("div",{className:"font-semibold text-lg",children:[ne.hoursPerDay,"h"]}),t.jsx("div",{className:"text-sm text-gray-600",children:"allocated"})]})]},ne.taskId)})})})]},D.id)})}):t.jsx("div",{className:"space-y-6",children:f.map(D=>{const L=N(s,void 0,D.id),re=P(D.id,s),X=new Set(L.map(ne=>ne.userId)).size;return t.jsxs(q,{children:[t.jsx(Te,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-full flex items-center justify-center text-white",children:t.jsx(Es,{className:"w-6 h-6"})}),t.jsxs("div",{children:[t.jsx(Pe,{children:D.name}),t.jsx("p",{className:"text-sm text-gray-600",children:D.category})]})]}),t.jsx("div",{className:"text-right",children:t.jsxs(ee,{variant:"primary",children:[re,"h  ",X," people"]})})]})}),t.jsx(Q,{children:L.length===0?t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx(Es,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),t.jsx("p",{children:"No allocations for this project today"})]}):t.jsx("div",{className:"space-y-3",children:L.map(ne=>{const Z=y.find(ie=>ie.id===ne.userId),k=S.find(ie=>ie.id===ne.taskId);return t.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"font-medium text-gray-900",children:k==null?void 0:k.name}),t.jsxs("div",{className:"text-sm text-gray-600",children:["Assigned to: ",Z==null?void 0:Z.name]}),t.jsxs("div",{className:"flex items-center mt-1 space-x-4",children:[t.jsx(ee,{variant:"secondary",size:"sm",children:k==null?void 0:k.priority}),t.jsx(ee,{variant:(k==null?void 0:k.status)==="completed"?"success":(k==null?void 0:k.status)==="in-progress"?"primary":(k==null?void 0:k.status)==="blocked"?"danger":"default",size:"sm",children:k==null?void 0:k.status})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("div",{className:"font-semibold text-lg",children:[ne.hoursPerDay,"h"]}),t.jsx("div",{className:"text-sm text-gray-600",children:"allocated"})]})]},`${ne.userId}-${ne.taskId}`)})})})]},D.id)})});return t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Daily Allocations"}),t.jsx("p",{className:"text-gray-600",children:"View team member and project task allocations"})]}),t.jsx(_,{icon:t.jsx(yt,{className:"w-4 h-4"}),onClick:()=>c(!0),children:"Add Allocation"})]}),t.jsxs("div",{className:"flex items-center justify-between bg-white p-4 rounded-lg border border-gray-200",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(_,{variant:"ghost",size:"sm",onClick:()=>$("prev"),children:t.jsx(Dp,{className:"w-4 h-4"})}),t.jsx("div",{className:"font-medium text-gray-900 min-w-[200px] text-center",children:fe()}),t.jsx(_,{variant:"ghost",size:"sm",onClick:()=>$("next"),children:t.jsx(ys,{className:"w-4 h-4"})})]}),t.jsx(_,{variant:"outline",size:"sm",onClick:()=>r(new Date),children:"Today"})]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Group by:"}),t.jsxs(_,{variant:l==="team"?"primary":"ghost",size:"sm",onClick:()=>i("team"),children:[t.jsx(lt,{className:"w-4 h-4 mr-1"}),"Team"]}),t.jsxs(_,{variant:l==="project"?"primary":"ghost",size:"sm",onClick:()=>i("project"),children:[t.jsx(Es,{className:"w-4 h-4 mr-1"}),"Project"]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(_,{variant:n==="day"?"primary":"ghost",size:"sm",onClick:()=>a("day"),children:"Day"}),t.jsx(_,{variant:n==="week"?"primary":"ghost",size:"sm",onClick:()=>a("week"),children:"Week"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[t.jsx(q,{children:t.jsx(Q,{className:"p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"p-2 rounded-lg bg-blue-50",children:t.jsx(no,{className:"w-6 h-6 text-blue-600"})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Team"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y.length})]})]})})}),t.jsx(q,{children:t.jsx(Q,{className:"p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"p-2 rounded-lg bg-green-50",children:t.jsx(cr,{className:"w-6 h-6 text-green-600"})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Available"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y.filter(D=>G(D.id,s)==="available").length})]})]})})}),t.jsx(q,{children:t.jsx(Q,{className:"p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"p-2 rounded-lg bg-yellow-50",children:t.jsx(js,{className:"w-6 h-6 text-yellow-600"})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Busy"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y.filter(D=>G(D.id,s)==="busy").length})]})]})})}),t.jsx(q,{children:t.jsx(Q,{className:"p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"p-2 rounded-lg bg-red-50",children:t.jsx(zt,{className:"w-6 h-6 text-red-600"})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Overloaded"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y.filter(D=>G(D.id,s)==="overloaded").length})]})]})})})]}),j&&t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(zt,{className:"w-5 h-5 text-red-400 mr-2"}),t.jsx("span",{className:"text-red-800",children:j})]})}),g&&t.jsxs("div",{className:"flex items-center justify-center py-12",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),t.jsx("span",{className:"ml-2 text-gray-600",children:"Loading allocations..."})]}),!g&&(n==="week"?l==="team"?le():se():H()),t.jsx(E0,{isOpen:o,onClose:()=>c(!1),onSubmit:E,users:y,projects:f,tasks:S})]})}function E0({isOpen:e,onClose:s,onSubmit:r,users:n,projects:a,tasks:l}){const[i,o]=u.useState({userId:"",projectId:"",taskId:"",hoursPerDay:8,startDate:new Date().toISOString().split("T")[0],endDate:new Date(Date.now()+6048e5).toISOString().split("T")[0]}),c=x=>{x.preventDefault(),r({...i,startDate:new Date(i.startDate),endDate:new Date(i.endDate)}),o({userId:"",projectId:"",taskId:"",hoursPerDay:8,startDate:new Date().toISOString().split("T")[0],endDate:new Date(Date.now()+7*24*60*60*1e3).toISOString().split("T")[0]})},m=(l||[]).filter(x=>!i.projectId||x.projectId===i.projectId);return t.jsx(ot,{isOpen:e,onClose:s,title:"Add Team Allocation",size:"lg",children:t.jsxs("form",{onSubmit:c,className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Team Member *"}),t.jsxs("select",{required:!0,value:i.userId,onChange:x=>o({...i,userId:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"",children:"Select Team Member"}),n.map(x=>t.jsx("option",{value:x.id,children:x.name},x.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project *"}),t.jsxs("select",{required:!0,value:i.projectId,onChange:x=>o({...i,projectId:x.target.value,taskId:""}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"",children:"Select Project"}),a.map(x=>t.jsx("option",{value:x.id,children:x.name},x.id))]})]}),t.jsxs("div",{className:"col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Task *"}),t.jsxs("select",{required:!0,value:i.taskId,onChange:x=>o({...i,taskId:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:!i.projectId,children:[t.jsx("option",{value:"",children:"Select Task"}),m.map(x=>t.jsx("option",{value:x.id,children:x.name},x.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hours per Day"}),t.jsx("input",{type:"number",min:"0.5",max:"12",step:"0.5",value:i.hoursPerDay,onChange:x=>o({...i,hoursPerDay:parseFloat(x.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),t.jsx("input",{type:"date",value:i.startDate,onChange:x=>o({...i,startDate:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),t.jsx("input",{type:"date",value:i.endDate,onChange:x=>o({...i,endDate:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx(_,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),t.jsx(_,{type:"submit",children:"Add Allocation"})]})]})})}function I0(){const[e,s]=u.useState("categories"),[r,n]=u.useState(!1),[a,l]=u.useState(null),[i,o]=u.useState(!1),[c,m]=u.useState(null),[x,y]=u.useState("eLearning Design"),d=async M=>{try{E(!0);const J=j.find(oe=>oe.name===M);if(J){console.log("Loading stages for category:",M,"ID:",J.id);const oe=await Ot.getByCategory(J.id);console.log("Stages data received:",oe),$(oe)}}catch(J){console.error("Failed to load stages for category:",J),$([])}finally{E(!1)}},[f,b]=u.useState([]),[S,z]=u.useState([]),[g,h]=u.useState("admin"),[j,I]=u.useState([]),[F,v]=u.useState([]),[w,N]=u.useState(!0),[C,P]=u.useState([{id:"1",name:"Content Development Unit",description:"Responsible for creating and developing educational content",skills:["Content Writers","Instructional Designers"],lead:"Sarah Johnson",isDefault:!0}]),{signUp:G}=Ss(),[B,$]=u.useState([]),[fe,E]=u.useState(!1);u.useEffect(()=>{(async()=>{var J;try{N(!0);const[oe,de]=await Promise.all([er.getAll(),Ns.getAll()]);if(I(oe),v(de),oe.length>0&&(oe.find(Ce=>Ce.name===x)||y(oe[0].name)),oe.length>0){const be=(J=oe.find(Ce=>Ce.name===x))==null?void 0:J.id;if(be){console.log("Initial load - Loading stages for category:",x,"ID:",be);const Ce=await Ot.getByCategory(be);console.log("Initial stages data received:",Ce),$(Ce)}}b([{id:"1",name:"Admin User",email:"admin@company.com",role:"admin",createdAt:new Date,isActive:!0}]);const ve=await Fe.getAll();z(ve)}catch(oe){console.error("Failed to load data:",oe)}finally{N(!1)}})()},[x]);const le=[{key:"categories",label:"Categories",icon:Op},{key:"skills",label:"Skills",icon:lt},{key:"stages",label:"Project Stages",icon:ta}],se=async(M,J)=>{var oe;try{if(M==="category")if(a!=null&&a.id){const de=await er.update(a.id,{name:J.name,description:J.description||null});I(j.map(ve=>ve.id===a.id?de:ve))}else{const de=await er.create({name:J.name,description:J.description||null});I([...j,de])}else if(M==="skill")if(a!=null&&a.id){const de=await Ns.update(a.id,{name:J.name,description:J.description||null});v(F.map(ve=>ve.id===a.id?de:ve))}else{const de=await Ns.create({name:J.name,description:J.description||null});v([...F,de])}else if(M==="stage")try{if(a!=null&&a.id){const de=await Ot.update(a.id,{name:J.name,description:J.description||null});await d(x)}else{const de=await Ot.create({name:J.name,description:J.description||null,order_index:B.length+1}),ve=(oe=j.find(be=>be.name===x))==null?void 0:oe.id;ve&&await li.create({category_id:ve,stage_id:de.id,order_index:B.length+1,is_default:!1}),await d(x)}}catch(de){console.error("Failed to save stage:",de),alert("Failed to save stage. Please try again.")}else if(M==="admin-user"){L(J,"admin");return}else if(M==="team-user"){L(J,"team");return}else if(M==="functional-unit"){const de={id:Date.now().toString(),name:J.name,description:J.description||"",skills:J.skills||[],lead:J.lead||"",isDefault:!1};P([...C,de])}n(!1),l(null)}catch(de){console.error("Failed to add item:",de),alert("Failed to add item. Please try again.")}},H=async(M,J)=>{M==="category"||M==="skill"?(l({...J,type:M}),n(!0)):(l({...J,type:M}),n(!0))},D=async(M,J)=>{var oe;try{if(M==="category")await er.delete(J),I(j.filter(de=>de.id!==J));else if(M==="skill")await Ns.delete(J),v(F.filter(de=>de.id!==J));else if(M==="stage")try{const de=(oe=j.find(ve=>ve.name===x))==null?void 0:oe.id;if(de)try{const be=(await li.getByCategory(de)).find(Ce=>Ce.stage_id===J);be&&await li.delete(be.id)}catch{console.log("No stage template found to delete")}await Ot.delete(J),$(B.filter(ve=>ve.id!==J))}catch(de){console.error("Failed to delete stage:",de),alert("Failed to delete stage. Please try again.")}else M==="admin-user"?b(f.filter(de=>de.id!==J)):M==="team-user"?ne(J):M==="functional-unit"&&P(C.filter(de=>de.id!==J))}catch(de){console.error("Failed to delete item:",de),alert("Failed to delete item. Please try again.")}},L=async(M,J)=>{try{if(J==="admin"){const{data:oe,error:de}=await G(M.email,M.password,M.name);if(de)throw de;if(oe.user){const ve={id:oe.user.id,name:M.name,email:M.email,role:"admin",createdAt:new Date,isActive:!0};b([...f,ve])}}else{const oe={name:M.name,email:M.email,skills:M.skills||[],passcode:M.passcode||Math.random().toString(36).substring(2,8).toUpperCase(),isActive:M.isActive!==!1,performanceFlags:[]},de=await Fe.create(oe),ve={...oe,id:de.id};z([...S,ve])}n(!1),l(null)}catch(oe){console.error("Failed to create admin user:",oe),alert(`Failed to create user: ${oe.message}`)}},re=async(M,J)=>{try{if(J==="admin"){alert("Admin user access control requires server-side implementation");return}else{const oe=S.find(de=>de.id===M);if(oe){const de={...oe,isActive:!oe.isActive};await Fe.update(M,de),z(S.map(ve=>ve.id===M?de:ve))}}}catch(oe){console.error("Failed to toggle user access:",oe),alert("Failed to toggle user access")}},X=async(M,J)=>{m(M),h(J),o(!0)},ne=async M=>{try{z(S.filter(J=>J.id!==M))}catch(J){console.error("Failed to delete team member:",J)}},Z=async(M,J)=>{var oe;try{console.log("moveStage called:",{stageId:M,direction:J,currentStages:B});const de=[...B].sort((te,V)=>(te.template_order||te.order_index)-(V.template_order||V.order_index)),ve=de.findIndex(te=>te.id===M);if(console.log("Stage index found:",ve),ve===-1){console.log("Stage not found, returning");return}const be=[...de],Ce=J==="up"?ve-1:ve+1;if(console.log("Target index:",Ce),Ce<0||Ce>=be.length){console.log("Target index out of bounds, returning");return}[be[ve],be[Ce]]=[be[Ce],be[ve]],console.log("Stages swapped"),be.forEach((te,V)=>{te.template_order=V+1}),console.log("Order numbers updated:",be.map(te=>({id:te.id,order:te.template_order}))),$(be),console.log("Stages state updated");const Ke=(oe=j.find(te=>te.name===x))==null?void 0:oe.id;if(Ke){const te=be.map((V,ge)=>({stage_id:V.id,order:ge+1}));console.log("Sending reorder request:",{categoryId:Ke,stageOrders:te}),await Ot.reorder(Ke,te),console.log("Reorder request completed successfully")}}catch(de){console.error("Failed to reorder stages:",de),alert("Failed to reorder stages. Please try again.")}},k=()=>t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Project Categories"}),t.jsx(_,{icon:t.jsx(yt,{className:"w-4 h-4"}),onClick:()=>{l({type:"category"}),n(!0)},children:"Add Category"})]}),w?t.jsx("div",{className:"flex items-center justify-center py-8",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Loading categories..."})]})}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:j.map(M=>t.jsx(q,{className:"hover:shadow-md transition-shadow",children:t.jsx(Q,{className:"p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900",children:M.name}),t.jsx("p",{className:"text-sm text-gray-600",children:M.isDefault?"Default category":"Custom category"})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(_,{variant:"ghost",size:"sm",onClick:()=>H("category",M),children:t.jsx(Ys,{className:"w-4 h-4"})}),!M.isDefault&&t.jsx(_,{variant:"ghost",size:"sm",onClick:()=>D("category",M.id),children:t.jsx(Ct,{className:"w-4 h-4"})})]})]})})},M.id))})]}),ie=()=>t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Team Skills"}),t.jsx(_,{icon:t.jsx(yt,{className:"w-4 h-4"}),onClick:()=>{l({type:"skill"}),n(!0)},children:"Add Skill"})]}),w?t.jsx("div",{className:"flex items-center justify-center py-8",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Loading skills..."})]})}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:F.map(M=>t.jsx(q,{className:"hover:shadow-md transition-shadow",children:t.jsx(Q,{className:"p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900",children:M.name}),t.jsx("p",{className:"text-sm text-gray-600",children:M.isDefault?"Default skill":"Custom skill"})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(_,{variant:"ghost",size:"sm",onClick:()=>H("skill",M),children:t.jsx(Ys,{className:"w-4 h-4"})}),!M.isDefault&&t.jsx(_,{variant:"ghost",size:"sm",onClick:()=>D("skill",M.id),children:t.jsx(Ct,{className:"w-4 h-4"})})]})]})})},M.id))})]}),pe=()=>t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Project Stages"}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("select",{value:x,onChange:M=>{y(M.target.value),d(M.target.value)},className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:j.map(M=>t.jsx("option",{value:M.name,children:M.name},M.id))}),t.jsx(_,{icon:t.jsx(yt,{className:"w-4 h-4"}),onClick:()=>{l({type:"stage"}),n(!0)},children:"Add Stage"})]})]}),t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[t.jsxs("h4",{className:"font-medium text-blue-900 mb-2",children:["Category: ",x]}),t.jsxs("p",{className:"text-sm text-blue-700",children:["These stages are specific to ",t.jsx("strong",{children:x})," projects. Each category can have its own unique workflow."]})]}),t.jsx(q,{children:t.jsx(Q,{className:"p-0",children:t.jsx("div",{className:"space-y-2 p-4",children:fe?t.jsx("div",{className:"flex items-center justify-center py-8",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Loading stages..."})]})}):B.length===0?t.jsxs("div",{className:"text-center py-8",children:[t.jsxs("div",{className:"text-gray-500 mb-4",children:[t.jsx(ta,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),t.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"No stages found"}),t.jsx("p",{className:"text-gray-600",children:"No stages have been created for this category yet."})]}),t.jsx(_,{icon:t.jsx(yt,{className:"w-4 h-4"}),onClick:()=>{l({type:"stage"}),n(!0)},children:"Add First Stage"})]}):B.sort((M,J)=>(M.template_order||M.order_index)-(J.template_order||J.order_index)).map((M,J,oe)=>t.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("div",{className:"flex flex-col space-y-1",children:[t.jsx(_,{variant:"ghost",size:"sm",onClick:()=>Z(M.id,"up"),disabled:J===0,className:"h-6 w-6 p-0",children:""}),t.jsx(_,{variant:"ghost",size:"sm",onClick:()=>Z(M.id,"down"),disabled:J===oe.length-1,className:"h-6 w-6 p-0",children:""})]}),t.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-blue-100 text-blue-600 rounded-full font-semibold text-sm",children:M.template_order||M.order_index}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900",children:M.name}),t.jsx("p",{className:"text-sm text-gray-600",children:M.description})]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[M.is_default&&t.jsx(ee,{variant:"secondary",size:"sm",children:"Default"}),t.jsx(_,{variant:"ghost",size:"sm",onClick:()=>H("stage",M),children:t.jsx(Ys,{className:"w-4 h-4"})}),!M.is_default&&t.jsx(_,{variant:"ghost",size:"sm",onClick:()=>D("stage",M.id),children:t.jsx(Ct,{className:"w-4 h-4"})})]})]},M.id))})})})]}),Ee=()=>t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"User Management"}),t.jsxs("div",{className:"flex items-center space-x-2 bg-gray-100 rounded-lg p-1",children:[t.jsx(_,{variant:g==="admin"?"primary":"ghost",size:"sm",onClick:()=>h("admin"),children:"Admin Users"}),t.jsx(_,{variant:g==="team"?"primary":"ghost",size:"sm",onClick:()=>h("team"),children:"Team Members"})]})]}),t.jsxs(_,{icon:t.jsx(yt,{className:"w-4 h-4"}),onClick:()=>{l({type:g==="admin"?"admin-user":"team-user"}),n(!0)},children:["Add ",g==="admin"?"Admin User":"Team Member"]})]}),t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[t.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:g==="admin"?"Admin User Management":"Team Member Management"}),t.jsx("p",{className:"text-sm text-blue-700",children:g==="admin"?"Admin users can access the full project management system. They can manage projects, teams, tasks, and settings.":"Team members can access the team portal to view their tasks and performance. They use email and passcode to login."})]}),t.jsx(q,{children:t.jsx(Q,{className:"p-0",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:g==="admin"?"Admin User":"Team Member"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),g==="team"&&t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Passcode"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:g==="admin"?"Role":"Skills"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:g==="admin"?"Created":"Performance"}),t.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(g==="admin"?f:S).map(M=>{var J,oe,de,ve;return t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:`w-8 h-8 ${g==="admin"?"bg-blue-500":"bg-green-500"} rounded-full flex items-center justify-center text-white text-sm font-medium`,children:M.name.charAt(0).toUpperCase()}),t.jsx("div",{className:"ml-3",children:t.jsx("div",{className:"text-sm font-medium text-gray-900",children:M.name})})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:M.email}),g==="team"&&t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("code",{className:"text-xs bg-gray-100 px-2 py-1 rounded font-mono",children:M.passcode})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g==="admin"?t.jsx(ee,{variant:"primary",size:"sm",children:M.role}):t.jsxs("div",{className:"flex flex-wrap gap-1",children:[(J=M.skills)==null?void 0:J.slice(0,2).map((be,Ce)=>t.jsx(ee,{variant:"secondary",size:"sm",children:be},Ce)),((oe=M.skills)==null?void 0:oe.length)>2&&t.jsxs(ee,{variant:"secondary",size:"sm",children:["+",M.skills.length-2]})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.jsx(ee,{variant:M.isActive?"success":"secondary",children:M.isActive?"Active":"Disabled"})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:g==="admin"?((de=M.createdAt)==null?void 0:de.toLocaleDateString())||"N/A":t.jsx("div",{className:"flex space-x-1",children:(ve=M.performanceFlags)==null?void 0:ve.slice(0,3).map(be=>t.jsx("div",{className:`text-xs px-2 py-1 rounded ${be.type==="gold"?"bg-yellow-500 text-white":be.type==="green"?"bg-green-500 text-white":be.type==="orange"?"bg-orange-500 text-white":"bg-red-500 text-white"}`,title:be.reason,children:be.type},be.id))})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:t.jsxs(_,{variant:"ghost",size:"sm",onClick:()=>D("user",M.id),children:[t.jsx(_,{variant:"ghost",size:"sm",onClick:()=>X(M,g),title:g==="admin"?"Reset Password":"Reset Passcode",children:t.jsx(Ap,{className:"w-4 h-4"})}),t.jsx(_,{variant:"ghost",size:"sm",onClick:()=>re(M.id,g),title:M.isActive?"Disable Access":"Enable Access",children:M.isActive?t.jsx(ia,{className:"w-4 h-4"}):t.jsx(Hs,{className:"w-4 h-4"})}),t.jsx(_,{variant:"ghost",size:"sm",onClick:()=>D(g==="admin"?"admin-user":"team-user",M.id),children:t.jsx(Ct,{className:"w-4 h-4"})})]})})]},M.id)})})]})})})})]}),Re=()=>t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Functional Units"}),t.jsx(_,{icon:t.jsx(yt,{className:"w-4 h-4"}),onClick:()=>{l({type:"functional-unit"}),n(!0)},children:"Add Functional Unit"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:C.map(M=>t.jsx(q,{className:"hover:shadow-md transition-shadow",children:t.jsx(Q,{className:"p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900",children:M.name}),t.jsx("p",{className:"text-sm text-gray-600",children:M.description}),M.skills&&M.skills.length>0&&t.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:M.skills.map((J,oe)=>t.jsx(ee,{variant:"secondary",size:"sm",children:J},oe))}),M.lead&&t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Lead: ",M.lead]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(_,{variant:"ghost",size:"sm",onClick:()=>H("functional-unit",M),children:t.jsx(Ys,{className:"w-4 h-4"})}),!M.isDefault&&t.jsx(_,{variant:"ghost",size:"sm",onClick:()=>D("functional-unit",M.id),children:t.jsx(Ct,{className:"w-4 h-4"})})]})]})})},M.id))})]});return t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsx("div",{className:"relative",children:t.jsx("div",{className:"rounded-2xl bg-gradient-to-r from-indigo-600 via-blue-600 to-cyan-500 text-white p-6 shadow-lg",children:t.jsx("div",{className:"flex items-center justify-between gap-6",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Settings"}),t.jsx("p",{className:"text-white/80",children:"Manage categories, skills, and project stages"})]})})})}),t.jsx("div",{className:"border-b border-gray-200",children:t.jsx("nav",{className:"-mb-px flex space-x-8",children:le.map(M=>t.jsxs("button",{onClick:()=>s(M.key),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${e===M.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[t.jsx(M.icon,{className:"w-4 h-4"}),t.jsx("span",{children:M.label})]},M.key))})}),t.jsxs("div",{children:[e==="categories"&&k(),e==="skills"&&ie(),e==="stages"&&pe(),e==="users"&&Ee(),e==="functional-units"&&Re()]}),t.jsx(M0,{isOpen:r,onClose:()=>{n(!1),l(null)},onSubmit:se,editingItem:a})]})}function M0({isOpen:e,onClose:s,onSubmit:r,editingItem:n}){const[a,l]=u.useState({name:"",description:"",email:"",password:"",showPassword:!1,skills:[],lead:""});u.useEffect(()=>{l(n?{name:n.name||"",description:n.description||"",email:n.email||"",password:"",showPassword:!1,skills:n.skills||[],lead:n.lead||""}:{name:"",description:"",email:"",password:"",showPassword:!1,skills:[],lead:""})},[n]);const i=c=>{c.preventDefault(),n!=null&&n.type&&r(n.type,a),l({name:"",description:"",email:"",password:"",showPassword:!1,skills:[],lead:""})},o=()=>{if(!n)return"Add Item";const c=n.id?"Edit":"Add",m=n.type==="category"?"Category":n.type==="skill"?"Skill":n.type==="stage"?"Stage":n.type==="functional-unit"?"Functional Unit":"Admin User";return`${c} ${m}`};return t.jsx(ot,{isOpen:e,onClose:s,title:o(),children:t.jsxs("form",{onSubmit:i,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name"}),t.jsx("input",{type:"text",required:!0,value:a.name,onChange:c=>l({...a,name:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:`Enter ${(n==null?void 0:n.type)||"item"} name`})]}),((n==null?void 0:n.type)==="admin-user"||(n==null?void 0:n.type)==="team-user")&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),t.jsx("input",{type:"email",required:!0,value:a.email,onChange:c=>l({...a,email:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter email address"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:a.showPassword?"text":"password",required:!0,value:a.password,onChange:c=>l({...a,password:c.target.value}),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter password",minLength:6}),t.jsx("button",{type:"button",onClick:()=>l({...a,showPassword:!a.showPassword}),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:a.showPassword?t.jsx(ia,{className:"w-4 h-4 text-gray-400"}):t.jsx(Hs,{className:"w-4 h-4 text-gray-400"})})]})]})]}),((n==null?void 0:n.type)==="stage"||(n==null?void 0:n.type)==="functional-unit")&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),t.jsx("textarea",{value:a.description,onChange:c=>l({...a,description:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:`Enter ${(n==null?void 0:n.type)==="stage"?"stage":"functional unit"} description`})]}),(n==null?void 0:n.type)==="functional-unit"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Skills"}),t.jsx("div",{className:"grid grid-cols-3 gap-2 max-h-32 overflow-y-auto border border-gray-300 rounded-lg p-2",children:["Content Writers","Instructional Designers","Graphic Designers","Developers","Animators","Tech","Sales","Marketing","QA"].map(c=>t.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:a.skills.includes(c),onChange:m=>{m.target.checked?l({...a,skills:[...a.skills,c]}):l({...a,skills:a.skills.filter(x=>x!==c)})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:c})]},c))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unit Lead (Optional)"}),t.jsx("input",{type:"text",value:a.lead,onChange:c=>l({...a,lead:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter unit lead name"})]})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx(_,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),t.jsx(_,{type:"submit",children:n!=null&&n.id?"Update":"Add"})]})]})})}function A0(){const[e,s]=u.useState("month"),[r,n]=u.useState("overview"),[a,l]=u.useState("all"),[i,o]=u.useState("all"),[c,m]=u.useState(!0),[x,y]=u.useState(!1),[d,f]=u.useState({projects:[],tasks:[],teamMembers:[],categories:[],skills:[]});u.useEffect(()=>{b()},[]);const b=async()=>{try{m(!0);const[v,w,N,C,P]=await Promise.all([Ve.getAll(),We.getAll({all:"true"}),Fe.getAll(),er.getAll(),Ns.getAll()]);f({projects:v.data||v,tasks:w.data||w,teamMembers:N.data||N,categories:C.data||C,skills:P.data||P})}catch(v){console.error("Failed to load analytics data:",v)}finally{m(!1)}},S=async()=>{y(!0),await b(),y(!1)},z=u.useMemo(()=>{const v=a==="all"?d.projects||[]:(d.projects||[]).filter(B=>B.category_id===parseInt(a)),w=i==="all"?d.tasks||[]:(d.tasks||[]).filter(B=>B.skills&&B.skills.includes(parseInt(i))),N=new Date,C={week:7,month:30,quarter:90,year:365}[e],P=(d.tasks||[]).filter(B=>{const $=new Date(B.created_at);return(N.getTime()-$.getTime())/(1e3*3600*24)<=C}),G=(d.projects||[]).filter(B=>{const $=new Date(B.created_at);return(N.getTime()-$.getTime())/(1e3*3600*24)<=C});return{projectStats:{total:v.length,active:v.filter(B=>B.status==="active").length,completed:v.filter(B=>B.status==="completed").length,onHold:v.filter(B=>B.status==="on-hold").length,recent:G.length,avgDuration:v.length>0?Math.round(v.reduce((B,$)=>{if($.start_date&&$.end_date){const fe=new Date($.start_date),E=new Date($.end_date);return B+(E.getTime()-fe.getTime())/(1e3*3600*24)}return B},0)/v.length):0},taskStats:{total:w.length,completed:w.filter(B=>B.status==="completed").length,inProgress:w.filter(B=>B.status==="in-progress").length,overdue:w.filter(B=>{if(!B.end_date||B.status==="completed")return!1;const $=new Date;$.setHours(0,0,0,0);const fe=new Date(B.end_date);return fe.setHours(0,0,0,0),fe<$}).length,recent:P.length,avgCompletionTime:w.filter(B=>B.status==="completed").length>0?Math.round(w.filter(B=>B.status==="completed").reduce((B,$)=>{if($.created_at&&$.updated_at){const fe=new Date($.created_at),E=new Date($.updated_at);return B+(E.getTime()-fe.getTime())/(1e3*3600*24)}return B},0)/w.filter(B=>B.status==="completed").length):0},teamStats:{total:(d.teamMembers||[]).length,active:(d.teamMembers||[]).filter(B=>w.some($=>$.assignees&&$.assignees.includes(B.id)&&$.status!=="completed")).length,available:(d.teamMembers||[]).filter(B=>!w.some($=>$.assignees&&$.assignees.includes(B.id)&&$.status!=="completed")).length,utilization:(d.teamMembers||[]).length>0?Math.round((d.teamMembers||[]).filter(B=>w.some($=>$.assignees&&$.assignees.includes(B.id)&&$.status!=="completed")).length/(d.teamMembers||[]).length*100):0},productivity:{completionRate:w.length>0?Math.round(w.filter(B=>B.status==="completed").length/w.length*100):0,averageProgress:v.length>0?Math.round(v.reduce((B,$)=>B+($.progress||0),0)/v.length):0,efficiency:w.length>0?Math.round(w.filter(B=>B.status==="completed").length/w.length*100):0},trends:{taskGrowth:P.length>0?Math.round(P.length/(d.tasks||[]).length*100):0,projectGrowth:G.length>0?Math.round(G.length/(d.projects||[]).length*100):0,completionTrend:P.filter(B=>B.status==="completed").length>0?Math.round(P.filter(B=>B.status==="completed").length/P.length*100):0}}},[d,e,a,i]),g=u.useMemo(()=>(d.categories||[]).map(v=>({name:v.name,count:(d.projects||[]).filter(w=>w.category_id===v.id).length,percentage:(d.projects||[]).length>0?Math.round((d.projects||[]).filter(w=>w.category_id===v.id).length/(d.projects||[]).length*100):0,avgProgress:(d.projects||[]).filter(w=>w.category_id===v.id).length>0?Math.round((d.projects||[]).filter(w=>w.category_id===v.id).reduce((w,N)=>w+(N.progress||0),0)/(d.projects||[]).filter(w=>w.category_id===v.id).length):0,completionRate:(d.projects||[]).filter(w=>w.category_id===v.id).length>0?Math.round((d.projects||[]).filter(w=>w.category_id===v.id&&w.status==="completed").length/(d.projects||[]).filter(w=>w.category_id===v.id).length*100):0})),[d]),h=u.useMemo(()=>(d.skills||[]).map(v=>{const w=(d.tasks||[]).filter(C=>C.skills&&C.skills.includes(v.id)),N=(d.teamMembers||[]).filter(C=>C.skills&&C.skills.includes(v.id));return{name:v.name,users:N.length,activeTasks:w.filter(C=>C.status!=="completed").length,totalTasks:w.length,completionRate:w.length>0?Math.round(w.filter(C=>C.status==="completed").length/w.length*100):0,demand:w.length>0?Math.round(w.length/(d.tasks||[]).length*100):0}}),[d]),j=u.useMemo(()=>(d.teamMembers||[]).map(v=>{const w=(d.tasks||[]).filter(G=>G.assignees&&G.assignees.includes(v.id)),N=w.filter(G=>G.status==="completed"),C=w.length>0?Math.round(N.length/w.length*100):0,P=w.length>0?Math.round(C*.4+w.filter(G=>{if(G.status!=="completed")return!1;const B=new Date;B.setHours(0,0,0,0);const $=new Date(G.end_date);return $.setHours(0,0,0,0),$>=B}).length/w.length*60):0;return{...v,totalTasks:w.length,completedTasks:N.length,completionRate:C,efficiencyScore:P,avgTaskDuration:N.length>0?Math.round(N.reduce((G,B)=>{if(B.created_at&&B.updated_at){const $=new Date(B.created_at),fe=new Date(B.updated_at);return G+(fe.getTime()-$.getTime())/(1e3*3600*24)}return G},0)/N.length):0}}).sort((v,w)=>w.efficiencyScore-v.efficiencyScore).slice(0,5),[d]),I=u.useMemo(()=>{const v=(d.tasks||[]).filter(C=>{if(!C.end_date||C.status==="completed")return!1;const P=new Date;P.setHours(0,0,0,0);const G=new Date(C.end_date);return G.setHours(0,0,0,0),G<P}),w=(d.tasks||[]).filter(C=>C.priority==="high"),N=(d.projects||[]).filter(C=>(C.progress||0)<30);return{overdueTasks:v.length,highPriorityTasks:w.length,lowProgressProjects:N.length,riskScore:Math.round((v.length*.4+w.length*.3+N.length*.3)/Math.max((d.tasks||[]).length+(d.projects||[]).length,1)*100),efficiencyGap:z.productivity.completionRate>0?Math.round((100-z.productivity.completionRate)/10):0}},[d,z]),F=u.useMemo(()=>{const v=new Date,w=(d.tasks||[]).filter(C=>{const P=new Date(C.created_at);return(v.getTime()-P.getTime())/(1e3*3600*24)<=7}),N=(d.tasks||[]).filter(C=>{const P=new Date(C.created_at);return(v.getTime()-P.getTime())/(1e3*3600*24)<=30});return{weeklyGrowth:w.length>0?Math.round(w.length/d.tasks.length*100):0,monthlyGrowth:N.length>0?Math.round(N.length/d.tasks.length*100):0,weeklyCompletion:w.filter(C=>C.status==="completed").length,monthlyCompletion:N.filter(C=>C.status==="completed").length}},[d]);return c?t.jsx("div",{className:"p-6 space-y-6",children:t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Loading analytics data..."})]})})}):t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Analytics Dashboard"}),t.jsx("p",{className:"text-gray-600",children:"Advanced insights and performance metrics for your projects"})]}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 rounded-lg p-1",children:[t.jsxs(_,{variant:r==="overview"?"primary":"ghost",size:"sm",onClick:()=>n("overview"),children:[t.jsx(Hs,{className:"w-4 h-4 mr-1"}),"Overview"]}),t.jsxs(_,{variant:r==="detailed"?"primary":"ghost",size:"sm",onClick:()=>n("detailed"),children:[t.jsx(_p,{className:"w-4 h-4 mr-1"}),"Detailed"]}),t.jsxs(_,{variant:r==="trends"?"primary":"ghost",size:"sm",onClick:()=>n("trends"),children:[t.jsx(un,{className:"w-4 h-4 mr-1"}),"Trends"]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsxs("select",{value:a,onChange:v=>l(v.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[t.jsx("option",{value:"all",children:"All Categories"}),d.categories.map(v=>t.jsx("option",{value:v.id,children:v.name},v.id))]}),t.jsxs("select",{value:i,onChange:v=>o(v.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[t.jsx("option",{value:"all",children:"All Skills"}),d.skills.map(v=>t.jsx("option",{value:v.id,children:v.name},v.id))]}),t.jsxs("select",{value:e,onChange:v=>s(v.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[t.jsx("option",{value:"week",children:"Last Week"}),t.jsx("option",{value:"month",children:"Last Month"}),t.jsx("option",{value:"quarter",children:"Last Quarter"}),t.jsx("option",{value:"year",children:"Last Year"})]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsxs(_,{variant:"outline",size:"sm",onClick:S,disabled:x,children:[t.jsx(to,{className:`w-4 h-4 mr-1 ${x?"animate-spin":""}`}),"Refresh"]}),t.jsxs(_,{variant:"outline",size:"sm",children:[t.jsx(Pp,{className:"w-4 h-4 mr-1"}),"Export"]})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[t.jsx(q,{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:t.jsx(Q,{className:"p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("p",{className:"text-blue-100 text-sm font-medium",children:"Efficiency Score"}),t.jsx(ee,{variant:"default",className:"bg-blue-400 text-white text-xs",children:z.productivity.efficiency>z.productivity.completionRate?t.jsx(kp,{className:"w-3 h-3"}):t.jsx(Np,{className:"w-3 h-3"})})]}),t.jsxs("p",{className:"text-3xl font-bold",children:[z.productivity.efficiency,"%"]}),t.jsxs("p",{className:"text-blue-100 text-sm",children:[z.productivity.completionRate,"% completion rate"]})]}),t.jsx(so,{className:"w-12 h-12 text-blue-200"})]})})}),t.jsx(q,{className:"bg-gradient-to-r from-green-500 to-green-600 text-white",children:t.jsx(Q,{className:"p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("p",{className:"text-green-100 text-sm font-medium",children:"Team Utilization"}),t.jsxs(ee,{variant:"default",className:"bg-green-400 text-white text-xs",children:[z.teamStats.utilization,"%"]})]}),t.jsx("p",{className:"text-3xl font-bold",children:z.teamStats.active}),t.jsxs("p",{className:"text-green-100 text-sm",children:["of ",z.teamStats.total," members active"]})]}),t.jsx(lt,{className:"w-12 h-12 text-green-200"})]})})}),t.jsx(q,{className:"bg-gradient-to-r from-purple-500 to-purple-600 text-white",children:t.jsx(Q,{className:"p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("p",{className:"text-purple-100 text-sm font-medium",children:"Productivity"}),t.jsxs(ee,{variant:"default",className:"bg-purple-400 text-white text-xs",children:[z.trends.completionTrend,"% trend"]})]}),t.jsxs("p",{className:"text-3xl font-bold",children:[z.productivity.averageProgress,"%"]}),t.jsxs("p",{className:"text-purple-100 text-sm",children:[z.taskStats.completed,"/",z.taskStats.total," tasks done"]})]}),t.jsx($p,{className:"w-12 h-12 text-purple-200"})]})})}),t.jsx(q,{className:"bg-gradient-to-r from-red-500 to-red-600 text-white",children:t.jsx(Q,{className:"p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("p",{className:"text-red-100 text-sm font-medium",children:"Risk Score"}),t.jsxs(ee,{variant:"default",className:"bg-red-400 text-white text-xs",children:[I.riskScore,"%"]})]}),t.jsx("p",{className:"text-3xl font-bold",children:z.taskStats.overdue}),t.jsxs("p",{className:"text-red-100 text-sm",children:[I.highPriorityTasks," high priority"]})]}),t.jsx(zt,{className:"w-12 h-12 text-red-200"})]})})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsx(q,{className:"bg-gradient-to-r from-yellow-500 to-yellow-600 text-white",children:t.jsx(Q,{className:"p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-yellow-100 text-sm font-medium",children:"Weekly Growth"}),t.jsxs("p",{className:"text-2xl font-bold",children:[F.weeklyGrowth,"%"]}),t.jsxs("p",{className:"text-yellow-100 text-sm",children:[F.weeklyCompletion," completed this week"]})]}),t.jsx(un,{className:"w-10 h-10 text-yellow-200"})]})})}),t.jsx(q,{className:"bg-gradient-to-r from-indigo-500 to-indigo-600 text-white",children:t.jsx(Q,{className:"p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-indigo-100 text-sm font-medium",children:"Avg Task Duration"}),t.jsx("p",{className:"text-2xl font-bold",children:z.taskStats.avgCompletionTime}),t.jsx("p",{className:"text-indigo-100 text-sm",children:"days to complete"})]}),t.jsx(Tp,{className:"w-10 h-10 text-indigo-200"})]})})}),t.jsx(q,{className:"bg-gradient-to-r from-pink-500 to-pink-600 text-white",children:t.jsx(Q,{className:"p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-pink-100 text-sm font-medium",children:"Efficiency Gap"}),t.jsxs("p",{className:"text-2xl font-bold",children:[I.efficiencyGap,"%"]}),t.jsx("p",{className:"text-pink-100 text-sm",children:"room for improvement"})]}),t.jsx(Ep,{className:"w-10 h-10 text-pink-200"})]})})})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs(q,{children:[t.jsx(Te,{children:t.jsxs(Pe,{className:"flex items-center",children:[t.jsx(Rp,{className:"w-5 h-5 mr-2"}),"Project Status Distribution"]})}),t.jsx(Q,{className:"space-y-4",children:t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-32",children:t.jsx(Ut,{value:z.projectStats.total>0?z.projectStats.active/z.projectStats.total*100:0,variant:"default",showLabel:!1})}),t.jsx("span",{className:"text-sm text-gray-600",children:z.projectStats.active})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Completed"}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-32",children:t.jsx(Ut,{value:z.projectStats.total>0?z.projectStats.completed/z.projectStats.total*100:0,variant:"success",showLabel:!1})}),t.jsx("span",{className:"text-sm text-gray-600",children:z.projectStats.completed})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"On Hold"}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-32",children:t.jsx(Ut,{value:z.projectStats.total>0?z.projectStats.onHold/z.projectStats.total*100:0,variant:"warning",showLabel:!1})}),t.jsx("span",{className:"text-sm text-gray-600",children:z.projectStats.onHold})]})]})]})})]}),t.jsxs(q,{children:[t.jsx(Te,{children:t.jsxs(Pe,{className:"flex items-center",children:[t.jsx(js,{className:"w-5 h-5 mr-2"}),"Category Performance"]})}),t.jsx(Q,{className:"space-y-4",children:g.map(v=>t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700",children:v.name}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsxs(ee,{variant:v.completionRate>=80?"success":v.completionRate>=60?"default":"warning",children:[v.completionRate,"%"]}),t.jsxs("span",{className:"text-sm text-gray-600",children:[v.count," projects"]})]})]}),t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[t.jsx("span",{children:"Distribution"}),t.jsxs("span",{children:[v.percentage,"%"]})]}),t.jsx(Ut,{value:v.percentage,showLabel:!1}),t.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[t.jsx("span",{children:"Avg Progress"}),t.jsxs("span",{children:[v.avgProgress,"%"]})]}),t.jsx(Ut,{value:v.avgProgress,variant:"success",showLabel:!1})]})]},v.name))})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs(q,{children:[t.jsx(Te,{children:t.jsxs(Pe,{className:"flex items-center",children:[t.jsx(pd,{className:"w-5 h-5 mr-2"}),"Top Performers"]})}),t.jsx(Q,{className:"space-y-4",children:j.map((v,w)=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-gradient-to-r from-yellow-400 to-yellow-600 text-white rounded-full font-semibold text-sm",children:w===0?t.jsx(pd,{className:"w-4 h-4"}):w===1?t.jsx(eo,{className:"w-4 h-4"}):w===2?t.jsx($m,{className:"w-4 h-4"}):`#${w+1}`}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:v.name}),t.jsxs("p",{className:"text-sm text-gray-600",children:[v.completedTasks,"/",v.totalTasks," tasks  ",v.avgTaskDuration," days avg"]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs(ee,{variant:v.efficiencyScore>=80?"success":v.efficiencyScore>=60?"default":"warning",children:[v.efficiencyScore,"%"]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Efficiency"})]})]},v.id))})]}),t.jsxs(q,{children:[t.jsx(Te,{children:t.jsxs(Pe,{className:"flex items-center",children:[t.jsx(lt,{className:"w-5 h-5 mr-2"}),"Skill Demand & Utilization"]})}),t.jsx(Q,{className:"space-y-4",children:h.slice(0,6).map(v=>t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:v.name}),t.jsxs("p",{className:"text-sm text-gray-600",children:[v.users," members  ",v.totalTasks," total tasks"]})]}),t.jsx("div",{className:"text-right",children:t.jsxs(ee,{variant:v.demand>=20?"success":v.demand>=10?"default":"warning",children:[v.demand,"% demand"]})})]}),t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[t.jsx("span",{children:"Completion Rate"}),t.jsxs("span",{children:[v.completionRate,"%"]})]}),t.jsx(Ut,{value:v.completionRate,variant:v.completionRate>=80?"success":v.completionRate>=60?"default":"warning",showLabel:!1}),t.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[t.jsx("span",{children:"Active Tasks"}),t.jsx("span",{children:v.activeTasks})]})]})]},v.name))})]})]}),t.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:t.jsxs(q,{children:[t.jsx(Te,{children:t.jsxs(Pe,{className:"flex items-center",children:[t.jsx(zp,{className:"w-5 h-5 mr-2"}),"Performance Insights"]})}),t.jsx(Q,{className:"space-y-4",children:t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(zt,{className:"w-5 h-5 text-orange-500"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Overdue Tasks"})]}),t.jsx(ee,{variant:"warning",children:I.overdueTasks})]}),t.jsxs("div",{className:"flex items-center justify-between p-3 bg-yellow-50 rounded-lg",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(so,{className:"w-5 h-5 text-yellow-500"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"High Priority"})]}),t.jsx(ee,{variant:"warning",children:I.highPriorityTasks})]}),t.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Up,{className:"w-5 h-5 text-red-500"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Low Progress Projects"})]}),t.jsx(ee,{variant:"danger",children:I.lowProgressProjects})]})]})})]})}),t.jsxs(q,{children:[t.jsx(Te,{children:t.jsxs(Pe,{className:"flex items-center",children:[t.jsx(Cp,{className:"w-5 h-5 mr-2"}),"Task Timeline Overview"]})}),t.jsx(Q,{children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[t.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[t.jsx("div",{className:"text-3xl font-bold text-blue-600",children:z.taskStats.total}),t.jsx("div",{className:"text-sm text-gray-600",children:"Total Tasks"}),t.jsxs("div",{className:"text-xs text-blue-500 mt-1",children:["+",F.weeklyGrowth,"% this week"]})]}),t.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[t.jsx("div",{className:"text-3xl font-bold text-green-600",children:z.taskStats.completed}),t.jsx("div",{className:"text-sm text-gray-600",children:"Completed"}),t.jsxs("div",{className:"text-xs text-green-500 mt-1",children:["+",F.weeklyCompletion," this week"]})]}),t.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[t.jsx("div",{className:"text-3xl font-bold text-purple-600",children:z.taskStats.inProgress}),t.jsx("div",{className:"text-sm text-gray-600",children:"In Progress"}),t.jsxs("div",{className:"text-xs text-purple-500 mt-1",children:[z.taskStats.avgCompletionTime," days avg"]})]}),t.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[t.jsx("div",{className:"text-3xl font-bold text-red-600",children:z.taskStats.overdue}),t.jsx("div",{className:"text-sm text-gray-600",children:"Overdue"}),t.jsxs("div",{className:"text-xs text-red-500 mt-1",children:["Risk Score: ",I.riskScore,"%"]})]})]})})]})]})}const It={summary:{totalProjects:5,inProgress:3,completed:0,totalBooks:22,avgProgress:7.7},distribution:{projects:{total:5,completed:0,inProgress:3,overdue:0,pending:2},books:{total:22,completed:0,inProgress:5,overdue:0,pending:17},lessons:{total:26,completed:0,inProgress:5,overdue:0,pending:21}},developmentStages:[{name:"Content",completed:1,inProgress:13,overdue:0,pending:38,total:52},{name:"Storyboarding",completed:1,inProgress:13,overdue:0,pending:38,total:52},{name:"Design",completed:1,inProgress:13,overdue:0,pending:38,total:52},{name:"Development",completed:1,inProgress:13,overdue:0,pending:38,total:52},{name:"QA",completed:1,inProgress:13,overdue:0,pending:38,total:52}],projects:[{id:1,name:"ICT Curriculum Development",subtitle:"Comprehensive ICT curriculum for grades 1-12",status:"IN PROGRESS",progress:18.5,startDate:"1/1/2024",targetDate:"7/31/2024",projectedCompletion:"10/8/2024",tasks:6,taskProgress:33},{id:2,name:"KG Curriculum Development",subtitle:"Kindergarten curriculum development program",status:"IN PROGRESS",progress:18.5,startDate:"2/1/2024",targetDate:"10/31/2024",projectedCompletion:"10/8/2024",tasks:7,taskProgress:28},{id:3,name:"Science Curriculum Development",subtitle:"Primary Science curriculum for grades 1-8",status:"PENDING",progress:0,startDate:"3/1/2024",targetDate:"7/30/2024",projectedCompletion:"7/18/2024",tasks:4,taskProgress:0},{id:4,name:"Mathematics Curriculum Development",subtitle:"Primary Mathematics curriculum for grades 1-8",status:"PENDING",progress:0,startDate:"4/1/2024",targetDate:"9/3/2024",projectedCompletion:"7/18/2024",tasks:3,taskProgress:0},{id:5,name:"English Language Arts Curriculum",subtitle:"Comprehensive ELA curriculum for grades 1-8",status:"PENDING",progress:0,startDate:"5/1/2024",targetDate:"6/15/2024",projectedCompletion:"7/18/2024",tasks:2,taskProgress:0},{id:6,name:"Social Studies Curriculum",subtitle:"Primary Social Studies curriculum for grades 1-8",status:"PENDING",progress:0,startDate:"6/1/2024",targetDate:"8/15/2024",projectedCompletion:"8/30/2024",tasks:5,taskProgress:0}]};function L0(){const[e,s]=u.useState("overview"),[r,n]=u.useState("Standard Bar Chart"),[a,l]=u.useState(!1),i=x=>{switch(x){case"IN PROGRESS":return"bg-blue-100 text-blue-800";case"PENDING":return"bg-orange-100 text-orange-800";case"COMPLETED":return"bg-green-100 text-green-800";case"OVERDUE":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},o=x=>x>=80?"bg-green-500":x>=50?"bg-yellow-500":"bg-red-500",c=x=>{const y=It.distribution[x],d=y.total,f=y.completed,b=y.inProgress,S=[];for(let z=0;z<d;z++){let g="w-6 h-6 rounded-full border-2 ";z<f?g+="bg-green-500 border-green-500":z<f+b?g+="bg-blue-500 border-blue-500":g+="bg-orange-200 border-orange-300",S.push(t.jsx("div",{className:g},z))}return t.jsx("div",{className:"grid grid-cols-6 gap-1",children:S})},m=x=>{const y=It.distribution[x],d=y.total,f=y.completed/d*100,b=y.inProgress/d*100,S=y.overdue/d*100,z=y.pending/d*100;return t.jsxs("div",{className:"space-y-2",children:[t.jsx("div",{className:"flex space-x-1",children:Array.from({length:10},(g,h)=>t.jsxs("div",{className:"flex-1 h-8 bg-gray-200 rounded relative overflow-hidden",children:[t.jsx("div",{className:"absolute left-0 top-0 h-full bg-green-500",style:{width:`${f}%`}}),t.jsx("div",{className:"absolute left-0 top-0 h-full bg-blue-500",style:{width:`${b}%`,left:`${f}%`}}),t.jsx("div",{className:"absolute left-0 top-0 h-full bg-red-500",style:{width:`${S}%`,left:`${f+b}%`}}),t.jsx("div",{className:"absolute left-0 top-0 h-full bg-orange-500",style:{width:`${z}%`,left:`${f+b+S}%`}})]},h))}),t.jsxs("div",{className:"flex justify-between text-xs text-gray-600",children:[t.jsxs("span",{children:["Completed: ",y.completed,"%"]}),t.jsxs("span",{children:["In Progress: ",b.toFixed(1),"%"]}),t.jsxs("span",{children:["Overdue: ",S.toFixed(1),"%"]}),t.jsxs("span",{children:["Pending: ",z.toFixed(1),"%"]})]})]})};return t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Curriculum Development Dashboard"}),t.jsx("p",{className:"text-gray-600",children:"Monitor project progress and track development milestones."})]}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsx(_,{variant:e==="overview"?"primary":"outline",size:"sm",onClick:()=>s("overview"),children:"Overview"}),t.jsx(_,{variant:e==="predictions"?"primary":"outline",size:"sm",onClick:()=>s("predictions"),children:"Predictions"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[t.jsx(q,{children:t.jsx(Q,{className:"p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:It.summary.totalProjects}),t.jsx("p",{className:"text-sm text-gray-600",children:"Total Projects"})]}),t.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:t.jsx(Es,{className:"w-6 h-6 text-blue-600"})})]})})}),t.jsx(q,{children:t.jsx(Q,{className:"p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:It.summary.inProgress}),t.jsx("p",{className:"text-sm text-gray-600",children:"In Progress"})]}),t.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:t.jsx(cr,{className:"w-6 h-6 text-blue-600"})})]})})}),t.jsx(q,{children:t.jsx(Q,{className:"p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:It.summary.completed}),t.jsx("p",{className:"text-sm text-gray-600",children:"Completed"})]}),t.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:t.jsx(hl,{className:"w-6 h-6 text-green-600"})})]})})}),t.jsx(q,{children:t.jsx(Q,{className:"p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:It.summary.totalBooks}),t.jsx("p",{className:"text-sm text-gray-600",children:"Total Books"})]}),t.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:t.jsx(xl,{className:"w-6 h-6 text-purple-600"})})]})})}),t.jsx(q,{children:t.jsx(Q,{className:"p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[It.summary.avgProgress,"%"]}),t.jsx("p",{className:"text-sm text-gray-600",children:"Avg Progress"})]}),t.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:t.jsx(un,{className:"w-6 h-6 text-blue-600"})})]})})})]}),t.jsx(q,{children:t.jsx(Q,{className:"p-6",children:t.jsx("div",{className:"flex items-center justify-center",children:t.jsxs("div",{className:"relative w-32 h-32",children:[t.jsxs("svg",{className:"w-32 h-32 transform -rotate-90",viewBox:"0 0 120 120",children:[t.jsx("circle",{cx:"60",cy:"60",r:"54",fill:"none",stroke:"#e5e7eb",strokeWidth:"12"}),t.jsx("circle",{cx:"60",cy:"60",r:"54",fill:"none",stroke:"#10b981",strokeWidth:"12",strokeDasharray:`${2*Math.PI*54}`,strokeDashoffset:`${2*Math.PI*54*(1-It.summary.avgProgress/100)}`,strokeLinecap:"round"})]}),t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"0%"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Complete"})]})})]})})})}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsxs(q,{children:[t.jsx(Te,{children:t.jsxs(Pe,{className:"flex items-center",children:[t.jsx(Es,{className:"w-5 h-5 mr-2"}),"Projects"]})}),t.jsxs(Q,{children:[c("projects"),t.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Total ",It.distribution.projects.total]})]})]}),t.jsxs(q,{children:[t.jsx(Te,{children:t.jsxs(Pe,{className:"flex items-center",children:[t.jsx(xl,{className:"w-5 h-5 mr-2"}),"Books"]})}),t.jsxs(Q,{children:[c("books"),t.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Total ",It.distribution.books.total]})]})]}),t.jsxs(q,{children:[t.jsx(Te,{children:t.jsxs(Pe,{className:"flex items-center",children:[t.jsx(rc,{className:"w-5 h-5 mr-2"}),"Lessons"]})}),t.jsxs(Q,{children:[c("lessons"),t.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Total ",It.distribution.lessons.total]})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsxs(q,{children:[t.jsx(Te,{children:t.jsx(Pe,{children:"Project Distribution"})}),t.jsx(Q,{children:m("projects")})]}),t.jsxs(q,{children:[t.jsx(Te,{children:t.jsx(Pe,{children:"Book Distribution"})}),t.jsx(Q,{children:m("books")})]}),t.jsxs(q,{children:[t.jsx(Te,{children:t.jsx(Pe,{children:"Lesson Distribution"})}),t.jsx(Q,{children:m("lessons")})]})]}),t.jsxs(q,{children:[t.jsx(Te,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs(Pe,{className:"flex items-center",children:[t.jsx(js,{className:"w-5 h-5 mr-2 text-purple-600"}),"Advanced Analytics Suite"]}),t.jsx("p",{className:"text-sm text-gray-600",children:"Comprehensive data visualization and insights."})]}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsxs(_,{variant:"outline",size:"sm",children:[t.jsx(Im,{className:"w-4 h-4 mr-2"}),"Filters"]}),t.jsxs(_,{variant:"outline",size:"sm",children:[r,t.jsx(Il,{className:"w-4 h-4 ml-2"})]})]})]})}),t.jsx(Q,{children:t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"font-semibold text-gray-900",children:"Development Stages Progress"}),t.jsx("p",{className:"text-sm text-gray-600",children:"52 items for each stage"}),It.developmentStages.map((x,y)=>t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"font-medium",children:x.name}),t.jsxs("span",{className:"text-gray-600",children:[x.total," items"]})]}),t.jsxs("div",{className:"w-full bg-gray-200 rounded-full h-4 relative overflow-hidden",children:[t.jsx("div",{className:"absolute left-0 top-0 h-full bg-green-500",style:{width:`${x.completed/x.total*100}%`}}),t.jsx("div",{className:"absolute left-0 top-0 h-full bg-blue-500",style:{width:`${x.inProgress/x.total*100}%`,left:`${x.completed/x.total*100}%`}}),t.jsx("div",{className:"absolute left-0 top-0 h-full bg-red-500",style:{width:`${x.overdue/x.total*100}%`,left:`${(x.completed+x.inProgress)/x.total*100}%`}}),t.jsx("div",{className:"absolute left-0 top-0 h-full bg-orange-500",style:{width:`${x.pending/x.total*100}%`,left:`${(x.completed+x.inProgress+x.overdue)/x.total*100}%`}})]}),t.jsxs("div",{className:"flex justify-between text-xs text-gray-600",children:[t.jsxs("span",{children:["Completed: ",x.completed]}),t.jsxs("span",{children:["In Progress: ",x.inProgress]}),t.jsxs("span",{children:["Overdue: ",x.overdue]}),t.jsxs("span",{children:["Pending: ",x.pending]})]})]},y))]})})]}),t.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:It.projects.map(x=>t.jsxs(q,{className:"hover:shadow-lg transition-shadow",children:[t.jsx(Te,{children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx(Pe,{className:"text-lg",children:x.name}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:x.subtitle})]}),t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${i(x.status)}`,children:x.status})]})}),t.jsxs(Q,{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[t.jsx("span",{children:"Overall Progress"}),t.jsxs("span",{children:[x.progress,"%"]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:`h-2 rounded-full ${o(x.progress)}`,style:{width:`${x.progress}%`}})})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-600",children:"Start Date"}),t.jsx("p",{className:"font-medium",children:x.startDate})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-600",children:"Target Date"}),t.jsx("p",{className:"font-medium",children:x.targetDate})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-600",children:"Proj. Completion"}),t.jsx("p",{className:"font-medium",children:x.projectedCompletion})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-600",children:"Tasks"}),t.jsxs("p",{className:"font-medium",children:[x.tasks," tasks"]})]})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[t.jsx("span",{children:"Task Progress"}),t.jsxs("span",{children:[x.taskProgress,"%"]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1",children:t.jsx("div",{className:"h-1 rounded-full bg-blue-500",style:{width:`${x.taskProgress}%`}})})]})]})]},x.id))}),a&&t.jsxs(q,{className:"bg-yellow-50 border-yellow-200",children:[t.jsx(Te,{children:t.jsxs(Pe,{className:"flex items-center text-yellow-800",children:[t.jsx(zt,{className:"w-5 h-5 mr-2"}),"Debug Info (Development Only)"]})}),t.jsxs(Q,{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-yellow-800 mb-2",children:"Available Stages:"}),t.jsx("div",{className:"grid grid-cols-2 gap-2 text-sm",children:It.developmentStages.map((x,y)=>t.jsxs("div",{className:"text-yellow-700",children:["ID: ",y+1," - ",x.name]},y))})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-yellow-800 mb-2",children:"Tasks by Stage:"}),t.jsx("div",{className:"space-y-1 text-sm",children:It.developmentStages.map((x,y)=>t.jsxs("div",{className:"text-yellow-700",children:["Stage ",y+1,": ",x.inProgress," tasks"]},y))})]})]})]}),t.jsx("div",{className:"flex justify-center",children:t.jsxs(_,{variant:"outline",size:"sm",onClick:()=>l(!a),className:"flex items-center gap-2",children:[a?t.jsx(ia,{className:"w-4 h-4"}):t.jsx(Hs,{className:"w-4 h-4"}),a?"Hide Debug Info":"Show Debug Info"]})})]})}function z0(){const{state:e}=zr(),s=()=>{switch(e.selectedView){case"projects":return t.jsx(S0,{});case"teams":return t.jsx(C0,{});case"tasks":return t.jsx(m0,{});case"allocations":return t.jsx(P0,{});case"analytics":return t.jsx(A0,{});case"core-analytics":return t.jsx(L0,{});case"settings":return t.jsx(I0,{});default:return t.jsx(a0,{})}};return t.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[t.jsx(r0,{}),t.jsxs("div",{className:"flex-1 flex flex-col",children:[t.jsx(n0,{}),t.jsx("main",{className:"flex-1 overflow-y-auto",children:s()})]})]})}function F0(){const{user:e,loading:s}=Ss(),[r,n]=u.useState(null),[a,l]=u.useState(!1);return s?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx(oa,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-blue-600"}),t.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):a?r?t.jsx(Kp,{user:r,onLogout:()=>{n(null),l(!1)}}):t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-emerald-100 flex items-center justify-center p-4",children:t.jsx(Qp,{onLogin:i=>n(i),onBackToAdmin:()=>l(!1)})}):e?t.jsx(z0,{}):t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:t.jsx(Vp,{onSwitchToTeam:()=>l(!0)})})}Tm(document.getElementById("root")).render(t.jsx(u.StrictMode,{children:t.jsx(fp,{children:t.jsx(t0,{children:t.jsx(F0,{})})})}));
