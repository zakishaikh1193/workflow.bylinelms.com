(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(a){if(a.ep)return;a.ep=!0;const l=r(a);fetch(a.href,l)}})();var Qc={exports:{}},Va={},Kc={exports:{}},ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tn=Symbol.for("react.element"),vm=Symbol.for("react.portal"),jm=Symbol.for("react.fragment"),wm=Symbol.for("react.strict_mode"),Nm=Symbol.for("react.profiler"),bm=Symbol.for("react.provider"),km=Symbol.for("react.context"),Sm=Symbol.for("react.forward_ref"),_m=Symbol.for("react.suspense"),Cm=Symbol.for("react.memo"),Dm=Symbol.for("react.lazy"),zo=Symbol.iterator;function Tm(e){return e===null||typeof e!="object"?null:(e=zo&&e[zo]||e["@@iterator"],typeof e=="function"?e:null)}var Yc={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Xc=Object.assign,Zc={};function Rr(e,t,r){this.props=e,this.context=t,this.refs=Zc,this.updater=r||Yc}Rr.prototype.isReactComponent={};Rr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Rr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Jc(){}Jc.prototype=Rr.prototype;function Ri(e,t,r){this.props=e,this.context=t,this.refs=Zc,this.updater=r||Yc}var Oi=Ri.prototype=new Jc;Oi.constructor=Ri;Xc(Oi,Rr.prototype);Oi.isPureReactComponent=!0;var Ro=Array.isArray,ed=Object.prototype.hasOwnProperty,Fi={current:null},td={key:!0,ref:!0,__self:!0,__source:!0};function sd(e,t,r){var n,a={},l=null,i=null;if(t!=null)for(n in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(l=""+t.key),t)ed.call(t,n)&&!td.hasOwnProperty(n)&&(a[n]=t[n]);var o=arguments.length-2;if(o===1)a.children=r;else if(1<o){for(var c=Array(o),p=0;p<o;p++)c[p]=arguments[p+2];a.children=c}if(e&&e.defaultProps)for(n in o=e.defaultProps,o)a[n]===void 0&&(a[n]=o[n]);return{$$typeof:Tn,type:e,key:l,ref:i,props:a,_owner:Fi.current}}function Em(e,t){return{$$typeof:Tn,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function $i(e){return typeof e=="object"&&e!==null&&e.$$typeof===Tn}function Pm(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Oo=/\/+/g;function ml(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Pm(""+e.key):t.toString(36)}function na(e,t,r,n,a){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(l){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Tn:case vm:i=!0}}if(i)return i=e,a=a(i),e=n===""?"."+ml(i,0):n,Ro(a)?(r="",e!=null&&(r=e.replace(Oo,"$&/")+"/"),na(a,t,r,"",function(p){return p})):a!=null&&($i(a)&&(a=Em(a,r+(!a.key||i&&i.key===a.key?"":(""+a.key).replace(Oo,"$&/")+"/")+e)),t.push(a)),1;if(i=0,n=n===""?".":n+":",Ro(e))for(var o=0;o<e.length;o++){l=e[o];var c=n+ml(l,o);i+=na(l,t,r,c,a)}else if(c=Tm(e),typeof c=="function")for(e=c.call(e),o=0;!(l=e.next()).done;)l=l.value,c=n+ml(l,o++),i+=na(l,t,r,c,a);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function On(e,t,r){if(e==null)return e;var n=[],a=0;return na(e,n,"","",function(l){return t.call(r,l,a++)}),n}function Mm(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var vt={current:null},aa={transition:null},Im={ReactCurrentDispatcher:vt,ReactCurrentBatchConfig:aa,ReactCurrentOwner:Fi};function rd(){throw Error("act(...) is not supported in production builds of React.")}ge.Children={map:On,forEach:function(e,t,r){On(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return On(e,function(){t++}),t},toArray:function(e){return On(e,function(t){return t})||[]},only:function(e){if(!$i(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ge.Component=Rr;ge.Fragment=jm;ge.Profiler=Nm;ge.PureComponent=Ri;ge.StrictMode=wm;ge.Suspense=_m;ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Im;ge.act=rd;ge.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Xc({},e.props),a=e.key,l=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,i=Fi.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)ed.call(t,c)&&!td.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){o=Array(c);for(var p=0;p<c;p++)o[p]=arguments[p+2];n.children=o}return{$$typeof:Tn,type:e.type,key:a,ref:l,props:n,_owner:i}};ge.createContext=function(e){return e={$$typeof:km,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:bm,_context:e},e.Consumer=e};ge.createElement=sd;ge.createFactory=function(e){var t=sd.bind(null,e);return t.type=e,t};ge.createRef=function(){return{current:null}};ge.forwardRef=function(e){return{$$typeof:Sm,render:e}};ge.isValidElement=$i;ge.lazy=function(e){return{$$typeof:Dm,_payload:{_status:-1,_result:e},_init:Mm}};ge.memo=function(e,t){return{$$typeof:Cm,type:e,compare:t===void 0?null:t}};ge.startTransition=function(e){var t=aa.transition;aa.transition={};try{e()}finally{aa.transition=t}};ge.unstable_act=rd;ge.useCallback=function(e,t){return vt.current.useCallback(e,t)};ge.useContext=function(e){return vt.current.useContext(e)};ge.useDebugValue=function(){};ge.useDeferredValue=function(e){return vt.current.useDeferredValue(e)};ge.useEffect=function(e,t){return vt.current.useEffect(e,t)};ge.useId=function(){return vt.current.useId()};ge.useImperativeHandle=function(e,t,r){return vt.current.useImperativeHandle(e,t,r)};ge.useInsertionEffect=function(e,t){return vt.current.useInsertionEffect(e,t)};ge.useLayoutEffect=function(e,t){return vt.current.useLayoutEffect(e,t)};ge.useMemo=function(e,t){return vt.current.useMemo(e,t)};ge.useReducer=function(e,t,r){return vt.current.useReducer(e,t,r)};ge.useRef=function(e){return vt.current.useRef(e)};ge.useState=function(e){return vt.current.useState(e)};ge.useSyncExternalStore=function(e,t,r){return vt.current.useSyncExternalStore(e,t,r)};ge.useTransition=function(){return vt.current.useTransition()};ge.version="18.3.1";Kc.exports=ge;var m=Kc.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Am=m,Lm=Symbol.for("react.element"),zm=Symbol.for("react.fragment"),Rm=Object.prototype.hasOwnProperty,Om=Am.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Fm={key:!0,ref:!0,__self:!0,__source:!0};function nd(e,t,r){var n,a={},l=null,i=null;r!==void 0&&(l=""+r),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(i=t.ref);for(n in t)Rm.call(t,n)&&!Fm.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:Lm,type:e,key:l,ref:i,props:a,_owner:Om.current}}Va.Fragment=zm;Va.jsx=nd;Va.jsxs=nd;Qc.exports=Va;var s=Qc.exports,ad={exports:{}},It={},ld={exports:{}},id={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(_,E){var $=_.length;_.push(E);e:for(;0<$;){var B=$-1>>>1,G=_[B];if(0<a(G,E))_[B]=E,_[$]=G,$=B;else break e}}function r(_){return _.length===0?null:_[0]}function n(_){if(_.length===0)return null;var E=_[0],$=_.pop();if($!==E){_[0]=$;e:for(var B=0,G=_.length,ee=G>>>1;B<ee;){var q=2*(B+1)-1,k=_[q],ie=q+1,oe=_[ie];if(0>a(k,$))ie<G&&0>a(oe,k)?(_[B]=oe,_[ie]=$,B=ie):(_[B]=k,_[q]=$,B=q);else if(ie<G&&0>a(oe,$))_[B]=oe,_[ie]=$,B=ie;else break e}}return E}function a(_,E){var $=_.sortIndex-E.sortIndex;return $!==0?$:_.id-E.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var c=[],p=[],g=1,j=null,d=3,N=!1,w=!1,P=!1,L=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(_){for(var E=r(p);E!==null;){if(E.callback===null)n(p);else if(E.startTime<=_)n(p),E.sortIndex=E.expirationTime,t(c,E);else break;E=r(p)}}function b(_){if(P=!1,x(_),!w)if(r(c)!==null)w=!0,Oe(S);else{var E=r(p);E!==null&&We(b,E.startTime-_)}}function S(_,E){w=!1,P&&(P=!1,f(C),C=-1),N=!0;var $=d;try{for(x(E),j=r(c);j!==null&&(!(j.expirationTime>E)||_&&!le());){var B=j.callback;if(typeof B=="function"){j.callback=null,d=j.priorityLevel;var G=B(j.expirationTime<=E);E=e.unstable_now(),typeof G=="function"?j.callback=G:j===r(c)&&n(c),x(E)}else n(c);j=r(c)}if(j!==null)var ee=!0;else{var q=r(p);q!==null&&We(b,q.startTime-E),ee=!1}return ee}finally{j=null,d=$,N=!1}}var u=!1,v=null,C=-1,A=5,z=-1;function le(){return!(e.unstable_now()-z<A)}function F(){if(v!==null){var _=e.unstable_now();z=_;var E=!0;try{E=v(!0,_)}finally{E?ne():(u=!1,v=null)}}else u=!1}var ne;if(typeof h=="function")ne=function(){h(F)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,ye=me.port2;me.port1.onmessage=F,ne=function(){ye.postMessage(null)}}else ne=function(){L(F,0)};function Oe(_){v=_,u||(u=!0,ne())}function We(_,E){C=L(function(){_(e.unstable_now())},E)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(_){_.callback=null},e.unstable_continueExecution=function(){w||N||(w=!0,Oe(S))},e.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<_?Math.floor(1e3/_):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(_){switch(d){case 1:case 2:case 3:var E=3;break;default:E=d}var $=d;d=E;try{return _()}finally{d=$}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(_,E){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var $=d;d=_;try{return E()}finally{d=$}},e.unstable_scheduleCallback=function(_,E,$){var B=e.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?B+$:B):$=B,_){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=$+G,_={id:g++,callback:E,priorityLevel:_,startTime:$,expirationTime:G,sortIndex:-1},$>B?(_.sortIndex=$,t(p,_),r(c)===null&&_===r(p)&&(P?(f(C),C=-1):P=!0,We(b,$-B))):(_.sortIndex=G,t(c,_),w||N||(w=!0,Oe(S))),_},e.unstable_shouldYield=le,e.unstable_wrapCallback=function(_){var E=d;return function(){var $=d;d=E;try{return _.apply(this,arguments)}finally{d=$}}}})(id);ld.exports=id;var $m=ld.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Um=m,Mt=$m;function U(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var od=new Set,dn={};function or(e,t){Er(e,t),Er(e+"Capture",t)}function Er(e,t){for(dn[e]=t,e=0;e<t.length;e++)od.add(t[e])}var xs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fl=Object.prototype.hasOwnProperty,Bm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Fo={},$o={};function Hm(e){return Fl.call($o,e)?!0:Fl.call(Fo,e)?!1:Bm.test(e)?$o[e]=!0:(Fo[e]=!0,!1)}function Vm(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Wm(e,t,r,n){if(t===null||typeof t>"u"||Vm(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function jt(e,t,r,n,a,l,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=i}var ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ot[e]=new jt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ot[t]=new jt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ot[e]=new jt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ot[e]=new jt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ot[e]=new jt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ot[e]=new jt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ot[e]=new jt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ot[e]=new jt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ot[e]=new jt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ui=/[\-:]([a-z])/g;function Bi(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ui,Bi);ot[t]=new jt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ui,Bi);ot[t]=new jt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ui,Bi);ot[t]=new jt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ot[e]=new jt(e,1,!1,e.toLowerCase(),null,!1,!1)});ot.xlinkHref=new jt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ot[e]=new jt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Hi(e,t,r,n){var a=ot.hasOwnProperty(t)?ot[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Wm(t,r,a,n)&&(r=null),n||a===null?Hm(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var ys=Um.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fn=Symbol.for("react.element"),mr=Symbol.for("react.portal"),hr=Symbol.for("react.fragment"),Vi=Symbol.for("react.strict_mode"),$l=Symbol.for("react.profiler"),cd=Symbol.for("react.provider"),dd=Symbol.for("react.context"),Wi=Symbol.for("react.forward_ref"),Ul=Symbol.for("react.suspense"),Bl=Symbol.for("react.suspense_list"),Gi=Symbol.for("react.memo"),js=Symbol.for("react.lazy"),ud=Symbol.for("react.offscreen"),Uo=Symbol.iterator;function Ur(e){return e===null||typeof e!="object"?null:(e=Uo&&e[Uo]||e["@@iterator"],typeof e=="function"?e:null)}var Ve=Object.assign,hl;function Kr(e){if(hl===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);hl=t&&t[1]||""}return`
`+hl+e}var xl=!1;function pl(e,t){if(!e||xl)return"";xl=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(p){var n=p}Reflect.construct(e,[],t)}else{try{t.call()}catch(p){n=p}e.call(t.prototype)}else{try{throw Error()}catch(p){n=p}e()}}catch(p){if(p&&n&&typeof p.stack=="string"){for(var a=p.stack.split(`
`),l=n.stack.split(`
`),i=a.length-1,o=l.length-1;1<=i&&0<=o&&a[i]!==l[o];)o--;for(;1<=i&&0<=o;i--,o--)if(a[i]!==l[o]){if(i!==1||o!==1)do if(i--,o--,0>o||a[i]!==l[o]){var c=`
`+a[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=o);break}}}finally{xl=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Kr(e):""}function Gm(e){switch(e.tag){case 5:return Kr(e.type);case 16:return Kr("Lazy");case 13:return Kr("Suspense");case 19:return Kr("SuspenseList");case 0:case 2:case 15:return e=pl(e.type,!1),e;case 11:return e=pl(e.type.render,!1),e;case 1:return e=pl(e.type,!0),e;default:return""}}function Hl(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case hr:return"Fragment";case mr:return"Portal";case $l:return"Profiler";case Vi:return"StrictMode";case Ul:return"Suspense";case Bl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case dd:return(e.displayName||"Context")+".Consumer";case cd:return(e._context.displayName||"Context")+".Provider";case Wi:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Gi:return t=e.displayName||null,t!==null?t:Hl(e.type)||"Memo";case js:t=e._payload,e=e._init;try{return Hl(e(t))}catch{}}return null}function qm(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Hl(t);case 8:return t===Vi?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Us(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function md(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Qm(e){var t=md(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,l=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(i){n=""+i,l.call(this,i)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function $n(e){e._valueTracker||(e._valueTracker=Qm(e))}function hd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=md(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function ya(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Vl(e,t){var r=t.checked;return Ve({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Bo(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Us(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function xd(e,t){t=t.checked,t!=null&&Hi(e,"checked",t,!1)}function Wl(e,t){xd(e,t);var r=Us(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Gl(e,t.type,r):t.hasOwnProperty("defaultValue")&&Gl(e,t.type,Us(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ho(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Gl(e,t,r){(t!=="number"||ya(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Yr=Array.isArray;function kr(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Us(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function ql(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(U(91));return Ve({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Vo(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(U(92));if(Yr(r)){if(1<r.length)throw Error(U(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Us(r)}}function pd(e,t){var r=Us(t.value),n=Us(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Wo(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function fd(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ql(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?fd(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Un,gd=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Un=Un||document.createElement("div"),Un.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Un.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function un(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Jr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Km=["Webkit","ms","Moz","O"];Object.keys(Jr).forEach(function(e){Km.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Jr[t]=Jr[e]})});function yd(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Jr.hasOwnProperty(e)&&Jr[e]?(""+t).trim():t+"px"}function vd(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=yd(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var Ym=Ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Kl(e,t){if(t){if(Ym[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(U(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(U(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(U(61))}if(t.style!=null&&typeof t.style!="object")throw Error(U(62))}}function Yl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xl=null;function qi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Zl=null,Sr=null,_r=null;function Go(e){if(e=Mn(e)){if(typeof Zl!="function")throw Error(U(280));var t=e.stateNode;t&&(t=Ka(t),Zl(e.stateNode,e.type,t))}}function jd(e){Sr?_r?_r.push(e):_r=[e]:Sr=e}function wd(){if(Sr){var e=Sr,t=_r;if(_r=Sr=null,Go(e),t)for(e=0;e<t.length;e++)Go(t[e])}}function Nd(e,t){return e(t)}function bd(){}var fl=!1;function kd(e,t,r){if(fl)return e(t,r);fl=!0;try{return Nd(e,t,r)}finally{fl=!1,(Sr!==null||_r!==null)&&(bd(),wd())}}function mn(e,t){var r=e.stateNode;if(r===null)return null;var n=Ka(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(U(231,t,typeof r));return r}var Jl=!1;if(xs)try{var Br={};Object.defineProperty(Br,"passive",{get:function(){Jl=!0}}),window.addEventListener("test",Br,Br),window.removeEventListener("test",Br,Br)}catch{Jl=!1}function Xm(e,t,r,n,a,l,i,o,c){var p=Array.prototype.slice.call(arguments,3);try{t.apply(r,p)}catch(g){this.onError(g)}}var en=!1,va=null,ja=!1,ei=null,Zm={onError:function(e){en=!0,va=e}};function Jm(e,t,r,n,a,l,i,o,c){en=!1,va=null,Xm.apply(Zm,arguments)}function eh(e,t,r,n,a,l,i,o,c){if(Jm.apply(this,arguments),en){if(en){var p=va;en=!1,va=null}else throw Error(U(198));ja||(ja=!0,ei=p)}}function cr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Sd(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function qo(e){if(cr(e)!==e)throw Error(U(188))}function th(e){var t=e.alternate;if(!t){if(t=cr(e),t===null)throw Error(U(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var l=a.alternate;if(l===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===r)return qo(a),e;if(l===n)return qo(a),t;l=l.sibling}throw Error(U(188))}if(r.return!==n.return)r=a,n=l;else{for(var i=!1,o=a.child;o;){if(o===r){i=!0,r=a,n=l;break}if(o===n){i=!0,n=a,r=l;break}o=o.sibling}if(!i){for(o=l.child;o;){if(o===r){i=!0,r=l,n=a;break}if(o===n){i=!0,n=l,r=a;break}o=o.sibling}if(!i)throw Error(U(189))}}if(r.alternate!==n)throw Error(U(190))}if(r.tag!==3)throw Error(U(188));return r.stateNode.current===r?e:t}function _d(e){return e=th(e),e!==null?Cd(e):null}function Cd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Cd(e);if(t!==null)return t;e=e.sibling}return null}var Dd=Mt.unstable_scheduleCallback,Qo=Mt.unstable_cancelCallback,sh=Mt.unstable_shouldYield,rh=Mt.unstable_requestPaint,Qe=Mt.unstable_now,nh=Mt.unstable_getCurrentPriorityLevel,Qi=Mt.unstable_ImmediatePriority,Td=Mt.unstable_UserBlockingPriority,wa=Mt.unstable_NormalPriority,ah=Mt.unstable_LowPriority,Ed=Mt.unstable_IdlePriority,Wa=null,rs=null;function lh(e){if(rs&&typeof rs.onCommitFiberRoot=="function")try{rs.onCommitFiberRoot(Wa,e,void 0,(e.current.flags&128)===128)}catch{}}var Qt=Math.clz32?Math.clz32:ch,ih=Math.log,oh=Math.LN2;function ch(e){return e>>>=0,e===0?32:31-(ih(e)/oh|0)|0}var Bn=64,Hn=4194304;function Xr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Na(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,l=e.pingedLanes,i=r&268435455;if(i!==0){var o=i&~a;o!==0?n=Xr(o):(l&=i,l!==0&&(n=Xr(l)))}else i=r&~a,i!==0?n=Xr(i):l!==0&&(n=Xr(l));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,l=t&-t,a>=l||a===16&&(l&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Qt(t),a=1<<r,n|=e[r],t&=~a;return n}function dh(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uh(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,l=e.pendingLanes;0<l;){var i=31-Qt(l),o=1<<i,c=a[i];c===-1?(!(o&r)||o&n)&&(a[i]=dh(o,t)):c<=t&&(e.expiredLanes|=o),l&=~o}}function ti(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Pd(){var e=Bn;return Bn<<=1,!(Bn&4194240)&&(Bn=64),e}function gl(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function En(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Qt(t),e[t]=r}function mh(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Qt(r),l=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~l}}function Ki(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Qt(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var Ce=0;function Md(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Id,Yi,Ad,Ld,zd,si=!1,Vn=[],Ms=null,Is=null,As=null,hn=new Map,xn=new Map,Ns=[],hh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ko(e,t){switch(e){case"focusin":case"focusout":Ms=null;break;case"dragenter":case"dragleave":Is=null;break;case"mouseover":case"mouseout":As=null;break;case"pointerover":case"pointerout":hn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":xn.delete(t.pointerId)}}function Hr(e,t,r,n,a,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:l,targetContainers:[a]},t!==null&&(t=Mn(t),t!==null&&Yi(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function xh(e,t,r,n,a){switch(t){case"focusin":return Ms=Hr(Ms,e,t,r,n,a),!0;case"dragenter":return Is=Hr(Is,e,t,r,n,a),!0;case"mouseover":return As=Hr(As,e,t,r,n,a),!0;case"pointerover":var l=a.pointerId;return hn.set(l,Hr(hn.get(l)||null,e,t,r,n,a)),!0;case"gotpointercapture":return l=a.pointerId,xn.set(l,Hr(xn.get(l)||null,e,t,r,n,a)),!0}return!1}function Rd(e){var t=Ys(e.target);if(t!==null){var r=cr(t);if(r!==null){if(t=r.tag,t===13){if(t=Sd(r),t!==null){e.blockedOn=t,zd(e.priority,function(){Ad(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function la(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=ri(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Xl=n,r.target.dispatchEvent(n),Xl=null}else return t=Mn(r),t!==null&&Yi(t),e.blockedOn=r,!1;t.shift()}return!0}function Yo(e,t,r){la(e)&&r.delete(t)}function ph(){si=!1,Ms!==null&&la(Ms)&&(Ms=null),Is!==null&&la(Is)&&(Is=null),As!==null&&la(As)&&(As=null),hn.forEach(Yo),xn.forEach(Yo)}function Vr(e,t){e.blockedOn===t&&(e.blockedOn=null,si||(si=!0,Mt.unstable_scheduleCallback(Mt.unstable_NormalPriority,ph)))}function pn(e){function t(a){return Vr(a,e)}if(0<Vn.length){Vr(Vn[0],e);for(var r=1;r<Vn.length;r++){var n=Vn[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Ms!==null&&Vr(Ms,e),Is!==null&&Vr(Is,e),As!==null&&Vr(As,e),hn.forEach(t),xn.forEach(t),r=0;r<Ns.length;r++)n=Ns[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Ns.length&&(r=Ns[0],r.blockedOn===null);)Rd(r),r.blockedOn===null&&Ns.shift()}var Cr=ys.ReactCurrentBatchConfig,ba=!0;function fh(e,t,r,n){var a=Ce,l=Cr.transition;Cr.transition=null;try{Ce=1,Xi(e,t,r,n)}finally{Ce=a,Cr.transition=l}}function gh(e,t,r,n){var a=Ce,l=Cr.transition;Cr.transition=null;try{Ce=4,Xi(e,t,r,n)}finally{Ce=a,Cr.transition=l}}function Xi(e,t,r,n){if(ba){var a=ri(e,t,r,n);if(a===null)Cl(e,t,n,ka,r),Ko(e,n);else if(xh(a,e,t,r,n))n.stopPropagation();else if(Ko(e,n),t&4&&-1<hh.indexOf(e)){for(;a!==null;){var l=Mn(a);if(l!==null&&Id(l),l=ri(e,t,r,n),l===null&&Cl(e,t,n,ka,r),l===a)break;a=l}a!==null&&n.stopPropagation()}else Cl(e,t,n,null,r)}}var ka=null;function ri(e,t,r,n){if(ka=null,e=qi(n),e=Ys(e),e!==null)if(t=cr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Sd(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ka=e,null}function Od(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nh()){case Qi:return 1;case Td:return 4;case wa:case ah:return 16;case Ed:return 536870912;default:return 16}default:return 16}}var ks=null,Zi=null,ia=null;function Fd(){if(ia)return ia;var e,t=Zi,r=t.length,n,a="value"in ks?ks.value:ks.textContent,l=a.length;for(e=0;e<r&&t[e]===a[e];e++);var i=r-e;for(n=1;n<=i&&t[r-n]===a[l-n];n++);return ia=a.slice(e,1<n?1-n:void 0)}function oa(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Wn(){return!0}function Xo(){return!1}function At(e){function t(r,n,a,l,i){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=l,this.target=i,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(l):l[o]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Wn:Xo,this.isPropagationStopped=Xo,this}return Ve(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Wn)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Wn)},persist:function(){},isPersistent:Wn}),t}var Or={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ji=At(Or),Pn=Ve({},Or,{view:0,detail:0}),yh=At(Pn),yl,vl,Wr,Ga=Ve({},Pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:eo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Wr&&(Wr&&e.type==="mousemove"?(yl=e.screenX-Wr.screenX,vl=e.screenY-Wr.screenY):vl=yl=0,Wr=e),yl)},movementY:function(e){return"movementY"in e?e.movementY:vl}}),Zo=At(Ga),vh=Ve({},Ga,{dataTransfer:0}),jh=At(vh),wh=Ve({},Pn,{relatedTarget:0}),jl=At(wh),Nh=Ve({},Or,{animationName:0,elapsedTime:0,pseudoElement:0}),bh=At(Nh),kh=Ve({},Or,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Sh=At(kh),_h=Ve({},Or,{data:0}),Jo=At(_h),Ch={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Dh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Th={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Eh(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Th[e])?!!t[e]:!1}function eo(){return Eh}var Ph=Ve({},Pn,{key:function(e){if(e.key){var t=Ch[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=oa(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Dh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:eo,charCode:function(e){return e.type==="keypress"?oa(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?oa(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Mh=At(Ph),Ih=Ve({},Ga,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ec=At(Ih),Ah=Ve({},Pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:eo}),Lh=At(Ah),zh=Ve({},Or,{propertyName:0,elapsedTime:0,pseudoElement:0}),Rh=At(zh),Oh=Ve({},Ga,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Fh=At(Oh),$h=[9,13,27,32],to=xs&&"CompositionEvent"in window,tn=null;xs&&"documentMode"in document&&(tn=document.documentMode);var Uh=xs&&"TextEvent"in window&&!tn,$d=xs&&(!to||tn&&8<tn&&11>=tn),tc=" ",sc=!1;function Ud(e,t){switch(e){case"keyup":return $h.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var xr=!1;function Bh(e,t){switch(e){case"compositionend":return Bd(t);case"keypress":return t.which!==32?null:(sc=!0,tc);case"textInput":return e=t.data,e===tc&&sc?null:e;default:return null}}function Hh(e,t){if(xr)return e==="compositionend"||!to&&Ud(e,t)?(e=Fd(),ia=Zi=ks=null,xr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return $d&&t.locale!=="ko"?null:t.data;default:return null}}var Vh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Vh[e.type]:t==="textarea"}function Hd(e,t,r,n){jd(n),t=Sa(t,"onChange"),0<t.length&&(r=new Ji("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var sn=null,fn=null;function Wh(e){eu(e,0)}function qa(e){var t=gr(e);if(hd(t))return e}function Gh(e,t){if(e==="change")return t}var Vd=!1;if(xs){var wl;if(xs){var Nl="oninput"in document;if(!Nl){var nc=document.createElement("div");nc.setAttribute("oninput","return;"),Nl=typeof nc.oninput=="function"}wl=Nl}else wl=!1;Vd=wl&&(!document.documentMode||9<document.documentMode)}function ac(){sn&&(sn.detachEvent("onpropertychange",Wd),fn=sn=null)}function Wd(e){if(e.propertyName==="value"&&qa(fn)){var t=[];Hd(t,fn,e,qi(e)),kd(Wh,t)}}function qh(e,t,r){e==="focusin"?(ac(),sn=t,fn=r,sn.attachEvent("onpropertychange",Wd)):e==="focusout"&&ac()}function Qh(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return qa(fn)}function Kh(e,t){if(e==="click")return qa(t)}function Yh(e,t){if(e==="input"||e==="change")return qa(t)}function Xh(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Yt=typeof Object.is=="function"?Object.is:Xh;function gn(e,t){if(Yt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!Fl.call(t,a)||!Yt(e[a],t[a]))return!1}return!0}function lc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ic(e,t){var r=lc(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lc(r)}}function Gd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Gd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function qd(){for(var e=window,t=ya();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=ya(e.document)}return t}function so(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Zh(e){var t=qd(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Gd(r.ownerDocument.documentElement,r)){if(n!==null&&so(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,l=Math.min(n.start,a);n=n.end===void 0?l:Math.min(n.end,a),!e.extend&&l>n&&(a=n,n=l,l=a),a=ic(r,l);var i=ic(r,n);a&&i&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),l>n?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Jh=xs&&"documentMode"in document&&11>=document.documentMode,pr=null,ni=null,rn=null,ai=!1;function oc(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ai||pr==null||pr!==ya(n)||(n=pr,"selectionStart"in n&&so(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),rn&&gn(rn,n)||(rn=n,n=Sa(ni,"onSelect"),0<n.length&&(t=new Ji("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=pr)))}function Gn(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var fr={animationend:Gn("Animation","AnimationEnd"),animationiteration:Gn("Animation","AnimationIteration"),animationstart:Gn("Animation","AnimationStart"),transitionend:Gn("Transition","TransitionEnd")},bl={},Qd={};xs&&(Qd=document.createElement("div").style,"AnimationEvent"in window||(delete fr.animationend.animation,delete fr.animationiteration.animation,delete fr.animationstart.animation),"TransitionEvent"in window||delete fr.transitionend.transition);function Qa(e){if(bl[e])return bl[e];if(!fr[e])return e;var t=fr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Qd)return bl[e]=t[r];return e}var Kd=Qa("animationend"),Yd=Qa("animationiteration"),Xd=Qa("animationstart"),Zd=Qa("transitionend"),Jd=new Map,cc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hs(e,t){Jd.set(e,t),or(t,[e])}for(var kl=0;kl<cc.length;kl++){var Sl=cc[kl],ex=Sl.toLowerCase(),tx=Sl[0].toUpperCase()+Sl.slice(1);Hs(ex,"on"+tx)}Hs(Kd,"onAnimationEnd");Hs(Yd,"onAnimationIteration");Hs(Xd,"onAnimationStart");Hs("dblclick","onDoubleClick");Hs("focusin","onFocus");Hs("focusout","onBlur");Hs(Zd,"onTransitionEnd");Er("onMouseEnter",["mouseout","mouseover"]);Er("onMouseLeave",["mouseout","mouseover"]);Er("onPointerEnter",["pointerout","pointerover"]);Er("onPointerLeave",["pointerout","pointerover"]);or("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));or("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));or("onBeforeInput",["compositionend","keypress","textInput","paste"]);or("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));or("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));or("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zr));function dc(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,eh(n,t,void 0,e),e.currentTarget=null}function eu(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var l=void 0;if(t)for(var i=n.length-1;0<=i;i--){var o=n[i],c=o.instance,p=o.currentTarget;if(o=o.listener,c!==l&&a.isPropagationStopped())break e;dc(a,o,p),l=c}else for(i=0;i<n.length;i++){if(o=n[i],c=o.instance,p=o.currentTarget,o=o.listener,c!==l&&a.isPropagationStopped())break e;dc(a,o,p),l=c}}}if(ja)throw e=ei,ja=!1,ei=null,e}function Ae(e,t){var r=t[di];r===void 0&&(r=t[di]=new Set);var n=e+"__bubble";r.has(n)||(tu(t,e,2,!1),r.add(n))}function _l(e,t,r){var n=0;t&&(n|=4),tu(r,e,n,t)}var qn="_reactListening"+Math.random().toString(36).slice(2);function yn(e){if(!e[qn]){e[qn]=!0,od.forEach(function(r){r!=="selectionchange"&&(sx.has(r)||_l(r,!1,e),_l(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[qn]||(t[qn]=!0,_l("selectionchange",!1,t))}}function tu(e,t,r,n){switch(Od(t)){case 1:var a=fh;break;case 4:a=gh;break;default:a=Xi}r=a.bind(null,t,r,e),a=void 0,!Jl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Cl(e,t,r,n,a){var l=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var o=n.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(i===4)for(i=n.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;i=i.return}for(;o!==null;){if(i=Ys(o),i===null)return;if(c=i.tag,c===5||c===6){n=l=i;continue e}o=o.parentNode}}n=n.return}kd(function(){var p=l,g=qi(r),j=[];e:{var d=Jd.get(e);if(d!==void 0){var N=Ji,w=e;switch(e){case"keypress":if(oa(r)===0)break e;case"keydown":case"keyup":N=Mh;break;case"focusin":w="focus",N=jl;break;case"focusout":w="blur",N=jl;break;case"beforeblur":case"afterblur":N=jl;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":N=Zo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":N=jh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":N=Lh;break;case Kd:case Yd:case Xd:N=bh;break;case Zd:N=Rh;break;case"scroll":N=yh;break;case"wheel":N=Fh;break;case"copy":case"cut":case"paste":N=Sh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":N=ec}var P=(t&4)!==0,L=!P&&e==="scroll",f=P?d!==null?d+"Capture":null:d;P=[];for(var h=p,x;h!==null;){x=h;var b=x.stateNode;if(x.tag===5&&b!==null&&(x=b,f!==null&&(b=mn(h,f),b!=null&&P.push(vn(h,b,x)))),L)break;h=h.return}0<P.length&&(d=new N(d,w,null,r,g),j.push({event:d,listeners:P}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",N=e==="mouseout"||e==="pointerout",d&&r!==Xl&&(w=r.relatedTarget||r.fromElement)&&(Ys(w)||w[ps]))break e;if((N||d)&&(d=g.window===g?g:(d=g.ownerDocument)?d.defaultView||d.parentWindow:window,N?(w=r.relatedTarget||r.toElement,N=p,w=w?Ys(w):null,w!==null&&(L=cr(w),w!==L||w.tag!==5&&w.tag!==6)&&(w=null)):(N=null,w=p),N!==w)){if(P=Zo,b="onMouseLeave",f="onMouseEnter",h="mouse",(e==="pointerout"||e==="pointerover")&&(P=ec,b="onPointerLeave",f="onPointerEnter",h="pointer"),L=N==null?d:gr(N),x=w==null?d:gr(w),d=new P(b,h+"leave",N,r,g),d.target=L,d.relatedTarget=x,b=null,Ys(g)===p&&(P=new P(f,h+"enter",w,r,g),P.target=x,P.relatedTarget=L,b=P),L=b,N&&w)t:{for(P=N,f=w,h=0,x=P;x;x=ur(x))h++;for(x=0,b=f;b;b=ur(b))x++;for(;0<h-x;)P=ur(P),h--;for(;0<x-h;)f=ur(f),x--;for(;h--;){if(P===f||f!==null&&P===f.alternate)break t;P=ur(P),f=ur(f)}P=null}else P=null;N!==null&&uc(j,d,N,P,!1),w!==null&&L!==null&&uc(j,L,w,P,!0)}}e:{if(d=p?gr(p):window,N=d.nodeName&&d.nodeName.toLowerCase(),N==="select"||N==="input"&&d.type==="file")var S=Gh;else if(rc(d))if(Vd)S=Yh;else{S=Qh;var u=qh}else(N=d.nodeName)&&N.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(S=Kh);if(S&&(S=S(e,p))){Hd(j,S,r,g);break e}u&&u(e,d,p),e==="focusout"&&(u=d._wrapperState)&&u.controlled&&d.type==="number"&&Gl(d,"number",d.value)}switch(u=p?gr(p):window,e){case"focusin":(rc(u)||u.contentEditable==="true")&&(pr=u,ni=p,rn=null);break;case"focusout":rn=ni=pr=null;break;case"mousedown":ai=!0;break;case"contextmenu":case"mouseup":case"dragend":ai=!1,oc(j,r,g);break;case"selectionchange":if(Jh)break;case"keydown":case"keyup":oc(j,r,g)}var v;if(to)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else xr?Ud(e,r)&&(C="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&($d&&r.locale!=="ko"&&(xr||C!=="onCompositionStart"?C==="onCompositionEnd"&&xr&&(v=Fd()):(ks=g,Zi="value"in ks?ks.value:ks.textContent,xr=!0)),u=Sa(p,C),0<u.length&&(C=new Jo(C,e,null,r,g),j.push({event:C,listeners:u}),v?C.data=v:(v=Bd(r),v!==null&&(C.data=v)))),(v=Uh?Bh(e,r):Hh(e,r))&&(p=Sa(p,"onBeforeInput"),0<p.length&&(g=new Jo("onBeforeInput","beforeinput",null,r,g),j.push({event:g,listeners:p}),g.data=v))}eu(j,t)})}function vn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Sa(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=mn(e,r),l!=null&&n.unshift(vn(e,l,a)),l=mn(e,t),l!=null&&n.push(vn(e,l,a))),e=e.return}return n}function ur(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function uc(e,t,r,n,a){for(var l=t._reactName,i=[];r!==null&&r!==n;){var o=r,c=o.alternate,p=o.stateNode;if(c!==null&&c===n)break;o.tag===5&&p!==null&&(o=p,a?(c=mn(r,l),c!=null&&i.unshift(vn(r,c,o))):a||(c=mn(r,l),c!=null&&i.push(vn(r,c,o)))),r=r.return}i.length!==0&&e.push({event:t,listeners:i})}var rx=/\r\n?/g,nx=/\u0000|\uFFFD/g;function mc(e){return(typeof e=="string"?e:""+e).replace(rx,`
`).replace(nx,"")}function Qn(e,t,r){if(t=mc(t),mc(e)!==t&&r)throw Error(U(425))}function _a(){}var li=null,ii=null;function oi(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ci=typeof setTimeout=="function"?setTimeout:void 0,ax=typeof clearTimeout=="function"?clearTimeout:void 0,hc=typeof Promise=="function"?Promise:void 0,lx=typeof queueMicrotask=="function"?queueMicrotask:typeof hc<"u"?function(e){return hc.resolve(null).then(e).catch(ix)}:ci;function ix(e){setTimeout(function(){throw e})}function Dl(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),pn(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);pn(t)}function Ls(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function xc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Fr=Math.random().toString(36).slice(2),es="__reactFiber$"+Fr,jn="__reactProps$"+Fr,ps="__reactContainer$"+Fr,di="__reactEvents$"+Fr,ox="__reactListeners$"+Fr,cx="__reactHandles$"+Fr;function Ys(e){var t=e[es];if(t)return t;for(var r=e.parentNode;r;){if(t=r[ps]||r[es]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=xc(e);e!==null;){if(r=e[es])return r;e=xc(e)}return t}e=r,r=e.parentNode}return null}function Mn(e){return e=e[es]||e[ps],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function gr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(U(33))}function Ka(e){return e[jn]||null}var ui=[],yr=-1;function Vs(e){return{current:e}}function Re(e){0>yr||(e.current=ui[yr],ui[yr]=null,yr--)}function Ie(e,t){yr++,ui[yr]=e.current,e.current=t}var Bs={},ht=Vs(Bs),bt=Vs(!1),sr=Bs;function Pr(e,t){var r=e.type.contextTypes;if(!r)return Bs;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in r)a[l]=t[l];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function kt(e){return e=e.childContextTypes,e!=null}function Ca(){Re(bt),Re(ht)}function pc(e,t,r){if(ht.current!==Bs)throw Error(U(168));Ie(ht,t),Ie(bt,r)}function su(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(U(108,qm(e)||"Unknown",a));return Ve({},r,n)}function Da(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Bs,sr=ht.current,Ie(ht,e),Ie(bt,bt.current),!0}function fc(e,t,r){var n=e.stateNode;if(!n)throw Error(U(169));r?(e=su(e,t,sr),n.__reactInternalMemoizedMergedChildContext=e,Re(bt),Re(ht),Ie(ht,e)):Re(bt),Ie(bt,r)}var ls=null,Ya=!1,Tl=!1;function ru(e){ls===null?ls=[e]:ls.push(e)}function dx(e){Ya=!0,ru(e)}function Ws(){if(!Tl&&ls!==null){Tl=!0;var e=0,t=Ce;try{var r=ls;for(Ce=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}ls=null,Ya=!1}catch(a){throw ls!==null&&(ls=ls.slice(e+1)),Dd(Qi,Ws),a}finally{Ce=t,Tl=!1}}return null}var vr=[],jr=0,Ta=null,Ea=0,zt=[],Rt=0,rr=null,is=1,os="";function qs(e,t){vr[jr++]=Ea,vr[jr++]=Ta,Ta=e,Ea=t}function nu(e,t,r){zt[Rt++]=is,zt[Rt++]=os,zt[Rt++]=rr,rr=e;var n=is;e=os;var a=32-Qt(n)-1;n&=~(1<<a),r+=1;var l=32-Qt(t)+a;if(30<l){var i=a-a%5;l=(n&(1<<i)-1).toString(32),n>>=i,a-=i,is=1<<32-Qt(t)+a|r<<a|n,os=l+e}else is=1<<l|r<<a|n,os=e}function ro(e){e.return!==null&&(qs(e,1),nu(e,1,0))}function no(e){for(;e===Ta;)Ta=vr[--jr],vr[jr]=null,Ea=vr[--jr],vr[jr]=null;for(;e===rr;)rr=zt[--Rt],zt[Rt]=null,os=zt[--Rt],zt[Rt]=null,is=zt[--Rt],zt[Rt]=null}var Pt=null,Et=null,$e=!1,qt=null;function au(e,t){var r=Ft(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function gc(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Pt=e,Et=Ls(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Pt=e,Et=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=rr!==null?{id:is,overflow:os}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ft(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Pt=e,Et=null,!0):!1;default:return!1}}function mi(e){return(e.mode&1)!==0&&(e.flags&128)===0}function hi(e){if($e){var t=Et;if(t){var r=t;if(!gc(e,t)){if(mi(e))throw Error(U(418));t=Ls(r.nextSibling);var n=Pt;t&&gc(e,t)?au(n,r):(e.flags=e.flags&-4097|2,$e=!1,Pt=e)}}else{if(mi(e))throw Error(U(418));e.flags=e.flags&-4097|2,$e=!1,Pt=e}}}function yc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Pt=e}function Kn(e){if(e!==Pt)return!1;if(!$e)return yc(e),$e=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!oi(e.type,e.memoizedProps)),t&&(t=Et)){if(mi(e))throw lu(),Error(U(418));for(;t;)au(e,t),t=Ls(t.nextSibling)}if(yc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(U(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Et=Ls(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Et=null}}else Et=Pt?Ls(e.stateNode.nextSibling):null;return!0}function lu(){for(var e=Et;e;)e=Ls(e.nextSibling)}function Mr(){Et=Pt=null,$e=!1}function ao(e){qt===null?qt=[e]:qt.push(e)}var ux=ys.ReactCurrentBatchConfig;function Gr(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(U(309));var n=r.stateNode}if(!n)throw Error(U(147,e));var a=n,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(i){var o=a.refs;i===null?delete o[l]:o[l]=i},t._stringRef=l,t)}if(typeof e!="string")throw Error(U(284));if(!r._owner)throw Error(U(290,e))}return e}function Yn(e,t){throw e=Object.prototype.toString.call(t),Error(U(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vc(e){var t=e._init;return t(e._payload)}function iu(e){function t(f,h){if(e){var x=f.deletions;x===null?(f.deletions=[h],f.flags|=16):x.push(h)}}function r(f,h){if(!e)return null;for(;h!==null;)t(f,h),h=h.sibling;return null}function n(f,h){for(f=new Map;h!==null;)h.key!==null?f.set(h.key,h):f.set(h.index,h),h=h.sibling;return f}function a(f,h){return f=Fs(f,h),f.index=0,f.sibling=null,f}function l(f,h,x){return f.index=x,e?(x=f.alternate,x!==null?(x=x.index,x<h?(f.flags|=2,h):x):(f.flags|=2,h)):(f.flags|=1048576,h)}function i(f){return e&&f.alternate===null&&(f.flags|=2),f}function o(f,h,x,b){return h===null||h.tag!==6?(h=zl(x,f.mode,b),h.return=f,h):(h=a(h,x),h.return=f,h)}function c(f,h,x,b){var S=x.type;return S===hr?g(f,h,x.props.children,b,x.key):h!==null&&(h.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===js&&vc(S)===h.type)?(b=a(h,x.props),b.ref=Gr(f,h,x),b.return=f,b):(b=pa(x.type,x.key,x.props,null,f.mode,b),b.ref=Gr(f,h,x),b.return=f,b)}function p(f,h,x,b){return h===null||h.tag!==4||h.stateNode.containerInfo!==x.containerInfo||h.stateNode.implementation!==x.implementation?(h=Rl(x,f.mode,b),h.return=f,h):(h=a(h,x.children||[]),h.return=f,h)}function g(f,h,x,b,S){return h===null||h.tag!==7?(h=tr(x,f.mode,b,S),h.return=f,h):(h=a(h,x),h.return=f,h)}function j(f,h,x){if(typeof h=="string"&&h!==""||typeof h=="number")return h=zl(""+h,f.mode,x),h.return=f,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case Fn:return x=pa(h.type,h.key,h.props,null,f.mode,x),x.ref=Gr(f,null,h),x.return=f,x;case mr:return h=Rl(h,f.mode,x),h.return=f,h;case js:var b=h._init;return j(f,b(h._payload),x)}if(Yr(h)||Ur(h))return h=tr(h,f.mode,x,null),h.return=f,h;Yn(f,h)}return null}function d(f,h,x,b){var S=h!==null?h.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return S!==null?null:o(f,h,""+x,b);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Fn:return x.key===S?c(f,h,x,b):null;case mr:return x.key===S?p(f,h,x,b):null;case js:return S=x._init,d(f,h,S(x._payload),b)}if(Yr(x)||Ur(x))return S!==null?null:g(f,h,x,b,null);Yn(f,x)}return null}function N(f,h,x,b,S){if(typeof b=="string"&&b!==""||typeof b=="number")return f=f.get(x)||null,o(h,f,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Fn:return f=f.get(b.key===null?x:b.key)||null,c(h,f,b,S);case mr:return f=f.get(b.key===null?x:b.key)||null,p(h,f,b,S);case js:var u=b._init;return N(f,h,x,u(b._payload),S)}if(Yr(b)||Ur(b))return f=f.get(x)||null,g(h,f,b,S,null);Yn(h,b)}return null}function w(f,h,x,b){for(var S=null,u=null,v=h,C=h=0,A=null;v!==null&&C<x.length;C++){v.index>C?(A=v,v=null):A=v.sibling;var z=d(f,v,x[C],b);if(z===null){v===null&&(v=A);break}e&&v&&z.alternate===null&&t(f,v),h=l(z,h,C),u===null?S=z:u.sibling=z,u=z,v=A}if(C===x.length)return r(f,v),$e&&qs(f,C),S;if(v===null){for(;C<x.length;C++)v=j(f,x[C],b),v!==null&&(h=l(v,h,C),u===null?S=v:u.sibling=v,u=v);return $e&&qs(f,C),S}for(v=n(f,v);C<x.length;C++)A=N(v,f,C,x[C],b),A!==null&&(e&&A.alternate!==null&&v.delete(A.key===null?C:A.key),h=l(A,h,C),u===null?S=A:u.sibling=A,u=A);return e&&v.forEach(function(le){return t(f,le)}),$e&&qs(f,C),S}function P(f,h,x,b){var S=Ur(x);if(typeof S!="function")throw Error(U(150));if(x=S.call(x),x==null)throw Error(U(151));for(var u=S=null,v=h,C=h=0,A=null,z=x.next();v!==null&&!z.done;C++,z=x.next()){v.index>C?(A=v,v=null):A=v.sibling;var le=d(f,v,z.value,b);if(le===null){v===null&&(v=A);break}e&&v&&le.alternate===null&&t(f,v),h=l(le,h,C),u===null?S=le:u.sibling=le,u=le,v=A}if(z.done)return r(f,v),$e&&qs(f,C),S;if(v===null){for(;!z.done;C++,z=x.next())z=j(f,z.value,b),z!==null&&(h=l(z,h,C),u===null?S=z:u.sibling=z,u=z);return $e&&qs(f,C),S}for(v=n(f,v);!z.done;C++,z=x.next())z=N(v,f,C,z.value,b),z!==null&&(e&&z.alternate!==null&&v.delete(z.key===null?C:z.key),h=l(z,h,C),u===null?S=z:u.sibling=z,u=z);return e&&v.forEach(function(F){return t(f,F)}),$e&&qs(f,C),S}function L(f,h,x,b){if(typeof x=="object"&&x!==null&&x.type===hr&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Fn:e:{for(var S=x.key,u=h;u!==null;){if(u.key===S){if(S=x.type,S===hr){if(u.tag===7){r(f,u.sibling),h=a(u,x.props.children),h.return=f,f=h;break e}}else if(u.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===js&&vc(S)===u.type){r(f,u.sibling),h=a(u,x.props),h.ref=Gr(f,u,x),h.return=f,f=h;break e}r(f,u);break}else t(f,u);u=u.sibling}x.type===hr?(h=tr(x.props.children,f.mode,b,x.key),h.return=f,f=h):(b=pa(x.type,x.key,x.props,null,f.mode,b),b.ref=Gr(f,h,x),b.return=f,f=b)}return i(f);case mr:e:{for(u=x.key;h!==null;){if(h.key===u)if(h.tag===4&&h.stateNode.containerInfo===x.containerInfo&&h.stateNode.implementation===x.implementation){r(f,h.sibling),h=a(h,x.children||[]),h.return=f,f=h;break e}else{r(f,h);break}else t(f,h);h=h.sibling}h=Rl(x,f.mode,b),h.return=f,f=h}return i(f);case js:return u=x._init,L(f,h,u(x._payload),b)}if(Yr(x))return w(f,h,x,b);if(Ur(x))return P(f,h,x,b);Yn(f,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,h!==null&&h.tag===6?(r(f,h.sibling),h=a(h,x),h.return=f,f=h):(r(f,h),h=zl(x,f.mode,b),h.return=f,f=h),i(f)):r(f,h)}return L}var Ir=iu(!0),ou=iu(!1),Pa=Vs(null),Ma=null,wr=null,lo=null;function io(){lo=wr=Ma=null}function oo(e){var t=Pa.current;Re(Pa),e._currentValue=t}function xi(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Dr(e,t){Ma=e,lo=wr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Nt=!0),e.firstContext=null)}function Ut(e){var t=e._currentValue;if(lo!==e)if(e={context:e,memoizedValue:t,next:null},wr===null){if(Ma===null)throw Error(U(308));wr=e,Ma.dependencies={lanes:0,firstContext:e}}else wr=wr.next=e;return t}var Xs=null;function co(e){Xs===null?Xs=[e]:Xs.push(e)}function cu(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,co(t)):(r.next=a.next,a.next=r),t.interleaved=r,fs(e,n)}function fs(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var ws=!1;function uo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function du(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ms(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zs(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,we&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,fs(e,r)}return a=n.interleaved,a===null?(t.next=t,co(n)):(t.next=a.next,a.next=t),n.interleaved=t,fs(e,r)}function ca(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Ki(e,r)}}function jc(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,l=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};l===null?a=l=i:l=l.next=i,r=r.next}while(r!==null);l===null?a=l=t:l=l.next=t}else a=l=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ia(e,t,r,n){var a=e.updateQueue;ws=!1;var l=a.firstBaseUpdate,i=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var c=o,p=c.next;c.next=null,i===null?l=p:i.next=p,i=c;var g=e.alternate;g!==null&&(g=g.updateQueue,o=g.lastBaseUpdate,o!==i&&(o===null?g.firstBaseUpdate=p:o.next=p,g.lastBaseUpdate=c))}if(l!==null){var j=a.baseState;i=0,g=p=c=null,o=l;do{var d=o.lane,N=o.eventTime;if((n&d)===d){g!==null&&(g=g.next={eventTime:N,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var w=e,P=o;switch(d=t,N=r,P.tag){case 1:if(w=P.payload,typeof w=="function"){j=w.call(N,j,d);break e}j=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=P.payload,d=typeof w=="function"?w.call(N,j,d):w,d==null)break e;j=Ve({},j,d);break e;case 2:ws=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,d=a.effects,d===null?a.effects=[o]:d.push(o))}else N={eventTime:N,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},g===null?(p=g=N,c=j):g=g.next=N,i|=d;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;d=o,o=d.next,d.next=null,a.lastBaseUpdate=d,a.shared.pending=null}}while(!0);if(g===null&&(c=j),a.baseState=c,a.firstBaseUpdate=p,a.lastBaseUpdate=g,t=a.shared.interleaved,t!==null){a=t;do i|=a.lane,a=a.next;while(a!==t)}else l===null&&(a.shared.lanes=0);ar|=i,e.lanes=i,e.memoizedState=j}}function wc(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(U(191,a));a.call(n)}}}var In={},ns=Vs(In),wn=Vs(In),Nn=Vs(In);function Zs(e){if(e===In)throw Error(U(174));return e}function mo(e,t){switch(Ie(Nn,t),Ie(wn,e),Ie(ns,In),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ql(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ql(t,e)}Re(ns),Ie(ns,t)}function Ar(){Re(ns),Re(wn),Re(Nn)}function uu(e){Zs(Nn.current);var t=Zs(ns.current),r=Ql(t,e.type);t!==r&&(Ie(wn,e),Ie(ns,r))}function ho(e){wn.current===e&&(Re(ns),Re(wn))}var Be=Vs(0);function Aa(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var El=[];function xo(){for(var e=0;e<El.length;e++)El[e]._workInProgressVersionPrimary=null;El.length=0}var da=ys.ReactCurrentDispatcher,Pl=ys.ReactCurrentBatchConfig,nr=0,He=null,et=null,rt=null,La=!1,nn=!1,bn=0,mx=0;function ct(){throw Error(U(321))}function po(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Yt(e[r],t[r]))return!1;return!0}function fo(e,t,r,n,a,l){if(nr=l,He=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,da.current=e===null||e.memoizedState===null?fx:gx,e=r(n,a),nn){l=0;do{if(nn=!1,bn=0,25<=l)throw Error(U(301));l+=1,rt=et=null,t.updateQueue=null,da.current=yx,e=r(n,a)}while(nn)}if(da.current=za,t=et!==null&&et.next!==null,nr=0,rt=et=He=null,La=!1,t)throw Error(U(300));return e}function go(){var e=bn!==0;return bn=0,e}function Zt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rt===null?He.memoizedState=rt=e:rt=rt.next=e,rt}function Bt(){if(et===null){var e=He.alternate;e=e!==null?e.memoizedState:null}else e=et.next;var t=rt===null?He.memoizedState:rt.next;if(t!==null)rt=t,et=e;else{if(e===null)throw Error(U(310));et=e,e={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},rt===null?He.memoizedState=rt=e:rt=rt.next=e}return rt}function kn(e,t){return typeof t=="function"?t(e):t}function Ml(e){var t=Bt(),r=t.queue;if(r===null)throw Error(U(311));r.lastRenderedReducer=e;var n=et,a=n.baseQueue,l=r.pending;if(l!==null){if(a!==null){var i=a.next;a.next=l.next,l.next=i}n.baseQueue=a=l,r.pending=null}if(a!==null){l=a.next,n=n.baseState;var o=i=null,c=null,p=l;do{var g=p.lane;if((nr&g)===g)c!==null&&(c=c.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),n=p.hasEagerState?p.eagerState:e(n,p.action);else{var j={lane:g,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};c===null?(o=c=j,i=n):c=c.next=j,He.lanes|=g,ar|=g}p=p.next}while(p!==null&&p!==l);c===null?i=n:c.next=o,Yt(n,t.memoizedState)||(Nt=!0),t.memoizedState=n,t.baseState=i,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do l=a.lane,He.lanes|=l,ar|=l,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Il(e){var t=Bt(),r=t.queue;if(r===null)throw Error(U(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,l=t.memoizedState;if(a!==null){r.pending=null;var i=a=a.next;do l=e(l,i.action),i=i.next;while(i!==a);Yt(l,t.memoizedState)||(Nt=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),r.lastRenderedState=l}return[l,n]}function mu(){}function hu(e,t){var r=He,n=Bt(),a=t(),l=!Yt(n.memoizedState,a);if(l&&(n.memoizedState=a,Nt=!0),n=n.queue,yo(fu.bind(null,r,n,e),[e]),n.getSnapshot!==t||l||rt!==null&&rt.memoizedState.tag&1){if(r.flags|=2048,Sn(9,pu.bind(null,r,n,a,t),void 0,null),at===null)throw Error(U(349));nr&30||xu(r,t,a)}return a}function xu(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=He.updateQueue,t===null?(t={lastEffect:null,stores:null},He.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function pu(e,t,r,n){t.value=r,t.getSnapshot=n,gu(t)&&yu(e)}function fu(e,t,r){return r(function(){gu(t)&&yu(e)})}function gu(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Yt(e,r)}catch{return!0}}function yu(e){var t=fs(e,1);t!==null&&Kt(t,e,1,-1)}function Nc(e){var t=Zt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:kn,lastRenderedState:e},t.queue=e,e=e.dispatch=px.bind(null,He,e),[t.memoizedState,e]}function Sn(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=He.updateQueue,t===null?(t={lastEffect:null,stores:null},He.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function vu(){return Bt().memoizedState}function ua(e,t,r,n){var a=Zt();He.flags|=e,a.memoizedState=Sn(1|t,r,void 0,n===void 0?null:n)}function Xa(e,t,r,n){var a=Bt();n=n===void 0?null:n;var l=void 0;if(et!==null){var i=et.memoizedState;if(l=i.destroy,n!==null&&po(n,i.deps)){a.memoizedState=Sn(t,r,l,n);return}}He.flags|=e,a.memoizedState=Sn(1|t,r,l,n)}function bc(e,t){return ua(8390656,8,e,t)}function yo(e,t){return Xa(2048,8,e,t)}function ju(e,t){return Xa(4,2,e,t)}function wu(e,t){return Xa(4,4,e,t)}function Nu(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function bu(e,t,r){return r=r!=null?r.concat([e]):null,Xa(4,4,Nu.bind(null,t,e),r)}function vo(){}function ku(e,t){var r=Bt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&po(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Su(e,t){var r=Bt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&po(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function _u(e,t,r){return nr&21?(Yt(r,t)||(r=Pd(),He.lanes|=r,ar|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Nt=!0),e.memoizedState=r)}function hx(e,t){var r=Ce;Ce=r!==0&&4>r?r:4,e(!0);var n=Pl.transition;Pl.transition={};try{e(!1),t()}finally{Ce=r,Pl.transition=n}}function Cu(){return Bt().memoizedState}function xx(e,t,r){var n=Os(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Du(e))Tu(t,r);else if(r=cu(e,t,r,n),r!==null){var a=yt();Kt(r,e,n,a),Eu(r,t,n)}}function px(e,t,r){var n=Os(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Du(e))Tu(t,a);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var i=t.lastRenderedState,o=l(i,r);if(a.hasEagerState=!0,a.eagerState=o,Yt(o,i)){var c=t.interleaved;c===null?(a.next=a,co(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=cu(e,t,a,n),r!==null&&(a=yt(),Kt(r,e,n,a),Eu(r,t,n))}}function Du(e){var t=e.alternate;return e===He||t!==null&&t===He}function Tu(e,t){nn=La=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Eu(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Ki(e,r)}}var za={readContext:Ut,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useInsertionEffect:ct,useLayoutEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useMutableSource:ct,useSyncExternalStore:ct,useId:ct,unstable_isNewReconciler:!1},fx={readContext:Ut,useCallback:function(e,t){return Zt().memoizedState=[e,t===void 0?null:t],e},useContext:Ut,useEffect:bc,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,ua(4194308,4,Nu.bind(null,t,e),r)},useLayoutEffect:function(e,t){return ua(4194308,4,e,t)},useInsertionEffect:function(e,t){return ua(4,2,e,t)},useMemo:function(e,t){var r=Zt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Zt();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=xx.bind(null,He,e),[n.memoizedState,e]},useRef:function(e){var t=Zt();return e={current:e},t.memoizedState=e},useState:Nc,useDebugValue:vo,useDeferredValue:function(e){return Zt().memoizedState=e},useTransition:function(){var e=Nc(!1),t=e[0];return e=hx.bind(null,e[1]),Zt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=He,a=Zt();if($e){if(r===void 0)throw Error(U(407));r=r()}else{if(r=t(),at===null)throw Error(U(349));nr&30||xu(n,t,r)}a.memoizedState=r;var l={value:r,getSnapshot:t};return a.queue=l,bc(fu.bind(null,n,l,e),[e]),n.flags|=2048,Sn(9,pu.bind(null,n,l,r,t),void 0,null),r},useId:function(){var e=Zt(),t=at.identifierPrefix;if($e){var r=os,n=is;r=(n&~(1<<32-Qt(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=bn++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=mx++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},gx={readContext:Ut,useCallback:ku,useContext:Ut,useEffect:yo,useImperativeHandle:bu,useInsertionEffect:ju,useLayoutEffect:wu,useMemo:Su,useReducer:Ml,useRef:vu,useState:function(){return Ml(kn)},useDebugValue:vo,useDeferredValue:function(e){var t=Bt();return _u(t,et.memoizedState,e)},useTransition:function(){var e=Ml(kn)[0],t=Bt().memoizedState;return[e,t]},useMutableSource:mu,useSyncExternalStore:hu,useId:Cu,unstable_isNewReconciler:!1},yx={readContext:Ut,useCallback:ku,useContext:Ut,useEffect:yo,useImperativeHandle:bu,useInsertionEffect:ju,useLayoutEffect:wu,useMemo:Su,useReducer:Il,useRef:vu,useState:function(){return Il(kn)},useDebugValue:vo,useDeferredValue:function(e){var t=Bt();return et===null?t.memoizedState=e:_u(t,et.memoizedState,e)},useTransition:function(){var e=Il(kn)[0],t=Bt().memoizedState;return[e,t]},useMutableSource:mu,useSyncExternalStore:hu,useId:Cu,unstable_isNewReconciler:!1};function Wt(e,t){if(e&&e.defaultProps){t=Ve({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function pi(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Ve({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Za={isMounted:function(e){return(e=e._reactInternals)?cr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=yt(),a=Os(e),l=ms(n,a);l.payload=t,r!=null&&(l.callback=r),t=zs(e,l,a),t!==null&&(Kt(t,e,a,n),ca(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=yt(),a=Os(e),l=ms(n,a);l.tag=1,l.payload=t,r!=null&&(l.callback=r),t=zs(e,l,a),t!==null&&(Kt(t,e,a,n),ca(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=yt(),n=Os(e),a=ms(r,n);a.tag=2,t!=null&&(a.callback=t),t=zs(e,a,n),t!==null&&(Kt(t,e,n,r),ca(t,e,n))}};function kc(e,t,r,n,a,l,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,l,i):t.prototype&&t.prototype.isPureReactComponent?!gn(r,n)||!gn(a,l):!0}function Pu(e,t,r){var n=!1,a=Bs,l=t.contextType;return typeof l=="object"&&l!==null?l=Ut(l):(a=kt(t)?sr:ht.current,n=t.contextTypes,l=(n=n!=null)?Pr(e,a):Bs),t=new t(r,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Za,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=l),t}function Sc(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Za.enqueueReplaceState(t,t.state,null)}function fi(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},uo(e);var l=t.contextType;typeof l=="object"&&l!==null?a.context=Ut(l):(l=kt(t)?sr:ht.current,a.context=Pr(e,l)),a.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(pi(e,t,l,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Za.enqueueReplaceState(a,a.state,null),Ia(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Lr(e,t){try{var r="",n=t;do r+=Gm(n),n=n.return;while(n);var a=r}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:a,digest:null}}function Al(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function gi(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var vx=typeof WeakMap=="function"?WeakMap:Map;function Mu(e,t,r){r=ms(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Oa||(Oa=!0,Ci=n),gi(e,t)},r}function Iu(e,t,r){r=ms(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){gi(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(r.callback=function(){gi(e,t),typeof n!="function"&&(Rs===null?Rs=new Set([this]):Rs.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),r}function _c(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new vx;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=Ix.bind(null,e,t,r),t.then(e,e))}function Cc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Dc(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=ms(-1,1),t.tag=2,zs(r,t,1))),r.lanes|=1),e)}var jx=ys.ReactCurrentOwner,Nt=!1;function pt(e,t,r,n){t.child=e===null?ou(t,null,r,n):Ir(t,e.child,r,n)}function Tc(e,t,r,n,a){r=r.render;var l=t.ref;return Dr(t,a),n=fo(e,t,r,n,l,a),r=go(),e!==null&&!Nt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,gs(e,t,a)):($e&&r&&ro(t),t.flags|=1,pt(e,t,n,a),t.child)}function Ec(e,t,r,n,a){if(e===null){var l=r.type;return typeof l=="function"&&!Co(l)&&l.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=l,Au(e,t,l,n,a)):(e=pa(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&a)){var i=l.memoizedProps;if(r=r.compare,r=r!==null?r:gn,r(i,n)&&e.ref===t.ref)return gs(e,t,a)}return t.flags|=1,e=Fs(l,n),e.ref=t.ref,e.return=t,t.child=e}function Au(e,t,r,n,a){if(e!==null){var l=e.memoizedProps;if(gn(l,n)&&e.ref===t.ref)if(Nt=!1,t.pendingProps=n=l,(e.lanes&a)!==0)e.flags&131072&&(Nt=!0);else return t.lanes=e.lanes,gs(e,t,a)}return yi(e,t,r,n,a)}function Lu(e,t,r){var n=t.pendingProps,a=n.children,l=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ie(br,Dt),Dt|=r;else{if(!(r&1073741824))return e=l!==null?l.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ie(br,Dt),Dt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=l!==null?l.baseLanes:r,Ie(br,Dt),Dt|=n}else l!==null?(n=l.baseLanes|r,t.memoizedState=null):n=r,Ie(br,Dt),Dt|=n;return pt(e,t,a,r),t.child}function zu(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function yi(e,t,r,n,a){var l=kt(r)?sr:ht.current;return l=Pr(t,l),Dr(t,a),r=fo(e,t,r,n,l,a),n=go(),e!==null&&!Nt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,gs(e,t,a)):($e&&n&&ro(t),t.flags|=1,pt(e,t,r,a),t.child)}function Pc(e,t,r,n,a){if(kt(r)){var l=!0;Da(t)}else l=!1;if(Dr(t,a),t.stateNode===null)ma(e,t),Pu(t,r,n),fi(t,r,n,a),n=!0;else if(e===null){var i=t.stateNode,o=t.memoizedProps;i.props=o;var c=i.context,p=r.contextType;typeof p=="object"&&p!==null?p=Ut(p):(p=kt(r)?sr:ht.current,p=Pr(t,p));var g=r.getDerivedStateFromProps,j=typeof g=="function"||typeof i.getSnapshotBeforeUpdate=="function";j||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==n||c!==p)&&Sc(t,i,n,p),ws=!1;var d=t.memoizedState;i.state=d,Ia(t,n,i,a),c=t.memoizedState,o!==n||d!==c||bt.current||ws?(typeof g=="function"&&(pi(t,r,g,n),c=t.memoizedState),(o=ws||kc(t,r,o,n,d,c,p))?(j||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),i.props=n,i.state=c,i.context=p,n=o):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,du(e,t),o=t.memoizedProps,p=t.type===t.elementType?o:Wt(t.type,o),i.props=p,j=t.pendingProps,d=i.context,c=r.contextType,typeof c=="object"&&c!==null?c=Ut(c):(c=kt(r)?sr:ht.current,c=Pr(t,c));var N=r.getDerivedStateFromProps;(g=typeof N=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==j||d!==c)&&Sc(t,i,n,c),ws=!1,d=t.memoizedState,i.state=d,Ia(t,n,i,a);var w=t.memoizedState;o!==j||d!==w||bt.current||ws?(typeof N=="function"&&(pi(t,r,N,n),w=t.memoizedState),(p=ws||kc(t,r,p,n,d,w,c)||!1)?(g||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,w,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,w,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=w),i.props=n,i.state=w,i.context=c,n=p):(typeof i.componentDidUpdate!="function"||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),n=!1)}return vi(e,t,r,n,l,a)}function vi(e,t,r,n,a,l){zu(e,t);var i=(t.flags&128)!==0;if(!n&&!i)return a&&fc(t,r,!1),gs(e,t,l);n=t.stateNode,jx.current=t;var o=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&i?(t.child=Ir(t,e.child,null,l),t.child=Ir(t,null,o,l)):pt(e,t,o,l),t.memoizedState=n.state,a&&fc(t,r,!0),t.child}function Ru(e){var t=e.stateNode;t.pendingContext?pc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&pc(e,t.context,!1),mo(e,t.containerInfo)}function Mc(e,t,r,n,a){return Mr(),ao(a),t.flags|=256,pt(e,t,r,n),t.child}var ji={dehydrated:null,treeContext:null,retryLane:0};function wi(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ou(e,t,r){var n=t.pendingProps,a=Be.current,l=!1,i=(t.flags&128)!==0,o;if((o=i)||(o=e!==null&&e.memoizedState===null?!1:(a&2)!==0),o?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Ie(Be,a&1),e===null)return hi(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=n.children,e=n.fallback,l?(n=t.mode,l=t.child,i={mode:"hidden",children:i},!(n&1)&&l!==null?(l.childLanes=0,l.pendingProps=i):l=tl(i,n,0,null),e=tr(e,n,r,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=wi(r),t.memoizedState=ji,e):jo(t,i));if(a=e.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return wx(e,t,i,n,o,a,r);if(l){l=n.fallback,i=t.mode,a=e.child,o=a.sibling;var c={mode:"hidden",children:n.children};return!(i&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Fs(a,c),n.subtreeFlags=a.subtreeFlags&14680064),o!==null?l=Fs(o,l):(l=tr(l,i,r,null),l.flags|=2),l.return=t,n.return=t,n.sibling=l,t.child=n,n=l,l=t.child,i=e.child.memoizedState,i=i===null?wi(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},l.memoizedState=i,l.childLanes=e.childLanes&~r,t.memoizedState=ji,n}return l=e.child,e=l.sibling,n=Fs(l,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function jo(e,t){return t=tl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Xn(e,t,r,n){return n!==null&&ao(n),Ir(t,e.child,null,r),e=jo(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function wx(e,t,r,n,a,l,i){if(r)return t.flags&256?(t.flags&=-257,n=Al(Error(U(422))),Xn(e,t,i,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=n.fallback,a=t.mode,n=tl({mode:"visible",children:n.children},a,0,null),l=tr(l,a,i,null),l.flags|=2,n.return=t,l.return=t,n.sibling=l,t.child=n,t.mode&1&&Ir(t,e.child,null,i),t.child.memoizedState=wi(i),t.memoizedState=ji,l);if(!(t.mode&1))return Xn(e,t,i,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var o=n.dgst;return n=o,l=Error(U(419)),n=Al(l,n,void 0),Xn(e,t,i,n)}if(o=(i&e.childLanes)!==0,Nt||o){if(n=at,n!==null){switch(i&-i){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|i)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,fs(e,a),Kt(n,e,a,-1))}return _o(),n=Al(Error(U(421))),Xn(e,t,i,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=Ax.bind(null,e),a._reactRetry=t,null):(e=l.treeContext,Et=Ls(a.nextSibling),Pt=t,$e=!0,qt=null,e!==null&&(zt[Rt++]=is,zt[Rt++]=os,zt[Rt++]=rr,is=e.id,os=e.overflow,rr=t),t=jo(t,n.children),t.flags|=4096,t)}function Ic(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),xi(e.return,t,r)}function Ll(e,t,r,n,a){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=n,l.tail=r,l.tailMode=a)}function Fu(e,t,r){var n=t.pendingProps,a=n.revealOrder,l=n.tail;if(pt(e,t,n.children,r),n=Be.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ic(e,r,t);else if(e.tag===19)Ic(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ie(Be,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&Aa(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Ll(t,!1,a,r,l);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Aa(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Ll(t,!0,r,null,l);break;case"together":Ll(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ma(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function gs(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),ar|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(U(153));if(t.child!==null){for(e=t.child,r=Fs(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Fs(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Nx(e,t,r){switch(t.tag){case 3:Ru(t),Mr();break;case 5:uu(t);break;case 1:kt(t.type)&&Da(t);break;case 4:mo(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;Ie(Pa,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Ie(Be,Be.current&1),t.flags|=128,null):r&t.child.childLanes?Ou(e,t,r):(Ie(Be,Be.current&1),e=gs(e,t,r),e!==null?e.sibling:null);Ie(Be,Be.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Fu(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ie(Be,Be.current),n)break;return null;case 22:case 23:return t.lanes=0,Lu(e,t,r)}return gs(e,t,r)}var $u,Ni,Uu,Bu;$u=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Ni=function(){};Uu=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Zs(ns.current);var l=null;switch(r){case"input":a=Vl(e,a),n=Vl(e,n),l=[];break;case"select":a=Ve({},a,{value:void 0}),n=Ve({},n,{value:void 0}),l=[];break;case"textarea":a=ql(e,a),n=ql(e,n),l=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=_a)}Kl(r,n);var i;r=null;for(p in a)if(!n.hasOwnProperty(p)&&a.hasOwnProperty(p)&&a[p]!=null)if(p==="style"){var o=a[p];for(i in o)o.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(dn.hasOwnProperty(p)?l||(l=[]):(l=l||[]).push(p,null));for(p in n){var c=n[p];if(o=a!=null?a[p]:void 0,n.hasOwnProperty(p)&&c!==o&&(c!=null||o!=null))if(p==="style")if(o){for(i in o)!o.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&o[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(l||(l=[]),l.push(p,r)),r=c;else p==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(l=l||[]).push(p,c)):p==="children"?typeof c!="string"&&typeof c!="number"||(l=l||[]).push(p,""+c):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(dn.hasOwnProperty(p)?(c!=null&&p==="onScroll"&&Ae("scroll",e),l||o===c||(l=[])):(l=l||[]).push(p,c))}r&&(l=l||[]).push("style",r);var p=l;(t.updateQueue=p)&&(t.flags|=4)}};Bu=function(e,t,r,n){r!==n&&(t.flags|=4)};function qr(e,t){if(!$e)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function dt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function bx(e,t,r){var n=t.pendingProps;switch(no(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(t),null;case 1:return kt(t.type)&&Ca(),dt(t),null;case 3:return n=t.stateNode,Ar(),Re(bt),Re(ht),xo(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Kn(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,qt!==null&&(Ei(qt),qt=null))),Ni(e,t),dt(t),null;case 5:ho(t);var a=Zs(Nn.current);if(r=t.type,e!==null&&t.stateNode!=null)Uu(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(U(166));return dt(t),null}if(e=Zs(ns.current),Kn(t)){n=t.stateNode,r=t.type;var l=t.memoizedProps;switch(n[es]=t,n[jn]=l,e=(t.mode&1)!==0,r){case"dialog":Ae("cancel",n),Ae("close",n);break;case"iframe":case"object":case"embed":Ae("load",n);break;case"video":case"audio":for(a=0;a<Zr.length;a++)Ae(Zr[a],n);break;case"source":Ae("error",n);break;case"img":case"image":case"link":Ae("error",n),Ae("load",n);break;case"details":Ae("toggle",n);break;case"input":Bo(n,l),Ae("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!l.multiple},Ae("invalid",n);break;case"textarea":Vo(n,l),Ae("invalid",n)}Kl(r,l),a=null;for(var i in l)if(l.hasOwnProperty(i)){var o=l[i];i==="children"?typeof o=="string"?n.textContent!==o&&(l.suppressHydrationWarning!==!0&&Qn(n.textContent,o,e),a=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(l.suppressHydrationWarning!==!0&&Qn(n.textContent,o,e),a=["children",""+o]):dn.hasOwnProperty(i)&&o!=null&&i==="onScroll"&&Ae("scroll",n)}switch(r){case"input":$n(n),Ho(n,l,!0);break;case"textarea":$n(n),Wo(n);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(n.onclick=_a)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{i=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=fd(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=i.createElement(r,{is:n.is}):(e=i.createElement(r),r==="select"&&(i=e,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):e=i.createElementNS(e,r),e[es]=t,e[jn]=n,$u(e,t,!1,!1),t.stateNode=e;e:{switch(i=Yl(r,n),r){case"dialog":Ae("cancel",e),Ae("close",e),a=n;break;case"iframe":case"object":case"embed":Ae("load",e),a=n;break;case"video":case"audio":for(a=0;a<Zr.length;a++)Ae(Zr[a],e);a=n;break;case"source":Ae("error",e),a=n;break;case"img":case"image":case"link":Ae("error",e),Ae("load",e),a=n;break;case"details":Ae("toggle",e),a=n;break;case"input":Bo(e,n),a=Vl(e,n),Ae("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=Ve({},n,{value:void 0}),Ae("invalid",e);break;case"textarea":Vo(e,n),a=ql(e,n),Ae("invalid",e);break;default:a=n}Kl(r,a),o=a;for(l in o)if(o.hasOwnProperty(l)){var c=o[l];l==="style"?vd(e,c):l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&gd(e,c)):l==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&un(e,c):typeof c=="number"&&un(e,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(dn.hasOwnProperty(l)?c!=null&&l==="onScroll"&&Ae("scroll",e):c!=null&&Hi(e,l,c,i))}switch(r){case"input":$n(e),Ho(e,n,!1);break;case"textarea":$n(e),Wo(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Us(n.value));break;case"select":e.multiple=!!n.multiple,l=n.value,l!=null?kr(e,!!n.multiple,l,!1):n.defaultValue!=null&&kr(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=_a)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return dt(t),null;case 6:if(e&&t.stateNode!=null)Bu(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(U(166));if(r=Zs(Nn.current),Zs(ns.current),Kn(t)){if(n=t.stateNode,r=t.memoizedProps,n[es]=t,(l=n.nodeValue!==r)&&(e=Pt,e!==null))switch(e.tag){case 3:Qn(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Qn(n.nodeValue,r,(e.mode&1)!==0)}l&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[es]=t,t.stateNode=n}return dt(t),null;case 13:if(Re(Be),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if($e&&Et!==null&&t.mode&1&&!(t.flags&128))lu(),Mr(),t.flags|=98560,l=!1;else if(l=Kn(t),n!==null&&n.dehydrated!==null){if(e===null){if(!l)throw Error(U(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(U(317));l[es]=t}else Mr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;dt(t),l=!1}else qt!==null&&(Ei(qt),qt=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Be.current&1?tt===0&&(tt=3):_o())),t.updateQueue!==null&&(t.flags|=4),dt(t),null);case 4:return Ar(),Ni(e,t),e===null&&yn(t.stateNode.containerInfo),dt(t),null;case 10:return oo(t.type._context),dt(t),null;case 17:return kt(t.type)&&Ca(),dt(t),null;case 19:if(Re(Be),l=t.memoizedState,l===null)return dt(t),null;if(n=(t.flags&128)!==0,i=l.rendering,i===null)if(n)qr(l,!1);else{if(tt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=Aa(e),i!==null){for(t.flags|=128,qr(l,!1),n=i.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)l=r,e=n,l.flags&=14680066,i=l.alternate,i===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,l.type=i.type,e=i.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ie(Be,Be.current&1|2),t.child}e=e.sibling}l.tail!==null&&Qe()>zr&&(t.flags|=128,n=!0,qr(l,!1),t.lanes=4194304)}else{if(!n)if(e=Aa(i),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),qr(l,!0),l.tail===null&&l.tailMode==="hidden"&&!i.alternate&&!$e)return dt(t),null}else 2*Qe()-l.renderingStartTime>zr&&r!==1073741824&&(t.flags|=128,n=!0,qr(l,!1),t.lanes=4194304);l.isBackwards?(i.sibling=t.child,t.child=i):(r=l.last,r!==null?r.sibling=i:t.child=i,l.last=i)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Qe(),t.sibling=null,r=Be.current,Ie(Be,n?r&1|2:r&1),t):(dt(t),null);case 22:case 23:return So(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Dt&1073741824&&(dt(t),t.subtreeFlags&6&&(t.flags|=8192)):dt(t),null;case 24:return null;case 25:return null}throw Error(U(156,t.tag))}function kx(e,t){switch(no(t),t.tag){case 1:return kt(t.type)&&Ca(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ar(),Re(bt),Re(ht),xo(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ho(t),null;case 13:if(Re(Be),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(U(340));Mr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Re(Be),null;case 4:return Ar(),null;case 10:return oo(t.type._context),null;case 22:case 23:return So(),null;case 24:return null;default:return null}}var Zn=!1,ut=!1,Sx=typeof WeakSet=="function"?WeakSet:Set,te=null;function Nr(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Ge(e,t,n)}else r.current=null}function bi(e,t,r){try{r()}catch(n){Ge(e,t,n)}}var Ac=!1;function _x(e,t){if(li=ba,e=qd(),so(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,l=n.focusNode;n=n.focusOffset;try{r.nodeType,l.nodeType}catch{r=null;break e}var i=0,o=-1,c=-1,p=0,g=0,j=e,d=null;t:for(;;){for(var N;j!==r||a!==0&&j.nodeType!==3||(o=i+a),j!==l||n!==0&&j.nodeType!==3||(c=i+n),j.nodeType===3&&(i+=j.nodeValue.length),(N=j.firstChild)!==null;)d=j,j=N;for(;;){if(j===e)break t;if(d===r&&++p===a&&(o=i),d===l&&++g===n&&(c=i),(N=j.nextSibling)!==null)break;j=d,d=j.parentNode}j=N}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(ii={focusedElem:e,selectionRange:r},ba=!1,te=t;te!==null;)if(t=te,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,te=e;else for(;te!==null;){t=te;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var P=w.memoizedProps,L=w.memoizedState,f=t.stateNode,h=f.getSnapshotBeforeUpdate(t.elementType===t.type?P:Wt(t.type,P),L);f.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(b){Ge(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,te=e;break}te=t.return}return w=Ac,Ac=!1,w}function an(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var l=a.destroy;a.destroy=void 0,l!==void 0&&bi(t,r,l)}a=a.next}while(a!==n)}}function Ja(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function ki(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Hu(e){var t=e.alternate;t!==null&&(e.alternate=null,Hu(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[es],delete t[jn],delete t[di],delete t[ox],delete t[cx])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Vu(e){return e.tag===5||e.tag===3||e.tag===4}function Lc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Vu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Si(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=_a));else if(n!==4&&(e=e.child,e!==null))for(Si(e,t,r),e=e.sibling;e!==null;)Si(e,t,r),e=e.sibling}function _i(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(_i(e,t,r),e=e.sibling;e!==null;)_i(e,t,r),e=e.sibling}var lt=null,Gt=!1;function vs(e,t,r){for(r=r.child;r!==null;)Wu(e,t,r),r=r.sibling}function Wu(e,t,r){if(rs&&typeof rs.onCommitFiberUnmount=="function")try{rs.onCommitFiberUnmount(Wa,r)}catch{}switch(r.tag){case 5:ut||Nr(r,t);case 6:var n=lt,a=Gt;lt=null,vs(e,t,r),lt=n,Gt=a,lt!==null&&(Gt?(e=lt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):lt.removeChild(r.stateNode));break;case 18:lt!==null&&(Gt?(e=lt,r=r.stateNode,e.nodeType===8?Dl(e.parentNode,r):e.nodeType===1&&Dl(e,r),pn(e)):Dl(lt,r.stateNode));break;case 4:n=lt,a=Gt,lt=r.stateNode.containerInfo,Gt=!0,vs(e,t,r),lt=n,Gt=a;break;case 0:case 11:case 14:case 15:if(!ut&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var l=a,i=l.destroy;l=l.tag,i!==void 0&&(l&2||l&4)&&bi(r,t,i),a=a.next}while(a!==n)}vs(e,t,r);break;case 1:if(!ut&&(Nr(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){Ge(r,t,o)}vs(e,t,r);break;case 21:vs(e,t,r);break;case 22:r.mode&1?(ut=(n=ut)||r.memoizedState!==null,vs(e,t,r),ut=n):vs(e,t,r);break;default:vs(e,t,r)}}function zc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Sx),t.forEach(function(n){var a=Lx.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Vt(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var l=e,i=t,o=i;e:for(;o!==null;){switch(o.tag){case 5:lt=o.stateNode,Gt=!1;break e;case 3:lt=o.stateNode.containerInfo,Gt=!0;break e;case 4:lt=o.stateNode.containerInfo,Gt=!0;break e}o=o.return}if(lt===null)throw Error(U(160));Wu(l,i,a),lt=null,Gt=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(p){Ge(a,t,p)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Gu(t,e),t=t.sibling}function Gu(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Vt(t,e),Xt(e),n&4){try{an(3,e,e.return),Ja(3,e)}catch(P){Ge(e,e.return,P)}try{an(5,e,e.return)}catch(P){Ge(e,e.return,P)}}break;case 1:Vt(t,e),Xt(e),n&512&&r!==null&&Nr(r,r.return);break;case 5:if(Vt(t,e),Xt(e),n&512&&r!==null&&Nr(r,r.return),e.flags&32){var a=e.stateNode;try{un(a,"")}catch(P){Ge(e,e.return,P)}}if(n&4&&(a=e.stateNode,a!=null)){var l=e.memoizedProps,i=r!==null?r.memoizedProps:l,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&l.type==="radio"&&l.name!=null&&xd(a,l),Yl(o,i);var p=Yl(o,l);for(i=0;i<c.length;i+=2){var g=c[i],j=c[i+1];g==="style"?vd(a,j):g==="dangerouslySetInnerHTML"?gd(a,j):g==="children"?un(a,j):Hi(a,g,j,p)}switch(o){case"input":Wl(a,l);break;case"textarea":pd(a,l);break;case"select":var d=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var N=l.value;N!=null?kr(a,!!l.multiple,N,!1):d!==!!l.multiple&&(l.defaultValue!=null?kr(a,!!l.multiple,l.defaultValue,!0):kr(a,!!l.multiple,l.multiple?[]:"",!1))}a[jn]=l}catch(P){Ge(e,e.return,P)}}break;case 6:if(Vt(t,e),Xt(e),n&4){if(e.stateNode===null)throw Error(U(162));a=e.stateNode,l=e.memoizedProps;try{a.nodeValue=l}catch(P){Ge(e,e.return,P)}}break;case 3:if(Vt(t,e),Xt(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{pn(t.containerInfo)}catch(P){Ge(e,e.return,P)}break;case 4:Vt(t,e),Xt(e);break;case 13:Vt(t,e),Xt(e),a=e.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(bo=Qe())),n&4&&zc(e);break;case 22:if(g=r!==null&&r.memoizedState!==null,e.mode&1?(ut=(p=ut)||g,Vt(t,e),ut=p):Vt(t,e),Xt(e),n&8192){if(p=e.memoizedState!==null,(e.stateNode.isHidden=p)&&!g&&e.mode&1)for(te=e,g=e.child;g!==null;){for(j=te=g;te!==null;){switch(d=te,N=d.child,d.tag){case 0:case 11:case 14:case 15:an(4,d,d.return);break;case 1:Nr(d,d.return);var w=d.stateNode;if(typeof w.componentWillUnmount=="function"){n=d,r=d.return;try{t=n,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(P){Ge(n,r,P)}}break;case 5:Nr(d,d.return);break;case 22:if(d.memoizedState!==null){Oc(j);continue}}N!==null?(N.return=d,te=N):Oc(j)}g=g.sibling}e:for(g=null,j=e;;){if(j.tag===5){if(g===null){g=j;try{a=j.stateNode,p?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(o=j.stateNode,c=j.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=yd("display",i))}catch(P){Ge(e,e.return,P)}}}else if(j.tag===6){if(g===null)try{j.stateNode.nodeValue=p?"":j.memoizedProps}catch(P){Ge(e,e.return,P)}}else if((j.tag!==22&&j.tag!==23||j.memoizedState===null||j===e)&&j.child!==null){j.child.return=j,j=j.child;continue}if(j===e)break e;for(;j.sibling===null;){if(j.return===null||j.return===e)break e;g===j&&(g=null),j=j.return}g===j&&(g=null),j.sibling.return=j.return,j=j.sibling}}break;case 19:Vt(t,e),Xt(e),n&4&&zc(e);break;case 21:break;default:Vt(t,e),Xt(e)}}function Xt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Vu(r)){var n=r;break e}r=r.return}throw Error(U(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(un(a,""),n.flags&=-33);var l=Lc(e);_i(e,l,a);break;case 3:case 4:var i=n.stateNode.containerInfo,o=Lc(e);Si(e,o,i);break;default:throw Error(U(161))}}catch(c){Ge(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Cx(e,t,r){te=e,qu(e)}function qu(e,t,r){for(var n=(e.mode&1)!==0;te!==null;){var a=te,l=a.child;if(a.tag===22&&n){var i=a.memoizedState!==null||Zn;if(!i){var o=a.alternate,c=o!==null&&o.memoizedState!==null||ut;o=Zn;var p=ut;if(Zn=i,(ut=c)&&!p)for(te=a;te!==null;)i=te,c=i.child,i.tag===22&&i.memoizedState!==null?Fc(a):c!==null?(c.return=i,te=c):Fc(a);for(;l!==null;)te=l,qu(l),l=l.sibling;te=a,Zn=o,ut=p}Rc(e)}else a.subtreeFlags&8772&&l!==null?(l.return=a,te=l):Rc(e)}}function Rc(e){for(;te!==null;){var t=te;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ut||Ja(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!ut)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Wt(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&wc(t,l,n);break;case 3:var i=t.updateQueue;if(i!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}wc(t,i,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var p=t.alternate;if(p!==null){var g=p.memoizedState;if(g!==null){var j=g.dehydrated;j!==null&&pn(j)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}ut||t.flags&512&&ki(t)}catch(d){Ge(t,t.return,d)}}if(t===e){te=null;break}if(r=t.sibling,r!==null){r.return=t.return,te=r;break}te=t.return}}function Oc(e){for(;te!==null;){var t=te;if(t===e){te=null;break}var r=t.sibling;if(r!==null){r.return=t.return,te=r;break}te=t.return}}function Fc(e){for(;te!==null;){var t=te;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Ja(4,t)}catch(c){Ge(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){Ge(t,a,c)}}var l=t.return;try{ki(t)}catch(c){Ge(t,l,c)}break;case 5:var i=t.return;try{ki(t)}catch(c){Ge(t,i,c)}}}catch(c){Ge(t,t.return,c)}if(t===e){te=null;break}var o=t.sibling;if(o!==null){o.return=t.return,te=o;break}te=t.return}}var Dx=Math.ceil,Ra=ys.ReactCurrentDispatcher,wo=ys.ReactCurrentOwner,$t=ys.ReactCurrentBatchConfig,we=0,at=null,Ye=null,it=0,Dt=0,br=Vs(0),tt=0,_n=null,ar=0,el=0,No=0,ln=null,wt=null,bo=0,zr=1/0,as=null,Oa=!1,Ci=null,Rs=null,Jn=!1,Ss=null,Fa=0,on=0,Di=null,ha=-1,xa=0;function yt(){return we&6?Qe():ha!==-1?ha:ha=Qe()}function Os(e){return e.mode&1?we&2&&it!==0?it&-it:ux.transition!==null?(xa===0&&(xa=Pd()),xa):(e=Ce,e!==0||(e=window.event,e=e===void 0?16:Od(e.type)),e):1}function Kt(e,t,r,n){if(50<on)throw on=0,Di=null,Error(U(185));En(e,r,n),(!(we&2)||e!==at)&&(e===at&&(!(we&2)&&(el|=r),tt===4&&bs(e,it)),St(e,n),r===1&&we===0&&!(t.mode&1)&&(zr=Qe()+500,Ya&&Ws()))}function St(e,t){var r=e.callbackNode;uh(e,t);var n=Na(e,e===at?it:0);if(n===0)r!==null&&Qo(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Qo(r),t===1)e.tag===0?dx($c.bind(null,e)):ru($c.bind(null,e)),lx(function(){!(we&6)&&Ws()}),r=null;else{switch(Md(n)){case 1:r=Qi;break;case 4:r=Td;break;case 16:r=wa;break;case 536870912:r=Ed;break;default:r=wa}r=tm(r,Qu.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Qu(e,t){if(ha=-1,xa=0,we&6)throw Error(U(327));var r=e.callbackNode;if(Tr()&&e.callbackNode!==r)return null;var n=Na(e,e===at?it:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=$a(e,n);else{t=n;var a=we;we|=2;var l=Yu();(at!==e||it!==t)&&(as=null,zr=Qe()+500,er(e,t));do try{Px();break}catch(o){Ku(e,o)}while(!0);io(),Ra.current=l,we=a,Ye!==null?t=0:(at=null,it=0,t=tt)}if(t!==0){if(t===2&&(a=ti(e),a!==0&&(n=a,t=Ti(e,a))),t===1)throw r=_n,er(e,0),bs(e,n),St(e,Qe()),r;if(t===6)bs(e,n);else{if(a=e.current.alternate,!(n&30)&&!Tx(a)&&(t=$a(e,n),t===2&&(l=ti(e),l!==0&&(n=l,t=Ti(e,l))),t===1))throw r=_n,er(e,0),bs(e,n),St(e,Qe()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(U(345));case 2:Qs(e,wt,as);break;case 3:if(bs(e,n),(n&130023424)===n&&(t=bo+500-Qe(),10<t)){if(Na(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){yt(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ci(Qs.bind(null,e,wt,as),t);break}Qs(e,wt,as);break;case 4:if(bs(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var i=31-Qt(n);l=1<<i,i=t[i],i>a&&(a=i),n&=~l}if(n=a,n=Qe()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Dx(n/1960))-n,10<n){e.timeoutHandle=ci(Qs.bind(null,e,wt,as),n);break}Qs(e,wt,as);break;case 5:Qs(e,wt,as);break;default:throw Error(U(329))}}}return St(e,Qe()),e.callbackNode===r?Qu.bind(null,e):null}function Ti(e,t){var r=ln;return e.current.memoizedState.isDehydrated&&(er(e,t).flags|=256),e=$a(e,t),e!==2&&(t=wt,wt=r,t!==null&&Ei(t)),e}function Ei(e){wt===null?wt=e:wt.push.apply(wt,e)}function Tx(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],l=a.getSnapshot;a=a.value;try{if(!Yt(l(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function bs(e,t){for(t&=~No,t&=~el,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Qt(t),n=1<<r;e[r]=-1,t&=~n}}function $c(e){if(we&6)throw Error(U(327));Tr();var t=Na(e,0);if(!(t&1))return St(e,Qe()),null;var r=$a(e,t);if(e.tag!==0&&r===2){var n=ti(e);n!==0&&(t=n,r=Ti(e,n))}if(r===1)throw r=_n,er(e,0),bs(e,t),St(e,Qe()),r;if(r===6)throw Error(U(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Qs(e,wt,as),St(e,Qe()),null}function ko(e,t){var r=we;we|=1;try{return e(t)}finally{we=r,we===0&&(zr=Qe()+500,Ya&&Ws())}}function lr(e){Ss!==null&&Ss.tag===0&&!(we&6)&&Tr();var t=we;we|=1;var r=$t.transition,n=Ce;try{if($t.transition=null,Ce=1,e)return e()}finally{Ce=n,$t.transition=r,we=t,!(we&6)&&Ws()}}function So(){Dt=br.current,Re(br)}function er(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,ax(r)),Ye!==null)for(r=Ye.return;r!==null;){var n=r;switch(no(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Ca();break;case 3:Ar(),Re(bt),Re(ht),xo();break;case 5:ho(n);break;case 4:Ar();break;case 13:Re(Be);break;case 19:Re(Be);break;case 10:oo(n.type._context);break;case 22:case 23:So()}r=r.return}if(at=e,Ye=e=Fs(e.current,null),it=Dt=t,tt=0,_n=null,No=el=ar=0,wt=ln=null,Xs!==null){for(t=0;t<Xs.length;t++)if(r=Xs[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,l=r.pending;if(l!==null){var i=l.next;l.next=a,n.next=i}r.pending=n}Xs=null}return e}function Ku(e,t){do{var r=Ye;try{if(io(),da.current=za,La){for(var n=He.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}La=!1}if(nr=0,rt=et=He=null,nn=!1,bn=0,wo.current=null,r===null||r.return===null){tt=1,_n=t,Ye=null;break}e:{var l=e,i=r.return,o=r,c=t;if(t=it,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var p=c,g=o,j=g.tag;if(!(g.mode&1)&&(j===0||j===11||j===15)){var d=g.alternate;d?(g.updateQueue=d.updateQueue,g.memoizedState=d.memoizedState,g.lanes=d.lanes):(g.updateQueue=null,g.memoizedState=null)}var N=Cc(i);if(N!==null){N.flags&=-257,Dc(N,i,o,l,t),N.mode&1&&_c(l,p,t),t=N,c=p;var w=t.updateQueue;if(w===null){var P=new Set;P.add(c),t.updateQueue=P}else w.add(c);break e}else{if(!(t&1)){_c(l,p,t),_o();break e}c=Error(U(426))}}else if($e&&o.mode&1){var L=Cc(i);if(L!==null){!(L.flags&65536)&&(L.flags|=256),Dc(L,i,o,l,t),ao(Lr(c,o));break e}}l=c=Lr(c,o),tt!==4&&(tt=2),ln===null?ln=[l]:ln.push(l),l=i;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var f=Mu(l,c,t);jc(l,f);break e;case 1:o=c;var h=l.type,x=l.stateNode;if(!(l.flags&128)&&(typeof h.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Rs===null||!Rs.has(x)))){l.flags|=65536,t&=-t,l.lanes|=t;var b=Iu(l,o,t);jc(l,b);break e}}l=l.return}while(l!==null)}Zu(r)}catch(S){t=S,Ye===r&&r!==null&&(Ye=r=r.return);continue}break}while(!0)}function Yu(){var e=Ra.current;return Ra.current=za,e===null?za:e}function _o(){(tt===0||tt===3||tt===2)&&(tt=4),at===null||!(ar&268435455)&&!(el&268435455)||bs(at,it)}function $a(e,t){var r=we;we|=2;var n=Yu();(at!==e||it!==t)&&(as=null,er(e,t));do try{Ex();break}catch(a){Ku(e,a)}while(!0);if(io(),we=r,Ra.current=n,Ye!==null)throw Error(U(261));return at=null,it=0,tt}function Ex(){for(;Ye!==null;)Xu(Ye)}function Px(){for(;Ye!==null&&!sh();)Xu(Ye)}function Xu(e){var t=em(e.alternate,e,Dt);e.memoizedProps=e.pendingProps,t===null?Zu(e):Ye=t,wo.current=null}function Zu(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=kx(r,t),r!==null){r.flags&=32767,Ye=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{tt=6,Ye=null;return}}else if(r=bx(r,t,Dt),r!==null){Ye=r;return}if(t=t.sibling,t!==null){Ye=t;return}Ye=t=e}while(t!==null);tt===0&&(tt=5)}function Qs(e,t,r){var n=Ce,a=$t.transition;try{$t.transition=null,Ce=1,Mx(e,t,r,n)}finally{$t.transition=a,Ce=n}return null}function Mx(e,t,r,n){do Tr();while(Ss!==null);if(we&6)throw Error(U(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(U(177));e.callbackNode=null,e.callbackPriority=0;var l=r.lanes|r.childLanes;if(mh(e,l),e===at&&(Ye=at=null,it=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Jn||(Jn=!0,tm(wa,function(){return Tr(),null})),l=(r.flags&15990)!==0,r.subtreeFlags&15990||l){l=$t.transition,$t.transition=null;var i=Ce;Ce=1;var o=we;we|=4,wo.current=null,_x(e,r),Gu(r,e),Zh(ii),ba=!!li,ii=li=null,e.current=r,Cx(r),rh(),we=o,Ce=i,$t.transition=l}else e.current=r;if(Jn&&(Jn=!1,Ss=e,Fa=a),l=e.pendingLanes,l===0&&(Rs=null),lh(r.stateNode),St(e,Qe()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Oa)throw Oa=!1,e=Ci,Ci=null,e;return Fa&1&&e.tag!==0&&Tr(),l=e.pendingLanes,l&1?e===Di?on++:(on=0,Di=e):on=0,Ws(),null}function Tr(){if(Ss!==null){var e=Md(Fa),t=$t.transition,r=Ce;try{if($t.transition=null,Ce=16>e?16:e,Ss===null)var n=!1;else{if(e=Ss,Ss=null,Fa=0,we&6)throw Error(U(331));var a=we;for(we|=4,te=e.current;te!==null;){var l=te,i=l.child;if(te.flags&16){var o=l.deletions;if(o!==null){for(var c=0;c<o.length;c++){var p=o[c];for(te=p;te!==null;){var g=te;switch(g.tag){case 0:case 11:case 15:an(8,g,l)}var j=g.child;if(j!==null)j.return=g,te=j;else for(;te!==null;){g=te;var d=g.sibling,N=g.return;if(Hu(g),g===p){te=null;break}if(d!==null){d.return=N,te=d;break}te=N}}}var w=l.alternate;if(w!==null){var P=w.child;if(P!==null){w.child=null;do{var L=P.sibling;P.sibling=null,P=L}while(P!==null)}}te=l}}if(l.subtreeFlags&2064&&i!==null)i.return=l,te=i;else e:for(;te!==null;){if(l=te,l.flags&2048)switch(l.tag){case 0:case 11:case 15:an(9,l,l.return)}var f=l.sibling;if(f!==null){f.return=l.return,te=f;break e}te=l.return}}var h=e.current;for(te=h;te!==null;){i=te;var x=i.child;if(i.subtreeFlags&2064&&x!==null)x.return=i,te=x;else e:for(i=h;te!==null;){if(o=te,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Ja(9,o)}}catch(S){Ge(o,o.return,S)}if(o===i){te=null;break e}var b=o.sibling;if(b!==null){b.return=o.return,te=b;break e}te=o.return}}if(we=a,Ws(),rs&&typeof rs.onPostCommitFiberRoot=="function")try{rs.onPostCommitFiberRoot(Wa,e)}catch{}n=!0}return n}finally{Ce=r,$t.transition=t}}return!1}function Uc(e,t,r){t=Lr(r,t),t=Mu(e,t,1),e=zs(e,t,1),t=yt(),e!==null&&(En(e,1,t),St(e,t))}function Ge(e,t,r){if(e.tag===3)Uc(e,e,r);else for(;t!==null;){if(t.tag===3){Uc(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Rs===null||!Rs.has(n))){e=Lr(r,e),e=Iu(t,e,1),t=zs(t,e,1),e=yt(),t!==null&&(En(t,1,e),St(t,e));break}}t=t.return}}function Ix(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=yt(),e.pingedLanes|=e.suspendedLanes&r,at===e&&(it&r)===r&&(tt===4||tt===3&&(it&130023424)===it&&500>Qe()-bo?er(e,0):No|=r),St(e,t)}function Ju(e,t){t===0&&(e.mode&1?(t=Hn,Hn<<=1,!(Hn&130023424)&&(Hn=4194304)):t=1);var r=yt();e=fs(e,t),e!==null&&(En(e,t,r),St(e,r))}function Ax(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Ju(e,r)}function Lx(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(U(314))}n!==null&&n.delete(t),Ju(e,r)}var em;em=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||bt.current)Nt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Nt=!1,Nx(e,t,r);Nt=!!(e.flags&131072)}else Nt=!1,$e&&t.flags&1048576&&nu(t,Ea,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;ma(e,t),e=t.pendingProps;var a=Pr(t,ht.current);Dr(t,r),a=fo(null,t,n,e,a,r);var l=go();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,kt(n)?(l=!0,Da(t)):l=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,uo(t),a.updater=Za,t.stateNode=a,a._reactInternals=t,fi(t,n,e,r),t=vi(null,t,n,!0,l,r)):(t.tag=0,$e&&l&&ro(t),pt(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(ma(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=Rx(n),e=Wt(n,e),a){case 0:t=yi(null,t,n,e,r);break e;case 1:t=Pc(null,t,n,e,r);break e;case 11:t=Tc(null,t,n,e,r);break e;case 14:t=Ec(null,t,n,Wt(n.type,e),r);break e}throw Error(U(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Wt(n,a),yi(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Wt(n,a),Pc(e,t,n,a,r);case 3:e:{if(Ru(t),e===null)throw Error(U(387));n=t.pendingProps,l=t.memoizedState,a=l.element,du(e,t),Ia(t,n,null,r);var i=t.memoizedState;if(n=i.element,l.isDehydrated)if(l={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){a=Lr(Error(U(423)),t),t=Mc(e,t,n,r,a);break e}else if(n!==a){a=Lr(Error(U(424)),t),t=Mc(e,t,n,r,a);break e}else for(Et=Ls(t.stateNode.containerInfo.firstChild),Pt=t,$e=!0,qt=null,r=ou(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Mr(),n===a){t=gs(e,t,r);break e}pt(e,t,n,r)}t=t.child}return t;case 5:return uu(t),e===null&&hi(t),n=t.type,a=t.pendingProps,l=e!==null?e.memoizedProps:null,i=a.children,oi(n,a)?i=null:l!==null&&oi(n,l)&&(t.flags|=32),zu(e,t),pt(e,t,i,r),t.child;case 6:return e===null&&hi(t),null;case 13:return Ou(e,t,r);case 4:return mo(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Ir(t,null,n,r):pt(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Wt(n,a),Tc(e,t,n,a,r);case 7:return pt(e,t,t.pendingProps,r),t.child;case 8:return pt(e,t,t.pendingProps.children,r),t.child;case 12:return pt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,l=t.memoizedProps,i=a.value,Ie(Pa,n._currentValue),n._currentValue=i,l!==null)if(Yt(l.value,i)){if(l.children===a.children&&!bt.current){t=gs(e,t,r);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var o=l.dependencies;if(o!==null){i=l.child;for(var c=o.firstContext;c!==null;){if(c.context===n){if(l.tag===1){c=ms(-1,r&-r),c.tag=2;var p=l.updateQueue;if(p!==null){p=p.shared;var g=p.pending;g===null?c.next=c:(c.next=g.next,g.next=c),p.pending=c}}l.lanes|=r,c=l.alternate,c!==null&&(c.lanes|=r),xi(l.return,r,t),o.lanes|=r;break}c=c.next}}else if(l.tag===10)i=l.type===t.type?null:l.child;else if(l.tag===18){if(i=l.return,i===null)throw Error(U(341));i.lanes|=r,o=i.alternate,o!==null&&(o.lanes|=r),xi(i,r,t),i=l.sibling}else i=l.child;if(i!==null)i.return=l;else for(i=l;i!==null;){if(i===t){i=null;break}if(l=i.sibling,l!==null){l.return=i.return,i=l;break}i=i.return}l=i}pt(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,Dr(t,r),a=Ut(a),n=n(a),t.flags|=1,pt(e,t,n,r),t.child;case 14:return n=t.type,a=Wt(n,t.pendingProps),a=Wt(n.type,a),Ec(e,t,n,a,r);case 15:return Au(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Wt(n,a),ma(e,t),t.tag=1,kt(n)?(e=!0,Da(t)):e=!1,Dr(t,r),Pu(t,n,a),fi(t,n,a,r),vi(null,t,n,!0,e,r);case 19:return Fu(e,t,r);case 22:return Lu(e,t,r)}throw Error(U(156,t.tag))};function tm(e,t){return Dd(e,t)}function zx(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ft(e,t,r,n){return new zx(e,t,r,n)}function Co(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Rx(e){if(typeof e=="function")return Co(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Wi)return 11;if(e===Gi)return 14}return 2}function Fs(e,t){var r=e.alternate;return r===null?(r=Ft(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function pa(e,t,r,n,a,l){var i=2;if(n=e,typeof e=="function")Co(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case hr:return tr(r.children,a,l,t);case Vi:i=8,a|=8;break;case $l:return e=Ft(12,r,t,a|2),e.elementType=$l,e.lanes=l,e;case Ul:return e=Ft(13,r,t,a),e.elementType=Ul,e.lanes=l,e;case Bl:return e=Ft(19,r,t,a),e.elementType=Bl,e.lanes=l,e;case ud:return tl(r,a,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case cd:i=10;break e;case dd:i=9;break e;case Wi:i=11;break e;case Gi:i=14;break e;case js:i=16,n=null;break e}throw Error(U(130,e==null?e:typeof e,""))}return t=Ft(i,r,t,a),t.elementType=e,t.type=n,t.lanes=l,t}function tr(e,t,r,n){return e=Ft(7,e,n,t),e.lanes=r,e}function tl(e,t,r,n){return e=Ft(22,e,n,t),e.elementType=ud,e.lanes=r,e.stateNode={isHidden:!1},e}function zl(e,t,r){return e=Ft(6,e,null,t),e.lanes=r,e}function Rl(e,t,r){return t=Ft(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ox(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gl(0),this.expirationTimes=gl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gl(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Do(e,t,r,n,a,l,i,o,c){return e=new Ox(e,t,r,o,c),t===1?(t=1,l===!0&&(t|=8)):t=0,l=Ft(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},uo(l),e}function Fx(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:mr,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function sm(e){if(!e)return Bs;e=e._reactInternals;e:{if(cr(e)!==e||e.tag!==1)throw Error(U(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(kt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(U(171))}if(e.tag===1){var r=e.type;if(kt(r))return su(e,r,t)}return t}function rm(e,t,r,n,a,l,i,o,c){return e=Do(r,n,!0,e,a,l,i,o,c),e.context=sm(null),r=e.current,n=yt(),a=Os(r),l=ms(n,a),l.callback=t??null,zs(r,l,a),e.current.lanes=a,En(e,a,n),St(e,n),e}function sl(e,t,r,n){var a=t.current,l=yt(),i=Os(a);return r=sm(r),t.context===null?t.context=r:t.pendingContext=r,t=ms(l,i),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=zs(a,t,i),e!==null&&(Kt(e,a,i,l),ca(e,a,i)),i}function Ua(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Bc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function To(e,t){Bc(e,t),(e=e.alternate)&&Bc(e,t)}function $x(){return null}var nm=typeof reportError=="function"?reportError:function(e){console.error(e)};function Eo(e){this._internalRoot=e}rl.prototype.render=Eo.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(U(409));sl(e,t,null,null)};rl.prototype.unmount=Eo.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;lr(function(){sl(null,e,null,null)}),t[ps]=null}};function rl(e){this._internalRoot=e}rl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ld();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Ns.length&&t!==0&&t<Ns[r].priority;r++);Ns.splice(r,0,e),r===0&&Rd(e)}};function Po(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function nl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Hc(){}function Ux(e,t,r,n,a){if(a){if(typeof n=="function"){var l=n;n=function(){var p=Ua(i);l.call(p)}}var i=rm(t,n,e,0,null,!1,!1,"",Hc);return e._reactRootContainer=i,e[ps]=i.current,yn(e.nodeType===8?e.parentNode:e),lr(),i}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var o=n;n=function(){var p=Ua(c);o.call(p)}}var c=Do(e,0,!1,null,null,!1,!1,"",Hc);return e._reactRootContainer=c,e[ps]=c.current,yn(e.nodeType===8?e.parentNode:e),lr(function(){sl(t,c,r,n)}),c}function al(e,t,r,n,a){var l=r._reactRootContainer;if(l){var i=l;if(typeof a=="function"){var o=a;a=function(){var c=Ua(i);o.call(c)}}sl(t,i,e,a)}else i=Ux(r,t,e,a,n);return Ua(i)}Id=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Xr(t.pendingLanes);r!==0&&(Ki(t,r|1),St(t,Qe()),!(we&6)&&(zr=Qe()+500,Ws()))}break;case 13:lr(function(){var n=fs(e,1);if(n!==null){var a=yt();Kt(n,e,1,a)}}),To(e,1)}};Yi=function(e){if(e.tag===13){var t=fs(e,134217728);if(t!==null){var r=yt();Kt(t,e,134217728,r)}To(e,134217728)}};Ad=function(e){if(e.tag===13){var t=Os(e),r=fs(e,t);if(r!==null){var n=yt();Kt(r,e,t,n)}To(e,t)}};Ld=function(){return Ce};zd=function(e,t){var r=Ce;try{return Ce=e,t()}finally{Ce=r}};Zl=function(e,t,r){switch(t){case"input":if(Wl(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=Ka(n);if(!a)throw Error(U(90));hd(n),Wl(n,a)}}}break;case"textarea":pd(e,r);break;case"select":t=r.value,t!=null&&kr(e,!!r.multiple,t,!1)}};Nd=ko;bd=lr;var Bx={usingClientEntryPoint:!1,Events:[Mn,gr,Ka,jd,wd,ko]},Qr={findFiberByHostInstance:Ys,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Hx={bundleType:Qr.bundleType,version:Qr.version,rendererPackageName:Qr.rendererPackageName,rendererConfig:Qr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ys.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=_d(e),e===null?null:e.stateNode},findFiberByHostInstance:Qr.findFiberByHostInstance||$x,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ea=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ea.isDisabled&&ea.supportsFiber)try{Wa=ea.inject(Hx),rs=ea}catch{}}It.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Bx;It.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Po(t))throw Error(U(200));return Fx(e,t,null,r)};It.createRoot=function(e,t){if(!Po(e))throw Error(U(299));var r=!1,n="",a=nm;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Do(e,1,!1,null,null,r,!1,n,a),e[ps]=t.current,yn(e.nodeType===8?e.parentNode:e),new Eo(t)};It.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(U(188)):(e=Object.keys(e).join(","),Error(U(268,e)));return e=_d(t),e=e===null?null:e.stateNode,e};It.flushSync=function(e){return lr(e)};It.hydrate=function(e,t,r){if(!nl(t))throw Error(U(200));return al(null,e,t,!0,r)};It.hydrateRoot=function(e,t,r){if(!Po(e))throw Error(U(405));var n=r!=null&&r.hydratedSources||null,a=!1,l="",i=nm;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),t=rm(t,null,e,1,r??null,a,!1,l,i),e[ps]=t.current,yn(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new rl(t)};It.render=function(e,t,r){if(!nl(t))throw Error(U(200));return al(null,e,t,!1,r)};It.unmountComponentAtNode=function(e){if(!nl(e))throw Error(U(40));return e._reactRootContainer?(lr(function(){al(null,null,e,!1,function(){e._reactRootContainer=null,e[ps]=null})}),!0):!1};It.unstable_batchedUpdates=ko;It.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!nl(r))throw Error(U(200));if(e==null||e._reactInternals===void 0)throw Error(U(38));return al(e,t,r,!1,n)};It.version="18.3.1-next-f1338f8080-20240426";function am(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(am)}catch(e){console.error(e)}}am(),ad.exports=It;var Vx=ad.exports,lm,Vc=Vx;lm=Vc.createRoot,Vc.hydrateRoot;const Wx="https://workflow.bylinelms.com/api",im=m.createContext(void 0);function Gx({children:e}){const[t,r]=m.useState(null),[n,a]=m.useState(null),[l,i]=m.useState(!0);m.useEffect(()=>{(()=>{try{const j=localStorage.getItem("access_token"),d=localStorage.getItem("user_data"),N=localStorage.getItem("refresh_token");if(j&&d){const w=JSON.parse(d),P={user:w,access_token:j,refresh_token:N||"",expires_in:3600};r(w),a(P)}}catch{localStorage.removeItem("access_token"),localStorage.removeItem("user_data"),localStorage.removeItem("refresh_token")}finally{i(!1)}})()},[]);const o=async()=>({data:null,error:{message:"Admin registration is not available."}}),c=async(g,j)=>{try{const d=await fetch(`${Wx}/auth/admin/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:g,password:j})}),N=await d.json();if(d.ok&&N.success){const{user:w,access_token:P,refresh_token:L,expires_in:f}=N.data;localStorage.setItem("access_token",P),localStorage.setItem("user_data",JSON.stringify(w)),L&&localStorage.setItem("refresh_token",L);const h={user:w,access_token:P,refresh_token:L||"",expires_in:f};return r(w),a(h),{data:{user:w,session:h},error:null}}else return{data:{user:null,session:null},error:{message:N.message||"Login failed"}}}catch{return{data:{user:null,session:null},error:{message:"Network error"}}}},p=async()=>(localStorage.clear(),r(null),a(null),{error:null});return s.jsx(im.Provider,{value:{user:t,session:n,loading:l,signUp:o,signIn:c,signOut:p},children:e})}function An(){const e=m.useContext(im);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var qx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qx=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),J=(e,t)=>{const r=m.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:o="",children:c,...p},g)=>m.createElement("svg",{ref:g,...qx,width:a,height:a,stroke:n,strokeWidth:i?Number(l)*24/Number(a):l,className:["lucide",`lucide-${Qx(e)}`,o].join(" "),...p},[...t.map(([j,d])=>m.createElement(j,d)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kx=J("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yx=J("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=J("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xx=J("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=J("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zx=J("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jx=J("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pi=J("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=J("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ep=J("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tp=J("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const om=J("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=J("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sp=J("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=J("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mi=J("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=J("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Io=J("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rp=J("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=J("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const np=J("Clock3",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16.5 12",key:"1aq6pp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=J("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ap=J("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ll=J("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=J("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cm=J("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lp=J("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=J("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=J("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ip=J("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=J("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const op=J("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cp=J("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=J("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dp=J("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const up=J("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mp=J("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ln=J("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dm=J("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const um=J("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mm=J("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hm=J("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xm=J("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=J("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wc=J("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hp=J("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=J("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ii=J("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xp=J("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=J("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pp=J("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pm=J("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zn=J("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fm=J("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fp=J("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=J("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=J("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gp=J("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=J("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gc=J("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yp=J("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ba=J("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ai=J("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vp=J("UsersRound",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=J("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jp=J("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Li=J("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wp=J("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function D({children:e,variant:t="primary",size:r="md",loading:n=!1,icon:a,className:l="",disabled:i,...o}){const c="inline-flex items-center justify-center font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",p={primary:"bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500",secondary:"bg-gray-600 hover:bg-gray-700 text-white focus:ring-gray-500",outline:"border border-gray-300 hover:bg-gray-50 text-gray-700 focus:ring-blue-500",ghost:"hover:bg-gray-100 text-gray-700 focus:ring-blue-500",danger:"bg-red-600 hover:bg-red-700 text-white focus:ring-red-500"},g={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"};return s.jsxs("button",{className:`${c} ${p[t]} ${g[r]} ${l}`,disabled:i||n,...o,children:[n?s.jsx(Ln,{className:"w-4 h-4 animate-spin mr-2"}):a?s.jsx("span",{className:"mr-2",children:a}):null,e]})}function K({children:e,className:t="",onClick:r}){return s.jsx("div",{className:`bg-white rounded-lg shadow-sm border border-gray-200 ${r?"cursor-pointer hover:shadow-md transition-shadow":""} ${t}`,onClick:r,children:e})}function Te({children:e,className:t=""}){return s.jsx("div",{className:`px-6 py-4 border-b border-gray-200 ${t}`,children:e})}function Y({children:e,className:t=""}){return s.jsx("div",{className:`px-6 py-4 ${t}`,children:e})}function Ee({children:e,className:t=""}){return s.jsx("h3",{className:`text-lg font-semibold text-gray-900 ${t}`,children:e})}function Np({onSwitchToTeam:e}){const[t,r]=m.useState(""),[n,a]=m.useState(""),[l,i]=m.useState(!1),[o,c]=m.useState(!1),[p,g]=m.useState(null),{signIn:j}=An(),d=async N=>{N.preventDefault(),c(!0),g(null);try{const{data:w,error:P}=await j(t,n);if(P){g(P.message);return}w!=null&&w.user&&console.log("Sign in successful:",w.user)}catch(w){g(w.message)}finally{c(!1)}};return s.jsx("div",{className:"w-full max-w-md",children:s.jsxs(K,{className:"shadow-xl border-0",children:[s.jsxs(Te,{className:"text-center pb-6",children:[s.jsx("div",{className:"flex items-center justify-center mb-4",children:s.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center",children:s.jsx(pm,{className:"w-6 h-6 text-white"})})}),s.jsx(Ee,{className:"text-2xl font-bold text-gray-900",children:"Admin Portal"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Sign in to manage projects, teams, and tasks"})]}),s.jsxs(Y,{className:"space-y-6",children:[s.jsxs("form",{onSubmit:d,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx(hm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"email",required:!0,value:t,onChange:N=>r(N.target.value),className:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Enter your email"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(dm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:l?"text":"password",required:!0,value:n,onChange:N=>a(N.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Enter your password",minLength:6}),s.jsx("button",{type:"button",onClick:()=>i(!l),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:l?s.jsx(ll,{className:"w-4 h-4"}):s.jsx(Gs,{className:"w-4 h-4"})})]})]}),p&&s.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:s.jsx("p",{className:"text-sm text-red-600",children:p})}),s.jsx(D,{type:"submit",className:"w-full py-3",loading:o,icon:o?s.jsx(Ln,{className:"w-4 h-4"}):s.jsx(um,{className:"w-4 h-4"}),children:"Sign In to Admin Portal"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("div",{className:"w-full border-t border-gray-200"})}),s.jsx("div",{className:"relative flex justify-center text-sm",children:s.jsx("span",{className:"px-4 bg-white text-gray-500",children:"Or"})})]}),s.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-green-500 to-emerald-600 rounded-lg flex items-center justify-center",children:s.jsx(Le,{className:"w-4 h-4 text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-green-900",children:"Team Member?"}),s.jsx("p",{className:"text-sm text-green-700",children:"Access your tasks and performance"})]})]}),s.jsx(D,{variant:"outline",className:"w-full border-green-300 text-green-700 hover:bg-green-50",onClick:e,icon:s.jsx(Zx,{className:"w-4 h-4"}),children:"Sign in as Team Member"})]})]})]})})}const Ds="https://workflow.bylinelms.com/api",ta=()=>{const e=localStorage.getItem("access_token");return{"Content-Type":"application/json",...e&&{Authorization:`Bearer ${e}`}}},sa=()=>{const e=localStorage.getItem("teamToken");return{"Content-Type":"application/json",...e&&{Authorization:`Bearer ${e}`}}},Ts=async e=>{var r;const t=await e.json();if(!e.ok)throw new Error(((r=t.error)==null?void 0:r.message)||t.message||"API request failed");return t},Es=async(e,t)=>await fetch(e,t),R={get:async e=>{const t=await Es(`${Ds}${e}`,{method:"GET",headers:ta()});return Ts(t)},post:async(e,t)=>{const r=await Es(`${Ds}${e}`,{method:"POST",headers:ta(),body:JSON.stringify(t)});return Ts(r)},put:async(e,t)=>{const r=await Es(`${Ds}${e}`,{method:"PUT",headers:ta(),body:JSON.stringify(t)});return Ts(r)},delete:async e=>{const t=await Es(`${Ds}${e}`,{method:"DELETE",headers:ta()});return Ts(t)}},Lt={get:async e=>{const t=await Es(`${Ds}${e}`,{method:"GET",headers:sa()});return Ts(t)},post:async(e,t)=>{const r=await Es(`${Ds}${e}`,{method:"POST",headers:sa(),body:JSON.stringify(t)});return Ts(r)},put:async(e,t)=>{const r=await Es(`${Ds}${e}`,{method:"PUT",headers:sa(),body:JSON.stringify(t)});return Ts(r)},delete:async e=>{const t=await Es(`${Ds}${e}`,{method:"DELETE",headers:sa()});return Ts(t)}},bp={getAll:async e=>{const t=new URLSearchParams(e).toString(),r=t?`/projects?${t}`:"/projects";return(await Lt.get(r)).data},getById:async e=>(await Lt.get(`/projects/${e}`)).data},_e={getAll:async()=>(await R.get("/team")).data,getMyTasks:async()=>(await Lt.get("/team/my-tasks")).data,getMyProfile:async()=>(await Lt.get("/team/my-profile")).data,getById:async e=>(await R.get(`/team/${e}`)).data,create:async e=>(await R.post("/team",e)).data,update:async(e,t)=>(await R.put(`/team/${e}`,t)).data,delete:async e=>(await R.delete(`/team/${e}`)).data,getMembers:async()=>(await R.get("/team/members")).data,getMemberById:async e=>(await R.get(`/team/members/${e}`)).data,createMember:async e=>(await R.post("/team/members",e)).data,updateMember:async(e,t)=>(await R.put(`/team/members/${e}`,t)).data,deleteMember:async e=>(await R.delete(`/team/members/${e}`)).data,getTeams:async()=>(await R.get("/team/teams")).data,getTeamById:async e=>(await R.get(`/team/teams/${e}`)).data,createTeam:async e=>(await R.post("/team/teams",e)).data,updateTeam:async(e,t)=>(await R.put(`/team/teams/${e}`,t)).data,deleteTeam:async e=>(await R.delete(`/team/teams/${e}`)).data,addMemberToTeam:async(e,t)=>(await R.post(`/team/teams/${e}/members`,t)).data,removeMemberFromTeam:async(e,t)=>(await R.delete(`/team/teams/${e}/members/${t}`)).data,getTeamMembers:async e=>(await R.get(`/team/teams/${e}`)).data.members||[],authenticate:async e=>await R.post("/team/authenticate",e)},Ue={getAll:async e=>{const t=new URLSearchParams(e).toString(),r=t?`/projects?${t}`:"/projects";return(await R.get(r)).data},getById:async e=>(await R.get(`/projects/${e}`)).data,create:async e=>(await R.post("/projects",e)).data,update:async(e,t)=>(await R.put(`/projects/${e}`,t)).data,delete:async e=>(await R.delete(`/projects/${e}`)).data,getMembers:async e=>(await R.get(`/projects/${e}/members`)).data,getTeams:async e=>(await R.get(`/projects/${e}/teams`)).data,addMember:async(e,t)=>(await R.post(`/projects/${e}/members`,t)).data,addTeam:async(e,t)=>(await R.post(`/projects/${e}/members`,t)).data,removeMember:async(e,t)=>(await R.delete(`/projects/${e}/members/${t}`)).data,removeTeam:async(e,t)=>(await R.delete(`/projects/${e}/teams/${t}`)).data},Ps={getAll:async()=>(await R.get("/categories")).data,getById:async e=>(await R.get(`/categories/${e}`)).data,create:async e=>(await R.post("/categories",e)).data,update:async(e,t)=>(await R.put(`/categories/${e}`,t)).data,delete:async e=>(await R.delete(`/categories/${e}`)).data},ss={getAll:async()=>(await R.get("/skills")).data,getById:async e=>(await R.get(`/skills/${e}`)).data,create:async e=>(await R.post("/skills",e)).data,update:async(e,t)=>(await R.put(`/skills/${e}`,t)).data,delete:async e=>(await R.delete(`/skills/${e}`)).data},ze={getAll:async e=>{const t=new URLSearchParams(e).toString(),r=t?`/tasks?${t}`:"/tasks";return(await R.get(r)).data},getById:async e=>(await R.get(`/tasks/${e}`)).data,create:async e=>(await R.post("/tasks",e)).data,update:async(e,t)=>(await R.put(`/tasks/${e}`,t)).data,delete:async e=>(await R.delete(`/tasks/${e}`)).data,getByProject:async e=>(await R.get(`/tasks?project_id=${e}`)).data,getByAssignee:async(e,t)=>(await R.get(`/tasks?assignee_id=${e}&assignee_type=${t}`)).data,updateStatus:async(e,t,r)=>{const n={status:t};return r!==void 0&&(n.progress=r),(await R.put(`/tasks/${e}`,n)).data},updateProgress:async(e,t)=>(await R.put(`/tasks/${e}`,{progress:t})).data,requestExtension:async(e,t)=>(await R.post(`/tasks/${e}/extensions`,t)).data,getExtensions:async e=>(await R.get(`/tasks/${e}/extensions`)).data,reviewExtension:async(e,t)=>(await R.put(`/tasks/extensions/${e}/review`,t)).data,addRemark:async(e,t)=>(await R.post(`/tasks/${e}/remarks`,t)).data,getRemarks:async e=>(await R.get(`/tasks/${e}/remarks`)).data,deleteRemark:async e=>(await R.delete(`/tasks/remarks/${e}`)).data},qc={update:async(e,t)=>(await Lt.put(`/tasks/${e}`,t)).data,updateStatus:async(e,t,r)=>{const n={status:t};return r!==void 0&&(n.progress=r),(await Lt.put(`/tasks/${e}`,n)).data},updateProgress:async(e,t)=>(await Lt.put(`/tasks/${e}`,{progress:t})).data,requestExtension:async(e,t)=>(await Lt.post(`/tasks/${e}/extensions`,t)).data,getExtensions:async e=>(await Lt.get(`/tasks/${e}/extensions`)).data,addRemark:async(e,t)=>(await Lt.post(`/tasks/${e}/remarks`,t)).data,getRemarks:async e=>(await Lt.get(`/tasks/${e}/remarks`)).data,deleteRemark:async e=>(await Lt.delete(`/tasks/remarks/${e}`)).data},ra={getAll:async e=>{const t=new URLSearchParams(e).toString(),r=t?`/allocations?${t}`:"/allocations";return(await R.get(r)).data},getById:async e=>(await R.get(`/allocations/${e}`)).data,create:async e=>(await R.post("/allocations",e)).data,update:async(e,t)=>(await R.put(`/allocations/${e}`,t)).data,delete:async e=>(await R.delete(`/allocations/${e}`)).data,getWorkloadSummary:async e=>(await R.get(`/allocations/workload-summary?date=${e}`)).data},Ot={getAll:async e=>{const t=e?`/stages?project_id=${e}`:"/stages";return(await R.get(t)).data},getById:async e=>(await R.get(`/stages/${e}`)).data,create:async e=>(await R.post("/stages",e)).data,update:async(e,t)=>(await R.put(`/stages/${e}`,t)).data,delete:async e=>(await R.delete(`/stages/${e}`)).data,getByCategory:async e=>(await R.get(`/stages/category/${e}`)).data,reorder:async(e,t)=>(await R.post(`/stages/category/${e}/reorder`,{stage_orders:t})).data},Ol={getByCategory:async e=>(await R.get(`/stage-templates/category/${e}`)).data,getById:async e=>(await R.get(`/stage-templates/${e}`)).data,create:async e=>(await R.post("/stage-templates",e)).data,update:async(e,t)=>(await R.put(`/stage-templates/${e}`,t)).data,delete:async e=>(await R.delete(`/stage-templates/${e}`)).data,bulkCreate:async(e,t)=>(await R.post(`/stage-templates/category/${e}/bulk`,{templates:t})).data},cs={getByProject:async e=>(await R.get(`/grades/project/${e}`)).data,getAll:async()=>(await R.get("/grades")).data,getById:async e=>(await R.get(`/grades/${e}`)).data,create:async e=>(await R.post("/grades",e)).data,update:async(e,t)=>(await R.put(`/grades/${e}`,t)).data,delete:async e=>(await R.delete(`/grades/${e}`)).data,distributeWeights:async e=>(await R.post("/grades/distribute-weights",{project_id:e})).data},ds={getByGrade:async e=>(await R.get(`/books/grade/${e}`)).data,getAll:async()=>(await R.get("/books")).data,getById:async e=>(await R.get(`/books/${e}`)).data,create:async e=>(await R.post("/books",e)).data,update:async(e,t)=>(await R.put(`/books/${e}`,t)).data,delete:async e=>(await R.delete(`/books/${e}`)).data,distributeWeights:async e=>(await R.post("/books/distribute-weights",{grade_id:e})).data},us={getByBook:async e=>(await R.get(`/units/book/${e}`)).data,getAll:async()=>(await R.get("/units")).data,getById:async e=>(await R.get(`/units/${e}`)).data,create:async e=>(await R.post("/units",e)).data,update:async(e,t)=>(await R.put(`/units/${e}`,t)).data,delete:async e=>(await R.delete(`/units/${e}`)).data,distributeWeights:async e=>(await R.post("/units/distribute-weights",{book_id:e})).data},$s={getByUnit:async e=>(await R.get(`/lessons/unit/${e}`)).data,getAll:async()=>(await R.get("/lessons")).data,getById:async e=>(await R.get(`/lessons/${e}`)).data,create:async e=>(await R.post("/lessons",e)).data,update:async(e,t)=>(await R.put(`/lessons/${e}`,t)).data,delete:async e=>(await R.delete(`/lessons/${e}`)).data,distributeWeights:async e=>(await R.post("/lessons/distribute-weights",{unit_id:e})).data},kp={getOverview:async()=>{try{const e=await Promise.allSettled([Ue.getAll().catch(o=>(console.error(" Projects fetch error:",o),[])),_e.getMembers().catch(o=>(console.error(" Team members fetch error:",o),[])),Ps.getAll().catch(o=>(console.error(" Categories fetch error:",o),[])),ss.getAll().catch(o=>(console.error(" Skills fetch error:",o),[])),ze.getAll().catch(o=>(console.error(" Tasks fetch error:",o),[]))]),[t,r,n,a,l]=e.map(o=>o.status==="fulfilled"?o.value||[]:(console.error(" API call failed:",o.reason),[])),i={totalProjects:t.length,activeProjects:t.filter(o=>o.status==="active").length,totalTeamMembers:r.length,activeTeamMembers:r.filter(o=>o.is_active!==!1).length,totalCategories:n.length,totalSkills:a.length,totalTasks:l.length,activeTasks:l.filter(o=>["not-started","in-progress","under-review"].includes(o.status)).length,completedTasks:l.filter(o=>o.status==="completed").length,overdueTasks:l.filter(o=>new Date(o.end_date)<new Date&&o.status!=="completed").length};return{projects:t,teamMembers:r,tasks:l,categories:n,skills:a,stats:i}}catch(e){return console.error("Dashboard overview fetch error:",e),{projects:[],teamMembers:[],tasks:[],categories:[],skills:[],stats:{totalProjects:0,activeProjects:0,totalTeamMembers:0,activeTeamMembers:0,totalCategories:0,totalSkills:0,totalTasks:0,activeTasks:0,completedTasks:0,overdueTasks:0}}}},getRecentActivity:async()=>[]},Ks={getByTeamMember:async e=>(await R.get(`/performance-flags/team-member/${e}`)).data,getByTask:async e=>(await R.get(`/performance-flags/task/${e}`)).data,getSummary:async e=>(await R.get(`/performance-flags/summary/${e}`)).data,add:async e=>(await R.post("/performance-flags",e)).data,update:async(e,t)=>(await R.put(`/performance-flags/${e}`,t)).data,delete:async e=>(await R.delete(`/performance-flags/${e}`)).data};function Sp({onLogin:e,onBackToAdmin:t}){const[r,n]=m.useState(""),[a,l]=m.useState(""),[i,o]=m.useState(!1),[c,p]=m.useState(""),[g,j]=m.useState(!1),d=async N=>{N.preventDefault(),j(!0),p("");try{const w=await _e.authenticate({email:r,passcode:a});w.success&&w.data?(w.token&&localStorage.setItem("teamToken",w.token),e(w.data)):p("Invalid email or passcode. Please check your credentials.")}catch(w){console.error("Login error:",w),p(w.message||"Login failed. Please try again.")}finally{j(!1)}};return s.jsx("div",{className:"w-full max-w-md",children:s.jsxs(K,{className:"shadow-xl border-0",children:[s.jsxs(Te,{className:"text-center pb-6",children:[s.jsx("div",{className:"flex items-center justify-center mb-4",children:s.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-green-500 to-emerald-600 rounded-xl flex items-center justify-center",children:s.jsx(Le,{className:"w-6 h-6 text-white"})})}),s.jsx(Ee,{className:"text-2xl font-bold text-gray-900",children:"Team Member Portal"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Sign in to view your tasks and performance"})]}),s.jsxs(Y,{className:"space-y-6",children:[s.jsxs("form",{onSubmit:d,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx(hm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"email",required:!0,value:r,onChange:N=>n(N.target.value),className:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors",placeholder:"Enter your email"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Passcode"}),s.jsxs("div",{className:"relative",children:[s.jsx(dm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:i?"text":"password",required:!0,value:a,onChange:N=>l(N.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors",placeholder:"Enter your passcode"}),s.jsx("button",{type:"button",onClick:()=>o(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:i?s.jsx(ll,{className:"w-4 h-4"}):s.jsx(Gs,{className:"w-4 h-4"})})]})]}),c&&s.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg flex items-center",children:[s.jsx(Yx,{className:"w-4 h-4 text-red-500 mr-2"}),s.jsx("p",{className:"text-sm text-red-600",children:c})]}),s.jsx(D,{type:"submit",className:"w-full py-3",loading:g,icon:s.jsx(um,{className:"w-4 h-4"}),children:"Sign In to Team Portal"})]}),t&&s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("div",{className:"w-full border-t border-gray-200"})}),s.jsx("div",{className:"relative flex justify-center text-sm",children:s.jsx("span",{className:"px-4 bg-white text-gray-500",children:"Or"})})]}),t&&s.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center",children:s.jsx(pm,{className:"w-4 h-4 text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-blue-900",children:"Admin Access?"}),s.jsx("p",{className:"text-sm text-blue-700",children:"Manage projects and teams"})]})]}),s.jsx(D,{variant:"outline",className:"w-full border-blue-300 text-blue-700 hover:bg-blue-50",onClick:t,icon:s.jsx(Mo,{className:"w-4 h-4"}),children:"Back to Admin Portal"})]})]})]})})}function X({children:e,variant:t="default",size:r="sm",className:n=""}){const a="inline-flex items-center font-medium rounded-full",l={default:"bg-gray-100 text-gray-800",primary:"bg-blue-100 text-blue-800",secondary:"bg-gray-100 text-gray-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800"},i={sm:"px-2.5 py-0.5 text-xs",md:"px-3 py-1 text-sm"};return s.jsx("span",{className:`${a} ${l[t]} ${i[r]} ${n}`,children:e})}function Ke({isOpen:e,onClose:t,title:r,children:n,size:a="md"}){if(!e)return null;const l={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"};return s.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:s.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[s.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:t}),s.jsxs("div",{className:`inline-block w-full ${l[a]} my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-lg`,children:[s.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:r}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(Li,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"px-6 py-4",children:n})]})]})})}function _p({user:e,onLogout:t}){var q;const[r,n]=m.useState([]),[a,l]=m.useState([]),[i,o]=m.useState(null),[c,p]=m.useState(!1),[g,j]=m.useState(!1),[d,N]=m.useState(""),[w,P]=m.useState(new Date(Date.now()+7*24*60*60*1e3).toISOString().split("T")[0]),[L,f]=m.useState(""),[h,x]=m.useState(new Date().toISOString().split("T")[0]),[b,S]=m.useState("general"),[u,v]=m.useState(!0),[C,A]=m.useState(!1),[z,le]=m.useState([]);m.useEffect(()=>{F()},[e.id]);const F=async()=>{try{v(!0);const[k,ie,oe]=await Promise.all([_e.getMyTasks(),bp.getAll(),Ks.getByTeamMember(e.id)]);n(k),l(ie),le(oe)}catch(k){console.error("Failed to load user data:",k)}finally{v(!1)}},ne=async()=>{A(!0),await F(),A(!1)},me=r.filter(k=>k.status!=="completed"),ye=r.filter(k=>k.status==="completed"),Oe=r.filter(k=>k.end_date&&new Date(k.end_date)<new Date&&k.status!=="completed"),We=r.length>0?Math.round(ye.length/r.length*100):0;ye.filter(k=>k.updated_at&&k.end_date&&new Date(k.updated_at)<=new Date(k.end_date)).length;const _=k=>{o(k),p(!0)},E=k=>{o(k),j(!0)},$=async()=>{if(i)try{await qc.requestExtension(i.id,{requested_due_date:w,reason:d}),await F()}catch(k){console.error("Failed to submit extension request:",k)}p(!1),o(null),N(""),P(new Date(Date.now()+7*24*60*60*1e3).toISOString().split("T")[0])},B=async()=>{if(i)try{await qc.addRemark(i.id,{remark:L,remark_date:h,remark_type:b}),await F()}catch(k){console.error("Failed to add remark:",k)}j(!1),o(null),f(""),x(new Date().toISOString().split("T")[0]),S("general")},G=k=>k.end_date&&new Date(k.end_date)<new Date&&k.status!=="completed",ee=k=>{if(!k.end_date)return 0;const ie=new Date,be=new Date(k.end_date).getTime()-ie.getTime();return Math.ceil(be/(1e3*60*60*24))};return u?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Ii,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-blue-600"}),s.jsx("p",{className:"text-gray-600",children:"Loading your portal..."})]})}):s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex items-center justify-between h-16",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-green-500 to-emerald-600 rounded-full flex items-center justify-center text-white font-medium",children:e.name.charAt(0)}),s.jsxs("div",{children:[s.jsxs("h1",{className:"text-lg font-semibold text-gray-900",children:["Welcome, ",e.name]}),s.jsx("p",{className:"text-sm text-gray-600",children:e.skills&&e.skills.length>0?e.skills.join(", "):"Team Member"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs(D,{variant:"outline",size:"sm",onClick:ne,loading:C,children:[s.jsx(Ii,{className:"w-4 h-4 mr-2"}),"Refresh"]}),s.jsxs(D,{variant:"ghost",onClick:()=>{localStorage.removeItem("teamToken"),t()},children:[s.jsx(mm,{className:"w-4 h-4 mr-2"}),"Logout"]})]})]})})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[s.jsx(K,{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:s.jsx(Y,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 rounded-lg bg-blue-400 bg-opacity-20",children:s.jsx(Tt,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-blue-100 text-sm font-medium",children:"Active Tasks"}),s.jsx("p",{className:"text-2xl font-bold",children:me.length})]})]})})}),s.jsx(K,{className:"bg-gradient-to-r from-green-500 to-green-600 text-white",children:s.jsx(Y,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 rounded-lg bg-green-400 bg-opacity-20",children:s.jsx(Mi,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-green-100 text-sm font-medium",children:"Completed"}),s.jsx("p",{className:"text-2xl font-bold",children:ye.length})]})]})})}),s.jsx(K,{className:"bg-gradient-to-r from-red-500 to-red-600 text-white",children:s.jsx(Y,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 rounded-lg bg-red-400 bg-opacity-20",children:s.jsx(_t,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-red-100 text-sm font-medium",children:"Overdue"}),s.jsx("p",{className:"text-2xl font-bold",children:Oe.length})]})]})})}),s.jsx(K,{className:"bg-gradient-to-r from-purple-500 to-purple-600 text-white",children:s.jsx(Y,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 rounded-lg bg-purple-400 bg-opacity-20",children:s.jsx(cn,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-purple-100 text-sm font-medium",children:"Completion Rate"}),s.jsxs("p",{className:"text-2xl font-bold",children:[We,"%"]})]})]})})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[s.jsxs(K,{className:"bg-gradient-to-br from-white to-gray-50 border-0 shadow-lg",children:[s.jsx(Te,{className:"pb-4",children:s.jsxs(Ee,{className:"flex items-center text-gray-800",children:[s.jsx(ts,{className:"w-5 h-5 mr-2 text-purple-600"}),"My Performance Flags"]})}),s.jsx(Y,{children:z.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(ts,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),s.jsx("p",{className:"text-gray-500 font-medium",children:"No performance flags"}),s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Keep up the great work!"})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3 p-4 bg-white rounded-xl border border-gray-100 shadow-sm",children:[s.jsxs("div",{className:"text-center p-3 bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg border border-green-200",children:[s.jsx("div",{className:"text-2xl font-bold text-green-700",children:z.filter(k=>k.type==="green").length}),s.jsx("div",{className:"text-xs text-green-600 font-medium",children:" Green Flags"})]}),s.jsxs("div",{className:"text-center p-3 bg-gradient-to-br from-yellow-50 to-amber-50 rounded-lg border border-yellow-200",children:[s.jsx("div",{className:"text-2xl font-bold text-yellow-700",children:z.filter(k=>k.type==="yellow").length}),s.jsx("div",{className:"text-xs text-yellow-600 font-medium",children:" Yellow Flags"})]}),s.jsxs("div",{className:"text-center p-3 bg-gradient-to-br from-orange-50 to-amber-50 rounded-lg border border-orange-200",children:[s.jsx("div",{className:"text-2xl font-bold text-orange-700",children:z.filter(k=>k.type==="orange").length}),s.jsx("div",{className:"text-xs text-orange-600 font-medium",children:" Orange Flags"})]}),s.jsxs("div",{className:"text-center p-3 bg-gradient-to-br from-red-50 to-pink-50 rounded-lg border border-red-200",children:[s.jsx("div",{className:"text-2xl font-bold text-red-700",children:z.filter(k=>k.type==="red").length}),s.jsx("div",{className:"text-xs text-red-600 font-medium",children:" Red Flags"})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Recent Flags:"}),s.jsx("div",{className:"space-y-2",children:z.slice(0,3).map((k,ie)=>s.jsx("div",{className:"flex items-center justify-between p-3 rounded-lg bg-white border border-gray-100 shadow-sm hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs(X,{variant:k.type==="green"?"success":k.type==="yellow"||k.type==="orange"?"warning":"danger",size:"sm",className:"shadow-sm",children:[s.jsx(ts,{className:"w-3 h-3 mr-1"}),k.type.toUpperCase()]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:k.reason}),s.jsxs("p",{className:"text-xs text-gray-500",children:[new Date(k.created_at).toLocaleDateString()," by ",k.added_by]})]})]})},ie))})]})]})})]}),s.jsxs(K,{className:"bg-gradient-to-br from-white to-green-50 border-0 shadow-lg",children:[s.jsx(Te,{className:"pb-4",children:s.jsxs(Ee,{className:"flex items-center text-gray-800",children:[s.jsx(Pi,{className:"w-5 h-5 mr-2 text-green-600"}),"Recent Completions"]})}),s.jsx(Y,{children:ye.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Pi,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),s.jsx("p",{className:"text-gray-500 font-medium",children:"No completed tasks yet"}),s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Start working on your tasks!"})]}):s.jsx("div",{className:"space-y-3",children:ye.slice(0,5).map(k=>{const ie=a.find(oe=>oe.id===k.project_id);return s.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-green-100 shadow-sm hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:k.name}),s.jsx("p",{className:"text-xs text-gray-600",children:ie==null?void 0:ie.name})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Mi,{className:"w-5 h-5 text-green-600"}),s.jsx("span",{className:"text-xs text-green-600 font-medium",children:"Completed"})]})]},k.id)})})})]})]}),s.jsxs(K,{className:"bg-gradient-to-br from-white to-blue-50 border-0 shadow-lg",children:[s.jsx(Te,{className:"pb-6",children:s.jsxs(Ee,{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Tt,{className:"w-6 h-6 mr-3 text-blue-600"}),s.jsx("span",{className:"text-xl font-bold text-gray-800",children:"My Active Tasks"})]}),s.jsxs(X,{variant:"primary",className:"text-sm font-semibold px-3 py-1",children:[me.length," tasks"]})]})}),s.jsx(Y,{children:me.length===0?s.jsxs("div",{className:"text-center py-16 text-gray-500",children:[s.jsx(Tt,{className:"w-20 h-20 mx-auto mb-4 text-gray-300"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Active Tasks"}),s.jsx("p",{className:"text-gray-600 text-lg",children:"You're all caught up! No tasks are currently assigned to you."})]}):s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:me.map(k=>{const ie=a.find(De=>De.id===k.project_id),oe=ee(k),be=G(k);return s.jsxs("div",{className:`group relative overflow-hidden rounded-2xl border-2 transition-all duration-300 hover:shadow-xl ${be?"border-red-300 bg-gradient-to-br from-red-50 to-red-100 shadow-red-100":"border-gray-200 bg-white hover:border-blue-400 shadow-lg"}`,children:[s.jsx("div",{className:`absolute top-0 left-0 right-0 h-2 ${k.priority==="urgent"?"bg-gradient-to-r from-red-500 to-red-600":k.priority==="high"?"bg-gradient-to-r from-orange-500 to-orange-600":k.priority==="medium"?"bg-gradient-to-r from-blue-500 to-blue-600":"bg-gradient-to-r from-gray-400 to-gray-500"}`}),s.jsxs("div",{className:"p-6 pt-8",children:[s.jsxs("div",{className:"flex items-start justify-between mb-5",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"font-bold text-gray-900 text-xl mb-2 line-clamp-2 group-hover:text-blue-600 transition-colors",children:k.name}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600 mb-3",children:[s.jsx("span",{className:"font-semibold text-blue-600 bg-blue-50 px-2 py-1 rounded-full",children:ie==null?void 0:ie.name}),s.jsx("span",{className:"text-gray-400",children:""}),s.jsx("span",{className:"font-semibold text-purple-600 bg-purple-50 px-2 py-1 rounded-full",children:k.stage_name||"No Stage"}),k.category_name&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-gray-400",children:""}),s.jsx("span",{className:"text-gray-500 bg-gray-50 px-2 py-1 rounded-full",children:k.category_name})]})]})]}),s.jsxs("div",{className:"flex flex-col items-end space-y-2 ml-4",children:[be&&s.jsxs(X,{variant:"danger",size:"sm",className:"animate-pulse shadow-lg",children:[s.jsx(_t,{className:"w-3 h-3 mr-1"}),"Overdue"]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(X,{variant:k.priority==="urgent"?"danger":k.priority==="high"?"warning":k.priority==="medium"?"primary":"default",size:"sm",className:"shadow-sm",children:k.priority}),s.jsx(X,{variant:k.status==="in-progress"?"primary":k.status==="under-review"?"warning":k.status==="blocked"?"danger":"default",size:"sm",className:"shadow-sm",children:k.status.replace("-"," ")})]})]})]}),k.description&&s.jsx("p",{className:"text-sm text-gray-700 mb-5 line-clamp-2 bg-gray-50 p-3 rounded-lg border-l-4 border-blue-200",children:k.description}),s.jsxs("div",{className:"mb-5",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm mb-3",children:[s.jsx("span",{className:"text-gray-700 font-semibold",children:"Progress"}),s.jsxs("span",{className:"font-bold text-gray-900 text-lg",children:[k.progress,"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden shadow-inner",children:s.jsx("div",{className:`h-3 rounded-full transition-all duration-500 shadow-sm ${k.progress>=80?"bg-gradient-to-r from-green-500 to-green-600":k.progress>=50?"bg-gradient-to-r from-blue-500 to-blue-600":k.progress>=25?"bg-gradient-to-r from-yellow-500 to-orange-500":"bg-gradient-to-r from-gray-400 to-gray-500"}`,style:{width:`${k.progress}%`}})})]}),(k.grade_name||k.book_name||k.unit_name||k.lesson_name)&&s.jsxs("div",{className:"mb-5 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border-2 border-blue-200 shadow-sm",children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx(ga,{className:"w-5 h-5 text-blue-600 mr-2"}),s.jsx("span",{className:"text-sm font-bold text-blue-900",children:"Educational Hierarchy"})]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[k.grade_name&&s.jsx(X,{variant:"primary",className:"text-xs bg-blue-100 text-blue-800 border-2 border-blue-200 font-semibold",children:k.grade_name}),k.book_name&&s.jsx(X,{variant:"primary",className:"text-xs bg-indigo-100 text-indigo-800 border-2 border-indigo-200 font-semibold",children:k.book_name}),k.unit_name&&s.jsx(X,{variant:"primary",className:"text-xs bg-purple-100 text-purple-800 border-2 border-purple-200 font-semibold",children:k.unit_name}),k.lesson_name&&s.jsx(X,{variant:"primary",className:"text-xs bg-pink-100 text-pink-800 border-2 border-pink-200 font-semibold",children:k.lesson_name})]})]}),k.required_skills&&k.required_skills.length>0&&s.jsxs("div",{className:"mb-5 p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl border-2 border-green-200 shadow-sm",children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx(Kx,{className:"w-5 h-5 text-green-600 mr-2"}),s.jsx("span",{className:"text-sm font-bold text-green-900",children:"Required Skills"})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:k.required_skills.map((De,M)=>s.jsx(X,{variant:"secondary",className:"text-xs bg-green-100 text-green-800 border-2 border-green-200 font-semibold",children:De},M))})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-5 p-4 bg-gradient-to-r from-gray-50 to-gray-100 rounded-xl border border-gray-200 shadow-sm",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xs text-gray-500 mb-1 font-medium",children:"Due Date"}),s.jsx("div",{className:"text-sm font-bold text-gray-900",children:k.end_date?new Date(k.end_date).toLocaleDateString():"No due date"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xs text-gray-500 mb-1 font-medium",children:"Time Left"}),s.jsx("div",{className:`text-sm font-bold ${be?"text-red-600":oe<=1?"text-orange-600":oe<=3?"text-yellow-600":"text-green-600"}`,children:be?`${Math.abs(oe)} days overdue`:oe===0?"Due today":oe===1?"Due tomorrow":`${oe} days left`})]})]}),s.jsx("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-5 p-3 bg-white rounded-lg border border-gray-200",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("span",{className:"font-medium",children:["Estimated: ",s.jsxs("span",{className:"font-bold text-gray-900",children:[k.estimated_hours,"h"]})]}),k.actual_hours&&s.jsxs("span",{className:"font-medium",children:["Actual: ",s.jsxs("span",{className:"font-bold text-gray-900",children:[k.actual_hours,"h"]})]})]})}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs(D,{variant:"outline",size:"sm",onClick:()=>_(k),className:"flex-1 h-10 font-semibold shadow-sm hover:shadow-md transition-all duration-200",children:[s.jsx(ir,{className:"w-4 h-4 mr-2"}),"Request Extension"]}),s.jsxs(D,{variant:"outline",size:"sm",onClick:()=>E(k),className:"flex-1 h-10 font-semibold shadow-sm hover:shadow-md transition-all duration-200",children:[s.jsx(xm,{className:"w-4 h-4 mr-2"}),"Add Remark"]})]})]})]},k.id)})})})]})]}),s.jsx(Ke,{isOpen:c,onClose:()=>p(!1),title:"Request Task Extension",children:s.jsxs("div",{className:"space-y-4",children:[i&&s.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:i.name}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Current due date: ",i.end_date?new Date(i.end_date).toLocaleDateString():"No due date"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Due Date"}),s.jsx("input",{type:"date",value:w,onChange:k=>P(k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason for Extension"}),s.jsx("textarea",{value:d,onChange:k=>N(k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:4,placeholder:"Please explain why you need an extension...",required:!0})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx(D,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),s.jsx(D,{onClick:$,disabled:!d.trim(),children:"Submit Request"})]})]})}),s.jsx(Ke,{isOpen:g,onClose:()=>j(!1),title:"Add Task Remark",children:s.jsxs("div",{className:"space-y-4",children:[i&&s.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:i.name}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Project: ",(q=a.find(k=>k.id===i.project_id))==null?void 0:q.name]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Remark Date"}),s.jsx("input",{type:"date",value:h,onChange:k=>x(k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Remark Type"}),s.jsxs("select",{value:b,onChange:k=>S(k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"general",children:"General"}),s.jsx("option",{value:"progress",children:"Progress Update"}),s.jsx("option",{value:"issue",children:"Issue/Problem"}),s.jsx("option",{value:"update",children:"Update"}),s.jsx("option",{value:"other",children:"Other"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Remark Content"}),s.jsx("textarea",{value:L,onChange:k=>f(k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:4,placeholder:"Add your remark or comment about this task...",required:!0})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx(D,{variant:"outline",onClick:()=>j(!1),children:"Cancel"}),s.jsx(D,{onClick:B,disabled:!L.trim(),children:"Add Remark"})]})]})})]})}const Cp=[{id:"1",name:"Sarah Johnson",email:"sarah.johnson@company.com",skills:["Instructional Designers","Content Writers"],passcode:"DEMO123",isActive:!0,performanceFlags:[{id:"1",type:"green",reason:"Completed project ahead of schedule",date:"2024-01-15",addedBy:"Manager"}]},{id:"2",name:"Mike Chen",email:"mike.chen@company.com",skills:["Developers","Tech"],passcode:"TECH456",isActive:!0,performanceFlags:[]},{id:"3",name:"Emily Rodriguez",email:"emily.rodriguez@company.com",skills:["Graphic Designers","Animators"]},{id:"4",name:"David Kim",email:"david.kim@company.com",skills:["QA","Tech"]},{id:"5",name:"Lisa Thompson",email:"lisa.thompson@company.com",skills:["Marketing","Sales"]},{id:"6",name:"John Smith",email:"john.smith@company.com",skills:["Content Writers","Instructional Designers"]}],Dp=[{id:"1",name:"Pre-K Curriculum Development",description:"Comprehensive curriculum design for Pre-K students including KG-1, KG-2, and KG-3 levels",category:"Curriculum Design",status:"active",startDate:new Date("2024-01-15"),endDate:new Date("2024-06-30"),progress:65,stages:[{id:"stage-1",name:"Curriculum Analysis",description:"Analyze curriculum requirements and standards",order:1,weight:20,status:"completed",progress:100,startDate:new Date("2024-01-15"),endDate:new Date("2024-02-01"),reviewRounds:[],tasks:[]},{id:"stage-2",name:"Content Creation",description:"Develop curriculum content and materials",order:2,weight:60,status:"in-progress",progress:65,startDate:new Date("2024-02-01"),endDate:new Date("2024-04-30"),reviewRounds:[],tasks:[]},{id:"stage-3",name:"Review & Finalization",description:"Review and finalize curriculum materials",order:3,weight:20,status:"not-started",progress:0,startDate:new Date("2024-05-01"),endDate:new Date("2024-06-30"),reviewRounds:[],tasks:[]}],teamMembers:["1","3","6"],grades:[{id:"kg1",name:"KG-1",description:"Kindergarten Grade 1",projectId:"1",order:1,weight:40,books:[{id:"kg1-book1",name:"Book 1",type:"student",description:"Student Book 1 for KG-1",gradeId:"kg1",order:1,weight:70,units:[{id:"kg1-book1-unit1",name:"Unit 1: Colors and Shapes",description:"Introduction to basic colors and shapes",bookId:"kg1-book1",order:1,weight:60,lessons:[{id:"kg1-book1-unit1-lesson1",name:"Lesson 1: Primary Colors",description:"Learning red, blue, and yellow",unitId:"kg1-book1-unit1",order:1,weight:50},{id:"kg1-book1-unit1-lesson2",name:"Lesson 2: Basic Shapes",description:"Circle, square, and triangle",unitId:"kg1-book1-unit1",order:2,weight:50}]},{id:"kg1-book1-unit2",name:"Unit 2: Numbers 1-10",description:"Introduction to counting and numbers",bookId:"kg1-book1",order:2,weight:40,lessons:[{id:"kg1-book1-unit2-lesson1",name:"Lesson 1: Numbers 1-5",description:"Learning to count 1 to 5",unitId:"kg1-book1-unit2",order:1,weight:100}]}]},{id:"kg1-teacher-guide",name:"Teacher Guide",type:"teacher",description:"Teacher guide for KG-1",gradeId:"kg1",order:2,weight:30,units:[{id:"kg1-tg-unit1",name:"Unit 1: Teaching Colors and Shapes",description:"Guide for teaching colors and shapes",bookId:"kg1-teacher-guide",order:1,weight:100,lessons:[{id:"kg1-tg-unit1-lesson1",name:"Lesson 1: Color Activities",description:"Activities for teaching colors",unitId:"kg1-tg-unit1",order:1,weight:100}]}]}]},{id:"kg2",name:"KG-2",description:"Kindergarten Grade 2",projectId:"1",order:2,weight:35,books:[{id:"kg2-book1",name:"Book 1",type:"student",description:"Student Book 1 for KG-2",gradeId:"kg2",order:1,weight:100,units:[{id:"kg2-book1-unit1",name:"Unit 1: Letters A-M",description:"Introduction to first half of alphabet",bookId:"kg2-book1",order:1,weight:100,lessons:[{id:"kg2-book1-unit1-lesson1",name:"Lesson 1: Letters A-E",description:"Learning letters A through E",unitId:"kg2-book1-unit1",order:1,weight:100}]}]}]},{id:"kg3",name:"KG-3",description:"Kindergarten Grade 3",projectId:"1",order:3,weight:25,books:[{id:"kg3-book1",name:"Book 1",type:"student",description:"Student Book 1 for KG-3",gradeId:"kg3",order:1,weight:100,units:[{id:"kg3-book1-unit1",name:"Unit 1: Reading Readiness",description:"Preparing for reading",bookId:"kg3-book1",order:1,weight:100,lessons:[{id:"kg3-book1-unit1-lesson1",name:"Lesson 1: Phonics Basics",description:"Introduction to phonics",unitId:"kg3-book1-unit1",order:1,weight:100}]}]}]}]},{id:"2",name:"LMS Platform Redesign",description:"Complete overhaul of the learning management system interface and user experience",category:"IT Applications",status:"active",startDate:new Date("2024-02-01"),endDate:new Date("2024-08-15"),progress:42,stages:[],teamMembers:["2","4","5"]},{id:"3",name:"Interactive Science Course",description:"eLearning course with interactive animations and simulations for high school science",category:"eLearning Design",status:"planning",startDate:new Date("2024-03-01"),endDate:new Date("2024-09-30"),progress:15,stages:[],teamMembers:["1","2","3"]},{id:"4",name:"Corporate Training Module",description:"Employee onboarding and training content for new hires",category:"eLearning Design",status:"completed",startDate:new Date("2023-10-01"),endDate:new Date("2024-01-15"),progress:100,stages:[],teamMembers:["1","6"]}],Tp=[{id:"1",name:"Content Strategy Development",description:"Create comprehensive content strategy for Pre-K curriculum",projectId:"1",stageId:"stage-2",gradeId:"kg1",bookId:"kg1-book1",unitId:"kg1-book1-unit1",lessonId:"kg1-book1-unit1-lesson1",componentPath:"KG-1 > Book 1 > Unit 1: Colors and Shapes > Lesson 1: Primary Colors",assignees:["1","6"],skills:["Content Writers","Instructional Designers"],status:"in-progress",priority:"high",startDate:new Date("2024-01-15"),endDate:new Date("2024-02-15"),progress:75,estimatedHours:40,actualHours:32},{id:"2",name:"UI/UX Design for LMS Dashboard",description:"Design new dashboard interface for the learning management system",projectId:"2",stageId:"stage-2",assignees:["3"],skills:["Graphic Designers"],status:"under-review",priority:"high",startDate:new Date("2024-02-01"),endDate:new Date("2024-02-28"),progress:90,estimatedHours:60,actualHours:55},{id:"3",name:"Database Migration Script",description:"Create scripts for migrating user data to new LMS platform",projectId:"2",stageId:"stage-2",assignees:["2"],skills:["Developers","Tech"],status:"not-started",priority:"medium",startDate:new Date("2024-03-01"),endDate:new Date("2024-03-15"),progress:0,estimatedHours:32},{id:"4",name:"Quality Assurance Testing",description:"Comprehensive testing of LMS functionality and user experience",projectId:"2",stageId:"stage-2",assignees:["4"],skills:["QA"],status:"blocked",priority:"urgent",startDate:new Date("2024-02-15"),endDate:new Date("2024-01-30"),progress:25,estimatedHours:48,actualHours:12},{id:"5",name:"Marketing Campaign Design",description:"Create promotional materials for new curriculum launch",projectId:"1",stageId:"stage-1",assignees:["5"],skills:["Marketing"],status:"completed",priority:"medium",startDate:new Date("2024-01-01"),endDate:new Date("2024-01-31"),progress:100,estimatedHours:24,actualHours:26},{id:"6",name:"Animation Storyboard Creation",description:"Develop storyboards for interactive science course animations",projectId:"3",stageId:"stage-2",assignees:["3"],skills:["Animators","Graphic Designers"],status:"in-progress",priority:"medium",startDate:new Date("2024-02-10"),endDate:new Date("2024-03-10"),progress:40,estimatedHours:36,actualHours:15},{id:"7",name:"KG-2 Letter Recognition Content",description:"Create content for letter recognition in KG-2",projectId:"1",stageId:"stage-2",gradeId:"kg2",bookId:"kg2-book1",unitId:"kg2-book1-unit1",lessonId:"kg2-book1-unit1-lesson1",componentPath:"KG-2 > Book 1 > Unit 1: Letters A-M > Lesson 1: Letters A-E",assignees:["1"],skills:["Content Writers","Instructional Designers"],status:"not-started",priority:"medium",startDate:new Date("2024-02-15"),endDate:new Date("2024-03-15"),progress:0,estimatedHours:30},{id:"8",name:"KG-3 Phonics Activities",description:"Develop phonics activities for KG-3 students",projectId:"1",stageId:"stage-2",gradeId:"kg3",bookId:"kg3-book1",unitId:"kg3-book1-unit1",lessonId:"kg3-book1-unit1-lesson1",componentPath:"KG-3 > Book 1 > Unit 1: Reading Readiness > Lesson 1: Phonics Basics",assignees:["6"],skills:["Instructional Designers"],status:"in-progress",priority:"high",startDate:new Date("2024-02-01"),endDate:new Date("2024-03-01"),progress:30,estimatedHours:25,actualHours:8}],Ep={projects:Dp,users:Cp,tasks:Tp,allocations:[],categories:["eLearning Design","Curriculum Design","IT Applications"],skills:["Content Writers","Instructional Designers","Graphic Designers","Developers","Animators","Tech","Sales","Marketing","QA"],filters:{},selectedProject:null,selectedView:"dashboard"};function Pp(e,t){switch(t.type){case"SET_PROJECTS":return{...e,projects:t.payload};case"ADD_PROJECT":return{...e,projects:[...e.projects,t.payload]};case"UPDATE_PROJECT":return{...e,projects:e.projects.map(r=>r.id===t.payload.id?t.payload:r)};case"DELETE_PROJECT":return{...e,projects:e.projects.filter(r=>r.id!==t.payload)};case"SET_USERS":return{...e,users:t.payload};case"ADD_USER":return{...e,users:[...e.users,t.payload]};case"UPDATE_USER":return{...e,users:e.users.map(r=>r.id===t.payload.id?t.payload:r)};case"SET_TASKS":return{...e,tasks:t.payload};case"ADD_TASK":return{...e,tasks:[...e.tasks,t.payload]};case"UPDATE_TASK":return{...e,tasks:e.tasks.map(r=>r.id===t.payload.id?t.payload:r)};case"SET_ALLOCATIONS":return{...e,allocations:t.payload};case"ADD_ALLOCATION":return{...e,allocations:[...e.allocations,t.payload]};case"UPDATE_ALLOCATION":return{...e,allocations:e.allocations.map(r=>r.userId===t.payload.userId&&r.projectId===t.payload.projectId&&r.taskId===t.payload.taskId?t.payload:r)};case"ADD_CATEGORY":return{...e,categories:[...e.categories,t.payload]};case"ADD_SKILL":return{...e,skills:[...e.skills,t.payload]};case"SET_FILTERS":return{...e,filters:t.payload};case"SET_SELECTED_PROJECT":return{...e,selectedProject:t.payload};case"SET_SELECTED_VIEW":return{...e,selectedView:t.payload};default:return e}}const gm=m.createContext(null);function Mp({children:e}){const[t,r]=m.useReducer(Pp,Ep);return s.jsx(gm.Provider,{value:{state:t,dispatch:r},children:e})}function dr(){const e=m.useContext(gm);if(!e)throw new Error("useApp must be used within an AppProvider");return e}const Ip=[{name:"Dashboard",icon:dp,key:"dashboard"},{name:"Projects",icon:Js,key:"projects"},{name:"Teams",icon:Le,key:"teams"},{name:"Tasks",icon:Tt,key:"tasks"},{name:"Allocations",icon:ft,key:"allocations"},{name:"Analytics",icon:_s,key:"analytics"},{name:"Settings",icon:pp,key:"settings"}];function Ap(){const{state:e,dispatch:t}=dr();return s.jsxs("div",{className:"w-64 bg-white shadow-sm border-r border-gray-200 h-full",children:[s.jsxs("div",{className:"p-6",children:[s.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"ProjectFlow"}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Project Management"})]}),s.jsx("nav",{className:"px-4 space-y-1",children:Ip.map(r=>{const n=e.selectedView===r.key;return s.jsxs("button",{onClick:()=>t({type:"SET_SELECTED_VIEW",payload:r.key}),className:`w-full flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ${n?"bg-blue-50 text-blue-700 border-r-2 border-blue-700":"text-gray-700 hover:bg-gray-50 hover:text-gray-900"}`,children:[s.jsx(r.icon,{className:`mr-3 h-5 w-5 ${n?"text-blue-700":"text-gray-400"}`}),r.name]},r.key)})})]})}function Lp(){const{signOut:e,user:t}=An(),r=async()=>{await e()};return s.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[s.jsx("div",{className:"flex items-center flex-1",children:s.jsxs("div",{className:"relative max-w-md w-full",children:[s.jsx(Ao,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",placeholder:"Search projects, tasks, or team members...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(D,{variant:"ghost",size:"sm",children:s.jsx(tp,{className:"w-4 h-4"})}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[s.jsx(Ai,{className:"w-4 h-4"}),s.jsx("span",{children:t==null?void 0:t.email})]}),s.jsx(D,{variant:"ghost",size:"sm",onClick:r,children:s.jsx(mm,{className:"w-4 h-4"})})]})]})})}function gt({value:e,max:t=100,className:r="",showLabel:n=!0,variant:a="default"}){const l=Math.min(e/t*100,100),i={default:"bg-blue-600",success:"bg-green-600",warning:"bg-yellow-600",danger:"bg-red-600"};return s.jsxs("div",{className:`w-full ${r}`,children:[s.jsx("div",{className:"flex items-center justify-between mb-1",children:n&&s.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[Math.round(l),"%"]})}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${i[a]}`,style:{width:`${l}%`}})})]})}function zp(){const{state:e,dispatch:t}=dr(),[r,n]=m.useState(null),[a,l]=m.useState(!0),[i,o]=m.useState(null);m.useEffect(()=>{let S=!0;return(async()=>{try{l(!0),o(null);const v=await kp.getOverview();S&&n(v)}catch(v){S&&(console.error("Dashboard fetch error:",v),o(v.message||"Failed to load dashboard data"))}finally{S&&l(!1)}})(),()=>{S=!1}},[]);const c=(S,u)=>{t({type:"SET_SELECTED_VIEW",payload:S}),u&&t({type:"SET_FILTERS",payload:u})},p=(r==null?void 0:r.projects)||[],g=(r==null?void 0:r.teamMembers)||[],j=(r==null?void 0:r.tasks)||[],d=new Date,N=new Date(d);N.setDate(N.getDate()+1);const w=new Date(d);w.setDate(d.getDate()+7);const P=j.filter(S=>new Date(S.end_date).toDateString()===d.toDateString()&&S.status!=="completed"),L=j.filter(S=>new Date(S.end_date).toDateString()===N.toDateString()&&S.status!=="completed"),f=j.filter(S=>{const u=new Date(S.end_date);return u>=d&&u<=w&&S.status!=="completed"}),h=S=>{t({type:"SET_SELECTED_VIEW",payload:"tasks"}),t({type:"SET_FILTERS",payload:{teamMembers:[S]}})};if(a)return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),s.jsx("p",{className:"text-gray-600",children:"Overview of your project management activities"})]}),s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Ln,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-blue-600"}),s.jsx("p",{className:"text-gray-600",children:"Loading dashboard data..."})]})})]});if(i)return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),s.jsx("p",{className:"text-gray-600",children:"Overview of your project management activities"})]}),s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx(_t,{className:"w-8 h-8 mx-auto mb-4 text-red-600"}),s.jsx("p",{className:"text-red-600 mb-4",children:i}),s.jsx(D,{onClick:()=>window.location.reload(),variant:"outline",children:"Try Again"})]})})]});const x=(r==null?void 0:r.stats)||{},b=[{title:"Total Projects",value:x.totalProjects||0,icon:Js,color:"text-blue-600",bg:"bg-blue-50",onClick:()=>c("projects")},{title:"Active Projects",value:x.activeProjects||0,icon:cn,color:"text-green-600",bg:"bg-green-50",onClick:()=>c("projects",{statuses:["active"]})},{title:"Team Members",value:x.totalTeamMembers||0,icon:Le,color:"text-purple-600",bg:"bg-purple-50",onClick:()=>c("teams")},{title:"Categories",value:x.totalCategories||0,icon:Tt,color:"text-orange-600",bg:"bg-orange-50",onClick:()=>c("settings")}];return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),s.jsx("p",{className:"text-gray-600",children:"Overview of your project management activities"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:b.map(S=>s.jsx(K,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:S.onClick,children:s.jsxs(Y,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`p-2 rounded-lg ${S.bg}`,children:s.jsx(S.icon,{className:`w-6 h-6 ${S.color}`})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:S.title}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:S.value})]})]}),s.jsxs("div",{className:"mt-2 flex items-center text-sm text-gray-500",children:[s.jsx("span",{children:"Click to view details"}),s.jsx(Jt,{className:"w-4 h-4 ml-1"})]})]})},S.title))}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx(K,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>c("tasks",{dueToday:!0}),children:s.jsxs(Y,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Due Today"}),s.jsx("p",{className:"text-2xl font-bold text-red-600",children:P.length})]}),s.jsx(ft,{className:"w-8 h-8 text-red-500"})]}),s.jsxs("div",{className:"mt-2 flex items-center text-sm text-gray-500",children:[s.jsx("span",{children:"Click to view tasks"}),s.jsx(Jt,{className:"w-4 h-4 ml-1"})]})]})}),s.jsx(K,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>c("tasks",{dueTomorrow:!0}),children:s.jsxs(Y,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Due Tomorrow"}),s.jsx("p",{className:"text-2xl font-bold text-orange-600",children:L.length})]}),s.jsx(ft,{className:"w-8 h-8 text-orange-500"})]}),s.jsxs("div",{className:"mt-2 flex items-center text-sm text-gray-500",children:[s.jsx("span",{children:"Click to view tasks"}),s.jsx(Jt,{className:"w-4 h-4 ml-1"})]})]})}),s.jsx(K,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>c("tasks",{dueThisWeek:!0}),children:s.jsxs(Y,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Due This Week"}),s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:f.length})]}),s.jsx(ft,{className:"w-8 h-8 text-blue-500"})]}),s.jsxs("div",{className:"mt-2 flex items-center text-sm text-gray-500",children:[s.jsx("span",{children:"Click to view tasks"}),s.jsx(Jt,{className:"w-4 h-4 ml-1"})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(K,{children:[s.jsx(Te,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Ee,{children:"Recent Projects"}),s.jsx(D,{variant:"ghost",size:"sm",onClick:()=>c("projects"),children:"View All"})]})}),s.jsx(Y,{className:"space-y-4",children:p.slice(0,5).map(S=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer transition-colors",onClick:()=>c("projects"),children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:S.name}),s.jsx("p",{className:"text-sm text-gray-600",children:S.category_name||S.category}),s.jsx(gt,{value:S.progress||0,className:"mt-2"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(X,{variant:S.status==="active"?"primary":S.status==="completed"?"success":S.status==="on-hold"?"warning":"default",children:S.status}),s.jsx(Jt,{className:"w-4 h-4 text-gray-400"})]})]},S.id))})]}),s.jsxs(K,{children:[s.jsx(Te,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Ee,{children:"Team Workload"}),s.jsx(D,{variant:"ghost",size:"sm",onClick:()=>c("teams"),children:"View All"})]})}),s.jsx(Y,{className:"space-y-4",children:g.slice(0,6).map(S=>{var A;const u=j.filter(z=>z.assignees&&z.assignees.includes(S.id)),v=u.filter(z=>z.status==="completed").length,C=u.length>0?v/u.length*100:0;return s.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>h(S.id),children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm font-medium",children:S.name.charAt(0)}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:S.name}),s.jsx("p",{className:"text-sm text-gray-600",children:((A=S.skills)==null?void 0:A[0])||"No skills"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:[u.length," tasks"]}),s.jsx(gt,{value:C,className:"w-20",showLabel:!1,variant:C>80?"warning":"default"}),s.jsx(Jt,{className:"w-4 h-4 text-gray-400"})]})]},S.id)})})]})]}),s.jsxs(K,{children:[s.jsx(Te,{children:s.jsx(Ee,{children:"Quick Actions"})}),s.jsx(Y,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("button",{onClick:()=>t({type:"SET_SELECTED_VIEW",payload:"projects"}),className:"p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors",children:[s.jsx(Js,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),s.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Create New Project"})]}),s.jsxs("button",{onClick:()=>t({type:"SET_SELECTED_VIEW",payload:"teams"}),className:"p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-green-500 hover:bg-green-50 transition-colors",children:[s.jsx(Le,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),s.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Add Team Member"})]}),s.jsxs("button",{onClick:()=>t({type:"SET_SELECTED_VIEW",payload:"tasks"}),className:"p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-orange-500 hover:bg-orange-50 transition-colors",children:[s.jsx(Tt,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),s.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Create Task"})]})]})})]})]})}function Rp(e,t){const r=t.filter(l=>l.lessonId===e);if(r.length===0)return{progress:0,completedWeight:0,totalWeight:0};const a=r.reduce((l,i)=>l+i.progress,0)/r.length;return{progress:Math.round(a),completedWeight:a,totalWeight:100}}function Op(e,t){let r=0,n=0;return e.lessons.forEach(l=>{const i=Rp(l.id,t);r+=i.progress*l.weight/100,n+=l.weight}),{progress:n>0?Math.round(r):0,completedWeight:r,totalWeight:n}}function Fp(e,t){let r=0,n=0;return e.units.forEach(l=>{const i=Op(l,t);r+=i.progress*l.weight/100,n+=l.weight}),{progress:n>0?Math.round(r):0,completedWeight:r,totalWeight:n}}function $p(e,t){let r=0,n=0;return e.books.forEach(l=>{const i=Fp(l,t);r+=i.progress*l.weight/100,n+=l.weight}),{progress:n>0?Math.round(r):0,completedWeight:r,totalWeight:n}}function zi(e,t){const r=t.filter(l=>l.stageId===e);if(r.length===0)return{progress:0,completedWeight:0,totalWeight:0};const a=r.reduce((l,i)=>l+i.progress,0)/r.length;return{progress:Math.round(a),completedWeight:a,totalWeight:100}}function Up(e,t){let r=0,n=0;return e.stages&&e.stages.length>0&&e.stages.forEach(l=>{const i=zi(l.id,t);r+=i.progress*l.weight/100,n+=l.weight}),e.grades&&e.grades.length>0&&e.grades.forEach(l=>{const i=$p(l,t);r+=i.progress*l.weight/100,n+=l.weight}),{progress:n>0?Math.round(r):0,completedWeight:r,totalWeight:n}}function hs(e){switch(e){case"not-started":return 0;case"in-progress":return 50;case"under-review":return 90;case"completed":return 100;case"blocked":return 25;default:return 0}}function ym({taskId:e,onBack:t}){dr();const{user:r}=An(),[n,a]=m.useState(null),[l,i]=m.useState(!0),[o,c]=m.useState(null),[p,g]=m.useState(!1),[j,d]=m.useState(null),[N,w]=m.useState(null),[P,L]=m.useState([]),[f,h]=m.useState([]),[x,b]=m.useState([]),[S,u]=m.useState([]),[v,C]=m.useState([]),[A,z]=m.useState([]),[le,F]=m.useState([]),[ne,me]=m.useState([]),[ye,Oe]=m.useState(null),[We,_]=m.useState([]),[E,$]=m.useState([]),[B,G]=m.useState(!1),[ee,q]=m.useState(!1),[k,ie]=m.useState(null),[oe,be]=m.useState("approved"),[De,M]=m.useState(""),[H,re]=m.useState(""),[se,ce]=m.useState([]),[he,je]=m.useState(!1),[Xe,Q]=m.useState(null),[V,fe]=m.useState("green"),[ke,T]=m.useState(""),ae=(r==null?void 0:r.id)!==void 0;m.useEffect(()=>{xe()},[e]);const xe=async()=>{try{i(!0),c(null);const y=await ze.getById(e);if(console.log(" Task data received:",y),y.progress===0||y.progress===null){const Ht=hs(y.status);console.log(" Calculating progress for status:",y.status,"->",Ht),y.progress=Ht}a(y);const[pe,Z,ve,st,xt,qe,$r,il,ol,cl,dl,ul]=await Promise.all([Ue.getById(y.project_id),Ot.getById(y.category_stage_id||y.stage_id),_e.getMembers(),_e.getTeams(),ss.getAll(),cs.getAll(),ds.getAll(),us.getAll(),$s.getAll(),ze.getExtensions(e),ze.getRemarks(e),Ks.getByTask(e)]);d(pe),w(Z),h(ve),b(st),u(xt),C(qe),z($r),F(il),me(ol),_(cl),$(dl),ce(ul),console.log(" Task assignees data:",y.assignees),console.log(" All team members:",ve);const Lo=ve.filter(Ht=>Array.isArray(y.assignees)?y.assignees.some(Rn=>typeof Rn=="object"&&Rn.id?Rn.id===Ht.id:Rn===Ht.id):!1);if(console.log(" Filtered task assignees:",Lo),L(Lo),y.grade_id||y.book_id||y.unit_id||y.lesson_id){const Ht={};y.grade_id&&(Ht.grade=await cs.getById(y.grade_id)),y.book_id&&(Ht.book=await ds.getById(y.book_id)),y.unit_id&&(Ht.unit=await us.getById(y.unit_id)),y.lesson_id&&(Ht.lesson=await $s.getById(y.lesson_id)),Oe(Ht)}}catch(y){console.error("Failed to load task details:",y),c(y.message||"Failed to load task details")}finally{i(!1)}},Pe=async y=>{try{const pe=await ze.update(e,y);a(pe),g(!1),await xe()}catch(pe){console.error("Failed to update task:",pe),c(pe.message||"Failed to update task")}},Fe=async()=>{if(k)try{const y={status:oe};oe==="approved"&&H?y.review_notes=`Approved until ${H}. ${De}`:oe==="rejected"&&(y.review_notes=De),await ze.reviewExtension(k.id,y),await xe(),G(!1),ie(null),be("approved"),M(""),re("")}catch(y){console.error("Failed to review extension:",y),c(y.message||"Failed to review extension")}},Ze=(y,pe)=>{ie(y),be(pe),M(""),re(pe==="approved"?y.requested_due_date:""),G(!0)},Me=async y=>{try{await ze.addRemark(e,y),await xe(),q(!1)}catch(pe){console.error("Failed to add remark:",pe),c(pe.message||"Failed to add remark")}},Ct=async y=>{try{await ze.deleteRemark(y),await xe()}catch(pe){console.error("Failed to delete remark:",pe),c(pe.message||"Failed to delete remark")}},I=y=>{Q(y),fe("green"),T(""),je(!0)},W=async()=>{if(!(!Xe||!ke.trim()))try{await Ks.add({team_member_id:Xe.id,task_id:parseInt(e),type:V,reason:ke.trim()});const y=await Ks.getByTask(e);ce(y),je(!1),Q(null),fe("green"),T("")}catch(y){console.error("Failed to add performance flag:",y)}},Ne=async y=>{try{await Ks.delete(y);const pe=await Ks.getByTask(e);ce(pe)}catch(pe){console.error("Failed to delete performance flag:",pe)}},Je=y=>{switch(y){case"not-started":return"default";case"in-progress":return"primary";case"under-review":return"warning";case"completed":return"success";case"blocked":return"danger";default:return"default"}},O=y=>{switch(y){case"low":return"default";case"medium":return"primary";case"high":return"warning";case"urgent":return"danger";default:return"default"}},de=y=>{switch(y){case"pending":return"warning";case"approved":return"success";case"rejected":return"danger";default:return"default"}},ue=y=>{switch(y){case"progress":return"success";case"issue":return"danger";case"update":return"primary";case"general":return"default";default:return"secondary"}},Se=()=>n!=null&&n.end_date?new Date(n.end_date)<new Date&&n.status!=="completed":!1;return l?s.jsx("div",{className:"p-6 space-y-6",children:s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading task details..."})]})})}):o||!n?s.jsx("div",{className:"p-6 space-y-6",children:s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx(_t,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),s.jsx("p",{className:"text-red-600 mb-4",children:o||"Task not found"}),s.jsx(D,{onClick:t,children:"Go Back"})]})})}):s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs(D,{variant:"ghost",onClick:t,children:[s.jsx(Mo,{className:"w-4 h-4 mr-2"}),"Back to Tasks"]}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:n.name}),s.jsxs("p",{className:"text-gray-600",children:[j==null?void 0:j.name,"  ",N==null?void 0:N.name]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(X,{variant:Je(n.status),children:n.status.replace("-"," ")}),s.jsx(X,{variant:O(n.priority),children:n.priority}),Se()&&s.jsxs(X,{variant:"danger",children:[s.jsx(_t,{className:"w-3 h-3 mr-1"}),"Overdue"]}),s.jsxs(D,{variant:"outline",size:"sm",onClick:()=>g(!0),children:[s.jsx(Cs,{className:"w-4 h-4 mr-2"}),"Edit Task"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs(K,{children:[s.jsx(Te,{children:s.jsx(Ee,{children:"Task Overview"})}),s.jsxs(Y,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Description"}),s.jsx("p",{className:"text-gray-700",children:n.description||"No description provided"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Progress"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(gt,{value:n.progress}),s.jsxs("p",{className:"text-sm text-gray-600",children:[n.progress,"% complete"]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Time Tracking"}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("p",{className:"text-sm text-gray-600",children:["Estimated: ",n.estimated_hours||0,"h"]}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Actual: ",n.actual_hours||0,"h"]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Timeline"}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("p",{className:"text-sm text-gray-600",children:[s.jsx(ft,{className:"w-3 h-3 inline mr-1"}),"Start: ",n.start_date?new Date(n.start_date).toLocaleDateString():"Not set"]}),s.jsxs("p",{className:"text-sm text-gray-600",children:[s.jsx(ft,{className:"w-3 h-3 inline mr-1"}),"Due: ",n.end_date?new Date(n.end_date).toLocaleDateString():"Not set"]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Project Info"}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("p",{className:"text-sm text-gray-600",children:[s.jsx(ts,{className:"w-3 h-3 inline mr-1"}),"Project: ",(j==null?void 0:j.name)||"Unknown"]}),s.jsxs("p",{className:"text-sm text-gray-600",children:[s.jsx(Dn,{className:"w-3 h-3 inline mr-1"}),"Stage: ",(N==null?void 0:N.name)||"Unknown"]})]})]})]})]})]}),ae&&We.length>0&&s.jsxs(K,{children:[s.jsx(Te,{children:s.jsxs(Ee,{className:"flex items-center",children:[s.jsx(ir,{className:"w-5 h-5 mr-2"}),"Extension Requests (",We.filter(y=>y.status==="pending").length," pending)"]})}),s.jsx(Y,{children:s.jsx("div",{className:"space-y-4",children:We.map(y=>s.jsx("div",{className:"border rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(X,{variant:de(y.status),children:y.status}),s.jsxs("span",{className:"text-sm text-gray-600",children:["Requested by ",y.requester_name]})]}),s.jsx("p",{className:"text-sm text-gray-700 mb-2",children:y.reason}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-600",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Current Due:"})," ",new Date(y.current_due_date).toLocaleDateString()]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Requested Due:"})," ",new Date(y.requested_due_date).toLocaleDateString()]})]}),y.review_notes&&s.jsxs("div",{className:"mt-2 p-2 bg-gray-50 rounded text-sm",children:[s.jsx("span",{className:"font-medium",children:"Review Notes:"})," ",y.review_notes]})]}),y.status==="pending"&&s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs(D,{size:"sm",variant:"outline",onClick:()=>Ze(y,"approved"),className:"text-green-600 hover:text-green-700",children:[s.jsx(Mi,{className:"w-4 h-4 mr-1"}),"Approve"]}),s.jsxs(D,{size:"sm",variant:"outline",onClick:()=>Ze(y,"rejected"),className:"text-red-600 hover:text-red-700",children:[s.jsx(jp,{className:"w-4 h-4 mr-1"}),"Reject"]})]})]})},y.id))})})]}),s.jsxs(K,{children:[s.jsx(Te,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(Ee,{className:"flex items-center",children:[s.jsx(xm,{className:"w-5 h-5 mr-2"}),"Remarks (",E.length,")"]}),ae&&s.jsxs(D,{size:"sm",onClick:()=>q(!0),children:[s.jsx(nt,{className:"w-4 h-4 mr-1"}),"Add Remark"]})]})}),s.jsx(Y,{children:E.length>0?s.jsx("div",{className:"space-y-4",children:E.map(y=>s.jsxs("div",{className:"border rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(X,{variant:ue(y.remark_type),children:y.remark_type}),y.is_private&&s.jsx(X,{variant:"secondary",children:"Private"})]}),ae&&s.jsx(D,{size:"sm",variant:"ghost",onClick:()=>Ct(y.id),className:"text-red-600 hover:text-red-700",children:s.jsx(mt,{className:"w-4 h-4"})})]}),s.jsx("p",{className:"text-gray-700 mb-2",children:y.remark}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[s.jsxs("span",{children:["By ",y.user_name]}),s.jsx("span",{children:new Date(y.remark_date).toLocaleDateString()})]})]},y.id))}):s.jsx("p",{className:"text-gray-500 text-center py-4",children:"No remarks yet"})})]}),ye&&s.jsxs(K,{children:[s.jsx(Te,{children:s.jsxs(Ee,{className:"flex items-center",children:[s.jsx(Cn,{className:"w-5 h-5 mr-2"}),"Educational Hierarchy"]})}),s.jsx(Y,{children:s.jsxs("div",{className:"space-y-3",children:[ye.grade&&s.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-purple-50 rounded-lg",children:[s.jsx(Cn,{className:"w-5 h-5 text-purple-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:ye.grade.name}),s.jsx("p",{className:"text-sm text-gray-600",children:"Grade"})]})]}),ye.book&&s.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-blue-50 rounded-lg",children:[s.jsx(om,{className:"w-5 h-5 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:ye.book.name}),s.jsx("p",{className:"text-sm text-gray-600",children:"Book"})]})]}),ye.unit&&s.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-green-50 rounded-lg",children:[s.jsx(Dn,{className:"w-5 h-5 text-green-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:ye.unit.name}),s.jsx("p",{className:"text-sm text-gray-600",children:"Unit"})]})]}),ye.lesson&&s.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-orange-50 rounded-lg",children:[s.jsx(cm,{className:"w-5 h-5 text-orange-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:ye.lesson.name}),s.jsx("p",{className:"text-sm text-gray-600",children:"Lesson"})]})]})]})})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(K,{children:[s.jsx(Te,{children:s.jsxs(Ee,{className:"flex items-center",children:[s.jsx(Le,{className:"w-5 h-5 mr-2"}),"Assignees (",P.length,")"]})}),s.jsx(Y,{children:P.length>0?s.jsx("div",{className:"space-y-3",children:P.map(y=>{var pe;return s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm font-medium",children:((pe=y.name)==null?void 0:pe.charAt(0))||"U"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:y.name}),s.jsx("p",{className:"text-sm text-gray-600",children:y.email})]})]}),ae&&s.jsxs(D,{size:"sm",variant:"outline",onClick:()=>I(y),className:"text-gray-600 hover:text-gray-800",children:[s.jsx(ts,{className:"w-4 h-4 mr-1"}),"Flag"]})]},y.id)})}):s.jsx("p",{className:"text-gray-500 text-center py-4",children:"No assignees"})})]}),ae&&se.length>0&&s.jsxs(K,{children:[s.jsx(Te,{children:s.jsxs(Ee,{className:"flex items-center",children:[s.jsx(ts,{className:"w-5 h-5 mr-2"}),"Performance Flags (",se.length,")"]})}),s.jsx(Y,{children:s.jsx("div",{className:"space-y-3",children:se.map(y=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${y.type==="red"?"bg-red-500":y.type==="orange"?"bg-orange-500":y.type==="yellow"?"bg-yellow-500":"bg-green-500"}`}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:y.team_member_name}),s.jsx("p",{className:"text-sm text-gray-600",children:y.reason}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Added by ",y.added_by_name," on ",new Date(y.created_at).toLocaleDateString()]})]})]}),s.jsx(D,{size:"sm",variant:"outline",onClick:()=>Ne(y.id),className:"text-red-600 hover:text-red-700",children:s.jsx(mt,{className:"w-4 h-4"})})]},y.id))})})]}),s.jsxs(K,{children:[s.jsx(Te,{children:s.jsxs(Ee,{className:"flex items-center",children:[s.jsx(_s,{className:"w-5 h-5 mr-2"}),"Statistics"]})}),s.jsxs(Y,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Days Remaining"}),s.jsx("span",{className:"font-medium",children:n.end_date?Math.ceil((new Date(n.end_date).getTime()-new Date().getTime())/(1e3*60*60*24)):"No due date"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Hours Remaining"}),s.jsxs("span",{className:"font-medium",children:[Math.max(0,(n.estimated_hours||0)-(n.actual_hours||0)),"h"]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Completion Rate"}),s.jsxs("span",{className:"font-medium",children:[n.progress,"%"]})]})]})]})]})]}),s.jsx(Ha,{isOpen:p,onClose:()=>g(!1),onSubmit:Pe,users:f,teams:x,skills:S,projects:j?[j]:[],stages:N?[N]:[],grades:v,books:A,units:le,lessons:ne,editingTask:n}),s.jsx(Ke,{isOpen:B,onClose:()=>G(!1),title:`${oe==="approved"?"Approve":"Reject"} Extension Request`,children:s.jsxs("div",{className:"space-y-4",children:[k&&s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("h4",{className:"font-medium mb-2",children:"Extension Details"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Requested by:"})," ",k.requester_name]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Reason:"})," ",k.reason]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Current due date:"})," ",new Date(k.current_due_date).toLocaleDateString()]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Requested due date:"})," ",new Date(k.requested_due_date).toLocaleDateString()]})]})]}),oe==="approved"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Approved Until Date"}),s.jsx("input",{type:"date",value:H,onChange:y=>re(y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:k==null?void 0:k.current_due_date})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Review Notes"}),s.jsx("textarea",{value:De,onChange:y=>M(y.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:`Add notes for ${oe==="approved"?"approval":"rejection"}...`})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx(D,{variant:"outline",onClick:()=>G(!1),children:"Cancel"}),s.jsxs(D,{variant:oe==="approved"?"primary":"danger",onClick:Fe,disabled:oe==="approved"&&!H,children:[oe==="approved"?"Approve":"Reject"," Extension"]})]})]})}),s.jsx(Ke,{isOpen:ee,onClose:()=>q(!1),title:"Add Remark",children:s.jsx(Bp,{onSubmit:Me,onCancel:()=>q(!1)})}),s.jsx(Ke,{isOpen:he,onClose:()=>je(!1),title:"Add Performance Flag",children:s.jsxs("div",{className:"space-y-4",children:[Xe&&s.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Flagging:"}),s.jsx("p",{className:"font-medium",children:Xe.name}),s.jsx("p",{className:"text-sm text-gray-500",children:Xe.email})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Flag Type"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:["green","yellow","orange","red"].map(y=>s.jsx("button",{type:"button",onClick:()=>fe(y),className:`p-3 border rounded-lg text-left transition-colors ${V===y?y==="red"?"border-red-500 bg-red-50":y==="orange"?"border-orange-500 bg-orange-50":y==="yellow"?"border-yellow-500 bg-yellow-50":"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"}`,children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${y==="red"?"bg-red-500":y==="orange"?"bg-orange-500":y==="yellow"?"bg-yellow-500":"bg-green-500"}`}),s.jsx("span",{className:"capitalize font-medium",children:y})]})},y))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason"}),s.jsx("textarea",{value:ke,onChange:y=>T(y.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter the reason for this performance flag..."})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx(D,{variant:"outline",onClick:()=>je(!1),children:"Cancel"}),s.jsx(D,{variant:"primary",onClick:W,disabled:!ke.trim(),children:"Add Flag"})]})]})})]})}function Bp({onSubmit:e,onCancel:t}){const[r,n]=m.useState(""),[a,l]=m.useState(new Date().toISOString().split("T")[0]),[i,o]=m.useState("general"),[c,p]=m.useState(!1),g=j=>{j.preventDefault(),r.trim()&&e({remark:r.trim(),remark_date:a,remark_type:i,is_private:c})};return s.jsxs("form",{onSubmit:g,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Remark"}),s.jsx("textarea",{value:r,onChange:j=>n(j.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your remark...",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),s.jsx("input",{type:"date",value:a,onChange:j=>l(j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type"}),s.jsxs("select",{value:i,onChange:j=>o(j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"general",children:"General"}),s.jsx("option",{value:"progress",children:"Progress"}),s.jsx("option",{value:"issue",children:"Issue"}),s.jsx("option",{value:"update",children:"Update"}),s.jsx("option",{value:"other",children:"Other"})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"isPrivate",checked:c,onChange:j=>p(j.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"isPrivate",className:"ml-2 block text-sm text-gray-700",children:"Private remark (only visible to admins)"})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx(D,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),s.jsx(D,{type:"submit",disabled:!r.trim(),children:"Add Remark"})]})]})}function Hp(){const{state:e,dispatch:t}=dr(),[r,n]=m.useState(!1),[a,l]=m.useState(null),[i,o]=m.useState(null),[c,p]=m.useState(""),[g,j]=m.useState("all"),[d,N]=m.useState("all"),[w,P]=m.useState("all"),[L,f]=m.useState("all"),[h,x]=m.useState("created_at"),[b,S]=m.useState("desc"),[u,v]=m.useState([]),[C,A]=m.useState([]),[z,le]=m.useState([]),[F,ne]=m.useState([]),[me,ye]=m.useState([]),[Oe,We]=m.useState([]),[_,E]=m.useState([]),[$,B]=m.useState([]),[G,ee]=m.useState([]),[q,k]=m.useState([]),[ie,oe]=m.useState(!0),[be,De]=m.useState(null);m.useEffect(()=>{(async()=>{oe(!0);try{const ae={sort:h,order:b};g!=="all"&&(ae.status=g),d!=="all"&&(ae.priority=d),L!=="all"&&(ae.project_id=L),w!=="all"&&(ae.assignee_id=w),c&&(ae.search=c),console.log(" Sending filters to API:",ae);const[xe,Pe,Fe,Ze,Me,Ct,I,W,Ne,Je]=await Promise.all([ze.getAll(ae),_e.getMembers(),_e.getTeams(),Ot.getAll(),Ue.getAll(),ss.getAll(),cs.getAll(),ds.getAll(),us.getAll(),$s.getAll()]);v(xe),A(Pe),le(Fe),ne(Ze),ye(Me),We(Ct),E(I),B(W),ee(Ne),k(Je),De(null)}catch(ae){console.error("Failed to fetch task data:",ae),De(ae.message||"Failed to load tasks")}finally{oe(!1)}})()},[h,b,g,d,L,w,c]),m.useEffect(()=>{e.filters&&Object.keys(e.filters).length>0&&(e.filters.statuses&&j(e.filters.statuses.length===1?e.filters.statuses[0]:"all"),e.filters.teamMembers&&P(e.filters.teamMembers.length===1?e.filters.teamMembers[0]:"all"),setTimeout(()=>{t({type:"SET_FILTERS",payload:{}})},0))},[e.filters,t]);const M=T=>{const ae=T.end_date||T.endDate;return ae?new Date(ae)<new Date&&T.status!=="completed":!1},H=T=>{const ae=T.end_date||T.endDate;if(!ae)return!1;const xe=new Date,Pe=new Date(ae);return xe.toDateString()===Pe.toDateString()&&T.status!=="completed"},re=T=>{const ae=T.end_date||T.endDate;if(!ae)return!1;const xe=new Date;xe.setDate(xe.getDate()+1);const Pe=new Date(ae);return xe.toDateString()===Pe.toDateString()&&T.status!=="completed"},se=T=>{const ae=T.end_date||T.endDate;if(!ae)return!1;const xe=new Date,Pe=new Date;Pe.setDate(xe.getDate()+7);const Fe=new Date(ae);return Fe>=xe&&Fe<=Pe&&T.status!=="completed"},ce=u.filter(T=>{var ae,xe,Pe,Fe;return!((ae=e.filters)!=null&&ae.overdue&&!M(T)||(xe=e.filters)!=null&&xe.dueToday&&!H(T)||(Pe=e.filters)!=null&&Pe.dueTomorrow&&!re(T)||(Fe=e.filters)!=null&&Fe.dueThisWeek&&!se(T))}),he=async T=>{try{if(a){const ae={name:T.name,description:T.description,project_id:parseInt(T.projectId||"1"),category_stage_id:parseInt(T.stageId||"1"),status:T.status,priority:T.priority,start_date:T.startDate,end_date:T.endDate,estimated_hours:parseInt(String(T.estimatedHours||0)),actual_hours:parseInt(String(T.actualHours||0)),assignees:T.assignees||[],skills:T.skills,grade_id:T.gradeId?parseInt(T.gradeId):null,book_id:T.bookId?parseInt(T.bookId):null,unit_id:T.unitId?parseInt(T.unitId):null,lesson_id:T.lessonId?parseInt(T.lessonId):null,component_path:T.componentPath};await ze.update(a.id,ae);const xe=await ze.getAll();v(xe)}else{const ae=(T.skills||[]).map(Ze=>{const Me=Oe.find(Ct=>Ct.name===Ze);return Me?Me.id:null}).filter(Ze=>Ze!==null),xe={name:T.name||"",description:T.description||"",project_id:parseInt(T.projectId||"1"),category_stage_id:parseInt(T.stageId||"1"),status:T.status||"not-started",priority:T.priority||"medium",start_date:T.startDate||new Date().toISOString().split("T")[0],end_date:T.endDate||new Date(Date.now()+7*24*60*60*1e3).toISOString().split("T")[0],estimated_hours:T.estimatedHours||8,assignees:T.assignees||[],skills:ae,component_path:T.componentPath,grade_id:T.gradeId?parseInt(T.gradeId):null,book_id:T.bookId?parseInt(T.bookId):null,unit_id:T.unitId?parseInt(T.unitId):null,lesson_id:T.lessonId?parseInt(T.lessonId):null};console.log(" Creating task with data:",xe),console.log(" Educational hierarchy IDs being sent:",{grade_id:xe.grade_id,book_id:xe.book_id,unit_id:xe.unit_id,lesson_id:xe.lesson_id,component_path:xe.component_path});const Pe=await ze.create(xe),Fe=await ze.getAll();v(Fe),console.log(" Task created successfully:",Pe)}n(!1),l(null)}catch(ae){console.error(" Failed to save task:",ae),De("Failed to save task")}},je=T=>{switch(T){case"not-started":return"default";case"in-progress":return"primary";case"under-review":return"warning";case"completed":return"success";case"blocked":return"danger";default:return"default"}},Xe=T=>{switch(T){case"low":return"default";case"medium":return"primary";case"high":return"warning";case"urgent":return"danger";default:return"default"}},Q=T=>{l(T),n(!0)},V=T=>{h===T?S(b==="asc"?"desc":"asc"):(x(T),S("desc"))},fe=async T=>{if(confirm(`Are you sure you want to delete the task "${T.name}"? This action cannot be undone.`))try{De(null),await ze.delete(T.id);const ae=await ze.getAll();v(ae),console.log(" Task deleted successfully:",T.name)}catch(ae){console.error(" Delete task error:",ae),De(ae.message||"Failed to delete task")}},ke={total:u.length,notStarted:u.filter(T=>T.status==="not-started").length,inProgress:u.filter(T=>T.status==="in-progress").length,completed:u.filter(T=>T.status==="completed").length,overdue:u.filter(T=>{const ae=T.end_date||T.endDate;return ae&&new Date(ae)<new Date&&T.status!=="completed"}).length};return i?s.jsx(ym,{taskId:i,onBack:()=>o(null)}):ie?s.jsx("div",{className:"p-6 space-y-6",children:s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-lg font-medium text-gray-900 mb-2",children:"Loading tasks..."}),s.jsx("div",{className:"text-gray-500",children:"Please wait while we fetch your tasks"})]})})}):be?s.jsx("div",{className:"p-6 space-y-6",children:s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-lg font-medium text-red-600 mb-2",children:"Failed to load tasks"}),s.jsx("div",{className:"text-gray-500 mb-4",children:be}),s.jsx(D,{onClick:()=>window.location.reload(),children:"Retry"})]})})}):s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Task Management"}),s.jsx("p",{className:"text-gray-600",children:"Track and manage all project tasks"})]}),s.jsx(D,{icon:s.jsx(nt,{className:"w-4 h-4"}),onClick:()=>{l(null),n(!0)},children:"Create Task"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[s.jsx(K,{children:s.jsx(Y,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 rounded-lg bg-gray-50",children:s.jsx(Tt,{className:"w-6 h-6 text-gray-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Tasks"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:ke.total})]})]})})}),s.jsx(K,{children:s.jsx(Y,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 rounded-lg bg-blue-50",children:s.jsx(ir,{className:"w-6 h-6 text-blue-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"In Progress"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:ke.inProgress})]})]})})}),s.jsx(K,{children:s.jsx(Y,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 rounded-lg bg-green-50",children:s.jsx(Tt,{className:"w-6 h-6 text-green-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Completed"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:ke.completed})]})]})})}),s.jsx(K,{children:s.jsx(Y,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 rounded-lg bg-orange-50",children:s.jsx(ir,{className:"w-6 h-6 text-orange-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Not Started"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:ke.notStarted})]})]})})}),s.jsx(K,{children:s.jsx(Y,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 rounded-lg bg-red-50",children:s.jsx(_t,{className:"w-6 h-6 text-red-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Overdue"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:ke.overdue})]})]})})})]}),s.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:s.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Ao,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",placeholder:"Search tasks...",value:c,onChange:T=>p(T.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("select",{value:g,onChange:T=>j(T.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"not-started",children:"Not Started"}),s.jsx("option",{value:"in-progress",children:"In Progress"}),s.jsx("option",{value:"under-review",children:"Under Review"}),s.jsx("option",{value:"completed",children:"Completed"}),s.jsx("option",{value:"blocked",children:"Blocked"})]}),s.jsxs("select",{value:d,onChange:T=>N(T.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[s.jsx("option",{value:"all",children:"All Priority"}),s.jsx("option",{value:"low",children:"Low"}),s.jsx("option",{value:"medium",children:"Medium"}),s.jsx("option",{value:"high",children:"High"}),s.jsx("option",{value:"urgent",children:"Urgent"})]}),s.jsxs("select",{value:L,onChange:T=>f(T.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[s.jsx("option",{value:"all",children:"All Projects"}),me.map(T=>s.jsx("option",{value:T.id,children:T.name},T.id))]}),s.jsxs("select",{value:w,onChange:T=>P(T.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[s.jsx("option",{value:"all",children:"All Assignees"}),C.map(T=>s.jsx("option",{value:T.id,children:T.name},T.id))]})]})}),s.jsx(K,{children:s.jsx(Y,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>V("name"),children:s.jsxs("div",{className:"flex items-center",children:["Task Name",h==="name"&&s.jsx("span",{className:"ml-1 text-blue-600",children:b==="asc"?"":""})]})}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Project"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>V("status"),children:s.jsxs("div",{className:"flex items-center",children:["Status",h==="status"&&s.jsx("span",{className:"ml-1 text-blue-600",children:b==="asc"?"":""})]})}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>V("priority"),children:s.jsxs("div",{className:"flex items-center",children:["Priority",h==="priority"&&s.jsx("span",{className:"ml-1 text-blue-600",children:b==="asc"?"":""})]})}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>V("assignees"),children:s.jsxs("div",{className:"flex items-center",children:["Assignees",h==="assignees"&&s.jsx("span",{className:"ml-1 text-blue-600",children:b==="asc"?"":""})]})}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>V("end_date"),children:s.jsxs("div",{className:"flex items-center",children:["Due Date",h==="end_date"&&s.jsx("span",{className:"ml-1 text-blue-600",children:b==="asc"?"":""})]})}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>V("progress"),children:s.jsxs("div",{className:"flex items-center",children:["Progress",h==="progress"&&s.jsx("span",{className:"ml-1 text-blue-600",children:b==="asc"?"":""})]})})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ce.map(T=>{var Ct;const ae=C.filter(I=>T.assignees&&T.assignees.includes(I.id));z.filter(I=>T.teamAssignees&&T.teamAssignees.includes(I.id));const xe=M(T),Pe=T.project_id||T.projectId,Fe=me.find(I=>{const W=typeof I.id=="string"?parseInt(I.id):I.id,Ne=typeof Pe=="string"?parseInt(Pe):Pe;return W===Ne}),Ze=T.stage_id||T.stageId,Me=(Ct=Fe==null?void 0:Fe.stages)==null?void 0:Ct.find(I=>{const W=typeof I.id=="string"?parseInt(I.id):I.id,Ne=typeof Ze=="string"?parseInt(Ze):Ze;return W===Ne});return s.jsxs("tr",{className:`hover:bg-gray-50 ${xe?"bg-red-50":""}`,children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsxs("div",{className:"text-sm font-medium text-gray-900 flex items-center",children:[T.name,xe&&s.jsx(_t,{className:"w-4 h-4 text-red-500 ml-2"})]}),s.jsxs("div",{className:"text-sm text-gray-500",children:[T.componentPath&&s.jsxs("div",{className:"text-xs text-purple-600 mt-1",children:[" ",T.componentPath]}),T.description&&s.jsx("div",{className:"mt-1",children:T.description})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm text-gray-900",children:Fe?s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-blue-600",children:Fe.name}),Me&&s.jsx("div",{className:"text-xs text-gray-500",children:Me.name})]}):s.jsx("span",{className:"text-gray-400",children:"Unknown Project"})})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx(X,{variant:je(T.status),children:T.status.replace("-"," ")})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx(X,{variant:Xe(T.priority),children:T.priority})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"space-y-1",children:[ae.length>0&&s.jsxs("div",{className:"flex items-center space-x-2",children:[ae.slice(0,5).map(I=>s.jsxs("div",{className:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center text-white text-xs font-medium relative group",title:I.name,children:[I.name.charAt(0),s.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-gray-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10",children:I.name})]},I.id)),ae.length>5&&s.jsxs("div",{className:"w-6 h-6 bg-gray-300 rounded-full flex items-center justify-center text-gray-600 text-xs font-medium",children:["+",ae.length-5]})]}),ae.length===0&&s.jsx("span",{className:"text-xs text-gray-400",children:"No assignees"})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(ft,{className:"w-4 h-4 mr-1 text-gray-400"}),T.end_date||T.endDate?new Date(T.end_date||T.endDate||"").toLocaleDateString():"No due date"]})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2 mr-2",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${hs(T.status)}%`}})}),s.jsxs("span",{className:"text-sm text-gray-600",children:[hs(T.status),"%"]})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(D,{variant:"ghost",size:"sm",onClick:I=>{I.stopPropagation(),o(T.id)},title:"View Details",children:s.jsx(Gs,{className:"w-4 h-4"})}),s.jsx(D,{variant:"ghost",size:"sm",onClick:I=>{I.stopPropagation(),Q(T)},title:"Edit Task",children:s.jsx(Cs,{className:"w-4 h-4"})}),s.jsx(D,{variant:"ghost",size:"sm",onClick:I=>{I.stopPropagation(),fe(T)},title:"Delete Task",className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:s.jsx(mt,{className:"w-4 h-4"})})]})]})]},T.id)})})]})})})}),s.jsx(Ha,{isOpen:r,onClose:()=>{n(!1),l(null)},onSubmit:he,users:C,teams:z,skills:Oe,projects:me,stages:F,grades:_,books:$,units:G,lessons:q,editingTask:a})]})}function Ha({isOpen:e,onClose:t,onSubmit:r,users:n,teams:a,skills:l,projects:i,stages:o,grades:c,books:p,units:g,lessons:j,editingTask:d}){const[N,w]=m.useState({name:"",description:"",projectId:"",stageId:"",gradeId:"",bookId:"",unitId:"",lessonId:"",status:"not-started",assignees:[],teamAssignees:[],skills:[],priority:"medium",estimatedHours:8,actualHours:0,startDate:new Date().toISOString().split("T")[0],endDate:new Date(Date.now()+6048e5).toISOString().split("T")[0]});m.useEffect(()=>{if(d){const x=Array.isArray(d.skills)?d.skills.map(S=>typeof S=="object"&&S.name?S.name:typeof S=="string"?S:"").filter(S=>S!==""):[],b=Array.isArray(d.assignees)?d.assignees.map(S=>typeof S=="object"&&S.id?S.id.toString():S.toString()):[];console.log(" Editing task assignees:",d.assignees),console.log(" Converted assignee IDs:",b),console.log(" Setting form data for editing task:",d),w({name:d.name,description:d.description||"",projectId:d.project_id||d.projectId||"",stageId:d.stage_id||d.stageId||"",gradeId:(d.grade_id||d.gradeId||"").toString(),bookId:(d.book_id||d.bookId||"").toString(),unitId:(d.unit_id||d.unitId||"").toString(),lessonId:(d.lesson_id||d.lessonId||"").toString(),status:d.status,assignees:b,teamAssignees:Array.isArray(d.teamAssignees)?d.teamAssignees.map(S=>S.toString()):[],skills:x,priority:d.priority,estimatedHours:d.estimated_hours||d.estimatedHours||8,actualHours:d.actual_hours||d.actualHours||0,startDate:d.start_date||d.startDate?new Date(d.start_date||d.startDate||"").toISOString().split("T")[0]:new Date().toISOString().split("T")[0],endDate:d.end_date||d.endDate?new Date(d.end_date||d.endDate||"").toISOString().split("T")[0]:new Date(Date.now()+7*24*60*60*1e3).toISOString().split("T")[0]})}else w({name:"",description:"",projectId:"",stageId:"",gradeId:"",bookId:"",unitId:"",lessonId:"",status:"not-started",assignees:[],teamAssignees:[],skills:[],priority:"medium",estimatedHours:8,actualHours:0,startDate:new Date().toISOString().split("T")[0],endDate:new Date(Date.now()+7*24*60*60*1e3).toISOString().split("T")[0]})},[d,e]);const P=x=>{var v;x.preventDefault(),hs(N.status);let b="";const S=i.find(C=>C.id===parseInt(N.projectId)||C.id===N.projectId);if(S&&N.gradeId){const C=(v=S.grades)==null?void 0:v.find(A=>A.id===N.gradeId);if(C&&(b=C.name,N.bookId)){const A=C.books.find(z=>z.id===N.bookId);if(A&&(b+=` > ${A.name}`,N.unitId)){const z=A.units.find(le=>le.id===N.unitId);if(z&&(b+=` > ${z.name}`,N.lessonId)){const le=z.lessons.find(F=>F.id===N.lessonId);le&&(b+=` > ${le.name}`)}}}}const u=N.skills.map(C=>{const A=l.find(z=>z.name===C);return A?A.id:null}).filter(C=>C!==null);r({...N,skills:u,componentPath:b,startDate:new Date(N.startDate),endDate:new Date(N.endDate)})},L=x=>{w(b=>({...b,assignees:b.assignees.includes(x)?b.assignees.filter(S=>S!==x):[...b.assignees,x]}))},f=i.find(x=>x.id===parseInt(N.projectId)||x.id===N.projectId),h=[];return f&&c.filter(b=>b.project_id===parseInt(f.id)).forEach(b=>{h.push({id:b.id,name:b.name,type:"grade",gradeId:b.id,bookId:null,unitId:null,lessonId:null}),p.filter(u=>u.grade_id===b.id).forEach(u=>{h.push({id:`${b.id}-${u.id}`,name:`${b.name} > ${u.name}`,type:"book",gradeId:b.id,bookId:u.id,unitId:null,lessonId:null}),g.filter(C=>C.book_id===u.id).forEach(C=>{h.push({id:`${b.id}-${u.id}-${C.id}`,name:`${b.name} > ${u.name} > ${C.name}`,type:"unit",gradeId:b.id,bookId:u.id,unitId:C.id,lessonId:null}),j.filter(z=>z.unit_id===C.id).forEach(z=>{h.push({id:`${b.id}-${u.id}-${C.id}-${z.id}`,name:`${b.name} > ${u.name} > ${C.name} > ${z.name}`,type:"lesson",gradeId:b.id,bookId:u.id,unitId:C.id,lessonId:z.id})})})})}),s.jsx(Ke,{isOpen:e,onClose:t,title:d?`Edit Task: ${d.name}`:"Create New Task",size:"xl",children:s.jsxs("form",{onSubmit:P,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Task Name"}),s.jsx("input",{type:"text",required:!0,value:N.name,onChange:x=>w({...N,name:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter task name"})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),s.jsx("textarea",{value:N.description,onChange:x=>w({...N,description:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Task description"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project *"}),s.jsxs("select",{required:!0,value:N.projectId,onChange:x=>w({...N,projectId:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Select Project"}),i.map(x=>s.jsx("option",{value:x.id,children:x.name},x.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Educational Hierarchy (Optional)"}),s.jsxs("select",{value:(()=>{const x=N.gradeId?parseInt(N.gradeId):null,b=N.bookId?parseInt(N.bookId):null,S=N.unitId?parseInt(N.unitId):null,u=N.lessonId?parseInt(N.lessonId):null;console.log(" Educational hierarchy matching:",{formData:{gradeId:x,bookId:b,unitId:S,lessonId:u},availableHierarchy:h.length});const v=h.find(C=>C.gradeId===x&&C.bookId===b&&C.unitId===S&&C.lessonId===u);return console.log(" Matching hierarchy item:",v),v?v.id:""})(),onChange:x=>{const b=h.find(S=>S.id===x.target.value);w(b?{...N,gradeId:b.gradeId?b.gradeId.toString():"",bookId:b.bookId?b.bookId.toString():"",unitId:b.unitId?b.unitId.toString():"",lessonId:b.lessonId?b.lessonId.toString():""}:{...N,gradeId:"",bookId:"",unitId:"",lessonId:""})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:!N.projectId,children:[s.jsx("option",{value:"",children:"Project Level Task"}),h.map(x=>s.jsxs("option",{value:x.id,children:[x.name," (",x.type,")"]},x.id))]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select a specific educational hierarchy item to assign this task to a particular grade, book, unit, or lesson"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),s.jsxs("select",{value:N.status,onChange:x=>{const b=x.target.value;w({...N,status:b})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"not-started",children:"Not Started"}),s.jsx("option",{value:"in-progress",children:"In Progress"}),s.jsx("option",{value:"under-review",children:"Under Review"}),s.jsx("option",{value:"completed",children:"Completed"}),s.jsx("option",{value:"blocked",children:"Blocked"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),s.jsxs("select",{value:N.priority,onChange:x=>w({...N,priority:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"low",children:"Low"}),s.jsx("option",{value:"medium",children:"Medium"}),s.jsx("option",{value:"high",children:"High"}),s.jsx("option",{value:"urgent",children:"Urgent"})]})]}),s.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Progress (Auto-calculated)"}),s.jsxs("span",{className:"text-sm text-blue-600 font-semibold",children:[hs(N.status),"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${hs(N.status)}%`}})}),s.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Progress is automatically calculated based on task status"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estimated Hours"}),s.jsx("input",{type:"number",min:"1",value:N.estimatedHours,onChange:x=>w({...N,estimatedHours:parseInt(x.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),d&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Actual Hours"}),s.jsx("input",{type:"number",min:"0",value:N.actualHours,onChange:x=>w({...N,actualHours:parseInt(x.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),s.jsx("input",{type:"date",value:N.startDate,onChange:x=>w({...N,startDate:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Due Date"}),s.jsx("input",{type:"date",value:N.endDate,onChange:x=>w({...N,endDate:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Individual Assignees"}),s.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-32 overflow-y-auto border border-gray-300 rounded-lg p-2",children:n&&n.length>0?n.map(x=>{const b=N.assignees.includes(x.id.toString());return console.log(` User ${x.name} (ID: ${x.id}) - checked: ${b}, assignees:`,N.assignees),s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:b,onChange:()=>L(x.id.toString()),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:x.name})]},x.id)}):s.jsx("p",{className:"text-gray-500 text-sm",children:"No team members available"})})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx(D,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),s.jsx(D,{type:"submit",children:d?"Update Task":"Create Task"})]})]})})}function Vp({isOpen:e,onClose:t,onSubmit:r,project:n,categories:a}){const[l,i]=m.useState({name:"",description:"",category_id:null,current_stage_id:null,status:"planning",start_date:"",end_date:""}),[o,c]=m.useState([]),[p,g]=m.useState(!1);m.useEffect(()=>{if(n&&e){const w=h=>{if(!h)return new Date().toISOString().split("T")[0];try{const x=new Date(h);return isNaN(x.getTime())?new Date().toISOString().split("T")[0]:x.toISOString().split("T")[0]}catch(x){return console.warn("Invalid date value:",h,x),new Date().toISOString().split("T")[0]}},P=n.start_date,L=n.end_date,f={name:n.name||"",description:n.description||"",category_id:n.category_id||null,current_stage_id:n.current_stage_id||null,status:n.status||"planning",start_date:w(P),end_date:w(L)};i(f),n.category_id&&j(n.category_id)}},[n,e]),m.useEffect(()=>{o.length>0&&n.current_stage_id&&o.find(P=>P.id===n.current_stage_id)&&i(P=>({...P,current_stage_id:n.current_stage_id||null}))},[o,n.current_stage_id]);const j=async w=>{g(!0);try{const P=await Ot.getByCategory(w);c(P),n.current_stage_id?P.find(f=>f.id===n.current_stage_id)||console.warn(" Current stage ID not found in loaded stages:",n.current_stage_id):console.log(" No current_stage_id set for this project")}catch(P){console.error("Failed to load stages for category:",P),c([])}finally{g(!1)}},d=async w=>{if(i(P=>({...P,category_id:w,current_stage_id:null})),w){g(!0);try{const P=await Ot.getByCategory(w);c(P)}catch(P){console.error("Failed to load stages for category:",P),c([])}finally{g(!1)}}else c([])},N=w=>{w.preventDefault(),r({...l,start_date:l.start_date,end_date:l.end_date,currentStageId:l.current_stage_id||void 0})};return s.jsx(Ke,{isOpen:e,onClose:t,title:"Edit Project",size:"lg",children:s.jsxs("form",{onSubmit:N,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Name"}),s.jsx("input",{type:"text",required:!0,value:l.name,onChange:w=>i({...l,name:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter project name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),s.jsx("textarea",{value:l.description,onChange:w=>i({...l,description:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Project description"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),s.jsxs("select",{value:l.category_id||"",onChange:w=>d(w.target.value?parseInt(w.target.value):null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Select a category"}),a.map(w=>s.jsx("option",{value:w.id,children:w.name},w.id))]})]}),l.category_id&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Stage"}),p?s.jsxs("div",{className:"flex items-center justify-center py-4",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),s.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Loading stages..."})]}):o.length>0?s.jsxs("select",{value:l.current_stage_id||"",onChange:w=>i({...l,current_stage_id:w.target.value?parseInt(w.target.value):null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Select a stage"}),o.map(w=>s.jsxs("option",{value:w.id,children:[w.name," - ",w.description]},w.id))]}):s.jsx("div",{className:"text-sm text-gray-500 py-2",children:"No stages available for this category."})]}),s.jsx("div",{className:"grid grid-cols-2 gap-4",children:s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),s.jsxs("select",{value:l.status,onChange:w=>i({...l,status:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"planning",children:"Planning"}),s.jsx("option",{value:"active",children:"Active"}),s.jsx("option",{value:"on-hold",children:"On Hold"}),s.jsx("option",{value:"completed",children:"Completed"}),s.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),s.jsx("input",{type:"date",value:l.start_date,onChange:w=>i({...l,start_date:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),s.jsx("input",{type:"date",value:l.end_date,onChange:w=>i({...l,end_date:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx(D,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),s.jsx(D,{type:"submit",children:"Update Project"})]})]})})}const Wp=({projectId:e})=>{const[t,r]=m.useState([]),[n,a]=m.useState([]),[l,i]=m.useState([]),[o,c]=m.useState([]),[p,g]=m.useState(!0),[j,d]=m.useState(null),[N,w]=m.useState(new Set);m.useState(new Set);const[P,L]=m.useState(!1),[f,h]=m.useState(!1),[x,b]=m.useState(!1),[S,u]=m.useState(!1),[v,C]=m.useState(null),[A,z]=m.useState(null),[le,F]=m.useState(null),[ne,me]=m.useState(null),[ye,Oe]=m.useState(null),[We,_]=m.useState(null),[E,$]=m.useState(null);m.useEffect(()=>{B()},[e]);const B=async()=>{try{g(!0),d(null);const[Q,V,fe,ke]=await Promise.all([cs.getByProject(e),ds.getAll(),us.getAll(),$s.getAll()]);r(Q||[]);const T=new Set((Q||[]).map(Me=>Me.id)),ae=(V||[]).filter(Me=>T.has(Me.grade_id));a(ae);const xe=new Set(ae.map(Me=>Me.id)),Pe=(fe||[]).filter(Me=>xe.has(Me.book_id));i(Pe);const Fe=new Set(Pe.map(Me=>Me.id)),Ze=(ke||[]).filter(Me=>Fe.has(Me.unit_id));c(Ze)}catch(Q){console.error("Error loading educational hierarchy:",Q),d(Q.message||"Failed to load educational hierarchy")}finally{g(!1)}},G=Q=>{const V=new Set(N);V.has(Q)?V.delete(Q):V.add(Q),w(V)},ee=async Q=>{try{const V=await cs.create({...Q,project_id:e});r([...t,V]),L(!1)}catch(V){d(V.message||"Failed to create grade")}},q=async Q=>{if(v)try{const V=await cs.update(v.id,Q);r(t.map(fe=>fe.id===v.id?V:fe)),L(!1),C(null)}catch(V){d(V.message||"Failed to update grade")}},k=async Q=>{if(confirm("Are you sure you want to delete this grade? This will also delete all associated books, units, and lessons."))try{await cs.delete(Q),r(t.filter(V=>V.id!==Q)),a(n.filter(V=>V.grade_id!==Q)),i(l.filter(V=>{const fe=n.find(ke=>ke.id===V.book_id);return fe&&fe.grade_id!==Q})),c(o.filter(V=>{const fe=l.find(T=>T.id===V.unit_id),ke=n.find(T=>T.id===(fe==null?void 0:fe.book_id));return ke&&ke.grade_id!==Q}))}catch(V){d(V.message||"Failed to delete grade")}},ie=async Q=>{if(ye)try{const V=await ds.create({...Q,grade_id:ye});a([...n,V]),h(!1),Oe(null)}catch(V){d(V.message||"Failed to create book")}},oe=async Q=>{if(A)try{const V=await ds.update(A.id,Q);a(n.map(fe=>fe.id===A.id?V:fe)),h(!1),z(null)}catch(V){d(V.message||"Failed to update book")}},be=async Q=>{if(confirm("Are you sure you want to delete this book? This will also delete all associated units and lessons."))try{await ds.delete(Q),a(n.filter(V=>V.id!==Q)),i(l.filter(V=>V.book_id!==Q)),c(o.filter(V=>{const fe=l.find(ke=>ke.id===V.unit_id);return fe&&fe.book_id!==Q}))}catch(V){d(V.message||"Failed to delete book")}},De=async Q=>{if(We)try{const V=await us.create({...Q,book_id:We});i([...l,V]),b(!1),_(null)}catch(V){d(V.message||"Failed to create unit")}},M=async Q=>{if(le)try{const V=await us.update(le.id,Q);i(l.map(fe=>fe.id===le.id?V:fe)),b(!1),F(null)}catch(V){d(V.message||"Failed to update unit")}},H=async Q=>{if(confirm("Are you sure you want to delete this unit? This will also delete all associated lessons."))try{await us.delete(Q),i(l.filter(V=>V.id!==Q)),c(o.filter(V=>V.unit_id!==Q))}catch(V){d(V.message||"Failed to delete unit")}},re=async Q=>{if(E)try{const V=await $s.create({...Q,unit_id:E});c([...o,V]),u(!1),$(null)}catch(V){d(V.message||"Failed to create lesson")}},se=async Q=>{if(ne)try{const V=await $s.update(ne.id,Q);c(o.map(fe=>fe.id===ne.id?V:fe)),u(!1),me(null)}catch(V){d(V.message||"Failed to update lesson")}},ce=Q=>{_(Q),F(null),b(!0)},he=Q=>{$(Q),me(null),u(!0)},je=Q=>{z(Q),h(!0)},Xe=Q=>{F(Q),b(!0)};return p?s.jsx("div",{className:"flex items-center justify-center p-8",children:s.jsx("div",{className:"text-lg",children:"Loading educational hierarchy..."})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Educational Hierarchy"}),s.jsx("p",{className:"text-gray-600",children:"Manage grades, books, units, and lessons for this project"})]}),s.jsxs(D,{onClick:()=>{C(null),L(!0)},className:"flex items-center space-x-2",children:[s.jsx(nt,{className:"w-4 h-4"}),s.jsx("span",{children:"Add Grade"})]})]}),j&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:s.jsx("p",{className:"text-red-800",children:j})}),s.jsx("div",{className:"space-y-4",children:!t||t.length===0?s.jsx(K,{children:s.jsxs(Y,{className:"p-8 text-center",children:[s.jsx(Cn,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Grades Yet"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Start by creating the first grade for this project."}),s.jsx(D,{onClick:()=>{C(null),L(!0)},children:"Create First Grade"})]})}):(t||[]).map(Q=>s.jsx(Gp,{grade:Q,books:(n||[]).filter(V=>V.grade_id===Q.id),units:l||[],lessons:o||[],expanded:N.has(Q.id),onToggleExpansion:()=>G(Q.id),onEdit:()=>{C(Q),L(!0)},onDelete:()=>k(Q.id),onAddBook:()=>{Oe(Q.id),z(null),h(!0)},onAddUnit:ce,onEditBook:je,onDeleteBook:be,onAddLesson:he,onEditUnit:Xe,onDeleteUnit:H},Q.id))}),s.jsx(Kp,{isOpen:P,onClose:()=>{L(!1),C(null)},grade:v,onSubmit:v?q:ee}),s.jsx(Yp,{isOpen:f,onClose:()=>{h(!1),z(null),Oe(null)},book:A,onSubmit:A?oe:ie}),s.jsx(Xp,{isOpen:x,onClose:()=>{b(!1),F(null),_(null)},unit:le,onSubmit:le?M:De}),s.jsx(Zp,{isOpen:S,onClose:()=>{u(!1),me(null),$(null)},lesson:ne,onSubmit:ne?se:re})]})},Gp=({grade:e,books:t,units:r,lessons:n,expanded:a,onToggleExpansion:l,onEdit:i,onDelete:o,onAddBook:c,onAddUnit:p,onEditBook:g,onDeleteBook:j,onAddLesson:d,onEditUnit:N,onDeleteUnit:w})=>s.jsx(K,{children:s.jsxs(Y,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("button",{onClick:l,className:"p-1 hover:bg-gray-100 rounded",children:a?s.jsx(Io,{className:"w-4 h-4"}):s.jsx(Jt,{className:"w-4 h-4"})}),s.jsx(Cn,{className:"w-5 h-5 text-blue-600"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900",children:e.name}),e.description&&s.jsx("p",{className:"text-sm text-gray-600",children:e.description})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(X,{variant:"secondary",children:[typeof e.weight=="number"?e.weight.toFixed(1):"0.0","%"]}),s.jsxs(X,{variant:"secondary",children:[(t||[]).length," books"]}),s.jsxs("div",{className:"flex space-x-1",children:[s.jsx(D,{size:"sm",variant:"outline",onClick:i,children:s.jsx(zn,{className:"w-3 h-3"})}),s.jsx(D,{size:"sm",variant:"outline",onClick:c,children:s.jsx(nt,{className:"w-3 h-3"})}),s.jsx(D,{size:"sm",variant:"outline",onClick:o,children:s.jsx(mt,{className:"w-3 h-3"})})]})]})]}),a&&s.jsx("div",{className:"mt-4 border-t pt-4",children:!t||t.length===0?s.jsxs("div",{className:"text-center py-4",children:[s.jsx("p",{className:"text-gray-600 mb-2",children:"No books in this grade"}),s.jsx(D,{size:"sm",onClick:c,children:"Add Book"})]}):s.jsx("div",{className:"space-y-3",children:t.map(P=>s.jsx(qp,{book:P,units:(r||[]).filter(L=>L.book_id===P.id),lessons:n||[],onAddUnit:p,onEditBook:g,onDeleteBook:j,onAddLesson:d,onEditUnit:N,onDeleteUnit:w},P.id))})})]})}),qp=({book:e,units:t,lessons:r,onAddUnit:n,onEditBook:a,onDeleteBook:l,onAddLesson:i,onEditUnit:o,onDeleteUnit:c})=>{const[p,g]=m.useState(!1);return s.jsxs("div",{className:"ml-6 border-l-2 border-gray-200 pl-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>g(!p),className:"p-1 hover:bg-gray-100 rounded",children:p?s.jsx(Io,{className:"w-3 h-3"}):s.jsx(Jt,{className:"w-3 h-3"})}),s.jsx(om,{className:"w-4 h-4 text-green-600"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:e.name}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(X,{variant:"secondary",children:e.type}),s.jsxs(X,{variant:"secondary",children:[typeof e.weight=="number"?e.weight.toFixed(1):"0.0","%"]})]})]})]}),s.jsxs("div",{className:"flex space-x-1",children:[s.jsx(D,{size:"sm",variant:"outline",onClick:()=>a(e),children:s.jsx(zn,{className:"w-3 h-3"})}),s.jsx(D,{size:"sm",variant:"outline",onClick:()=>n(e.id),children:s.jsx(nt,{className:"w-3 h-3"})}),s.jsx(D,{size:"sm",variant:"outline",onClick:()=>l(e.id),children:s.jsx(mt,{className:"w-3 h-3"})})]})]}),p&&s.jsx("div",{className:"mt-3 space-y-2",children:!t||t.length===0?s.jsxs("div",{className:"text-center py-2",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"No units in this book"}),s.jsx(D,{size:"sm",onClick:()=>n(e.id),children:"Add Unit"})]}):t.map(j=>s.jsx(Qp,{unit:j,lessons:(r||[]).filter(d=>d.unit_id===j.id),onAddLesson:i,onEditUnit:o,onDeleteUnit:c},j.id))})]})},Qp=({unit:e,lessons:t,onAddLesson:r,onEditUnit:n,onDeleteUnit:a})=>{const[l,i]=m.useState(!1);return s.jsxs("div",{className:"ml-6 border-l-2 border-gray-200 pl-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>i(!l),className:"p-1 hover:bg-gray-100 rounded",children:l?s.jsx(Io,{className:"w-3 h-3"}):s.jsx(Jt,{className:"w-3 h-3"})}),s.jsx(Dn,{className:"w-4 h-4 text-purple-600"}),s.jsxs("div",{children:[s.jsx("h5",{className:"font-medium text-gray-900",children:e.name}),s.jsxs(X,{variant:"secondary",children:[typeof e.weight=="number"?e.weight.toFixed(1):"0.0","%"]})]})]}),s.jsxs("div",{className:"flex space-x-1",children:[s.jsx(D,{size:"sm",variant:"outline",onClick:()=>n(e),children:s.jsx(zn,{className:"w-3 h-3"})}),s.jsx(D,{size:"sm",variant:"outline",onClick:()=>r(e.id),children:s.jsx(nt,{className:"w-3 h-3"})}),s.jsx(D,{size:"sm",variant:"outline",onClick:()=>a(e.id),children:s.jsx(mt,{className:"w-3 h-3"})})]})]}),l&&s.jsx("div",{className:"mt-3 space-y-2",children:!t||t.length===0?s.jsxs("div",{className:"text-center py-2",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"No lessons in this unit"}),s.jsx(D,{size:"sm",onClick:()=>r(e.id),children:"Add Lesson"})]}):t.map(o=>s.jsxs("div",{className:"ml-6 flex items-center space-x-2",children:[s.jsx(cm,{className:"w-3 h-3 text-orange-600"}),s.jsx("span",{className:"text-sm text-gray-900",children:o.name}),s.jsxs(X,{variant:"secondary",children:[typeof o.weight=="number"?o.weight.toFixed(1):"0.0","%"]})]},o.id))})]})},Kp=({isOpen:e,onClose:t,grade:r,onSubmit:n})=>{const[a,l]=m.useState({name:(r==null?void 0:r.name)||"",description:(r==null?void 0:r.description)||"",weight:typeof(r==null?void 0:r.weight)=="number"?r.weight:0});m.useEffect(()=>{l(r?{name:r.name,description:r.description||"",weight:typeof r.weight=="number"?r.weight:0}:{name:"",description:"",weight:0})},[r]);const i=o=>{o.preventDefault(),n(a)};return s.jsx(Ke,{isOpen:e,onClose:t,title:r?"Edit Grade":"Create Grade",children:s.jsxs("form",{onSubmit:i,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),s.jsx("input",{type:"text",value:a.name,onChange:o=>l({...a,name:o.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),s.jsx("textarea",{value:a.description,onChange:o=>l({...a,description:o.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:3})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Weight (%)"}),s.jsx("input",{type:"number",step:"0.1",min:"0",max:"100",value:a.weight,onChange:o=>l({...a,weight:parseFloat(o.target.value)||0}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(D,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),s.jsx(D,{type:"submit",children:r?"Update":"Create"})]})]})})},Yp=({isOpen:e,onClose:t,book:r,onSubmit:n})=>{const[a,l]=m.useState({name:(r==null?void 0:r.name)||"",type:(r==null?void 0:r.type)||"student",description:(r==null?void 0:r.description)||"",weight:typeof(r==null?void 0:r.weight)=="number"?r.weight:0});m.useEffect(()=>{l(r?{name:r.name,type:r.type,description:r.description||"",weight:typeof r.weight=="number"?r.weight:0}:{name:"",type:"student",description:"",weight:0})},[r]);const i=o=>{o.preventDefault(),n(a)};return s.jsx(Ke,{isOpen:e,onClose:t,title:r?"Edit Book":"Create Book",children:s.jsxs("form",{onSubmit:i,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),s.jsx("input",{type:"text",value:a.name,onChange:o=>l({...a,name:o.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Type"}),s.jsxs("select",{value:a.type,onChange:o=>l({...a,type:o.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[s.jsx("option",{value:"student",children:"Student Book"}),s.jsx("option",{value:"teacher",children:"Teacher Guide"}),s.jsx("option",{value:"practice",children:"Practice Book"}),s.jsx("option",{value:"digital",children:"Digital"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),s.jsx("textarea",{value:a.description,onChange:o=>l({...a,description:o.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:3})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Weight (%)"}),s.jsx("input",{type:"number",step:"0.1",min:"0",max:"100",value:a.weight,onChange:o=>l({...a,weight:parseFloat(o.target.value)||0}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(D,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),s.jsx(D,{type:"submit",children:r?"Update":"Create"})]})]})})},Xp=({isOpen:e,onClose:t,unit:r,onSubmit:n})=>{const[a,l]=m.useState({name:(r==null?void 0:r.name)||"",description:(r==null?void 0:r.description)||"",weight:typeof(r==null?void 0:r.weight)=="number"?r.weight:0});m.useEffect(()=>{l(r?{name:r.name,description:r.description||"",weight:typeof r.weight=="number"?r.weight:0}:{name:"",description:"",weight:0})},[r]);const i=o=>{o.preventDefault(),n(a)};return s.jsx(Ke,{isOpen:e,onClose:t,title:r?"Edit Unit":"Create Unit",children:s.jsxs("form",{onSubmit:i,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),s.jsx("input",{type:"text",value:a.name,onChange:o=>l({...a,name:o.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),s.jsx("textarea",{value:a.description,onChange:o=>l({...a,description:o.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:3})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Weight (%)"}),s.jsx("input",{type:"number",step:"0.1",min:"0",max:"100",value:a.weight,onChange:o=>l({...a,weight:parseFloat(o.target.value)||0}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(D,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),s.jsx(D,{type:"submit",children:r?"Update":"Create"})]})]})})},Zp=({isOpen:e,onClose:t,lesson:r,onSubmit:n})=>{const[a,l]=m.useState({name:(r==null?void 0:r.name)||"",description:(r==null?void 0:r.description)||"",weight:typeof(r==null?void 0:r.weight)=="number"?r.weight:0});m.useEffect(()=>{l(r?{name:r.name,description:r.description||"",weight:typeof r.weight=="number"?r.weight:0}:{name:"",description:"",weight:0})},[r]);const i=o=>{o.preventDefault(),n(a)};return s.jsx(Ke,{isOpen:e,onClose:t,title:r?"Edit Lesson":"Create Lesson",children:s.jsxs("form",{onSubmit:i,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),s.jsx("input",{type:"text",value:a.name,onChange:o=>l({...a,name:o.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),s.jsx("textarea",{value:a.description,onChange:o=>l({...a,description:o.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:3})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Weight (%)"}),s.jsx("input",{type:"number",step:"0.1",min:"0",max:"100",value:a.weight,onChange:o=>l({...a,weight:parseFloat(o.target.value)||0}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(D,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),s.jsx(D,{type:"submit",children:r?"Update":"Create"})]})]})})};function Jp({project:e,onBack:t,onUpdate:r,categories:n}){const{state:a,dispatch:l}=dr(),[i,o]=m.useState("overview"),[c,p]=m.useState(!1),[g,j]=m.useState(!1),[d,N]=m.useState([]),[w,P]=m.useState([]),[L,f]=m.useState([]),[h,x]=m.useState([]),[b,S]=m.useState([]),[u,v]=m.useState([]),[C,A]=m.useState([]),[z,le]=m.useState([]),[F,ne]=m.useState([]),[me,ye]=m.useState([]),[Oe,We]=m.useState([]),[_,E]=m.useState(!1),[$,B]=m.useState(!1),[G,ee]=m.useState(!1),[q,k]=m.useState(e),[ie,oe]=m.useState([]),[be,De]=m.useState([]),[M,H]=m.useState([]),[re,se]=m.useState([]),[ce,he]=m.useState(null),[je,Xe]=m.useState(null),[Q,V]=m.useState(!1),fe=q.progress!==void 0?{progress:q.progress,completedWeight:q.progress,totalWeight:100}:Up(q,u),ke=q.current_stage_id?me.find(O=>O.id===q.current_stage_id):null;m.useEffect(()=>{(async()=>{ee(!0);try{const[de,ue,Se,y,pe,Z,ve,st,xt,qe,$r,il,ol,cl,dl]=await Promise.all([Ue.getById(e.id),Ue.getMembers(e.id),Ue.getTeams(e.id),_e.getMembers(),_e.getTeams(),_e.getTeams(),ze.getAll(),ss.getAll(),Ue.getAll(),Ot.getAll(),Ps.getAll(),cs.getAll(),ds.getAll(),us.getAll(),$s.getAll()]);k(de),N(ue),P(Se),f(y),x(pe),S(Z),v(ve.filter(ul=>ul.project_id===parseInt(e.id))),A(y),le(st),ne(xt),ye(qe),We($r),oe(il),De(ol),H(cl),se(dl)}catch(de){console.error("Failed to fetch project data:",de)}finally{ee(!1)}})()},[e.id]);const T=async(O,de="member")=>{try{await Ue.addMember(e.id,{user_id:O,user_type:"team",role:de});const ue=await Ue.getMembers(e.id);N(ue),E(!1)}catch(ue){console.error("Failed to add member:",ue)}},ae=async(O,de="member")=>{try{await Ue.addTeam(e.id,{team_id:O,role:de});const[ue,Se]=await Promise.all([Ue.getMembers(e.id),Ue.getTeams(e.id)]);N(ue),P(Se),B(!1)}catch(ue){console.error("Failed to add team:",ue)}},xe=async O=>{try{await Ue.removeMember(e.id,O);const de=await Ue.getMembers(e.id);N(de)}catch(de){console.error("Failed to remove member:",de)}},Pe=async O=>{try{await Ue.removeTeam(e.id,O);const[de,ue]=await Promise.all([Ue.getMembers(e.id),Ue.getTeams(e.id)]);N(de),P(ue)}catch(de){console.error("Failed to remove team:",de)}},Fe=async O=>{try{const de=O.status?hs(O.status):0;let ue="";if(O.gradeId){const ve=ie.find(st=>st.id===parseInt(O.gradeId||"0"));if(ve&&(ue=ve.name,O.bookId)){const st=be.find(xt=>xt.id===parseInt(O.bookId||"0"));if(st&&(ue+=` > ${st.name}`,O.unitId)){const xt=M.find(qe=>qe.id===parseInt(O.unitId||"0"));if(xt&&(ue+=` > ${xt.name}`,O.lessonId)){const qe=re.find($r=>$r.id===parseInt(O.lessonId||"0"));qe&&(ue+=` > ${qe.name}`)}}}}const Se=(O.skills||[]).map(ve=>{const st=z.find(xt=>xt.name===ve);return st?st.id:null}).filter(ve=>ve!==null),y={name:O.name||"",description:O.description||"",project_id:parseInt(e.id),category_stage_id:parseInt(O.stageId||"1"),status:O.status||"not-started",priority:O.priority||"medium",start_date:O.startDate||new Date().toISOString().split("T")[0],end_date:O.endDate||new Date(Date.now()+7*24*60*60*1e3).toISOString().split("T")[0],estimated_hours:O.estimatedHours||8,assignees:O.assignees||[],teamAssignees:O.teamAssignees||[],skills:Se,component_path:ue,grade_id:O.gradeId?parseInt(O.gradeId):null,book_id:O.bookId?parseInt(O.bookId):null,unit_id:O.unitId?parseInt(O.unitId):null,lesson_id:O.lessonId?parseInt(O.lessonId):null};console.log(" Creating task from ProjectDetails:",y),console.log(" Educational hierarchy IDs being sent:",{grade_id:y.grade_id,book_id:y.book_id,unit_id:y.unit_id,lesson_id:y.lesson_id,component_path:y.component_path});const pe=await ze.create(y),Z=await ze.getAll();v(Z.filter(ve=>ve.project_id===parseInt(e.id))),console.log(" Task created successfully from ProjectDetails:",pe),p(!1)}catch(de){console.error(" Failed to create task from ProjectDetails:",de)}},Ze=async O=>{try{ee(!0);const de=await Ue.update(e.id,O),ue={...e,...de,start_date:O.start_date||e.start_date,end_date:O.end_date||e.end_date};r&&r(ue),l({type:"UPDATE_PROJECT",payload:ue}),j(!1),console.log(" Project updated successfully:",de)}catch(de){console.error(" Failed to update project:",de)}finally{ee(!1)}},Me=[{key:"overview",label:"Overview",icon:_s},{key:"educational-hierarchy",label:"Educational Hierarchy",icon:Cn},{key:"tasks",label:"Tasks",icon:Tt},{key:"timeline",label:"Timeline",icon:ft},{key:"team",label:"Team",icon:Le}],Ct=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[s.jsx(K,{children:s.jsx(Y,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 rounded-lg bg-blue-50",children:s.jsx(_s,{className:"w-6 h-6 text-blue-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Progress"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[fe.progress,"%"]})]})]})})}),s.jsx(K,{children:s.jsx(Y,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 rounded-lg bg-green-50",children:s.jsx(Tt,{className:"w-6 h-6 text-green-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Tasks"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:u.length})]})]})})}),s.jsx(K,{children:s.jsx(Y,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 rounded-lg bg-purple-50",children:s.jsx(Le,{className:"w-6 h-6 text-purple-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Team"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d.length})]})]})})}),s.jsx(K,{children:s.jsx(Y,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 rounded-lg bg-orange-50",children:s.jsx(ir,{className:"w-6 h-6 text-orange-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Days Left"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Math.ceil((new Date(e.end_date||e.endDate||"").getTime()-new Date().getTime())/(1e3*60*60*24))})]})]})})})]}),s.jsxs(K,{children:[s.jsx(Te,{children:s.jsxs(Ee,{className:"flex items-center",children:[s.jsx(ts,{className:"w-5 h-5 mr-2 text-blue-600"}),"Current Stage"]})}),s.jsx(Y,{children:ke?s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-900",children:ke.name}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:ke.description}),s.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx(_s,{className:"w-4 h-4 mr-1"}),"Order: ",ke.order_index||ke.template_order||"N/A"]}),ke.is_active!==void 0&&s.jsx(X,{variant:ke.is_active?"success":"default",size:"sm",children:ke.is_active?"Active":"Inactive"})]})]}),s.jsx("div",{className:"text-right",children:s.jsx(X,{variant:"primary",children:"Current"})})]}):s.jsxs("div",{className:"text-center py-4",children:[s.jsx(ts,{className:"w-8 h-8 text-gray-300 mx-auto mb-2"}),s.jsx("p",{className:"text-gray-500",children:"No current stage set"}),s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Edit the project to select a stage"})]})})]}),s.jsxs(K,{children:[s.jsx(Te,{children:s.jsx(Ee,{children:"Project Description"})}),s.jsxs(Y,{children:[s.jsx("p",{className:"text-gray-700",children:e.description}),s.jsxs("div",{className:"mt-4 flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx(ft,{className:"w-4 h-4 mr-1"}),"Start: ",new Date(e.start_date||e.startDate||"").toLocaleDateString()]}),s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx(ft,{className:"w-4 h-4 mr-1"}),"End: ",new Date(e.end_date||e.endDate||"").toLocaleDateString()]}),s.jsx(X,{variant:e.status==="active"?"primary":e.status==="completed"?"success":e.status==="on-hold"?"warning":"default",children:e.status})]})]})]})]}),I=()=>{var Se;const O=[];O.push({id:"project-start",type:"milestone",title:"Project Start",date:new Date(e.start_date||e.startDate||""),status:"completed",description:"Project officially started"}),(Se=e.stages)==null||Se.forEach(y=>{const pe=zi(y.id,u);O.push({id:y.id,type:"stage",title:y.name,date:new Date(y.startDate),endDate:new Date(y.endDate),status:y.status,progress:pe.progress,description:y.description,weight:y.weight})}),u.filter(y=>y.priority==="high"||y.priority==="urgent").forEach(y=>{O.push({id:y.id,type:"task",title:y.name,date:new Date(y.startDate),endDate:new Date(y.endDate),status:y.status,progress:y.progress,description:y.description,priority:y.priority,assignees:y.assignees})}),O.push({id:"project-end",type:"milestone",title:"Project Completion",date:new Date(e.end_date||e.endDate||""),status:e.status==="completed"?"completed":"pending",description:"Planned project completion date"}),O.sort((y,pe)=>y.date.getTime()-pe.date.getTime());const de=(y,pe)=>{if(pe==="milestone")return y==="completed"?"bg-green-500":"bg-gray-400";switch(y){case"completed":return"bg-green-500";case"in-progress":return"bg-blue-500";case"under-review":return"bg-yellow-500";case"not-started":return"bg-gray-400";case"blocked":return"bg-red-500";default:return"bg-gray-400"}},ue=y=>new Date(y.endDate||y.date)<new Date&&y.status!=="completed"&&y.type!=="milestone";return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Project Timeline"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Track project milestones, stages, and key tasks"})]}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-2"}),s.jsx("span",{children:"Completed"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full mr-2"}),s.jsx("span",{children:"In Progress"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-3 h-3 bg-gray-400 rounded-full mr-2"}),s.jsx("span",{children:"Not Started"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full mr-2"}),s.jsx("span",{children:"Overdue"})]})]})})]}),s.jsx(K,{children:s.jsx(Y,{className:"p-6",children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute left-6 top-0 bottom-0 w-0.5 bg-gray-200"}),s.jsx("div",{className:"space-y-8",children:O.map((y,pe)=>s.jsxs("div",{className:"relative flex items-start",children:[s.jsxs("div",{className:`relative z-10 w-12 h-12 rounded-full ${de(y.status,y.type)} flex items-center justify-center`,children:[y.type==="milestone"&&s.jsx(ts,{className:"w-5 h-5 text-white"}),y.type==="stage"&&s.jsx(_s,{className:"w-5 h-5 text-white"}),y.type==="task"&&s.jsx(Tt,{className:"w-5 h-5 text-white"})]}),s.jsx("div",{className:"ml-6 flex-1",children:s.jsx("div",{className:`p-4 rounded-lg border-2 ${ue(y)?"border-red-200 bg-red-50":"border-gray-200 bg-white"}`,children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("h4",{className:"font-semibold text-gray-900",children:y.title}),y.type==="stage"&&y.weight&&s.jsxs(X,{variant:"secondary",size:"sm",children:[y.weight,"% weight"]}),y.priority&&s.jsx(X,{variant:y.priority==="urgent"?"danger":y.priority==="high"?"warning":"primary",size:"sm",children:y.priority}),ue(y)&&s.jsxs(X,{variant:"danger",size:"sm",children:[s.jsx(_t,{className:"w-3 h-3 mr-1"}),"Overdue"]})]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:y.description}),s.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-500",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(ft,{className:"w-4 h-4 mr-1"}),y.date.toLocaleDateString(),y.endDate&&` - ${y.endDate.toLocaleDateString()}`]}),y.assignees&&y.assignees.length>0&&s.jsxs("div",{className:"flex items-center",children:[s.jsx(Le,{className:"w-4 h-4 mr-1"}),y.assignees.length," assigned"]})]}),(y.type==="stage"||y.type==="task")&&s.jsxs("div",{className:"mt-3",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[s.jsx("span",{className:"text-gray-600",children:"Progress"}),s.jsxs("span",{className:"font-medium",children:[y.progress,"%"]})]}),s.jsx(gt,{value:y.progress,showLabel:!1})]})]}),s.jsx(X,{variant:y.status==="completed"?"success":y.status==="in-progress"?"primary":y.status==="under-review"?"warning":y.status==="blocked"?"danger":"default",children:y.status.replace("-"," ")})]})})})]},y.id))})]})})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx(K,{children:s.jsx(Y,{className:"p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:O.filter(y=>y.status==="completed").length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Completed Items"})]})})}),s.jsx(K,{children:s.jsx(Y,{className:"p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:O.filter(y=>y.status==="in-progress").length}),s.jsx("div",{className:"text-sm text-gray-600",children:"In Progress"})]})})}),s.jsx(K,{children:s.jsx(Y,{className:"p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-red-600",children:O.filter(y=>ue(y)).length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Overdue Items"})]})})})]})]})},W=()=>s.jsx("div",{className:"space-y-6",children:e.stages&&e.stages.length>0?e.stages.map(O=>{const de=u.filter(Se=>Se.stageId===O.id),ue=zi(O.id,u);return s.jsxs(K,{children:[s.jsx(Te,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(Ee,{className:"flex items-center",children:["Stage ",O.order,": ",O.name,s.jsxs(X,{variant:"secondary",size:"sm",className:"ml-2",children:[O.weight,"% weight"]})]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:O.description})]}),s.jsx(X,{variant:O.status==="completed"?"success":O.status==="in-progress"?"primary":O.status==="under-review"?"warning":"default",children:O.status.replace("-"," ")})]})}),s.jsxs(Y,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx(ft,{className:"w-4 h-4 mr-2"}),"Start: ",new Date(O.startDate).toLocaleDateString()]}),s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx(ft,{className:"w-4 h-4 mr-2"}),"End: ",new Date(O.endDate).toLocaleDateString()]}),s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx(Tt,{className:"w-4 h-4 mr-2"}),de.length," tasks"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Progress"}),s.jsxs("span",{className:"font-medium",children:[ue.progress,"%"]})]}),s.jsx(gt,{value:ue.progress})]}),de.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h5",{className:"font-medium text-gray-900",children:"Recent Tasks:"}),de.slice(0,3).map(Se=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[s.jsx("span",{className:"text-sm text-gray-700",children:Se.name}),s.jsx(X,{variant:Se.status==="completed"?"success":Se.status==="in-progress"?"primary":Se.status==="under-review"?"warning":Se.status==="blocked"?"danger":"default",size:"sm",children:Se.status.replace("-"," ")})]},Se.id)),de.length>3&&s.jsxs("p",{className:"text-xs text-gray-500",children:["+",de.length-3," more tasks"]})]})]})]},O.id)}):s.jsx(K,{children:s.jsxs(Y,{className:"p-8 text-center",children:[s.jsx(ts,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Stages Defined"}),s.jsx("p",{className:"text-gray-600",children:"This project doesn't have any stages configured yet."})]})})}),Ne=()=>{if(ce)return s.jsx(ym,{taskId:ce,onBack:()=>he(null)});const O=Z=>{Xe(Z),V(!0)},de=async Z=>{try{if(je){const ve={name:Z.name,description:Z.description,project_id:parseInt(Z.projectId||"1"),category_stage_id:parseInt(Z.stageId||"1"),status:Z.status,priority:Z.priority,start_date:Z.startDate,end_date:Z.endDate,estimated_hours:parseInt(String(Z.estimatedHours||0)),actual_hours:parseInt(String(Z.actualHours||0)),assignees:Z.assignees||[],skills:Z.skills,grade_id:Z.gradeId?parseInt(Z.gradeId):null,book_id:Z.bookId?parseInt(Z.bookId):null,unit_id:Z.unitId?parseInt(Z.unitId):null,lesson_id:Z.lessonId?parseInt(Z.lessonId):null,component_path:Z.componentPath};await ze.update(je.id,ve);const st=await ze.getAll();v(st.filter(xt=>xt.project_id===parseInt(e.id)))}V(!1),Xe(null)}catch(ve){console.error(" Failed to update task:",ve)}},ue=async Z=>{if(confirm(`Are you sure you want to delete the task "${Z.name}"? This action cannot be undone.`))try{await ze.delete(Z.id);const ve=await ze.getAll();v(ve.filter(st=>st.project_id===parseInt(e.id))),console.log(" Task deleted successfully:",Z.name)}catch(ve){console.error(" Delete task error:",ve)}},Se=Z=>{switch(Z){case"not-started":return"default";case"in-progress":return"primary";case"under-review":return"warning";case"completed":return"success";case"blocked":return"danger";default:return"default"}},y=Z=>{switch(Z){case"low":return"default";case"medium":return"primary";case"high":return"warning";case"urgent":return"danger";default:return"default"}},pe=Z=>{const ve=Z.end_date||Z.endDate;return ve?new Date(ve)<new Date&&Z.status!=="completed":!1};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Project Tasks"}),s.jsx(D,{icon:s.jsx(nt,{className:"w-4 h-4"}),onClick:()=>p(!0),children:"Add Task"})]}),u.length>0?s.jsx(K,{children:s.jsx(Y,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Task Name"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stage"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Priority"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assignees"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Due Date"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Progress"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(Z=>{const ve=C.filter(qe=>Z.assignees&&Z.assignees.includes(qe.id)),st=pe(Z),xt=me.find(qe=>qe.id===Z.category_stage_id||Z.stage_id);return s.jsxs("tr",{className:`hover:bg-gray-50 ${st?"bg-red-50":""}`,children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsxs("div",{className:"text-sm font-medium text-gray-900 flex items-center",children:[Z.name,st&&s.jsx(_t,{className:"w-4 h-4 text-red-500 ml-2"})]}),s.jsxs("div",{className:"text-sm text-gray-500",children:[Z.component_path&&s.jsxs("div",{className:"text-xs text-purple-600 mt-1 bg-purple-100 p-1 rounded-md",children:[" ",Z.component_path]}),Z.description&&s.jsx("div",{className:"mt-1",children:Z.description})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm text-gray-900",children:xt?s.jsx("div",{className:"font-medium text-blue-600",children:xt.name}):s.jsx("span",{className:"text-gray-400",children:"Unknown Stage"})})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx(X,{variant:Se(Z.status),children:Z.status.replace("-"," ")})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx(X,{variant:y(Z.priority),children:Z.priority})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"space-y-1",children:[ve.length>0&&s.jsxs("div",{className:"flex flex-wrap gap-1",children:[ve.slice(0,3).map(qe=>s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:qe.name},qe.id)),ve.length>3&&s.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600",children:["+",ve.length-3," more"]})]}),ve.length===0&&s.jsx("span",{className:"text-xs text-gray-400",children:"No assignees"})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(ft,{className:"w-4 h-4 mr-1 text-gray-400"}),Z.end_date||Z.endDate?new Date(Z.end_date||Z.endDate||"").toLocaleDateString():"No due date"]})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2 mr-2",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${hs(Z.status)}%`}})}),s.jsxs("span",{className:"text-sm text-gray-600",children:[hs(Z.status),"%"]})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(D,{variant:"ghost",size:"sm",onClick:qe=>{qe.stopPropagation(),he(Z.id)},title:"View Details",children:s.jsx(Gs,{className:"w-4 h-4"})}),s.jsx(D,{variant:"ghost",size:"sm",onClick:qe=>{qe.stopPropagation(),O(Z)},title:"Edit Task",children:s.jsx(Cs,{className:"w-4 h-4"})}),s.jsx(D,{variant:"ghost",size:"sm",onClick:qe=>{qe.stopPropagation(),ue(Z)},title:"Delete Task",className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:s.jsx(mt,{className:"w-4 h-4"})})]})]})]},Z.id)})})]})})})}):s.jsx(K,{children:s.jsxs(Y,{className:"p-8 text-center",children:[s.jsx(Tt,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Tasks Yet"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Start by creating your first task for this project."}),s.jsx(D,{icon:s.jsx(nt,{className:"w-4 h-4"}),onClick:()=>p(!0),children:"Create First Task"})]})}),s.jsx(Ha,{isOpen:Q,onClose:()=>{V(!1),Xe(null)},onSubmit:de,users:C,teams:b,skills:z,projects:F,stages:me,grades:ie,books:be,units:M,lessons:re,editingTask:je})]})},Je=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Project Team"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs(D,{onClick:()=>B(!0),className:"flex items-center space-x-2",variant:"outline",children:[s.jsx(Le,{className:"w-4 h-4"}),s.jsx("span",{children:"Add Team"})]}),s.jsxs(D,{onClick:()=>E(!0),className:"flex items-center space-x-2",children:[s.jsx(Ba,{className:"w-4 h-4"}),s.jsx("span",{children:"Add Member"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"text-md font-medium text-gray-900",children:"Assigned Teams"}),w.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:w.map(O=>s.jsx(K,{children:s.jsxs(Y,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-lg flex items-center justify-center text-white",children:s.jsx(Le,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h5",{className:"font-medium text-gray-900",children:O.team_name}),s.jsx(X,{variant:"secondary",className:"text-xs",children:O.role})]})]}),s.jsx(D,{variant:"ghost",size:"sm",onClick:()=>Pe(O.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:s.jsx(Li,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Members"}),s.jsxs("span",{className:"font-medium",children:[O.member_count," / ",O.max_capacity]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${Math.min(O.member_count/O.max_capacity*100,100)}%`}})})]})]})},O.id))}):s.jsxs("div",{className:"text-center py-6 bg-gray-50 rounded-lg",children:[s.jsx(Le,{className:"w-8 h-8 text-gray-300 mx-auto mb-2"}),s.jsx("p",{className:"text-gray-500",children:"No teams assigned to this project"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"text-md font-medium text-gray-900",children:"Individual Members"}),G?s.jsx("div",{className:"text-center py-8",children:s.jsx("div",{className:"text-gray-500",children:"Loading team members..."})}):d.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(O=>{var y,pe,Z;const de=u.filter(ve=>ve.assignees&&ve.assignees.includes(O.user_id||O.team_member_id)),ue=de.filter(ve=>ve.status==="completed"),Se=de.length>0?Math.round(ue.length/de.length*100):0;return s.jsx(K,{children:s.jsxs(Y,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center text-white font-semibold text-lg",children:((y=O.name)==null?void 0:y.charAt(0))||"U"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:O.name||"Unknown User"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(X,{variant:"secondary",children:O.role||"member"}),O.skills&&s.jsx("p",{className:"text-sm text-gray-600",children:((Z=(pe=O.skills).join)==null?void 0:Z.call(pe,", "))||O.skills})]})]})]}),s.jsx(D,{variant:"ghost",size:"sm",onClick:()=>xe(O.project_member_id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:s.jsx(Li,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Tasks Assigned"}),s.jsx("span",{className:"font-medium",children:de.length})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Completed"}),s.jsx("span",{className:"font-medium text-green-600",children:ue.length})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Completion Rate"}),s.jsxs("span",{className:"font-medium",children:[Se,"%"]})]}),s.jsx(gt,{value:Se})]})]})]})},O.project_member_id)})}):s.jsx(K,{children:s.jsxs(Y,{className:"p-8 text-center",children:[s.jsx(Le,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Team Members"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"No team members have been assigned to this project yet."}),s.jsxs(D,{onClick:()=>E(!0),className:"flex items-center space-x-2",children:[s.jsx(Ba,{className:"w-4 h-4"}),s.jsx("span",{children:"Add First Member"})]})]})})]})]});return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs(D,{variant:"ghost",onClick:t,children:[s.jsx(Mo,{className:"w-4 h-4 mr-2"}),"Back to Projects"]}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:q.name}),s.jsx("p",{className:"text-gray-600",children:q.category})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(X,{variant:q.status==="active"?"primary":q.status==="completed"?"success":q.status==="on-hold"?"warning":"default",children:q.status}),s.jsxs(D,{variant:"outline",size:"sm",onClick:()=>j(!0),children:[s.jsx(Cs,{className:"w-4 h-4 mr-2"}),"Edit Project"]})]})]}),s.jsx(K,{children:s.jsx(Y,{className:"p-6",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Overall Progress"}),s.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[fe.progress,"%"]})]}),s.jsx(gt,{value:fe.progress})]})})}),s.jsx("div",{className:"border-b border-gray-200",children:s.jsx("nav",{className:"-mb-px flex space-x-8",children:Me.map(O=>s.jsxs("button",{onClick:()=>o(O.key),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${i===O.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[s.jsx(O.icon,{className:"w-4 h-4"}),s.jsx("span",{children:O.label})]},O.key))})}),s.jsxs("div",{children:[i==="overview"&&Ct(),i==="stages"&&W(),i==="educational-hierarchy"&&s.jsx(Wp,{projectId:Number(q.id)}),i==="tasks"&&Ne(),i==="timeline"&&I(),i==="team"&&Je()]}),s.jsx(Ha,{isOpen:c,onClose:()=>p(!1),onSubmit:Fe,users:C,teams:b,skills:z,projects:F,stages:me,grades:ie,books:be,units:M,lessons:re}),s.jsx(Vp,{isOpen:g,onClose:()=>j(!1),onSubmit:Ze,project:q,categories:n||Oe}),s.jsx(tf,{isOpen:_,onClose:()=>E(!1),onSubmit:T,availableMembers:L,projectMembers:d}),s.jsx(ef,{isOpen:$,onClose:()=>B(!1),onSubmit:ae,availableTeams:h,projectTeams:w})]})}function ef({isOpen:e,onClose:t,onSubmit:r,availableTeams:n,projectTeams:a}){const[l,i]=m.useState(null),[o,c]=m.useState("member"),p=a.map(d=>d.team_id),g=n.filter(d=>!p.includes(d.id)),j=d=>{d.preventDefault(),l&&(r(l,o),i(null),c("member"))};return s.jsx(Ke,{isOpen:e,onClose:t,title:"Add Team to Project",children:s.jsxs("form",{onSubmit:j,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Team"}),s.jsxs("select",{value:l||"",onChange:d=>i(Number(d.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[s.jsx("option",{value:"",children:"Choose a team..."}),g.map(d=>s.jsxs("option",{value:d.id,children:[d.name," - ",d.member_count||0," members"]},d.id))]}),g.length===0&&s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"All teams are already assigned to this project."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),s.jsxs("select",{value:o,onChange:d=>c(d.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"member",children:"Member"}),s.jsx("option",{value:"admin",children:"Admin"}),s.jsx("option",{value:"owner",children:"Owner"}),s.jsx("option",{value:"viewer",children:"Viewer"})]})]}),s.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:s.jsxs("p",{className:"text-sm text-blue-800",children:[s.jsx("strong",{children:"Note:"})," When you assign a team to this project, all team members will automatically be added as individual project members."]})}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx(D,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),s.jsx(D,{type:"submit",disabled:!l||g.length===0,children:"Add Team"})]})]})})}function tf({isOpen:e,onClose:t,onSubmit:r,availableMembers:n,projectMembers:a}){const[l,i]=m.useState(null),[o,c]=m.useState("member"),p=a.map(d=>d.user_id||d.team_member_id),g=n.filter(d=>!p.includes(d.id)),j=d=>{d.preventDefault(),l&&(r(l,o),i(null),c("member"))};return s.jsx(Ke,{isOpen:e,onClose:t,title:"Add Team Member",children:s.jsxs("form",{onSubmit:j,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Team Member"}),s.jsxs("select",{value:l||"",onChange:d=>i(Number(d.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[s.jsx("option",{value:"",children:"Choose a team member..."}),g.map(d=>s.jsxs("option",{value:d.id,children:[d.name," (",d.email,")"]},d.id))]}),g.length===0&&s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"All team members are already assigned to this project."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),s.jsxs("select",{value:o,onChange:d=>c(d.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"member",children:"Member"}),s.jsx("option",{value:"admin",children:"Admin"}),s.jsx("option",{value:"owner",children:"Owner"}),s.jsx("option",{value:"viewer",children:"Viewer"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx(D,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),s.jsx(D,{type:"submit",disabled:!l||g.length===0,children:"Add Member"})]})]})})}function sf(){const[e,t]=m.useState("grid"),[r,n]=m.useState(!1),[a,l]=m.useState(null),[i,o]=m.useState("all"),[c,p]=m.useState("all"),[g,j]=m.useState([]),[d,N]=m.useState([]),[w,P]=m.useState(!0),[L,f]=m.useState(null);m.useEffect(()=>{(async()=>{try{P(!0),f(null);const[v,C]=await Promise.all([Ue.getAll(),Ps.getAll()]);j(v),N(C)}catch(v){console.error("ProjectManager fetch error:",v),f(v.message||"Failed to load projects data")}finally{P(!1)}})()},[]);const h=g.filter(u=>!(i!=="all"&&u.category!==i||c!=="all"&&u.status!==c)),x=async u=>{var v;try{f(null);const C={name:u.name||"",description:u.description||"",category_id:u.category_id||((v=d[0])==null?void 0:v.id),current_stage_id:u.currentStageId||null,start_date:u.start_date||new Date().toISOString().split("T")[0],end_date:u.end_date||new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0],status:"planning",progress:0};console.log(" Creating project:",C);const A=await Ue.create(C);j(z=>[...z,A]),n(!1),console.log(" Project created successfully:",A)}catch(C){console.error(" Create project error:",C),f(C.message||"Failed to create project")}},b=async u=>{try{if(f(null),!confirm("Are you sure you want to delete this project? This action cannot be undone."))return;console.log(" Deleting project:",u),await Ue.delete(u),j(v=>v.filter(C=>C.id!==u)),(a==null?void 0:a.id)===u&&l(null),console.log(" Project deleted successfully")}catch(v){console.error(" Delete project error:",v),f(v.message||"Failed to delete project")}},S=u=>{switch(u){case"active":return"primary";case"completed":return"success";case"on-hold":return"warning";case"cancelled":return"danger";default:return"default"}};return a?s.jsx(Jp,{project:a,onBack:()=>l(null),onUpdate:u=>{l(u),j(v=>v.map(C=>C.id===u.id?u:C))},categories:d}):w?s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Projects"}),s.jsx("p",{className:"text-gray-600",children:"Manage and track your project portfolio"})]}),s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Ln,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-blue-600"}),s.jsx("p",{className:"text-gray-600",children:"Loading projects..."})]})})]}):L?s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Projects"}),s.jsx("p",{className:"text-gray-600",children:"Manage and track your project portfolio"})]}),s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx(_t,{className:"w-8 h-8 mx-auto mb-4 text-red-600"}),s.jsx("p",{className:"text-red-600 mb-4",children:L}),s.jsx(D,{onClick:()=>window.location.reload(),children:"Try Again"})]})})]}):s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Projects"}),s.jsx("p",{className:"text-gray-600",children:"Manage and track your project portfolio"})]}),s.jsx(D,{icon:s.jsx(nt,{className:"w-4 h-4"}),onClick:()=>n(!0),children:"New Project"})]}),s.jsxs("div",{className:"flex items-center justify-between bg-white p-4 rounded-lg border border-gray-200",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(lp,{className:"w-4 h-4 text-gray-500"}),s.jsxs("select",{value:i,onChange:u=>o(u.target.value),className:"border border-gray-300 rounded px-3 py-1 text-sm",children:[s.jsx("option",{value:"all",children:"All Categories"}),d.map(u=>s.jsx("option",{value:u.name,children:u.name},u.id))]})]}),s.jsxs("select",{value:c,onChange:u=>p(u.target.value),className:"border border-gray-300 rounded px-3 py-1 text-sm",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"planning",children:"Planning"}),s.jsx("option",{value:"active",children:"Active"}),s.jsx("option",{value:"on-hold",children:"On Hold"}),s.jsx("option",{value:"completed",children:"Completed"}),s.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(D,{variant:e==="grid"?"primary":"ghost",size:"sm",onClick:()=>t("grid"),children:s.jsx(op,{className:"w-4 h-4"})}),s.jsx(D,{variant:e==="list"?"primary":"ghost",size:"sm",onClick:()=>t("list"),children:s.jsx(mp,{className:"w-4 h-4"})})]})]}),e==="grid"?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map(u=>s.jsxs(K,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>l(u),children:[s.jsx(Te,{className:"pb-3",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx(Ee,{className:"text-lg",children:u.name}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:u.category})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(D,{variant:"ghost",size:"sm",onClick:v=>{v.stopPropagation(),l(u)},title:"Edit Project",children:s.jsx(Wc,{className:"w-4 h-4"})}),s.jsx(D,{variant:"ghost",size:"sm",onClick:v=>{v.stopPropagation(),b(u.id)},title:"Delete Project",className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:s.jsx(mt,{className:"w-4 h-4"})})]})]})}),s.jsxs(Y,{className:"space-y-4",children:[s.jsx("p",{className:"text-sm text-gray-700 line-clamp-2",children:u.description}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Progress"}),s.jsxs("span",{className:"font-medium",children:[u.progress,"%"]})]}),s.jsx(gt,{value:u.progress})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(X,{variant:S(u.status),children:u.status}),s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx(Le,{className:"w-4 h-4 mr-1"}),u.userCount||0]})]}),s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx(ft,{className:"w-4 h-4 mr-2"}),u.end_date||u.endDate?new Date(u.end_date||u.endDate||"").toLocaleDateString():"No due date"]})]})]},u.id))}):s.jsx(K,{children:s.jsx(Y,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Project Name"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Progress"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Team"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Due Date"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map(u=>s.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>l(u),children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:u.name}),s.jsx("div",{className:"text-sm text-gray-500",children:u.description})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:u.category}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx(X,{variant:S(u.status),children:u.status})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"w-24",children:s.jsx(gt,{value:u.progress,showLabel:!1})}),s.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[u.progress,"%"]})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(Le,{className:"w-4 h-4 mr-1 text-gray-400"}),u.userCount||0]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:u.end_date||u.endDate?new Date(u.end_date||u.endDate||"").toLocaleDateString():"No due date"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:s.jsxs("div",{className:"flex items-center justify-end space-x-1",children:[s.jsx(D,{variant:"ghost",size:"sm",onClick:v=>{v.stopPropagation(),l(u)},title:"Edit Project",children:s.jsx(Wc,{className:"w-4 h-4"})}),s.jsx(D,{variant:"ghost",size:"sm",onClick:v=>{v.stopPropagation(),b(u.id)},title:"Delete Project",className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:s.jsx(mt,{className:"w-4 h-4"})})]})})]},u.id))})]})})})}),s.jsx(rf,{isOpen:r,onClose:()=>n(!1),onSubmit:x,categories:d})]})}function rf({isOpen:e,onClose:t,onSubmit:r,categories:n}){const[a,l]=m.useState({name:"",description:"",category_id:null,current_stage_id:null,start_date:new Date().toISOString().split("T")[0],end_date:new Date(Date.now()+2592e6).toISOString().split("T")[0]}),[i,o]=m.useState([]),[c,p]=m.useState(!1),g=async d=>{if(l({...a,category_id:d,current_stage_id:null}),d){p(!0);try{const N=await Ot.getByCategory(d);o(N)}catch(N){console.error("Failed to load stages for category:",N),o([])}finally{p(!1)}}else o([])},j=d=>{d.preventDefault(),r({...a,start_date:a.start_date,end_date:a.end_date,currentStageId:a.current_stage_id||void 0}),l({name:"",description:"",category_id:null,current_stage_id:null,start_date:new Date().toISOString().split("T")[0],end_date:new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0]}),o([])};return s.jsx(Ke,{isOpen:e,onClose:t,title:"Create New Project",size:"lg",children:s.jsxs("form",{onSubmit:j,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Name"}),s.jsx("input",{type:"text",required:!0,value:a.name,onChange:d=>l({...a,name:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter project name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),s.jsx("textarea",{value:a.description,onChange:d=>l({...a,description:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Project description"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),s.jsxs("select",{value:a.category_id||"",onChange:d=>g(d.target.value?parseInt(d.target.value):null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Select a category"}),n&&n.length>0?n.map(d=>s.jsx("option",{value:d.id,children:d.name},d.id)):s.jsx("option",{value:"",disabled:!0,children:"No categories available"})]})]}),a.category_id&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Stage"}),c?s.jsxs("div",{className:"flex items-center justify-center py-4",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),s.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Loading stages..."})]}):i.length>0?s.jsxs("select",{value:a.current_stage_id||"",onChange:d=>l({...a,current_stage_id:d.target.value?parseInt(d.target.value):null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Select a stage"}),i.map(d=>s.jsxs("option",{value:d.id,children:[d.name," - ",d.description]},d.id))]}):s.jsx("div",{className:"text-sm text-gray-500 py-2",children:"No stages available for this category."})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),s.jsx("input",{type:"date",value:a.start_date,onChange:d=>l({...a,start_date:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),s.jsx("input",{type:"date",value:a.end_date,onChange:d=>l({...a,end_date:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx(D,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),s.jsx(D,{type:"submit",children:"Create Project"})]})]})})}function nf(){var xe,Pe,Fe,Ze,Me,Ct;const{dispatch:e}=dr(),[t,r]=m.useState("members"),[n,a]=m.useState(!1),[l,i]=m.useState(null),[o,c]=m.useState([]),[p,g]=m.useState([]),[j,d]=m.useState(""),[N,w]=m.useState(!1),[P,L]=m.useState(null),[f,h]=m.useState([]),[x,b]=m.useState([]),[S,u]=m.useState(!1),[v,C]=m.useState(null),[A,z]=m.useState(null),[le,F]=m.useState(!1),[ne,me]=m.useState(!1),[ye,Oe]=m.useState([]),[We,_]=m.useState(!1),[E,$]=m.useState(null),[B,G]=m.useState({name:"",email:"",passcode:"",skills:[],team_id:null}),[ee,q]=m.useState({name:"",description:"",functional_unit_id:null,team_lead_id:null,team_lead_type:"team",max_capacity:10,members:[]}),[k,ie]=m.useState([]);m.useEffect(()=>{oe()},[t]),m.useEffect(()=>{(async()=>{try{const W=await ss.getAll();console.log(" Raw skills data:",W);let Ne=[];Array.isArray(W)&&(Ne=W),console.log(" Skills array:",Ne);const Je=Ne.map(O=>O.name||O);ie(Je),console.log(" Skills fetched:",Je),console.log(" Skills array length:",Je.length)}catch(W){console.error("Error fetching skills:",W)}})()},[]);const oe=async()=>{try{if(a(!0),i(null),t==="members"){const[I,W]=await Promise.all([_e.getMembers(),ze.getAll()]);console.log(" Team members fetched:",I),console.log(" Tasks fetched:",W);const Ne=await Promise.all((I||[]).map(async Je=>{const O=W.filter(ue=>ue.assignees&&ue.assignees.includes(Je.id));let de=null;try{const ue=await Ks.getSummary(Je.id);ue&&ue.summary&&(de={red:0,orange:0,yellow:0,green:0},ue.summary.forEach(Se=>{Se.type&&Se.count&&(de[Se.type]=Se.count)}))}catch(ue){console.warn(`Failed to fetch performance flags for member ${Je.id}:`,ue)}return{...Je,task_count:O.length,performance_flags_summary:de}}));c(Ne),g(Ne)}else{const I=await _e.getTeams();console.log(" Teams fetched:",I),h(I||[]),b(I||[])}}catch(I){console.error(" Fetch team data error:",I),i("Failed to load team data")}finally{a(!1)}};m.useEffect(()=>{(async()=>{try{const W=await _e.getTeams();h(W||[]),console.log(" Teams for dropdown fetched:",W)}catch(W){console.error("Error fetching teams for dropdown:",W)}})()},[]),m.useEffect(()=>{if(t==="members"){const I=o.filter(W=>W.name.toLowerCase().includes(j.toLowerCase())||W.email.toLowerCase().includes(j.toLowerCase())||W.skills&&W.skills.some(Ne=>Ne.toLowerCase().includes(j.toLowerCase())));g(I)}else{const I=f.filter(W=>W.name.toLowerCase().includes(j.toLowerCase())||W.description&&W.description.toLowerCase().includes(j.toLowerCase())||W.skills&&W.skills.some(Ne=>Ne.toLowerCase().includes(j.toLowerCase())));b(I)}},[j,o,f,t]);const be=async I=>{if(I.preventDefault(),!B.passcode||B.passcode.trim()===""){i("Passcode is required for new team members");return}try{const W=await _e.createMember(B);c([...o,W]),w(!1),re()}catch(W){console.error("Error creating team member:",W),i("Failed to create team member")}},De=async I=>{if(I.preventDefault(),!!P)try{const W={...B};(!W.passcode||W.passcode.trim()==="")&&delete W.passcode;const Ne=await _e.updateMember(P.id.toString(),W);c(o.map(Je=>Je.id===P.id?Ne:Je)),w(!1),L(null),re()}catch(W){console.error("Error updating team member:",W),i("Failed to update team member")}},M=async I=>{if(confirm("Are you sure you want to delete this team member?"))try{await _e.deleteMember(I.toString()),c(o.filter(W=>W.id!==I))}catch(W){console.error("Error deleting team member:",W),i("Failed to delete team member")}},H=I=>{e({type:"SET_SELECTED_VIEW",payload:"tasks"}),e({type:"SET_FILTERS",payload:{teamMembers:[I.id.toString()]}})},re=()=>{G({name:"",email:"",passcode:"",skills:[],team_id:null})},se=async I=>{I.preventDefault();try{const W=await _e.createTeam(ee);h([...f,W]),u(!1),je()}catch(W){console.error("Error creating team:",W),i("Failed to create team")}},ce=async I=>{if(I.preventDefault(),!!v)try{const W=await _e.updateTeam(v.id.toString(),ee);h(f.map(Ne=>Ne.id===v.id?W:Ne)),u(!1),C(null),je()}catch(W){console.error("Error updating team:",W),i("Failed to update team")}},he=async I=>{if(confirm("Are you sure you want to delete this team?"))try{await _e.deleteTeam(I.toString()),h(f.filter(W=>W.id!==I))}catch(W){console.error("Error deleting team:",W),i("Failed to delete team")}},je=()=>{q({name:"",description:"",functional_unit_id:null,team_lead_id:null,team_lead_type:"team",max_capacity:10,members:[]})},Xe=I=>{L(I),G({name:I.name,email:I.email,passcode:"",skills:I.skills,team_id:I.team_ids&&I.team_ids.length>0?I.team_ids[0]:null}),w(!0)},Q=I=>{C(I),q({name:I.name,description:I.description,functional_unit_id:null,team_lead_id:null,team_lead_type:"team",max_capacity:I.max_capacity,members:[]}),u(!0)},V=async I=>{try{const W=await _e.getTeamById(I.id.toString());z(W),F(!0)}catch(W){console.error("Error fetching team details:",W),i("Failed to fetch team details")}},fe=async I=>{try{const Je=(await _e.getMembers()||[]).filter(O=>!O.team_ids||!O.team_ids.includes(I.id));Oe(Je),z(I),me(!0)}catch(W){console.error("Error fetching available members:",W),i("Failed to fetch available members")}},ke=async I=>{if(A)try{await _e.addMemberToTeam(A.id.toString(),{member_id:I});const W=await _e.getTeamById(A.id.toString());z(W),await oe(),me(!1)}catch(W){console.error("Error adding member to team:",W),i("Failed to add member to team")}},T=async I=>{if(A&&confirm(`Are you sure you want to remove this member from ${A.name}?`))try{await _e.removeMemberFromTeam(A.id.toString(),I.toString());const W=await _e.getTeamById(A.id.toString());z(W),await oe(),i(null)}catch(W){console.error("Error removing member from team:",W),i("Failed to remove member from team")}},ae=I=>{$(I),_(!0)};return n?s.jsx("div",{className:"flex items-center justify-center p-8",children:s.jsx("div",{className:"text-lg",children:"Loading team data..."})}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Team Management"}),s.jsx("p",{className:"text-gray-600",children:"Manage team members and teams"})]})}),l&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:s.jsx("p",{className:"text-red-800",children:l})}),s.jsx("div",{className:"border-b border-gray-200",children:s.jsxs("nav",{className:"-mb-px flex space-x-8",children:[s.jsxs("button",{onClick:()=>r("members"),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${t==="members"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[s.jsx(Le,{className:"w-4 h-4"}),s.jsx("span",{children:"Team Members"})]}),s.jsxs("button",{onClick:()=>r("teams"),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${t==="teams"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[s.jsx(fa,{className:"w-4 h-4"}),s.jsx("span",{children:"Teams"})]})]})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center space-x-4",children:s.jsxs("div",{className:"relative",children:[s.jsx(Ao,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",placeholder:`Search ${t==="members"?"team members":"teams"}...`,value:j,onChange:I=>d(I.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]})}),s.jsxs(D,{onClick:()=>{t==="members"?(L(null),re(),w(!0)):(C(null),je(),u(!0))},className:"flex items-center space-x-2",children:[s.jsx(nt,{className:"w-4 h-4"}),s.jsxs("span",{children:["Add ",t==="members"?"Member":"Team"]})]})]}),t==="members"?s.jsx(af,{members:p,onEdit:Xe,onDelete:M,onMemberClick:H}):s.jsx(lf,{teams:x,onEdit:Q,onDelete:he,onViewDetails:V}),s.jsx(Ke,{isOpen:N,onClose:()=>{w(!1),L(null),re()},title:P?"Edit Team Member":"Create Team Member",children:s.jsxs("form",{onSubmit:P?De:be,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name"}),s.jsx("input",{type:"text",value:B.name,onChange:I=>G({...B,name:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter full name",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),s.jsx("input",{type:"email",value:B.email,onChange:I=>G({...B,email:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter email address",required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Passcode ",P&&s.jsx("span",{className:"text-gray-500 text-xs",children:"(leave empty to keep current)"})]}),s.jsx("input",{type:"text",value:B.passcode,onChange:I=>G({...B,passcode:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:P?"Leave empty to keep current passcode":"Enter passcode",required:!P}),!P&&s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Passcode is required for new team members"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assign to Team"}),s.jsxs("select",{value:B.team_id||"",onChange:I=>G({...B,team_id:I.target.value?Number(I.target.value):null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"Select a team (optional)"}),f.map(I=>s.jsx("option",{value:I.id,children:I.name},I.id))]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Skills"}),s.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:["Available skills: ",k.length]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 max-h-48 overflow-y-auto border border-gray-200 rounded-lg p-4",children:k.length>0?k.map(I=>s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer hover:bg-gray-50 p-2 rounded",children:[s.jsx("input",{type:"checkbox",checked:B.skills.includes(I),onChange:W=>{W.target.checked?G({...B,skills:[...B.skills,I]}):G({...B,skills:B.skills.filter(Ne=>Ne!==I)})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:I})]},I)):s.jsx("div",{className:"col-span-3 text-center text-gray-500 py-4",children:"No skills available. Please add skills first."})}),B.skills.length>0&&s.jsxs("div",{className:"mt-3",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Selected skills:"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:B.skills.map(I=>s.jsx(X,{variant:"secondary",className:"text-xs",children:I},I))})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[s.jsx(D,{type:"button",variant:"outline",onClick:()=>{w(!1),L(null),re()},className:"px-6",children:"Cancel"}),s.jsx(D,{type:"submit",className:"px-6 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700",children:P?"Update Member":"Create Member"})]})]})}),s.jsx(Ke,{isOpen:S,onClose:()=>{u(!1),C(null),je()},title:v?"Edit Team":"Create Team",children:s.jsxs("form",{onSubmit:v?ce:se,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Team Name"}),s.jsx("input",{type:"text",value:ee.name,onChange:I=>q({...ee,name:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter team name",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Capacity"}),s.jsx("input",{type:"number",value:ee.max_capacity,onChange:I=>q({...ee,max_capacity:parseInt(I.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"1",max:"50",placeholder:"10"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),s.jsx("textarea",{value:ee.description,onChange:I=>q({...ee,description:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:3,placeholder:"Enter team description"})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[s.jsx(D,{type:"button",variant:"outline",onClick:()=>{u(!1),C(null),je()},className:"px-6",children:"Cancel"}),s.jsx(D,{type:"submit",className:"px-6 bg-gradient-to-r from-green-500 to-teal-600 hover:from-green-600 hover:to-teal-700",children:v?"Update Team":"Create Team"})]})]})}),A&&s.jsx(Ke,{isOpen:le,onClose:()=>{F(!1),z(null)},title:`${A.name} - Team Details`,children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Team Information"}),s.jsx("p",{className:"text-gray-600",children:A.description})]}),s.jsx("div",{children:s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Members"}),s.jsxs("p",{className:"text-gray-900 font-semibold",children:[s.jsx("span",{className:"text-blue-600",children:((xe=A.members)==null?void 0:xe.length)||A.member_count||0})," / ",s.jsx("span",{className:"text-gray-600",children:A.max_capacity})]}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[!((Pe=A.members)!=null&&Pe.length)&&!A.member_count||((Fe=A.members)==null?void 0:Fe.length)===0&&A.member_count===0?"No members":(((Ze=A.members)==null?void 0:Ze.length)||A.member_count)===1?"1 member":`${((Me=A.members)==null?void 0:Me.length)||A.member_count} members`," assigned"]})]})}),A.skills&&A.skills.length>0&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Team Skills"}),s.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:A.skills.map((I,W)=>s.jsx(X,{variant:"secondary",children:I},W))})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Team Members"}),s.jsxs(D,{size:"sm",onClick:()=>fe(A),className:"bg-blue-500 hover:bg-blue-600 text-white",disabled:A.member_count>=A.max_capacity,children:[s.jsx(Ba,{className:"w-3 h-3 mr-1"}),"Add Member"]})]}),A.members&&A.members.length>0?s.jsx("div",{className:"space-y-2 mt-1",children:A.members.map(I=>{var W;return s.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:I.name}),s.jsx("p",{className:"text-sm text-gray-600",children:I.team_role})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(X,{variant:"secondary",children:[((W=I.skills)==null?void 0:W.length)||0," skills"]}),s.jsxs("div",{className:"relative group",children:[s.jsx(D,{size:"sm",variant:"outline",onClick:Ne=>{Ne.stopPropagation(),ae(I)},className:"text-blue-600 hover:text-blue-700",children:s.jsx(Gs,{className:"w-3 h-3"})}),s.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-10",children:["View Details",s.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900"})]})]}),s.jsxs("div",{className:"relative group",children:[s.jsx(D,{size:"sm",variant:"outline",onClick:Ne=>{Ne.stopPropagation(),T(I.id)},className:"text-red-600 hover:text-red-700",children:s.jsx(yp,{className:"w-3 h-3"})}),s.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-10",children:["Remove User",s.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900"})]})]})]})]},I.id)})}):s.jsxs("div",{className:"text-center py-4 text-gray-500",children:[s.jsx(Le,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),s.jsx("p",{children:"No members assigned to this team"})]})]})]})}),A&&s.jsx(Ke,{isOpen:ne,onClose:()=>{me(!1),z(null),Oe([])},title:`Add Member to ${A.name}`,children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"mb-4",children:[s.jsxs("p",{className:"text-sm text-gray-600",children:["Select a member to add to ",s.jsx("strong",{children:A.name})]}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Current: ",A.member_count," / ",A.max_capacity," members"]})]}),ye.length>0?s.jsx("div",{className:"max-h-64 overflow-y-auto space-y-2",children:ye.map(I=>s.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",onClick:()=>ke(I.id),children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white font-semibold text-xs",children:I.name.split(" ").map(W=>W[0]).join("").toUpperCase()})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:I.name}),s.jsx("p",{className:"text-sm text-gray-600",children:I.email})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(X,{variant:"secondary",className:"text-xs",children:[I.skills.length," skills"]}),s.jsx(D,{size:"sm",variant:"outline",className:"text-xs",children:"Add"})]})]},I.id))}):s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(Le,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),s.jsx("p",{className:"text-lg font-medium",children:"No available members"}),s.jsx("p",{className:"text-sm",children:"All team members are already assigned to this team or other teams."})]}),s.jsx("div",{className:"flex justify-end pt-4 border-t",children:s.jsx(D,{variant:"outline",onClick:()=>{me(!1),z(null),Oe([])},children:"Cancel"})})]})}),E&&s.jsx(Ke,{isOpen:We,onClose:()=>{_(!1),$(null)},title:`${E.name} - Member Details`,children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white font-semibold text-lg",children:E.name.split(" ").map(I=>I[0]).join("").toUpperCase()})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:E.name}),s.jsx("p",{className:"text-gray-600",children:E.team_role||"Member"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),s.jsx("p",{className:"text-gray-900",children:E.email||"Not provided"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Skills"}),s.jsxs("p",{className:"text-gray-900",children:[((Ct=E.skills)==null?void 0:Ct.length)||0," skills"]})]})]}),E.skills&&E.skills.length>0&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Skill Details"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:E.skills.map((I,W)=>s.jsx(X,{variant:"secondary",children:I},W))})]}),s.jsx("div",{className:"flex justify-end pt-4 border-t",children:s.jsx(D,{variant:"outline",onClick:()=>{_(!1),$(null)},children:"Close"})})]})})]})}function af({members:e,onEdit:t,onDelete:r,onMemberClick:n}){return s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(a=>{var l,i,o,c;return s.jsx(K,{className:"hover:shadow-lg transition-shadow duration-200 cursor-pointer",onClick:()=>n&&n(a),children:s.jsx(Y,{className:"p-6",children:s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white font-semibold text-sm",children:a.name.split(" ").map(p=>p[0]).join("").toUpperCase()})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900 text-lg",children:a.name}),s.jsxs("p",{className:"text-sm text-gray-600 flex items-center",children:[s.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),a.email]}),a.passcode&&s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Passcode: ",s.jsx("span",{className:"font-mono bg-gray-100 px-1 rounded",children:a.passcode})]})]})]}),s.jsxs("div",{className:"mb-4 space-y-3",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Tasks"}),s.jsxs("span",{className:"text-xs bg-orange-100 text-orange-800 px-2 py-1 rounded-full",children:[a.task_count||0," tasks"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-orange-500 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min((a.task_count||0)*10,100)}%`}})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Skills"}),s.jsxs("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:[a.skills.length," skills"]})]}),a.skills.length>0&&s.jsxs("div",{className:"flex flex-wrap gap-1",children:[a.skills.slice(0,3).map((p,g)=>s.jsx(X,{variant:"secondary",className:"text-xs px-2 py-1",children:p},g)),a.skills.length>3&&s.jsxs(X,{variant:"secondary",className:"text-xs px-2 py-1",children:["+",a.skills.length-3," more"]})]})]}),a.team_names&&a.team_names.length>0&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Teams"}),s.jsxs("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:[a.team_names.length," team",a.team_names.length>1?"s":""]})]}),s.jsx("div",{className:"flex flex-wrap gap-1",children:a.team_names.map((p,g)=>s.jsx(X,{variant:"default",className:"text-xs px-2 py-1 bg-green-100 text-green-800",children:p},g))})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(X,{variant:a.is_active?"default":"secondary",className:"px-3 py-1",children:a.is_active?"Active":"Inactive"}),a.performance_flags_count>0&&s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsxs(X,{variant:"danger",className:"px-2 py-1 text-xs",children:[" ",((l=a.performance_flags_summary)==null?void 0:l.red)||0]}),s.jsxs(X,{variant:"warning",className:"px-2 py-1 text-xs",children:[" ",((i=a.performance_flags_summary)==null?void 0:i.orange)||0]}),s.jsxs(X,{variant:"warning",className:"px-2 py-1 text-xs",children:[" ",((o=a.performance_flags_summary)==null?void 0:o.yellow)||0]}),s.jsxs(X,{variant:"success",className:"px-2 py-1 text-xs",children:[" ",((c=a.performance_flags_summary)==null?void 0:c.green)||0]})]})]}),s.jsxs("div",{className:"flex space-x-1",children:[s.jsx(D,{size:"sm",variant:"outline",onClick:p=>{p.stopPropagation(),t(a)},className:"hover:bg-blue-50 hover:border-blue-300 transition-colors",children:s.jsx(zn,{className:"w-3 h-3"})}),s.jsx(D,{size:"sm",variant:"outline",onClick:p=>{p.stopPropagation(),r(a.id)},className:"hover:bg-red-50 hover:border-red-300 transition-colors",children:s.jsx(mt,{className:"w-3 h-3"})})]})]})]})})})},a.id)})})}function lf({teams:e,onEdit:t,onDelete:r,onViewDetails:n}){return!e||e.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-100 to-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(fa,{className:"w-8 h-8 text-gray-400"})}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No teams found"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Create your first team to get started."}),s.jsxs(D,{className:"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700",children:[s.jsx(nt,{className:"w-4 h-4 mr-2"}),"Create Team"]})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(a=>s.jsx(K,{className:"hover:shadow-lg transition-shadow duration-200",children:s.jsx(Y,{className:"p-6",children:s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-teal-600 rounded-lg flex items-center justify-center",children:s.jsx(fa,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900 text-lg",children:a.name}),s.jsx("p",{className:"text-sm text-gray-600",children:a.description||"No description"})]})]}),s.jsxs("div",{className:"space-y-3 mb-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(fa,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-sm text-gray-600",children:a.functional_unit_name||"No unit"})]}),s.jsx(X,{variant:a.is_active?"default":"secondary",className:"px-2 py-1 text-xs",children:a.is_active?"Active":"Inactive"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(vp,{className:"w-4 h-4 text-gray-400"}),s.jsxs("span",{className:"text-sm text-gray-600",children:[a.member_count||0," / ",a.max_capacity||10," members"]}),s.jsx("div",{className:"flex-1 ml-2",children:s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min((a.member_count||0)/(a.max_capacity||10)*100,100)}%`}})})})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(fm,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-sm text-gray-600",children:a.team_lead_name||"No team lead"})]})]}),a.skills&&a.skills.length>0&&s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Team Skills"}),s.jsxs("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:[a.skills.length," skills"]})]}),s.jsxs("div",{className:"flex flex-wrap gap-1",children:[a.skills.slice(0,3).map((l,i)=>s.jsx(X,{variant:"secondary",className:"text-xs px-2 py-1",children:l},i)),a.skills.length>3&&s.jsxs(X,{variant:"secondary",className:"text-xs px-2 py-1",children:["+",a.skills.length-3," more"]})]})]}),s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex space-x-1",children:[s.jsx(D,{size:"sm",variant:"outline",onClick:()=>n(a),className:"hover:bg-blue-50 hover:border-blue-300 transition-colors",children:s.jsx(Le,{className:"w-3 h-3"})}),s.jsx(D,{size:"sm",variant:"outline",onClick:()=>t(a),className:"hover:bg-green-50 hover:border-green-300 transition-colors",children:s.jsx(zn,{className:"w-3 h-3"})}),s.jsx(D,{size:"sm",variant:"outline",onClick:()=>r(a.id),className:"hover:bg-red-50 hover:border-red-300 transition-colors",children:s.jsx(mt,{className:"w-3 h-3"})})]})})]})})})},a.id))})}function of(){const[e,t]=m.useState(new Date("2025-08-11")),[r,n]=m.useState("week"),[a,l]=m.useState("team"),[i,o]=m.useState(!1);m.useState(null);const[c,p]=m.useState([]),[g,j]=m.useState([]),[d,N]=m.useState([]),[w,P]=m.useState([]);m.useState([]),m.useState([]),m.useState([]),m.useState([]);const[L,f]=m.useState(!1),[h,x]=m.useState(null),b=async _=>{try{f(!0),x(null);const E=await ra.getAll(_);p(E)}catch(E){console.error("Failed to fetch allocations:",E),x("Failed to load allocations")}finally{f(!1)}};m.useEffect(()=>{(async()=>{try{f(!0),x(null);const[E,$,B,G,ee,q,k,ie]=await Promise.all([ra.getAll(),_e.getMembers(),Ue.getAll(),ze.getAll(),cs.getAll(),ds.getAll(),us.getAll(),$s.getAll()]);console.log(" Allocations data:",E),console.log(" Users data:",$),console.log(" Projects data:",B),console.log(" Tasks data:",G),p(E),j($),N(B),P(G)}catch(E){console.error("Failed to fetch data:",E),x("Failed to load data")}finally{f(!1)}})()},[]);const S=async()=>{if(c.length===0&&w.length>0)try{f(!0);for(const _ of w)if(_.assignees&&_.assignees.length>0){const E=_.start_date||_.startDate,$=_.end_date||_.endDate,B=_.estimated_hours||_.estimatedHours||8;if(E&&$){const G=Math.ceil((new Date($).getTime()-new Date(E).getTime())/864e5),ee=Math.min(B/Math.max(G,1),8);for(const q of _.assignees){const k={user_id:q,project_id:_.project_id||_.projectId||"",task_id:_.id,hours_per_day:Math.round(ee*100)/100,start_date:new Date(E).toISOString().split("T")[0],end_date:new Date($).toISOString().split("T")[0]};await ra.create(k)}}}await b()}catch(_){console.error("Failed to create allocations from tasks:",_),x("Failed to create initial allocations")}finally{f(!1)}};m.useEffect(()=>{c.length===0&&!L&&w.length>0&&S()},[c.length,L,w.length]);const u=_=>{const E=[],$=new Date(_);$.setDate(_.getDate()-_.getDay());for(let B=0;B<7;B++){const G=new Date($);G.setDate($.getDate()+B),E.push(G)}return E},v=(_,E,$)=>(console.log(` getAllocationsForDate: date=${_.toISOString().split("T")[0]}, userId=${E}, allocations.length=${c.length}`),c.filter(G=>{var De,M,H;const ee=_.toISOString().split("T")[0],q=G.start_date.split("T")[0],k=G.end_date.split("T")[0],ie=ee>=q&&ee<=k,oe=!E||((De=G.user_id)==null?void 0:De.toString())===E,be=!$||((M=G.project_id)==null?void 0:M.toString())===$;return E&&((H=G.user_id)==null?void 0:H.toString())===E&&!ie&&console.log(` Date mismatch: Looking for ${ee}, allocation ${G.id} range is ${q} to ${k}`),ie&&oe&&be})),C=(_,E)=>v(E,_).reduce((B,G)=>{const ee=typeof G.hours_per_day=="string"?parseFloat(G.hours_per_day):G.hours_per_day||0;return B+ee},0),A=(_,E)=>v(E,void 0,_).reduce((B,G)=>{const ee=typeof G.hours_per_day=="string"?parseFloat(G.hours_per_day):G.hours_per_day||0;return B+ee},0),z=(_,E)=>{const $=C(_,E);return $===0?"available":$>8?"overloaded":$>=6?"busy":"normal"},le=_=>{switch(_){case"available":return"bg-green-100 text-green-800";case"normal":return"bg-blue-100 text-blue-800";case"busy":return"bg-yellow-100 text-yellow-800";case"overloaded":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},F=_=>{const E=new Date(e);r==="day"?E.setDate(e.getDate()+(_==="next"?1:-1)):r==="week"?E.setDate(e.getDate()+(_==="next"?7:-7)):E.setMonth(e.getMonth()+(_==="next"?1:-1)),t(E)},ne=()=>{if(r==="day")return e.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});if(r==="week"){const _=u(e),E=_[0].toLocaleDateString("en-US",{month:"short",day:"numeric"}),$=_[6].toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return`${E} - ${$}`}else return e.toLocaleDateString("en-US",{year:"numeric",month:"long"})},me=async _=>{var E,$;try{const B={user_id:_.userId||"",project_id:_.projectId||"",task_id:_.taskId||void 0,hours_per_day:_.hoursPerDay||8,start_date:((E=_.startDate)==null?void 0:E.toISOString().split("T")[0])||new Date().toISOString().split("T")[0],end_date:(($=_.endDate)==null?void 0:$.toISOString().split("T")[0])||new Date().toISOString().split("T")[0]};await ra.create(B),await b(),o(!1)}catch(B){console.error("Failed to create allocation:",B),x("Failed to create allocation")}},ye=()=>{const _=u(e);return console.log(` Current selected date: ${e.toISOString().split("T")[0]}`),console.log(" Week dates:",_.map(E=>E.toISOString().split("T")[0])),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-8 gap-2 mb-4",children:[s.jsx("div",{className:"font-medium text-gray-700 p-2",children:"Team Member"}),_.map(E=>s.jsxs("div",{className:"text-center p-2",children:[s.jsx("div",{className:"font-medium text-gray-700",children:E.toLocaleDateString("en-US",{weekday:"short"})}),s.jsx("div",{className:"text-sm text-gray-500",children:E.getDate()})]},E.toISOString()))]}),g.map(E=>{var $;return s.jsx(K,{className:"overflow-hidden",children:s.jsx(Y,{className:"p-0",children:s.jsxs("div",{className:"grid grid-cols-8 gap-2",children:[s.jsxs("div",{className:"p-4 bg-gray-50 flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-medium",children:E.name.charAt(0)}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900",children:E.name}),s.jsx("div",{className:"text-sm text-gray-600",children:(($=E.skills)==null?void 0:$[0])||"No skills"})]})]}),_.map(B=>{const G=v(B,E.id),ee=C(E.id,B),q=z(E.id,B);return s.jsxs("div",{className:"p-2 border-l border-gray-200",children:[s.jsxs("div",{className:`rounded-lg p-2 text-center ${le(q)}`,children:[s.jsxs("div",{className:"font-semibold",children:[ee,"h"]}),s.jsxs("div",{className:"text-xs mt-1",children:[G.length," tasks"]})]}),G.length>0&&s.jsxs("div",{className:"mt-2 space-y-1",children:[G.slice(0,2).map(k=>{var De,M;const ie=w.find(H=>H.id===k.task_id),oe=d.find(H=>H.id===k.project_id),be=g.find(H=>H.id===k.user_id);return s.jsxs("div",{className:"text-xs bg-white rounded p-1 border",title:`${oe==null?void 0:oe.name}: ${ie==null?void 0:ie.name} (${(De=be==null?void 0:be.skills)==null?void 0:De[0]})`,children:[s.jsx("div",{className:"font-medium truncate",children:ie==null?void 0:ie.name}),s.jsxs("div",{className:"text-gray-600",children:[k.hours_per_day,"h  ",(M=be==null?void 0:be.skills)==null?void 0:M[0]]})]},k.task_id||k.id)}),G.length>2&&s.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["+",G.length-2," more"]})]})]},B.toISOString())})]})})},E.id)})]})},Oe=()=>{const _=u(e);return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-8 gap-2 mb-4",children:[s.jsx("div",{className:"font-medium text-gray-700 p-2",children:"Project"}),_.map(E=>s.jsxs("div",{className:"text-center p-2",children:[s.jsx("div",{className:"font-medium text-gray-700",children:E.toLocaleDateString("en-US",{weekday:"short"})}),s.jsx("div",{className:"text-sm text-gray-500",children:E.getDate()})]},E.toISOString()))]}),d.map(E=>s.jsx(K,{className:"overflow-hidden",children:s.jsx(Y,{className:"p-0",children:s.jsxs("div",{className:"grid grid-cols-8 gap-2",children:[s.jsxs("div",{className:"p-4 bg-gray-50 flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-full flex items-center justify-center text-white",children:s.jsx(Js,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900",children:E.name}),s.jsx("div",{className:"text-sm text-gray-600",children:E.category})]})]}),_.map($=>{const B=v($,void 0,E.id),G=A(E.id,$),ee=new Set(B.map(q=>q.user_id)).size;return s.jsxs("div",{className:"p-2 border-l border-gray-200",children:[s.jsxs("div",{className:"rounded-lg p-2 text-center bg-blue-100 text-blue-800",children:[s.jsxs("div",{className:"font-semibold",children:[G,"h"]}),s.jsxs("div",{className:"text-xs mt-1",children:[ee," people"]})]}),B.length>0&&s.jsxs("div",{className:"mt-2 space-y-1",children:[B.slice(0,2).map(q=>{const k=g.find(oe=>oe.id===q.user_id),ie=w.find(oe=>oe.id===q.task_id);return s.jsxs("div",{className:"text-xs bg-white rounded p-1 border",title:`${k==null?void 0:k.name}: ${ie==null?void 0:ie.name}`,children:[s.jsx("div",{className:"font-medium truncate",children:k==null?void 0:k.name}),s.jsxs("div",{className:"text-gray-600",children:[q.hours_per_day,"h"]})]},`${q.user_id}-${q.task_id}`)}),B.length>2&&s.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["+",B.length-2," more"]})]})]},$.toISOString())})]})})},E.id))]})},We=()=>a==="team"?s.jsx("div",{className:"space-y-6",children:g.map(_=>{const E=v(e,_.id),$=C(_.id,e),B=z(_.id,e);return s.jsxs(K,{children:[s.jsx(Te,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center text-white font-medium text-lg",children:_.name.charAt(0)}),s.jsxs("div",{children:[s.jsx(Ee,{children:_.name}),s.jsx("p",{className:"text-sm text-gray-600",children:_.skills.join(", ")})]})]}),s.jsx("div",{className:"text-right",children:s.jsxs(X,{variant:B==="available"?"success":B==="overloaded"?"danger":B==="busy"?"warning":"primary",children:[$,"h allocated"]})})]})}),s.jsx(Y,{children:E.length===0?s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(Ai,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),s.jsx("p",{children:"No tasks allocated for this day"})]}):s.jsx("div",{className:"space-y-3",children:E.map(G=>{const ee=w.find(k=>k.id===G.taskId),q=d.find(k=>k.id===G.projectId);return s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-gray-900",children:ee==null?void 0:ee.name}),s.jsx("div",{className:"text-sm text-gray-600",children:q==null?void 0:q.name}),s.jsxs("div",{className:"flex items-center mt-1 space-x-4",children:[s.jsx(X,{variant:"secondary",size:"sm",children:ee==null?void 0:ee.priority}),s.jsx(X,{variant:(ee==null?void 0:ee.status)==="completed"?"success":(ee==null?void 0:ee.status)==="in-progress"?"primary":(ee==null?void 0:ee.status)==="blocked"?"danger":"default",size:"sm",children:ee==null?void 0:ee.status})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"font-semibold text-lg",children:[G.hoursPerDay,"h"]}),s.jsx("div",{className:"text-sm text-gray-600",children:"allocated"})]})]},G.taskId)})})})]},_.id)})}):s.jsx("div",{className:"space-y-6",children:d.map(_=>{const E=v(e,void 0,_.id),$=A(_.id,e),B=new Set(E.map(G=>G.userId)).size;return s.jsxs(K,{children:[s.jsx(Te,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-full flex items-center justify-center text-white",children:s.jsx(Js,{className:"w-6 h-6"})}),s.jsxs("div",{children:[s.jsx(Ee,{children:_.name}),s.jsx("p",{className:"text-sm text-gray-600",children:_.category})]})]}),s.jsx("div",{className:"text-right",children:s.jsxs(X,{variant:"primary",children:[$,"h  ",B," people"]})})]})}),s.jsx(Y,{children:E.length===0?s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(Js,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),s.jsx("p",{children:"No allocations for this project today"})]}):s.jsx("div",{className:"space-y-3",children:E.map(G=>{const ee=g.find(k=>k.id===G.userId),q=w.find(k=>k.id===G.taskId);return s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-gray-900",children:q==null?void 0:q.name}),s.jsxs("div",{className:"text-sm text-gray-600",children:["Assigned to: ",ee==null?void 0:ee.name]}),s.jsxs("div",{className:"flex items-center mt-1 space-x-4",children:[s.jsx(X,{variant:"secondary",size:"sm",children:q==null?void 0:q.priority}),s.jsx(X,{variant:(q==null?void 0:q.status)==="completed"?"success":(q==null?void 0:q.status)==="in-progress"?"primary":(q==null?void 0:q.status)==="blocked"?"danger":"default",size:"sm",children:q==null?void 0:q.status})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"font-semibold text-lg",children:[G.hoursPerDay,"h"]}),s.jsx("div",{className:"text-sm text-gray-600",children:"allocated"})]})]},`${G.userId}-${G.taskId}`)})})})]},_.id)})});return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Daily Allocations"}),s.jsx("p",{className:"text-gray-600",children:"View team member and project task allocations"})]}),s.jsx(D,{icon:s.jsx(nt,{className:"w-4 h-4"}),onClick:()=>o(!0),children:"Add Allocation"})]}),s.jsxs("div",{className:"flex items-center justify-between bg-white p-4 rounded-lg border border-gray-200",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(D,{variant:"ghost",size:"sm",onClick:()=>F("prev"),children:s.jsx(rp,{className:"w-4 h-4"})}),s.jsx("div",{className:"font-medium text-gray-900 min-w-[200px] text-center",children:ne()}),s.jsx(D,{variant:"ghost",size:"sm",onClick:()=>F("next"),children:s.jsx(Jt,{className:"w-4 h-4"})})]}),s.jsx(D,{variant:"outline",size:"sm",onClick:()=>t(new Date),children:"Today"})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Group by:"}),s.jsxs(D,{variant:a==="team"?"primary":"ghost",size:"sm",onClick:()=>l("team"),children:[s.jsx(Le,{className:"w-4 h-4 mr-1"}),"Team"]}),s.jsxs(D,{variant:a==="project"?"primary":"ghost",size:"sm",onClick:()=>l("project"),children:[s.jsx(Js,{className:"w-4 h-4 mr-1"}),"Project"]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(D,{variant:r==="day"?"primary":"ghost",size:"sm",onClick:()=>n("day"),children:"Day"}),s.jsx(D,{variant:r==="week"?"primary":"ghost",size:"sm",onClick:()=>n("week"),children:"Week"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[s.jsx(K,{children:s.jsx(Y,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 rounded-lg bg-blue-50",children:s.jsx(Ai,{className:"w-6 h-6 text-blue-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Team"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:g.length})]})]})})}),s.jsx(K,{children:s.jsx(Y,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 rounded-lg bg-green-50",children:s.jsx(ir,{className:"w-6 h-6 text-green-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Available"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:g.filter(_=>z(_.id,e)==="available").length})]})]})})}),s.jsx(K,{children:s.jsx(Y,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 rounded-lg bg-yellow-50",children:s.jsx(_s,{className:"w-6 h-6 text-yellow-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Busy"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:g.filter(_=>z(_.id,e)==="busy").length})]})]})})}),s.jsx(K,{children:s.jsx(Y,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 rounded-lg bg-red-50",children:s.jsx(_t,{className:"w-6 h-6 text-red-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Overloaded"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:g.filter(_=>z(_.id,e)==="overloaded").length})]})]})})})]}),h&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(_t,{className:"w-5 h-5 text-red-400 mr-2"}),s.jsx("span",{className:"text-red-800",children:h})]})}),L&&s.jsxs("div",{className:"flex items-center justify-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),s.jsx("span",{className:"ml-2 text-gray-600",children:"Loading allocations..."})]}),!L&&(r==="week"?a==="team"?ye():Oe():We()),s.jsx(cf,{isOpen:i,onClose:()=>o(!1),onSubmit:me,users:g,projects:d,tasks:w})]})}function cf({isOpen:e,onClose:t,onSubmit:r,users:n,projects:a,tasks:l}){const[i,o]=m.useState({userId:"",projectId:"",taskId:"",hoursPerDay:8,startDate:new Date().toISOString().split("T")[0],endDate:new Date(Date.now()+6048e5).toISOString().split("T")[0]}),c=g=>{g.preventDefault(),r({...i,startDate:new Date(i.startDate),endDate:new Date(i.endDate)}),o({userId:"",projectId:"",taskId:"",hoursPerDay:8,startDate:new Date().toISOString().split("T")[0],endDate:new Date(Date.now()+7*24*60*60*1e3).toISOString().split("T")[0]})},p=l.filter(g=>!i.projectId||g.projectId===i.projectId);return s.jsx(Ke,{isOpen:e,onClose:t,title:"Add Team Allocation",size:"lg",children:s.jsxs("form",{onSubmit:c,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Team Member *"}),s.jsxs("select",{required:!0,value:i.userId,onChange:g=>o({...i,userId:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Select Team Member"}),n.map(g=>s.jsx("option",{value:g.id,children:g.name},g.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project *"}),s.jsxs("select",{required:!0,value:i.projectId,onChange:g=>o({...i,projectId:g.target.value,taskId:""}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Select Project"}),a.map(g=>s.jsx("option",{value:g.id,children:g.name},g.id))]})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Task *"}),s.jsxs("select",{required:!0,value:i.taskId,onChange:g=>o({...i,taskId:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:!i.projectId,children:[s.jsx("option",{value:"",children:"Select Task"}),p.map(g=>s.jsx("option",{value:g.id,children:g.name},g.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hours per Day"}),s.jsx("input",{type:"number",min:"0.5",max:"12",step:"0.5",value:i.hoursPerDay,onChange:g=>o({...i,hoursPerDay:parseFloat(g.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),s.jsx("input",{type:"date",value:i.startDate,onChange:g=>o({...i,startDate:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),s.jsx("input",{type:"date",value:i.endDate,onChange:g=>o({...i,endDate:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx(D,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),s.jsx(D,{type:"submit",children:"Add Allocation"})]})]})})}function df(){const[e,t]=m.useState("categories"),[r,n]=m.useState(!1),[a,l]=m.useState(null),[i,o]=m.useState(!1),[c,p]=m.useState(null),[g,j]=m.useState("eLearning Design"),d=async M=>{try{ye(!0);const H=x.find(re=>re.name===M);if(H){console.log("Loading stages for category:",M,"ID:",H.id);const re=await Ot.getByCategory(H.id);console.log("Stages data received:",re),ne(re)}}catch(H){console.error("Failed to load stages for category:",H),ne([])}finally{ye(!1)}},[N,w]=m.useState([]),[P,L]=m.useState([]),[f,h]=m.useState("admin"),[x,b]=m.useState([]),[S,u]=m.useState([]),[v,C]=m.useState(!0),[A,z]=m.useState([{id:"1",name:"Content Development Unit",description:"Responsible for creating and developing educational content",skills:["Content Writers","Instructional Designers"],lead:"Sarah Johnson",isDefault:!0}]),{signUp:le}=An(),[F,ne]=m.useState([]),[me,ye]=m.useState(!1);m.useEffect(()=>{(async()=>{var H;try{C(!0);const[re,se]=await Promise.all([Ps.getAll(),ss.getAll()]);if(b(re),u(se),re.length>0&&(re.find(je=>je.name===g)||j(re[0].name)),re.length>0){const he=(H=re.find(je=>je.name===g))==null?void 0:H.id;if(he){console.log("Initial load - Loading stages for category:",g,"ID:",he);const je=await Ot.getByCategory(he);console.log("Initial stages data received:",je),ne(je)}}w([{id:"1",name:"Admin User",email:"admin@company.com",role:"admin",createdAt:new Date,isActive:!0}]);const ce=await _e.getAll();L(ce)}catch(re){console.error("Failed to load data:",re)}finally{C(!1)}})()},[g]);const Oe=[{key:"categories",label:"Categories",icon:fp},{key:"skills",label:"Skills",icon:Le},{key:"stages",label:"Project Stages",icon:Dn},{key:"users",label:"Admin Users",icon:Ba},{key:"functional-units",label:"Functional Units",icon:Le}],We=async(M,H)=>{var re;try{if(M==="category")if(a!=null&&a.id){const se=await Ps.update(a.id,{name:H.name,description:H.description||null});b(x.map(ce=>ce.id===a.id?se:ce))}else{const se=await Ps.create({name:H.name,description:H.description||null});b([...x,se])}else if(M==="skill")if(a!=null&&a.id){const se=await ss.update(a.id,{name:H.name,description:H.description||null});u(S.map(ce=>ce.id===a.id?se:ce))}else{const se=await ss.create({name:H.name,description:H.description||null});u([...S,se])}else if(M==="stage")try{if(a!=null&&a.id){const se=await Ot.update(a.id,{name:H.name,description:H.description||null});await d(g)}else{const se=await Ot.create({name:H.name,description:H.description||null,order_index:F.length+1}),ce=(re=x.find(he=>he.name===g))==null?void 0:re.id;ce&&await Ol.create({category_id:ce,stage_id:se.id,order_index:F.length+1,is_default:!1}),await d(g)}}catch(se){console.error("Failed to save stage:",se),alert("Failed to save stage. Please try again.")}else if(M==="admin-user"){$(H,"admin");return}else if(M==="team-user"){$(H,"team");return}else if(M==="functional-unit"){const se={id:Date.now().toString(),name:H.name,description:H.description||"",skills:H.skills||[],lead:H.lead||"",isDefault:!1};z([...A,se])}n(!1),l(null)}catch(se){console.error("Failed to add item:",se),alert("Failed to add item. Please try again.")}},_=async(M,H)=>{M==="category"||M==="skill"?(l({...H,type:M}),n(!0)):(l({...H,type:M}),n(!0))},E=async(M,H)=>{var re;try{if(M==="category")await Ps.delete(H),b(x.filter(se=>se.id!==H));else if(M==="skill")await ss.delete(H),u(S.filter(se=>se.id!==H));else if(M==="stage")try{const se=(re=x.find(ce=>ce.name===g))==null?void 0:re.id;if(se)try{const he=(await Ol.getByCategory(se)).find(je=>je.stage_id===H);he&&await Ol.delete(he.id)}catch{console.log("No stage template found to delete")}await Ot.delete(H),ne(F.filter(ce=>ce.id!==H))}catch(se){console.error("Failed to delete stage:",se),alert("Failed to delete stage. Please try again.")}else M==="admin-user"?w(N.filter(se=>se.id!==H)):M==="team-user"?ee(H):M==="functional-unit"&&z(A.filter(se=>se.id!==H))}catch(se){console.error("Failed to delete item:",se),alert("Failed to delete item. Please try again.")}},$=async(M,H)=>{try{if(H==="admin"){const{data:re,error:se}=await le(M.email,M.password,M.name);if(se)throw se;if(re.user){const ce={id:re.user.id,name:M.name,email:M.email,role:"admin",createdAt:new Date,isActive:!0};w([...N,ce])}}else{const re={name:M.name,email:M.email,skills:M.skills||[],passcode:M.passcode||Math.random().toString(36).substring(2,8).toUpperCase(),isActive:M.isActive!==!1,performanceFlags:[]},se=await _e.create(re),ce={...re,id:se.id};L([...P,ce])}n(!1),l(null)}catch(re){console.error("Failed to create admin user:",re),alert(`Failed to create user: ${re.message}`)}},B=async(M,H)=>{try{if(H==="admin"){alert("Admin user access control requires server-side implementation");return}else{const re=P.find(se=>se.id===M);if(re){const se={...re,isActive:!re.isActive};await _e.update(M,se),L(P.map(ce=>ce.id===M?se:ce))}}}catch(re){console.error("Failed to toggle user access:",re),alert("Failed to toggle user access")}},G=async(M,H)=>{p(M),h(H),o(!0)},ee=async M=>{try{L(P.filter(H=>H.id!==M))}catch(H){console.error("Failed to delete team member:",H)}},q=async(M,H)=>{var re;try{console.log("moveStage called:",{stageId:M,direction:H,currentStages:F});const se=[...F].sort((Q,V)=>(Q.template_order||Q.order_index)-(V.template_order||V.order_index)),ce=se.findIndex(Q=>Q.id===M);if(console.log("Stage index found:",ce),ce===-1){console.log("Stage not found, returning");return}const he=[...se],je=H==="up"?ce-1:ce+1;if(console.log("Target index:",je),je<0||je>=he.length){console.log("Target index out of bounds, returning");return}[he[ce],he[je]]=[he[je],he[ce]],console.log("Stages swapped"),he.forEach((Q,V)=>{Q.template_order=V+1}),console.log("Order numbers updated:",he.map(Q=>({id:Q.id,order:Q.template_order}))),ne(he),console.log("Stages state updated");const Xe=(re=x.find(Q=>Q.name===g))==null?void 0:re.id;if(Xe){const Q=he.map((V,fe)=>({stage_id:V.id,order:fe+1}));console.log("Sending reorder request:",{categoryId:Xe,stageOrders:Q}),await Ot.reorder(Xe,Q),console.log("Reorder request completed successfully")}}catch(se){console.error("Failed to reorder stages:",se),alert("Failed to reorder stages. Please try again.")}},k=()=>s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Project Categories"}),s.jsx(D,{icon:s.jsx(nt,{className:"w-4 h-4"}),onClick:()=>{l({type:"category"}),n(!0)},children:"Add Category"})]}),v?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading categories..."})]})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:x.map(M=>s.jsx(K,{className:"hover:shadow-md transition-shadow",children:s.jsx(Y,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:M.name}),s.jsx("p",{className:"text-sm text-gray-600",children:M.isDefault?"Default category":"Custom category"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(D,{variant:"ghost",size:"sm",onClick:()=>_("category",M),children:s.jsx(Cs,{className:"w-4 h-4"})}),!M.isDefault&&s.jsx(D,{variant:"ghost",size:"sm",onClick:()=>E("category",M.id),children:s.jsx(mt,{className:"w-4 h-4"})})]})]})})},M.id))})]}),ie=()=>s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Team Skills"}),s.jsx(D,{icon:s.jsx(nt,{className:"w-4 h-4"}),onClick:()=>{l({type:"skill"}),n(!0)},children:"Add Skill"})]}),v?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading skills..."})]})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:S.map(M=>s.jsx(K,{className:"hover:shadow-md transition-shadow",children:s.jsx(Y,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:M.name}),s.jsx("p",{className:"text-sm text-gray-600",children:M.isDefault?"Default skill":"Custom skill"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(D,{variant:"ghost",size:"sm",onClick:()=>_("skill",M),children:s.jsx(Cs,{className:"w-4 h-4"})}),!M.isDefault&&s.jsx(D,{variant:"ghost",size:"sm",onClick:()=>E("skill",M.id),children:s.jsx(mt,{className:"w-4 h-4"})})]})]})})},M.id))})]}),oe=()=>s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Project Stages"}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("select",{value:g,onChange:M=>{j(M.target.value),d(M.target.value)},className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:x.map(M=>s.jsx("option",{value:M.name,children:M.name},M.id))}),s.jsx(D,{icon:s.jsx(nt,{className:"w-4 h-4"}),onClick:()=>{l({type:"stage"}),n(!0)},children:"Add Stage"})]})]}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsxs("h4",{className:"font-medium text-blue-900 mb-2",children:["Category: ",g]}),s.jsxs("p",{className:"text-sm text-blue-700",children:["These stages are specific to ",s.jsx("strong",{children:g})," projects. Each category can have its own unique workflow."]})]}),s.jsx(K,{children:s.jsx(Y,{className:"p-0",children:s.jsx("div",{className:"space-y-2 p-4",children:me?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading stages..."})]})}):F.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsxs("div",{className:"text-gray-500 mb-4",children:[s.jsx(Dn,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),s.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"No stages found"}),s.jsx("p",{className:"text-gray-600",children:"No stages have been created for this category yet."})]}),s.jsx(D,{icon:s.jsx(nt,{className:"w-4 h-4"}),onClick:()=>{l({type:"stage"}),n(!0)},children:"Add First Stage"})]}):F.sort((M,H)=>(M.template_order||M.order_index)-(H.template_order||H.order_index)).map((M,H,re)=>s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex flex-col space-y-1",children:[s.jsx(D,{variant:"ghost",size:"sm",onClick:()=>q(M.id,"up"),disabled:H===0,className:"h-6 w-6 p-0",children:""}),s.jsx(D,{variant:"ghost",size:"sm",onClick:()=>q(M.id,"down"),disabled:H===re.length-1,className:"h-6 w-6 p-0",children:""})]}),s.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-blue-100 text-blue-600 rounded-full font-semibold text-sm",children:M.template_order||M.order_index}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:M.name}),s.jsx("p",{className:"text-sm text-gray-600",children:M.description})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[M.is_default&&s.jsx(X,{variant:"secondary",size:"sm",children:"Default"}),s.jsx(D,{variant:"ghost",size:"sm",onClick:()=>_("stage",M),children:s.jsx(Cs,{className:"w-4 h-4"})}),!M.is_default&&s.jsx(D,{variant:"ghost",size:"sm",onClick:()=>E("stage",M.id),children:s.jsx(mt,{className:"w-4 h-4"})})]})]},M.id))})})})]}),be=()=>s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"User Management"}),s.jsxs("div",{className:"flex items-center space-x-2 bg-gray-100 rounded-lg p-1",children:[s.jsx(D,{variant:f==="admin"?"primary":"ghost",size:"sm",onClick:()=>h("admin"),children:"Admin Users"}),s.jsx(D,{variant:f==="team"?"primary":"ghost",size:"sm",onClick:()=>h("team"),children:"Team Members"})]})]}),s.jsxs(D,{icon:s.jsx(nt,{className:"w-4 h-4"}),onClick:()=>{l({type:f==="admin"?"admin-user":"team-user"}),n(!0)},children:["Add ",f==="admin"?"Admin User":"Team Member"]})]}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:f==="admin"?"Admin User Management":"Team Member Management"}),s.jsx("p",{className:"text-sm text-blue-700",children:f==="admin"?"Admin users can access the full project management system. They can manage projects, teams, tasks, and settings.":"Team members can access the team portal to view their tasks and performance. They use email and passcode to login."})]}),s.jsx(K,{children:s.jsx(Y,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:f==="admin"?"Admin User":"Team Member"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),f==="team"&&s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Passcode"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:f==="admin"?"Role":"Skills"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:f==="admin"?"Created":"Performance"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(f==="admin"?N:P).map(M=>{var H,re,se,ce;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`w-8 h-8 ${f==="admin"?"bg-blue-500":"bg-green-500"} rounded-full flex items-center justify-center text-white text-sm font-medium`,children:M.name.charAt(0).toUpperCase()}),s.jsx("div",{className:"ml-3",children:s.jsx("div",{className:"text-sm font-medium text-gray-900",children:M.name})})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:M.email}),f==="team"&&s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("code",{className:"text-xs bg-gray-100 px-2 py-1 rounded font-mono",children:M.passcode})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f==="admin"?s.jsx(X,{variant:"primary",size:"sm",children:M.role}):s.jsxs("div",{className:"flex flex-wrap gap-1",children:[(H=M.skills)==null?void 0:H.slice(0,2).map((he,je)=>s.jsx(X,{variant:"secondary",size:"sm",children:he},je)),((re=M.skills)==null?void 0:re.length)>2&&s.jsxs(X,{variant:"secondary",size:"sm",children:["+",M.skills.length-2]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.jsx(X,{variant:M.isActive?"success":"secondary",children:M.isActive?"Active":"Disabled"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:f==="admin"?((se=M.createdAt)==null?void 0:se.toLocaleDateString())||"N/A":s.jsx("div",{className:"flex space-x-1",children:(ce=M.performanceFlags)==null?void 0:ce.slice(0,3).map(he=>s.jsx("div",{className:`text-xs px-2 py-1 rounded ${he.type==="gold"?"bg-yellow-500 text-white":he.type==="green"?"bg-green-500 text-white":he.type==="orange"?"bg-orange-500 text-white":"bg-red-500 text-white"}`,title:he.reason,children:he.type},he.id))})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:s.jsxs(D,{variant:"ghost",size:"sm",onClick:()=>E("user",M.id),children:[s.jsx(D,{variant:"ghost",size:"sm",onClick:()=>G(M,f),title:f==="admin"?"Reset Password":"Reset Passcode",children:s.jsx(cp,{className:"w-4 h-4"})}),s.jsx(D,{variant:"ghost",size:"sm",onClick:()=>B(M.id,f),title:M.isActive?"Disable Access":"Enable Access",children:M.isActive?s.jsx(ll,{className:"w-4 h-4"}):s.jsx(Gs,{className:"w-4 h-4"})}),s.jsx(D,{variant:"ghost",size:"sm",onClick:()=>E(f==="admin"?"admin-user":"team-user",M.id),children:s.jsx(mt,{className:"w-4 h-4"})})]})})]},M.id)})})]})})})})]}),De=()=>s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Functional Units"}),s.jsx(D,{icon:s.jsx(nt,{className:"w-4 h-4"}),onClick:()=>{l({type:"functional-unit"}),n(!0)},children:"Add Functional Unit"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:A.map(M=>s.jsx(K,{className:"hover:shadow-md transition-shadow",children:s.jsx(Y,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:M.name}),s.jsx("p",{className:"text-sm text-gray-600",children:M.description}),M.skills&&M.skills.length>0&&s.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:M.skills.map((H,re)=>s.jsx(X,{variant:"secondary",size:"sm",children:H},re))}),M.lead&&s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Lead: ",M.lead]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(D,{variant:"ghost",size:"sm",onClick:()=>_("functional-unit",M),children:s.jsx(Cs,{className:"w-4 h-4"})}),!M.isDefault&&s.jsx(D,{variant:"ghost",size:"sm",onClick:()=>E("functional-unit",M.id),children:s.jsx(mt,{className:"w-4 h-4"})})]})]})})},M.id))})]});return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Settings"}),s.jsx("p",{className:"text-gray-600",children:"Manage categories, skills, and project stages"})]}),s.jsx("div",{className:"border-b border-gray-200",children:s.jsx("nav",{className:"-mb-px flex space-x-8",children:Oe.map(M=>s.jsxs("button",{onClick:()=>t(M.key),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${e===M.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[s.jsx(M.icon,{className:"w-4 h-4"}),s.jsx("span",{children:M.label})]},M.key))})}),s.jsxs("div",{children:[e==="categories"&&k(),e==="skills"&&ie(),e==="stages"&&oe(),e==="users"&&be(),e==="functional-units"&&De()]}),s.jsx(uf,{isOpen:r,onClose:()=>{n(!1),l(null)},onSubmit:We,editingItem:a})]})}function uf({isOpen:e,onClose:t,onSubmit:r,editingItem:n}){const[a,l]=m.useState({name:"",description:"",email:"",password:"",showPassword:!1,skills:[],lead:""});m.useEffect(()=>{l(n?{name:n.name||"",description:n.description||"",email:n.email||"",password:"",showPassword:!1,skills:n.skills||[],lead:n.lead||""}:{name:"",description:"",email:"",password:"",showPassword:!1,skills:[],lead:""})},[n]);const i=c=>{c.preventDefault(),n!=null&&n.type&&r(n.type,a),l({name:"",description:"",email:"",password:"",showPassword:!1,skills:[],lead:""})},o=()=>{if(!n)return"Add Item";const c=n.id?"Edit":"Add",p=n.type==="category"?"Category":n.type==="skill"?"Skill":n.type==="stage"?"Stage":n.type==="functional-unit"?"Functional Unit":"Admin User";return`${c} ${p}`};return s.jsx(Ke,{isOpen:e,onClose:t,title:o(),children:s.jsxs("form",{onSubmit:i,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name"}),s.jsx("input",{type:"text",required:!0,value:a.name,onChange:c=>l({...a,name:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:`Enter ${(n==null?void 0:n.type)||"item"} name`})]}),((n==null?void 0:n.type)==="admin-user"||(n==null?void 0:n.type)==="team-user")&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),s.jsx("input",{type:"email",required:!0,value:a.email,onChange:c=>l({...a,email:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter email address"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:a.showPassword?"text":"password",required:!0,value:a.password,onChange:c=>l({...a,password:c.target.value}),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter password",minLength:6}),s.jsx("button",{type:"button",onClick:()=>l({...a,showPassword:!a.showPassword}),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:a.showPassword?s.jsx(ll,{className:"w-4 h-4 text-gray-400"}):s.jsx(Gs,{className:"w-4 h-4 text-gray-400"})})]})]})]}),((n==null?void 0:n.type)==="stage"||(n==null?void 0:n.type)==="functional-unit")&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),s.jsx("textarea",{value:a.description,onChange:c=>l({...a,description:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:`Enter ${(n==null?void 0:n.type)==="stage"?"stage":"functional unit"} description`})]}),(n==null?void 0:n.type)==="functional-unit"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Skills"}),s.jsx("div",{className:"grid grid-cols-3 gap-2 max-h-32 overflow-y-auto border border-gray-300 rounded-lg p-2",children:["Content Writers","Instructional Designers","Graphic Designers","Developers","Animators","Tech","Sales","Marketing","QA"].map(c=>s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:a.skills.includes(c),onChange:p=>{p.target.checked?l({...a,skills:[...a.skills,c]}):l({...a,skills:a.skills.filter(g=>g!==c)})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:c})]},c))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unit Lead (Optional)"}),s.jsx("input",{type:"text",value:a.lead,onChange:c=>l({...a,lead:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter unit lead name"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx(D,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),s.jsx(D,{type:"submit",children:n!=null&&n.id?"Update":"Add"})]})]})})}function mf(){const[e,t]=m.useState("month"),[r,n]=m.useState("overview"),[a,l]=m.useState("all"),[i,o]=m.useState("all"),[c,p]=m.useState(!0),[g,j]=m.useState(!1),[d,N]=m.useState({projects:[],tasks:[],teamMembers:[],categories:[],skills:[]});m.useEffect(()=>{w()},[]);const w=async()=>{try{p(!0);const[u,v,C,A,z]=await Promise.all([Ue.getAll(),ze.getAll(),_e.getAll(),Ps.getAll(),ss.getAll()]);N({projects:u,tasks:v,teamMembers:C,categories:A,skills:z})}catch(u){console.error("Failed to load analytics data:",u)}finally{p(!1)}},P=async()=>{j(!0),await w(),j(!1)},L=m.useMemo(()=>{const u=a==="all"?d.projects:d.projects.filter(F=>F.category_id===parseInt(a)),v=i==="all"?d.tasks:d.tasks.filter(F=>F.skills&&F.skills.includes(parseInt(i))),C=new Date,A={week:7,month:30,quarter:90,year:365}[e],z=d.tasks.filter(F=>{const ne=new Date(F.created_at);return(C.getTime()-ne.getTime())/(1e3*3600*24)<=A}),le=d.projects.filter(F=>{const ne=new Date(F.created_at);return(C.getTime()-ne.getTime())/(1e3*3600*24)<=A});return{projectStats:{total:u.length,active:u.filter(F=>F.status==="active").length,completed:u.filter(F=>F.status==="completed").length,onHold:u.filter(F=>F.status==="on-hold").length,recent:le.length,avgDuration:u.length>0?Math.round(u.reduce((F,ne)=>{if(ne.start_date&&ne.end_date){const me=new Date(ne.start_date),ye=new Date(ne.end_date);return F+(ye.getTime()-me.getTime())/(1e3*3600*24)}return F},0)/u.length):0},taskStats:{total:v.length,completed:v.filter(F=>F.status==="completed").length,inProgress:v.filter(F=>F.status==="in-progress").length,overdue:v.filter(F=>new Date(F.end_date)<C&&F.status!=="completed").length,recent:z.length,avgCompletionTime:v.filter(F=>F.status==="completed").length>0?Math.round(v.filter(F=>F.status==="completed").reduce((F,ne)=>{if(ne.created_at&&ne.updated_at){const me=new Date(ne.created_at),ye=new Date(ne.updated_at);return F+(ye.getTime()-me.getTime())/(1e3*3600*24)}return F},0)/v.filter(F=>F.status==="completed").length):0},teamStats:{total:d.teamMembers.length,active:d.teamMembers.filter(F=>v.some(ne=>ne.assignees&&ne.assignees.includes(F.id)&&ne.status!=="completed")).length,available:d.teamMembers.filter(F=>!v.some(ne=>ne.assignees&&ne.assignees.includes(F.id)&&ne.status!=="completed")).length,utilization:d.teamMembers.length>0?Math.round(d.teamMembers.filter(F=>v.some(ne=>ne.assignees&&ne.assignees.includes(F.id)&&ne.status!=="completed")).length/d.teamMembers.length*100):0},productivity:{completionRate:v.length>0?Math.round(v.filter(F=>F.status==="completed").length/v.length*100):0,averageProgress:u.length>0?Math.round(u.reduce((F,ne)=>F+(ne.progress||0),0)/u.length):0,efficiency:v.length>0?Math.round(v.filter(F=>F.status==="completed").length/v.length*(u.reduce((F,ne)=>F+(ne.progress||0),0)/u.length)*100):0},trends:{taskGrowth:z.length>0?Math.round(z.length/d.tasks.length*100):0,projectGrowth:le.length>0?Math.round(le.length/d.projects.length*100):0,completionTrend:z.filter(F=>F.status==="completed").length>0?Math.round(z.filter(F=>F.status==="completed").length/z.length*100):0}}},[d,e,a,i]),f=m.useMemo(()=>d.categories.map(u=>({name:u.name,count:d.projects.filter(v=>v.category_id===u.id).length,percentage:d.projects.length>0?Math.round(d.projects.filter(v=>v.category_id===u.id).length/d.projects.length*100):0,avgProgress:d.projects.filter(v=>v.category_id===u.id).length>0?Math.round(d.projects.filter(v=>v.category_id===u.id).reduce((v,C)=>v+(C.progress||0),0)/d.projects.filter(v=>v.category_id===u.id).length):0,completionRate:d.projects.filter(v=>v.category_id===u.id).length>0?Math.round(d.projects.filter(v=>v.category_id===u.id&&v.status==="completed").length/d.projects.filter(v=>v.category_id===u.id).length*100):0})),[d]),h=m.useMemo(()=>d.skills.map(u=>{const v=d.tasks.filter(A=>A.skills&&A.skills.includes(u.id)),C=d.teamMembers.filter(A=>A.skills&&A.skills.includes(u.id));return{name:u.name,users:C.length,activeTasks:v.filter(A=>A.status!=="completed").length,totalTasks:v.length,completionRate:v.length>0?Math.round(v.filter(A=>A.status==="completed").length/v.length*100):0,demand:v.length>0?Math.round(v.length/d.tasks.length*100):0}}),[d]),x=m.useMemo(()=>d.teamMembers.map(u=>{const v=d.tasks.filter(le=>le.assignees&&le.assignees.includes(u.id)),C=v.filter(le=>le.status==="completed"),A=v.length>0?Math.round(C.length/v.length*100):0,z=v.length>0?Math.round(A*.4+v.filter(le=>le.status==="completed"&&new Date(le.end_date)>=new Date).length/v.length*60):0;return{...u,totalTasks:v.length,completedTasks:C.length,completionRate:A,efficiencyScore:z,avgTaskDuration:C.length>0?Math.round(C.reduce((le,F)=>{if(F.created_at&&F.updated_at){const ne=new Date(F.created_at),me=new Date(F.updated_at);return le+(me.getTime()-ne.getTime())/(1e3*3600*24)}return le},0)/C.length):0}}).sort((u,v)=>v.efficiencyScore-u.efficiencyScore).slice(0,5),[d]),b=m.useMemo(()=>{const u=d.tasks.filter(A=>new Date(A.end_date)<new Date&&A.status!=="completed"),v=d.tasks.filter(A=>A.priority==="high"),C=d.projects.filter(A=>(A.progress||0)<30);return{overdueTasks:u.length,highPriorityTasks:v.length,lowProgressProjects:C.length,riskScore:Math.round((u.length*.4+v.length*.3+C.length*.3)/Math.max(d.tasks.length+d.projects.length,1)*100),efficiencyGap:L.productivity.completionRate>0?Math.round((100-L.productivity.completionRate)/10):0}},[d,L]),S=m.useMemo(()=>{const u=new Date,v=d.tasks.filter(A=>{const z=new Date(A.created_at);return(u.getTime()-z.getTime())/(1e3*3600*24)<=7}),C=d.tasks.filter(A=>{const z=new Date(A.created_at);return(u.getTime()-z.getTime())/(1e3*3600*24)<=30});return{weeklyGrowth:v.length>0?Math.round(v.length/d.tasks.length*100):0,monthlyGrowth:C.length>0?Math.round(C.length/d.tasks.length*100):0,weeklyCompletion:v.filter(A=>A.status==="completed").length,monthlyCompletion:C.filter(A=>A.status==="completed").length}},[d]);return c?s.jsx("div",{className:"p-6 space-y-6",children:s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading analytics data..."})]})})}):s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Analytics Dashboard"}),s.jsx("p",{className:"text-gray-600",children:"Advanced insights and performance metrics for your projects"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 rounded-lg p-1",children:[s.jsxs(D,{variant:r==="overview"?"primary":"ghost",size:"sm",onClick:()=>n("overview"),children:[s.jsx(Gs,{className:"w-4 h-4 mr-1"}),"Overview"]}),s.jsxs(D,{variant:r==="detailed"?"primary":"ghost",size:"sm",onClick:()=>n("detailed"),children:[s.jsx(ep,{className:"w-4 h-4 mr-1"}),"Detailed"]}),s.jsxs(D,{variant:r==="trends"?"primary":"ghost",size:"sm",onClick:()=>n("trends"),children:[s.jsx(cn,{className:"w-4 h-4 mr-1"}),"Trends"]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("select",{value:a,onChange:u=>l(u.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[s.jsx("option",{value:"all",children:"All Categories"}),d.categories.map(u=>s.jsx("option",{value:u.id,children:u.name},u.id))]}),s.jsxs("select",{value:i,onChange:u=>o(u.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[s.jsx("option",{value:"all",children:"All Skills"}),d.skills.map(u=>s.jsx("option",{value:u.id,children:u.name},u.id))]}),s.jsxs("select",{value:e,onChange:u=>t(u.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[s.jsx("option",{value:"week",children:"Last Week"}),s.jsx("option",{value:"month",children:"Last Month"}),s.jsx("option",{value:"quarter",children:"Last Quarter"}),s.jsx("option",{value:"year",children:"Last Year"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(D,{variant:"outline",size:"sm",onClick:P,disabled:g,children:[s.jsx(Ii,{className:`w-4 h-4 mr-1 ${g?"animate-spin":""}`}),"Refresh"]}),s.jsxs(D,{variant:"outline",size:"sm",children:[s.jsx(ap,{className:"w-4 h-4 mr-1"}),"Export"]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(K,{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:s.jsx(Y,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("p",{className:"text-blue-100 text-sm font-medium",children:"Efficiency Score"}),s.jsx(X,{variant:"default",className:"bg-blue-400 text-white text-xs",children:L.productivity.efficiency>L.productivity.completionRate?s.jsx(Jx,{className:"w-3 h-3"}):s.jsx(Xx,{className:"w-3 h-3"})})]}),s.jsxs("p",{className:"text-3xl font-bold",children:[L.productivity.efficiency,"%"]}),s.jsxs("p",{className:"text-blue-100 text-sm",children:[L.productivity.completionRate,"% completion rate"]})]}),s.jsx(ga,{className:"w-12 h-12 text-blue-200"})]})})}),s.jsx(K,{className:"bg-gradient-to-r from-green-500 to-green-600 text-white",children:s.jsx(Y,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("p",{className:"text-green-100 text-sm font-medium",children:"Team Utilization"}),s.jsxs(X,{variant:"default",className:"bg-green-400 text-white text-xs",children:[L.teamStats.utilization,"%"]})]}),s.jsx("p",{className:"text-3xl font-bold",children:L.teamStats.active}),s.jsxs("p",{className:"text-green-100 text-sm",children:["of ",L.teamStats.total," members active"]})]}),s.jsx(Le,{className:"w-12 h-12 text-green-200"})]})})}),s.jsx(K,{className:"bg-gradient-to-r from-purple-500 to-purple-600 text-white",children:s.jsx(Y,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("p",{className:"text-purple-100 text-sm font-medium",children:"Productivity"}),s.jsxs(X,{variant:"default",className:"bg-purple-400 text-white text-xs",children:[L.trends.completionTrend,"% trend"]})]}),s.jsxs("p",{className:"text-3xl font-bold",children:[L.productivity.averageProgress,"%"]}),s.jsxs("p",{className:"text-purple-100 text-sm",children:[L.taskStats.completed,"/",L.taskStats.total," tasks done"]})]}),s.jsx(xp,{className:"w-12 h-12 text-purple-200"})]})})}),s.jsx(K,{className:"bg-gradient-to-r from-red-500 to-red-600 text-white",children:s.jsx(Y,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("p",{className:"text-red-100 text-sm font-medium",children:"Risk Score"}),s.jsxs(X,{variant:"default",className:"bg-red-400 text-white text-xs",children:[b.riskScore,"%"]})]}),s.jsx("p",{className:"text-3xl font-bold",children:L.taskStats.overdue}),s.jsxs("p",{className:"text-red-100 text-sm",children:[b.highPriorityTasks," high priority"]})]}),s.jsx(_t,{className:"w-12 h-12 text-red-200"})]})})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx(K,{className:"bg-gradient-to-r from-yellow-500 to-yellow-600 text-white",children:s.jsx(Y,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-yellow-100 text-sm font-medium",children:"Weekly Growth"}),s.jsxs("p",{className:"text-2xl font-bold",children:[S.weeklyGrowth,"%"]}),s.jsxs("p",{className:"text-yellow-100 text-sm",children:[S.weeklyCompletion," completed this week"]})]}),s.jsx(cn,{className:"w-10 h-10 text-yellow-200"})]})})}),s.jsx(K,{className:"bg-gradient-to-r from-indigo-500 to-indigo-600 text-white",children:s.jsx(Y,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-indigo-100 text-sm font-medium",children:"Avg Task Duration"}),s.jsx("p",{className:"text-2xl font-bold",children:L.taskStats.avgCompletionTime}),s.jsx("p",{className:"text-indigo-100 text-sm",children:"days to complete"})]}),s.jsx(np,{className:"w-10 h-10 text-indigo-200"})]})})}),s.jsx(K,{className:"bg-gradient-to-r from-pink-500 to-pink-600 text-white",children:s.jsx(Y,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-pink-100 text-sm font-medium",children:"Efficiency Gap"}),s.jsxs("p",{className:"text-2xl font-bold",children:[b.efficiencyGap,"%"]}),s.jsx("p",{className:"text-pink-100 text-sm",children:"room for improvement"})]}),s.jsx(ip,{className:"w-10 h-10 text-pink-200"})]})})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(K,{children:[s.jsx(Te,{children:s.jsxs(Ee,{className:"flex items-center",children:[s.jsx(hp,{className:"w-5 h-5 mr-2"}),"Project Status Distribution"]})}),s.jsx(Y,{className:"space-y-4",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-32",children:s.jsx(gt,{value:L.projectStats.total>0?L.projectStats.active/L.projectStats.total*100:0,variant:"default",showLabel:!1})}),s.jsx("span",{className:"text-sm text-gray-600",children:L.projectStats.active})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Completed"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-32",children:s.jsx(gt,{value:L.projectStats.total>0?L.projectStats.completed/L.projectStats.total*100:0,variant:"success",showLabel:!1})}),s.jsx("span",{className:"text-sm text-gray-600",children:L.projectStats.completed})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"On Hold"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-32",children:s.jsx(gt,{value:L.projectStats.total>0?L.projectStats.onHold/L.projectStats.total*100:0,variant:"warning",showLabel:!1})}),s.jsx("span",{className:"text-sm text-gray-600",children:L.projectStats.onHold})]})]})]})})]}),s.jsxs(K,{children:[s.jsx(Te,{children:s.jsxs(Ee,{className:"flex items-center",children:[s.jsx(_s,{className:"w-5 h-5 mr-2"}),"Category Performance"]})}),s.jsx(Y,{className:"space-y-4",children:f.map(u=>s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:u.name}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(X,{variant:u.completionRate>=80?"success":u.completionRate>=60?"default":"warning",children:[u.completionRate,"%"]}),s.jsxs("span",{className:"text-sm text-gray-600",children:[u.count," projects"]})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[s.jsx("span",{children:"Distribution"}),s.jsxs("span",{children:[u.percentage,"%"]})]}),s.jsx(gt,{value:u.percentage,showLabel:!1}),s.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[s.jsx("span",{children:"Avg Progress"}),s.jsxs("span",{children:[u.avgProgress,"%"]})]}),s.jsx(gt,{value:u.avgProgress,variant:"success",showLabel:!1})]})]},u.name))})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(K,{children:[s.jsx(Te,{children:s.jsxs(Ee,{className:"flex items-center",children:[s.jsx(Gc,{className:"w-5 h-5 mr-2"}),"Top Performers"]})}),s.jsx(Y,{className:"space-y-4",children:x.map((u,v)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-gradient-to-r from-yellow-400 to-yellow-600 text-white rounded-full font-semibold text-sm",children:v===0?s.jsx(Gc,{className:"w-4 h-4"}):v===1?s.jsx(Pi,{className:"w-4 h-4"}):v===2?s.jsx(fm,{className:"w-4 h-4"}):`#${v+1}`}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:u.name}),s.jsxs("p",{className:"text-sm text-gray-600",children:[u.completedTasks,"/",u.totalTasks," tasks  ",u.avgTaskDuration," days avg"]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs(X,{variant:u.efficiencyScore>=80?"success":u.efficiencyScore>=60?"default":"warning",children:[u.efficiencyScore,"%"]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Efficiency"})]})]},u.id))})]}),s.jsxs(K,{children:[s.jsx(Te,{children:s.jsxs(Ee,{className:"flex items-center",children:[s.jsx(Le,{className:"w-5 h-5 mr-2"}),"Skill Demand & Utilization"]})}),s.jsx(Y,{className:"space-y-4",children:h.slice(0,6).map(u=>s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:u.name}),s.jsxs("p",{className:"text-sm text-gray-600",children:[u.users," members  ",u.totalTasks," total tasks"]})]}),s.jsx("div",{className:"text-right",children:s.jsxs(X,{variant:u.demand>=20?"success":u.demand>=10?"default":"warning",children:[u.demand,"% demand"]})})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[s.jsx("span",{children:"Completion Rate"}),s.jsxs("span",{children:[u.completionRate,"%"]})]}),s.jsx(gt,{value:u.completionRate,variant:u.completionRate>=80?"success":u.completionRate>=60?"default":"warning",showLabel:!1}),s.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[s.jsx("span",{children:"Active Tasks"}),s.jsx("span",{children:u.activeTasks})]})]})]},u.name))})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(K,{children:[s.jsx(Te,{children:s.jsxs(Ee,{className:"flex items-center",children:[s.jsx(up,{className:"w-5 h-5 mr-2"}),"Performance Insights"]})}),s.jsx(Y,{className:"space-y-4",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(_t,{className:"w-5 h-5 text-orange-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Overdue Tasks"})]}),s.jsx(X,{variant:"warning",children:b.overdueTasks})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 bg-yellow-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ga,{className:"w-5 h-5 text-yellow-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"High Priority"})]}),s.jsx(X,{variant:"warning",children:b.highPriorityTasks})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(gp,{className:"w-5 h-5 text-red-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Low Progress Projects"})]}),s.jsx(X,{variant:"danger",children:b.lowProgressProjects})]})]})})]}),s.jsxs(K,{children:[s.jsx(Te,{children:s.jsxs(Ee,{className:"flex items-center",children:[s.jsx(wp,{className:"w-5 h-5 mr-2"}),"Quick Actions"]})}),s.jsx(Y,{className:"space-y-4",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs(D,{variant:"outline",className:"w-full justify-start",children:[s.jsx(ir,{className:"w-4 h-4 mr-2"}),"Review Overdue Tasks"]}),s.jsxs(D,{variant:"outline",className:"w-full justify-start",children:[s.jsx(ga,{className:"w-4 h-4 mr-2"}),"Prioritize High Priority Items"]}),s.jsxs(D,{variant:"outline",className:"w-full justify-start",children:[s.jsx(Le,{className:"w-4 h-4 mr-2"}),"Reassign Underutilized Team"]}),s.jsxs(D,{variant:"outline",className:"w-full justify-start",children:[s.jsx(cn,{className:"w-4 h-4 mr-2"}),"Optimize Workflow"]})]})})]})]}),s.jsxs(K,{children:[s.jsx(Te,{children:s.jsxs(Ee,{className:"flex items-center",children:[s.jsx(sp,{className:"w-5 h-5 mr-2"}),"Task Timeline Overview"]})}),s.jsx(Y,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[s.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[s.jsx("div",{className:"text-3xl font-bold text-blue-600",children:L.taskStats.total}),s.jsx("div",{className:"text-sm text-gray-600",children:"Total Tasks"}),s.jsxs("div",{className:"text-xs text-blue-500 mt-1",children:["+",S.weeklyGrowth,"% this week"]})]}),s.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[s.jsx("div",{className:"text-3xl font-bold text-green-600",children:L.taskStats.completed}),s.jsx("div",{className:"text-sm text-gray-600",children:"Completed"}),s.jsxs("div",{className:"text-xs text-green-500 mt-1",children:["+",S.weeklyCompletion," this week"]})]}),s.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[s.jsx("div",{className:"text-3xl font-bold text-purple-600",children:L.taskStats.inProgress}),s.jsx("div",{className:"text-sm text-gray-600",children:"In Progress"}),s.jsxs("div",{className:"text-xs text-purple-500 mt-1",children:[L.taskStats.avgCompletionTime," days avg"]})]}),s.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[s.jsx("div",{className:"text-3xl font-bold text-red-600",children:L.taskStats.overdue}),s.jsx("div",{className:"text-sm text-gray-600",children:"Overdue"}),s.jsxs("div",{className:"text-xs text-red-500 mt-1",children:["Risk Score: ",b.riskScore,"%"]})]})]})})]})]})}function hf(){const{state:e}=dr(),t=()=>{switch(e.selectedView){case"projects":return s.jsx(sf,{});case"teams":return s.jsx(nf,{});case"tasks":return s.jsx(Hp,{});case"allocations":return s.jsx(of,{});case"analytics":return s.jsx(mf,{});case"settings":return s.jsx(df,{});default:return s.jsx(zp,{})}};return s.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[s.jsx(Ap,{}),s.jsxs("div",{className:"flex-1 flex flex-col",children:[s.jsx(Lp,{}),s.jsx("main",{className:"flex-1 overflow-y-auto",children:t()})]})]})}function xf(){const{user:e,loading:t}=An(),[r,n]=m.useState(null),[a,l]=m.useState(!1);return t?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Ln,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-blue-600"}),s.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):a?r?s.jsx(_p,{user:r,onLogout:()=>{n(null),l(!1)}}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-emerald-100 flex items-center justify-center p-4",children:s.jsx(Sp,{onLogin:i=>n(i),onBackToAdmin:()=>l(!1)})}):e?s.jsx(hf,{}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:s.jsx(Np,{onSwitchToTeam:()=>l(!0)})})}lm(document.getElementById("root")).render(s.jsx(m.StrictMode,{children:s.jsx(Gx,{children:s.jsx(Mp,{children:s.jsx(xf,{})})})}));
