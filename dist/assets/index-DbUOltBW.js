(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(a){if(a.ep)return;a.ep=!0;const l=r(a);fetch(a.href,l)}})();var Mc={exports:{}},Ma={},Ic={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jn=Symbol.for("react.element"),im=Symbol.for("react.portal"),om=Symbol.for("react.fragment"),cm=Symbol.for("react.strict_mode"),dm=Symbol.for("react.profiler"),um=Symbol.for("react.provider"),mm=Symbol.for("react.context"),hm=Symbol.for("react.forward_ref"),xm=Symbol.for("react.suspense"),pm=Symbol.for("react.memo"),fm=Symbol.for("react.lazy"),wo=Symbol.iterator;function gm(e){return e===null||typeof e!="object"?null:(e=wo&&e[wo]||e["@@iterator"],typeof e=="function"?e:null)}var Ac={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Lc=Object.assign,zc={};function Dr(e,t,r){this.props=e,this.context=t,this.refs=zc,this.updater=r||Ac}Dr.prototype.isReactComponent={};Dr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Dr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Oc(){}Oc.prototype=Dr.prototype;function Ni(e,t,r){this.props=e,this.context=t,this.refs=zc,this.updater=r||Ac}var ki=Ni.prototype=new Oc;ki.constructor=Ni;Lc(ki,Dr.prototype);ki.isPureReactComponent=!0;var No=Array.isArray,Fc=Object.prototype.hasOwnProperty,bi={current:null},$c={key:!0,ref:!0,__self:!0,__source:!0};function Rc(e,t,r){var n,a={},l=null,i=null;if(t!=null)for(n in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(l=""+t.key),t)Fc.call(t,n)&&!$c.hasOwnProperty(n)&&(a[n]=t[n]);var o=arguments.length-2;if(o===1)a.children=r;else if(1<o){for(var c=Array(o),h=0;h<o;h++)c[h]=arguments[h+2];a.children=c}if(e&&e.defaultProps)for(n in o=e.defaultProps,o)a[n]===void 0&&(a[n]=o[n]);return{$$typeof:jn,type:e,key:l,ref:i,props:a,_owner:bi.current}}function ym(e,t){return{$$typeof:jn,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Si(e){return typeof e=="object"&&e!==null&&e.$$typeof===jn}function vm(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var ko=/\/+/g;function Xa(e,t){return typeof e=="object"&&e!==null&&e.key!=null?vm(""+e.key):t.toString(36)}function Kn(e,t,r,n,a){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(l){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case jn:case im:i=!0}}if(i)return i=e,a=a(i),e=n===""?"."+Xa(i,0):n,No(a)?(r="",e!=null&&(r=e.replace(ko,"$&/")+"/"),Kn(a,t,r,"",function(h){return h})):a!=null&&(Si(a)&&(a=ym(a,r+(!a.key||i&&i.key===a.key?"":(""+a.key).replace(ko,"$&/")+"/")+e)),t.push(a)),1;if(i=0,n=n===""?".":n+":",No(e))for(var o=0;o<e.length;o++){l=e[o];var c=n+Xa(l,o);i+=Kn(l,t,r,c,a)}else if(c=gm(e),typeof c=="function")for(e=c.call(e),o=0;!(l=e.next()).done;)l=l.value,c=n+Xa(l,o++),i+=Kn(l,t,r,c,a);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Dn(e,t,r){if(e==null)return e;var n=[],a=0;return Kn(e,n,"","",function(l){return t.call(r,l,a++)}),n}function jm(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var lt={current:null},qn={transition:null},wm={ReactCurrentDispatcher:lt,ReactCurrentBatchConfig:qn,ReactCurrentOwner:bi};function Uc(){throw Error("act(...) is not supported in production builds of React.")}me.Children={map:Dn,forEach:function(e,t,r){Dn(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Dn(e,function(){t++}),t},toArray:function(e){return Dn(e,function(t){return t})||[]},only:function(e){if(!Si(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};me.Component=Dr;me.Fragment=om;me.Profiler=dm;me.PureComponent=Ni;me.StrictMode=cm;me.Suspense=xm;me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wm;me.act=Uc;me.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Lc({},e.props),a=e.key,l=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,i=bi.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)Fc.call(t,c)&&!$c.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){o=Array(c);for(var h=0;h<c;h++)o[h]=arguments[h+2];n.children=o}return{$$typeof:jn,type:e.type,key:a,ref:l,props:n,_owner:i}};me.createContext=function(e){return e={$$typeof:mm,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:um,_context:e},e.Consumer=e};me.createElement=Rc;me.createFactory=function(e){var t=Rc.bind(null,e);return t.type=e,t};me.createRef=function(){return{current:null}};me.forwardRef=function(e){return{$$typeof:hm,render:e}};me.isValidElement=Si;me.lazy=function(e){return{$$typeof:fm,_payload:{_status:-1,_result:e},_init:jm}};me.memo=function(e,t){return{$$typeof:pm,type:e,compare:t===void 0?null:t}};me.startTransition=function(e){var t=qn.transition;qn.transition={};try{e()}finally{qn.transition=t}};me.unstable_act=Uc;me.useCallback=function(e,t){return lt.current.useCallback(e,t)};me.useContext=function(e){return lt.current.useContext(e)};me.useDebugValue=function(){};me.useDeferredValue=function(e){return lt.current.useDeferredValue(e)};me.useEffect=function(e,t){return lt.current.useEffect(e,t)};me.useId=function(){return lt.current.useId()};me.useImperativeHandle=function(e,t,r){return lt.current.useImperativeHandle(e,t,r)};me.useInsertionEffect=function(e,t){return lt.current.useInsertionEffect(e,t)};me.useLayoutEffect=function(e,t){return lt.current.useLayoutEffect(e,t)};me.useMemo=function(e,t){return lt.current.useMemo(e,t)};me.useReducer=function(e,t,r){return lt.current.useReducer(e,t,r)};me.useRef=function(e){return lt.current.useRef(e)};me.useState=function(e){return lt.current.useState(e)};me.useSyncExternalStore=function(e,t,r){return lt.current.useSyncExternalStore(e,t,r)};me.useTransition=function(){return lt.current.useTransition()};me.version="18.3.1";Ic.exports=me;var p=Ic.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nm=p,km=Symbol.for("react.element"),bm=Symbol.for("react.fragment"),Sm=Object.prototype.hasOwnProperty,Cm=Nm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_m={key:!0,ref:!0,__self:!0,__source:!0};function Bc(e,t,r){var n,a={},l=null,i=null;r!==void 0&&(l=""+r),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(i=t.ref);for(n in t)Sm.call(t,n)&&!_m.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:km,type:e,key:l,ref:i,props:a,_owner:Cm.current}}Ma.Fragment=bm;Ma.jsx=Bc;Ma.jsxs=Bc;Mc.exports=Ma;var s=Mc.exports,Hc={exports:{}},vt={},Wc={exports:{}},Vc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(b,E){var B=b.length;b.push(E);e:for(;0<B;){var Q=B-1>>>1,O=b[Q];if(0<a(O,E))b[Q]=E,b[B]=O,B=Q;else break e}}function r(b){return b.length===0?null:b[0]}function n(b){if(b.length===0)return null;var E=b[0],B=b.pop();if(B!==E){b[0]=B;e:for(var Q=0,O=b.length,J=O>>>1;Q<J;){var K=2*(Q+1)-1,oe=b[K],he=K+1,we=b[he];if(0>a(oe,B))he<O&&0>a(we,oe)?(b[Q]=we,b[he]=B,Q=he):(b[Q]=oe,b[K]=B,Q=K);else if(he<O&&0>a(we,B))b[Q]=we,b[he]=B,Q=he;else break e}}return E}function a(b,E){var B=b.sortIndex-E.sortIndex;return B!==0?B:b.id-E.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var c=[],h=[],f=1,N=null,d=3,w=!1,j=!1,P=!1,$=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(b){for(var E=r(h);E!==null;){if(E.callback===null)n(h);else if(E.startTime<=b)n(h),E.sortIndex=E.expirationTime,t(c,E);else break;E=r(h)}}function _(b){if(P=!1,v(b),!j)if(r(c)!==null)j=!0,pe(y);else{var E=r(h);E!==null&&ce(_,E.startTime-b)}}function y(b,E){j=!1,P&&(P=!1,x(D),D=-1),w=!0;var B=d;try{for(v(E),N=r(c);N!==null&&(!(N.expirationTime>E)||b&&!te());){var Q=N.callback;if(typeof Q=="function"){N.callback=null,d=N.priorityLevel;var O=Q(N.expirationTime<=E);E=e.unstable_now(),typeof O=="function"?N.callback=O:N===r(c)&&n(c),v(E)}else n(c);N=r(c)}if(N!==null)var J=!0;else{var K=r(h);K!==null&&ce(_,K.startTime-E),J=!1}return J}finally{N=null,d=B,w=!1}}var u=!1,g=null,D=-1,L=5,F=-1;function te(){return!(e.unstable_now()-F<L)}function z(){if(g!==null){var b=e.unstable_now();F=b;var E=!0;try{E=g(!0,b)}finally{E?Z():(u=!1,g=null)}}else u=!1}var Z;if(typeof m=="function")Z=function(){m(z)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,ue=T.port2;T.port1.onmessage=z,Z=function(){ue.postMessage(null)}}else Z=function(){$(z,0)};function pe(b){g=b,u||(u=!0,Z())}function ce(b,E){D=$(function(){b(e.unstable_now())},E)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(b){b.callback=null},e.unstable_continueExecution=function(){j||w||(j=!0,pe(y))},e.unstable_forceFrameRate=function(b){0>b||125<b?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<b?Math.floor(1e3/b):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(b){switch(d){case 1:case 2:case 3:var E=3;break;default:E=d}var B=d;d=E;try{return b()}finally{d=B}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(b,E){switch(b){case 1:case 2:case 3:case 4:case 5:break;default:b=3}var B=d;d=b;try{return E()}finally{d=B}},e.unstable_scheduleCallback=function(b,E,B){var Q=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?Q+B:Q):B=Q,b){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=B+O,b={id:f++,callback:E,priorityLevel:b,startTime:B,expirationTime:O,sortIndex:-1},B>Q?(b.sortIndex=B,t(h,b),r(c)===null&&b===r(h)&&(P?(x(D),D=-1):P=!0,ce(_,B-Q))):(b.sortIndex=O,t(c,b),j||w||(j=!0,pe(y))),b},e.unstable_shouldYield=te,e.unstable_wrapCallback=function(b){var E=d;return function(){var B=d;d=E;try{return b.apply(this,arguments)}finally{d=B}}}})(Vc);Wc.exports=Vc;var Dm=Wc.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tm=p,yt=Dm;function H(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Gc=new Set,en={};function Zs(e,t){wr(e,t),wr(e+"Capture",t)}function wr(e,t){for(en[e]=t,e=0;e<t.length;e++)Gc.add(t[e])}var ss=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cl=Object.prototype.hasOwnProperty,Em=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,bo={},So={};function Pm(e){return Cl.call(So,e)?!0:Cl.call(bo,e)?!1:Em.test(e)?So[e]=!0:(bo[e]=!0,!1)}function Mm(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Im(e,t,r,n){if(t===null||typeof t>"u"||Mm(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function it(e,t,r,n,a,l,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=i}var qe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){qe[e]=new it(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];qe[t]=new it(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){qe[e]=new it(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){qe[e]=new it(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){qe[e]=new it(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){qe[e]=new it(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){qe[e]=new it(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){qe[e]=new it(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){qe[e]=new it(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ci=/[\-:]([a-z])/g;function _i(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ci,_i);qe[t]=new it(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ci,_i);qe[t]=new it(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ci,_i);qe[t]=new it(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){qe[e]=new it(e,1,!1,e.toLowerCase(),null,!1,!1)});qe.xlinkHref=new it("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){qe[e]=new it(e,1,!1,e.toLowerCase(),null,!0,!0)});function Di(e,t,r,n){var a=qe.hasOwnProperty(t)?qe[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Im(t,r,a,n)&&(r=null),n||a===null?Pm(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var ls=Tm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Tn=Symbol.for("react.element"),rr=Symbol.for("react.portal"),nr=Symbol.for("react.fragment"),Ti=Symbol.for("react.strict_mode"),_l=Symbol.for("react.profiler"),Qc=Symbol.for("react.provider"),Kc=Symbol.for("react.context"),Ei=Symbol.for("react.forward_ref"),Dl=Symbol.for("react.suspense"),Tl=Symbol.for("react.suspense_list"),Pi=Symbol.for("react.memo"),cs=Symbol.for("react.lazy"),qc=Symbol.for("react.offscreen"),Co=Symbol.iterator;function Mr(e){return e===null||typeof e!="object"?null:(e=Co&&e[Co]||e["@@iterator"],typeof e=="function"?e:null)}var Ae=Object.assign,Za;function Rr(e){if(Za===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Za=t&&t[1]||""}return`
`+Za+e}var Ja=!1;function el(e,t){if(!e||Ja)return"";Ja=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(h){var n=h}Reflect.construct(e,[],t)}else{try{t.call()}catch(h){n=h}e.call(t.prototype)}else{try{throw Error()}catch(h){n=h}e()}}catch(h){if(h&&n&&typeof h.stack=="string"){for(var a=h.stack.split(`
`),l=n.stack.split(`
`),i=a.length-1,o=l.length-1;1<=i&&0<=o&&a[i]!==l[o];)o--;for(;1<=i&&0<=o;i--,o--)if(a[i]!==l[o]){if(i!==1||o!==1)do if(i--,o--,0>o||a[i]!==l[o]){var c=`
`+a[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=o);break}}}finally{Ja=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Rr(e):""}function Am(e){switch(e.tag){case 5:return Rr(e.type);case 16:return Rr("Lazy");case 13:return Rr("Suspense");case 19:return Rr("SuspenseList");case 0:case 2:case 15:return e=el(e.type,!1),e;case 11:return e=el(e.type.render,!1),e;case 1:return e=el(e.type,!0),e;default:return""}}function El(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case nr:return"Fragment";case rr:return"Portal";case _l:return"Profiler";case Ti:return"StrictMode";case Dl:return"Suspense";case Tl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Kc:return(e.displayName||"Context")+".Consumer";case Qc:return(e._context.displayName||"Context")+".Provider";case Ei:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Pi:return t=e.displayName||null,t!==null?t:El(e.type)||"Memo";case cs:t=e._payload,e=e._init;try{return El(e(t))}catch{}}return null}function Lm(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return El(t);case 8:return t===Ti?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ts(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Yc(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function zm(e){var t=Yc(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,l=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(i){n=""+i,l.call(this,i)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function En(e){e._valueTracker||(e._valueTracker=zm(e))}function Xc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Yc(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function ia(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Pl(e,t){var r=t.checked;return Ae({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function _o(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Ts(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Zc(e,t){t=t.checked,t!=null&&Di(e,"checked",t,!1)}function Ml(e,t){Zc(e,t);var r=Ts(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Il(e,t.type,r):t.hasOwnProperty("defaultValue")&&Il(e,t.type,Ts(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Do(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Il(e,t,r){(t!=="number"||ia(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Ur=Array.isArray;function pr(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Ts(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Al(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(H(91));return Ae({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function To(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(H(92));if(Ur(r)){if(1<r.length)throw Error(H(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Ts(r)}}function Jc(e,t){var r=Ts(t.value),n=Ts(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Eo(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ed(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ll(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ed(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Pn,td=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Pn=Pn||document.createElement("div"),Pn.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Pn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function tn(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Wr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Om=["Webkit","ms","Moz","O"];Object.keys(Wr).forEach(function(e){Om.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Wr[t]=Wr[e]})});function sd(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Wr.hasOwnProperty(e)&&Wr[e]?(""+t).trim():t+"px"}function rd(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=sd(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var Fm=Ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zl(e,t){if(t){if(Fm[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(H(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(H(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(H(61))}if(t.style!=null&&typeof t.style!="object")throw Error(H(62))}}function Ol(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fl=null;function Mi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var $l=null,fr=null,gr=null;function Po(e){if(e=kn(e)){if(typeof $l!="function")throw Error(H(280));var t=e.stateNode;t&&(t=Oa(t),$l(e.stateNode,e.type,t))}}function nd(e){fr?gr?gr.push(e):gr=[e]:fr=e}function ad(){if(fr){var e=fr,t=gr;if(gr=fr=null,Po(e),t)for(e=0;e<t.length;e++)Po(t[e])}}function ld(e,t){return e(t)}function id(){}var tl=!1;function od(e,t,r){if(tl)return e(t,r);tl=!0;try{return ld(e,t,r)}finally{tl=!1,(fr!==null||gr!==null)&&(id(),ad())}}function sn(e,t){var r=e.stateNode;if(r===null)return null;var n=Oa(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(H(231,t,typeof r));return r}var Rl=!1;if(ss)try{var Ir={};Object.defineProperty(Ir,"passive",{get:function(){Rl=!0}}),window.addEventListener("test",Ir,Ir),window.removeEventListener("test",Ir,Ir)}catch{Rl=!1}function $m(e,t,r,n,a,l,i,o,c){var h=Array.prototype.slice.call(arguments,3);try{t.apply(r,h)}catch(f){this.onError(f)}}var Vr=!1,oa=null,ca=!1,Ul=null,Rm={onError:function(e){Vr=!0,oa=e}};function Um(e,t,r,n,a,l,i,o,c){Vr=!1,oa=null,$m.apply(Rm,arguments)}function Bm(e,t,r,n,a,l,i,o,c){if(Um.apply(this,arguments),Vr){if(Vr){var h=oa;Vr=!1,oa=null}else throw Error(H(198));ca||(ca=!0,Ul=h)}}function Js(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function cd(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Mo(e){if(Js(e)!==e)throw Error(H(188))}function Hm(e){var t=e.alternate;if(!t){if(t=Js(e),t===null)throw Error(H(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var l=a.alternate;if(l===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===r)return Mo(a),e;if(l===n)return Mo(a),t;l=l.sibling}throw Error(H(188))}if(r.return!==n.return)r=a,n=l;else{for(var i=!1,o=a.child;o;){if(o===r){i=!0,r=a,n=l;break}if(o===n){i=!0,n=a,r=l;break}o=o.sibling}if(!i){for(o=l.child;o;){if(o===r){i=!0,r=l,n=a;break}if(o===n){i=!0,n=l,r=a;break}o=o.sibling}if(!i)throw Error(H(189))}}if(r.alternate!==n)throw Error(H(190))}if(r.tag!==3)throw Error(H(188));return r.stateNode.current===r?e:t}function dd(e){return e=Hm(e),e!==null?ud(e):null}function ud(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ud(e);if(t!==null)return t;e=e.sibling}return null}var md=yt.unstable_scheduleCallback,Io=yt.unstable_cancelCallback,Wm=yt.unstable_shouldYield,Vm=yt.unstable_requestPaint,Oe=yt.unstable_now,Gm=yt.unstable_getCurrentPriorityLevel,Ii=yt.unstable_ImmediatePriority,hd=yt.unstable_UserBlockingPriority,da=yt.unstable_NormalPriority,Qm=yt.unstable_LowPriority,xd=yt.unstable_IdlePriority,Ia=null,Vt=null;function Km(e){if(Vt&&typeof Vt.onCommitFiberRoot=="function")try{Vt.onCommitFiberRoot(Ia,e,void 0,(e.current.flags&128)===128)}catch{}}var zt=Math.clz32?Math.clz32:Xm,qm=Math.log,Ym=Math.LN2;function Xm(e){return e>>>=0,e===0?32:31-(qm(e)/Ym|0)|0}var Mn=64,In=4194304;function Br(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ua(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,l=e.pingedLanes,i=r&268435455;if(i!==0){var o=i&~a;o!==0?n=Br(o):(l&=i,l!==0&&(n=Br(l)))}else i=r&~a,i!==0?n=Br(i):l!==0&&(n=Br(l));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,l=t&-t,a>=l||a===16&&(l&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-zt(t),a=1<<r,n|=e[r],t&=~a;return n}function Zm(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jm(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,l=e.pendingLanes;0<l;){var i=31-zt(l),o=1<<i,c=a[i];c===-1?(!(o&r)||o&n)&&(a[i]=Zm(o,t)):c<=t&&(e.expiredLanes|=o),l&=~o}}function Bl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function pd(){var e=Mn;return Mn<<=1,!(Mn&4194240)&&(Mn=64),e}function sl(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function wn(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-zt(t),e[t]=r}function eh(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-zt(r),l=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~l}}function Ai(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-zt(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var ve=0;function fd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var gd,Li,yd,vd,jd,Hl=!1,An=[],js=null,ws=null,Ns=null,rn=new Map,nn=new Map,us=[],th="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ao(e,t){switch(e){case"focusin":case"focusout":js=null;break;case"dragenter":case"dragleave":ws=null;break;case"mouseover":case"mouseout":Ns=null;break;case"pointerover":case"pointerout":rn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":nn.delete(t.pointerId)}}function Ar(e,t,r,n,a,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:l,targetContainers:[a]},t!==null&&(t=kn(t),t!==null&&Li(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function sh(e,t,r,n,a){switch(t){case"focusin":return js=Ar(js,e,t,r,n,a),!0;case"dragenter":return ws=Ar(ws,e,t,r,n,a),!0;case"mouseover":return Ns=Ar(Ns,e,t,r,n,a),!0;case"pointerover":var l=a.pointerId;return rn.set(l,Ar(rn.get(l)||null,e,t,r,n,a)),!0;case"gotpointercapture":return l=a.pointerId,nn.set(l,Ar(nn.get(l)||null,e,t,r,n,a)),!0}return!1}function wd(e){var t=zs(e.target);if(t!==null){var r=Js(t);if(r!==null){if(t=r.tag,t===13){if(t=cd(r),t!==null){e.blockedOn=t,jd(e.priority,function(){yd(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Yn(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Wl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Fl=n,r.target.dispatchEvent(n),Fl=null}else return t=kn(r),t!==null&&Li(t),e.blockedOn=r,!1;t.shift()}return!0}function Lo(e,t,r){Yn(e)&&r.delete(t)}function rh(){Hl=!1,js!==null&&Yn(js)&&(js=null),ws!==null&&Yn(ws)&&(ws=null),Ns!==null&&Yn(Ns)&&(Ns=null),rn.forEach(Lo),nn.forEach(Lo)}function Lr(e,t){e.blockedOn===t&&(e.blockedOn=null,Hl||(Hl=!0,yt.unstable_scheduleCallback(yt.unstable_NormalPriority,rh)))}function an(e){function t(a){return Lr(a,e)}if(0<An.length){Lr(An[0],e);for(var r=1;r<An.length;r++){var n=An[r];n.blockedOn===e&&(n.blockedOn=null)}}for(js!==null&&Lr(js,e),ws!==null&&Lr(ws,e),Ns!==null&&Lr(Ns,e),rn.forEach(t),nn.forEach(t),r=0;r<us.length;r++)n=us[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<us.length&&(r=us[0],r.blockedOn===null);)wd(r),r.blockedOn===null&&us.shift()}var yr=ls.ReactCurrentBatchConfig,ma=!0;function nh(e,t,r,n){var a=ve,l=yr.transition;yr.transition=null;try{ve=1,zi(e,t,r,n)}finally{ve=a,yr.transition=l}}function ah(e,t,r,n){var a=ve,l=yr.transition;yr.transition=null;try{ve=4,zi(e,t,r,n)}finally{ve=a,yr.transition=l}}function zi(e,t,r,n){if(ma){var a=Wl(e,t,r,n);if(a===null)ml(e,t,n,ha,r),Ao(e,n);else if(sh(a,e,t,r,n))n.stopPropagation();else if(Ao(e,n),t&4&&-1<th.indexOf(e)){for(;a!==null;){var l=kn(a);if(l!==null&&gd(l),l=Wl(e,t,r,n),l===null&&ml(e,t,n,ha,r),l===a)break;a=l}a!==null&&n.stopPropagation()}else ml(e,t,n,null,r)}}var ha=null;function Wl(e,t,r,n){if(ha=null,e=Mi(n),e=zs(e),e!==null)if(t=Js(e),t===null)e=null;else if(r=t.tag,r===13){if(e=cd(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ha=e,null}function Nd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Gm()){case Ii:return 1;case hd:return 4;case da:case Qm:return 16;case xd:return 536870912;default:return 16}default:return 16}}var hs=null,Oi=null,Xn=null;function kd(){if(Xn)return Xn;var e,t=Oi,r=t.length,n,a="value"in hs?hs.value:hs.textContent,l=a.length;for(e=0;e<r&&t[e]===a[e];e++);var i=r-e;for(n=1;n<=i&&t[r-n]===a[l-n];n++);return Xn=a.slice(e,1<n?1-n:void 0)}function Zn(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ln(){return!0}function zo(){return!1}function jt(e){function t(r,n,a,l,i){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=l,this.target=i,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(l):l[o]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Ln:zo,this.isPropagationStopped=zo,this}return Ae(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ln)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ln)},persist:function(){},isPersistent:Ln}),t}var Tr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fi=jt(Tr),Nn=Ae({},Tr,{view:0,detail:0}),lh=jt(Nn),rl,nl,zr,Aa=Ae({},Nn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$i,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==zr&&(zr&&e.type==="mousemove"?(rl=e.screenX-zr.screenX,nl=e.screenY-zr.screenY):nl=rl=0,zr=e),rl)},movementY:function(e){return"movementY"in e?e.movementY:nl}}),Oo=jt(Aa),ih=Ae({},Aa,{dataTransfer:0}),oh=jt(ih),ch=Ae({},Nn,{relatedTarget:0}),al=jt(ch),dh=Ae({},Tr,{animationName:0,elapsedTime:0,pseudoElement:0}),uh=jt(dh),mh=Ae({},Tr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),hh=jt(mh),xh=Ae({},Tr,{data:0}),Fo=jt(xh),ph={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yh(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=gh[e])?!!t[e]:!1}function $i(){return yh}var vh=Ae({},Nn,{key:function(e){if(e.key){var t=ph[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Zn(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?fh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$i,charCode:function(e){return e.type==="keypress"?Zn(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Zn(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),jh=jt(vh),wh=Ae({},Aa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$o=jt(wh),Nh=Ae({},Nn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$i}),kh=jt(Nh),bh=Ae({},Tr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Sh=jt(bh),Ch=Ae({},Aa,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),_h=jt(Ch),Dh=[9,13,27,32],Ri=ss&&"CompositionEvent"in window,Gr=null;ss&&"documentMode"in document&&(Gr=document.documentMode);var Th=ss&&"TextEvent"in window&&!Gr,bd=ss&&(!Ri||Gr&&8<Gr&&11>=Gr),Ro=" ",Uo=!1;function Sd(e,t){switch(e){case"keyup":return Dh.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ar=!1;function Eh(e,t){switch(e){case"compositionend":return Cd(t);case"keypress":return t.which!==32?null:(Uo=!0,Ro);case"textInput":return e=t.data,e===Ro&&Uo?null:e;default:return null}}function Ph(e,t){if(ar)return e==="compositionend"||!Ri&&Sd(e,t)?(e=kd(),Xn=Oi=hs=null,ar=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return bd&&t.locale!=="ko"?null:t.data;default:return null}}var Mh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Mh[e.type]:t==="textarea"}function _d(e,t,r,n){nd(n),t=xa(t,"onChange"),0<t.length&&(r=new Fi("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Qr=null,ln=null;function Ih(e){Fd(e,0)}function La(e){var t=or(e);if(Xc(t))return e}function Ah(e,t){if(e==="change")return t}var Dd=!1;if(ss){var ll;if(ss){var il="oninput"in document;if(!il){var Ho=document.createElement("div");Ho.setAttribute("oninput","return;"),il=typeof Ho.oninput=="function"}ll=il}else ll=!1;Dd=ll&&(!document.documentMode||9<document.documentMode)}function Wo(){Qr&&(Qr.detachEvent("onpropertychange",Td),ln=Qr=null)}function Td(e){if(e.propertyName==="value"&&La(ln)){var t=[];_d(t,ln,e,Mi(e)),od(Ih,t)}}function Lh(e,t,r){e==="focusin"?(Wo(),Qr=t,ln=r,Qr.attachEvent("onpropertychange",Td)):e==="focusout"&&Wo()}function zh(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return La(ln)}function Oh(e,t){if(e==="click")return La(t)}function Fh(e,t){if(e==="input"||e==="change")return La(t)}function $h(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ft=typeof Object.is=="function"?Object.is:$h;function on(e,t){if(Ft(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!Cl.call(t,a)||!Ft(e[a],t[a]))return!1}return!0}function Vo(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Go(e,t){var r=Vo(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Vo(r)}}function Ed(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ed(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Pd(){for(var e=window,t=ia();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=ia(e.document)}return t}function Ui(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Rh(e){var t=Pd(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Ed(r.ownerDocument.documentElement,r)){if(n!==null&&Ui(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,l=Math.min(n.start,a);n=n.end===void 0?l:Math.min(n.end,a),!e.extend&&l>n&&(a=n,n=l,l=a),a=Go(r,l);var i=Go(r,n);a&&i&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),l>n?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Uh=ss&&"documentMode"in document&&11>=document.documentMode,lr=null,Vl=null,Kr=null,Gl=!1;function Qo(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Gl||lr==null||lr!==ia(n)||(n=lr,"selectionStart"in n&&Ui(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Kr&&on(Kr,n)||(Kr=n,n=xa(Vl,"onSelect"),0<n.length&&(t=new Fi("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=lr)))}function zn(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var ir={animationend:zn("Animation","AnimationEnd"),animationiteration:zn("Animation","AnimationIteration"),animationstart:zn("Animation","AnimationStart"),transitionend:zn("Transition","TransitionEnd")},ol={},Md={};ss&&(Md=document.createElement("div").style,"AnimationEvent"in window||(delete ir.animationend.animation,delete ir.animationiteration.animation,delete ir.animationstart.animation),"TransitionEvent"in window||delete ir.transitionend.transition);function za(e){if(ol[e])return ol[e];if(!ir[e])return e;var t=ir[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Md)return ol[e]=t[r];return e}var Id=za("animationend"),Ad=za("animationiteration"),Ld=za("animationstart"),zd=za("transitionend"),Od=new Map,Ko="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ps(e,t){Od.set(e,t),Zs(t,[e])}for(var cl=0;cl<Ko.length;cl++){var dl=Ko[cl],Bh=dl.toLowerCase(),Hh=dl[0].toUpperCase()+dl.slice(1);Ps(Bh,"on"+Hh)}Ps(Id,"onAnimationEnd");Ps(Ad,"onAnimationIteration");Ps(Ld,"onAnimationStart");Ps("dblclick","onDoubleClick");Ps("focusin","onFocus");Ps("focusout","onBlur");Ps(zd,"onTransitionEnd");wr("onMouseEnter",["mouseout","mouseover"]);wr("onMouseLeave",["mouseout","mouseover"]);wr("onPointerEnter",["pointerout","pointerover"]);wr("onPointerLeave",["pointerout","pointerover"]);Zs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Wh=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hr));function qo(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Bm(n,t,void 0,e),e.currentTarget=null}function Fd(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var l=void 0;if(t)for(var i=n.length-1;0<=i;i--){var o=n[i],c=o.instance,h=o.currentTarget;if(o=o.listener,c!==l&&a.isPropagationStopped())break e;qo(a,o,h),l=c}else for(i=0;i<n.length;i++){if(o=n[i],c=o.instance,h=o.currentTarget,o=o.listener,c!==l&&a.isPropagationStopped())break e;qo(a,o,h),l=c}}}if(ca)throw e=Ul,ca=!1,Ul=null,e}function Ce(e,t){var r=t[Xl];r===void 0&&(r=t[Xl]=new Set);var n=e+"__bubble";r.has(n)||($d(t,e,2,!1),r.add(n))}function ul(e,t,r){var n=0;t&&(n|=4),$d(r,e,n,t)}var On="_reactListening"+Math.random().toString(36).slice(2);function cn(e){if(!e[On]){e[On]=!0,Gc.forEach(function(r){r!=="selectionchange"&&(Wh.has(r)||ul(r,!1,e),ul(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[On]||(t[On]=!0,ul("selectionchange",!1,t))}}function $d(e,t,r,n){switch(Nd(t)){case 1:var a=nh;break;case 4:a=ah;break;default:a=zi}r=a.bind(null,t,r,e),a=void 0,!Rl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function ml(e,t,r,n,a){var l=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var o=n.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(i===4)for(i=n.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;i=i.return}for(;o!==null;){if(i=zs(o),i===null)return;if(c=i.tag,c===5||c===6){n=l=i;continue e}o=o.parentNode}}n=n.return}od(function(){var h=l,f=Mi(r),N=[];e:{var d=Od.get(e);if(d!==void 0){var w=Fi,j=e;switch(e){case"keypress":if(Zn(r)===0)break e;case"keydown":case"keyup":w=jh;break;case"focusin":j="focus",w=al;break;case"focusout":j="blur",w=al;break;case"beforeblur":case"afterblur":w=al;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=Oo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=oh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=kh;break;case Id:case Ad:case Ld:w=uh;break;case zd:w=Sh;break;case"scroll":w=lh;break;case"wheel":w=_h;break;case"copy":case"cut":case"paste":w=hh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=$o}var P=(t&4)!==0,$=!P&&e==="scroll",x=P?d!==null?d+"Capture":null:d;P=[];for(var m=h,v;m!==null;){v=m;var _=v.stateNode;if(v.tag===5&&_!==null&&(v=_,x!==null&&(_=sn(m,x),_!=null&&P.push(dn(m,_,v)))),$)break;m=m.return}0<P.length&&(d=new w(d,j,null,r,f),N.push({event:d,listeners:P}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",w=e==="mouseout"||e==="pointerout",d&&r!==Fl&&(j=r.relatedTarget||r.fromElement)&&(zs(j)||j[rs]))break e;if((w||d)&&(d=f.window===f?f:(d=f.ownerDocument)?d.defaultView||d.parentWindow:window,w?(j=r.relatedTarget||r.toElement,w=h,j=j?zs(j):null,j!==null&&($=Js(j),j!==$||j.tag!==5&&j.tag!==6)&&(j=null)):(w=null,j=h),w!==j)){if(P=Oo,_="onMouseLeave",x="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(P=$o,_="onPointerLeave",x="onPointerEnter",m="pointer"),$=w==null?d:or(w),v=j==null?d:or(j),d=new P(_,m+"leave",w,r,f),d.target=$,d.relatedTarget=v,_=null,zs(f)===h&&(P=new P(x,m+"enter",j,r,f),P.target=v,P.relatedTarget=$,_=P),$=_,w&&j)t:{for(P=w,x=j,m=0,v=P;v;v=sr(v))m++;for(v=0,_=x;_;_=sr(_))v++;for(;0<m-v;)P=sr(P),m--;for(;0<v-m;)x=sr(x),v--;for(;m--;){if(P===x||x!==null&&P===x.alternate)break t;P=sr(P),x=sr(x)}P=null}else P=null;w!==null&&Yo(N,d,w,P,!1),j!==null&&$!==null&&Yo(N,$,j,P,!0)}}e:{if(d=h?or(h):window,w=d.nodeName&&d.nodeName.toLowerCase(),w==="select"||w==="input"&&d.type==="file")var y=Ah;else if(Bo(d))if(Dd)y=Fh;else{y=zh;var u=Lh}else(w=d.nodeName)&&w.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(y=Oh);if(y&&(y=y(e,h))){_d(N,y,r,f);break e}u&&u(e,d,h),e==="focusout"&&(u=d._wrapperState)&&u.controlled&&d.type==="number"&&Il(d,"number",d.value)}switch(u=h?or(h):window,e){case"focusin":(Bo(u)||u.contentEditable==="true")&&(lr=u,Vl=h,Kr=null);break;case"focusout":Kr=Vl=lr=null;break;case"mousedown":Gl=!0;break;case"contextmenu":case"mouseup":case"dragend":Gl=!1,Qo(N,r,f);break;case"selectionchange":if(Uh)break;case"keydown":case"keyup":Qo(N,r,f)}var g;if(Ri)e:{switch(e){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else ar?Sd(e,r)&&(D="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(D="onCompositionStart");D&&(bd&&r.locale!=="ko"&&(ar||D!=="onCompositionStart"?D==="onCompositionEnd"&&ar&&(g=kd()):(hs=f,Oi="value"in hs?hs.value:hs.textContent,ar=!0)),u=xa(h,D),0<u.length&&(D=new Fo(D,e,null,r,f),N.push({event:D,listeners:u}),g?D.data=g:(g=Cd(r),g!==null&&(D.data=g)))),(g=Th?Eh(e,r):Ph(e,r))&&(h=xa(h,"onBeforeInput"),0<h.length&&(f=new Fo("onBeforeInput","beforeinput",null,r,f),N.push({event:f,listeners:h}),f.data=g))}Fd(N,t)})}function dn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function xa(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=sn(e,r),l!=null&&n.unshift(dn(e,l,a)),l=sn(e,t),l!=null&&n.push(dn(e,l,a))),e=e.return}return n}function sr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Yo(e,t,r,n,a){for(var l=t._reactName,i=[];r!==null&&r!==n;){var o=r,c=o.alternate,h=o.stateNode;if(c!==null&&c===n)break;o.tag===5&&h!==null&&(o=h,a?(c=sn(r,l),c!=null&&i.unshift(dn(r,c,o))):a||(c=sn(r,l),c!=null&&i.push(dn(r,c,o)))),r=r.return}i.length!==0&&e.push({event:t,listeners:i})}var Vh=/\r\n?/g,Gh=/\u0000|\uFFFD/g;function Xo(e){return(typeof e=="string"?e:""+e).replace(Vh,`
`).replace(Gh,"")}function Fn(e,t,r){if(t=Xo(t),Xo(e)!==t&&r)throw Error(H(425))}function pa(){}var Ql=null,Kl=null;function ql(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Yl=typeof setTimeout=="function"?setTimeout:void 0,Qh=typeof clearTimeout=="function"?clearTimeout:void 0,Zo=typeof Promise=="function"?Promise:void 0,Kh=typeof queueMicrotask=="function"?queueMicrotask:typeof Zo<"u"?function(e){return Zo.resolve(null).then(e).catch(qh)}:Yl;function qh(e){setTimeout(function(){throw e})}function hl(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),an(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);an(t)}function ks(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Jo(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Er=Math.random().toString(36).slice(2),Ht="__reactFiber$"+Er,un="__reactProps$"+Er,rs="__reactContainer$"+Er,Xl="__reactEvents$"+Er,Yh="__reactListeners$"+Er,Xh="__reactHandles$"+Er;function zs(e){var t=e[Ht];if(t)return t;for(var r=e.parentNode;r;){if(t=r[rs]||r[Ht]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Jo(e);e!==null;){if(r=e[Ht])return r;e=Jo(e)}return t}e=r,r=e.parentNode}return null}function kn(e){return e=e[Ht]||e[rs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function or(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(H(33))}function Oa(e){return e[un]||null}var Zl=[],cr=-1;function Ms(e){return{current:e}}function De(e){0>cr||(e.current=Zl[cr],Zl[cr]=null,cr--)}function be(e,t){cr++,Zl[cr]=e.current,e.current=t}var Es={},rt=Ms(Es),dt=Ms(!1),Gs=Es;function Nr(e,t){var r=e.type.contextTypes;if(!r)return Es;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in r)a[l]=t[l];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function ut(e){return e=e.childContextTypes,e!=null}function fa(){De(dt),De(rt)}function ec(e,t,r){if(rt.current!==Es)throw Error(H(168));be(rt,t),be(dt,r)}function Rd(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(H(108,Lm(e)||"Unknown",a));return Ae({},r,n)}function ga(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Es,Gs=rt.current,be(rt,e),be(dt,dt.current),!0}function tc(e,t,r){var n=e.stateNode;if(!n)throw Error(H(169));r?(e=Rd(e,t,Gs),n.__reactInternalMemoizedMergedChildContext=e,De(dt),De(rt),be(rt,e)):De(dt),be(dt,r)}var qt=null,Fa=!1,xl=!1;function Ud(e){qt===null?qt=[e]:qt.push(e)}function Zh(e){Fa=!0,Ud(e)}function Is(){if(!xl&&qt!==null){xl=!0;var e=0,t=ve;try{var r=qt;for(ve=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}qt=null,Fa=!1}catch(a){throw qt!==null&&(qt=qt.slice(e+1)),md(Ii,Is),a}finally{ve=t,xl=!1}}return null}var dr=[],ur=0,ya=null,va=0,wt=[],Nt=0,Qs=null,Yt=1,Xt="";function As(e,t){dr[ur++]=va,dr[ur++]=ya,ya=e,va=t}function Bd(e,t,r){wt[Nt++]=Yt,wt[Nt++]=Xt,wt[Nt++]=Qs,Qs=e;var n=Yt;e=Xt;var a=32-zt(n)-1;n&=~(1<<a),r+=1;var l=32-zt(t)+a;if(30<l){var i=a-a%5;l=(n&(1<<i)-1).toString(32),n>>=i,a-=i,Yt=1<<32-zt(t)+a|r<<a|n,Xt=l+e}else Yt=1<<l|r<<a|n,Xt=e}function Bi(e){e.return!==null&&(As(e,1),Bd(e,1,0))}function Hi(e){for(;e===ya;)ya=dr[--ur],dr[ur]=null,va=dr[--ur],dr[ur]=null;for(;e===Qs;)Qs=wt[--Nt],wt[Nt]=null,Xt=wt[--Nt],wt[Nt]=null,Yt=wt[--Nt],wt[Nt]=null}var gt=null,ft=null,Ee=!1,At=null;function Hd(e,t){var r=bt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function sc(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,gt=e,ft=ks(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,gt=e,ft=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Qs!==null?{id:Yt,overflow:Xt}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=bt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,gt=e,ft=null,!0):!1;default:return!1}}function Jl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ei(e){if(Ee){var t=ft;if(t){var r=t;if(!sc(e,t)){if(Jl(e))throw Error(H(418));t=ks(r.nextSibling);var n=gt;t&&sc(e,t)?Hd(n,r):(e.flags=e.flags&-4097|2,Ee=!1,gt=e)}}else{if(Jl(e))throw Error(H(418));e.flags=e.flags&-4097|2,Ee=!1,gt=e}}}function rc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;gt=e}function $n(e){if(e!==gt)return!1;if(!Ee)return rc(e),Ee=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ql(e.type,e.memoizedProps)),t&&(t=ft)){if(Jl(e))throw Wd(),Error(H(418));for(;t;)Hd(e,t),t=ks(t.nextSibling)}if(rc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(H(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){ft=ks(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}ft=null}}else ft=gt?ks(e.stateNode.nextSibling):null;return!0}function Wd(){for(var e=ft;e;)e=ks(e.nextSibling)}function kr(){ft=gt=null,Ee=!1}function Wi(e){At===null?At=[e]:At.push(e)}var Jh=ls.ReactCurrentBatchConfig;function Or(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(H(309));var n=r.stateNode}if(!n)throw Error(H(147,e));var a=n,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(i){var o=a.refs;i===null?delete o[l]:o[l]=i},t._stringRef=l,t)}if(typeof e!="string")throw Error(H(284));if(!r._owner)throw Error(H(290,e))}return e}function Rn(e,t){throw e=Object.prototype.toString.call(t),Error(H(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function nc(e){var t=e._init;return t(e._payload)}function Vd(e){function t(x,m){if(e){var v=x.deletions;v===null?(x.deletions=[m],x.flags|=16):v.push(m)}}function r(x,m){if(!e)return null;for(;m!==null;)t(x,m),m=m.sibling;return null}function n(x,m){for(x=new Map;m!==null;)m.key!==null?x.set(m.key,m):x.set(m.index,m),m=m.sibling;return x}function a(x,m){return x=_s(x,m),x.index=0,x.sibling=null,x}function l(x,m,v){return x.index=v,e?(v=x.alternate,v!==null?(v=v.index,v<m?(x.flags|=2,m):v):(x.flags|=2,m)):(x.flags|=1048576,m)}function i(x){return e&&x.alternate===null&&(x.flags|=2),x}function o(x,m,v,_){return m===null||m.tag!==6?(m=wl(v,x.mode,_),m.return=x,m):(m=a(m,v),m.return=x,m)}function c(x,m,v,_){var y=v.type;return y===nr?f(x,m,v.props.children,_,v.key):m!==null&&(m.elementType===y||typeof y=="object"&&y!==null&&y.$$typeof===cs&&nc(y)===m.type)?(_=a(m,v.props),_.ref=Or(x,m,v),_.return=x,_):(_=aa(v.type,v.key,v.props,null,x.mode,_),_.ref=Or(x,m,v),_.return=x,_)}function h(x,m,v,_){return m===null||m.tag!==4||m.stateNode.containerInfo!==v.containerInfo||m.stateNode.implementation!==v.implementation?(m=Nl(v,x.mode,_),m.return=x,m):(m=a(m,v.children||[]),m.return=x,m)}function f(x,m,v,_,y){return m===null||m.tag!==7?(m=Hs(v,x.mode,_,y),m.return=x,m):(m=a(m,v),m.return=x,m)}function N(x,m,v){if(typeof m=="string"&&m!==""||typeof m=="number")return m=wl(""+m,x.mode,v),m.return=x,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Tn:return v=aa(m.type,m.key,m.props,null,x.mode,v),v.ref=Or(x,null,m),v.return=x,v;case rr:return m=Nl(m,x.mode,v),m.return=x,m;case cs:var _=m._init;return N(x,_(m._payload),v)}if(Ur(m)||Mr(m))return m=Hs(m,x.mode,v,null),m.return=x,m;Rn(x,m)}return null}function d(x,m,v,_){var y=m!==null?m.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return y!==null?null:o(x,m,""+v,_);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Tn:return v.key===y?c(x,m,v,_):null;case rr:return v.key===y?h(x,m,v,_):null;case cs:return y=v._init,d(x,m,y(v._payload),_)}if(Ur(v)||Mr(v))return y!==null?null:f(x,m,v,_,null);Rn(x,v)}return null}function w(x,m,v,_,y){if(typeof _=="string"&&_!==""||typeof _=="number")return x=x.get(v)||null,o(m,x,""+_,y);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Tn:return x=x.get(_.key===null?v:_.key)||null,c(m,x,_,y);case rr:return x=x.get(_.key===null?v:_.key)||null,h(m,x,_,y);case cs:var u=_._init;return w(x,m,v,u(_._payload),y)}if(Ur(_)||Mr(_))return x=x.get(v)||null,f(m,x,_,y,null);Rn(m,_)}return null}function j(x,m,v,_){for(var y=null,u=null,g=m,D=m=0,L=null;g!==null&&D<v.length;D++){g.index>D?(L=g,g=null):L=g.sibling;var F=d(x,g,v[D],_);if(F===null){g===null&&(g=L);break}e&&g&&F.alternate===null&&t(x,g),m=l(F,m,D),u===null?y=F:u.sibling=F,u=F,g=L}if(D===v.length)return r(x,g),Ee&&As(x,D),y;if(g===null){for(;D<v.length;D++)g=N(x,v[D],_),g!==null&&(m=l(g,m,D),u===null?y=g:u.sibling=g,u=g);return Ee&&As(x,D),y}for(g=n(x,g);D<v.length;D++)L=w(g,x,D,v[D],_),L!==null&&(e&&L.alternate!==null&&g.delete(L.key===null?D:L.key),m=l(L,m,D),u===null?y=L:u.sibling=L,u=L);return e&&g.forEach(function(te){return t(x,te)}),Ee&&As(x,D),y}function P(x,m,v,_){var y=Mr(v);if(typeof y!="function")throw Error(H(150));if(v=y.call(v),v==null)throw Error(H(151));for(var u=y=null,g=m,D=m=0,L=null,F=v.next();g!==null&&!F.done;D++,F=v.next()){g.index>D?(L=g,g=null):L=g.sibling;var te=d(x,g,F.value,_);if(te===null){g===null&&(g=L);break}e&&g&&te.alternate===null&&t(x,g),m=l(te,m,D),u===null?y=te:u.sibling=te,u=te,g=L}if(F.done)return r(x,g),Ee&&As(x,D),y;if(g===null){for(;!F.done;D++,F=v.next())F=N(x,F.value,_),F!==null&&(m=l(F,m,D),u===null?y=F:u.sibling=F,u=F);return Ee&&As(x,D),y}for(g=n(x,g);!F.done;D++,F=v.next())F=w(g,x,D,F.value,_),F!==null&&(e&&F.alternate!==null&&g.delete(F.key===null?D:F.key),m=l(F,m,D),u===null?y=F:u.sibling=F,u=F);return e&&g.forEach(function(z){return t(x,z)}),Ee&&As(x,D),y}function $(x,m,v,_){if(typeof v=="object"&&v!==null&&v.type===nr&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Tn:e:{for(var y=v.key,u=m;u!==null;){if(u.key===y){if(y=v.type,y===nr){if(u.tag===7){r(x,u.sibling),m=a(u,v.props.children),m.return=x,x=m;break e}}else if(u.elementType===y||typeof y=="object"&&y!==null&&y.$$typeof===cs&&nc(y)===u.type){r(x,u.sibling),m=a(u,v.props),m.ref=Or(x,u,v),m.return=x,x=m;break e}r(x,u);break}else t(x,u);u=u.sibling}v.type===nr?(m=Hs(v.props.children,x.mode,_,v.key),m.return=x,x=m):(_=aa(v.type,v.key,v.props,null,x.mode,_),_.ref=Or(x,m,v),_.return=x,x=_)}return i(x);case rr:e:{for(u=v.key;m!==null;){if(m.key===u)if(m.tag===4&&m.stateNode.containerInfo===v.containerInfo&&m.stateNode.implementation===v.implementation){r(x,m.sibling),m=a(m,v.children||[]),m.return=x,x=m;break e}else{r(x,m);break}else t(x,m);m=m.sibling}m=Nl(v,x.mode,_),m.return=x,x=m}return i(x);case cs:return u=v._init,$(x,m,u(v._payload),_)}if(Ur(v))return j(x,m,v,_);if(Mr(v))return P(x,m,v,_);Rn(x,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,m!==null&&m.tag===6?(r(x,m.sibling),m=a(m,v),m.return=x,x=m):(r(x,m),m=wl(v,x.mode,_),m.return=x,x=m),i(x)):r(x,m)}return $}var br=Vd(!0),Gd=Vd(!1),ja=Ms(null),wa=null,mr=null,Vi=null;function Gi(){Vi=mr=wa=null}function Qi(e){var t=ja.current;De(ja),e._currentValue=t}function ti(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function vr(e,t){wa=e,Vi=mr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ct=!0),e.firstContext=null)}function Ct(e){var t=e._currentValue;if(Vi!==e)if(e={context:e,memoizedValue:t,next:null},mr===null){if(wa===null)throw Error(H(308));mr=e,wa.dependencies={lanes:0,firstContext:e}}else mr=mr.next=e;return t}var Os=null;function Ki(e){Os===null?Os=[e]:Os.push(e)}function Qd(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,Ki(t)):(r.next=a.next,a.next=r),t.interleaved=r,ns(e,n)}function ns(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var ds=!1;function qi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Kd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ts(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function bs(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,fe&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,ns(e,r)}return a=n.interleaved,a===null?(t.next=t,Ki(n)):(t.next=a.next,a.next=t),n.interleaved=t,ns(e,r)}function Jn(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Ai(e,r)}}function ac(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,l=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};l===null?a=l=i:l=l.next=i,r=r.next}while(r!==null);l===null?a=l=t:l=l.next=t}else a=l=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Na(e,t,r,n){var a=e.updateQueue;ds=!1;var l=a.firstBaseUpdate,i=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var c=o,h=c.next;c.next=null,i===null?l=h:i.next=h,i=c;var f=e.alternate;f!==null&&(f=f.updateQueue,o=f.lastBaseUpdate,o!==i&&(o===null?f.firstBaseUpdate=h:o.next=h,f.lastBaseUpdate=c))}if(l!==null){var N=a.baseState;i=0,f=h=c=null,o=l;do{var d=o.lane,w=o.eventTime;if((n&d)===d){f!==null&&(f=f.next={eventTime:w,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var j=e,P=o;switch(d=t,w=r,P.tag){case 1:if(j=P.payload,typeof j=="function"){N=j.call(w,N,d);break e}N=j;break e;case 3:j.flags=j.flags&-65537|128;case 0:if(j=P.payload,d=typeof j=="function"?j.call(w,N,d):j,d==null)break e;N=Ae({},N,d);break e;case 2:ds=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,d=a.effects,d===null?a.effects=[o]:d.push(o))}else w={eventTime:w,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},f===null?(h=f=w,c=N):f=f.next=w,i|=d;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;d=o,o=d.next,d.next=null,a.lastBaseUpdate=d,a.shared.pending=null}}while(!0);if(f===null&&(c=N),a.baseState=c,a.firstBaseUpdate=h,a.lastBaseUpdate=f,t=a.shared.interleaved,t!==null){a=t;do i|=a.lane,a=a.next;while(a!==t)}else l===null&&(a.shared.lanes=0);qs|=i,e.lanes=i,e.memoizedState=N}}function lc(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(H(191,a));a.call(n)}}}var bn={},Gt=Ms(bn),mn=Ms(bn),hn=Ms(bn);function Fs(e){if(e===bn)throw Error(H(174));return e}function Yi(e,t){switch(be(hn,t),be(mn,e),be(Gt,bn),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ll(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ll(t,e)}De(Gt),be(Gt,t)}function Sr(){De(Gt),De(mn),De(hn)}function qd(e){Fs(hn.current);var t=Fs(Gt.current),r=Ll(t,e.type);t!==r&&(be(mn,e),be(Gt,r))}function Xi(e){mn.current===e&&(De(Gt),De(mn))}var Me=Ms(0);function ka(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var pl=[];function Zi(){for(var e=0;e<pl.length;e++)pl[e]._workInProgressVersionPrimary=null;pl.length=0}var ea=ls.ReactCurrentDispatcher,fl=ls.ReactCurrentBatchConfig,Ks=0,Ie=null,Re=null,Be=null,ba=!1,qr=!1,xn=0,ex=0;function Xe(){throw Error(H(321))}function Ji(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ft(e[r],t[r]))return!1;return!0}function eo(e,t,r,n,a,l){if(Ks=l,Ie=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ea.current=e===null||e.memoizedState===null?nx:ax,e=r(n,a),qr){l=0;do{if(qr=!1,xn=0,25<=l)throw Error(H(301));l+=1,Be=Re=null,t.updateQueue=null,ea.current=lx,e=r(n,a)}while(qr)}if(ea.current=Sa,t=Re!==null&&Re.next!==null,Ks=0,Be=Re=Ie=null,ba=!1,t)throw Error(H(300));return e}function to(){var e=xn!==0;return xn=0,e}function Ut(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Be===null?Ie.memoizedState=Be=e:Be=Be.next=e,Be}function _t(){if(Re===null){var e=Ie.alternate;e=e!==null?e.memoizedState:null}else e=Re.next;var t=Be===null?Ie.memoizedState:Be.next;if(t!==null)Be=t,Re=e;else{if(e===null)throw Error(H(310));Re=e,e={memoizedState:Re.memoizedState,baseState:Re.baseState,baseQueue:Re.baseQueue,queue:Re.queue,next:null},Be===null?Ie.memoizedState=Be=e:Be=Be.next=e}return Be}function pn(e,t){return typeof t=="function"?t(e):t}function gl(e){var t=_t(),r=t.queue;if(r===null)throw Error(H(311));r.lastRenderedReducer=e;var n=Re,a=n.baseQueue,l=r.pending;if(l!==null){if(a!==null){var i=a.next;a.next=l.next,l.next=i}n.baseQueue=a=l,r.pending=null}if(a!==null){l=a.next,n=n.baseState;var o=i=null,c=null,h=l;do{var f=h.lane;if((Ks&f)===f)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),n=h.hasEagerState?h.eagerState:e(n,h.action);else{var N={lane:f,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(o=c=N,i=n):c=c.next=N,Ie.lanes|=f,qs|=f}h=h.next}while(h!==null&&h!==l);c===null?i=n:c.next=o,Ft(n,t.memoizedState)||(ct=!0),t.memoizedState=n,t.baseState=i,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do l=a.lane,Ie.lanes|=l,qs|=l,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function yl(e){var t=_t(),r=t.queue;if(r===null)throw Error(H(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,l=t.memoizedState;if(a!==null){r.pending=null;var i=a=a.next;do l=e(l,i.action),i=i.next;while(i!==a);Ft(l,t.memoizedState)||(ct=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),r.lastRenderedState=l}return[l,n]}function Yd(){}function Xd(e,t){var r=Ie,n=_t(),a=t(),l=!Ft(n.memoizedState,a);if(l&&(n.memoizedState=a,ct=!0),n=n.queue,so(eu.bind(null,r,n,e),[e]),n.getSnapshot!==t||l||Be!==null&&Be.memoizedState.tag&1){if(r.flags|=2048,fn(9,Jd.bind(null,r,n,a,t),void 0,null),He===null)throw Error(H(349));Ks&30||Zd(r,t,a)}return a}function Zd(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ie.updateQueue,t===null?(t={lastEffect:null,stores:null},Ie.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Jd(e,t,r,n){t.value=r,t.getSnapshot=n,tu(t)&&su(e)}function eu(e,t,r){return r(function(){tu(t)&&su(e)})}function tu(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ft(e,r)}catch{return!0}}function su(e){var t=ns(e,1);t!==null&&Ot(t,e,1,-1)}function ic(e){var t=Ut();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pn,lastRenderedState:e},t.queue=e,e=e.dispatch=rx.bind(null,Ie,e),[t.memoizedState,e]}function fn(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Ie.updateQueue,t===null?(t={lastEffect:null,stores:null},Ie.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function ru(){return _t().memoizedState}function ta(e,t,r,n){var a=Ut();Ie.flags|=e,a.memoizedState=fn(1|t,r,void 0,n===void 0?null:n)}function $a(e,t,r,n){var a=_t();n=n===void 0?null:n;var l=void 0;if(Re!==null){var i=Re.memoizedState;if(l=i.destroy,n!==null&&Ji(n,i.deps)){a.memoizedState=fn(t,r,l,n);return}}Ie.flags|=e,a.memoizedState=fn(1|t,r,l,n)}function oc(e,t){return ta(8390656,8,e,t)}function so(e,t){return $a(2048,8,e,t)}function nu(e,t){return $a(4,2,e,t)}function au(e,t){return $a(4,4,e,t)}function lu(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function iu(e,t,r){return r=r!=null?r.concat([e]):null,$a(4,4,lu.bind(null,t,e),r)}function ro(){}function ou(e,t){var r=_t();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Ji(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function cu(e,t){var r=_t();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Ji(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function du(e,t,r){return Ks&21?(Ft(r,t)||(r=pd(),Ie.lanes|=r,qs|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ct=!0),e.memoizedState=r)}function tx(e,t){var r=ve;ve=r!==0&&4>r?r:4,e(!0);var n=fl.transition;fl.transition={};try{e(!1),t()}finally{ve=r,fl.transition=n}}function uu(){return _t().memoizedState}function sx(e,t,r){var n=Cs(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},mu(e))hu(t,r);else if(r=Qd(e,t,r,n),r!==null){var a=at();Ot(r,e,n,a),xu(r,t,n)}}function rx(e,t,r){var n=Cs(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(mu(e))hu(t,a);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var i=t.lastRenderedState,o=l(i,r);if(a.hasEagerState=!0,a.eagerState=o,Ft(o,i)){var c=t.interleaved;c===null?(a.next=a,Ki(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=Qd(e,t,a,n),r!==null&&(a=at(),Ot(r,e,n,a),xu(r,t,n))}}function mu(e){var t=e.alternate;return e===Ie||t!==null&&t===Ie}function hu(e,t){qr=ba=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function xu(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Ai(e,r)}}var Sa={readContext:Ct,useCallback:Xe,useContext:Xe,useEffect:Xe,useImperativeHandle:Xe,useInsertionEffect:Xe,useLayoutEffect:Xe,useMemo:Xe,useReducer:Xe,useRef:Xe,useState:Xe,useDebugValue:Xe,useDeferredValue:Xe,useTransition:Xe,useMutableSource:Xe,useSyncExternalStore:Xe,useId:Xe,unstable_isNewReconciler:!1},nx={readContext:Ct,useCallback:function(e,t){return Ut().memoizedState=[e,t===void 0?null:t],e},useContext:Ct,useEffect:oc,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,ta(4194308,4,lu.bind(null,t,e),r)},useLayoutEffect:function(e,t){return ta(4194308,4,e,t)},useInsertionEffect:function(e,t){return ta(4,2,e,t)},useMemo:function(e,t){var r=Ut();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Ut();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=sx.bind(null,Ie,e),[n.memoizedState,e]},useRef:function(e){var t=Ut();return e={current:e},t.memoizedState=e},useState:ic,useDebugValue:ro,useDeferredValue:function(e){return Ut().memoizedState=e},useTransition:function(){var e=ic(!1),t=e[0];return e=tx.bind(null,e[1]),Ut().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Ie,a=Ut();if(Ee){if(r===void 0)throw Error(H(407));r=r()}else{if(r=t(),He===null)throw Error(H(349));Ks&30||Zd(n,t,r)}a.memoizedState=r;var l={value:r,getSnapshot:t};return a.queue=l,oc(eu.bind(null,n,l,e),[e]),n.flags|=2048,fn(9,Jd.bind(null,n,l,r,t),void 0,null),r},useId:function(){var e=Ut(),t=He.identifierPrefix;if(Ee){var r=Xt,n=Yt;r=(n&~(1<<32-zt(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=xn++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=ex++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ax={readContext:Ct,useCallback:ou,useContext:Ct,useEffect:so,useImperativeHandle:iu,useInsertionEffect:nu,useLayoutEffect:au,useMemo:cu,useReducer:gl,useRef:ru,useState:function(){return gl(pn)},useDebugValue:ro,useDeferredValue:function(e){var t=_t();return du(t,Re.memoizedState,e)},useTransition:function(){var e=gl(pn)[0],t=_t().memoizedState;return[e,t]},useMutableSource:Yd,useSyncExternalStore:Xd,useId:uu,unstable_isNewReconciler:!1},lx={readContext:Ct,useCallback:ou,useContext:Ct,useEffect:so,useImperativeHandle:iu,useInsertionEffect:nu,useLayoutEffect:au,useMemo:cu,useReducer:yl,useRef:ru,useState:function(){return yl(pn)},useDebugValue:ro,useDeferredValue:function(e){var t=_t();return Re===null?t.memoizedState=e:du(t,Re.memoizedState,e)},useTransition:function(){var e=yl(pn)[0],t=_t().memoizedState;return[e,t]},useMutableSource:Yd,useSyncExternalStore:Xd,useId:uu,unstable_isNewReconciler:!1};function Mt(e,t){if(e&&e.defaultProps){t=Ae({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function si(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Ae({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Ra={isMounted:function(e){return(e=e._reactInternals)?Js(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=at(),a=Cs(e),l=ts(n,a);l.payload=t,r!=null&&(l.callback=r),t=bs(e,l,a),t!==null&&(Ot(t,e,a,n),Jn(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=at(),a=Cs(e),l=ts(n,a);l.tag=1,l.payload=t,r!=null&&(l.callback=r),t=bs(e,l,a),t!==null&&(Ot(t,e,a,n),Jn(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=at(),n=Cs(e),a=ts(r,n);a.tag=2,t!=null&&(a.callback=t),t=bs(e,a,n),t!==null&&(Ot(t,e,n,r),Jn(t,e,n))}};function cc(e,t,r,n,a,l,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,l,i):t.prototype&&t.prototype.isPureReactComponent?!on(r,n)||!on(a,l):!0}function pu(e,t,r){var n=!1,a=Es,l=t.contextType;return typeof l=="object"&&l!==null?l=Ct(l):(a=ut(t)?Gs:rt.current,n=t.contextTypes,l=(n=n!=null)?Nr(e,a):Es),t=new t(r,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ra,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=l),t}function dc(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Ra.enqueueReplaceState(t,t.state,null)}function ri(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},qi(e);var l=t.contextType;typeof l=="object"&&l!==null?a.context=Ct(l):(l=ut(t)?Gs:rt.current,a.context=Nr(e,l)),a.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(si(e,t,l,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Ra.enqueueReplaceState(a,a.state,null),Na(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Cr(e,t){try{var r="",n=t;do r+=Am(n),n=n.return;while(n);var a=r}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:a,digest:null}}function vl(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function ni(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var ix=typeof WeakMap=="function"?WeakMap:Map;function fu(e,t,r){r=ts(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){_a||(_a=!0,xi=n),ni(e,t)},r}function gu(e,t,r){r=ts(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){ni(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(r.callback=function(){ni(e,t),typeof n!="function"&&(Ss===null?Ss=new Set([this]):Ss.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),r}function uc(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new ix;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=wx.bind(null,e,t,r),t.then(e,e))}function mc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function hc(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=ts(-1,1),t.tag=2,bs(r,t,1))),r.lanes|=1),e)}var ox=ls.ReactCurrentOwner,ct=!1;function nt(e,t,r,n){t.child=e===null?Gd(t,null,r,n):br(t,e.child,r,n)}function xc(e,t,r,n,a){r=r.render;var l=t.ref;return vr(t,a),n=eo(e,t,r,n,l,a),r=to(),e!==null&&!ct?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,as(e,t,a)):(Ee&&r&&Bi(t),t.flags|=1,nt(e,t,n,a),t.child)}function pc(e,t,r,n,a){if(e===null){var l=r.type;return typeof l=="function"&&!mo(l)&&l.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=l,yu(e,t,l,n,a)):(e=aa(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&a)){var i=l.memoizedProps;if(r=r.compare,r=r!==null?r:on,r(i,n)&&e.ref===t.ref)return as(e,t,a)}return t.flags|=1,e=_s(l,n),e.ref=t.ref,e.return=t,t.child=e}function yu(e,t,r,n,a){if(e!==null){var l=e.memoizedProps;if(on(l,n)&&e.ref===t.ref)if(ct=!1,t.pendingProps=n=l,(e.lanes&a)!==0)e.flags&131072&&(ct=!0);else return t.lanes=e.lanes,as(e,t,a)}return ai(e,t,r,n,a)}function vu(e,t,r){var n=t.pendingProps,a=n.children,l=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},be(xr,xt),xt|=r;else{if(!(r&1073741824))return e=l!==null?l.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,be(xr,xt),xt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=l!==null?l.baseLanes:r,be(xr,xt),xt|=n}else l!==null?(n=l.baseLanes|r,t.memoizedState=null):n=r,be(xr,xt),xt|=n;return nt(e,t,a,r),t.child}function ju(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function ai(e,t,r,n,a){var l=ut(r)?Gs:rt.current;return l=Nr(t,l),vr(t,a),r=eo(e,t,r,n,l,a),n=to(),e!==null&&!ct?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,as(e,t,a)):(Ee&&n&&Bi(t),t.flags|=1,nt(e,t,r,a),t.child)}function fc(e,t,r,n,a){if(ut(r)){var l=!0;ga(t)}else l=!1;if(vr(t,a),t.stateNode===null)sa(e,t),pu(t,r,n),ri(t,r,n,a),n=!0;else if(e===null){var i=t.stateNode,o=t.memoizedProps;i.props=o;var c=i.context,h=r.contextType;typeof h=="object"&&h!==null?h=Ct(h):(h=ut(r)?Gs:rt.current,h=Nr(t,h));var f=r.getDerivedStateFromProps,N=typeof f=="function"||typeof i.getSnapshotBeforeUpdate=="function";N||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==n||c!==h)&&dc(t,i,n,h),ds=!1;var d=t.memoizedState;i.state=d,Na(t,n,i,a),c=t.memoizedState,o!==n||d!==c||dt.current||ds?(typeof f=="function"&&(si(t,r,f,n),c=t.memoizedState),(o=ds||cc(t,r,o,n,d,c,h))?(N||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),i.props=n,i.state=c,i.context=h,n=o):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,Kd(e,t),o=t.memoizedProps,h=t.type===t.elementType?o:Mt(t.type,o),i.props=h,N=t.pendingProps,d=i.context,c=r.contextType,typeof c=="object"&&c!==null?c=Ct(c):(c=ut(r)?Gs:rt.current,c=Nr(t,c));var w=r.getDerivedStateFromProps;(f=typeof w=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==N||d!==c)&&dc(t,i,n,c),ds=!1,d=t.memoizedState,i.state=d,Na(t,n,i,a);var j=t.memoizedState;o!==N||d!==j||dt.current||ds?(typeof w=="function"&&(si(t,r,w,n),j=t.memoizedState),(h=ds||cc(t,r,h,n,d,j,c)||!1)?(f||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,j,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,j,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=j),i.props=n,i.state=j,i.context=c,n=h):(typeof i.componentDidUpdate!="function"||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),n=!1)}return li(e,t,r,n,l,a)}function li(e,t,r,n,a,l){ju(e,t);var i=(t.flags&128)!==0;if(!n&&!i)return a&&tc(t,r,!1),as(e,t,l);n=t.stateNode,ox.current=t;var o=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&i?(t.child=br(t,e.child,null,l),t.child=br(t,null,o,l)):nt(e,t,o,l),t.memoizedState=n.state,a&&tc(t,r,!0),t.child}function wu(e){var t=e.stateNode;t.pendingContext?ec(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ec(e,t.context,!1),Yi(e,t.containerInfo)}function gc(e,t,r,n,a){return kr(),Wi(a),t.flags|=256,nt(e,t,r,n),t.child}var ii={dehydrated:null,treeContext:null,retryLane:0};function oi(e){return{baseLanes:e,cachePool:null,transitions:null}}function Nu(e,t,r){var n=t.pendingProps,a=Me.current,l=!1,i=(t.flags&128)!==0,o;if((o=i)||(o=e!==null&&e.memoizedState===null?!1:(a&2)!==0),o?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),be(Me,a&1),e===null)return ei(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=n.children,e=n.fallback,l?(n=t.mode,l=t.child,i={mode:"hidden",children:i},!(n&1)&&l!==null?(l.childLanes=0,l.pendingProps=i):l=Ha(i,n,0,null),e=Hs(e,n,r,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=oi(r),t.memoizedState=ii,e):no(t,i));if(a=e.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return cx(e,t,i,n,o,a,r);if(l){l=n.fallback,i=t.mode,a=e.child,o=a.sibling;var c={mode:"hidden",children:n.children};return!(i&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=_s(a,c),n.subtreeFlags=a.subtreeFlags&14680064),o!==null?l=_s(o,l):(l=Hs(l,i,r,null),l.flags|=2),l.return=t,n.return=t,n.sibling=l,t.child=n,n=l,l=t.child,i=e.child.memoizedState,i=i===null?oi(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},l.memoizedState=i,l.childLanes=e.childLanes&~r,t.memoizedState=ii,n}return l=e.child,e=l.sibling,n=_s(l,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function no(e,t){return t=Ha({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Un(e,t,r,n){return n!==null&&Wi(n),br(t,e.child,null,r),e=no(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function cx(e,t,r,n,a,l,i){if(r)return t.flags&256?(t.flags&=-257,n=vl(Error(H(422))),Un(e,t,i,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=n.fallback,a=t.mode,n=Ha({mode:"visible",children:n.children},a,0,null),l=Hs(l,a,i,null),l.flags|=2,n.return=t,l.return=t,n.sibling=l,t.child=n,t.mode&1&&br(t,e.child,null,i),t.child.memoizedState=oi(i),t.memoizedState=ii,l);if(!(t.mode&1))return Un(e,t,i,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var o=n.dgst;return n=o,l=Error(H(419)),n=vl(l,n,void 0),Un(e,t,i,n)}if(o=(i&e.childLanes)!==0,ct||o){if(n=He,n!==null){switch(i&-i){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|i)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,ns(e,a),Ot(n,e,a,-1))}return uo(),n=vl(Error(H(421))),Un(e,t,i,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=Nx.bind(null,e),a._reactRetry=t,null):(e=l.treeContext,ft=ks(a.nextSibling),gt=t,Ee=!0,At=null,e!==null&&(wt[Nt++]=Yt,wt[Nt++]=Xt,wt[Nt++]=Qs,Yt=e.id,Xt=e.overflow,Qs=t),t=no(t,n.children),t.flags|=4096,t)}function yc(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),ti(e.return,t,r)}function jl(e,t,r,n,a){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=n,l.tail=r,l.tailMode=a)}function ku(e,t,r){var n=t.pendingProps,a=n.revealOrder,l=n.tail;if(nt(e,t,n.children,r),n=Me.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&yc(e,r,t);else if(e.tag===19)yc(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(be(Me,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&ka(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),jl(t,!1,a,r,l);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&ka(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}jl(t,!0,r,null,l);break;case"together":jl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function sa(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function as(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),qs|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(H(153));if(t.child!==null){for(e=t.child,r=_s(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=_s(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function dx(e,t,r){switch(t.tag){case 3:wu(t),kr();break;case 5:qd(t);break;case 1:ut(t.type)&&ga(t);break;case 4:Yi(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;be(ja,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(be(Me,Me.current&1),t.flags|=128,null):r&t.child.childLanes?Nu(e,t,r):(be(Me,Me.current&1),e=as(e,t,r),e!==null?e.sibling:null);be(Me,Me.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return ku(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),be(Me,Me.current),n)break;return null;case 22:case 23:return t.lanes=0,vu(e,t,r)}return as(e,t,r)}var bu,ci,Su,Cu;bu=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};ci=function(){};Su=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Fs(Gt.current);var l=null;switch(r){case"input":a=Pl(e,a),n=Pl(e,n),l=[];break;case"select":a=Ae({},a,{value:void 0}),n=Ae({},n,{value:void 0}),l=[];break;case"textarea":a=Al(e,a),n=Al(e,n),l=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=pa)}zl(r,n);var i;r=null;for(h in a)if(!n.hasOwnProperty(h)&&a.hasOwnProperty(h)&&a[h]!=null)if(h==="style"){var o=a[h];for(i in o)o.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(en.hasOwnProperty(h)?l||(l=[]):(l=l||[]).push(h,null));for(h in n){var c=n[h];if(o=a!=null?a[h]:void 0,n.hasOwnProperty(h)&&c!==o&&(c!=null||o!=null))if(h==="style")if(o){for(i in o)!o.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&o[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(l||(l=[]),l.push(h,r)),r=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(l=l||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(l=l||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(en.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&Ce("scroll",e),l||o===c||(l=[])):(l=l||[]).push(h,c))}r&&(l=l||[]).push("style",r);var h=l;(t.updateQueue=h)&&(t.flags|=4)}};Cu=function(e,t,r,n){r!==n&&(t.flags|=4)};function Fr(e,t){if(!Ee)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ze(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function ux(e,t,r){var n=t.pendingProps;switch(Hi(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ze(t),null;case 1:return ut(t.type)&&fa(),Ze(t),null;case 3:return n=t.stateNode,Sr(),De(dt),De(rt),Zi(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&($n(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,At!==null&&(gi(At),At=null))),ci(e,t),Ze(t),null;case 5:Xi(t);var a=Fs(hn.current);if(r=t.type,e!==null&&t.stateNode!=null)Su(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(H(166));return Ze(t),null}if(e=Fs(Gt.current),$n(t)){n=t.stateNode,r=t.type;var l=t.memoizedProps;switch(n[Ht]=t,n[un]=l,e=(t.mode&1)!==0,r){case"dialog":Ce("cancel",n),Ce("close",n);break;case"iframe":case"object":case"embed":Ce("load",n);break;case"video":case"audio":for(a=0;a<Hr.length;a++)Ce(Hr[a],n);break;case"source":Ce("error",n);break;case"img":case"image":case"link":Ce("error",n),Ce("load",n);break;case"details":Ce("toggle",n);break;case"input":_o(n,l),Ce("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!l.multiple},Ce("invalid",n);break;case"textarea":To(n,l),Ce("invalid",n)}zl(r,l),a=null;for(var i in l)if(l.hasOwnProperty(i)){var o=l[i];i==="children"?typeof o=="string"?n.textContent!==o&&(l.suppressHydrationWarning!==!0&&Fn(n.textContent,o,e),a=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(l.suppressHydrationWarning!==!0&&Fn(n.textContent,o,e),a=["children",""+o]):en.hasOwnProperty(i)&&o!=null&&i==="onScroll"&&Ce("scroll",n)}switch(r){case"input":En(n),Do(n,l,!0);break;case"textarea":En(n),Eo(n);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(n.onclick=pa)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{i=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ed(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=i.createElement(r,{is:n.is}):(e=i.createElement(r),r==="select"&&(i=e,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):e=i.createElementNS(e,r),e[Ht]=t,e[un]=n,bu(e,t,!1,!1),t.stateNode=e;e:{switch(i=Ol(r,n),r){case"dialog":Ce("cancel",e),Ce("close",e),a=n;break;case"iframe":case"object":case"embed":Ce("load",e),a=n;break;case"video":case"audio":for(a=0;a<Hr.length;a++)Ce(Hr[a],e);a=n;break;case"source":Ce("error",e),a=n;break;case"img":case"image":case"link":Ce("error",e),Ce("load",e),a=n;break;case"details":Ce("toggle",e),a=n;break;case"input":_o(e,n),a=Pl(e,n),Ce("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=Ae({},n,{value:void 0}),Ce("invalid",e);break;case"textarea":To(e,n),a=Al(e,n),Ce("invalid",e);break;default:a=n}zl(r,a),o=a;for(l in o)if(o.hasOwnProperty(l)){var c=o[l];l==="style"?rd(e,c):l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&td(e,c)):l==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&tn(e,c):typeof c=="number"&&tn(e,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(en.hasOwnProperty(l)?c!=null&&l==="onScroll"&&Ce("scroll",e):c!=null&&Di(e,l,c,i))}switch(r){case"input":En(e),Do(e,n,!1);break;case"textarea":En(e),Eo(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Ts(n.value));break;case"select":e.multiple=!!n.multiple,l=n.value,l!=null?pr(e,!!n.multiple,l,!1):n.defaultValue!=null&&pr(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=pa)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ze(t),null;case 6:if(e&&t.stateNode!=null)Cu(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(H(166));if(r=Fs(hn.current),Fs(Gt.current),$n(t)){if(n=t.stateNode,r=t.memoizedProps,n[Ht]=t,(l=n.nodeValue!==r)&&(e=gt,e!==null))switch(e.tag){case 3:Fn(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Fn(n.nodeValue,r,(e.mode&1)!==0)}l&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Ht]=t,t.stateNode=n}return Ze(t),null;case 13:if(De(Me),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ee&&ft!==null&&t.mode&1&&!(t.flags&128))Wd(),kr(),t.flags|=98560,l=!1;else if(l=$n(t),n!==null&&n.dehydrated!==null){if(e===null){if(!l)throw Error(H(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(H(317));l[Ht]=t}else kr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ze(t),l=!1}else At!==null&&(gi(At),At=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Me.current&1?Ue===0&&(Ue=3):uo())),t.updateQueue!==null&&(t.flags|=4),Ze(t),null);case 4:return Sr(),ci(e,t),e===null&&cn(t.stateNode.containerInfo),Ze(t),null;case 10:return Qi(t.type._context),Ze(t),null;case 17:return ut(t.type)&&fa(),Ze(t),null;case 19:if(De(Me),l=t.memoizedState,l===null)return Ze(t),null;if(n=(t.flags&128)!==0,i=l.rendering,i===null)if(n)Fr(l,!1);else{if(Ue!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=ka(e),i!==null){for(t.flags|=128,Fr(l,!1),n=i.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)l=r,e=n,l.flags&=14680066,i=l.alternate,i===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,l.type=i.type,e=i.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return be(Me,Me.current&1|2),t.child}e=e.sibling}l.tail!==null&&Oe()>_r&&(t.flags|=128,n=!0,Fr(l,!1),t.lanes=4194304)}else{if(!n)if(e=ka(i),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Fr(l,!0),l.tail===null&&l.tailMode==="hidden"&&!i.alternate&&!Ee)return Ze(t),null}else 2*Oe()-l.renderingStartTime>_r&&r!==1073741824&&(t.flags|=128,n=!0,Fr(l,!1),t.lanes=4194304);l.isBackwards?(i.sibling=t.child,t.child=i):(r=l.last,r!==null?r.sibling=i:t.child=i,l.last=i)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Oe(),t.sibling=null,r=Me.current,be(Me,n?r&1|2:r&1),t):(Ze(t),null);case 22:case 23:return co(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?xt&1073741824&&(Ze(t),t.subtreeFlags&6&&(t.flags|=8192)):Ze(t),null;case 24:return null;case 25:return null}throw Error(H(156,t.tag))}function mx(e,t){switch(Hi(t),t.tag){case 1:return ut(t.type)&&fa(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Sr(),De(dt),De(rt),Zi(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Xi(t),null;case 13:if(De(Me),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(H(340));kr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return De(Me),null;case 4:return Sr(),null;case 10:return Qi(t.type._context),null;case 22:case 23:return co(),null;case 24:return null;default:return null}}var Bn=!1,tt=!1,hx=typeof WeakSet=="function"?WeakSet:Set,ee=null;function hr(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Le(e,t,n)}else r.current=null}function di(e,t,r){try{r()}catch(n){Le(e,t,n)}}var vc=!1;function xx(e,t){if(Ql=ma,e=Pd(),Ui(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,l=n.focusNode;n=n.focusOffset;try{r.nodeType,l.nodeType}catch{r=null;break e}var i=0,o=-1,c=-1,h=0,f=0,N=e,d=null;t:for(;;){for(var w;N!==r||a!==0&&N.nodeType!==3||(o=i+a),N!==l||n!==0&&N.nodeType!==3||(c=i+n),N.nodeType===3&&(i+=N.nodeValue.length),(w=N.firstChild)!==null;)d=N,N=w;for(;;){if(N===e)break t;if(d===r&&++h===a&&(o=i),d===l&&++f===n&&(c=i),(w=N.nextSibling)!==null)break;N=d,d=N.parentNode}N=w}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Kl={focusedElem:e,selectionRange:r},ma=!1,ee=t;ee!==null;)if(t=ee,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ee=e;else for(;ee!==null;){t=ee;try{var j=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(j!==null){var P=j.memoizedProps,$=j.memoizedState,x=t.stateNode,m=x.getSnapshotBeforeUpdate(t.elementType===t.type?P:Mt(t.type,P),$);x.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(_){Le(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,ee=e;break}ee=t.return}return j=vc,vc=!1,j}function Yr(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var l=a.destroy;a.destroy=void 0,l!==void 0&&di(t,r,l)}a=a.next}while(a!==n)}}function Ua(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function ui(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function _u(e){var t=e.alternate;t!==null&&(e.alternate=null,_u(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ht],delete t[un],delete t[Xl],delete t[Yh],delete t[Xh])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Du(e){return e.tag===5||e.tag===3||e.tag===4}function jc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Du(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function mi(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=pa));else if(n!==4&&(e=e.child,e!==null))for(mi(e,t,r),e=e.sibling;e!==null;)mi(e,t,r),e=e.sibling}function hi(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(hi(e,t,r),e=e.sibling;e!==null;)hi(e,t,r),e=e.sibling}var Ve=null,It=!1;function os(e,t,r){for(r=r.child;r!==null;)Tu(e,t,r),r=r.sibling}function Tu(e,t,r){if(Vt&&typeof Vt.onCommitFiberUnmount=="function")try{Vt.onCommitFiberUnmount(Ia,r)}catch{}switch(r.tag){case 5:tt||hr(r,t);case 6:var n=Ve,a=It;Ve=null,os(e,t,r),Ve=n,It=a,Ve!==null&&(It?(e=Ve,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ve.removeChild(r.stateNode));break;case 18:Ve!==null&&(It?(e=Ve,r=r.stateNode,e.nodeType===8?hl(e.parentNode,r):e.nodeType===1&&hl(e,r),an(e)):hl(Ve,r.stateNode));break;case 4:n=Ve,a=It,Ve=r.stateNode.containerInfo,It=!0,os(e,t,r),Ve=n,It=a;break;case 0:case 11:case 14:case 15:if(!tt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var l=a,i=l.destroy;l=l.tag,i!==void 0&&(l&2||l&4)&&di(r,t,i),a=a.next}while(a!==n)}os(e,t,r);break;case 1:if(!tt&&(hr(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){Le(r,t,o)}os(e,t,r);break;case 21:os(e,t,r);break;case 22:r.mode&1?(tt=(n=tt)||r.memoizedState!==null,os(e,t,r),tt=n):os(e,t,r);break;default:os(e,t,r)}}function wc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new hx),t.forEach(function(n){var a=kx.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Pt(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var l=e,i=t,o=i;e:for(;o!==null;){switch(o.tag){case 5:Ve=o.stateNode,It=!1;break e;case 3:Ve=o.stateNode.containerInfo,It=!0;break e;case 4:Ve=o.stateNode.containerInfo,It=!0;break e}o=o.return}if(Ve===null)throw Error(H(160));Tu(l,i,a),Ve=null,It=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(h){Le(a,t,h)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Eu(t,e),t=t.sibling}function Eu(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Pt(t,e),Rt(e),n&4){try{Yr(3,e,e.return),Ua(3,e)}catch(P){Le(e,e.return,P)}try{Yr(5,e,e.return)}catch(P){Le(e,e.return,P)}}break;case 1:Pt(t,e),Rt(e),n&512&&r!==null&&hr(r,r.return);break;case 5:if(Pt(t,e),Rt(e),n&512&&r!==null&&hr(r,r.return),e.flags&32){var a=e.stateNode;try{tn(a,"")}catch(P){Le(e,e.return,P)}}if(n&4&&(a=e.stateNode,a!=null)){var l=e.memoizedProps,i=r!==null?r.memoizedProps:l,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&l.type==="radio"&&l.name!=null&&Zc(a,l),Ol(o,i);var h=Ol(o,l);for(i=0;i<c.length;i+=2){var f=c[i],N=c[i+1];f==="style"?rd(a,N):f==="dangerouslySetInnerHTML"?td(a,N):f==="children"?tn(a,N):Di(a,f,N,h)}switch(o){case"input":Ml(a,l);break;case"textarea":Jc(a,l);break;case"select":var d=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var w=l.value;w!=null?pr(a,!!l.multiple,w,!1):d!==!!l.multiple&&(l.defaultValue!=null?pr(a,!!l.multiple,l.defaultValue,!0):pr(a,!!l.multiple,l.multiple?[]:"",!1))}a[un]=l}catch(P){Le(e,e.return,P)}}break;case 6:if(Pt(t,e),Rt(e),n&4){if(e.stateNode===null)throw Error(H(162));a=e.stateNode,l=e.memoizedProps;try{a.nodeValue=l}catch(P){Le(e,e.return,P)}}break;case 3:if(Pt(t,e),Rt(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{an(t.containerInfo)}catch(P){Le(e,e.return,P)}break;case 4:Pt(t,e),Rt(e);break;case 13:Pt(t,e),Rt(e),a=e.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(io=Oe())),n&4&&wc(e);break;case 22:if(f=r!==null&&r.memoizedState!==null,e.mode&1?(tt=(h=tt)||f,Pt(t,e),tt=h):Pt(t,e),Rt(e),n&8192){if(h=e.memoizedState!==null,(e.stateNode.isHidden=h)&&!f&&e.mode&1)for(ee=e,f=e.child;f!==null;){for(N=ee=f;ee!==null;){switch(d=ee,w=d.child,d.tag){case 0:case 11:case 14:case 15:Yr(4,d,d.return);break;case 1:hr(d,d.return);var j=d.stateNode;if(typeof j.componentWillUnmount=="function"){n=d,r=d.return;try{t=n,j.props=t.memoizedProps,j.state=t.memoizedState,j.componentWillUnmount()}catch(P){Le(n,r,P)}}break;case 5:hr(d,d.return);break;case 22:if(d.memoizedState!==null){kc(N);continue}}w!==null?(w.return=d,ee=w):kc(N)}f=f.sibling}e:for(f=null,N=e;;){if(N.tag===5){if(f===null){f=N;try{a=N.stateNode,h?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(o=N.stateNode,c=N.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=sd("display",i))}catch(P){Le(e,e.return,P)}}}else if(N.tag===6){if(f===null)try{N.stateNode.nodeValue=h?"":N.memoizedProps}catch(P){Le(e,e.return,P)}}else if((N.tag!==22&&N.tag!==23||N.memoizedState===null||N===e)&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===e)break e;for(;N.sibling===null;){if(N.return===null||N.return===e)break e;f===N&&(f=null),N=N.return}f===N&&(f=null),N.sibling.return=N.return,N=N.sibling}}break;case 19:Pt(t,e),Rt(e),n&4&&wc(e);break;case 21:break;default:Pt(t,e),Rt(e)}}function Rt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Du(r)){var n=r;break e}r=r.return}throw Error(H(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(tn(a,""),n.flags&=-33);var l=jc(e);hi(e,l,a);break;case 3:case 4:var i=n.stateNode.containerInfo,o=jc(e);mi(e,o,i);break;default:throw Error(H(161))}}catch(c){Le(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function px(e,t,r){ee=e,Pu(e)}function Pu(e,t,r){for(var n=(e.mode&1)!==0;ee!==null;){var a=ee,l=a.child;if(a.tag===22&&n){var i=a.memoizedState!==null||Bn;if(!i){var o=a.alternate,c=o!==null&&o.memoizedState!==null||tt;o=Bn;var h=tt;if(Bn=i,(tt=c)&&!h)for(ee=a;ee!==null;)i=ee,c=i.child,i.tag===22&&i.memoizedState!==null?bc(a):c!==null?(c.return=i,ee=c):bc(a);for(;l!==null;)ee=l,Pu(l),l=l.sibling;ee=a,Bn=o,tt=h}Nc(e)}else a.subtreeFlags&8772&&l!==null?(l.return=a,ee=l):Nc(e)}}function Nc(e){for(;ee!==null;){var t=ee;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:tt||Ua(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!tt)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Mt(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&lc(t,l,n);break;case 3:var i=t.updateQueue;if(i!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}lc(t,i,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var h=t.alternate;if(h!==null){var f=h.memoizedState;if(f!==null){var N=f.dehydrated;N!==null&&an(N)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}tt||t.flags&512&&ui(t)}catch(d){Le(t,t.return,d)}}if(t===e){ee=null;break}if(r=t.sibling,r!==null){r.return=t.return,ee=r;break}ee=t.return}}function kc(e){for(;ee!==null;){var t=ee;if(t===e){ee=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ee=r;break}ee=t.return}}function bc(e){for(;ee!==null;){var t=ee;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Ua(4,t)}catch(c){Le(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){Le(t,a,c)}}var l=t.return;try{ui(t)}catch(c){Le(t,l,c)}break;case 5:var i=t.return;try{ui(t)}catch(c){Le(t,i,c)}}}catch(c){Le(t,t.return,c)}if(t===e){ee=null;break}var o=t.sibling;if(o!==null){o.return=t.return,ee=o;break}ee=t.return}}var fx=Math.ceil,Ca=ls.ReactCurrentDispatcher,ao=ls.ReactCurrentOwner,St=ls.ReactCurrentBatchConfig,fe=0,He=null,Fe=null,Ke=0,xt=0,xr=Ms(0),Ue=0,gn=null,qs=0,Ba=0,lo=0,Xr=null,ot=null,io=0,_r=1/0,Kt=null,_a=!1,xi=null,Ss=null,Hn=!1,xs=null,Da=0,Zr=0,pi=null,ra=-1,na=0;function at(){return fe&6?Oe():ra!==-1?ra:ra=Oe()}function Cs(e){return e.mode&1?fe&2&&Ke!==0?Ke&-Ke:Jh.transition!==null?(na===0&&(na=pd()),na):(e=ve,e!==0||(e=window.event,e=e===void 0?16:Nd(e.type)),e):1}function Ot(e,t,r,n){if(50<Zr)throw Zr=0,pi=null,Error(H(185));wn(e,r,n),(!(fe&2)||e!==He)&&(e===He&&(!(fe&2)&&(Ba|=r),Ue===4&&ms(e,Ke)),mt(e,n),r===1&&fe===0&&!(t.mode&1)&&(_r=Oe()+500,Fa&&Is()))}function mt(e,t){var r=e.callbackNode;Jm(e,t);var n=ua(e,e===He?Ke:0);if(n===0)r!==null&&Io(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Io(r),t===1)e.tag===0?Zh(Sc.bind(null,e)):Ud(Sc.bind(null,e)),Kh(function(){!(fe&6)&&Is()}),r=null;else{switch(fd(n)){case 1:r=Ii;break;case 4:r=hd;break;case 16:r=da;break;case 536870912:r=xd;break;default:r=da}r=$u(r,Mu.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Mu(e,t){if(ra=-1,na=0,fe&6)throw Error(H(327));var r=e.callbackNode;if(jr()&&e.callbackNode!==r)return null;var n=ua(e,e===He?Ke:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Ta(e,n);else{t=n;var a=fe;fe|=2;var l=Au();(He!==e||Ke!==t)&&(Kt=null,_r=Oe()+500,Bs(e,t));do try{vx();break}catch(o){Iu(e,o)}while(!0);Gi(),Ca.current=l,fe=a,Fe!==null?t=0:(He=null,Ke=0,t=Ue)}if(t!==0){if(t===2&&(a=Bl(e),a!==0&&(n=a,t=fi(e,a))),t===1)throw r=gn,Bs(e,0),ms(e,n),mt(e,Oe()),r;if(t===6)ms(e,n);else{if(a=e.current.alternate,!(n&30)&&!gx(a)&&(t=Ta(e,n),t===2&&(l=Bl(e),l!==0&&(n=l,t=fi(e,l))),t===1))throw r=gn,Bs(e,0),ms(e,n),mt(e,Oe()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(H(345));case 2:Ls(e,ot,Kt);break;case 3:if(ms(e,n),(n&130023424)===n&&(t=io+500-Oe(),10<t)){if(ua(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){at(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Yl(Ls.bind(null,e,ot,Kt),t);break}Ls(e,ot,Kt);break;case 4:if(ms(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var i=31-zt(n);l=1<<i,i=t[i],i>a&&(a=i),n&=~l}if(n=a,n=Oe()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*fx(n/1960))-n,10<n){e.timeoutHandle=Yl(Ls.bind(null,e,ot,Kt),n);break}Ls(e,ot,Kt);break;case 5:Ls(e,ot,Kt);break;default:throw Error(H(329))}}}return mt(e,Oe()),e.callbackNode===r?Mu.bind(null,e):null}function fi(e,t){var r=Xr;return e.current.memoizedState.isDehydrated&&(Bs(e,t).flags|=256),e=Ta(e,t),e!==2&&(t=ot,ot=r,t!==null&&gi(t)),e}function gi(e){ot===null?ot=e:ot.push.apply(ot,e)}function gx(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],l=a.getSnapshot;a=a.value;try{if(!Ft(l(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ms(e,t){for(t&=~lo,t&=~Ba,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-zt(t),n=1<<r;e[r]=-1,t&=~n}}function Sc(e){if(fe&6)throw Error(H(327));jr();var t=ua(e,0);if(!(t&1))return mt(e,Oe()),null;var r=Ta(e,t);if(e.tag!==0&&r===2){var n=Bl(e);n!==0&&(t=n,r=fi(e,n))}if(r===1)throw r=gn,Bs(e,0),ms(e,t),mt(e,Oe()),r;if(r===6)throw Error(H(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ls(e,ot,Kt),mt(e,Oe()),null}function oo(e,t){var r=fe;fe|=1;try{return e(t)}finally{fe=r,fe===0&&(_r=Oe()+500,Fa&&Is())}}function Ys(e){xs!==null&&xs.tag===0&&!(fe&6)&&jr();var t=fe;fe|=1;var r=St.transition,n=ve;try{if(St.transition=null,ve=1,e)return e()}finally{ve=n,St.transition=r,fe=t,!(fe&6)&&Is()}}function co(){xt=xr.current,De(xr)}function Bs(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Qh(r)),Fe!==null)for(r=Fe.return;r!==null;){var n=r;switch(Hi(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&fa();break;case 3:Sr(),De(dt),De(rt),Zi();break;case 5:Xi(n);break;case 4:Sr();break;case 13:De(Me);break;case 19:De(Me);break;case 10:Qi(n.type._context);break;case 22:case 23:co()}r=r.return}if(He=e,Fe=e=_s(e.current,null),Ke=xt=t,Ue=0,gn=null,lo=Ba=qs=0,ot=Xr=null,Os!==null){for(t=0;t<Os.length;t++)if(r=Os[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,l=r.pending;if(l!==null){var i=l.next;l.next=a,n.next=i}r.pending=n}Os=null}return e}function Iu(e,t){do{var r=Fe;try{if(Gi(),ea.current=Sa,ba){for(var n=Ie.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}ba=!1}if(Ks=0,Be=Re=Ie=null,qr=!1,xn=0,ao.current=null,r===null||r.return===null){Ue=1,gn=t,Fe=null;break}e:{var l=e,i=r.return,o=r,c=t;if(t=Ke,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,f=o,N=f.tag;if(!(f.mode&1)&&(N===0||N===11||N===15)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var w=mc(i);if(w!==null){w.flags&=-257,hc(w,i,o,l,t),w.mode&1&&uc(l,h,t),t=w,c=h;var j=t.updateQueue;if(j===null){var P=new Set;P.add(c),t.updateQueue=P}else j.add(c);break e}else{if(!(t&1)){uc(l,h,t),uo();break e}c=Error(H(426))}}else if(Ee&&o.mode&1){var $=mc(i);if($!==null){!($.flags&65536)&&($.flags|=256),hc($,i,o,l,t),Wi(Cr(c,o));break e}}l=c=Cr(c,o),Ue!==4&&(Ue=2),Xr===null?Xr=[l]:Xr.push(l),l=i;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var x=fu(l,c,t);ac(l,x);break e;case 1:o=c;var m=l.type,v=l.stateNode;if(!(l.flags&128)&&(typeof m.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Ss===null||!Ss.has(v)))){l.flags|=65536,t&=-t,l.lanes|=t;var _=gu(l,o,t);ac(l,_);break e}}l=l.return}while(l!==null)}zu(r)}catch(y){t=y,Fe===r&&r!==null&&(Fe=r=r.return);continue}break}while(!0)}function Au(){var e=Ca.current;return Ca.current=Sa,e===null?Sa:e}function uo(){(Ue===0||Ue===3||Ue===2)&&(Ue=4),He===null||!(qs&268435455)&&!(Ba&268435455)||ms(He,Ke)}function Ta(e,t){var r=fe;fe|=2;var n=Au();(He!==e||Ke!==t)&&(Kt=null,Bs(e,t));do try{yx();break}catch(a){Iu(e,a)}while(!0);if(Gi(),fe=r,Ca.current=n,Fe!==null)throw Error(H(261));return He=null,Ke=0,Ue}function yx(){for(;Fe!==null;)Lu(Fe)}function vx(){for(;Fe!==null&&!Wm();)Lu(Fe)}function Lu(e){var t=Fu(e.alternate,e,xt);e.memoizedProps=e.pendingProps,t===null?zu(e):Fe=t,ao.current=null}function zu(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=mx(r,t),r!==null){r.flags&=32767,Fe=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ue=6,Fe=null;return}}else if(r=ux(r,t,xt),r!==null){Fe=r;return}if(t=t.sibling,t!==null){Fe=t;return}Fe=t=e}while(t!==null);Ue===0&&(Ue=5)}function Ls(e,t,r){var n=ve,a=St.transition;try{St.transition=null,ve=1,jx(e,t,r,n)}finally{St.transition=a,ve=n}return null}function jx(e,t,r,n){do jr();while(xs!==null);if(fe&6)throw Error(H(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(H(177));e.callbackNode=null,e.callbackPriority=0;var l=r.lanes|r.childLanes;if(eh(e,l),e===He&&(Fe=He=null,Ke=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Hn||(Hn=!0,$u(da,function(){return jr(),null})),l=(r.flags&15990)!==0,r.subtreeFlags&15990||l){l=St.transition,St.transition=null;var i=ve;ve=1;var o=fe;fe|=4,ao.current=null,xx(e,r),Eu(r,e),Rh(Kl),ma=!!Ql,Kl=Ql=null,e.current=r,px(r),Vm(),fe=o,ve=i,St.transition=l}else e.current=r;if(Hn&&(Hn=!1,xs=e,Da=a),l=e.pendingLanes,l===0&&(Ss=null),Km(r.stateNode),mt(e,Oe()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(_a)throw _a=!1,e=xi,xi=null,e;return Da&1&&e.tag!==0&&jr(),l=e.pendingLanes,l&1?e===pi?Zr++:(Zr=0,pi=e):Zr=0,Is(),null}function jr(){if(xs!==null){var e=fd(Da),t=St.transition,r=ve;try{if(St.transition=null,ve=16>e?16:e,xs===null)var n=!1;else{if(e=xs,xs=null,Da=0,fe&6)throw Error(H(331));var a=fe;for(fe|=4,ee=e.current;ee!==null;){var l=ee,i=l.child;if(ee.flags&16){var o=l.deletions;if(o!==null){for(var c=0;c<o.length;c++){var h=o[c];for(ee=h;ee!==null;){var f=ee;switch(f.tag){case 0:case 11:case 15:Yr(8,f,l)}var N=f.child;if(N!==null)N.return=f,ee=N;else for(;ee!==null;){f=ee;var d=f.sibling,w=f.return;if(_u(f),f===h){ee=null;break}if(d!==null){d.return=w,ee=d;break}ee=w}}}var j=l.alternate;if(j!==null){var P=j.child;if(P!==null){j.child=null;do{var $=P.sibling;P.sibling=null,P=$}while(P!==null)}}ee=l}}if(l.subtreeFlags&2064&&i!==null)i.return=l,ee=i;else e:for(;ee!==null;){if(l=ee,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Yr(9,l,l.return)}var x=l.sibling;if(x!==null){x.return=l.return,ee=x;break e}ee=l.return}}var m=e.current;for(ee=m;ee!==null;){i=ee;var v=i.child;if(i.subtreeFlags&2064&&v!==null)v.return=i,ee=v;else e:for(i=m;ee!==null;){if(o=ee,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Ua(9,o)}}catch(y){Le(o,o.return,y)}if(o===i){ee=null;break e}var _=o.sibling;if(_!==null){_.return=o.return,ee=_;break e}ee=o.return}}if(fe=a,Is(),Vt&&typeof Vt.onPostCommitFiberRoot=="function")try{Vt.onPostCommitFiberRoot(Ia,e)}catch{}n=!0}return n}finally{ve=r,St.transition=t}}return!1}function Cc(e,t,r){t=Cr(r,t),t=fu(e,t,1),e=bs(e,t,1),t=at(),e!==null&&(wn(e,1,t),mt(e,t))}function Le(e,t,r){if(e.tag===3)Cc(e,e,r);else for(;t!==null;){if(t.tag===3){Cc(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ss===null||!Ss.has(n))){e=Cr(r,e),e=gu(t,e,1),t=bs(t,e,1),e=at(),t!==null&&(wn(t,1,e),mt(t,e));break}}t=t.return}}function wx(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=at(),e.pingedLanes|=e.suspendedLanes&r,He===e&&(Ke&r)===r&&(Ue===4||Ue===3&&(Ke&130023424)===Ke&&500>Oe()-io?Bs(e,0):lo|=r),mt(e,t)}function Ou(e,t){t===0&&(e.mode&1?(t=In,In<<=1,!(In&130023424)&&(In=4194304)):t=1);var r=at();e=ns(e,t),e!==null&&(wn(e,t,r),mt(e,r))}function Nx(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Ou(e,r)}function kx(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(H(314))}n!==null&&n.delete(t),Ou(e,r)}var Fu;Fu=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||dt.current)ct=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return ct=!1,dx(e,t,r);ct=!!(e.flags&131072)}else ct=!1,Ee&&t.flags&1048576&&Bd(t,va,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;sa(e,t),e=t.pendingProps;var a=Nr(t,rt.current);vr(t,r),a=eo(null,t,n,e,a,r);var l=to();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ut(n)?(l=!0,ga(t)):l=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,qi(t),a.updater=Ra,t.stateNode=a,a._reactInternals=t,ri(t,n,e,r),t=li(null,t,n,!0,l,r)):(t.tag=0,Ee&&l&&Bi(t),nt(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(sa(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=Sx(n),e=Mt(n,e),a){case 0:t=ai(null,t,n,e,r);break e;case 1:t=fc(null,t,n,e,r);break e;case 11:t=xc(null,t,n,e,r);break e;case 14:t=pc(null,t,n,Mt(n.type,e),r);break e}throw Error(H(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Mt(n,a),ai(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Mt(n,a),fc(e,t,n,a,r);case 3:e:{if(wu(t),e===null)throw Error(H(387));n=t.pendingProps,l=t.memoizedState,a=l.element,Kd(e,t),Na(t,n,null,r);var i=t.memoizedState;if(n=i.element,l.isDehydrated)if(l={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){a=Cr(Error(H(423)),t),t=gc(e,t,n,r,a);break e}else if(n!==a){a=Cr(Error(H(424)),t),t=gc(e,t,n,r,a);break e}else for(ft=ks(t.stateNode.containerInfo.firstChild),gt=t,Ee=!0,At=null,r=Gd(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(kr(),n===a){t=as(e,t,r);break e}nt(e,t,n,r)}t=t.child}return t;case 5:return qd(t),e===null&&ei(t),n=t.type,a=t.pendingProps,l=e!==null?e.memoizedProps:null,i=a.children,ql(n,a)?i=null:l!==null&&ql(n,l)&&(t.flags|=32),ju(e,t),nt(e,t,i,r),t.child;case 6:return e===null&&ei(t),null;case 13:return Nu(e,t,r);case 4:return Yi(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=br(t,null,n,r):nt(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Mt(n,a),xc(e,t,n,a,r);case 7:return nt(e,t,t.pendingProps,r),t.child;case 8:return nt(e,t,t.pendingProps.children,r),t.child;case 12:return nt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,l=t.memoizedProps,i=a.value,be(ja,n._currentValue),n._currentValue=i,l!==null)if(Ft(l.value,i)){if(l.children===a.children&&!dt.current){t=as(e,t,r);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var o=l.dependencies;if(o!==null){i=l.child;for(var c=o.firstContext;c!==null;){if(c.context===n){if(l.tag===1){c=ts(-1,r&-r),c.tag=2;var h=l.updateQueue;if(h!==null){h=h.shared;var f=h.pending;f===null?c.next=c:(c.next=f.next,f.next=c),h.pending=c}}l.lanes|=r,c=l.alternate,c!==null&&(c.lanes|=r),ti(l.return,r,t),o.lanes|=r;break}c=c.next}}else if(l.tag===10)i=l.type===t.type?null:l.child;else if(l.tag===18){if(i=l.return,i===null)throw Error(H(341));i.lanes|=r,o=i.alternate,o!==null&&(o.lanes|=r),ti(i,r,t),i=l.sibling}else i=l.child;if(i!==null)i.return=l;else for(i=l;i!==null;){if(i===t){i=null;break}if(l=i.sibling,l!==null){l.return=i.return,i=l;break}i=i.return}l=i}nt(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,vr(t,r),a=Ct(a),n=n(a),t.flags|=1,nt(e,t,n,r),t.child;case 14:return n=t.type,a=Mt(n,t.pendingProps),a=Mt(n.type,a),pc(e,t,n,a,r);case 15:return yu(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Mt(n,a),sa(e,t),t.tag=1,ut(n)?(e=!0,ga(t)):e=!1,vr(t,r),pu(t,n,a),ri(t,n,a,r),li(null,t,n,!0,e,r);case 19:return ku(e,t,r);case 22:return vu(e,t,r)}throw Error(H(156,t.tag))};function $u(e,t){return md(e,t)}function bx(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bt(e,t,r,n){return new bx(e,t,r,n)}function mo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Sx(e){if(typeof e=="function")return mo(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ei)return 11;if(e===Pi)return 14}return 2}function _s(e,t){var r=e.alternate;return r===null?(r=bt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function aa(e,t,r,n,a,l){var i=2;if(n=e,typeof e=="function")mo(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case nr:return Hs(r.children,a,l,t);case Ti:i=8,a|=8;break;case _l:return e=bt(12,r,t,a|2),e.elementType=_l,e.lanes=l,e;case Dl:return e=bt(13,r,t,a),e.elementType=Dl,e.lanes=l,e;case Tl:return e=bt(19,r,t,a),e.elementType=Tl,e.lanes=l,e;case qc:return Ha(r,a,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Qc:i=10;break e;case Kc:i=9;break e;case Ei:i=11;break e;case Pi:i=14;break e;case cs:i=16,n=null;break e}throw Error(H(130,e==null?e:typeof e,""))}return t=bt(i,r,t,a),t.elementType=e,t.type=n,t.lanes=l,t}function Hs(e,t,r,n){return e=bt(7,e,n,t),e.lanes=r,e}function Ha(e,t,r,n){return e=bt(22,e,n,t),e.elementType=qc,e.lanes=r,e.stateNode={isHidden:!1},e}function wl(e,t,r){return e=bt(6,e,null,t),e.lanes=r,e}function Nl(e,t,r){return t=bt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Cx(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=sl(0),this.expirationTimes=sl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sl(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function ho(e,t,r,n,a,l,i,o,c){return e=new Cx(e,t,r,o,c),t===1?(t=1,l===!0&&(t|=8)):t=0,l=bt(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},qi(l),e}function _x(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:rr,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Ru(e){if(!e)return Es;e=e._reactInternals;e:{if(Js(e)!==e||e.tag!==1)throw Error(H(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ut(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(H(171))}if(e.tag===1){var r=e.type;if(ut(r))return Rd(e,r,t)}return t}function Uu(e,t,r,n,a,l,i,o,c){return e=ho(r,n,!0,e,a,l,i,o,c),e.context=Ru(null),r=e.current,n=at(),a=Cs(r),l=ts(n,a),l.callback=t??null,bs(r,l,a),e.current.lanes=a,wn(e,a,n),mt(e,n),e}function Wa(e,t,r,n){var a=t.current,l=at(),i=Cs(a);return r=Ru(r),t.context===null?t.context=r:t.pendingContext=r,t=ts(l,i),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=bs(a,t,i),e!==null&&(Ot(e,a,i,l),Jn(e,a,i)),i}function Ea(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function _c(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function xo(e,t){_c(e,t),(e=e.alternate)&&_c(e,t)}function Dx(){return null}var Bu=typeof reportError=="function"?reportError:function(e){console.error(e)};function po(e){this._internalRoot=e}Va.prototype.render=po.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(H(409));Wa(e,t,null,null)};Va.prototype.unmount=po.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ys(function(){Wa(null,e,null,null)}),t[rs]=null}};function Va(e){this._internalRoot=e}Va.prototype.unstable_scheduleHydration=function(e){if(e){var t=vd();e={blockedOn:null,target:e,priority:t};for(var r=0;r<us.length&&t!==0&&t<us[r].priority;r++);us.splice(r,0,e),r===0&&wd(e)}};function fo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ga(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Dc(){}function Tx(e,t,r,n,a){if(a){if(typeof n=="function"){var l=n;n=function(){var h=Ea(i);l.call(h)}}var i=Uu(t,n,e,0,null,!1,!1,"",Dc);return e._reactRootContainer=i,e[rs]=i.current,cn(e.nodeType===8?e.parentNode:e),Ys(),i}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var o=n;n=function(){var h=Ea(c);o.call(h)}}var c=ho(e,0,!1,null,null,!1,!1,"",Dc);return e._reactRootContainer=c,e[rs]=c.current,cn(e.nodeType===8?e.parentNode:e),Ys(function(){Wa(t,c,r,n)}),c}function Qa(e,t,r,n,a){var l=r._reactRootContainer;if(l){var i=l;if(typeof a=="function"){var o=a;a=function(){var c=Ea(i);o.call(c)}}Wa(t,i,e,a)}else i=Tx(r,t,e,a,n);return Ea(i)}gd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Br(t.pendingLanes);r!==0&&(Ai(t,r|1),mt(t,Oe()),!(fe&6)&&(_r=Oe()+500,Is()))}break;case 13:Ys(function(){var n=ns(e,1);if(n!==null){var a=at();Ot(n,e,1,a)}}),xo(e,1)}};Li=function(e){if(e.tag===13){var t=ns(e,134217728);if(t!==null){var r=at();Ot(t,e,134217728,r)}xo(e,134217728)}};yd=function(e){if(e.tag===13){var t=Cs(e),r=ns(e,t);if(r!==null){var n=at();Ot(r,e,t,n)}xo(e,t)}};vd=function(){return ve};jd=function(e,t){var r=ve;try{return ve=e,t()}finally{ve=r}};$l=function(e,t,r){switch(t){case"input":if(Ml(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=Oa(n);if(!a)throw Error(H(90));Xc(n),Ml(n,a)}}}break;case"textarea":Jc(e,r);break;case"select":t=r.value,t!=null&&pr(e,!!r.multiple,t,!1)}};ld=oo;id=Ys;var Ex={usingClientEntryPoint:!1,Events:[kn,or,Oa,nd,ad,oo]},$r={findFiberByHostInstance:zs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Px={bundleType:$r.bundleType,version:$r.version,rendererPackageName:$r.rendererPackageName,rendererConfig:$r.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ls.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=dd(e),e===null?null:e.stateNode},findFiberByHostInstance:$r.findFiberByHostInstance||Dx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wn=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wn.isDisabled&&Wn.supportsFiber)try{Ia=Wn.inject(Px),Vt=Wn}catch{}}vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ex;vt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fo(t))throw Error(H(200));return _x(e,t,null,r)};vt.createRoot=function(e,t){if(!fo(e))throw Error(H(299));var r=!1,n="",a=Bu;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=ho(e,1,!1,null,null,r,!1,n,a),e[rs]=t.current,cn(e.nodeType===8?e.parentNode:e),new po(t)};vt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(H(188)):(e=Object.keys(e).join(","),Error(H(268,e)));return e=dd(t),e=e===null?null:e.stateNode,e};vt.flushSync=function(e){return Ys(e)};vt.hydrate=function(e,t,r){if(!Ga(t))throw Error(H(200));return Qa(null,e,t,!0,r)};vt.hydrateRoot=function(e,t,r){if(!fo(e))throw Error(H(405));var n=r!=null&&r.hydratedSources||null,a=!1,l="",i=Bu;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),t=Uu(t,null,e,1,r??null,a,!1,l,i),e[rs]=t.current,cn(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Va(t)};vt.render=function(e,t,r){if(!Ga(t))throw Error(H(200));return Qa(null,e,t,!1,r)};vt.unmountComponentAtNode=function(e){if(!Ga(e))throw Error(H(40));return e._reactRootContainer?(Ys(function(){Qa(null,null,e,!1,function(){e._reactRootContainer=null,e[rs]=null})}),!0):!1};vt.unstable_batchedUpdates=oo;vt.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Ga(r))throw Error(H(200));if(e==null||e._reactInternals===void 0)throw Error(H(38));return Qa(e,t,r,!1,n)};vt.version="18.3.1-next-f1338f8080-20240426";function Hu(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Hu)}catch(e){console.error(e)}}Hu(),Hc.exports=vt;var Mx=Hc.exports,Wu,Tc=Mx;Wu=Tc.createRoot,Tc.hydrateRoot;const Ix="https://workflow.bylinelms.com/api",Vu=p.createContext(void 0);function Ax({children:e}){const[t,r]=p.useState(null),[n,a]=p.useState(null),[l,i]=p.useState(!0);p.useEffect(()=>{(()=>{try{const N=localStorage.getItem("access_token"),d=localStorage.getItem("user_data"),w=localStorage.getItem("refresh_token");if(N&&d){const j=JSON.parse(d),P={user:j,access_token:N,refresh_token:w||"",expires_in:3600};r(j),a(P)}}catch{localStorage.removeItem("access_token"),localStorage.removeItem("user_data"),localStorage.removeItem("refresh_token")}finally{i(!1)}})()},[]);const o=async()=>({data:null,error:{message:"Admin registration is not available."}}),c=async(f,N)=>{try{const d=await fetch(`${Ix}/auth/admin/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:f,password:N})}),w=await d.json();if(d.ok&&w.success){const{user:j,access_token:P,refresh_token:$,expires_in:x}=w.data;localStorage.setItem("access_token",P),localStorage.setItem("user_data",JSON.stringify(j)),$&&localStorage.setItem("refresh_token",$);const m={user:j,access_token:P,refresh_token:$||"",expires_in:x};return r(j),a(m),{data:{user:j,session:m},error:null}}else return{data:{user:null,session:null},error:{message:w.message||"Login failed"}}}catch{return{data:{user:null,session:null},error:{message:"Network error"}}}},h=async()=>(localStorage.clear(),r(null),a(null),{error:null});return s.jsx(Vu.Provider,{value:{user:t,session:n,loading:l,signUp:o,signIn:c,signOut:h},children:e})}function Ka(){const e=p.useContext(Vu);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Lx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zx=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),se=(e,t)=>{const r=p.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:o="",children:c,...h},f)=>p.createElement("svg",{ref:f,...Lx,width:a,height:a,stroke:n,strokeWidth:i?Number(l)*24/Number(a):l,className:["lucide",`lucide-${zx(e)}`,o].join(" "),...h},[...t.map(([N,d])=>p.createElement(N,d)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=se("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=se("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fx=se("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const go=se("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $x=se("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rx=se("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gu=se("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=se("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ux=se("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bx=se("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qu=se("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=se("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hx=se("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=se("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kl=se("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=se("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yo=se("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wx=se("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=se("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vx=se("Clock3",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16.5 12",key:"1aq6pp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=se("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gx=se("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=se("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sn=se("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ku=se("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qx=se("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=se("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=se("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kx=se("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yn=se("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qx=se("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yx=se("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vn=se("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xx=se("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zx=se("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jx=se("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=se("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qu=se("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yu=se("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xu=se("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zu=se("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=se("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ep=se("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=se("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yi=se("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tp=se("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vo=se("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sp=se("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ju=se("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=se("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const em=se("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tm=se("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bl=se("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=se("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rp=se("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=se("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ec=se("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=se("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vi=se("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const np=se("UsersRound",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=se("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ji=se("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ap=se("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function I({children:e,variant:t="primary",size:r="md",loading:n=!1,icon:a,className:l="",disabled:i,...o}){const c="inline-flex items-center justify-center font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",h={primary:"bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500",secondary:"bg-gray-600 hover:bg-gray-700 text-white focus:ring-gray-500",outline:"border border-gray-300 hover:bg-gray-50 text-gray-700 focus:ring-blue-500",ghost:"hover:bg-gray-100 text-gray-700 focus:ring-blue-500",danger:"bg-red-600 hover:bg-red-700 text-white focus:ring-red-500"},f={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"};return s.jsxs("button",{className:`${c} ${h[t]} ${f[r]} ${l}`,disabled:i||n,...o,children:[n?s.jsx(Cn,{className:"w-4 h-4 animate-spin mr-2"}):a?s.jsx("span",{className:"mr-2",children:a}):null,e]})}function V({children:e,className:t="",onClick:r}){return s.jsx("div",{className:`bg-white rounded-lg shadow-sm border border-gray-200 ${r?"cursor-pointer hover:shadow-md transition-shadow":""} ${t}`,onClick:r,children:e})}function Ne({children:e,className:t=""}){return s.jsx("div",{className:`px-6 py-4 border-b border-gray-200 ${t}`,children:e})}function G({children:e,className:t=""}){return s.jsx("div",{className:`px-6 py-4 ${t}`,children:e})}function ke({children:e,className:t=""}){return s.jsx("h3",{className:`text-lg font-semibold text-gray-900 ${t}`,children:e})}function lp({onSwitchToTeam:e}){const[t,r]=p.useState(""),[n,a]=p.useState(""),[l,i]=p.useState(!1),[o,c]=p.useState(!1),[h,f]=p.useState(null),{signIn:N}=Ka(),d=async w=>{w.preventDefault(),c(!0),f(null);try{const{data:j,error:P}=await N(t,n);if(P){f(P.message);return}j!=null&&j.user&&console.log("Sign in successful:",j.user)}catch(j){f(j.message)}finally{c(!1)}};return s.jsx("div",{className:"w-full max-w-md",children:s.jsxs(V,{className:"shadow-xl border-0",children:[s.jsxs(Ne,{className:"text-center pb-6",children:[s.jsx("div",{className:"flex items-center justify-center mb-4",children:s.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center",children:s.jsx(Ju,{className:"w-6 h-6 text-white"})})}),s.jsx(ke,{className:"text-2xl font-bold text-gray-900",children:"Admin Portal"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Sign in to manage projects, teams, and tasks"})]}),s.jsxs(G,{className:"space-y-6",children:[s.jsxs("form",{onSubmit:d,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx(Zu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"email",required:!0,value:t,onChange:w=>r(w.target.value),className:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Enter your email"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(qu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:l?"text":"password",required:!0,value:n,onChange:w=>a(w.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Enter your password",minLength:6}),s.jsx("button",{type:"button",onClick:()=>i(!l),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:l?s.jsx(qa,{className:"w-4 h-4"}):s.jsx(Sn,{className:"w-4 h-4"})})]})]}),h&&s.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:s.jsx("p",{className:"text-sm text-red-600",children:h})}),s.jsx(I,{type:"submit",className:"w-full py-3",loading:o,icon:o?s.jsx(Cn,{className:"w-4 h-4"}):s.jsx(Yu,{className:"w-4 h-4"}),children:"Sign In to Admin Portal"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("div",{className:"w-full border-t border-gray-200"})}),s.jsx("div",{className:"relative flex justify-center text-sm",children:s.jsx("span",{className:"px-4 bg-white text-gray-500",children:"Or"})})]}),s.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-green-500 to-emerald-600 rounded-lg flex items-center justify-center",children:s.jsx(_e,{className:"w-4 h-4 text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-green-900",children:"Team Member?"}),s.jsx("p",{className:"text-sm text-green-700",children:"Access your tasks and performance"})]})]}),s.jsx(I,{variant:"outline",className:"w-full border-green-300 text-green-700 hover:bg-green-50",onClick:e,icon:s.jsx($x,{className:"w-4 h-4"}),children:"Sign in as Team Member"})]})]})]})})}const fs="https://workflow.bylinelms.com/api",Vn=()=>{const e=localStorage.getItem("access_token");return{"Content-Type":"application/json",...e&&{Authorization:`Bearer ${e}`}}},Gn=()=>{const e=localStorage.getItem("teamToken");return{"Content-Type":"application/json",...e&&{Authorization:`Bearer ${e}`}}},gs=async e=>{var r;const t=await e.json();if(!e.ok)throw new Error(((r=t.error)==null?void 0:r.message)||t.message||"API request failed");return t},ys=async(e,t)=>await fetch(e,t),R={get:async e=>{const t=await ys(`${fs}${e}`,{method:"GET",headers:Vn()});return gs(t)},post:async(e,t)=>{const r=await ys(`${fs}${e}`,{method:"POST",headers:Vn(),body:JSON.stringify(t)});return gs(r)},put:async(e,t)=>{const r=await ys(`${fs}${e}`,{method:"PUT",headers:Vn(),body:JSON.stringify(t)});return gs(r)},delete:async e=>{const t=await ys(`${fs}${e}`,{method:"DELETE",headers:Vn()});return gs(t)}},Ws={get:async e=>{const t=await ys(`${fs}${e}`,{method:"GET",headers:Gn()});return gs(t)},post:async(e,t)=>{const r=await ys(`${fs}${e}`,{method:"POST",headers:Gn(),body:JSON.stringify(t)});return gs(r)},put:async(e,t)=>{const r=await ys(`${fs}${e}`,{method:"PUT",headers:Gn(),body:JSON.stringify(t)});return gs(r)},delete:async e=>{const t=await ys(`${fs}${e}`,{method:"DELETE",headers:Gn()});return gs(t)}},ip={getAll:async e=>{const t=new URLSearchParams(e).toString(),r=t?`/projects?${t}`:"/projects";return(await Ws.get(r)).data},getById:async e=>(await Ws.get(`/projects/${e}`)).data},ye={getAll:async()=>(await R.get("/team")).data,getMyTasks:async()=>(await Ws.get("/team/my-tasks")).data,getMyProfile:async()=>(await Ws.get("/team/my-profile")).data,getById:async e=>(await R.get(`/team/${e}`)).data,create:async e=>(await R.post("/team",e)).data,update:async(e,t)=>(await R.put(`/team/${e}`,t)).data,delete:async e=>(await R.delete(`/team/${e}`)).data,getMembers:async()=>(await R.get("/team/members")).data,getMemberById:async e=>(await R.get(`/team/members/${e}`)).data,createMember:async e=>(await R.post("/team/members",e)).data,updateMember:async(e,t)=>(await R.put(`/team/members/${e}`,t)).data,deleteMember:async e=>(await R.delete(`/team/members/${e}`)).data,getTeams:async()=>(await R.get("/team/teams")).data,getTeamById:async e=>(await R.get(`/team/teams/${e}`)).data,createTeam:async e=>(await R.post("/team/teams",e)).data,updateTeam:async(e,t)=>(await R.put(`/team/teams/${e}`,t)).data,deleteTeam:async e=>(await R.delete(`/team/teams/${e}`)).data,addMemberToTeam:async(e,t)=>(await R.post(`/team/teams/${e}/members`,t)).data,removeMemberFromTeam:async(e,t)=>(await R.delete(`/team/teams/${e}/members/${t}`)).data,getTeamMembers:async e=>(await R.get(`/team/teams/${e}`)).data.members||[],authenticate:async e=>await R.post("/team/authenticate",e)},Pe={getAll:async e=>{const t=new URLSearchParams(e).toString(),r=t?`/projects?${t}`:"/projects";return(await R.get(r)).data},getById:async e=>(await R.get(`/projects/${e}`)).data,create:async e=>(await R.post("/projects",e)).data,update:async(e,t)=>(await R.put(`/projects/${e}`,t)).data,delete:async e=>(await R.delete(`/projects/${e}`)).data,getMembers:async e=>(await R.get(`/projects/${e}/members`)).data,getTeams:async e=>(await R.get(`/projects/${e}/teams`)).data,addMember:async(e,t)=>(await R.post(`/projects/${e}/members`,t)).data,addTeam:async(e,t)=>(await R.post(`/projects/${e}/members`,t)).data,removeMember:async(e,t)=>(await R.delete(`/projects/${e}/members/${t}`)).data,removeTeam:async(e,t)=>(await R.delete(`/projects/${e}/teams/${t}`)).data},vs={getAll:async()=>(await R.get("/categories")).data,getById:async e=>(await R.get(`/categories/${e}`)).data,create:async e=>(await R.post("/categories",e)).data,update:async(e,t)=>(await R.put(`/categories/${e}`,t)).data,delete:async e=>(await R.delete(`/categories/${e}`)).data},Wt={getAll:async()=>(await R.get("/skills")).data,getById:async e=>(await R.get(`/skills/${e}`)).data,create:async e=>(await R.post("/skills",e)).data,update:async(e,t)=>(await R.put(`/skills/${e}`,t)).data,delete:async e=>(await R.delete(`/skills/${e}`)).data},et={getAll:async e=>{const t=new URLSearchParams(e).toString(),r=t?`/tasks?${t}`:"/tasks";return(await R.get(r)).data},getById:async e=>(await R.get(`/tasks/${e}`)).data,create:async e=>(await R.post("/tasks",e)).data,update:async(e,t)=>(await R.put(`/tasks/${e}`,t)).data,delete:async e=>(await R.delete(`/tasks/${e}`)).data,getByProject:async e=>(await R.get(`/tasks?project_id=${e}`)).data,getByAssignee:async(e,t)=>(await R.get(`/tasks?assignee_id=${e}&assignee_type=${t}`)).data,updateStatus:async(e,t,r)=>{const n={status:t};return r!==void 0&&(n.progress=r),(await R.put(`/tasks/${e}`,n)).data},updateProgress:async(e,t)=>(await R.put(`/tasks/${e}`,{progress:t})).data},Pc={update:async(e,t)=>(await Ws.put(`/tasks/${e}`,t)).data,updateStatus:async(e,t,r)=>{const n={status:t};return r!==void 0&&(n.progress=r),(await Ws.put(`/tasks/${e}`,n)).data},updateProgress:async(e,t)=>(await Ws.put(`/tasks/${e}`,{progress:t})).data},Qn={getAll:async e=>{const t=new URLSearchParams(e).toString(),r=t?`/allocations?${t}`:"/allocations";return(await R.get(r)).data},getById:async e=>(await R.get(`/allocations/${e}`)).data,create:async e=>(await R.post("/allocations",e)).data,update:async(e,t)=>(await R.put(`/allocations/${e}`,t)).data,delete:async e=>(await R.delete(`/allocations/${e}`)).data,getWorkloadSummary:async e=>(await R.get(`/allocations/workload-summary?date=${e}`)).data},kt={getAll:async e=>{const t=e?`/stages?project_id=${e}`:"/stages";return(await R.get(t)).data},getById:async e=>(await R.get(`/stages/${e}`)).data,create:async e=>(await R.post("/stages",e)).data,update:async(e,t)=>(await R.put(`/stages/${e}`,t)).data,delete:async e=>(await R.delete(`/stages/${e}`)).data,getByCategory:async e=>(await R.get(`/stages/category/${e}`)).data,reorder:async(e,t)=>(await R.post(`/stages/category/${e}/reorder`,{stage_orders:t})).data},Sl={getByCategory:async e=>(await R.get(`/stage-templates/category/${e}`)).data,getById:async e=>(await R.get(`/stage-templates/${e}`)).data,create:async e=>(await R.post("/stage-templates",e)).data,update:async(e,t)=>(await R.put(`/stage-templates/${e}`,t)).data,delete:async e=>(await R.delete(`/stage-templates/${e}`)).data,bulkCreate:async(e,t)=>(await R.post(`/stage-templates/category/${e}/bulk`,{templates:t})).data},Zt={getByProject:async e=>(await R.get(`/grades/project/${e}`)).data,getAll:async()=>(await R.get("/grades")).data,getById:async e=>(await R.get(`/grades/${e}`)).data,create:async e=>(await R.post("/grades",e)).data,update:async(e,t)=>(await R.put(`/grades/${e}`,t)).data,delete:async e=>(await R.delete(`/grades/${e}`)).data,distributeWeights:async e=>(await R.post("/grades/distribute-weights",{project_id:e})).data},Jt={getByGrade:async e=>(await R.get(`/books/grade/${e}`)).data,getAll:async()=>(await R.get("/books")).data,getById:async e=>(await R.get(`/books/${e}`)).data,create:async e=>(await R.post("/books",e)).data,update:async(e,t)=>(await R.put(`/books/${e}`,t)).data,delete:async e=>(await R.delete(`/books/${e}`)).data,distributeWeights:async e=>(await R.post("/books/distribute-weights",{grade_id:e})).data},es={getByBook:async e=>(await R.get(`/units/book/${e}`)).data,getAll:async()=>(await R.get("/units")).data,getById:async e=>(await R.get(`/units/${e}`)).data,create:async e=>(await R.post("/units",e)).data,update:async(e,t)=>(await R.put(`/units/${e}`,t)).data,delete:async e=>(await R.delete(`/units/${e}`)).data,distributeWeights:async e=>(await R.post("/units/distribute-weights",{book_id:e})).data},Ds={getByUnit:async e=>(await R.get(`/lessons/unit/${e}`)).data,getAll:async()=>(await R.get("/lessons")).data,getById:async e=>(await R.get(`/lessons/${e}`)).data,create:async e=>(await R.post("/lessons",e)).data,update:async(e,t)=>(await R.put(`/lessons/${e}`,t)).data,delete:async e=>(await R.delete(`/lessons/${e}`)).data,distributeWeights:async e=>(await R.post("/lessons/distribute-weights",{unit_id:e})).data},op={getOverview:async()=>{try{const e=await Promise.allSettled([Pe.getAll().catch(o=>(console.error(" Projects fetch error:",o),[])),ye.getMembers().catch(o=>(console.error(" Team members fetch error:",o),[])),vs.getAll().catch(o=>(console.error(" Categories fetch error:",o),[])),Wt.getAll().catch(o=>(console.error(" Skills fetch error:",o),[])),et.getAll().catch(o=>(console.error(" Tasks fetch error:",o),[]))]),[t,r,n,a,l]=e.map(o=>o.status==="fulfilled"?o.value||[]:(console.error(" API call failed:",o.reason),[])),i={totalProjects:t.length,activeProjects:t.filter(o=>o.status==="active").length,totalTeamMembers:r.length,activeTeamMembers:r.filter(o=>o.is_active!==!1).length,totalCategories:n.length,totalSkills:a.length,totalTasks:l.length,activeTasks:l.filter(o=>["not-started","in-progress","under-review"].includes(o.status)).length,completedTasks:l.filter(o=>o.status==="completed").length,overdueTasks:l.filter(o=>new Date(o.end_date)<new Date&&o.status!=="completed").length};return{projects:t,teamMembers:r,tasks:l,categories:n,skills:a,stats:i}}catch(e){return console.error("Dashboard overview fetch error:",e),{projects:[],teamMembers:[],tasks:[],categories:[],skills:[],stats:{totalProjects:0,activeProjects:0,totalTeamMembers:0,activeTeamMembers:0,totalCategories:0,totalSkills:0,totalTasks:0,activeTasks:0,completedTasks:0,overdueTasks:0}}}},getRecentActivity:async()=>[]};function cp({onLogin:e,onBackToAdmin:t}){const[r,n]=p.useState(""),[a,l]=p.useState(""),[i,o]=p.useState(!1),[c,h]=p.useState(""),[f,N]=p.useState(!1),d=async w=>{w.preventDefault(),N(!0),h("");try{const j=await ye.authenticate({email:r,passcode:a});j.success&&j.data?(j.token&&localStorage.setItem("teamToken",j.token),e(j.data)):h("Invalid email or passcode. Please check your credentials.")}catch(j){console.error("Login error:",j),h(j.message||"Login failed. Please try again.")}finally{N(!1)}};return s.jsx("div",{className:"w-full max-w-md",children:s.jsxs(V,{className:"shadow-xl border-0",children:[s.jsxs(Ne,{className:"text-center pb-6",children:[s.jsx("div",{className:"flex items-center justify-center mb-4",children:s.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-green-500 to-emerald-600 rounded-xl flex items-center justify-center",children:s.jsx(_e,{className:"w-6 h-6 text-white"})})}),s.jsx(ke,{className:"text-2xl font-bold text-gray-900",children:"Team Member Portal"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Sign in to view your tasks and performance"})]}),s.jsxs(G,{className:"space-y-6",children:[s.jsxs("form",{onSubmit:d,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx(Zu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"email",required:!0,value:r,onChange:w=>n(w.target.value),className:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors",placeholder:"Enter your email"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Passcode"}),s.jsxs("div",{className:"relative",children:[s.jsx(qu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:i?"text":"password",required:!0,value:a,onChange:w=>l(w.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors",placeholder:"Enter your passcode"}),s.jsx("button",{type:"button",onClick:()=>o(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:i?s.jsx(qa,{className:"w-4 h-4"}):s.jsx(Sn,{className:"w-4 h-4"})})]})]}),c&&s.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg flex items-center",children:[s.jsx(Ox,{className:"w-4 h-4 text-red-500 mr-2"}),s.jsx("p",{className:"text-sm text-red-600",children:c})]}),s.jsx(I,{type:"submit",className:"w-full py-3",loading:f,icon:s.jsx(Yu,{className:"w-4 h-4"}),children:"Sign In to Team Portal"})]}),t&&s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("div",{className:"w-full border-t border-gray-200"})}),s.jsx("div",{className:"relative flex justify-center text-sm",children:s.jsx("span",{className:"px-4 bg-white text-gray-500",children:"Or"})})]}),t&&s.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center",children:s.jsx(Ju,{className:"w-4 h-4 text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-blue-900",children:"Admin Access?"}),s.jsx("p",{className:"text-sm text-blue-700",children:"Manage projects and teams"})]})]}),s.jsx(I,{variant:"outline",className:"w-full border-blue-300 text-blue-700 hover:bg-blue-50",onClick:t,icon:s.jsx(go,{className:"w-4 h-4"}),children:"Back to Admin Portal"})]})]})]})})}function q({children:e,variant:t="default",size:r="sm",className:n=""}){const a="inline-flex items-center font-medium rounded-full",l={default:"bg-gray-100 text-gray-800",primary:"bg-blue-100 text-blue-800",secondary:"bg-gray-100 text-gray-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800"},i={sm:"px-2.5 py-0.5 text-xs",md:"px-3 py-1 text-sm"};return s.jsx("span",{className:`${a} ${l[t]} ${i[r]} ${n}`,children:e})}function Qe({value:e,max:t=100,className:r="",showLabel:n=!0,variant:a="default"}){const l=Math.min(e/t*100,100),i={default:"bg-blue-600",success:"bg-green-600",warning:"bg-yellow-600",danger:"bg-red-600"};return s.jsxs("div",{className:`w-full ${r}`,children:[s.jsx("div",{className:"flex items-center justify-between mb-1",children:n&&s.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[Math.round(l),"%"]})}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${i[a]}`,style:{width:`${l}%`}})})]})}function st({isOpen:e,onClose:t,title:r,children:n,size:a="md"}){if(!e)return null;const l={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"};return s.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:s.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[s.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:t}),s.jsxs("div",{className:`inline-block w-full ${l[a]} my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-lg`,children:[s.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:r}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(ji,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"px-6 py-4",children:n})]})]})})}function dp({user:e,onLogout:t}){const[r,n]=p.useState([]),[a,l]=p.useState([]),[i,o]=p.useState(null),[c,h]=p.useState(!1),[f,N]=p.useState(""),[d,w]=p.useState(1),[j,P]=p.useState(!0),[$,x]=p.useState(!1);p.useEffect(()=>{m()},[e.id]);const m=async()=>{try{P(!0);const[T,ue]=await Promise.all([ye.getMyTasks(),ip.getAll()]);n(T),l(ue)}catch(T){console.error("Failed to load user data:",T)}finally{P(!1)}},v=async()=>{x(!0),await m(),x(!1)},_=r.filter(T=>T.status!=="completed"),y=r.filter(T=>T.status==="completed"),u=r.filter(T=>T.end_date&&new Date(T.end_date)<new Date&&T.status!=="completed"),g=r.length>0?Math.round(y.length/r.length*100):0;y.filter(T=>T.updated_at&&T.end_date&&new Date(T.updated_at)<=new Date(T.end_date)).length;const D=e.performance_flags||[],L=async T=>{try{await Pc.update(T,{status:"completed",progress:100,actual_hours:0}),await m()}catch(ue){console.error("Failed to mark task complete:",ue)}},F=T=>{o(T),h(!0)},te=async()=>{if(i)try{await Pc.update(i.id,{description:`${i.description}

[Extension Request: ${f} - ${d} days]`}),await m()}catch(T){console.error("Failed to submit extension request:",T)}h(!1),o(null),N(""),w(1)},z=T=>T.end_date&&new Date(T.end_date)<new Date&&T.status!=="completed",Z=T=>{if(!T.end_date)return 0;const ue=new Date,ce=new Date(T.end_date).getTime()-ue.getTime();return Math.ceil(ce/(1e3*60*60*24))};return j?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(yi,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-blue-600"}),s.jsx("p",{className:"text-gray-600",children:"Loading your portal..."})]})}):s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex items-center justify-between h-16",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-green-500 to-emerald-600 rounded-full flex items-center justify-center text-white font-medium",children:e.name.charAt(0)}),s.jsxs("div",{children:[s.jsxs("h1",{className:"text-lg font-semibold text-gray-900",children:["Welcome, ",e.name]}),s.jsx("p",{className:"text-sm text-gray-600",children:e.skills&&e.skills.length>0?e.skills.join(", "):"Team Member"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs(I,{variant:"outline",size:"sm",onClick:v,loading:$,children:[s.jsx(yi,{className:"w-4 h-4 mr-2"}),"Refresh"]}),s.jsxs(I,{variant:"ghost",onClick:()=>{localStorage.removeItem("teamToken"),t()},children:[s.jsx(Xu,{className:"w-4 h-4 mr-2"}),"Logout"]})]})]})})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[s.jsx(V,{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:s.jsx(G,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 rounded-lg bg-blue-400 bg-opacity-20",children:s.jsx(pt,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-blue-100 text-sm font-medium",children:"Active Tasks"}),s.jsx("p",{className:"text-2xl font-bold",children:_.length})]})]})})}),s.jsx(V,{className:"bg-gradient-to-r from-green-500 to-green-600 text-white",children:s.jsx(G,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 rounded-lg bg-green-400 bg-opacity-20",children:s.jsx(kl,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-green-100 text-sm font-medium",children:"Completed"}),s.jsx("p",{className:"text-2xl font-bold",children:y.length})]})]})})}),s.jsx(V,{className:"bg-gradient-to-r from-red-500 to-red-600 text-white",children:s.jsx(G,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 rounded-lg bg-red-400 bg-opacity-20",children:s.jsx(ht,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-red-100 text-sm font-medium",children:"Overdue"}),s.jsx("p",{className:"text-2xl font-bold",children:u.length})]})]})})}),s.jsx(V,{className:"bg-gradient-to-r from-purple-500 to-purple-600 text-white",children:s.jsx(G,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 rounded-lg bg-purple-400 bg-opacity-20",children:s.jsx(Jr,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-purple-100 text-sm font-medium",children:"Completion Rate"}),s.jsxs("p",{className:"text-2xl font-bold",children:[g,"%"]})]})]})})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsxs(V,{children:[s.jsx(Ne,{children:s.jsxs(ke,{className:"flex items-center",children:[s.jsx(pt,{className:"w-5 h-5 mr-2"}),"My Active Tasks"]})}),s.jsx(G,{className:"space-y-4",children:_.length===0?s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(pt,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),s.jsx("p",{children:"No active tasks assigned"})]}):_.map(T=>{const ue=a.find(b=>b.id===T.project_id),pe=Z(T),ce=z(T);return s.jsxs("div",{className:`p-4 border rounded-lg ${ce?"border-red-200 bg-red-50":"border-gray-200 bg-white"}`,children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("h4",{className:"font-medium text-gray-900 flex items-center",children:[T.name,ce&&s.jsx(ht,{className:"w-4 h-4 text-red-500 ml-2"})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600 mb-1",children:[s.jsx("span",{className:"font-medium",children:ue==null?void 0:ue.name}),s.jsx("span",{children:""}),s.jsx("span",{children:T.stage_name}),T.category_name&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:""}),s.jsx("span",{children:T.category_name})]})]}),T.description&&s.jsx("p",{className:"text-sm text-gray-700 mt-1",children:T.description}),(T.grade_name||T.book_name||T.unit_name||T.lesson_name)&&s.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[s.jsx("span",{className:"font-medium",children:"Educational Hierarchy:"}),s.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[T.grade_name&&s.jsx(q,{variant:"default",className:"text-xs",children:T.grade_name}),T.book_name&&s.jsx(q,{variant:"default",className:"text-xs",children:T.book_name}),T.unit_name&&s.jsx(q,{variant:"default",className:"text-xs",children:T.unit_name}),T.lesson_name&&s.jsx(q,{variant:"default",className:"text-xs",children:T.lesson_name})]})]}),T.required_skills&&T.required_skills.length>0&&s.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[s.jsx("span",{className:"font-medium",children:"Required Skills:"}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:T.required_skills.map((b,E)=>s.jsx(q,{variant:"secondary",className:"text-xs",children:b},E))})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(q,{variant:T.priority==="urgent"?"danger":T.priority==="high"?"warning":T.priority==="medium"?"primary":"default",size:"sm",children:T.priority}),s.jsx(q,{variant:T.status==="in-progress"?"primary":T.status==="under-review"?"warning":T.status==="blocked"?"danger":"default",size:"sm",children:T.status.replace("-"," ")})]})]}),s.jsxs("div",{className:"space-y-2 mb-4",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Progress"}),s.jsxs("span",{className:"font-medium",children:[T.progress,"%"]})]}),s.jsx(Qe,{value:T.progress})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Je,{className:"w-4 h-4 mr-1"}),"Due: ",T.end_date?new Date(T.end_date).toLocaleDateString():"No due date"]}),s.jsx("div",{className:`font-medium ${ce?"text-red-600":pe<=1?"text-orange-600":pe<=3?"text-yellow-600":"text-green-600"}`,children:ce?`${Math.abs(pe)} days overdue`:pe===0?"Due today":pe===1?"Due tomorrow":`${pe} days left`})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-gray-600",children:["Estimated: ",T.estimated_hours,"h",T.actual_hours&&` | Actual: ${T.actual_hours}h`]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(I,{variant:"outline",size:"sm",onClick:()=>F(T),children:[s.jsx(Xs,{className:"w-4 h-4 mr-1"}),"Request Extension"]}),s.jsxs(I,{variant:"primary",size:"sm",onClick:()=>L(T.id),disabled:T.status==="completed",children:[s.jsx(kl,{className:"w-4 h-4 mr-1"}),"Mark Complete"]})]})]})]},T.id)})})]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(V,{children:[s.jsx(Ne,{children:s.jsxs(ke,{className:"flex items-center",children:[s.jsx($s,{className:"w-5 h-5 mr-2"}),"My Performance Flags"]})}),s.jsx(G,{children:D.length===0?s.jsx("p",{className:"text-gray-500 text-center py-4",children:"No performance flags"}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:D.filter(T=>T.type==="gold").length}),s.jsx("div",{className:"text-xs text-gray-600",children:" Gold Flags"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:D.filter(T=>T.type==="green").length}),s.jsx("div",{className:"text-xs text-gray-600",children:" Green Flags"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-orange-600",children:D.filter(T=>T.type==="orange").length}),s.jsx("div",{className:"text-xs text-gray-600",children:" Orange Flags"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-red-600",children:D.filter(T=>T.type==="red").length}),s.jsx("div",{className:"text-xs text-gray-600",children:" Red Flags"})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Recent Flags:"}),s.jsx("div",{className:"space-y-2",children:D.slice(0,5).map((T,ue)=>s.jsx("div",{className:"flex items-center justify-between p-2 rounded-lg bg-white border",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(q,{variant:T.type==="gold"||T.type==="green"?"success":T.type==="orange"?"warning":"danger",size:"sm",children:[s.jsx($s,{className:"w-3 h-3 mr-1"}),T.type.toUpperCase()]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:T.reason}),s.jsxs("p",{className:"text-xs text-gray-600",children:[new Date(T.date).toLocaleDateString()," by ",T.added_by]})]})]})},ue))})]})]})})]}),s.jsxs(V,{children:[s.jsx(Ne,{children:s.jsxs(ke,{className:"flex items-center",children:[s.jsx(Gu,{className:"w-5 h-5 mr-2"}),"Recent Completions"]})}),s.jsx(G,{children:y.length===0?s.jsx("p",{className:"text-gray-500 text-center py-4",children:"No completed tasks yet"}):s.jsx("div",{className:"space-y-2",children:y.slice(0,5).map(T=>{const ue=a.find(pe=>pe.id===T.project_id);return s.jsxs("div",{className:"flex items-center justify-between p-2 bg-green-50 rounded",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:T.name}),s.jsx("p",{className:"text-xs text-gray-600",children:ue==null?void 0:ue.name})]}),s.jsx(kl,{className:"w-4 h-4 text-green-600"})]},T.id)})})})]})]})]})]}),s.jsx(st,{isOpen:c,onClose:()=>h(!1),title:"Request Task Extension",children:s.jsxs("div",{className:"space-y-4",children:[i&&s.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:i.name}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Current due date: ",i.end_date?new Date(i.end_date).toLocaleDateString():"No due date"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Extension Days"}),s.jsx("input",{type:"number",min:"1",max:"30",value:d,onChange:T=>w(parseInt(T.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason for Extension"}),s.jsx("textarea",{value:f,onChange:T=>N(T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:4,placeholder:"Please explain why you need an extension...",required:!0})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx(I,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),s.jsx(I,{onClick:te,disabled:!f.trim(),children:"Submit Request"})]})]})})]})}const up=[{id:"1",name:"Sarah Johnson",email:"sarah.johnson@company.com",skills:["Instructional Designers","Content Writers"],passcode:"DEMO123",isActive:!0,performanceFlags:[{id:"1",type:"green",reason:"Completed project ahead of schedule",date:"2024-01-15",addedBy:"Manager"}]},{id:"2",name:"Mike Chen",email:"mike.chen@company.com",skills:["Developers","Tech"],passcode:"TECH456",isActive:!0,performanceFlags:[]},{id:"3",name:"Emily Rodriguez",email:"emily.rodriguez@company.com",skills:["Graphic Designers","Animators"]},{id:"4",name:"David Kim",email:"david.kim@company.com",skills:["QA","Tech"]},{id:"5",name:"Lisa Thompson",email:"lisa.thompson@company.com",skills:["Marketing","Sales"]},{id:"6",name:"John Smith",email:"john.smith@company.com",skills:["Content Writers","Instructional Designers"]}],mp=[{id:"1",name:"Pre-K Curriculum Development",description:"Comprehensive curriculum design for Pre-K students including KG-1, KG-2, and KG-3 levels",category:"Curriculum Design",status:"active",startDate:new Date("2024-01-15"),endDate:new Date("2024-06-30"),progress:65,stages:[{id:"stage-1",name:"Curriculum Analysis",description:"Analyze curriculum requirements and standards",order:1,weight:20,status:"completed",progress:100,startDate:new Date("2024-01-15"),endDate:new Date("2024-02-01"),reviewRounds:[],tasks:[]},{id:"stage-2",name:"Content Creation",description:"Develop curriculum content and materials",order:2,weight:60,status:"in-progress",progress:65,startDate:new Date("2024-02-01"),endDate:new Date("2024-04-30"),reviewRounds:[],tasks:[]},{id:"stage-3",name:"Review & Finalization",description:"Review and finalize curriculum materials",order:3,weight:20,status:"not-started",progress:0,startDate:new Date("2024-05-01"),endDate:new Date("2024-06-30"),reviewRounds:[],tasks:[]}],teamMembers:["1","3","6"],grades:[{id:"kg1",name:"KG-1",description:"Kindergarten Grade 1",projectId:"1",order:1,weight:40,books:[{id:"kg1-book1",name:"Book 1",type:"student",description:"Student Book 1 for KG-1",gradeId:"kg1",order:1,weight:70,units:[{id:"kg1-book1-unit1",name:"Unit 1: Colors and Shapes",description:"Introduction to basic colors and shapes",bookId:"kg1-book1",order:1,weight:60,lessons:[{id:"kg1-book1-unit1-lesson1",name:"Lesson 1: Primary Colors",description:"Learning red, blue, and yellow",unitId:"kg1-book1-unit1",order:1,weight:50},{id:"kg1-book1-unit1-lesson2",name:"Lesson 2: Basic Shapes",description:"Circle, square, and triangle",unitId:"kg1-book1-unit1",order:2,weight:50}]},{id:"kg1-book1-unit2",name:"Unit 2: Numbers 1-10",description:"Introduction to counting and numbers",bookId:"kg1-book1",order:2,weight:40,lessons:[{id:"kg1-book1-unit2-lesson1",name:"Lesson 1: Numbers 1-5",description:"Learning to count 1 to 5",unitId:"kg1-book1-unit2",order:1,weight:100}]}]},{id:"kg1-teacher-guide",name:"Teacher Guide",type:"teacher",description:"Teacher guide for KG-1",gradeId:"kg1",order:2,weight:30,units:[{id:"kg1-tg-unit1",name:"Unit 1: Teaching Colors and Shapes",description:"Guide for teaching colors and shapes",bookId:"kg1-teacher-guide",order:1,weight:100,lessons:[{id:"kg1-tg-unit1-lesson1",name:"Lesson 1: Color Activities",description:"Activities for teaching colors",unitId:"kg1-tg-unit1",order:1,weight:100}]}]}]},{id:"kg2",name:"KG-2",description:"Kindergarten Grade 2",projectId:"1",order:2,weight:35,books:[{id:"kg2-book1",name:"Book 1",type:"student",description:"Student Book 1 for KG-2",gradeId:"kg2",order:1,weight:100,units:[{id:"kg2-book1-unit1",name:"Unit 1: Letters A-M",description:"Introduction to first half of alphabet",bookId:"kg2-book1",order:1,weight:100,lessons:[{id:"kg2-book1-unit1-lesson1",name:"Lesson 1: Letters A-E",description:"Learning letters A through E",unitId:"kg2-book1-unit1",order:1,weight:100}]}]}]},{id:"kg3",name:"KG-3",description:"Kindergarten Grade 3",projectId:"1",order:3,weight:25,books:[{id:"kg3-book1",name:"Book 1",type:"student",description:"Student Book 1 for KG-3",gradeId:"kg3",order:1,weight:100,units:[{id:"kg3-book1-unit1",name:"Unit 1: Reading Readiness",description:"Preparing for reading",bookId:"kg3-book1",order:1,weight:100,lessons:[{id:"kg3-book1-unit1-lesson1",name:"Lesson 1: Phonics Basics",description:"Introduction to phonics",unitId:"kg3-book1-unit1",order:1,weight:100}]}]}]}]},{id:"2",name:"LMS Platform Redesign",description:"Complete overhaul of the learning management system interface and user experience",category:"IT Applications",status:"active",startDate:new Date("2024-02-01"),endDate:new Date("2024-08-15"),progress:42,stages:[],teamMembers:["2","4","5"]},{id:"3",name:"Interactive Science Course",description:"eLearning course with interactive animations and simulations for high school science",category:"eLearning Design",status:"planning",startDate:new Date("2024-03-01"),endDate:new Date("2024-09-30"),progress:15,stages:[],teamMembers:["1","2","3"]},{id:"4",name:"Corporate Training Module",description:"Employee onboarding and training content for new hires",category:"eLearning Design",status:"completed",startDate:new Date("2023-10-01"),endDate:new Date("2024-01-15"),progress:100,stages:[],teamMembers:["1","6"]}],hp=[{id:"1",name:"Content Strategy Development",description:"Create comprehensive content strategy for Pre-K curriculum",projectId:"1",stageId:"stage-2",gradeId:"kg1",bookId:"kg1-book1",unitId:"kg1-book1-unit1",lessonId:"kg1-book1-unit1-lesson1",componentPath:"KG-1 > Book 1 > Unit 1: Colors and Shapes > Lesson 1: Primary Colors",assignees:["1","6"],skills:["Content Writers","Instructional Designers"],status:"in-progress",priority:"high",startDate:new Date("2024-01-15"),endDate:new Date("2024-02-15"),progress:75,estimatedHours:40,actualHours:32},{id:"2",name:"UI/UX Design for LMS Dashboard",description:"Design new dashboard interface for the learning management system",projectId:"2",stageId:"stage-2",assignees:["3"],skills:["Graphic Designers"],status:"under-review",priority:"high",startDate:new Date("2024-02-01"),endDate:new Date("2024-02-28"),progress:90,estimatedHours:60,actualHours:55},{id:"3",name:"Database Migration Script",description:"Create scripts for migrating user data to new LMS platform",projectId:"2",stageId:"stage-2",assignees:["2"],skills:["Developers","Tech"],status:"not-started",priority:"medium",startDate:new Date("2024-03-01"),endDate:new Date("2024-03-15"),progress:0,estimatedHours:32},{id:"4",name:"Quality Assurance Testing",description:"Comprehensive testing of LMS functionality and user experience",projectId:"2",stageId:"stage-2",assignees:["4"],skills:["QA"],status:"blocked",priority:"urgent",startDate:new Date("2024-02-15"),endDate:new Date("2024-01-30"),progress:25,estimatedHours:48,actualHours:12},{id:"5",name:"Marketing Campaign Design",description:"Create promotional materials for new curriculum launch",projectId:"1",stageId:"stage-1",assignees:["5"],skills:["Marketing"],status:"completed",priority:"medium",startDate:new Date("2024-01-01"),endDate:new Date("2024-01-31"),progress:100,estimatedHours:24,actualHours:26},{id:"6",name:"Animation Storyboard Creation",description:"Develop storyboards for interactive science course animations",projectId:"3",stageId:"stage-2",assignees:["3"],skills:["Animators","Graphic Designers"],status:"in-progress",priority:"medium",startDate:new Date("2024-02-10"),endDate:new Date("2024-03-10"),progress:40,estimatedHours:36,actualHours:15},{id:"7",name:"KG-2 Letter Recognition Content",description:"Create content for letter recognition in KG-2",projectId:"1",stageId:"stage-2",gradeId:"kg2",bookId:"kg2-book1",unitId:"kg2-book1-unit1",lessonId:"kg2-book1-unit1-lesson1",componentPath:"KG-2 > Book 1 > Unit 1: Letters A-M > Lesson 1: Letters A-E",assignees:["1"],skills:["Content Writers","Instructional Designers"],status:"not-started",priority:"medium",startDate:new Date("2024-02-15"),endDate:new Date("2024-03-15"),progress:0,estimatedHours:30},{id:"8",name:"KG-3 Phonics Activities",description:"Develop phonics activities for KG-3 students",projectId:"1",stageId:"stage-2",gradeId:"kg3",bookId:"kg3-book1",unitId:"kg3-book1-unit1",lessonId:"kg3-book1-unit1-lesson1",componentPath:"KG-3 > Book 1 > Unit 1: Reading Readiness > Lesson 1: Phonics Basics",assignees:["6"],skills:["Instructional Designers"],status:"in-progress",priority:"high",startDate:new Date("2024-02-01"),endDate:new Date("2024-03-01"),progress:30,estimatedHours:25,actualHours:8}],xp={projects:mp,users:up,tasks:hp,allocations:[],categories:["eLearning Design","Curriculum Design","IT Applications"],skills:["Content Writers","Instructional Designers","Graphic Designers","Developers","Animators","Tech","Sales","Marketing","QA"],filters:{},selectedProject:null,selectedView:"dashboard"};function pp(e,t){switch(t.type){case"SET_PROJECTS":return{...e,projects:t.payload};case"ADD_PROJECT":return{...e,projects:[...e.projects,t.payload]};case"UPDATE_PROJECT":return{...e,projects:e.projects.map(r=>r.id===t.payload.id?t.payload:r)};case"DELETE_PROJECT":return{...e,projects:e.projects.filter(r=>r.id!==t.payload)};case"SET_USERS":return{...e,users:t.payload};case"ADD_USER":return{...e,users:[...e.users,t.payload]};case"UPDATE_USER":return{...e,users:e.users.map(r=>r.id===t.payload.id?t.payload:r)};case"SET_TASKS":return{...e,tasks:t.payload};case"ADD_TASK":return{...e,tasks:[...e.tasks,t.payload]};case"UPDATE_TASK":return{...e,tasks:e.tasks.map(r=>r.id===t.payload.id?t.payload:r)};case"SET_ALLOCATIONS":return{...e,allocations:t.payload};case"ADD_ALLOCATION":return{...e,allocations:[...e.allocations,t.payload]};case"UPDATE_ALLOCATION":return{...e,allocations:e.allocations.map(r=>r.userId===t.payload.userId&&r.projectId===t.payload.projectId&&r.taskId===t.payload.taskId?t.payload:r)};case"ADD_CATEGORY":return{...e,categories:[...e.categories,t.payload]};case"ADD_SKILL":return{...e,skills:[...e.skills,t.payload]};case"SET_FILTERS":return{...e,filters:t.payload};case"SET_SELECTED_PROJECT":return{...e,selectedProject:t.payload};case"SET_SELECTED_VIEW":return{...e,selectedView:t.payload};default:return e}}const sm=p.createContext(null);function fp({children:e}){const[t,r]=p.useReducer(pp,xp);return s.jsx(sm.Provider,{value:{state:t,dispatch:r},children:e})}function Pr(){const e=p.useContext(sm);if(!e)throw new Error("useApp must be used within an AppProvider");return e}const gp=[{name:"Dashboard",icon:Xx,key:"dashboard"},{name:"Projects",icon:Rs,key:"projects"},{name:"Teams",icon:_e,key:"teams"},{name:"Tasks",icon:pt,key:"tasks"},{name:"Allocations",icon:Je,key:"allocations"},{name:"Analytics",icon:ps,key:"analytics"},{name:"Settings",icon:sp,key:"settings"}];function yp(){const{state:e,dispatch:t}=Pr();return s.jsxs("div",{className:"w-64 bg-white shadow-sm border-r border-gray-200 h-full",children:[s.jsxs("div",{className:"p-6",children:[s.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"ProjectFlow"}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Project Management"})]}),s.jsx("nav",{className:"px-4 space-y-1",children:gp.map(r=>{const n=e.selectedView===r.key;return s.jsxs("button",{onClick:()=>t({type:"SET_SELECTED_VIEW",payload:r.key}),className:`w-full flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ${n?"bg-blue-50 text-blue-700 border-r-2 border-blue-700":"text-gray-700 hover:bg-gray-50 hover:text-gray-900"}`,children:[s.jsx(r.icon,{className:`mr-3 h-5 w-5 ${n?"text-blue-700":"text-gray-400"}`}),r.name]},r.key)})})]})}function vp(){const{signOut:e,user:t}=Ka(),r=async()=>{await e()};return s.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[s.jsx("div",{className:"flex items-center flex-1",children:s.jsxs("div",{className:"relative max-w-md w-full",children:[s.jsx(vo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",placeholder:"Search projects, tasks, or team members...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(I,{variant:"ghost",size:"sm",children:s.jsx(Bx,{className:"w-4 h-4"})}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[s.jsx(vi,{className:"w-4 h-4"}),s.jsx("span",{children:t==null?void 0:t.email})]}),s.jsx(I,{variant:"ghost",size:"sm",onClick:r,children:s.jsx(Xu,{className:"w-4 h-4"})})]})]})})}function jp(){const{state:e,dispatch:t}=Pr(),[r,n]=p.useState(null),[a,l]=p.useState(!0),[i,o]=p.useState(null);p.useEffect(()=>{let y=!0;return(async()=>{try{l(!0),o(null);const g=await op.getOverview();y&&n(g)}catch(g){y&&(console.error("Dashboard fetch error:",g),o(g.message||"Failed to load dashboard data"))}finally{y&&l(!1)}})(),()=>{y=!1}},[]);const c=(y,u)=>{t({type:"SET_SELECTED_VIEW",payload:y}),u&&t({type:"SET_FILTERS",payload:u})},h=(r==null?void 0:r.projects)||[],f=(r==null?void 0:r.teamMembers)||[],N=(r==null?void 0:r.tasks)||[],d=new Date,w=new Date(d);w.setDate(w.getDate()+1);const j=new Date(d);j.setDate(d.getDate()+7);const P=N.filter(y=>new Date(y.end_date).toDateString()===d.toDateString()&&y.status!=="completed"),$=N.filter(y=>new Date(y.end_date).toDateString()===w.toDateString()&&y.status!=="completed"),x=N.filter(y=>{const u=new Date(y.end_date);return u>=d&&u<=j&&y.status!=="completed"}),m=y=>{t({type:"SET_SELECTED_VIEW",payload:"tasks"}),t({type:"SET_FILTERS",payload:{teamMembers:[y]}})};if(a)return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),s.jsx("p",{className:"text-gray-600",children:"Overview of your project management activities"})]}),s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Cn,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-blue-600"}),s.jsx("p",{className:"text-gray-600",children:"Loading dashboard data..."})]})})]});if(i)return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),s.jsx("p",{className:"text-gray-600",children:"Overview of your project management activities"})]}),s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx(ht,{className:"w-8 h-8 mx-auto mb-4 text-red-600"}),s.jsx("p",{className:"text-red-600 mb-4",children:i}),s.jsx(I,{onClick:()=>window.location.reload(),variant:"outline",children:"Try Again"})]})})]});const v=(r==null?void 0:r.stats)||{},_=[{title:"Total Projects",value:v.totalProjects||0,icon:Rs,color:"text-blue-600",bg:"bg-blue-50",onClick:()=>c("projects")},{title:"Active Projects",value:v.activeProjects||0,icon:Jr,color:"text-green-600",bg:"bg-green-50",onClick:()=>c("projects",{statuses:["active"]})},{title:"Team Members",value:v.totalTeamMembers||0,icon:_e,color:"text-purple-600",bg:"bg-purple-50",onClick:()=>c("teams")},{title:"Categories",value:v.totalCategories||0,icon:pt,color:"text-orange-600",bg:"bg-orange-50",onClick:()=>c("settings")}];return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),s.jsx("p",{className:"text-gray-600",children:"Overview of your project management activities"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:_.map(y=>s.jsx(V,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:y.onClick,children:s.jsxs(G,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`p-2 rounded-lg ${y.bg}`,children:s.jsx(y.icon,{className:`w-6 h-6 ${y.color}`})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:y.title}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y.value})]})]}),s.jsxs("div",{className:"mt-2 flex items-center text-sm text-gray-500",children:[s.jsx("span",{children:"Click to view details"}),s.jsx(Bt,{className:"w-4 h-4 ml-1"})]})]})},y.title))}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx(V,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>c("tasks",{dueToday:!0}),children:s.jsxs(G,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Due Today"}),s.jsx("p",{className:"text-2xl font-bold text-red-600",children:P.length})]}),s.jsx(Je,{className:"w-8 h-8 text-red-500"})]}),s.jsxs("div",{className:"mt-2 flex items-center text-sm text-gray-500",children:[s.jsx("span",{children:"Click to view tasks"}),s.jsx(Bt,{className:"w-4 h-4 ml-1"})]})]})}),s.jsx(V,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>c("tasks",{dueTomorrow:!0}),children:s.jsxs(G,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Due Tomorrow"}),s.jsx("p",{className:"text-2xl font-bold text-orange-600",children:$.length})]}),s.jsx(Je,{className:"w-8 h-8 text-orange-500"})]}),s.jsxs("div",{className:"mt-2 flex items-center text-sm text-gray-500",children:[s.jsx("span",{children:"Click to view tasks"}),s.jsx(Bt,{className:"w-4 h-4 ml-1"})]})]})}),s.jsx(V,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>c("tasks",{dueThisWeek:!0}),children:s.jsxs(G,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Due This Week"}),s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:x.length})]}),s.jsx(Je,{className:"w-8 h-8 text-blue-500"})]}),s.jsxs("div",{className:"mt-2 flex items-center text-sm text-gray-500",children:[s.jsx("span",{children:"Click to view tasks"}),s.jsx(Bt,{className:"w-4 h-4 ml-1"})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(V,{children:[s.jsx(Ne,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ke,{children:"Recent Projects"}),s.jsx(I,{variant:"ghost",size:"sm",onClick:()=>c("projects"),children:"View All"})]})}),s.jsx(G,{className:"space-y-4",children:h.slice(0,5).map(y=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer transition-colors",onClick:()=>c("projects"),children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:y.name}),s.jsx("p",{className:"text-sm text-gray-600",children:y.category_name||y.category}),s.jsx(Qe,{value:y.progress||0,className:"mt-2"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(q,{variant:y.status==="active"?"primary":y.status==="completed"?"success":y.status==="on-hold"?"warning":"default",children:y.status}),s.jsx(Bt,{className:"w-4 h-4 text-gray-400"})]})]},y.id))})]}),s.jsxs(V,{children:[s.jsx(Ne,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ke,{children:"Team Workload"}),s.jsx(I,{variant:"ghost",size:"sm",onClick:()=>c("teams"),children:"View All"})]})}),s.jsx(G,{className:"space-y-4",children:f.slice(0,6).map(y=>{var L;const u=N.filter(F=>F.assignees&&F.assignees.includes(y.id)),g=u.filter(F=>F.status==="completed").length,D=u.length>0?g/u.length*100:0;return s.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>m(y.id),children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm font-medium",children:y.name.charAt(0)}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:y.name}),s.jsx("p",{className:"text-sm text-gray-600",children:((L=y.skills)==null?void 0:L[0])||"No skills"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:[u.length," tasks"]}),s.jsx(Qe,{value:D,className:"w-20",showLabel:!1,variant:D>80?"warning":"default"}),s.jsx(Bt,{className:"w-4 h-4 text-gray-400"})]})]},y.id)})})]})]}),s.jsxs(V,{children:[s.jsx(Ne,{children:s.jsx(ke,{children:"Quick Actions"})}),s.jsx(G,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("button",{onClick:()=>t({type:"SET_SELECTED_VIEW",payload:"projects"}),className:"p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors",children:[s.jsx(Rs,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),s.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Create New Project"})]}),s.jsxs("button",{onClick:()=>t({type:"SET_SELECTED_VIEW",payload:"teams"}),className:"p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-green-500 hover:bg-green-50 transition-colors",children:[s.jsx(_e,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),s.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Add Team Member"})]}),s.jsxs("button",{onClick:()=>t({type:"SET_SELECTED_VIEW",payload:"tasks"}),className:"p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-orange-500 hover:bg-orange-50 transition-colors",children:[s.jsx(pt,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),s.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Create Task"})]})]})})]})]})}function wp(e,t){const r=t.filter(l=>l.lessonId===e);if(r.length===0)return{progress:0,completedWeight:0,totalWeight:0};const a=r.reduce((l,i)=>l+i.progress,0)/r.length;return{progress:Math.round(a),completedWeight:a,totalWeight:100}}function Np(e,t){let r=0,n=0;return e.lessons.forEach(l=>{const i=wp(l.id,t);r+=i.progress*l.weight/100,n+=l.weight}),{progress:n>0?Math.round(r):0,completedWeight:r,totalWeight:n}}function kp(e,t){let r=0,n=0;return e.units.forEach(l=>{const i=Np(l,t);r+=i.progress*l.weight/100,n+=l.weight}),{progress:n>0?Math.round(r):0,completedWeight:r,totalWeight:n}}function bp(e,t){let r=0,n=0;return e.books.forEach(l=>{const i=kp(l,t);r+=i.progress*l.weight/100,n+=l.weight}),{progress:n>0?Math.round(r):0,completedWeight:r,totalWeight:n}}function wi(e,t){const r=t.filter(l=>l.stageId===e);if(r.length===0)return{progress:0,completedWeight:0,totalWeight:0};const a=r.reduce((l,i)=>l+i.progress,0)/r.length;return{progress:Math.round(a),completedWeight:a,totalWeight:100}}function Sp(e,t){let r=0,n=0;return e.stages&&e.stages.length>0&&e.stages.forEach(l=>{const i=wi(l.id,t);r+=i.progress*l.weight/100,n+=l.weight}),e.grades&&e.grades.length>0&&e.grades.forEach(l=>{const i=bp(l,t);r+=i.progress*l.weight/100,n+=l.weight}),{progress:n>0?Math.round(r):0,completedWeight:r,totalWeight:n}}function Vs(e){switch(e){case"not-started":return 0;case"in-progress":return 50;case"under-review":return 90;case"completed":return 100;case"blocked":return 25;default:return 0}}function Cp({taskId:e,onBack:t}){var Q;const[r,n]=p.useState(null),[a,l]=p.useState(!0),[i,o]=p.useState(null),[c,h]=p.useState(!1),[f,N]=p.useState(null),[d,w]=p.useState(null),[j,P]=p.useState([]),[$,x]=p.useState([]),[m,v]=p.useState([]),[_,y]=p.useState([]),[u,g]=p.useState([]),[D,L]=p.useState([]),[F,te]=p.useState([]),[z,Z]=p.useState([]),[T,ue]=p.useState(null);p.useEffect(()=>{pe()},[e]);const pe=async()=>{try{l(!0),o(null);const O=await et.getById(e);if(console.log(" Task data received:",O),O.progress===0||O.progress===null){const Y=Vs(O.status);console.log(" Calculating progress for status:",O.status,"->",Y),O.progress=Y}n(O);const[J,K,oe,he,we,Se,ze,M,W]=await Promise.all([Pe.getById(O.project_id),kt.getById(O.stage_id),ye.getMembers(),ye.getTeams(),Wt.getAll(),Zt.getAll(),Jt.getAll(),es.getAll(),Ds.getAll()]);N(J),w(K),x(oe),v(he),y(we),g(Se),L(ze),te(M),Z(W),console.log(" Task assignees data:",O.assignees),console.log(" All team members:",oe);const re=oe.filter(Y=>Array.isArray(O.assignees)?O.assignees.some(ie=>typeof ie=="object"&&ie.id?ie.id===Y.id:ie===Y.id):!1);if(console.log(" Filtered task assignees:",re),P(re),O.grade_id||O.book_id||O.unit_id||O.lesson_id){const Y={};O.grade_id&&(Y.grade=await Zt.getById(O.grade_id)),O.book_id&&(Y.book=await Jt.getById(O.book_id)),O.unit_id&&(Y.unit=await es.getById(O.unit_id)),O.lesson_id&&(Y.lesson=await Ds.getById(O.lesson_id)),ue(Y)}}catch(O){console.error("Failed to load task details:",O),o(O.message||"Failed to load task details")}finally{l(!1)}},ce=async O=>{try{const J=await et.update(e,O);n(J),h(!1),await pe()}catch(J){console.error("Failed to update task:",J),o(J.message||"Failed to update task")}},b=O=>{switch(O){case"not-started":return"default";case"in-progress":return"primary";case"under-review":return"warning";case"completed":return"success";case"blocked":return"danger";default:return"default"}},E=O=>{switch(O){case"low":return"default";case"medium":return"primary";case"high":return"warning";case"urgent":return"danger";default:return"default"}},B=()=>r!=null&&r.end_date?new Date(r.end_date)<new Date&&r.status!=="completed":!1;return a?s.jsx("div",{className:"p-6 space-y-6",children:s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading task details..."})]})})}):i||!r?s.jsx("div",{className:"p-6 space-y-6",children:s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx(ht,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),s.jsx("p",{className:"text-red-600 mb-4",children:i||"Task not found"}),s.jsx(I,{onClick:t,children:"Go Back"})]})})}):s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs(I,{variant:"ghost",onClick:t,children:[s.jsx(go,{className:"w-4 h-4 mr-2"}),"Back to Tasks"]}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:r.name}),s.jsxs("p",{className:"text-gray-600",children:[f==null?void 0:f.name,"  ",d==null?void 0:d.name]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(q,{variant:b(r.status),children:r.status.replace("-"," ")}),s.jsx(q,{variant:E(r.priority),children:r.priority}),B()&&s.jsxs(q,{variant:"danger",children:[s.jsx(ht,{className:"w-3 h-3 mr-1"}),"Overdue"]}),s.jsxs(I,{variant:"outline",size:"sm",onClick:()=>h(!0),children:[s.jsx(Us,{className:"w-4 h-4 mr-2"}),"Edit Task"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs(V,{children:[s.jsx(Ne,{children:s.jsx(ke,{children:"Task Overview"})}),s.jsxs(G,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Description"}),s.jsx("p",{className:"text-gray-700",children:r.description||"No description provided"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Progress"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Qe,{value:r.progress}),s.jsxs("p",{className:"text-sm text-gray-600",children:[r.progress,"% complete"]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Time Tracking"}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("p",{className:"text-sm text-gray-600",children:["Estimated: ",r.estimated_hours||0,"h"]}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Actual: ",r.actual_hours||0,"h"]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Timeline"}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("p",{className:"text-sm text-gray-600",children:[s.jsx(Je,{className:"w-3 h-3 inline mr-1"}),"Start: ",r.start_date?new Date(r.start_date).toLocaleDateString():"Not set"]}),s.jsxs("p",{className:"text-sm text-gray-600",children:[s.jsx(Je,{className:"w-3 h-3 inline mr-1"}),"Due: ",r.end_date?new Date(r.end_date).toLocaleDateString():"Not set"]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Project Info"}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("p",{className:"text-sm text-gray-600",children:[s.jsx($s,{className:"w-3 h-3 inline mr-1"}),"Project: ",(f==null?void 0:f.name)||"Unknown"]}),s.jsxs("p",{className:"text-sm text-gray-600",children:[s.jsx(vn,{className:"w-3 h-3 inline mr-1"}),"Stage: ",(d==null?void 0:d.name)||"Unknown"]})]})]})]})]})]}),T&&s.jsxs(V,{children:[s.jsx(Ne,{children:s.jsxs(ke,{className:"flex items-center",children:[s.jsx(yn,{className:"w-5 h-5 mr-2"}),"Educational Hierarchy"]})}),s.jsx(G,{children:s.jsxs("div",{className:"space-y-3",children:[T.grade&&s.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-purple-50 rounded-lg",children:[s.jsx(yn,{className:"w-5 h-5 text-purple-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:T.grade.name}),s.jsx("p",{className:"text-sm text-gray-600",children:"Grade"})]})]}),T.book&&s.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-blue-50 rounded-lg",children:[s.jsx(Qu,{className:"w-5 h-5 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:T.book.name}),s.jsx("p",{className:"text-sm text-gray-600",children:"Book"})]})]}),T.unit&&s.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-green-50 rounded-lg",children:[s.jsx(vn,{className:"w-5 h-5 text-green-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:T.unit.name}),s.jsx("p",{className:"text-sm text-gray-600",children:"Unit"})]})]}),T.lesson&&s.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-orange-50 rounded-lg",children:[s.jsx(Ku,{className:"w-5 h-5 text-orange-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:T.lesson.name}),s.jsx("p",{className:"text-sm text-gray-600",children:"Lesson"})]})]})]})})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(V,{children:[s.jsx(Ne,{children:s.jsxs(ke,{className:"flex items-center",children:[s.jsx(_e,{className:"w-5 h-5 mr-2"}),"Assignees (",j.length,")"]})}),s.jsx(G,{children:j.length>0?s.jsx("div",{className:"space-y-3",children:j.map(O=>{var J;return s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm font-medium",children:((J=O.name)==null?void 0:J.charAt(0))||"U"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:O.name}),s.jsx("p",{className:"text-sm text-gray-600",children:O.email})]})]},O.id)})}):s.jsx("p",{className:"text-gray-500 text-center py-4",children:"No assignees"})})]}),s.jsxs(V,{children:[s.jsx(Ne,{children:s.jsxs(ke,{className:"flex items-center",children:[s.jsx(tm,{className:"w-5 h-5 mr-2"}),"Required Skills (",((Q=r.skills)==null?void 0:Q.length)||0,")"]})}),s.jsx(G,{children:r.skills&&r.skills.length>0?s.jsx("div",{className:"flex flex-wrap gap-2",children:r.skills.map(O=>s.jsx(q,{variant:"secondary",children:O.name},O.id))}):s.jsx("p",{className:"text-gray-500 text-center py-4",children:"No skills required"})})]}),s.jsxs(V,{children:[s.jsx(Ne,{children:s.jsxs(ke,{className:"flex items-center",children:[s.jsx(ps,{className:"w-5 h-5 mr-2"}),"Statistics"]})}),s.jsxs(G,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Days Remaining"}),s.jsx("span",{className:"font-medium",children:r.end_date?Math.ceil((new Date(r.end_date).getTime()-new Date().getTime())/(1e3*60*60*24)):"No due date"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Hours Remaining"}),s.jsxs("span",{className:"font-medium",children:[Math.max(0,(r.estimated_hours||0)-(r.actual_hours||0)),"h"]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Completion Rate"}),s.jsxs("span",{className:"font-medium",children:[r.progress,"%"]})]})]})]})]})]}),s.jsx(jo,{isOpen:c,onClose:()=>h(!1),onSubmit:ce,users:$,teams:m,skills:_,projects:f?[f]:[],stages:d?[d]:[],grades:u,books:D,units:F,lessons:z,editingTask:r})]})}function _p(){const{state:e,dispatch:t}=Pr(),[r,n]=p.useState(!1),[a,l]=p.useState(null),[i,o]=p.useState(null),[c,h]=p.useState(""),[f,N]=p.useState("all"),[d,w]=p.useState("all"),[j,P]=p.useState("all"),[$,x]=p.useState("all"),[m,v]=p.useState("created_at"),[_,y]=p.useState("desc"),[u,g]=p.useState([]),[D,L]=p.useState([]),[F,te]=p.useState([]),[z,Z]=p.useState([]),[T,ue]=p.useState([]),[pe,ce]=p.useState([]),[b,E]=p.useState([]),[B,Q]=p.useState([]),[O,J]=p.useState([]),[K,oe]=p.useState([]),[he,we]=p.useState(!0),[Se,ze]=p.useState(null);p.useEffect(()=>{(async()=>{we(!0);try{const X={sort:m,order:_};f!=="all"&&(X.status=f),d!=="all"&&(X.priority=d),$!=="all"&&(X.project_id=$),j!=="all"&&(X.assignee_id=j),c&&(X.search=c),console.log(" Sending filters to API:",X);const[je,$e,We,Tt,A,le,ne,xe,U,Ye]=await Promise.all([et.getAll(X),ye.getMembers(),ye.getTeams(),kt.getAll(),Pe.getAll(),Wt.getAll(),Zt.getAll(),Jt.getAll(),es.getAll(),Ds.getAll()]);g(je),L($e),te(We),Z(Tt),ue(A),ce(le),E(ne),Q(xe),J(U),oe(Ye),ze(null)}catch(X){console.error("Failed to fetch task data:",X),ze(X.message||"Failed to load tasks")}finally{we(!1)}})()},[m,_,f,d,$,j,c]),p.useEffect(()=>{e.filters&&Object.keys(e.filters).length>0&&(e.filters.statuses&&N(e.filters.statuses.length===1?e.filters.statuses[0]:"all"),e.filters.teamMembers&&P(e.filters.teamMembers.length===1?e.filters.teamMembers[0]:"all"),setTimeout(()=>{t({type:"SET_FILTERS",payload:{}})},0))},[e.filters,t]);const M=S=>{const X=S.end_date||S.endDate;return X?new Date(X)<new Date&&S.status!=="completed":!1},W=S=>{const X=S.end_date||S.endDate;if(!X)return!1;const je=new Date,$e=new Date(X);return je.toDateString()===$e.toDateString()&&S.status!=="completed"},re=S=>{const X=S.end_date||S.endDate;if(!X)return!1;const je=new Date;je.setDate(je.getDate()+1);const $e=new Date(X);return je.toDateString()===$e.toDateString()&&S.status!=="completed"},Y=S=>{const X=S.end_date||S.endDate;if(!X)return!1;const je=new Date,$e=new Date;$e.setDate(je.getDate()+7);const We=new Date(X);return We>=je&&We<=$e&&S.status!=="completed"},ie=u.filter(S=>{var X,je,$e,We;return!((X=e.filters)!=null&&X.overdue&&!M(S)||(je=e.filters)!=null&&je.dueToday&&!W(S)||($e=e.filters)!=null&&$e.dueTomorrow&&!re(S)||(We=e.filters)!=null&&We.dueThisWeek&&!Y(S))}),de=async S=>{try{if(a){const X={name:S.name,description:S.description,project_id:parseInt(S.projectId||"1"),stage_id:parseInt(S.stageId||"1"),status:S.status,priority:S.priority,start_date:S.startDate,end_date:S.endDate,estimated_hours:parseInt(String(S.estimatedHours||0)),actual_hours:parseInt(String(S.actualHours||0)),assignees:S.assignees||[],skills:S.skills,grade_id:S.gradeId?parseInt(S.gradeId):null,book_id:S.bookId?parseInt(S.bookId):null,unit_id:S.unitId?parseInt(S.unitId):null,lesson_id:S.lessonId?parseInt(S.lessonId):null,component_path:S.componentPath};await et.update(a.id,X);const je=await et.getAll();g(je)}else{const X=(S.skills||[]).map(Tt=>{const A=pe.find(le=>le.name===Tt);return A?A.id:null}).filter(Tt=>Tt!==null),je={name:S.name||"",description:S.description||"",project_id:parseInt(S.projectId||"1"),stage_id:parseInt(S.stageId||"1"),status:S.status||"not-started",priority:S.priority||"medium",start_date:S.startDate||new Date().toISOString().split("T")[0],end_date:S.endDate||new Date(Date.now()+7*24*60*60*1e3).toISOString().split("T")[0],estimated_hours:S.estimatedHours||8,assignees:S.assignees||[],skills:X,component_path:S.componentPath,grade_id:S.gradeId?parseInt(S.gradeId):null,book_id:S.bookId?parseInt(S.bookId):null,unit_id:S.unitId?parseInt(S.unitId):null,lesson_id:S.lessonId?parseInt(S.lessonId):null};console.log(" Creating task with data:",je),console.log(" Educational hierarchy IDs being sent:",{grade_id:je.grade_id,book_id:je.book_id,unit_id:je.unit_id,lesson_id:je.lesson_id,component_path:je.component_path});const $e=await et.create(je),We=await et.getAll();g(We),console.log(" Task created successfully:",$e)}n(!1),l(null)}catch(X){console.error(" Failed to save task:",X),ze("Failed to save task")}},Te=S=>{switch(S){case"not-started":return"default";case"in-progress":return"primary";case"under-review":return"warning";case"completed":return"success";case"blocked":return"danger";default:return"default"}},Dt=S=>{switch(S){case"low":return"default";case"medium":return"primary";case"high":return"warning";case"urgent":return"danger";default:return"default"}},k=S=>{l(S),n(!0)},C=S=>{m===S?y(_==="asc"?"desc":"asc"):(v(S),y("desc"))},ae=async S=>{if(confirm(`Are you sure you want to delete the task "${S.name}"? This action cannot be undone.`))try{ze(null),await et.delete(S.id);const X=await et.getAll();g(X),console.log(" Task deleted successfully:",S.name)}catch(X){console.error(" Delete task error:",X),ze(X.message||"Failed to delete task")}},ge={total:u.length,notStarted:u.filter(S=>S.status==="not-started").length,inProgress:u.filter(S=>S.status==="in-progress").length,completed:u.filter(S=>S.status==="completed").length,overdue:u.filter(S=>{const X=S.end_date||S.endDate;return X&&new Date(X)<new Date&&S.status!=="completed"}).length};return i?s.jsx(Cp,{taskId:i,onBack:()=>o(null)}):he?s.jsx("div",{className:"p-6 space-y-6",children:s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-lg font-medium text-gray-900 mb-2",children:"Loading tasks..."}),s.jsx("div",{className:"text-gray-500",children:"Please wait while we fetch your tasks"})]})})}):Se?s.jsx("div",{className:"p-6 space-y-6",children:s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-lg font-medium text-red-600 mb-2",children:"Failed to load tasks"}),s.jsx("div",{className:"text-gray-500 mb-4",children:Se}),s.jsx(I,{onClick:()=>window.location.reload(),children:"Retry"})]})})}):s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Task Management"}),s.jsx("p",{className:"text-gray-600",children:"Track and manage all project tasks"})]}),s.jsx(I,{icon:s.jsx(Ge,{className:"w-4 h-4"}),onClick:()=>{l(null),n(!0)},children:"Create Task"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[s.jsx(V,{children:s.jsx(G,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 rounded-lg bg-gray-50",children:s.jsx(pt,{className:"w-6 h-6 text-gray-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Tasks"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:ge.total})]})]})})}),s.jsx(V,{children:s.jsx(G,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 rounded-lg bg-blue-50",children:s.jsx(Xs,{className:"w-6 h-6 text-blue-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"In Progress"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:ge.inProgress})]})]})})}),s.jsx(V,{children:s.jsx(G,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 rounded-lg bg-green-50",children:s.jsx(pt,{className:"w-6 h-6 text-green-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Completed"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:ge.completed})]})]})})}),s.jsx(V,{children:s.jsx(G,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 rounded-lg bg-orange-50",children:s.jsx(Xs,{className:"w-6 h-6 text-orange-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Not Started"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:ge.notStarted})]})]})})}),s.jsx(V,{children:s.jsx(G,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 rounded-lg bg-red-50",children:s.jsx(ht,{className:"w-6 h-6 text-red-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Overdue"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:ge.overdue})]})]})})})]}),s.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:s.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(vo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",placeholder:"Search tasks...",value:c,onChange:S=>h(S.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("select",{value:f,onChange:S=>N(S.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"not-started",children:"Not Started"}),s.jsx("option",{value:"in-progress",children:"In Progress"}),s.jsx("option",{value:"under-review",children:"Under Review"}),s.jsx("option",{value:"completed",children:"Completed"}),s.jsx("option",{value:"blocked",children:"Blocked"})]}),s.jsxs("select",{value:d,onChange:S=>w(S.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[s.jsx("option",{value:"all",children:"All Priority"}),s.jsx("option",{value:"low",children:"Low"}),s.jsx("option",{value:"medium",children:"Medium"}),s.jsx("option",{value:"high",children:"High"}),s.jsx("option",{value:"urgent",children:"Urgent"})]}),s.jsxs("select",{value:$,onChange:S=>x(S.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[s.jsx("option",{value:"all",children:"All Projects"}),T.map(S=>s.jsx("option",{value:S.id,children:S.name},S.id))]}),s.jsxs("select",{value:j,onChange:S=>P(S.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[s.jsx("option",{value:"all",children:"All Assignees"}),D.map(S=>s.jsx("option",{value:S.id,children:S.name},S.id))]})]})}),s.jsx(V,{children:s.jsx(G,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>C("name"),children:s.jsxs("div",{className:"flex items-center",children:["Task Name",m==="name"&&s.jsx("span",{className:"ml-1 text-blue-600",children:_==="asc"?"":""})]})}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Project"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>C("status"),children:s.jsxs("div",{className:"flex items-center",children:["Status",m==="status"&&s.jsx("span",{className:"ml-1 text-blue-600",children:_==="asc"?"":""})]})}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>C("priority"),children:s.jsxs("div",{className:"flex items-center",children:["Priority",m==="priority"&&s.jsx("span",{className:"ml-1 text-blue-600",children:_==="asc"?"":""})]})}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>C("assignees"),children:s.jsxs("div",{className:"flex items-center",children:["Assignees",m==="assignees"&&s.jsx("span",{className:"ml-1 text-blue-600",children:_==="asc"?"":""})]})}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>C("end_date"),children:s.jsxs("div",{className:"flex items-center",children:["Due Date",m==="end_date"&&s.jsx("span",{className:"ml-1 text-blue-600",children:_==="asc"?"":""})]})}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>C("progress"),children:s.jsxs("div",{className:"flex items-center",children:["Progress",m==="progress"&&s.jsx("span",{className:"ml-1 text-blue-600",children:_==="asc"?"":""})]})})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ie.map(S=>{var le;const X=D.filter(ne=>S.assignees&&S.assignees.includes(ne.id));F.filter(ne=>S.teamAssignees&&S.teamAssignees.includes(ne.id));const je=M(S),$e=S.project_id||S.projectId,We=T.find(ne=>{const xe=typeof ne.id=="string"?parseInt(ne.id):ne.id,U=typeof $e=="string"?parseInt($e):$e;return xe===U}),Tt=S.stage_id||S.stageId,A=(le=We==null?void 0:We.stages)==null?void 0:le.find(ne=>{const xe=typeof ne.id=="string"?parseInt(ne.id):ne.id,U=typeof Tt=="string"?parseInt(Tt):Tt;return xe===U});return s.jsxs("tr",{className:`hover:bg-gray-50 ${je?"bg-red-50":""}`,children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsxs("div",{className:"text-sm font-medium text-gray-900 flex items-center",children:[S.name,je&&s.jsx(ht,{className:"w-4 h-4 text-red-500 ml-2"})]}),s.jsxs("div",{className:"text-sm text-gray-500",children:[S.componentPath&&s.jsxs("div",{className:"text-xs text-purple-600 mt-1",children:[" ",S.componentPath]}),S.description&&s.jsx("div",{className:"mt-1",children:S.description})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm text-gray-900",children:We?s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-blue-600",children:We.name}),A&&s.jsx("div",{className:"text-xs text-gray-500",children:A.name})]}):s.jsx("span",{className:"text-gray-400",children:"Unknown Project"})})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx(q,{variant:Te(S.status),children:S.status.replace("-"," ")})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx(q,{variant:Dt(S.priority),children:S.priority})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"space-y-1",children:[X.length>0&&s.jsxs("div",{className:"flex items-center space-x-2",children:[X.slice(0,5).map(ne=>s.jsxs("div",{className:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center text-white text-xs font-medium relative group",title:ne.name,children:[ne.name.charAt(0),s.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-gray-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10",children:ne.name})]},ne.id)),X.length>5&&s.jsxs("div",{className:"w-6 h-6 bg-gray-300 rounded-full flex items-center justify-center text-gray-600 text-xs font-medium",children:["+",X.length-5]})]}),X.length===0&&s.jsx("span",{className:"text-xs text-gray-400",children:"No assignees"})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(Je,{className:"w-4 h-4 mr-1 text-gray-400"}),S.end_date||S.endDate?new Date(S.end_date||S.endDate||"").toLocaleDateString():"No due date"]})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2 mr-2",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${Vs(S.status)}%`}})}),s.jsxs("span",{className:"text-sm text-gray-600",children:[Vs(S.status),"%"]})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(I,{variant:"ghost",size:"sm",onClick:ne=>{ne.stopPropagation(),o(S.id)},title:"View Details",children:""}),s.jsx(I,{variant:"ghost",size:"sm",onClick:ne=>{ne.stopPropagation(),k(S)},title:"Edit Task",children:s.jsx(Us,{className:"w-4 h-4"})}),s.jsx(I,{variant:"ghost",size:"sm",onClick:ne=>{ne.stopPropagation(),ae(S)},title:"Delete Task",className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:s.jsx(Lt,{className:"w-4 h-4"})})]})]})]},S.id)})})]})})})}),s.jsx(jo,{isOpen:r,onClose:()=>{n(!1),l(null)},onSubmit:de,users:D,teams:F,skills:pe,projects:T,stages:z,grades:b,books:B,units:O,lessons:K,editingTask:a})]})}function jo({isOpen:e,onClose:t,onSubmit:r,users:n,teams:a,skills:l,projects:i,stages:o,grades:c,books:h,units:f,lessons:N,editingTask:d}){const[w,j]=p.useState({name:"",description:"",projectId:"",stageId:"",gradeId:"",bookId:"",unitId:"",lessonId:"",status:"not-started",assignees:[],teamAssignees:[],skills:[],priority:"medium",estimatedHours:8,actualHours:0,startDate:new Date().toISOString().split("T")[0],endDate:new Date(Date.now()+6048e5).toISOString().split("T")[0]});p.useEffect(()=>{if(d){const y=Array.isArray(d.skills)?d.skills.map(g=>g.name||g):[],u=Array.isArray(d.assignees)?d.assignees.map(g=>typeof g=="object"&&g.id?g.id.toString():g.toString()):[];console.log(" Editing task assignees:",d.assignees),console.log(" Converted assignee IDs:",u),j({name:d.name,description:d.description||"",projectId:d.project_id||d.projectId||"",stageId:d.stage_id||d.stageId||"",gradeId:d.gradeId||"",bookId:d.bookId||"",unitId:d.unitId||"",lessonId:d.lessonId||"",status:d.status,assignees:u,teamAssignees:d.teamAssignees||[],skills:y,priority:d.priority,estimatedHours:d.estimated_hours||d.estimatedHours||8,actualHours:d.actual_hours||d.actualHours||0,startDate:d.start_date||d.startDate?new Date(d.start_date||d.startDate||"").toISOString().split("T")[0]:new Date().toISOString().split("T")[0],endDate:d.end_date||d.endDate?new Date(d.end_date||d.endDate||"").toISOString().split("T")[0]:new Date(Date.now()+7*24*60*60*1e3).toISOString().split("T")[0]})}else j({name:"",description:"",projectId:"",stageId:"",gradeId:"",bookId:"",unitId:"",lessonId:"",status:"not-started",assignees:[],teamAssignees:[],skills:[],priority:"medium",estimatedHours:8,actualHours:0,startDate:new Date().toISOString().split("T")[0],endDate:new Date(Date.now()+7*24*60*60*1e3).toISOString().split("T")[0]})},[d,e]);const P=y=>{var L;y.preventDefault(),Vs(w.status);let u="";const g=i.find(F=>F.id===parseInt(w.projectId)||F.id===w.projectId);if(g&&w.gradeId){const F=(L=g.grades)==null?void 0:L.find(te=>te.id===w.gradeId);if(F&&(u=F.name,w.bookId)){const te=F.books.find(z=>z.id===w.bookId);if(te&&(u+=` > ${te.name}`,w.unitId)){const z=te.units.find(Z=>Z.id===w.unitId);if(z&&(u+=` > ${z.name}`,w.lessonId)){const Z=z.lessons.find(T=>T.id===w.lessonId);Z&&(u+=` > ${Z.name}`)}}}}const D=w.skills.map(F=>{const te=l.find(z=>z.name===F);return te?te.id:null}).filter(F=>F!==null);r({...w,skills:D,componentPath:u,startDate:new Date(w.startDate),endDate:new Date(w.endDate)})},$=y=>{j(u=>({...u,assignees:u.assignees.includes(y)?u.assignees.filter(g=>g!==y):[...u.assignees,y]}))},x=async y=>{console.log(" Toggling team:",y),console.log(" Available teams:",a),console.log(" Available users:",n);try{const u=await ye.getTeamMembers(y);console.log(" Team members from API:",u),j(g=>{const D=g.teamAssignees.includes(y);console.log(" Is team selected:",D);const L=a.find(z=>z.id===parseInt(y));if(console.log(" Found team:",L),!L)return console.log(" Team not found"),g;const F=u.map(z=>z.id.toString());console.log(" Team member IDs from API:",F);let te=[...g.assignees];return D?te=te.filter(z=>!F.includes(z)):F.forEach(z=>{te.includes(z)||te.push(z)}),console.log(" New assignees:",te),{...g,assignees:te,teamAssignees:D?g.teamAssignees.filter(z=>z!==y):[...g.teamAssignees,y]}})}catch(u){console.error(" Error fetching team members:",u),j(g=>{const D=g.teamAssignees.includes(y);return{...g,teamAssignees:D?g.teamAssignees.filter(L=>L!==y):[...g.teamAssignees,y]}})}},m=y=>{j(u=>({...u,skills:u.skills.includes(y)?u.skills.filter(g=>g!==y):[...u.skills,y]}))},v=i.find(y=>y.id===parseInt(w.projectId)||y.id===w.projectId),_=[];return v&&c.filter(u=>u.project_id===parseInt(v.id)).forEach(u=>{_.push({id:u.id,name:u.name,type:"grade",gradeId:u.id,bookId:null,unitId:null,lessonId:null}),h.filter(D=>D.grade_id===u.id).forEach(D=>{_.push({id:`${u.id}-${D.id}`,name:`${u.name} > ${D.name}`,type:"book",gradeId:u.id,bookId:D.id,unitId:null,lessonId:null}),f.filter(F=>F.book_id===D.id).forEach(F=>{_.push({id:`${u.id}-${D.id}-${F.id}`,name:`${u.name} > ${D.name} > ${F.name}`,type:"unit",gradeId:u.id,bookId:D.id,unitId:F.id,lessonId:null}),N.filter(z=>z.unit_id===F.id).forEach(z=>{_.push({id:`${u.id}-${D.id}-${F.id}-${z.id}`,name:`${u.name} > ${D.name} > ${F.name} > ${z.name}`,type:"lesson",gradeId:u.id,bookId:D.id,unitId:F.id,lessonId:z.id})})})})}),s.jsx(st,{isOpen:e,onClose:t,title:d?`Edit Task: ${d.name}`:"Create New Task",size:"xl",children:s.jsxs("form",{onSubmit:P,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Task Name"}),s.jsx("input",{type:"text",required:!0,value:w.name,onChange:y=>j({...w,name:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter task name"})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),s.jsx("textarea",{value:w.description,onChange:y=>j({...w,description:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Task description"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project *"}),s.jsxs("select",{required:!0,value:w.projectId,onChange:y=>j({...w,projectId:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Select Project"}),i.map(y=>s.jsx("option",{value:y.id,children:y.name},y.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Educational Hierarchy (Optional)"}),s.jsxs("select",{value:(()=>{const y=_.find(u=>u.gradeId===parseInt(w.gradeId)&&u.bookId===(w.bookId?parseInt(w.bookId):null)&&u.unitId===(w.unitId?parseInt(w.unitId):null)&&u.lessonId===(w.lessonId?parseInt(w.lessonId):null));return y?y.id:""})(),onChange:y=>{const u=_.find(g=>g.id===y.target.value);j(u?{...w,gradeId:u.gradeId?u.gradeId.toString():"",bookId:u.bookId?u.bookId.toString():"",unitId:u.unitId?u.unitId.toString():"",lessonId:u.lessonId?u.lessonId.toString():""}:{...w,gradeId:"",bookId:"",unitId:"",lessonId:""})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:!w.projectId,children:[s.jsx("option",{value:"",children:"Project Level Task"}),_.map(y=>s.jsxs("option",{value:y.id,children:[y.name," (",y.type,")"]},y.id))]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select a specific educational hierarchy item to assign this task to a particular grade, book, unit, or lesson"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),s.jsxs("select",{value:w.status,onChange:y=>{const u=y.target.value;j({...w,status:u})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"not-started",children:"Not Started"}),s.jsx("option",{value:"in-progress",children:"In Progress"}),s.jsx("option",{value:"under-review",children:"Under Review"}),s.jsx("option",{value:"completed",children:"Completed"}),s.jsx("option",{value:"blocked",children:"Blocked"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),s.jsxs("select",{value:w.priority,onChange:y=>j({...w,priority:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"low",children:"Low"}),s.jsx("option",{value:"medium",children:"Medium"}),s.jsx("option",{value:"high",children:"High"}),s.jsx("option",{value:"urgent",children:"Urgent"})]})]}),s.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Progress (Auto-calculated)"}),s.jsxs("span",{className:"text-sm text-blue-600 font-semibold",children:[Vs(w.status),"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${Vs(w.status)}%`}})}),s.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Progress is automatically calculated based on task status"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estimated Hours"}),s.jsx("input",{type:"number",min:"1",value:w.estimatedHours,onChange:y=>j({...w,estimatedHours:parseInt(y.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),d&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Actual Hours"}),s.jsx("input",{type:"number",min:"0",value:w.actualHours,onChange:y=>j({...w,actualHours:parseInt(y.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),s.jsx("input",{type:"date",value:w.startDate,onChange:y=>j({...w,startDate:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Due Date"}),s.jsx("input",{type:"date",value:w.endDate,onChange:y=>j({...w,endDate:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Individual Assignees"}),s.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-32 overflow-y-auto border border-gray-300 rounded-lg p-2",children:n&&n.length>0?n.map(y=>{const u=w.assignees.includes(y.id.toString());return console.log(` User ${y.name} (ID: ${y.id}) - checked: ${u}, assignees:`,w.assignees),s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:u,onChange:()=>$(y.id.toString()),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:y.name})]},y.id)}):s.jsx("p",{className:"text-gray-500 text-sm",children:"No team members available"})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Team Assignees (Auto-selects all team members)"}),s.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-32 overflow-y-auto border border-gray-300 rounded-lg p-2",children:a.map(y=>s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:w.teamAssignees.includes(y.id),onChange:()=>x(y.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:y.name})]},y.id))}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Selecting a team will automatically check all its members in the Individual Assignees list above"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Required Skills"}),s.jsx("div",{className:"grid grid-cols-3 gap-2 max-h-32 overflow-y-auto border border-gray-300 rounded-lg p-2",children:l.map(y=>s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:w.skills.includes(y.name),onChange:()=>m(y.name),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:y.name})]},y.id))})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx(I,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),s.jsx(I,{type:"submit",children:d?"Update Task":"Create Task"})]})]})})}function Dp({isOpen:e,onClose:t,onSubmit:r,project:n,categories:a}){const[l,i]=p.useState({name:"",description:"",category_id:null,current_stage_id:null,status:"planning",start_date:"",end_date:""}),[o,c]=p.useState([]),[h,f]=p.useState(!1);p.useEffect(()=>{if(n&&e){const j=m=>{if(!m)return new Date().toISOString().split("T")[0];try{const v=new Date(m);return isNaN(v.getTime())?new Date().toISOString().split("T")[0]:v.toISOString().split("T")[0]}catch(v){return console.warn("Invalid date value:",m,v),new Date().toISOString().split("T")[0]}},P=n.start_date,$=n.end_date,x={name:n.name||"",description:n.description||"",category_id:n.category_id||null,current_stage_id:n.current_stage_id||null,status:n.status||"planning",start_date:j(P),end_date:j($)};i(x),n.category_id&&N(n.category_id)}},[n,e]),p.useEffect(()=>{o.length>0&&n.current_stage_id&&o.find(P=>P.id===n.current_stage_id)&&i(P=>({...P,current_stage_id:n.current_stage_id||null}))},[o,n.current_stage_id]);const N=async j=>{f(!0);try{const P=await kt.getByCategory(j);c(P),n.current_stage_id?P.find(x=>x.id===n.current_stage_id)||console.warn(" Current stage ID not found in loaded stages:",n.current_stage_id):console.log(" No current_stage_id set for this project")}catch(P){console.error("Failed to load stages for category:",P),c([])}finally{f(!1)}},d=async j=>{if(i(P=>({...P,category_id:j,current_stage_id:null})),j){f(!0);try{const P=await kt.getByCategory(j);c(P)}catch(P){console.error("Failed to load stages for category:",P),c([])}finally{f(!1)}}else c([])},w=j=>{j.preventDefault(),r({...l,start_date:l.start_date,end_date:l.end_date,currentStageId:l.current_stage_id||void 0})};return s.jsx(st,{isOpen:e,onClose:t,title:"Edit Project",size:"lg",children:s.jsxs("form",{onSubmit:w,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Name"}),s.jsx("input",{type:"text",required:!0,value:l.name,onChange:j=>i({...l,name:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter project name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),s.jsx("textarea",{value:l.description,onChange:j=>i({...l,description:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Project description"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),s.jsxs("select",{value:l.category_id||"",onChange:j=>d(j.target.value?parseInt(j.target.value):null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Select a category"}),a.map(j=>s.jsx("option",{value:j.id,children:j.name},j.id))]})]}),l.category_id&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Stage"}),h?s.jsxs("div",{className:"flex items-center justify-center py-4",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),s.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Loading stages..."})]}):o.length>0?s.jsxs("select",{value:l.current_stage_id||"",onChange:j=>i({...l,current_stage_id:j.target.value?parseInt(j.target.value):null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Select a stage"}),o.map(j=>s.jsxs("option",{value:j.id,children:[j.name," - ",j.description]},j.id))]}):s.jsx("div",{className:"text-sm text-gray-500 py-2",children:"No stages available for this category."})]}),s.jsx("div",{className:"grid grid-cols-2 gap-4",children:s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),s.jsxs("select",{value:l.status,onChange:j=>i({...l,status:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"planning",children:"Planning"}),s.jsx("option",{value:"active",children:"Active"}),s.jsx("option",{value:"on-hold",children:"On Hold"}),s.jsx("option",{value:"completed",children:"Completed"}),s.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),s.jsx("input",{type:"date",value:l.start_date,onChange:j=>i({...l,start_date:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),s.jsx("input",{type:"date",value:l.end_date,onChange:j=>i({...l,end_date:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx(I,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),s.jsx(I,{type:"submit",children:"Update Project"})]})]})})}const Tp=({projectId:e})=>{const[t,r]=p.useState([]),[n,a]=p.useState([]),[l,i]=p.useState([]),[o,c]=p.useState([]),[h,f]=p.useState(!0),[N,d]=p.useState(null),[w,j]=p.useState(new Set);p.useState(new Set);const[P,$]=p.useState(!1),[x,m]=p.useState(!1),[v,_]=p.useState(!1),[y,u]=p.useState(!1),[g,D]=p.useState(null),[L,F]=p.useState(null),[te,z]=p.useState(null),[Z,T]=p.useState(null),[ue,pe]=p.useState(null),[ce,b]=p.useState(null),[E,B]=p.useState(null);p.useEffect(()=>{Q()},[e]);const Q=async()=>{try{f(!0),d(null);const k=await Zt.getByProject(e);r(k||[]);const C=[];if(k&&Array.isArray(k))for(const S of k)try{const X=await Jt.getByGrade(S.id);X&&Array.isArray(X)&&C.push(...X)}catch(X){console.warn(`Failed to load books for grade ${S.id}:`,X)}a(C);const ae=[];for(const S of C)try{const X=await es.getByBook(S.id);X&&Array.isArray(X)&&ae.push(...X)}catch(X){console.warn(`Failed to load units for book ${S.id}:`,X)}i(ae);const ge=[];for(const S of ae)try{const X=await Ds.getByUnit(S.id);X&&Array.isArray(X)&&ge.push(...X)}catch(X){console.warn(`Failed to load lessons for unit ${S.id}:`,X)}c(ge)}catch(k){console.error("Error loading educational hierarchy:",k),d(k.message||"Failed to load educational hierarchy")}finally{f(!1)}},O=k=>{const C=new Set(w);C.has(k)?C.delete(k):C.add(k),j(C)},J=async k=>{try{const C=await Zt.create({...k,project_id:e});r([...t,C]),$(!1)}catch(C){d(C.message||"Failed to create grade")}},K=async k=>{if(g)try{const C=await Zt.update(g.id,k);r(t.map(ae=>ae.id===g.id?C:ae)),$(!1),D(null)}catch(C){d(C.message||"Failed to update grade")}},oe=async k=>{if(confirm("Are you sure you want to delete this grade? This will also delete all associated books, units, and lessons."))try{await Zt.delete(k),r(t.filter(C=>C.id!==k)),a(n.filter(C=>C.grade_id!==k)),i(l.filter(C=>{const ae=n.find(ge=>ge.id===C.book_id);return ae&&ae.grade_id!==k})),c(o.filter(C=>{const ae=l.find(S=>S.id===C.unit_id),ge=n.find(S=>S.id===(ae==null?void 0:ae.book_id));return ge&&ge.grade_id!==k}))}catch(C){d(C.message||"Failed to delete grade")}},he=async k=>{if(ue)try{const C=await Jt.create({...k,grade_id:ue});a([...n,C]),m(!1),pe(null)}catch(C){d(C.message||"Failed to create book")}},we=async k=>{if(L)try{const C=await Jt.update(L.id,k);a(n.map(ae=>ae.id===L.id?C:ae)),m(!1),F(null)}catch(C){d(C.message||"Failed to update book")}},Se=async k=>{if(confirm("Are you sure you want to delete this book? This will also delete all associated units and lessons."))try{await Jt.delete(k),a(n.filter(C=>C.id!==k)),i(l.filter(C=>C.book_id!==k)),c(o.filter(C=>{const ae=l.find(ge=>ge.id===C.unit_id);return ae&&ae.book_id!==k}))}catch(C){d(C.message||"Failed to delete book")}},ze=async k=>{if(ce)try{const C=await es.create({...k,book_id:ce});i([...l,C]),_(!1),b(null)}catch(C){d(C.message||"Failed to create unit")}},M=async k=>{if(te)try{const C=await es.update(te.id,k);i(l.map(ae=>ae.id===te.id?C:ae)),_(!1),z(null)}catch(C){d(C.message||"Failed to update unit")}},W=async k=>{if(confirm("Are you sure you want to delete this unit? This will also delete all associated lessons."))try{await es.delete(k),i(l.filter(C=>C.id!==k)),c(o.filter(C=>C.unit_id!==k))}catch(C){d(C.message||"Failed to delete unit")}},re=async k=>{if(E)try{const C=await Ds.create({...k,unit_id:E});c([...o,C]),u(!1),B(null)}catch(C){d(C.message||"Failed to create lesson")}},Y=async k=>{if(Z)try{const C=await Ds.update(Z.id,k);c(o.map(ae=>ae.id===Z.id?C:ae)),u(!1),T(null)}catch(C){d(C.message||"Failed to update lesson")}},ie=k=>{b(k),z(null),_(!0)},de=k=>{B(k),T(null),u(!0)},Te=k=>{F(k),m(!0)},Dt=k=>{z(k),_(!0)};return h?s.jsx("div",{className:"flex items-center justify-center p-8",children:s.jsx("div",{className:"text-lg",children:"Loading educational hierarchy..."})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Educational Hierarchy"}),s.jsx("p",{className:"text-gray-600",children:"Manage grades, books, units, and lessons for this project"})]}),s.jsxs(I,{onClick:()=>{D(null),$(!0)},className:"flex items-center space-x-2",children:[s.jsx(Ge,{className:"w-4 h-4"}),s.jsx("span",{children:"Add Grade"})]})]}),N&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:s.jsx("p",{className:"text-red-800",children:N})}),s.jsx("div",{className:"space-y-4",children:!t||t.length===0?s.jsx(V,{children:s.jsxs(G,{className:"p-8 text-center",children:[s.jsx(yn,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Grades Yet"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Start by creating the first grade for this project."}),s.jsx(I,{onClick:()=>{D(null),$(!0)},children:"Create First Grade"})]})}):(t||[]).map(k=>s.jsx(Ep,{grade:k,books:(n||[]).filter(C=>C.grade_id===k.id),units:l||[],lessons:o||[],expanded:w.has(k.id),onToggleExpansion:()=>O(k.id),onEdit:()=>{D(k),$(!0)},onDelete:()=>oe(k.id),onAddBook:()=>{pe(k.id),F(null),m(!0)},onAddUnit:ie,onEditBook:Te,onDeleteBook:Se,onAddLesson:de,onEditUnit:Dt,onDeleteUnit:W},k.id))}),s.jsx(Ip,{isOpen:P,onClose:()=>{$(!1),D(null)},grade:g,onSubmit:g?K:J}),s.jsx(Ap,{isOpen:x,onClose:()=>{m(!1),F(null),pe(null)},book:L,onSubmit:L?we:he}),s.jsx(Lp,{isOpen:v,onClose:()=>{_(!1),z(null),b(null)},unit:te,onSubmit:te?M:ze}),s.jsx(zp,{isOpen:y,onClose:()=>{u(!1),T(null),B(null)},lesson:Z,onSubmit:Z?Y:re})]})},Ep=({grade:e,books:t,units:r,lessons:n,expanded:a,onToggleExpansion:l,onEdit:i,onDelete:o,onAddBook:c,onAddUnit:h,onEditBook:f,onDeleteBook:N,onAddLesson:d,onEditUnit:w,onDeleteUnit:j})=>s.jsx(V,{children:s.jsxs(G,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("button",{onClick:l,className:"p-1 hover:bg-gray-100 rounded",children:a?s.jsx(yo,{className:"w-4 h-4"}):s.jsx(Bt,{className:"w-4 h-4"})}),s.jsx(yn,{className:"w-5 h-5 text-blue-600"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900",children:e.name}),e.description&&s.jsx("p",{className:"text-sm text-gray-600",children:e.description})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(q,{variant:"secondary",children:[typeof e.weight=="number"?e.weight.toFixed(1):"0.0","%"]}),s.jsxs(q,{variant:"secondary",children:[(t||[]).length," books"]}),s.jsxs("div",{className:"flex space-x-1",children:[s.jsx(I,{size:"sm",variant:"outline",onClick:i,children:s.jsx(_n,{className:"w-3 h-3"})}),s.jsx(I,{size:"sm",variant:"outline",onClick:c,children:s.jsx(Ge,{className:"w-3 h-3"})}),s.jsx(I,{size:"sm",variant:"outline",onClick:o,children:s.jsx(Lt,{className:"w-3 h-3"})})]})]})]}),a&&s.jsx("div",{className:"mt-4 border-t pt-4",children:!t||t.length===0?s.jsxs("div",{className:"text-center py-4",children:[s.jsx("p",{className:"text-gray-600 mb-2",children:"No books in this grade"}),s.jsx(I,{size:"sm",onClick:c,children:"Add Book"})]}):s.jsx("div",{className:"space-y-3",children:t.map(P=>s.jsx(Pp,{book:P,units:(r||[]).filter($=>$.book_id===P.id),lessons:n||[],onAddUnit:h,onEditBook:f,onDeleteBook:N,onAddLesson:d,onEditUnit:w,onDeleteUnit:j},P.id))})})]})}),Pp=({book:e,units:t,lessons:r,onAddUnit:n,onEditBook:a,onDeleteBook:l,onAddLesson:i,onEditUnit:o,onDeleteUnit:c})=>{const[h,f]=p.useState(!1);return s.jsxs("div",{className:"ml-6 border-l-2 border-gray-200 pl-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>f(!h),className:"p-1 hover:bg-gray-100 rounded",children:h?s.jsx(yo,{className:"w-3 h-3"}):s.jsx(Bt,{className:"w-3 h-3"})}),s.jsx(Qu,{className:"w-4 h-4 text-green-600"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:e.name}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(q,{variant:"secondary",children:e.type}),s.jsxs(q,{variant:"secondary",children:[typeof e.weight=="number"?e.weight.toFixed(1):"0.0","%"]})]})]})]}),s.jsxs("div",{className:"flex space-x-1",children:[s.jsx(I,{size:"sm",variant:"outline",onClick:()=>a(e),children:s.jsx(_n,{className:"w-3 h-3"})}),s.jsx(I,{size:"sm",variant:"outline",onClick:()=>n(e.id),children:s.jsx(Ge,{className:"w-3 h-3"})}),s.jsx(I,{size:"sm",variant:"outline",onClick:()=>l(e.id),children:s.jsx(Lt,{className:"w-3 h-3"})})]})]}),h&&s.jsx("div",{className:"mt-3 space-y-2",children:!t||t.length===0?s.jsxs("div",{className:"text-center py-2",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"No units in this book"}),s.jsx(I,{size:"sm",onClick:()=>n(e.id),children:"Add Unit"})]}):t.map(N=>s.jsx(Mp,{unit:N,lessons:(r||[]).filter(d=>d.unit_id===N.id),onAddLesson:i,onEditUnit:o,onDeleteUnit:c},N.id))})]})},Mp=({unit:e,lessons:t,onAddLesson:r,onEditUnit:n,onDeleteUnit:a})=>{const[l,i]=p.useState(!1);return s.jsxs("div",{className:"ml-6 border-l-2 border-gray-200 pl-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>i(!l),className:"p-1 hover:bg-gray-100 rounded",children:l?s.jsx(yo,{className:"w-3 h-3"}):s.jsx(Bt,{className:"w-3 h-3"})}),s.jsx(vn,{className:"w-4 h-4 text-purple-600"}),s.jsxs("div",{children:[s.jsx("h5",{className:"font-medium text-gray-900",children:e.name}),s.jsxs(q,{variant:"secondary",children:[typeof e.weight=="number"?e.weight.toFixed(1):"0.0","%"]})]})]}),s.jsxs("div",{className:"flex space-x-1",children:[s.jsx(I,{size:"sm",variant:"outline",onClick:()=>n(e),children:s.jsx(_n,{className:"w-3 h-3"})}),s.jsx(I,{size:"sm",variant:"outline",onClick:()=>r(e.id),children:s.jsx(Ge,{className:"w-3 h-3"})}),s.jsx(I,{size:"sm",variant:"outline",onClick:()=>a(e.id),children:s.jsx(Lt,{className:"w-3 h-3"})})]})]}),l&&s.jsx("div",{className:"mt-3 space-y-2",children:!t||t.length===0?s.jsxs("div",{className:"text-center py-2",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"No lessons in this unit"}),s.jsx(I,{size:"sm",onClick:()=>r(e.id),children:"Add Lesson"})]}):t.map(o=>s.jsxs("div",{className:"ml-6 flex items-center space-x-2",children:[s.jsx(Ku,{className:"w-3 h-3 text-orange-600"}),s.jsx("span",{className:"text-sm text-gray-900",children:o.name}),s.jsxs(q,{variant:"secondary",children:[typeof o.weight=="number"?o.weight.toFixed(1):"0.0","%"]})]},o.id))})]})},Ip=({isOpen:e,onClose:t,grade:r,onSubmit:n})=>{const[a,l]=p.useState({name:(r==null?void 0:r.name)||"",description:(r==null?void 0:r.description)||"",weight:typeof(r==null?void 0:r.weight)=="number"?r.weight:0});p.useEffect(()=>{l(r?{name:r.name,description:r.description||"",weight:typeof r.weight=="number"?r.weight:0}:{name:"",description:"",weight:0})},[r]);const i=o=>{o.preventDefault(),n(a)};return s.jsx(st,{isOpen:e,onClose:t,title:r?"Edit Grade":"Create Grade",children:s.jsxs("form",{onSubmit:i,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),s.jsx("input",{type:"text",value:a.name,onChange:o=>l({...a,name:o.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),s.jsx("textarea",{value:a.description,onChange:o=>l({...a,description:o.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:3})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Weight (%)"}),s.jsx("input",{type:"number",step:"0.1",min:"0",max:"100",value:a.weight,onChange:o=>l({...a,weight:parseFloat(o.target.value)||0}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(I,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),s.jsx(I,{type:"submit",children:r?"Update":"Create"})]})]})})},Ap=({isOpen:e,onClose:t,book:r,onSubmit:n})=>{const[a,l]=p.useState({name:(r==null?void 0:r.name)||"",type:(r==null?void 0:r.type)||"student",description:(r==null?void 0:r.description)||"",weight:typeof(r==null?void 0:r.weight)=="number"?r.weight:0});p.useEffect(()=>{l(r?{name:r.name,type:r.type,description:r.description||"",weight:typeof r.weight=="number"?r.weight:0}:{name:"",type:"student",description:"",weight:0})},[r]);const i=o=>{o.preventDefault(),n(a)};return s.jsx(st,{isOpen:e,onClose:t,title:r?"Edit Book":"Create Book",children:s.jsxs("form",{onSubmit:i,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),s.jsx("input",{type:"text",value:a.name,onChange:o=>l({...a,name:o.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Type"}),s.jsxs("select",{value:a.type,onChange:o=>l({...a,type:o.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[s.jsx("option",{value:"student",children:"Student Book"}),s.jsx("option",{value:"teacher",children:"Teacher Guide"}),s.jsx("option",{value:"practice",children:"Practice Book"}),s.jsx("option",{value:"digital",children:"Digital"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),s.jsx("textarea",{value:a.description,onChange:o=>l({...a,description:o.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:3})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Weight (%)"}),s.jsx("input",{type:"number",step:"0.1",min:"0",max:"100",value:a.weight,onChange:o=>l({...a,weight:parseFloat(o.target.value)||0}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(I,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),s.jsx(I,{type:"submit",children:r?"Update":"Create"})]})]})})},Lp=({isOpen:e,onClose:t,unit:r,onSubmit:n})=>{const[a,l]=p.useState({name:(r==null?void 0:r.name)||"",description:(r==null?void 0:r.description)||"",weight:typeof(r==null?void 0:r.weight)=="number"?r.weight:0});p.useEffect(()=>{l(r?{name:r.name,description:r.description||"",weight:typeof r.weight=="number"?r.weight:0}:{name:"",description:"",weight:0})},[r]);const i=o=>{o.preventDefault(),n(a)};return s.jsx(st,{isOpen:e,onClose:t,title:r?"Edit Unit":"Create Unit",children:s.jsxs("form",{onSubmit:i,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),s.jsx("input",{type:"text",value:a.name,onChange:o=>l({...a,name:o.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),s.jsx("textarea",{value:a.description,onChange:o=>l({...a,description:o.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:3})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Weight (%)"}),s.jsx("input",{type:"number",step:"0.1",min:"0",max:"100",value:a.weight,onChange:o=>l({...a,weight:parseFloat(o.target.value)||0}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(I,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),s.jsx(I,{type:"submit",children:r?"Update":"Create"})]})]})})},zp=({isOpen:e,onClose:t,lesson:r,onSubmit:n})=>{const[a,l]=p.useState({name:(r==null?void 0:r.name)||"",description:(r==null?void 0:r.description)||"",weight:typeof(r==null?void 0:r.weight)=="number"?r.weight:0});p.useEffect(()=>{l(r?{name:r.name,description:r.description||"",weight:typeof r.weight=="number"?r.weight:0}:{name:"",description:"",weight:0})},[r]);const i=o=>{o.preventDefault(),n(a)};return s.jsx(st,{isOpen:e,onClose:t,title:r?"Edit Lesson":"Create Lesson",children:s.jsxs("form",{onSubmit:i,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),s.jsx("input",{type:"text",value:a.name,onChange:o=>l({...a,name:o.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),s.jsx("textarea",{value:a.description,onChange:o=>l({...a,description:o.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:3})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Weight (%)"}),s.jsx("input",{type:"number",step:"0.1",min:"0",max:"100",value:a.weight,onChange:o=>l({...a,weight:parseFloat(o.target.value)||0}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(I,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),s.jsx(I,{type:"submit",children:r?"Update":"Create"})]})]})})};function Op({project:e,onBack:t,onUpdate:r,categories:n}){const{state:a,dispatch:l}=Pr(),[i,o]=p.useState("overview"),[c,h]=p.useState(!1),[f,N]=p.useState(!1),[d,w]=p.useState([]),[j,P]=p.useState([]),[$,x]=p.useState([]),[m,v]=p.useState([]),[_,y]=p.useState([]),[u,g]=p.useState([]),[D,L]=p.useState([]),[F,te]=p.useState([]),[z,Z]=p.useState([]),[T,ue]=p.useState([]),[pe,ce]=p.useState([]),[b,E]=p.useState(!1),[B,Q]=p.useState(!1),[O,J]=p.useState(!1),[K,oe]=p.useState(e),[he,we]=p.useState([]),[Se,ze]=p.useState([]),[M,W]=p.useState([]),[re,Y]=p.useState([]),ie=K.progress!==void 0?{progress:K.progress,completedWeight:K.progress,totalWeight:100}:Sp(K,u),de=K.current_stage_id?T.find(A=>A.id===K.current_stage_id):null;p.useEffect(()=>{(async()=>{J(!0);try{const[le,ne,xe,U,Ye,er,is,Et,$t,Qt,tr,Ya,rm,nm,am]=await Promise.all([Pe.getById(e.id),Pe.getMembers(e.id),Pe.getTeams(e.id),ye.getMembers(),ye.getTeams(),ye.getTeams(),et.getAll(),Wt.getAll(),Pe.getAll(),kt.getAll(),vs.getAll(),Zt.getAll(),Jt.getAll(),es.getAll(),Ds.getAll()]);oe(le),w(ne),P(xe),x(U),v(Ye),y(er),g(is.filter(lm=>lm.project_id===parseInt(e.id))),L(U),te(Et),Z($t),ue(Qt),ce(tr),we(Ya),ze(rm),W(nm),Y(am)}catch(le){console.error("Failed to fetch project data:",le)}finally{J(!1)}})()},[e.id]);const Te=async(A,le="member")=>{try{await Pe.addMember(e.id,{user_id:A,user_type:"team",role:le});const ne=await Pe.getMembers(e.id);w(ne),E(!1)}catch(ne){console.error("Failed to add member:",ne)}},Dt=async(A,le="member")=>{try{await Pe.addTeam(e.id,{team_id:A,role:le});const[ne,xe]=await Promise.all([Pe.getMembers(e.id),Pe.getTeams(e.id)]);w(ne),P(xe),Q(!1)}catch(ne){console.error("Failed to add team:",ne)}},k=async A=>{try{await Pe.removeMember(e.id,A);const le=await Pe.getMembers(e.id);w(le)}catch(le){console.error("Failed to remove member:",le)}},C=async A=>{try{await Pe.removeTeam(e.id,A);const[le,ne]=await Promise.all([Pe.getMembers(e.id),Pe.getTeams(e.id)]);w(le),P(ne)}catch(le){console.error("Failed to remove team:",le)}},ae=async A=>{var le;try{const ne=A.status?Vs(A.status):0;let xe="";if(A.gradeId){const Et=(le=e.grades)==null?void 0:le.find($t=>$t.id===A.gradeId);if(Et&&(xe=Et.name,A.bookId)){const $t=Et.books.find(Qt=>Qt.id===A.bookId);if($t&&(xe+=` > ${$t.name}`,A.unitId)){const Qt=$t.units.find(tr=>tr.id===A.unitId);if(Qt&&(xe+=` > ${Qt.name}`,A.lessonId)){const tr=Qt.lessons.find(Ya=>Ya.id===A.lessonId);tr&&(xe+=` > ${tr.name}`)}}}}const U=(A.skills||[]).map(Et=>{const $t=F.find(Qt=>Qt.name===Et);return $t?$t.id:null}).filter(Et=>Et!==null),Ye={name:A.name||"",description:A.description||"",project_id:parseInt(e.id),stage_id:parseInt(A.stageId||"1"),status:A.status||"not-started",priority:A.priority||"medium",start_date:A.startDate||new Date().toISOString().split("T")[0],end_date:A.endDate||new Date(Date.now()+7*24*60*60*1e3).toISOString().split("T")[0],estimated_hours:A.estimatedHours||8,assignees:A.assignees||[],teamAssignees:A.teamAssignees||[],skills:U,component_path:xe};console.log(" Creating task from ProjectDetails:",Ye);const er=await et.create(Ye),is=await et.getAll();g(is.filter(Et=>Et.project_id===parseInt(e.id))),console.log(" Task created successfully from ProjectDetails:",er),h(!1)}catch(ne){console.error(" Failed to create task from ProjectDetails:",ne)}},ge=async A=>{try{J(!0);const le=await Pe.update(e.id,A),ne={...e,...le,start_date:A.start_date||e.start_date,end_date:A.end_date||e.end_date};r&&r(ne),l({type:"UPDATE_PROJECT",payload:ne}),N(!1),console.log(" Project updated successfully:",le)}catch(le){console.error(" Failed to update project:",le)}finally{J(!1)}},S=[{key:"overview",label:"Overview",icon:ps},{key:"educational-hierarchy",label:"Educational Hierarchy",icon:yn},{key:"tasks",label:"Tasks",icon:pt},{key:"timeline",label:"Timeline",icon:Je},{key:"team",label:"Team",icon:_e}],X=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[s.jsx(V,{children:s.jsx(G,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 rounded-lg bg-blue-50",children:s.jsx(ps,{className:"w-6 h-6 text-blue-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Progress"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[ie.progress,"%"]})]})]})})}),s.jsx(V,{children:s.jsx(G,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 rounded-lg bg-green-50",children:s.jsx(pt,{className:"w-6 h-6 text-green-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Tasks"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:u.length})]})]})})}),s.jsx(V,{children:s.jsx(G,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 rounded-lg bg-purple-50",children:s.jsx(_e,{className:"w-6 h-6 text-purple-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Team"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d.length})]})]})})}),s.jsx(V,{children:s.jsx(G,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 rounded-lg bg-orange-50",children:s.jsx(Xs,{className:"w-6 h-6 text-orange-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Days Left"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Math.ceil((new Date(e.end_date||e.endDate||"").getTime()-new Date().getTime())/(1e3*60*60*24))})]})]})})})]}),s.jsxs(V,{children:[s.jsx(Ne,{children:s.jsxs(ke,{className:"flex items-center",children:[s.jsx($s,{className:"w-5 h-5 mr-2 text-blue-600"}),"Current Stage"]})}),s.jsx(G,{children:de?s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-900",children:de.name}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:de.description}),s.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx(ps,{className:"w-4 h-4 mr-1"}),"Order: ",de.order_index||de.template_order||"N/A"]}),de.is_active!==void 0&&s.jsx(q,{variant:de.is_active?"success":"default",size:"sm",children:de.is_active?"Active":"Inactive"})]})]}),s.jsx("div",{className:"text-right",children:s.jsx(q,{variant:"primary",children:"Current"})})]}):s.jsxs("div",{className:"text-center py-4",children:[s.jsx($s,{className:"w-8 h-8 text-gray-300 mx-auto mb-2"}),s.jsx("p",{className:"text-gray-500",children:"No current stage set"}),s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Edit the project to select a stage"})]})})]}),s.jsxs(V,{children:[s.jsx(Ne,{children:s.jsx(ke,{children:"Project Description"})}),s.jsxs(G,{children:[s.jsx("p",{className:"text-gray-700",children:e.description}),s.jsxs("div",{className:"mt-4 flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx(Je,{className:"w-4 h-4 mr-1"}),"Start: ",new Date(e.start_date||e.startDate||"").toLocaleDateString()]}),s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx(Je,{className:"w-4 h-4 mr-1"}),"End: ",new Date(e.end_date||e.endDate||"").toLocaleDateString()]}),s.jsx(q,{variant:e.status==="active"?"primary":e.status==="completed"?"success":e.status==="on-hold"?"warning":"default",children:e.status})]})]})]})]}),je=()=>{var xe;const A=[];A.push({id:"project-start",type:"milestone",title:"Project Start",date:new Date(e.start_date||e.startDate||""),status:"completed",description:"Project officially started"}),(xe=e.stages)==null||xe.forEach(U=>{const Ye=wi(U.id,u);A.push({id:U.id,type:"stage",title:U.name,date:new Date(U.startDate),endDate:new Date(U.endDate),status:U.status,progress:Ye.progress,description:U.description,weight:U.weight})}),u.filter(U=>U.priority==="high"||U.priority==="urgent").forEach(U=>{A.push({id:U.id,type:"task",title:U.name,date:new Date(U.startDate),endDate:new Date(U.endDate),status:U.status,progress:U.progress,description:U.description,priority:U.priority,assignees:U.assignees})}),A.push({id:"project-end",type:"milestone",title:"Project Completion",date:new Date(e.end_date||e.endDate||""),status:e.status==="completed"?"completed":"pending",description:"Planned project completion date"}),A.sort((U,Ye)=>U.date.getTime()-Ye.date.getTime());const le=(U,Ye)=>{if(Ye==="milestone")return U==="completed"?"bg-green-500":"bg-gray-400";switch(U){case"completed":return"bg-green-500";case"in-progress":return"bg-blue-500";case"under-review":return"bg-yellow-500";case"not-started":return"bg-gray-400";case"blocked":return"bg-red-500";default:return"bg-gray-400"}},ne=U=>new Date(U.endDate||U.date)<new Date&&U.status!=="completed"&&U.type!=="milestone";return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Project Timeline"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Track project milestones, stages, and key tasks"})]}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-2"}),s.jsx("span",{children:"Completed"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full mr-2"}),s.jsx("span",{children:"In Progress"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-3 h-3 bg-gray-400 rounded-full mr-2"}),s.jsx("span",{children:"Not Started"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full mr-2"}),s.jsx("span",{children:"Overdue"})]})]})})]}),s.jsx(V,{children:s.jsx(G,{className:"p-6",children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute left-6 top-0 bottom-0 w-0.5 bg-gray-200"}),s.jsx("div",{className:"space-y-8",children:A.map((U,Ye)=>s.jsxs("div",{className:"relative flex items-start",children:[s.jsxs("div",{className:`relative z-10 w-12 h-12 rounded-full ${le(U.status,U.type)} flex items-center justify-center`,children:[U.type==="milestone"&&s.jsx($s,{className:"w-5 h-5 text-white"}),U.type==="stage"&&s.jsx(ps,{className:"w-5 h-5 text-white"}),U.type==="task"&&s.jsx(pt,{className:"w-5 h-5 text-white"})]}),s.jsx("div",{className:"ml-6 flex-1",children:s.jsx("div",{className:`p-4 rounded-lg border-2 ${ne(U)?"border-red-200 bg-red-50":"border-gray-200 bg-white"}`,children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("h4",{className:"font-semibold text-gray-900",children:U.title}),U.type==="stage"&&U.weight&&s.jsxs(q,{variant:"secondary",size:"sm",children:[U.weight,"% weight"]}),U.priority&&s.jsx(q,{variant:U.priority==="urgent"?"danger":U.priority==="high"?"warning":"primary",size:"sm",children:U.priority}),ne(U)&&s.jsxs(q,{variant:"danger",size:"sm",children:[s.jsx(ht,{className:"w-3 h-3 mr-1"}),"Overdue"]})]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:U.description}),s.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-500",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Je,{className:"w-4 h-4 mr-1"}),U.date.toLocaleDateString(),U.endDate&&` - ${U.endDate.toLocaleDateString()}`]}),U.assignees&&U.assignees.length>0&&s.jsxs("div",{className:"flex items-center",children:[s.jsx(_e,{className:"w-4 h-4 mr-1"}),U.assignees.length," assigned"]})]}),(U.type==="stage"||U.type==="task")&&s.jsxs("div",{className:"mt-3",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[s.jsx("span",{className:"text-gray-600",children:"Progress"}),s.jsxs("span",{className:"font-medium",children:[U.progress,"%"]})]}),s.jsx(Qe,{value:U.progress,showLabel:!1})]})]}),s.jsx(q,{variant:U.status==="completed"?"success":U.status==="in-progress"?"primary":U.status==="under-review"?"warning":U.status==="blocked"?"danger":"default",children:U.status.replace("-"," ")})]})})})]},U.id))})]})})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx(V,{children:s.jsx(G,{className:"p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:A.filter(U=>U.status==="completed").length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Completed Items"})]})})}),s.jsx(V,{children:s.jsx(G,{className:"p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:A.filter(U=>U.status==="in-progress").length}),s.jsx("div",{className:"text-sm text-gray-600",children:"In Progress"})]})})}),s.jsx(V,{children:s.jsx(G,{className:"p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-red-600",children:A.filter(U=>ne(U)).length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Overdue Items"})]})})})]})]})},$e=()=>s.jsx("div",{className:"space-y-6",children:e.stages&&e.stages.length>0?e.stages.map(A=>{const le=u.filter(xe=>xe.stageId===A.id),ne=wi(A.id,u);return s.jsxs(V,{children:[s.jsx(Ne,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(ke,{className:"flex items-center",children:["Stage ",A.order,": ",A.name,s.jsxs(q,{variant:"secondary",size:"sm",className:"ml-2",children:[A.weight,"% weight"]})]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:A.description})]}),s.jsx(q,{variant:A.status==="completed"?"success":A.status==="in-progress"?"primary":A.status==="under-review"?"warning":"default",children:A.status.replace("-"," ")})]})}),s.jsxs(G,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx(Je,{className:"w-4 h-4 mr-2"}),"Start: ",new Date(A.startDate).toLocaleDateString()]}),s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx(Je,{className:"w-4 h-4 mr-2"}),"End: ",new Date(A.endDate).toLocaleDateString()]}),s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx(pt,{className:"w-4 h-4 mr-2"}),le.length," tasks"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Progress"}),s.jsxs("span",{className:"font-medium",children:[ne.progress,"%"]})]}),s.jsx(Qe,{value:ne.progress})]}),le.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h5",{className:"font-medium text-gray-900",children:"Recent Tasks:"}),le.slice(0,3).map(xe=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[s.jsx("span",{className:"text-sm text-gray-700",children:xe.name}),s.jsx(q,{variant:xe.status==="completed"?"success":xe.status==="in-progress"?"primary":xe.status==="under-review"?"warning":xe.status==="blocked"?"danger":"default",size:"sm",children:xe.status.replace("-"," ")})]},xe.id)),le.length>3&&s.jsxs("p",{className:"text-xs text-gray-500",children:["+",le.length-3," more tasks"]})]})]})]},A.id)}):s.jsx(V,{children:s.jsxs(G,{className:"p-8 text-center",children:[s.jsx($s,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Stages Defined"}),s.jsx("p",{className:"text-gray-600",children:"This project doesn't have any stages configured yet."})]})})}),We=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Project Tasks"}),s.jsx(I,{icon:s.jsx(Ge,{className:"w-4 h-4"}),onClick:()=>h(!0),children:"Add Task"})]}),u.length>0?s.jsx("div",{className:"space-y-4",children:u.map(A=>{var xe;const le=D.filter(U=>A.assignees&&A.assignees.includes(U.id));_.filter(U=>A.teamAssignees&&A.teamAssignees.includes(U.id));const ne=(xe=e.stages)==null?void 0:xe.find(U=>U.id===A.stageId);return s.jsx(V,{children:s.jsx(G,{className:"p-4",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:A.name}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:A.description}),ne&&s.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Stage: ",ne.name]}),A.componentPath&&s.jsx("p",{className:"text-xs text-purple-600 mt-1",children:A.componentPath}),s.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx(Je,{className:"w-4 h-4 mr-1"}),"Due: ",new Date(A.endDate).toLocaleDateString()]}),s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx(Xs,{className:"w-4 h-4 mr-1"}),A.estimatedHours,"h estimated"]})]}),s.jsxs("div",{className:"space-y-2 mt-2",children:[le.length>0&&s.jsxs("div",{className:"flex items-center space-x-2",children:[le.slice(0,5).map(U=>s.jsxs("div",{className:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center text-white text-xs font-medium relative group",title:U.name,children:[U.name.charAt(0),s.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-gray-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10",children:U.name})]},U.id)),le.length>5&&s.jsxs("div",{className:"w-6 h-6 bg-gray-300 rounded-full flex items-center justify-center text-gray-600 text-xs font-medium",children:["+",le.length-5]})]}),le.length===0&&s.jsx("span",{className:"text-xs text-gray-400",children:"No assignees"})]})]}),s.jsxs("div",{className:"flex flex-col items-end space-y-2",children:[s.jsx(q,{variant:A.status==="completed"?"success":A.status==="in-progress"?"primary":A.status==="under-review"?"warning":A.status==="blocked"?"danger":"default",children:A.status.replace("-"," ")}),s.jsx(q,{variant:A.priority==="urgent"?"danger":A.priority==="high"?"warning":A.priority==="medium"?"primary":"default",size:"sm",children:A.priority}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[A.progress,"%"]}),s.jsx("div",{className:"w-20",children:s.jsx(Qe,{value:A.progress,showLabel:!1})})]})]})]})})},A.id)})}):s.jsx(V,{children:s.jsxs(G,{className:"p-8 text-center",children:[s.jsx(pt,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Tasks Yet"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Start by creating your first task for this project."}),s.jsx(I,{icon:s.jsx(Ge,{className:"w-4 h-4"}),onClick:()=>h(!0),children:"Create First Task"})]})})]}),Tt=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Project Team"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs(I,{onClick:()=>Q(!0),className:"flex items-center space-x-2",variant:"outline",children:[s.jsx(_e,{className:"w-4 h-4"}),s.jsx("span",{children:"Add Team"})]}),s.jsxs(I,{onClick:()=>E(!0),className:"flex items-center space-x-2",children:[s.jsx(Pa,{className:"w-4 h-4"}),s.jsx("span",{children:"Add Member"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"text-md font-medium text-gray-900",children:"Assigned Teams"}),j.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:j.map(A=>s.jsx(V,{children:s.jsxs(G,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-lg flex items-center justify-center text-white",children:s.jsx(_e,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h5",{className:"font-medium text-gray-900",children:A.team_name}),s.jsx(q,{variant:"secondary",className:"text-xs",children:A.role})]})]}),s.jsx(I,{variant:"ghost",size:"sm",onClick:()=>C(A.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:s.jsx(ji,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Members"}),s.jsxs("span",{className:"font-medium",children:[A.member_count," / ",A.max_capacity]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${Math.min(A.member_count/A.max_capacity*100,100)}%`}})})]})]})},A.id))}):s.jsxs("div",{className:"text-center py-6 bg-gray-50 rounded-lg",children:[s.jsx(_e,{className:"w-8 h-8 text-gray-300 mx-auto mb-2"}),s.jsx("p",{className:"text-gray-500",children:"No teams assigned to this project"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"text-md font-medium text-gray-900",children:"Individual Members"}),O?s.jsx("div",{className:"text-center py-8",children:s.jsx("div",{className:"text-gray-500",children:"Loading team members..."})}):d.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(A=>{var U,Ye,er;const le=u.filter(is=>is.assignees&&is.assignees.includes(A.user_id||A.team_member_id)),ne=le.filter(is=>is.status==="completed"),xe=le.length>0?Math.round(ne.length/le.length*100):0;return s.jsx(V,{children:s.jsxs(G,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center text-white font-semibold text-lg",children:((U=A.name)==null?void 0:U.charAt(0))||"U"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:A.name||"Unknown User"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(q,{variant:"secondary",children:A.role||"member"}),A.skills&&s.jsx("p",{className:"text-sm text-gray-600",children:((er=(Ye=A.skills).join)==null?void 0:er.call(Ye,", "))||A.skills})]})]})]}),s.jsx(I,{variant:"ghost",size:"sm",onClick:()=>k(A.project_member_id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:s.jsx(ji,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Tasks Assigned"}),s.jsx("span",{className:"font-medium",children:le.length})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Completed"}),s.jsx("span",{className:"font-medium text-green-600",children:ne.length})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Completion Rate"}),s.jsxs("span",{className:"font-medium",children:[xe,"%"]})]}),s.jsx(Qe,{value:xe})]})]})]})},A.project_member_id)})}):s.jsx(V,{children:s.jsxs(G,{className:"p-8 text-center",children:[s.jsx(_e,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Team Members"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"No team members have been assigned to this project yet."}),s.jsxs(I,{onClick:()=>E(!0),className:"flex items-center space-x-2",children:[s.jsx(Pa,{className:"w-4 h-4"}),s.jsx("span",{children:"Add First Member"})]})]})})]})]});return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs(I,{variant:"ghost",onClick:t,children:[s.jsx(go,{className:"w-4 h-4 mr-2"}),"Back to Projects"]}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:K.name}),s.jsx("p",{className:"text-gray-600",children:K.category})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(q,{variant:K.status==="active"?"primary":K.status==="completed"?"success":K.status==="on-hold"?"warning":"default",children:K.status}),s.jsxs(I,{variant:"outline",size:"sm",onClick:()=>N(!0),children:[s.jsx(Us,{className:"w-4 h-4 mr-2"}),"Edit Project"]})]})]}),s.jsx(V,{children:s.jsx(G,{className:"p-6",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Overall Progress"}),s.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[ie.progress,"%"]})]}),s.jsx(Qe,{value:ie.progress})]})})}),s.jsx("div",{className:"border-b border-gray-200",children:s.jsx("nav",{className:"-mb-px flex space-x-8",children:S.map(A=>s.jsxs("button",{onClick:()=>o(A.key),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${i===A.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[s.jsx(A.icon,{className:"w-4 h-4"}),s.jsx("span",{children:A.label})]},A.key))})}),s.jsxs("div",{children:[i==="overview"&&X(),i==="stages"&&$e(),i==="educational-hierarchy"&&s.jsx(Tp,{projectId:Number(K.id)}),i==="tasks"&&We(),i==="timeline"&&je(),i==="team"&&Tt()]}),s.jsx(jo,{isOpen:c,onClose:()=>h(!1),onSubmit:ae,users:D,teams:_,skills:F,projects:z,stages:T,grades:he,books:Se,units:M,lessons:re}),s.jsx(Dp,{isOpen:f,onClose:()=>N(!1),onSubmit:ge,project:K,categories:n||pe}),s.jsx($p,{isOpen:b,onClose:()=>E(!1),onSubmit:Te,availableMembers:$,projectMembers:d}),s.jsx(Fp,{isOpen:B,onClose:()=>Q(!1),onSubmit:Dt,availableTeams:m,projectTeams:j})]})}function Fp({isOpen:e,onClose:t,onSubmit:r,availableTeams:n,projectTeams:a}){const[l,i]=p.useState(null),[o,c]=p.useState("member"),h=a.map(d=>d.team_id),f=n.filter(d=>!h.includes(d.id)),N=d=>{d.preventDefault(),l&&(r(l,o),i(null),c("member"))};return s.jsx(st,{isOpen:e,onClose:t,title:"Add Team to Project",children:s.jsxs("form",{onSubmit:N,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Team"}),s.jsxs("select",{value:l||"",onChange:d=>i(Number(d.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[s.jsx("option",{value:"",children:"Choose a team..."}),f.map(d=>s.jsxs("option",{value:d.id,children:[d.name," - ",d.member_count||0," members"]},d.id))]}),f.length===0&&s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"All teams are already assigned to this project."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),s.jsxs("select",{value:o,onChange:d=>c(d.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"member",children:"Member"}),s.jsx("option",{value:"admin",children:"Admin"}),s.jsx("option",{value:"owner",children:"Owner"}),s.jsx("option",{value:"viewer",children:"Viewer"})]})]}),s.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:s.jsxs("p",{className:"text-sm text-blue-800",children:[s.jsx("strong",{children:"Note:"})," When you assign a team to this project, all team members will automatically be added as individual project members."]})}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx(I,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),s.jsx(I,{type:"submit",disabled:!l||f.length===0,children:"Add Team"})]})]})})}function $p({isOpen:e,onClose:t,onSubmit:r,availableMembers:n,projectMembers:a}){const[l,i]=p.useState(null),[o,c]=p.useState("member"),h=a.map(d=>d.user_id||d.team_member_id),f=n.filter(d=>!h.includes(d.id)),N=d=>{d.preventDefault(),l&&(r(l,o),i(null),c("member"))};return s.jsx(st,{isOpen:e,onClose:t,title:"Add Team Member",children:s.jsxs("form",{onSubmit:N,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Team Member"}),s.jsxs("select",{value:l||"",onChange:d=>i(Number(d.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[s.jsx("option",{value:"",children:"Choose a team member..."}),f.map(d=>s.jsxs("option",{value:d.id,children:[d.name," (",d.email,")"]},d.id))]}),f.length===0&&s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"All team members are already assigned to this project."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),s.jsxs("select",{value:o,onChange:d=>c(d.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"member",children:"Member"}),s.jsx("option",{value:"admin",children:"Admin"}),s.jsx("option",{value:"owner",children:"Owner"}),s.jsx("option",{value:"viewer",children:"Viewer"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx(I,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),s.jsx(I,{type:"submit",disabled:!l||f.length===0,children:"Add Member"})]})]})})}function Rp(){const[e,t]=p.useState("grid"),[r,n]=p.useState(!1),[a,l]=p.useState(null),[i,o]=p.useState("all"),[c,h]=p.useState("all"),[f,N]=p.useState([]),[d,w]=p.useState([]),[j,P]=p.useState(!0),[$,x]=p.useState(null);p.useEffect(()=>{(async()=>{try{P(!0),x(null);const[g,D]=await Promise.all([Pe.getAll(),vs.getAll()]);N(g),w(D)}catch(g){console.error("ProjectManager fetch error:",g),x(g.message||"Failed to load projects data")}finally{P(!1)}})()},[]);const m=f.filter(u=>!(i!=="all"&&u.category!==i||c!=="all"&&u.status!==c)),v=async u=>{var g;try{x(null);const D={name:u.name||"",description:u.description||"",category_id:u.category_id||((g=d[0])==null?void 0:g.id),current_stage_id:u.currentStageId||null,start_date:u.start_date||new Date().toISOString().split("T")[0],end_date:u.end_date||new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0],status:"planning",progress:0};console.log(" Creating project:",D);const L=await Pe.create(D);N(F=>[...F,L]),n(!1),console.log(" Project created successfully:",L)}catch(D){console.error(" Create project error:",D),x(D.message||"Failed to create project")}},_=async u=>{try{if(x(null),!confirm("Are you sure you want to delete this project? This action cannot be undone."))return;console.log(" Deleting project:",u),await Pe.delete(u),N(g=>g.filter(D=>D.id!==u)),(a==null?void 0:a.id)===u&&l(null),console.log(" Project deleted successfully")}catch(g){console.error(" Delete project error:",g),x(g.message||"Failed to delete project")}},y=u=>{switch(u){case"active":return"primary";case"completed":return"success";case"on-hold":return"warning";case"cancelled":return"danger";default:return"default"}};return a?s.jsx(Op,{project:a,onBack:()=>l(null),onUpdate:u=>{l(u),N(g=>g.map(D=>D.id===u.id?u:D))},categories:d}):j?s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Projects"}),s.jsx("p",{className:"text-gray-600",children:"Manage and track your project portfolio"})]}),s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Cn,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-blue-600"}),s.jsx("p",{className:"text-gray-600",children:"Loading projects..."})]})})]}):$?s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Projects"}),s.jsx("p",{className:"text-gray-600",children:"Manage and track your project portfolio"})]}),s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx(ht,{className:"w-8 h-8 mx-auto mb-4 text-red-600"}),s.jsx("p",{className:"text-red-600 mb-4",children:$}),s.jsx(I,{onClick:()=>window.location.reload(),children:"Try Again"})]})})]}):s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Projects"}),s.jsx("p",{className:"text-gray-600",children:"Manage and track your project portfolio"})]}),s.jsx(I,{icon:s.jsx(Ge,{className:"w-4 h-4"}),onClick:()=>n(!0),children:"New Project"})]}),s.jsxs("div",{className:"flex items-center justify-between bg-white p-4 rounded-lg border border-gray-200",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Qx,{className:"w-4 h-4 text-gray-500"}),s.jsxs("select",{value:i,onChange:u=>o(u.target.value),className:"border border-gray-300 rounded px-3 py-1 text-sm",children:[s.jsx("option",{value:"all",children:"All Categories"}),d.map(u=>s.jsx("option",{value:u.name,children:u.name},u.id))]})]}),s.jsxs("select",{value:c,onChange:u=>h(u.target.value),className:"border border-gray-300 rounded px-3 py-1 text-sm",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"planning",children:"Planning"}),s.jsx("option",{value:"active",children:"Active"}),s.jsx("option",{value:"on-hold",children:"On Hold"}),s.jsx("option",{value:"completed",children:"Completed"}),s.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(I,{variant:e==="grid"?"primary":"ghost",size:"sm",onClick:()=>t("grid"),children:s.jsx(qx,{className:"w-4 h-4"})}),s.jsx(I,{variant:e==="list"?"primary":"ghost",size:"sm",onClick:()=>t("list"),children:s.jsx(Jx,{className:"w-4 h-4"})})]})]}),e==="grid"?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(u=>s.jsxs(V,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>l(u),children:[s.jsx(Ne,{className:"pb-3",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx(ke,{className:"text-lg",children:u.name}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:u.category})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(I,{variant:"ghost",size:"sm",onClick:g=>{g.stopPropagation(),l(u)},title:"Edit Project",children:""}),s.jsx(I,{variant:"ghost",size:"sm",onClick:g=>{g.stopPropagation(),_(u.id)},title:"Delete Project",className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:""})]})]})}),s.jsxs(G,{className:"space-y-4",children:[s.jsx("p",{className:"text-sm text-gray-700 line-clamp-2",children:u.description}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Progress"}),s.jsxs("span",{className:"font-medium",children:[u.progress,"%"]})]}),s.jsx(Qe,{value:u.progress})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(q,{variant:y(u.status),children:u.status}),s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx(_e,{className:"w-4 h-4 mr-1"}),u.userCount||0]})]}),s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx(Je,{className:"w-4 h-4 mr-2"}),u.end_date||u.endDate?new Date(u.end_date||u.endDate||"").toLocaleDateString():"No due date"]})]})]},u.id))}):s.jsx(V,{children:s.jsx(G,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Project Name"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Progress"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Team"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Due Date"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m.map(u=>s.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>l(u),children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:u.name}),s.jsx("div",{className:"text-sm text-gray-500",children:u.description})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:u.category}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx(q,{variant:y(u.status),children:u.status})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"w-24",children:s.jsx(Qe,{value:u.progress,showLabel:!1})}),s.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[u.progress,"%"]})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(_e,{className:"w-4 h-4 mr-1 text-gray-400"}),u.userCount||0]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:u.end_date||u.endDate?new Date(u.end_date||u.endDate||"").toLocaleDateString():"No due date"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:s.jsxs("div",{className:"flex items-center justify-end space-x-1",children:[s.jsx(I,{variant:"ghost",size:"sm",onClick:g=>{g.stopPropagation(),l(u)},title:"Edit Project",children:""}),s.jsx(I,{variant:"ghost",size:"sm",onClick:g=>{g.stopPropagation(),_(u.id)},title:"Delete Project",className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:""})]})})]},u.id))})]})})})}),s.jsx(Up,{isOpen:r,onClose:()=>n(!1),onSubmit:v,categories:d})]})}function Up({isOpen:e,onClose:t,onSubmit:r,categories:n}){const[a,l]=p.useState({name:"",description:"",category_id:null,current_stage_id:null,start_date:new Date().toISOString().split("T")[0],end_date:new Date(Date.now()+2592e6).toISOString().split("T")[0]}),[i,o]=p.useState([]),[c,h]=p.useState(!1),f=async d=>{if(l({...a,category_id:d,current_stage_id:null}),d){h(!0);try{const w=await kt.getByCategory(d);o(w)}catch(w){console.error("Failed to load stages for category:",w),o([])}finally{h(!1)}}else o([])},N=d=>{d.preventDefault(),r({...a,start_date:a.start_date,end_date:a.end_date,currentStageId:a.current_stage_id||void 0}),l({name:"",description:"",category_id:null,current_stage_id:null,start_date:new Date().toISOString().split("T")[0],end_date:new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0]}),o([])};return s.jsx(st,{isOpen:e,onClose:t,title:"Create New Project",size:"lg",children:s.jsxs("form",{onSubmit:N,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Name"}),s.jsx("input",{type:"text",required:!0,value:a.name,onChange:d=>l({...a,name:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter project name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),s.jsx("textarea",{value:a.description,onChange:d=>l({...a,description:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Project description"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),s.jsxs("select",{value:a.category_id||"",onChange:d=>f(d.target.value?parseInt(d.target.value):null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Select a category"}),n&&n.length>0?n.map(d=>s.jsx("option",{value:d.id,children:d.name},d.id)):s.jsx("option",{value:"",disabled:!0,children:"No categories available"})]})]}),a.category_id&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Stage"}),c?s.jsxs("div",{className:"flex items-center justify-center py-4",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),s.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Loading stages..."})]}):i.length>0?s.jsxs("select",{value:a.current_stage_id||"",onChange:d=>l({...a,current_stage_id:d.target.value?parseInt(d.target.value):null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Select a stage"}),i.map(d=>s.jsxs("option",{value:d.id,children:[d.name," - ",d.description]},d.id))]}):s.jsx("div",{className:"text-sm text-gray-500 py-2",children:"No stages available for this category."})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),s.jsx("input",{type:"date",value:a.start_date,onChange:d=>l({...a,start_date:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),s.jsx("input",{type:"date",value:a.end_date,onChange:d=>l({...a,end_date:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx(I,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),s.jsx(I,{type:"submit",children:"Create Project"})]})]})})}function Bp(){const{dispatch:e}=Pr(),[t,r]=p.useState("members"),[n,a]=p.useState(!1),[l,i]=p.useState(null),[o,c]=p.useState([]),[h,f]=p.useState([]),[N,d]=p.useState(""),[w,j]=p.useState(!1),[P,$]=p.useState(null),[x,m]=p.useState([]),[v,_]=p.useState([]),[y,u]=p.useState(!1),[g,D]=p.useState(null),[L,F]=p.useState(null),[te,z]=p.useState(!1),[Z,T]=p.useState(!1),[ue,pe]=p.useState([]),[ce,b]=p.useState({name:"",email:"",passcode:"",skills:[],team_id:null}),[E,B]=p.useState({name:"",description:"",functional_unit_id:null,team_lead_id:null,team_lead_type:"team",max_capacity:10,members:[]}),[Q,O]=p.useState([]);p.useEffect(()=>{J()},[t]),p.useEffect(()=>{(async()=>{try{const C=await Wt.getAll();console.log(" Raw skills data:",C);let ae=[];Array.isArray(C)&&(ae=C),console.log(" Skills array:",ae);const ge=ae.map(S=>S.name||S);O(ge),console.log(" Skills fetched:",ge),console.log(" Skills array length:",ge.length)}catch(C){console.error("Error fetching skills:",C)}})()},[]);const J=async()=>{try{if(a(!0),i(null),t==="members"){const[k,C]=await Promise.all([ye.getMembers(),et.getAll()]);console.log(" Team members fetched:",k),console.log(" Tasks fetched:",C);const ae=(k||[]).map(ge=>{const S=C.filter(X=>X.assignees&&X.assignees.includes(ge.id));return{...ge,task_count:S.length}});c(ae),f(ae)}else{const k=await ye.getTeams();console.log(" Teams fetched:",k),m(k||[]),_(k||[])}}catch(k){console.error(" Fetch team data error:",k),i("Failed to load team data")}finally{a(!1)}};p.useEffect(()=>{(async()=>{try{const C=await ye.getTeams();m(C||[]),console.log(" Teams for dropdown fetched:",C)}catch(C){console.error("Error fetching teams for dropdown:",C)}})()},[]),p.useEffect(()=>{if(t==="members"){const k=o.filter(C=>C.name.toLowerCase().includes(N.toLowerCase())||C.email.toLowerCase().includes(N.toLowerCase())||C.skills&&C.skills.some(ae=>ae.toLowerCase().includes(N.toLowerCase())));f(k)}else{const k=x.filter(C=>C.name.toLowerCase().includes(N.toLowerCase())||C.description&&C.description.toLowerCase().includes(N.toLowerCase())||C.skills&&C.skills.some(ae=>ae.toLowerCase().includes(N.toLowerCase())));_(k)}},[N,o,x,t]);const K=async k=>{if(k.preventDefault(),!ce.passcode||ce.passcode.trim()===""){i("Passcode is required for new team members");return}try{const C=await ye.createMember(ce);c([...o,C]),j(!1),Se()}catch(C){console.error("Error creating team member:",C),i("Failed to create team member")}},oe=async k=>{if(k.preventDefault(),!!P)try{const C={...ce};(!C.passcode||C.passcode.trim()==="")&&delete C.passcode;const ae=await ye.updateMember(P.id.toString(),C);c(o.map(ge=>ge.id===P.id?ae:ge)),j(!1),$(null),Se()}catch(C){console.error("Error updating team member:",C),i("Failed to update team member")}},he=async k=>{if(confirm("Are you sure you want to delete this team member?"))try{await ye.deleteMember(k.toString()),c(o.filter(C=>C.id!==k))}catch(C){console.error("Error deleting team member:",C),i("Failed to delete team member")}},we=k=>{e({type:"SET_SELECTED_VIEW",payload:"tasks"}),e({type:"SET_FILTERS",payload:{teamMembers:[k.id.toString()]}})},Se=()=>{b({name:"",email:"",passcode:"",skills:[],team_id:null})},ze=async k=>{k.preventDefault();try{const C=await ye.createTeam(E);m([...x,C]),u(!1),re()}catch(C){console.error("Error creating team:",C),i("Failed to create team")}},M=async k=>{if(k.preventDefault(),!!g)try{const C=await ye.updateTeam(g.id.toString(),E);m(x.map(ae=>ae.id===g.id?C:ae)),u(!1),D(null),re()}catch(C){console.error("Error updating team:",C),i("Failed to update team")}},W=async k=>{if(confirm("Are you sure you want to delete this team?"))try{await ye.deleteTeam(k.toString()),m(x.filter(C=>C.id!==k))}catch(C){console.error("Error deleting team:",C),i("Failed to delete team")}},re=()=>{B({name:"",description:"",functional_unit_id:null,team_lead_id:null,team_lead_type:"team",max_capacity:10,members:[]})},Y=k=>{$(k),b({name:k.name,email:k.email,passcode:"",skills:k.skills,team_id:k.team_ids&&k.team_ids.length>0?k.team_ids[0]:null}),j(!0)},ie=k=>{D(k),B({name:k.name,description:k.description,functional_unit_id:null,team_lead_id:null,team_lead_type:"team",max_capacity:k.max_capacity,members:[]}),u(!0)},de=async k=>{try{const C=await ye.getTeamById(k.id.toString());F(C),z(!0)}catch(C){console.error("Error fetching team details:",C),i("Failed to fetch team details")}},Te=async k=>{try{const ge=(await ye.getMembers()||[]).filter(S=>!S.team_ids||!S.team_ids.includes(k.id));pe(ge),F(k),T(!0)}catch(C){console.error("Error fetching available members:",C),i("Failed to fetch available members")}},Dt=async k=>{if(L)try{await ye.addMemberToTeam(L.id.toString(),{member_id:k});const C=await ye.getTeamById(L.id.toString());F(C),await J(),T(!1)}catch(C){console.error("Error adding member to team:",C),i("Failed to add member to team")}};return n?s.jsx("div",{className:"flex items-center justify-center p-8",children:s.jsx("div",{className:"text-lg",children:"Loading team data..."})}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Team Management"}),s.jsx("p",{className:"text-gray-600",children:"Manage team members and teams"})]})}),l&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:s.jsx("p",{className:"text-red-800",children:l})}),s.jsx("div",{className:"border-b border-gray-200",children:s.jsxs("nav",{className:"-mb-px flex space-x-8",children:[s.jsxs("button",{onClick:()=>r("members"),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${t==="members"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[s.jsx(_e,{className:"w-4 h-4"}),s.jsx("span",{children:"Team Members"})]}),s.jsxs("button",{onClick:()=>r("teams"),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${t==="teams"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[s.jsx(la,{className:"w-4 h-4"}),s.jsx("span",{children:"Teams"})]})]})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center space-x-4",children:s.jsxs("div",{className:"relative",children:[s.jsx(vo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",placeholder:`Search ${t==="members"?"team members":"teams"}...`,value:N,onChange:k=>d(k.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]})}),s.jsxs(I,{onClick:()=>{t==="members"?($(null),Se(),j(!0)):(D(null),re(),u(!0))},className:"flex items-center space-x-2",children:[s.jsx(Ge,{className:"w-4 h-4"}),s.jsxs("span",{children:["Add ",t==="members"?"Member":"Team"]})]})]}),t==="members"?s.jsx(Hp,{members:h,onEdit:Y,onDelete:he,onMemberClick:we}):s.jsx(Wp,{teams:v,onEdit:ie,onDelete:W,onViewDetails:de}),s.jsx(st,{isOpen:w,onClose:()=>{j(!1),$(null),Se()},title:P?"Edit Team Member":"Create Team Member",children:s.jsxs("form",{onSubmit:P?oe:K,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name"}),s.jsx("input",{type:"text",value:ce.name,onChange:k=>b({...ce,name:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter full name",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),s.jsx("input",{type:"email",value:ce.email,onChange:k=>b({...ce,email:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter email address",required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Passcode ",P&&s.jsx("span",{className:"text-gray-500 text-xs",children:"(leave empty to keep current)"})]}),s.jsx("input",{type:"text",value:ce.passcode,onChange:k=>b({...ce,passcode:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:P?"Leave empty to keep current passcode":"Enter passcode",required:!P}),!P&&s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Passcode is required for new team members"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assign to Team"}),s.jsxs("select",{value:ce.team_id||"",onChange:k=>b({...ce,team_id:k.target.value?Number(k.target.value):null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"Select a team (optional)"}),x.map(k=>s.jsx("option",{value:k.id,children:k.name},k.id))]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Skills"}),s.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:["Available skills: ",Q.length]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 max-h-48 overflow-y-auto border border-gray-200 rounded-lg p-4",children:Q.length>0?Q.map(k=>s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer hover:bg-gray-50 p-2 rounded",children:[s.jsx("input",{type:"checkbox",checked:ce.skills.includes(k),onChange:C=>{C.target.checked?b({...ce,skills:[...ce.skills,k]}):b({...ce,skills:ce.skills.filter(ae=>ae!==k)})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:k})]},k)):s.jsx("div",{className:"col-span-3 text-center text-gray-500 py-4",children:"No skills available. Please add skills first."})}),ce.skills.length>0&&s.jsxs("div",{className:"mt-3",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Selected skills:"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:ce.skills.map(k=>s.jsx(q,{variant:"secondary",className:"text-xs",children:k},k))})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[s.jsx(I,{type:"button",variant:"outline",onClick:()=>{j(!1),$(null),Se()},className:"px-6",children:"Cancel"}),s.jsx(I,{type:"submit",className:"px-6 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700",children:P?"Update Member":"Create Member"})]})]})}),s.jsx(st,{isOpen:y,onClose:()=>{u(!1),D(null),re()},title:g?"Edit Team":"Create Team",children:s.jsxs("form",{onSubmit:g?M:ze,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Team Name"}),s.jsx("input",{type:"text",value:E.name,onChange:k=>B({...E,name:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter team name",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Capacity"}),s.jsx("input",{type:"number",value:E.max_capacity,onChange:k=>B({...E,max_capacity:parseInt(k.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"1",max:"50",placeholder:"10"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),s.jsx("textarea",{value:E.description,onChange:k=>B({...E,description:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:3,placeholder:"Enter team description"})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[s.jsx(I,{type:"button",variant:"outline",onClick:()=>{u(!1),D(null),re()},className:"px-6",children:"Cancel"}),s.jsx(I,{type:"submit",className:"px-6 bg-gradient-to-r from-green-500 to-teal-600 hover:from-green-600 hover:to-teal-700",children:g?"Update Team":"Create Team"})]})]})}),L&&s.jsx(st,{isOpen:te,onClose:()=>{z(!1),F(null)},title:`${L.name} - Team Details`,children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Team Information"}),s.jsx("p",{className:"text-gray-600",children:L.description})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Functional Unit"}),s.jsx("p",{className:"text-gray-900",children:L.functional_unit_name||"Not assigned"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Team Lead"}),s.jsx("p",{className:"text-gray-900",children:L.team_lead_name})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Members"}),s.jsxs("p",{className:"text-gray-900",children:[L.member_count," / ",L.max_capacity]})]})]}),L.skills&&L.skills.length>0&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Team Skills"}),s.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:L.skills.map((k,C)=>s.jsx(q,{variant:"secondary",children:k},C))})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Team Members"}),s.jsxs(I,{size:"sm",onClick:()=>Te(L),className:"bg-blue-500 hover:bg-blue-600 text-white",disabled:L.member_count>=L.max_capacity,children:[s.jsx(Pa,{className:"w-3 h-3 mr-1"}),"Add Member"]})]}),L.members&&L.members.length>0?s.jsx("div",{className:"space-y-2 mt-1",children:L.members.map(k=>{var C;return s.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:k.name}),s.jsx("p",{className:"text-sm text-gray-600",children:k.team_role})]}),s.jsxs(q,{variant:"secondary",children:[((C=k.skills)==null?void 0:C.length)||0," skills"]})]},k.id)})}):s.jsxs("div",{className:"text-center py-4 text-gray-500",children:[s.jsx(_e,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),s.jsx("p",{children:"No members assigned to this team"})]})]})]})}),L&&s.jsx(st,{isOpen:Z,onClose:()=>{T(!1),F(null),pe([])},title:`Add Member to ${L.name}`,children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"mb-4",children:[s.jsxs("p",{className:"text-sm text-gray-600",children:["Select a member to add to ",s.jsx("strong",{children:L.name})]}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Current: ",L.member_count," / ",L.max_capacity," members"]})]}),ue.length>0?s.jsx("div",{className:"max-h-64 overflow-y-auto space-y-2",children:ue.map(k=>s.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",onClick:()=>Dt(k.id),children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white font-semibold text-xs",children:k.name.split(" ").map(C=>C[0]).join("").toUpperCase()})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:k.name}),s.jsx("p",{className:"text-sm text-gray-600",children:k.email})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(q,{variant:"secondary",className:"text-xs",children:[k.skills.length," skills"]}),s.jsx(I,{size:"sm",variant:"outline",className:"text-xs",children:"Add"})]})]},k.id))}):s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(_e,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),s.jsx("p",{className:"text-lg font-medium",children:"No available members"}),s.jsx("p",{className:"text-sm",children:"All team members are already assigned to this team or other teams."})]}),s.jsx("div",{className:"flex justify-end pt-4 border-t",children:s.jsx(I,{variant:"outline",onClick:()=>{T(!1),F(null),pe([])},children:"Cancel"})})]})})]})}function Hp({members:e,onEdit:t,onDelete:r,onMemberClick:n}){return s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(a=>s.jsx(V,{className:"hover:shadow-lg transition-shadow duration-200 cursor-pointer",onClick:()=>n&&n(a),children:s.jsx(G,{className:"p-6",children:s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white font-semibold text-sm",children:a.name.split(" ").map(l=>l[0]).join("").toUpperCase()})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900 text-lg",children:a.name}),s.jsxs("p",{className:"text-sm text-gray-600 flex items-center",children:[s.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),a.email]}),a.passcode&&s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Passcode: ",s.jsx("span",{className:"font-mono bg-gray-100 px-1 rounded",children:a.passcode})]})]})]}),s.jsxs("div",{className:"mb-4 space-y-3",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Tasks"}),s.jsxs("span",{className:"text-xs bg-orange-100 text-orange-800 px-2 py-1 rounded-full",children:[a.task_count||0," tasks"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-orange-500 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min((a.task_count||0)*10,100)}%`}})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Skills"}),s.jsxs("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:[a.skills.length," skills"]})]}),a.skills.length>0&&s.jsxs("div",{className:"flex flex-wrap gap-1",children:[a.skills.slice(0,3).map((l,i)=>s.jsx(q,{variant:"secondary",className:"text-xs px-2 py-1",children:l},i)),a.skills.length>3&&s.jsxs(q,{variant:"secondary",className:"text-xs px-2 py-1",children:["+",a.skills.length-3," more"]})]})]}),a.team_names&&a.team_names.length>0&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Teams"}),s.jsxs("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:[a.team_names.length," team",a.team_names.length>1?"s":""]})]}),s.jsx("div",{className:"flex flex-wrap gap-1",children:a.team_names.map((l,i)=>s.jsx(q,{variant:"default",className:"text-xs px-2 py-1 bg-green-100 text-green-800",children:l},i))})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(q,{variant:a.is_active?"default":"secondary",className:"px-3 py-1",children:a.is_active?"Active":"Inactive"}),a.performance_flags_count>0&&s.jsxs(q,{variant:"danger",className:"px-3 py-1",children:[s.jsx(ht,{className:"w-3 h-3 mr-1"}),a.performance_flags_count," flags"]})]}),s.jsxs("div",{className:"flex space-x-1",children:[s.jsx(I,{size:"sm",variant:"outline",onClick:l=>{l.stopPropagation(),t(a)},className:"hover:bg-blue-50 hover:border-blue-300 transition-colors",children:s.jsx(_n,{className:"w-3 h-3"})}),s.jsx(I,{size:"sm",variant:"outline",onClick:l=>{l.stopPropagation(),r(a.id)},className:"hover:bg-red-50 hover:border-red-300 transition-colors",children:s.jsx(Lt,{className:"w-3 h-3"})})]})]})]})})})},a.id))})}function Wp({teams:e,onEdit:t,onDelete:r,onViewDetails:n}){return!e||e.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-100 to-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(la,{className:"w-8 h-8 text-gray-400"})}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No teams found"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Create your first team to get started."}),s.jsxs(I,{className:"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700",children:[s.jsx(Ge,{className:"w-4 h-4 mr-2"}),"Create Team"]})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(a=>s.jsx(V,{className:"hover:shadow-lg transition-shadow duration-200",children:s.jsx(G,{className:"p-6",children:s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-teal-600 rounded-lg flex items-center justify-center",children:s.jsx(la,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900 text-lg",children:a.name}),s.jsx("p",{className:"text-sm text-gray-600",children:a.description||"No description"})]})]}),s.jsxs("div",{className:"space-y-3 mb-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(la,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-sm text-gray-600",children:a.functional_unit_name||"No unit"})]}),s.jsx(q,{variant:a.is_active?"default":"secondary",className:"px-2 py-1 text-xs",children:a.is_active?"Active":"Inactive"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(np,{className:"w-4 h-4 text-gray-400"}),s.jsxs("span",{className:"text-sm text-gray-600",children:[a.member_count||0," / ",a.max_capacity||10," members"]}),s.jsx("div",{className:"flex-1 ml-2",children:s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min((a.member_count||0)/(a.max_capacity||10)*100,100)}%`}})})})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(em,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-sm text-gray-600",children:a.team_lead_name||"No team lead"})]})]}),a.skills&&a.skills.length>0&&s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Team Skills"}),s.jsxs("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:[a.skills.length," skills"]})]}),s.jsxs("div",{className:"flex flex-wrap gap-1",children:[a.skills.slice(0,3).map((l,i)=>s.jsx(q,{variant:"secondary",className:"text-xs px-2 py-1",children:l},i)),a.skills.length>3&&s.jsxs(q,{variant:"secondary",className:"text-xs px-2 py-1",children:["+",a.skills.length-3," more"]})]})]}),s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex space-x-1",children:[s.jsx(I,{size:"sm",variant:"outline",onClick:()=>n(a),className:"hover:bg-blue-50 hover:border-blue-300 transition-colors",children:s.jsx(_e,{className:"w-3 h-3"})}),s.jsx(I,{size:"sm",variant:"outline",onClick:()=>t(a),className:"hover:bg-green-50 hover:border-green-300 transition-colors",children:s.jsx(_n,{className:"w-3 h-3"})}),s.jsx(I,{size:"sm",variant:"outline",onClick:()=>r(a.id),className:"hover:bg-red-50 hover:border-red-300 transition-colors",children:s.jsx(Lt,{className:"w-3 h-3"})})]})})]})})})},a.id))})}function Vp(){const[e,t]=p.useState(new Date("2025-08-11")),[r,n]=p.useState("week"),[a,l]=p.useState("team"),[i,o]=p.useState(!1);p.useState(null);const[c,h]=p.useState([]),[f,N]=p.useState([]),[d,w]=p.useState([]),[j,P]=p.useState([]);p.useState([]),p.useState([]),p.useState([]),p.useState([]);const[$,x]=p.useState(!1),[m,v]=p.useState(null),_=async b=>{try{x(!0),v(null);const E=await Qn.getAll(b);h(E)}catch(E){console.error("Failed to fetch allocations:",E),v("Failed to load allocations")}finally{x(!1)}};p.useEffect(()=>{(async()=>{try{x(!0),v(null);const[E,B,Q,O,J,K,oe,he]=await Promise.all([Qn.getAll(),ye.getMembers(),Pe.getAll(),et.getAll(),Zt.getAll(),Jt.getAll(),es.getAll(),Ds.getAll()]);console.log(" Allocations data:",E),console.log(" Users data:",B),console.log(" Projects data:",Q),console.log(" Tasks data:",O),h(E),N(B),w(Q),P(O)}catch(E){console.error("Failed to fetch data:",E),v("Failed to load data")}finally{x(!1)}})()},[]);const y=async()=>{if(c.length===0&&j.length>0)try{x(!0);for(const b of j)if(b.assignees&&b.assignees.length>0){const E=b.start_date||b.startDate,B=b.end_date||b.endDate,Q=b.estimated_hours||b.estimatedHours||8;if(E&&B){const O=Math.ceil((new Date(B).getTime()-new Date(E).getTime())/864e5),J=Math.min(Q/Math.max(O,1),8);for(const K of b.assignees){const oe={user_id:K,project_id:b.project_id||b.projectId||"",task_id:b.id,hours_per_day:Math.round(J*100)/100,start_date:new Date(E).toISOString().split("T")[0],end_date:new Date(B).toISOString().split("T")[0]};await Qn.create(oe)}}}await _()}catch(b){console.error("Failed to create allocations from tasks:",b),v("Failed to create initial allocations")}finally{x(!1)}};p.useEffect(()=>{c.length===0&&!$&&j.length>0&&y()},[c.length,$,j.length]);const u=b=>{const E=[],B=new Date(b);B.setDate(b.getDate()-b.getDay());for(let Q=0;Q<7;Q++){const O=new Date(B);O.setDate(B.getDate()+Q),E.push(O)}return E},g=(b,E,B)=>(console.log(` getAllocationsForDate: date=${b.toISOString().split("T")[0]}, userId=${E}, allocations.length=${c.length}`),c.filter(O=>{var ze,M,W;const J=b.toISOString().split("T")[0],K=O.start_date.split("T")[0],oe=O.end_date.split("T")[0],he=J>=K&&J<=oe,we=!E||((ze=O.user_id)==null?void 0:ze.toString())===E,Se=!B||((M=O.project_id)==null?void 0:M.toString())===B;return E&&((W=O.user_id)==null?void 0:W.toString())===E&&!he&&console.log(` Date mismatch: Looking for ${J}, allocation ${O.id} range is ${K} to ${oe}`),he&&we&&Se})),D=(b,E)=>g(E,b).reduce((Q,O)=>{const J=typeof O.hours_per_day=="string"?parseFloat(O.hours_per_day):O.hours_per_day||0;return Q+J},0),L=(b,E)=>g(E,void 0,b).reduce((Q,O)=>{const J=typeof O.hours_per_day=="string"?parseFloat(O.hours_per_day):O.hours_per_day||0;return Q+J},0),F=(b,E)=>{const B=D(b,E);return B===0?"available":B>8?"overloaded":B>=6?"busy":"normal"},te=b=>{switch(b){case"available":return"bg-green-100 text-green-800";case"normal":return"bg-blue-100 text-blue-800";case"busy":return"bg-yellow-100 text-yellow-800";case"overloaded":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},z=b=>{const E=new Date(e);r==="day"?E.setDate(e.getDate()+(b==="next"?1:-1)):r==="week"?E.setDate(e.getDate()+(b==="next"?7:-7)):E.setMonth(e.getMonth()+(b==="next"?1:-1)),t(E)},Z=()=>{if(r==="day")return e.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});if(r==="week"){const b=u(e),E=b[0].toLocaleDateString("en-US",{month:"short",day:"numeric"}),B=b[6].toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return`${E} - ${B}`}else return e.toLocaleDateString("en-US",{year:"numeric",month:"long"})},T=async b=>{var E,B;try{const Q={user_id:b.userId||"",project_id:b.projectId||"",task_id:b.taskId||void 0,hours_per_day:b.hoursPerDay||8,start_date:((E=b.startDate)==null?void 0:E.toISOString().split("T")[0])||new Date().toISOString().split("T")[0],end_date:((B=b.endDate)==null?void 0:B.toISOString().split("T")[0])||new Date().toISOString().split("T")[0]};await Qn.create(Q),await _(),o(!1)}catch(Q){console.error("Failed to create allocation:",Q),v("Failed to create allocation")}},ue=()=>{const b=u(e);return console.log(` Current selected date: ${e.toISOString().split("T")[0]}`),console.log(" Week dates:",b.map(E=>E.toISOString().split("T")[0])),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-8 gap-2 mb-4",children:[s.jsx("div",{className:"font-medium text-gray-700 p-2",children:"Team Member"}),b.map(E=>s.jsxs("div",{className:"text-center p-2",children:[s.jsx("div",{className:"font-medium text-gray-700",children:E.toLocaleDateString("en-US",{weekday:"short"})}),s.jsx("div",{className:"text-sm text-gray-500",children:E.getDate()})]},E.toISOString()))]}),f.map(E=>{var B;return s.jsx(V,{className:"overflow-hidden",children:s.jsx(G,{className:"p-0",children:s.jsxs("div",{className:"grid grid-cols-8 gap-2",children:[s.jsxs("div",{className:"p-4 bg-gray-50 flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-medium",children:E.name.charAt(0)}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900",children:E.name}),s.jsx("div",{className:"text-sm text-gray-600",children:((B=E.skills)==null?void 0:B[0])||"No skills"})]})]}),b.map(Q=>{const O=g(Q,E.id),J=D(E.id,Q),K=F(E.id,Q);return s.jsxs("div",{className:"p-2 border-l border-gray-200",children:[s.jsxs("div",{className:`rounded-lg p-2 text-center ${te(K)}`,children:[s.jsxs("div",{className:"font-semibold",children:[J,"h"]}),s.jsxs("div",{className:"text-xs mt-1",children:[O.length," tasks"]})]}),O.length>0&&s.jsxs("div",{className:"mt-2 space-y-1",children:[O.slice(0,2).map(oe=>{var ze,M;const he=j.find(W=>W.id===oe.task_id),we=d.find(W=>W.id===oe.project_id),Se=f.find(W=>W.id===oe.user_id);return s.jsxs("div",{className:"text-xs bg-white rounded p-1 border",title:`${we==null?void 0:we.name}: ${he==null?void 0:he.name} (${(ze=Se==null?void 0:Se.skills)==null?void 0:ze[0]})`,children:[s.jsx("div",{className:"font-medium truncate",children:he==null?void 0:he.name}),s.jsxs("div",{className:"text-gray-600",children:[oe.hours_per_day,"h  ",(M=Se==null?void 0:Se.skills)==null?void 0:M[0]]})]},oe.task_id||oe.id)}),O.length>2&&s.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["+",O.length-2," more"]})]})]},Q.toISOString())})]})})},E.id)})]})},pe=()=>{const b=u(e);return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-8 gap-2 mb-4",children:[s.jsx("div",{className:"font-medium text-gray-700 p-2",children:"Project"}),b.map(E=>s.jsxs("div",{className:"text-center p-2",children:[s.jsx("div",{className:"font-medium text-gray-700",children:E.toLocaleDateString("en-US",{weekday:"short"})}),s.jsx("div",{className:"text-sm text-gray-500",children:E.getDate()})]},E.toISOString()))]}),d.map(E=>s.jsx(V,{className:"overflow-hidden",children:s.jsx(G,{className:"p-0",children:s.jsxs("div",{className:"grid grid-cols-8 gap-2",children:[s.jsxs("div",{className:"p-4 bg-gray-50 flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-full flex items-center justify-center text-white",children:s.jsx(Rs,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900",children:E.name}),s.jsx("div",{className:"text-sm text-gray-600",children:E.category})]})]}),b.map(B=>{const Q=g(B,void 0,E.id),O=L(E.id,B),J=new Set(Q.map(K=>K.user_id)).size;return s.jsxs("div",{className:"p-2 border-l border-gray-200",children:[s.jsxs("div",{className:"rounded-lg p-2 text-center bg-blue-100 text-blue-800",children:[s.jsxs("div",{className:"font-semibold",children:[O,"h"]}),s.jsxs("div",{className:"text-xs mt-1",children:[J," people"]})]}),Q.length>0&&s.jsxs("div",{className:"mt-2 space-y-1",children:[Q.slice(0,2).map(K=>{const oe=f.find(we=>we.id===K.user_id),he=j.find(we=>we.id===K.task_id);return s.jsxs("div",{className:"text-xs bg-white rounded p-1 border",title:`${oe==null?void 0:oe.name}: ${he==null?void 0:he.name}`,children:[s.jsx("div",{className:"font-medium truncate",children:oe==null?void 0:oe.name}),s.jsxs("div",{className:"text-gray-600",children:[K.hours_per_day,"h"]})]},`${K.user_id}-${K.task_id}`)}),Q.length>2&&s.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["+",Q.length-2," more"]})]})]},B.toISOString())})]})})},E.id))]})},ce=()=>a==="team"?s.jsx("div",{className:"space-y-6",children:f.map(b=>{const E=g(e,b.id),B=D(b.id,e),Q=F(b.id,e);return s.jsxs(V,{children:[s.jsx(Ne,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center text-white font-medium text-lg",children:b.name.charAt(0)}),s.jsxs("div",{children:[s.jsx(ke,{children:b.name}),s.jsx("p",{className:"text-sm text-gray-600",children:b.skills.join(", ")})]})]}),s.jsx("div",{className:"text-right",children:s.jsxs(q,{variant:Q==="available"?"success":Q==="overloaded"?"danger":Q==="busy"?"warning":"primary",children:[B,"h allocated"]})})]})}),s.jsx(G,{children:E.length===0?s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(vi,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),s.jsx("p",{children:"No tasks allocated for this day"})]}):s.jsx("div",{className:"space-y-3",children:E.map(O=>{const J=j.find(oe=>oe.id===O.taskId),K=d.find(oe=>oe.id===O.projectId);return s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-gray-900",children:J==null?void 0:J.name}),s.jsx("div",{className:"text-sm text-gray-600",children:K==null?void 0:K.name}),s.jsxs("div",{className:"flex items-center mt-1 space-x-4",children:[s.jsx(q,{variant:"secondary",size:"sm",children:J==null?void 0:J.priority}),s.jsx(q,{variant:(J==null?void 0:J.status)==="completed"?"success":(J==null?void 0:J.status)==="in-progress"?"primary":(J==null?void 0:J.status)==="blocked"?"danger":"default",size:"sm",children:J==null?void 0:J.status})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"font-semibold text-lg",children:[O.hoursPerDay,"h"]}),s.jsx("div",{className:"text-sm text-gray-600",children:"allocated"})]})]},O.taskId)})})})]},b.id)})}):s.jsx("div",{className:"space-y-6",children:d.map(b=>{const E=g(e,void 0,b.id),B=L(b.id,e),Q=new Set(E.map(O=>O.userId)).size;return s.jsxs(V,{children:[s.jsx(Ne,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-full flex items-center justify-center text-white",children:s.jsx(Rs,{className:"w-6 h-6"})}),s.jsxs("div",{children:[s.jsx(ke,{children:b.name}),s.jsx("p",{className:"text-sm text-gray-600",children:b.category})]})]}),s.jsx("div",{className:"text-right",children:s.jsxs(q,{variant:"primary",children:[B,"h  ",Q," people"]})})]})}),s.jsx(G,{children:E.length===0?s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(Rs,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),s.jsx("p",{children:"No allocations for this project today"})]}):s.jsx("div",{className:"space-y-3",children:E.map(O=>{const J=f.find(oe=>oe.id===O.userId),K=j.find(oe=>oe.id===O.taskId);return s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-gray-900",children:K==null?void 0:K.name}),s.jsxs("div",{className:"text-sm text-gray-600",children:["Assigned to: ",J==null?void 0:J.name]}),s.jsxs("div",{className:"flex items-center mt-1 space-x-4",children:[s.jsx(q,{variant:"secondary",size:"sm",children:K==null?void 0:K.priority}),s.jsx(q,{variant:(K==null?void 0:K.status)==="completed"?"success":(K==null?void 0:K.status)==="in-progress"?"primary":(K==null?void 0:K.status)==="blocked"?"danger":"default",size:"sm",children:K==null?void 0:K.status})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"font-semibold text-lg",children:[O.hoursPerDay,"h"]}),s.jsx("div",{className:"text-sm text-gray-600",children:"allocated"})]})]},`${O.userId}-${O.taskId}`)})})})]},b.id)})});return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Daily Allocations"}),s.jsx("p",{className:"text-gray-600",children:"View team member and project task allocations"})]}),s.jsx(I,{icon:s.jsx(Ge,{className:"w-4 h-4"}),onClick:()=>o(!0),children:"Add Allocation"})]}),s.jsxs("div",{className:"flex items-center justify-between bg-white p-4 rounded-lg border border-gray-200",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(I,{variant:"ghost",size:"sm",onClick:()=>z("prev"),children:s.jsx(Wx,{className:"w-4 h-4"})}),s.jsx("div",{className:"font-medium text-gray-900 min-w-[200px] text-center",children:Z()}),s.jsx(I,{variant:"ghost",size:"sm",onClick:()=>z("next"),children:s.jsx(Bt,{className:"w-4 h-4"})})]}),s.jsx(I,{variant:"outline",size:"sm",onClick:()=>t(new Date),children:"Today"})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Group by:"}),s.jsxs(I,{variant:a==="team"?"primary":"ghost",size:"sm",onClick:()=>l("team"),children:[s.jsx(_e,{className:"w-4 h-4 mr-1"}),"Team"]}),s.jsxs(I,{variant:a==="project"?"primary":"ghost",size:"sm",onClick:()=>l("project"),children:[s.jsx(Rs,{className:"w-4 h-4 mr-1"}),"Project"]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(I,{variant:r==="day"?"primary":"ghost",size:"sm",onClick:()=>n("day"),children:"Day"}),s.jsx(I,{variant:r==="week"?"primary":"ghost",size:"sm",onClick:()=>n("week"),children:"Week"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[s.jsx(V,{children:s.jsx(G,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 rounded-lg bg-blue-50",children:s.jsx(vi,{className:"w-6 h-6 text-blue-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Team"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:f.length})]})]})})}),s.jsx(V,{children:s.jsx(G,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 rounded-lg bg-green-50",children:s.jsx(Xs,{className:"w-6 h-6 text-green-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Available"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:f.filter(b=>F(b.id,e)==="available").length})]})]})})}),s.jsx(V,{children:s.jsx(G,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 rounded-lg bg-yellow-50",children:s.jsx(ps,{className:"w-6 h-6 text-yellow-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Busy"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:f.filter(b=>F(b.id,e)==="busy").length})]})]})})}),s.jsx(V,{children:s.jsx(G,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 rounded-lg bg-red-50",children:s.jsx(ht,{className:"w-6 h-6 text-red-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Overloaded"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:f.filter(b=>F(b.id,e)==="overloaded").length})]})]})})})]}),m&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(ht,{className:"w-5 h-5 text-red-400 mr-2"}),s.jsx("span",{className:"text-red-800",children:m})]})}),$&&s.jsxs("div",{className:"flex items-center justify-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),s.jsx("span",{className:"ml-2 text-gray-600",children:"Loading allocations..."})]}),!$&&(r==="week"?a==="team"?ue():pe():ce()),s.jsx(Gp,{isOpen:i,onClose:()=>o(!1),onSubmit:T,users:f,projects:d,tasks:j})]})}function Gp({isOpen:e,onClose:t,onSubmit:r,users:n,projects:a,tasks:l}){const[i,o]=p.useState({userId:"",projectId:"",taskId:"",hoursPerDay:8,startDate:new Date().toISOString().split("T")[0],endDate:new Date(Date.now()+6048e5).toISOString().split("T")[0]}),c=f=>{f.preventDefault(),r({...i,startDate:new Date(i.startDate),endDate:new Date(i.endDate)}),o({userId:"",projectId:"",taskId:"",hoursPerDay:8,startDate:new Date().toISOString().split("T")[0],endDate:new Date(Date.now()+7*24*60*60*1e3).toISOString().split("T")[0]})},h=l.filter(f=>!i.projectId||f.projectId===i.projectId);return s.jsx(st,{isOpen:e,onClose:t,title:"Add Team Allocation",size:"lg",children:s.jsxs("form",{onSubmit:c,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Team Member *"}),s.jsxs("select",{required:!0,value:i.userId,onChange:f=>o({...i,userId:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Select Team Member"}),n.map(f=>s.jsx("option",{value:f.id,children:f.name},f.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project *"}),s.jsxs("select",{required:!0,value:i.projectId,onChange:f=>o({...i,projectId:f.target.value,taskId:""}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Select Project"}),a.map(f=>s.jsx("option",{value:f.id,children:f.name},f.id))]})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Task *"}),s.jsxs("select",{required:!0,value:i.taskId,onChange:f=>o({...i,taskId:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:!i.projectId,children:[s.jsx("option",{value:"",children:"Select Task"}),h.map(f=>s.jsx("option",{value:f.id,children:f.name},f.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hours per Day"}),s.jsx("input",{type:"number",min:"0.5",max:"12",step:"0.5",value:i.hoursPerDay,onChange:f=>o({...i,hoursPerDay:parseFloat(f.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),s.jsx("input",{type:"date",value:i.startDate,onChange:f=>o({...i,startDate:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),s.jsx("input",{type:"date",value:i.endDate,onChange:f=>o({...i,endDate:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx(I,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),s.jsx(I,{type:"submit",children:"Add Allocation"})]})]})})}function Qp(){const[e,t]=p.useState("categories"),[r,n]=p.useState(!1),[a,l]=p.useState(null),[i,o]=p.useState(!1),[c,h]=p.useState(null),[f,N]=p.useState("eLearning Design"),d=async M=>{try{ue(!0);const W=v.find(re=>re.name===M);if(W){console.log("Loading stages for category:",M,"ID:",W.id);const re=await kt.getByCategory(W.id);console.log("Stages data received:",re),Z(re)}}catch(W){console.error("Failed to load stages for category:",W),Z([])}finally{ue(!1)}},[w,j]=p.useState([]),[P,$]=p.useState([]),[x,m]=p.useState("admin"),[v,_]=p.useState([]),[y,u]=p.useState([]),[g,D]=p.useState(!0),[L,F]=p.useState([{id:"1",name:"Content Development Unit",description:"Responsible for creating and developing educational content",skills:["Content Writers","Instructional Designers"],lead:"Sarah Johnson",isDefault:!0}]),{signUp:te}=Ka(),[z,Z]=p.useState([]),[T,ue]=p.useState(!1);p.useEffect(()=>{(async()=>{var W;try{D(!0);const[re,Y]=await Promise.all([vs.getAll(),Wt.getAll()]);if(_(re),u(Y),re.length>0&&(re.find(Te=>Te.name===f)||N(re[0].name)),re.length>0){const de=(W=re.find(Te=>Te.name===f))==null?void 0:W.id;if(de){console.log("Initial load - Loading stages for category:",f,"ID:",de);const Te=await kt.getByCategory(de);console.log("Initial stages data received:",Te),Z(Te)}}j([{id:"1",name:"Admin User",email:"admin@company.com",role:"admin",createdAt:new Date,isActive:!0}]);const ie=await ye.getAll();$(ie)}catch(re){console.error("Failed to load data:",re)}finally{D(!1)}})()},[f]);const pe=[{key:"categories",label:"Categories",icon:tm},{key:"skills",label:"Skills",icon:_e},{key:"stages",label:"Project Stages",icon:vn},{key:"users",label:"Admin Users",icon:Pa},{key:"functional-units",label:"Functional Units",icon:_e}],ce=async(M,W)=>{var re;try{if(M==="category")if(a!=null&&a.id){const Y=await vs.update(a.id,{name:W.name,description:W.description||null});_(v.map(ie=>ie.id===a.id?Y:ie))}else{const Y=await vs.create({name:W.name,description:W.description||null});_([...v,Y])}else if(M==="skill")if(a!=null&&a.id){const Y=await Wt.update(a.id,{name:W.name,description:W.description||null});u(y.map(ie=>ie.id===a.id?Y:ie))}else{const Y=await Wt.create({name:W.name,description:W.description||null});u([...y,Y])}else if(M==="stage")try{if(a!=null&&a.id){const Y=await kt.update(a.id,{name:W.name,description:W.description||null});await d(f)}else{const Y=await kt.create({name:W.name,description:W.description||null,order_index:z.length+1}),ie=(re=v.find(de=>de.name===f))==null?void 0:re.id;ie&&await Sl.create({category_id:ie,stage_id:Y.id,order_index:z.length+1,is_default:!1}),await d(f)}}catch(Y){console.error("Failed to save stage:",Y),alert("Failed to save stage. Please try again.")}else if(M==="admin-user"){B(W,"admin");return}else if(M==="team-user"){B(W,"team");return}else if(M==="functional-unit"){const Y={id:Date.now().toString(),name:W.name,description:W.description||"",skills:W.skills||[],lead:W.lead||"",isDefault:!1};F([...L,Y])}n(!1),l(null)}catch(Y){console.error("Failed to add item:",Y),alert("Failed to add item. Please try again.")}},b=async(M,W)=>{M==="category"||M==="skill"?(l({...W,type:M}),n(!0)):(l({...W,type:M}),n(!0))},E=async(M,W)=>{var re;try{if(M==="category")await vs.delete(W),_(v.filter(Y=>Y.id!==W));else if(M==="skill")await Wt.delete(W),u(y.filter(Y=>Y.id!==W));else if(M==="stage")try{const Y=(re=v.find(ie=>ie.name===f))==null?void 0:re.id;if(Y)try{const de=(await Sl.getByCategory(Y)).find(Te=>Te.stage_id===W);de&&await Sl.delete(de.id)}catch{console.log("No stage template found to delete")}await kt.delete(W),Z(z.filter(ie=>ie.id!==W))}catch(Y){console.error("Failed to delete stage:",Y),alert("Failed to delete stage. Please try again.")}else M==="admin-user"?j(w.filter(Y=>Y.id!==W)):M==="team-user"?J(W):M==="functional-unit"&&F(L.filter(Y=>Y.id!==W))}catch(Y){console.error("Failed to delete item:",Y),alert("Failed to delete item. Please try again.")}},B=async(M,W)=>{try{if(W==="admin"){const{data:re,error:Y}=await te(M.email,M.password,M.name);if(Y)throw Y;if(re.user){const ie={id:re.user.id,name:M.name,email:M.email,role:"admin",createdAt:new Date,isActive:!0};j([...w,ie])}}else{const re={name:M.name,email:M.email,skills:M.skills||[],passcode:M.passcode||Math.random().toString(36).substring(2,8).toUpperCase(),isActive:M.isActive!==!1,performanceFlags:[]},Y=await ye.create(re),ie={...re,id:Y.id};$([...P,ie])}n(!1),l(null)}catch(re){console.error("Failed to create admin user:",re),alert(`Failed to create user: ${re.message}`)}},Q=async(M,W)=>{try{if(W==="admin"){alert("Admin user access control requires server-side implementation");return}else{const re=P.find(Y=>Y.id===M);if(re){const Y={...re,isActive:!re.isActive};await ye.update(M,Y),$(P.map(ie=>ie.id===M?Y:ie))}}}catch(re){console.error("Failed to toggle user access:",re),alert("Failed to toggle user access")}},O=async(M,W)=>{h(M),m(W),o(!0)},J=async M=>{try{$(P.filter(W=>W.id!==M))}catch(W){console.error("Failed to delete team member:",W)}},K=async(M,W)=>{var re;try{console.log("moveStage called:",{stageId:M,direction:W,currentStages:z});const Y=[...z].sort((k,C)=>(k.template_order||k.order_index)-(C.template_order||C.order_index)),ie=Y.findIndex(k=>k.id===M);if(console.log("Stage index found:",ie),ie===-1){console.log("Stage not found, returning");return}const de=[...Y],Te=W==="up"?ie-1:ie+1;if(console.log("Target index:",Te),Te<0||Te>=de.length){console.log("Target index out of bounds, returning");return}[de[ie],de[Te]]=[de[Te],de[ie]],console.log("Stages swapped"),de.forEach((k,C)=>{k.template_order=C+1}),console.log("Order numbers updated:",de.map(k=>({id:k.id,order:k.template_order}))),Z(de),console.log("Stages state updated");const Dt=(re=v.find(k=>k.name===f))==null?void 0:re.id;if(Dt){const k=de.map((C,ae)=>({stage_id:C.id,order:ae+1}));console.log("Sending reorder request:",{categoryId:Dt,stageOrders:k}),await kt.reorder(Dt,k),console.log("Reorder request completed successfully")}}catch(Y){console.error("Failed to reorder stages:",Y),alert("Failed to reorder stages. Please try again.")}},oe=()=>s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Project Categories"}),s.jsx(I,{icon:s.jsx(Ge,{className:"w-4 h-4"}),onClick:()=>{l({type:"category"}),n(!0)},children:"Add Category"})]}),g?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading categories..."})]})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:v.map(M=>s.jsx(V,{className:"hover:shadow-md transition-shadow",children:s.jsx(G,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:M.name}),s.jsx("p",{className:"text-sm text-gray-600",children:M.isDefault?"Default category":"Custom category"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(I,{variant:"ghost",size:"sm",onClick:()=>b("category",M),children:s.jsx(Us,{className:"w-4 h-4"})}),!M.isDefault&&s.jsx(I,{variant:"ghost",size:"sm",onClick:()=>E("category",M.id),children:s.jsx(Lt,{className:"w-4 h-4"})})]})]})})},M.id))})]}),he=()=>s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Team Skills"}),s.jsx(I,{icon:s.jsx(Ge,{className:"w-4 h-4"}),onClick:()=>{l({type:"skill"}),n(!0)},children:"Add Skill"})]}),g?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading skills..."})]})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:y.map(M=>s.jsx(V,{className:"hover:shadow-md transition-shadow",children:s.jsx(G,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:M.name}),s.jsx("p",{className:"text-sm text-gray-600",children:M.isDefault?"Default skill":"Custom skill"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(I,{variant:"ghost",size:"sm",onClick:()=>b("skill",M),children:s.jsx(Us,{className:"w-4 h-4"})}),!M.isDefault&&s.jsx(I,{variant:"ghost",size:"sm",onClick:()=>E("skill",M.id),children:s.jsx(Lt,{className:"w-4 h-4"})})]})]})})},M.id))})]}),we=()=>s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Project Stages"}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("select",{value:f,onChange:M=>{N(M.target.value),d(M.target.value)},className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:v.map(M=>s.jsx("option",{value:M.name,children:M.name},M.id))}),s.jsx(I,{icon:s.jsx(Ge,{className:"w-4 h-4"}),onClick:()=>{l({type:"stage"}),n(!0)},children:"Add Stage"})]})]}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsxs("h4",{className:"font-medium text-blue-900 mb-2",children:["Category: ",f]}),s.jsxs("p",{className:"text-sm text-blue-700",children:["These stages are specific to ",s.jsx("strong",{children:f})," projects. Each category can have its own unique workflow."]})]}),s.jsx(V,{children:s.jsx(G,{className:"p-0",children:s.jsx("div",{className:"space-y-2 p-4",children:T?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading stages..."})]})}):z.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsxs("div",{className:"text-gray-500 mb-4",children:[s.jsx(vn,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),s.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"No stages found"}),s.jsx("p",{className:"text-gray-600",children:"No stages have been created for this category yet."})]}),s.jsx(I,{icon:s.jsx(Ge,{className:"w-4 h-4"}),onClick:()=>{l({type:"stage"}),n(!0)},children:"Add First Stage"})]}):z.sort((M,W)=>(M.template_order||M.order_index)-(W.template_order||W.order_index)).map((M,W,re)=>s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex flex-col space-y-1",children:[s.jsx(I,{variant:"ghost",size:"sm",onClick:()=>K(M.id,"up"),disabled:W===0,className:"h-6 w-6 p-0",children:""}),s.jsx(I,{variant:"ghost",size:"sm",onClick:()=>K(M.id,"down"),disabled:W===re.length-1,className:"h-6 w-6 p-0",children:""})]}),s.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-blue-100 text-blue-600 rounded-full font-semibold text-sm",children:M.template_order||M.order_index}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:M.name}),s.jsx("p",{className:"text-sm text-gray-600",children:M.description})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[M.is_default&&s.jsx(q,{variant:"secondary",size:"sm",children:"Default"}),s.jsx(I,{variant:"ghost",size:"sm",onClick:()=>b("stage",M),children:s.jsx(Us,{className:"w-4 h-4"})}),!M.is_default&&s.jsx(I,{variant:"ghost",size:"sm",onClick:()=>E("stage",M.id),children:s.jsx(Lt,{className:"w-4 h-4"})})]})]},M.id))})})})]}),Se=()=>s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"User Management"}),s.jsxs("div",{className:"flex items-center space-x-2 bg-gray-100 rounded-lg p-1",children:[s.jsx(I,{variant:x==="admin"?"primary":"ghost",size:"sm",onClick:()=>m("admin"),children:"Admin Users"}),s.jsx(I,{variant:x==="team"?"primary":"ghost",size:"sm",onClick:()=>m("team"),children:"Team Members"})]})]}),s.jsxs(I,{icon:s.jsx(Ge,{className:"w-4 h-4"}),onClick:()=>{l({type:x==="admin"?"admin-user":"team-user"}),n(!0)},children:["Add ",x==="admin"?"Admin User":"Team Member"]})]}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:x==="admin"?"Admin User Management":"Team Member Management"}),s.jsx("p",{className:"text-sm text-blue-700",children:x==="admin"?"Admin users can access the full project management system. They can manage projects, teams, tasks, and settings.":"Team members can access the team portal to view their tasks and performance. They use email and passcode to login."})]}),s.jsx(V,{children:s.jsx(G,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:x==="admin"?"Admin User":"Team Member"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),x==="team"&&s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Passcode"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:x==="admin"?"Role":"Skills"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:x==="admin"?"Created":"Performance"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(x==="admin"?w:P).map(M=>{var W,re,Y,ie;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`w-8 h-8 ${x==="admin"?"bg-blue-500":"bg-green-500"} rounded-full flex items-center justify-center text-white text-sm font-medium`,children:M.name.charAt(0).toUpperCase()}),s.jsx("div",{className:"ml-3",children:s.jsx("div",{className:"text-sm font-medium text-gray-900",children:M.name})})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:M.email}),x==="team"&&s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("code",{className:"text-xs bg-gray-100 px-2 py-1 rounded font-mono",children:M.passcode})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:x==="admin"?s.jsx(q,{variant:"primary",size:"sm",children:M.role}):s.jsxs("div",{className:"flex flex-wrap gap-1",children:[(W=M.skills)==null?void 0:W.slice(0,2).map((de,Te)=>s.jsx(q,{variant:"secondary",size:"sm",children:de},Te)),((re=M.skills)==null?void 0:re.length)>2&&s.jsxs(q,{variant:"secondary",size:"sm",children:["+",M.skills.length-2]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.jsx(q,{variant:M.isActive?"success":"secondary",children:M.isActive?"Active":"Disabled"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:x==="admin"?((Y=M.createdAt)==null?void 0:Y.toLocaleDateString())||"N/A":s.jsx("div",{className:"flex space-x-1",children:(ie=M.performanceFlags)==null?void 0:ie.slice(0,3).map(de=>s.jsx("div",{className:`text-xs px-2 py-1 rounded ${de.type==="gold"?"bg-yellow-500 text-white":de.type==="green"?"bg-green-500 text-white":de.type==="orange"?"bg-orange-500 text-white":"bg-red-500 text-white"}`,title:de.reason,children:de.type},de.id))})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:s.jsxs(I,{variant:"ghost",size:"sm",onClick:()=>E("user",M.id),children:[s.jsx(I,{variant:"ghost",size:"sm",onClick:()=>O(M,x),title:x==="admin"?"Reset Password":"Reset Passcode",children:s.jsx(Yx,{className:"w-4 h-4"})}),s.jsx(I,{variant:"ghost",size:"sm",onClick:()=>Q(M.id,x),title:M.isActive?"Disable Access":"Enable Access",children:M.isActive?s.jsx(qa,{className:"w-4 h-4"}):s.jsx(Sn,{className:"w-4 h-4"})}),s.jsx(I,{variant:"ghost",size:"sm",onClick:()=>E(x==="admin"?"admin-user":"team-user",M.id),children:s.jsx(Lt,{className:"w-4 h-4"})})]})})]},M.id)})})]})})})})]}),ze=()=>s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Functional Units"}),s.jsx(I,{icon:s.jsx(Ge,{className:"w-4 h-4"}),onClick:()=>{l({type:"functional-unit"}),n(!0)},children:"Add Functional Unit"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:L.map(M=>s.jsx(V,{className:"hover:shadow-md transition-shadow",children:s.jsx(G,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:M.name}),s.jsx("p",{className:"text-sm text-gray-600",children:M.description}),M.skills&&M.skills.length>0&&s.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:M.skills.map((W,re)=>s.jsx(q,{variant:"secondary",size:"sm",children:W},re))}),M.lead&&s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Lead: ",M.lead]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(I,{variant:"ghost",size:"sm",onClick:()=>b("functional-unit",M),children:s.jsx(Us,{className:"w-4 h-4"})}),!M.isDefault&&s.jsx(I,{variant:"ghost",size:"sm",onClick:()=>E("functional-unit",M.id),children:s.jsx(Lt,{className:"w-4 h-4"})})]})]})})},M.id))})]});return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Settings"}),s.jsx("p",{className:"text-gray-600",children:"Manage categories, skills, and project stages"})]}),s.jsx("div",{className:"border-b border-gray-200",children:s.jsx("nav",{className:"-mb-px flex space-x-8",children:pe.map(M=>s.jsxs("button",{onClick:()=>t(M.key),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${e===M.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[s.jsx(M.icon,{className:"w-4 h-4"}),s.jsx("span",{children:M.label})]},M.key))})}),s.jsxs("div",{children:[e==="categories"&&oe(),e==="skills"&&he(),e==="stages"&&we(),e==="users"&&Se(),e==="functional-units"&&ze()]}),s.jsx(Kp,{isOpen:r,onClose:()=>{n(!1),l(null)},onSubmit:ce,editingItem:a})]})}function Kp({isOpen:e,onClose:t,onSubmit:r,editingItem:n}){const[a,l]=p.useState({name:"",description:"",email:"",password:"",showPassword:!1,skills:[],lead:""});p.useEffect(()=>{l(n?{name:n.name||"",description:n.description||"",email:n.email||"",password:"",showPassword:!1,skills:n.skills||[],lead:n.lead||""}:{name:"",description:"",email:"",password:"",showPassword:!1,skills:[],lead:""})},[n]);const i=c=>{c.preventDefault(),n!=null&&n.type&&r(n.type,a),l({name:"",description:"",email:"",password:"",showPassword:!1,skills:[],lead:""})},o=()=>{if(!n)return"Add Item";const c=n.id?"Edit":"Add",h=n.type==="category"?"Category":n.type==="skill"?"Skill":n.type==="stage"?"Stage":n.type==="functional-unit"?"Functional Unit":"Admin User";return`${c} ${h}`};return s.jsx(st,{isOpen:e,onClose:t,title:o(),children:s.jsxs("form",{onSubmit:i,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name"}),s.jsx("input",{type:"text",required:!0,value:a.name,onChange:c=>l({...a,name:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:`Enter ${(n==null?void 0:n.type)||"item"} name`})]}),((n==null?void 0:n.type)==="admin-user"||(n==null?void 0:n.type)==="team-user")&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),s.jsx("input",{type:"email",required:!0,value:a.email,onChange:c=>l({...a,email:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter email address"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:a.showPassword?"text":"password",required:!0,value:a.password,onChange:c=>l({...a,password:c.target.value}),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter password",minLength:6}),s.jsx("button",{type:"button",onClick:()=>l({...a,showPassword:!a.showPassword}),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:a.showPassword?s.jsx(qa,{className:"w-4 h-4 text-gray-400"}):s.jsx(Sn,{className:"w-4 h-4 text-gray-400"})})]})]})]}),((n==null?void 0:n.type)==="stage"||(n==null?void 0:n.type)==="functional-unit")&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),s.jsx("textarea",{value:a.description,onChange:c=>l({...a,description:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:`Enter ${(n==null?void 0:n.type)==="stage"?"stage":"functional unit"} description`})]}),(n==null?void 0:n.type)==="functional-unit"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Skills"}),s.jsx("div",{className:"grid grid-cols-3 gap-2 max-h-32 overflow-y-auto border border-gray-300 rounded-lg p-2",children:["Content Writers","Instructional Designers","Graphic Designers","Developers","Animators","Tech","Sales","Marketing","QA"].map(c=>s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:a.skills.includes(c),onChange:h=>{h.target.checked?l({...a,skills:[...a.skills,c]}):l({...a,skills:a.skills.filter(f=>f!==c)})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:c})]},c))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unit Lead (Optional)"}),s.jsx("input",{type:"text",value:a.lead,onChange:c=>l({...a,lead:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter unit lead name"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx(I,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),s.jsx(I,{type:"submit",children:n!=null&&n.id?"Update":"Add"})]})]})})}function qp(){const[e,t]=p.useState("month"),[r,n]=p.useState("overview"),[a,l]=p.useState("all"),[i,o]=p.useState("all"),[c,h]=p.useState(!0),[f,N]=p.useState(!1),[d,w]=p.useState({projects:[],tasks:[],teamMembers:[],categories:[],skills:[]});p.useEffect(()=>{j()},[]);const j=async()=>{try{h(!0);const[u,g,D,L,F]=await Promise.all([Pe.getAll(),et.getAll(),ye.getAll(),vs.getAll(),Wt.getAll()]);w({projects:u,tasks:g,teamMembers:D,categories:L,skills:F})}catch(u){console.error("Failed to load analytics data:",u)}finally{h(!1)}},P=async()=>{N(!0),await j(),N(!1)},$=p.useMemo(()=>{const u=a==="all"?d.projects:d.projects.filter(z=>z.category_id===parseInt(a)),g=i==="all"?d.tasks:d.tasks.filter(z=>z.skills&&z.skills.includes(parseInt(i))),D=new Date,L={week:7,month:30,quarter:90,year:365}[e],F=d.tasks.filter(z=>{const Z=new Date(z.created_at);return(D.getTime()-Z.getTime())/(1e3*3600*24)<=L}),te=d.projects.filter(z=>{const Z=new Date(z.created_at);return(D.getTime()-Z.getTime())/(1e3*3600*24)<=L});return{projectStats:{total:u.length,active:u.filter(z=>z.status==="active").length,completed:u.filter(z=>z.status==="completed").length,onHold:u.filter(z=>z.status==="on-hold").length,recent:te.length,avgDuration:u.length>0?Math.round(u.reduce((z,Z)=>{if(Z.start_date&&Z.end_date){const T=new Date(Z.start_date),ue=new Date(Z.end_date);return z+(ue.getTime()-T.getTime())/(1e3*3600*24)}return z},0)/u.length):0},taskStats:{total:g.length,completed:g.filter(z=>z.status==="completed").length,inProgress:g.filter(z=>z.status==="in-progress").length,overdue:g.filter(z=>new Date(z.end_date)<D&&z.status!=="completed").length,recent:F.length,avgCompletionTime:g.filter(z=>z.status==="completed").length>0?Math.round(g.filter(z=>z.status==="completed").reduce((z,Z)=>{if(Z.created_at&&Z.updated_at){const T=new Date(Z.created_at),ue=new Date(Z.updated_at);return z+(ue.getTime()-T.getTime())/(1e3*3600*24)}return z},0)/g.filter(z=>z.status==="completed").length):0},teamStats:{total:d.teamMembers.length,active:d.teamMembers.filter(z=>g.some(Z=>Z.assignees&&Z.assignees.includes(z.id)&&Z.status!=="completed")).length,available:d.teamMembers.filter(z=>!g.some(Z=>Z.assignees&&Z.assignees.includes(z.id)&&Z.status!=="completed")).length,utilization:d.teamMembers.length>0?Math.round(d.teamMembers.filter(z=>g.some(Z=>Z.assignees&&Z.assignees.includes(z.id)&&Z.status!=="completed")).length/d.teamMembers.length*100):0},productivity:{completionRate:g.length>0?Math.round(g.filter(z=>z.status==="completed").length/g.length*100):0,averageProgress:u.length>0?Math.round(u.reduce((z,Z)=>z+(Z.progress||0),0)/u.length):0,efficiency:g.length>0?Math.round(g.filter(z=>z.status==="completed").length/g.length*(u.reduce((z,Z)=>z+(Z.progress||0),0)/u.length)*100):0},trends:{taskGrowth:F.length>0?Math.round(F.length/d.tasks.length*100):0,projectGrowth:te.length>0?Math.round(te.length/d.projects.length*100):0,completionTrend:F.filter(z=>z.status==="completed").length>0?Math.round(F.filter(z=>z.status==="completed").length/F.length*100):0}}},[d,e,a,i]),x=p.useMemo(()=>d.categories.map(u=>({name:u.name,count:d.projects.filter(g=>g.category_id===u.id).length,percentage:d.projects.length>0?Math.round(d.projects.filter(g=>g.category_id===u.id).length/d.projects.length*100):0,avgProgress:d.projects.filter(g=>g.category_id===u.id).length>0?Math.round(d.projects.filter(g=>g.category_id===u.id).reduce((g,D)=>g+(D.progress||0),0)/d.projects.filter(g=>g.category_id===u.id).length):0,completionRate:d.projects.filter(g=>g.category_id===u.id).length>0?Math.round(d.projects.filter(g=>g.category_id===u.id&&g.status==="completed").length/d.projects.filter(g=>g.category_id===u.id).length*100):0})),[d]),m=p.useMemo(()=>d.skills.map(u=>{const g=d.tasks.filter(L=>L.skills&&L.skills.includes(u.id)),D=d.teamMembers.filter(L=>L.skills&&L.skills.includes(u.id));return{name:u.name,users:D.length,activeTasks:g.filter(L=>L.status!=="completed").length,totalTasks:g.length,completionRate:g.length>0?Math.round(g.filter(L=>L.status==="completed").length/g.length*100):0,demand:g.length>0?Math.round(g.length/d.tasks.length*100):0}}),[d]),v=p.useMemo(()=>d.teamMembers.map(u=>{const g=d.tasks.filter(te=>te.assignees&&te.assignees.includes(u.id)),D=g.filter(te=>te.status==="completed"),L=g.length>0?Math.round(D.length/g.length*100):0,F=g.length>0?Math.round(L*.4+g.filter(te=>te.status==="completed"&&new Date(te.end_date)>=new Date).length/g.length*60):0;return{...u,totalTasks:g.length,completedTasks:D.length,completionRate:L,efficiencyScore:F,avgTaskDuration:D.length>0?Math.round(D.reduce((te,z)=>{if(z.created_at&&z.updated_at){const Z=new Date(z.created_at),T=new Date(z.updated_at);return te+(T.getTime()-Z.getTime())/(1e3*3600*24)}return te},0)/D.length):0}}).sort((u,g)=>g.efficiencyScore-u.efficiencyScore).slice(0,5),[d]),_=p.useMemo(()=>{const u=d.tasks.filter(L=>new Date(L.end_date)<new Date&&L.status!=="completed"),g=d.tasks.filter(L=>L.priority==="high"),D=d.projects.filter(L=>(L.progress||0)<30);return{overdueTasks:u.length,highPriorityTasks:g.length,lowProgressProjects:D.length,riskScore:Math.round((u.length*.4+g.length*.3+D.length*.3)/Math.max(d.tasks.length+d.projects.length,1)*100),efficiencyGap:$.productivity.completionRate>0?Math.round((100-$.productivity.completionRate)/10):0}},[d,$]),y=p.useMemo(()=>{const u=new Date,g=d.tasks.filter(L=>{const F=new Date(L.created_at);return(u.getTime()-F.getTime())/(1e3*3600*24)<=7}),D=d.tasks.filter(L=>{const F=new Date(L.created_at);return(u.getTime()-F.getTime())/(1e3*3600*24)<=30});return{weeklyGrowth:g.length>0?Math.round(g.length/d.tasks.length*100):0,monthlyGrowth:D.length>0?Math.round(D.length/d.tasks.length*100):0,weeklyCompletion:g.filter(L=>L.status==="completed").length,monthlyCompletion:D.filter(L=>L.status==="completed").length}},[d]);return c?s.jsx("div",{className:"p-6 space-y-6",children:s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading analytics data..."})]})})}):s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Analytics Dashboard"}),s.jsx("p",{className:"text-gray-600",children:"Advanced insights and performance metrics for your projects"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 rounded-lg p-1",children:[s.jsxs(I,{variant:r==="overview"?"primary":"ghost",size:"sm",onClick:()=>n("overview"),children:[s.jsx(Sn,{className:"w-4 h-4 mr-1"}),"Overview"]}),s.jsxs(I,{variant:r==="detailed"?"primary":"ghost",size:"sm",onClick:()=>n("detailed"),children:[s.jsx(Ux,{className:"w-4 h-4 mr-1"}),"Detailed"]}),s.jsxs(I,{variant:r==="trends"?"primary":"ghost",size:"sm",onClick:()=>n("trends"),children:[s.jsx(Jr,{className:"w-4 h-4 mr-1"}),"Trends"]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("select",{value:a,onChange:u=>l(u.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[s.jsx("option",{value:"all",children:"All Categories"}),d.categories.map(u=>s.jsx("option",{value:u.id,children:u.name},u.id))]}),s.jsxs("select",{value:i,onChange:u=>o(u.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[s.jsx("option",{value:"all",children:"All Skills"}),d.skills.map(u=>s.jsx("option",{value:u.id,children:u.name},u.id))]}),s.jsxs("select",{value:e,onChange:u=>t(u.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[s.jsx("option",{value:"week",children:"Last Week"}),s.jsx("option",{value:"month",children:"Last Month"}),s.jsx("option",{value:"quarter",children:"Last Quarter"}),s.jsx("option",{value:"year",children:"Last Year"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(I,{variant:"outline",size:"sm",onClick:P,disabled:f,children:[s.jsx(yi,{className:`w-4 h-4 mr-1 ${f?"animate-spin":""}`}),"Refresh"]}),s.jsxs(I,{variant:"outline",size:"sm",children:[s.jsx(Gx,{className:"w-4 h-4 mr-1"}),"Export"]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(V,{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:s.jsx(G,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("p",{className:"text-blue-100 text-sm font-medium",children:"Efficiency Score"}),s.jsx(q,{variant:"default",className:"bg-blue-400 text-white text-xs",children:$.productivity.efficiency>$.productivity.completionRate?s.jsx(Rx,{className:"w-3 h-3"}):s.jsx(Fx,{className:"w-3 h-3"})})]}),s.jsxs("p",{className:"text-3xl font-bold",children:[$.productivity.efficiency,"%"]}),s.jsxs("p",{className:"text-blue-100 text-sm",children:[$.productivity.completionRate,"% completion rate"]})]}),s.jsx(bl,{className:"w-12 h-12 text-blue-200"})]})})}),s.jsx(V,{className:"bg-gradient-to-r from-green-500 to-green-600 text-white",children:s.jsx(G,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("p",{className:"text-green-100 text-sm font-medium",children:"Team Utilization"}),s.jsxs(q,{variant:"default",className:"bg-green-400 text-white text-xs",children:[$.teamStats.utilization,"%"]})]}),s.jsx("p",{className:"text-3xl font-bold",children:$.teamStats.active}),s.jsxs("p",{className:"text-green-100 text-sm",children:["of ",$.teamStats.total," members active"]})]}),s.jsx(_e,{className:"w-12 h-12 text-green-200"})]})})}),s.jsx(V,{className:"bg-gradient-to-r from-purple-500 to-purple-600 text-white",children:s.jsx(G,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("p",{className:"text-purple-100 text-sm font-medium",children:"Productivity"}),s.jsxs(q,{variant:"default",className:"bg-purple-400 text-white text-xs",children:[$.trends.completionTrend,"% trend"]})]}),s.jsxs("p",{className:"text-3xl font-bold",children:[$.productivity.averageProgress,"%"]}),s.jsxs("p",{className:"text-purple-100 text-sm",children:[$.taskStats.completed,"/",$.taskStats.total," tasks done"]})]}),s.jsx(tp,{className:"w-12 h-12 text-purple-200"})]})})}),s.jsx(V,{className:"bg-gradient-to-r from-red-500 to-red-600 text-white",children:s.jsx(G,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("p",{className:"text-red-100 text-sm font-medium",children:"Risk Score"}),s.jsxs(q,{variant:"default",className:"bg-red-400 text-white text-xs",children:[_.riskScore,"%"]})]}),s.jsx("p",{className:"text-3xl font-bold",children:$.taskStats.overdue}),s.jsxs("p",{className:"text-red-100 text-sm",children:[_.highPriorityTasks," high priority"]})]}),s.jsx(ht,{className:"w-12 h-12 text-red-200"})]})})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx(V,{className:"bg-gradient-to-r from-yellow-500 to-yellow-600 text-white",children:s.jsx(G,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-yellow-100 text-sm font-medium",children:"Weekly Growth"}),s.jsxs("p",{className:"text-2xl font-bold",children:[y.weeklyGrowth,"%"]}),s.jsxs("p",{className:"text-yellow-100 text-sm",children:[y.weeklyCompletion," completed this week"]})]}),s.jsx(Jr,{className:"w-10 h-10 text-yellow-200"})]})})}),s.jsx(V,{className:"bg-gradient-to-r from-indigo-500 to-indigo-600 text-white",children:s.jsx(G,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-indigo-100 text-sm font-medium",children:"Avg Task Duration"}),s.jsx("p",{className:"text-2xl font-bold",children:$.taskStats.avgCompletionTime}),s.jsx("p",{className:"text-indigo-100 text-sm",children:"days to complete"})]}),s.jsx(Vx,{className:"w-10 h-10 text-indigo-200"})]})})}),s.jsx(V,{className:"bg-gradient-to-r from-pink-500 to-pink-600 text-white",children:s.jsx(G,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-pink-100 text-sm font-medium",children:"Efficiency Gap"}),s.jsxs("p",{className:"text-2xl font-bold",children:[_.efficiencyGap,"%"]}),s.jsx("p",{className:"text-pink-100 text-sm",children:"room for improvement"})]}),s.jsx(Kx,{className:"w-10 h-10 text-pink-200"})]})})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(V,{children:[s.jsx(Ne,{children:s.jsxs(ke,{className:"flex items-center",children:[s.jsx(ep,{className:"w-5 h-5 mr-2"}),"Project Status Distribution"]})}),s.jsx(G,{className:"space-y-4",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-32",children:s.jsx(Qe,{value:$.projectStats.total>0?$.projectStats.active/$.projectStats.total*100:0,variant:"default",showLabel:!1})}),s.jsx("span",{className:"text-sm text-gray-600",children:$.projectStats.active})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Completed"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-32",children:s.jsx(Qe,{value:$.projectStats.total>0?$.projectStats.completed/$.projectStats.total*100:0,variant:"success",showLabel:!1})}),s.jsx("span",{className:"text-sm text-gray-600",children:$.projectStats.completed})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"On Hold"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-32",children:s.jsx(Qe,{value:$.projectStats.total>0?$.projectStats.onHold/$.projectStats.total*100:0,variant:"warning",showLabel:!1})}),s.jsx("span",{className:"text-sm text-gray-600",children:$.projectStats.onHold})]})]})]})})]}),s.jsxs(V,{children:[s.jsx(Ne,{children:s.jsxs(ke,{className:"flex items-center",children:[s.jsx(ps,{className:"w-5 h-5 mr-2"}),"Category Performance"]})}),s.jsx(G,{className:"space-y-4",children:x.map(u=>s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:u.name}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(q,{variant:u.completionRate>=80?"success":u.completionRate>=60?"default":"warning",children:[u.completionRate,"%"]}),s.jsxs("span",{className:"text-sm text-gray-600",children:[u.count," projects"]})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[s.jsx("span",{children:"Distribution"}),s.jsxs("span",{children:[u.percentage,"%"]})]}),s.jsx(Qe,{value:u.percentage,showLabel:!1}),s.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[s.jsx("span",{children:"Avg Progress"}),s.jsxs("span",{children:[u.avgProgress,"%"]})]}),s.jsx(Qe,{value:u.avgProgress,variant:"success",showLabel:!1})]})]},u.name))})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(V,{children:[s.jsx(Ne,{children:s.jsxs(ke,{className:"flex items-center",children:[s.jsx(Ec,{className:"w-5 h-5 mr-2"}),"Top Performers"]})}),s.jsx(G,{className:"space-y-4",children:v.map((u,g)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-gradient-to-r from-yellow-400 to-yellow-600 text-white rounded-full font-semibold text-sm",children:g===0?s.jsx(Ec,{className:"w-4 h-4"}):g===1?s.jsx(Gu,{className:"w-4 h-4"}):g===2?s.jsx(em,{className:"w-4 h-4"}):`#${g+1}`}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:u.name}),s.jsxs("p",{className:"text-sm text-gray-600",children:[u.completedTasks,"/",u.totalTasks," tasks  ",u.avgTaskDuration," days avg"]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs(q,{variant:u.efficiencyScore>=80?"success":u.efficiencyScore>=60?"default":"warning",children:[u.efficiencyScore,"%"]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Efficiency"})]})]},u.id))})]}),s.jsxs(V,{children:[s.jsx(Ne,{children:s.jsxs(ke,{className:"flex items-center",children:[s.jsx(_e,{className:"w-5 h-5 mr-2"}),"Skill Demand & Utilization"]})}),s.jsx(G,{className:"space-y-4",children:m.slice(0,6).map(u=>s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:u.name}),s.jsxs("p",{className:"text-sm text-gray-600",children:[u.users," members  ",u.totalTasks," total tasks"]})]}),s.jsx("div",{className:"text-right",children:s.jsxs(q,{variant:u.demand>=20?"success":u.demand>=10?"default":"warning",children:[u.demand,"% demand"]})})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[s.jsx("span",{children:"Completion Rate"}),s.jsxs("span",{children:[u.completionRate,"%"]})]}),s.jsx(Qe,{value:u.completionRate,variant:u.completionRate>=80?"success":u.completionRate>=60?"default":"warning",showLabel:!1}),s.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[s.jsx("span",{children:"Active Tasks"}),s.jsx("span",{children:u.activeTasks})]})]})]},u.name))})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(V,{children:[s.jsx(Ne,{children:s.jsxs(ke,{className:"flex items-center",children:[s.jsx(Zx,{className:"w-5 h-5 mr-2"}),"Performance Insights"]})}),s.jsx(G,{className:"space-y-4",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ht,{className:"w-5 h-5 text-orange-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Overdue Tasks"})]}),s.jsx(q,{variant:"warning",children:_.overdueTasks})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 bg-yellow-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(bl,{className:"w-5 h-5 text-yellow-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"High Priority"})]}),s.jsx(q,{variant:"warning",children:_.highPriorityTasks})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(rp,{className:"w-5 h-5 text-red-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Low Progress Projects"})]}),s.jsx(q,{variant:"danger",children:_.lowProgressProjects})]})]})})]}),s.jsxs(V,{children:[s.jsx(Ne,{children:s.jsxs(ke,{className:"flex items-center",children:[s.jsx(ap,{className:"w-5 h-5 mr-2"}),"Quick Actions"]})}),s.jsx(G,{className:"space-y-4",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs(I,{variant:"outline",className:"w-full justify-start",children:[s.jsx(Xs,{className:"w-4 h-4 mr-2"}),"Review Overdue Tasks"]}),s.jsxs(I,{variant:"outline",className:"w-full justify-start",children:[s.jsx(bl,{className:"w-4 h-4 mr-2"}),"Prioritize High Priority Items"]}),s.jsxs(I,{variant:"outline",className:"w-full justify-start",children:[s.jsx(_e,{className:"w-4 h-4 mr-2"}),"Reassign Underutilized Team"]}),s.jsxs(I,{variant:"outline",className:"w-full justify-start",children:[s.jsx(Jr,{className:"w-4 h-4 mr-2"}),"Optimize Workflow"]})]})})]})]}),s.jsxs(V,{children:[s.jsx(Ne,{children:s.jsxs(ke,{className:"flex items-center",children:[s.jsx(Hx,{className:"w-5 h-5 mr-2"}),"Task Timeline Overview"]})}),s.jsx(G,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[s.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[s.jsx("div",{className:"text-3xl font-bold text-blue-600",children:$.taskStats.total}),s.jsx("div",{className:"text-sm text-gray-600",children:"Total Tasks"}),s.jsxs("div",{className:"text-xs text-blue-500 mt-1",children:["+",y.weeklyGrowth,"% this week"]})]}),s.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[s.jsx("div",{className:"text-3xl font-bold text-green-600",children:$.taskStats.completed}),s.jsx("div",{className:"text-sm text-gray-600",children:"Completed"}),s.jsxs("div",{className:"text-xs text-green-500 mt-1",children:["+",y.weeklyCompletion," this week"]})]}),s.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[s.jsx("div",{className:"text-3xl font-bold text-purple-600",children:$.taskStats.inProgress}),s.jsx("div",{className:"text-sm text-gray-600",children:"In Progress"}),s.jsxs("div",{className:"text-xs text-purple-500 mt-1",children:[$.taskStats.avgCompletionTime," days avg"]})]}),s.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[s.jsx("div",{className:"text-3xl font-bold text-red-600",children:$.taskStats.overdue}),s.jsx("div",{className:"text-sm text-gray-600",children:"Overdue"}),s.jsxs("div",{className:"text-xs text-red-500 mt-1",children:["Risk Score: ",_.riskScore,"%"]})]})]})})]})]})}function Yp(){const{state:e}=Pr(),t=()=>{switch(e.selectedView){case"projects":return s.jsx(Rp,{});case"teams":return s.jsx(Bp,{});case"tasks":return s.jsx(_p,{});case"allocations":return s.jsx(Vp,{});case"analytics":return s.jsx(qp,{});case"settings":return s.jsx(Qp,{});default:return s.jsx(jp,{})}};return s.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[s.jsx(yp,{}),s.jsxs("div",{className:"flex-1 flex flex-col",children:[s.jsx(vp,{}),s.jsx("main",{className:"flex-1 overflow-y-auto",children:t()})]})]})}function Xp(){const{user:e,loading:t}=Ka(),[r,n]=p.useState(null),[a,l]=p.useState(!1);return t?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Cn,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-blue-600"}),s.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):a?r?s.jsx(dp,{user:r,onLogout:()=>{n(null),l(!1)}}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-emerald-100 flex items-center justify-center p-4",children:s.jsx(cp,{onLogin:i=>n(i),onBackToAdmin:()=>l(!1)})}):e?s.jsx(Yp,{}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:s.jsx(lp,{onSwitchToTeam:()=>l(!0)})})}Wu(document.getElementById("root")).render(s.jsx(p.StrictMode,{children:s.jsx(Ax,{children:s.jsx(fp,{children:s.jsx(Xp,{})})})}));
